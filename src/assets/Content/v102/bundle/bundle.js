/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "../../";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/currency-selector/currency-selector.vue?vue&type=script&lang=js":
/*!**************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/components/currency-selector/currency-selector.vue?vue&type=script&lang=js ***!
  \**************************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var vuex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vuex/dist/vuex.esm.js");
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//




 __webpack_exports__["default"] = ({
    data: function data() {
        return {
            selectedCurrencyOnUI: null,
            currencyFlags: window.staticMediaObjects && window.staticMediaObjects.currency
        };
    },


    computed: _extends({}, Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapState"])('currency', ['currencies']), {
        selectedCurrency: function selectedCurrency() {
            return this.$store.state.currency.currencies.find(function (currency) {
                return currency.selected;
            }) || {};
        }
    }),

    methods: _extends({
        selectRadio: function selectRadio(currency) {
            this.selectedCurrencyOnUI = currency;
        },
        back: function back() {
            this.$router.back();
        }
    }, Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapActions"])('currency', {
        selectCurrency: function selectCurrency(dispatch, param) {
            dispatch(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["SELECT_CURRENCY"], param);
        }
    }))
});

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/global-search/global-search.vue?vue&type=script&lang=js":
/*!******************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/components/global-search/global-search.vue?vue&type=script&lang=js ***!
  \******************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var vuex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vuex/dist/vuex.esm.js");
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
 var _shared_js_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/shared/js/util.js");
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//





 __webpack_exports__["default"] = ({
    computed: _extends({}, Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapState"])({
        searchResults: function searchResults(state) {
            return state.globalSearch.searchResults;
        },
        searchHistory: function searchHistory(state) {
            return state.globalSearch.searchHistory;
        }
    }), Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapGetters"])({
        searchResultslist: 'globalSearch/searchResultslist'
    })),
    created: function created() {
        this.getHistory();
    },
    beforeRouteEnter: function beforeRouteEnter(to, from, next) {
        next(function (vm) {
            vm.$nextTick(function () {
                vm.$refs.input && vm.$refs.input.focus();
            });
        });
    },
    data: function data() {
        return {
            searchVal: '',
            noResults: true,
            searchKey: '',
            showAllList: false,
            getFocus: false,
            ops: {
                vuescroll: {
                    mode: 'native'
                },
                scrollPanel: {},
                rail: {
                    background: '#DCD7D2',
                    opacity: 1,
                    /** Rail's size(Height/Width) , default -> 6px */
                    size: '0.8rem',
                    /** Specify rail and bar's border-radius, or the border-radius of rail and bar will be equal to the rail's size. default -> false **/
                    specifyBorderRadius: false,
                    /** Rail the distance from the two ends of the X axis and Y axis. **/
                    gutterOfEnds: '2px',
                    /** Rail the distance from the side of container. **/
                    gutterOfSide: '0',
                    /** Whether to keep rail show or not, default -> false, event content height is not enough */
                    keepShow: true
                },
                bar: {
                    showDelay: 500,
                    onlyShowBarOnScroll: false,
                    background: '#3F3939',
                    opacity: 1,
                    hoverStyle: false,
                    keepShow: true
                }
            }
        };
    },

    watch: {
        searchVal: _shared_js_util__WEBPACK_IMPORTED_MODULE_2__["default"].debounce(function () {
            this.searchHotel();
        }, 800)
    },
    directives: {
        debounce: {
            inserted: function inserted(el, binding) {
                var timer = void 0;
                el.addEventListener('keyup', function () {
                    if (timer) {
                        clearTimeout(timer);
                    }
                    timer = setTimeout(function () {
                        binding.value();
                    }, 800);
                });
            }
        }
    },
    methods: _extends({}, Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapActions"])('globalSearch', {
        searchHotel: function searchHotel(dispatch) {
            dispatch(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["SEARCH_HOTEL"], { keyword: this.searchVal });
        }
    }), Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapActions"])('globalSearch', {
        getHistory: function getHistory(dispatch) {
            dispatch(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["GET_SEARCH_HISTORY"]);
        }
    }), {
        back: function back() {
            this.$router.back();
        },
        toggleViewAll: function toggleViewAll() {
            this.showAllList = !this.showAllList;
        },
        clear: function clear() {
            this.searchVal = '';
        },
        focus: function focus() {
            this.getFocus = true;
        },
        blur: function blur() {
            this.getFocus = false;
        },
        gotoLink: function gotoLink(url) {
            sessionStorage.setItem("searchState", "");
            window.location.href = url;
        }
    })
});

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/going-app/going-app.vue?vue&type=script&lang=js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/components/going-app/going-app.vue?vue&type=script&lang=js ***!
  \**********************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var vuex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vuex/dist/vuex.esm.js");
 var _shared_js_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/util.js");
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

//
//
//
//
//
//
//
//
//
//
//
//
//
//



 __webpack_exports__["default"] = ({
    data: function data() {
        return {
            appInstallClosed: localStorage.getItem('appInstallClosed'),
            fromapp: _shared_js_util__WEBPACK_IMPORTED_MODULE_1__["default"].getUrlParamQuestion().fromapp === 'true'
        };
    },

    computed: _extends({}, Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapState"])({
        appConfig: function appConfig(state) {
            return state.appConfig;
        }
    })),
    methods: {
        close: function close() {
            this.appInstallClosed = true;
            localStorage.setItem('appInstallClosed', true);
        },
        goApp: function goApp() {
            var links = this.appConfig.links;
            if (navigator.userAgent.match(/(iPhone|iPod|iPad);?/i)) {
                var loadDateTime = Date.now();
                setTimeout(function () {
                    var timeOutDateTime = Date.now();
                    if (timeOutDateTime - loadDateTime < 3000 && document.hasFocus() && !document.hidden) {
                        window.location.href = links.appleStoreUrl;
                    }
                }, 1000);
                window.location.href = links.appleProtocol; //ios app协议
            }
            if (navigator.userAgent.match(/android/i)) {
                window.location.href = links.androidProtocol; //android app协议
                var loadDateTime = Date.now();
                setTimeout(function () {
                    var timeOutDateTime = Date.now();
                    if (timeOutDateTime - loadDateTime < 3000 && !document.hidden && !document.webkitHidden) {
                        window.location.href = links.androidStoreUrl;
                    }
                }, 1000);
            }
        }
    }
});

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/homepage/search-overlay/search-overlay.vue?vue&type=script&lang=js":
/*!*****************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/components/homepage/search-overlay/search-overlay.vue?vue&type=script&lang=js ***!
  \*****************************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _shared_js_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/shared/js/util.js");
 var vuex__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./node_modules/vuex/dist/vuex.esm.js");
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//


//  import searchInput from '../components/search-input.vue';



 __webpack_exports__["default"] = ({
    //    components: {
    //      'search-input': searchInput,
    //    },
    computed: _extends({}, Object(vuex__WEBPACK_IMPORTED_MODULE_1__["mapState"])({
        searchLocation: function searchLocation(state) {
            return state.searchOverlay.searchLocation;
        },
        searchResults: function searchResults(state) {
            return state.searchOverlay.searchResults;
        },
        topTen: function topTen(state) {
            return state.searchOverlay.topTen;
        }
    })),
    created: function created() {
        this.getTopTen();
    },
    beforeRouteEnter: function beforeRouteEnter(to, from, next) {
        next(function (vm) {
            vm.$nextTick(function () {
                vm.$refs.input && vm.$refs.input.focus();
            });
        });
    },
    data: function data() {
        return {
            searchVal: '',
            noResults: true,
            searchKey: ''
        };
    },

    watch: {
        searchResults: function searchResults() {
            this.searchKey = this.searchVal;
            if (!this.searchVal || !this.searchResults) return false;
            if (this.searchResults.city.length == 0 && this.searchResults.hotel.length == 0) {
                this.noResults = true;
            } else {
                this.noResults = false;
            }
        }
    },
    directives: {
        debounce: {
            inserted: function inserted(el, binding) {
                var timer = void 0;
                el.addEventListener('keyup', function () {
                    if (timer) {
                        clearTimeout(timer);
                    }
                    timer = setTimeout(function () {
                        binding.value();
                    }, 800);
                });
            }
        }
    },
    methods: _extends({}, Object(vuex__WEBPACK_IMPORTED_MODULE_1__["mapActions"])('searchOverlay', {
        updateLocation: function updateLocation(dispatch, item) {
            dispatch(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_2__["UPDATE_LOCATION"], { searchLocation: item });
            this.$router.push({ path: '/search-page' });
        }
    }), Object(vuex__WEBPACK_IMPORTED_MODULE_1__["mapActions"])('searchOverlay', {
        getTopTen: function getTopTen(dispatch, item) {
            dispatch(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_2__["GET_TOP_TEN"], { searchLocation: item });
        }
    }), Object(vuex__WEBPACK_IMPORTED_MODULE_1__["mapActions"])('searchOverlay', {
        searchHotel: function searchHotel(dispatch) {
            dispatch(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_2__["SEARCH_HOTEL"], { keyword: this.searchVal });
        }
    }))
});

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/language-selector/language-selector.vue?vue&type=script&lang=js":
/*!**************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/components/language-selector/language-selector.vue?vue&type=script&lang=js ***!
  \**************************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var vuex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vuex/dist/vuex.esm.js");
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//




 __webpack_exports__["default"] = ({
    data: function data() {
        return {
            selectedLanguageOnUI: null
        };
    },


    computed: _extends({}, Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapState"])('language', ['languages']), {
        selectedLanguage: function selectedLanguage() {
            return this.$store.state.language.languages.find(function (lang) {
                return lang.selected;
            }) || {};
        }
    }),

    methods: _extends({
        selectRadio: function selectRadio(language) {
            this.selectedLanguageOnUI = language;
        },
        back: function back() {
            this.$router.back();
        }
    }, Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapActions"])('language', {
        selectLanguage: function selectLanguage(dispatch, param) {
            dispatch(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["SELECT_LANGUAGE"], param);
        }
    }))
});

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/layer/loading/loading.vue?vue&type=script&lang=js":
/*!************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/components/layer/loading/loading.vue?vue&type=script&lang=js ***!
  \************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var vuex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vuex/dist/vuex.esm.js");
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//


 __webpack_exports__["default"] = ({
    data: function data() {
        return {};
    },

    computed: _extends({}, Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapGetters"])({
        loadingShow: 'loading/loadingShow'
    })),
    methods: {}
});

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=script&lang=js":
/*!*******************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=script&lang=js ***!
  \*******************************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var vuex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vuex/dist/vuex.esm.js");
 var _navigation_popup_navigation_popup_vue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/components/navigation/navigation-popup/navigation-popup.vue");
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//





 __webpack_exports__["default"] = ({
    components: {
        "navigation-popup": _navigation_popup_navigation_popup_vue__WEBPACK_IMPORTED_MODULE_1__["default"]
    },

    computed: _extends({}, Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapState"])({
        navigation: function navigation(state) {
            return state.navigation;
        }
    })),

    mounted: function mounted() {
        if (document.querySelector('.cookie-policy-cro')) {
            var height = document.querySelector('.cookie-policy-cro').clientHeight;
            if (height) this.$refs.container.style.top = height + 'px';
        }
    },


    methods: _extends({}, Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapActions"])('navigation', {
        toggleMenu: _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_2__["TOGGLE_NAV_MENU"]
    }), {
        toHome: function toHome() {
            window.location.href = '/' + (document.querySelector('html').getAttribute('lang') || '');
        },
        toM4BHome: function toM4BHome() {
            window.location.href = this.navigation.M4BHomePageUrl;
        },


        // use hidden input to trigger programmatically focus of the input on next route
        // https://stackoverflow.com/questions/12204571/mobile-safari-javascript-focus-method-on-inputfield-only-works-with-click
        triggerSearchFocus: function triggerSearchFocus() {
            this.$refs.hiddenFocus.focus();
        }
    })
});

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=script&lang=js":
/*!***********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=script&lang=js ***!
  \***********************************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var vuex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vuex/dist/vuex.esm.js");
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//




 __webpack_exports__["default"] = ({
    data: function data() {
        return {};
    },


    computed: _extends({}, Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapState"])({
        user: function user(state) {
            return state.user;
        },
        navigation: function navigation(state) {
            return state.navigation;
        }
    }), {
        selectedCurrency: function selectedCurrency() {
            return this.$store.state.currency.currencies.find(function (currency) {
                return currency.selected;
            }) || {};
        },
        selectedLanguage: function selectedLanguage() {
            return this.$store.state.language.languages.find(function (lang) {
                return lang.selected;
            }) || {};
        },
        navigationLinks: function navigationLinks() {
            if (this.$store.state.navigation.NavigationMobile && this.$store.state.navigation.NavigationMobile.length) {
                return this.$store.state.navigation.NavigationMobile;
            } else {
                return this.$store.state.navigation.items;
            }
        }
    }),

    methods: _extends({}, Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapActions"])('navigation', {
        toggleMenu: _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["TOGGLE_NAV_MENU"]
    }), Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapActions"])('user', {
        signOut: _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["SIGN_OUT"]
    }), {
        stopNavPropagation: function stopNavPropagation(e) {
            e.stopPropagation();
        },
        redirectSignIn: function redirectSignIn(url) {
            window.location.href = url + '?returnUrl=' + window.location.href;
        },
        redirectSignUp: function redirectSignUp(url) {
            window.location.href = url + '#callbackurl=' + window.location.href;
        }
    })
});

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/desktop/page.vue?vue&type=script&lang=js":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/desktop/page.vue?vue&type=script&lang=js ***!
  \****************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
//
//
//
//
//

 __webpack_exports__["default"] = ({
    data: function data() {
        return {};
    }
});

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/shared/html/base.vue?vue&type=script&lang=js":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/shared/html/base.vue?vue&type=script&lang=js ***!
  \********************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var vuex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vuex/dist/vuex.esm.js");
 var _components_navigation_navigation_bar_navigation_bar_vue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/components/navigation/navigation-bar/navigation-bar.vue");
 var _components_layer_loading_loading_vue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/components/layer/loading/loading.vue");
 var _components_going_app_going_app_vue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__( "./src/components/going-app/going-app.vue");
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//








 __webpack_exports__["default"] = ({
    components: {
        "app-install": _components_going_app_going_app_vue__WEBPACK_IMPORTED_MODULE_3__["default"],
        "navigation-bar": _components_navigation_navigation_bar_navigation_bar_vue__WEBPACK_IMPORTED_MODULE_1__["default"],
        "loading": _components_layer_loading_loading_vue__WEBPACK_IMPORTED_MODULE_2__["default"]
    },

    created: function created() {
        this.initData();
    },
    mounted: function mounted() {
        var urlAnchor = location.hash.substring(2);
        if (urlAnchor.length && urlAnchor.charAt(urlAnchor.length - 1) == '/') {
            urlAnchor = urlAnchor.substring(0, urlAnchor.lastIndexOf('/')); // for ios WKWebkit
        }
        if (urlAnchor && document.querySelector('[name=' + urlAnchor + ']')) {
            var anchorElement = document.querySelector('[name=' + urlAnchor + ']');
            var top = anchorElement.offsetTop;
            // document.documentElement.scrollTop = top;
            // window.pageYOffset = top;
            document.querySelector('[name=' + urlAnchor + ']').scrollIntoView(true);
        }
    },


    methods: _extends({}, Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapActions"])('user', {
        fetchUser: _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_4__["FETCH_USER_PROFILE"]
    }), Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapActions"])('language', {
        fetchLanguage: _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_4__["FETCH_LANGUAGE"]
    }), Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapActions"])('currency', {
        fetchCurrency: _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_4__["FETCH_CURRENCY"]
    }), {
        initData: function initData() {
            this.fetchUser();
            this.fetchLanguage();
            this.fetchCurrency();
        }
    })
});

/***/ }),

/***/ "./node_modules/decode-uri-component/index.js":
/*!****************************************************!*\
  !*** ./node_modules/decode-uri-component/index.js ***!
  \****************************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";

var token = '%[a-f0-9]{2}';
var singleMatcher = new RegExp(token, 'gi');
var multiMatcher = new RegExp('(' + token + ')+', 'gi');

function decodeComponents(components, split) {
	try {
		// Try to decode the entire string first
		return decodeURIComponent(components.join(''));
	} catch (err) {
		// Do nothing
	}

	if (components.length === 1) {
		return components;
	}

	split = split || 1;

	// Split the array in 2 parts
	var left = components.slice(0, split);
	var right = components.slice(split);

	return Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));
}

function decode(input) {
	try {
		return decodeURIComponent(input);
	} catch (err) {
		var tokens = input.match(singleMatcher);

		for (var i = 1; i < tokens.length; i++) {
			input = decodeComponents(tokens, i).join('');

			tokens = input.match(singleMatcher);
		}

		return input;
	}
}

function customDecodeURIComponent(input) {
	// Keep track of all the replacements and prefill the map with the `BOM`
	var replaceMap = {
		'%FE%FF': '\uFFFD\uFFFD',
		'%FF%FE': '\uFFFD\uFFFD'
	};

	var match = multiMatcher.exec(input);
	while (match) {
		try {
			// Decode as big chunks as possible
			replaceMap[match[0]] = decodeURIComponent(match[0]);
		} catch (err) {
			var result = decode(match[0]);

			if (result !== match[0]) {
				replaceMap[match[0]] = result;
			}
		}

		match = multiMatcher.exec(input);
	}

	// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else
	replaceMap['%C2'] = '\uFFFD';

	var entries = Object.keys(replaceMap);

	for (var i = 0; i < entries.length; i++) {
		// Replace all decoded components
		var key = entries[i];
		input = input.replace(new RegExp(key, 'g'), replaceMap[key]);
	}

	return input;
}

module.exports = function (encodedURI) {
	if (typeof encodedURI !== 'string') {
		throw new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');
	}

	try {
		encodedURI = encodedURI.replace(/\+/g, ' ');

		// Try the built in decoder first
		return decodeURIComponent(encodedURI);
	} catch (err) {
		// Fallback to a more advanced decoder
		return customDecodeURIComponent(encodedURI);
	}
};


/***/ }),

/***/ "./node_modules/deepmerge/dist/es.js":
/*!*******************************************!*\
  !*** ./node_modules/deepmerge/dist/es.js ***!
  \*******************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var isMergeableObject = function isMergeableObject(value) {
	return isNonNullObject(value)
		&& !isSpecial(value)
};

function isNonNullObject(value) {
	return !!value && typeof value === 'object'
}

function isSpecial(value) {
	var stringValue = Object.prototype.toString.call(value);

	return stringValue === '[object RegExp]'
		|| stringValue === '[object Date]'
		|| isReactElement(value)
}

// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25
var canUseSymbol = typeof Symbol === 'function' && Symbol.for;
var REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;

function isReactElement(value) {
	return value.$$typeof === REACT_ELEMENT_TYPE
}

function emptyTarget(val) {
	return Array.isArray(val) ? [] : {}
}

function cloneUnlessOtherwiseSpecified(value, options) {
	return (options.clone !== false && options.isMergeableObject(value))
		? deepmerge(emptyTarget(value), value, options)
		: value
}

function defaultArrayMerge(target, source, options) {
	return target.concat(source).map(function(element) {
		return cloneUnlessOtherwiseSpecified(element, options)
	})
}

function mergeObject(target, source, options) {
	var destination = {};
	if (options.isMergeableObject(target)) {
		Object.keys(target).forEach(function(key) {
			destination[key] = cloneUnlessOtherwiseSpecified(target[key], options);
		});
	}
	Object.keys(source).forEach(function(key) {
		if (!options.isMergeableObject(source[key]) || !target[key]) {
			destination[key] = cloneUnlessOtherwiseSpecified(source[key], options);
		} else {
			destination[key] = deepmerge(target[key], source[key], options);
		}
	});
	return destination
}

function deepmerge(target, source, options) {
	options = options || {};
	options.arrayMerge = options.arrayMerge || defaultArrayMerge;
	options.isMergeableObject = options.isMergeableObject || isMergeableObject;

	var sourceIsArray = Array.isArray(source);
	var targetIsArray = Array.isArray(target);
	var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;

	if (!sourceAndTargetTypesMatch) {
		return cloneUnlessOtherwiseSpecified(source, options)
	} else if (sourceIsArray) {
		return options.arrayMerge(target, source, options)
	} else {
		return mergeObject(target, source, options)
	}
}

deepmerge.all = function deepmergeAll(array, options) {
	if (!Array.isArray(array)) {
		throw new Error('first argument should be an array')
	}

	return array.reduce(function(prev, next) {
		return deepmerge(prev, next, options)
	}, {})
};

var deepmerge_1 = deepmerge;

 __webpack_exports__["default"] = (deepmerge_1);


/***/ }),

/***/ "./node_modules/define-properties/index.js":
/*!*************************************************!*\
  !*** ./node_modules/define-properties/index.js ***!
  \*************************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var keys = __webpack_require__( "./node_modules/object-keys/index.js");
var hasSymbols = typeof Symbol === 'function' && typeof Symbol('foo') === 'symbol';

var toStr = Object.prototype.toString;
var concat = Array.prototype.concat;
var origDefineProperty = Object.defineProperty;

var isFunction = function (fn) {
	return typeof fn === 'function' && toStr.call(fn) === '[object Function]';
};

var arePropertyDescriptorsSupported = function () {
	var obj = {};
	try {
		origDefineProperty(obj, 'x', { enumerable: false, value: obj });
		// eslint-disable-next-line no-unused-vars, no-restricted-syntax
		for (var _ in obj) { // jscs:ignore disallowUnusedVariables
			return false;
		}
		return obj.x === obj;
	} catch (e) { 
		return false;
	}
};
var supportsDescriptors = origDefineProperty && arePropertyDescriptorsSupported();

var defineProperty = function (object, name, value, predicate) {
	if (name in object && (!isFunction(predicate) || !predicate())) {
		return;
	}
	if (supportsDescriptors) {
		origDefineProperty(object, name, {
			configurable: true,
			enumerable: false,
			value: value,
			writable: true
		});
	} else {
		object[name] = value;
	}
};

var defineProperties = function (object, map) {
	var predicates = arguments.length > 2 ? arguments[2] : {};
	var props = keys(map);
	if (hasSymbols) {
		props = concat.call(props, Object.getOwnPropertySymbols(map));
	}
	for (var i = 0; i < props.length; i += 1) {
		defineProperty(object, props[i], map[props[i]], predicates[props[i]]);
	}
};

defineProperties.supportsDescriptors = !!supportsDescriptors;

module.exports = defineProperties;


/***/ }),

/***/ "./node_modules/es-abstract/GetIntrinsic.js":
/*!**************************************************!*\
  !*** ./node_modules/es-abstract/GetIntrinsic.js ***!
  \**************************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";




var undefined; // eslint-disable-line no-shadow-restricted-names

var ThrowTypeError = Object.getOwnPropertyDescriptor
	? (function () { return Object.getOwnPropertyDescriptor(arguments, 'callee').get; }())
	: function () { throw new TypeError(); };

var hasSymbols = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol';

var getProto = Object.getPrototypeOf || function (x) { return x.__proto__; }; // eslint-disable-line no-proto

var generator; // = function * () {};
var generatorFunction = generator ? getProto(generator) : undefined;
var asyncFn; // async function() {};
var asyncFunction = asyncFn ? asyncFn.constructor : undefined;
var asyncGen; // async function * () {};
var asyncGenFunction = asyncGen ? getProto(asyncGen) : undefined;
var asyncGenIterator = asyncGen ? asyncGen() : undefined;

var TypedArray = typeof Uint8Array === 'undefined' ? undefined : getProto(Uint8Array);

var INTRINSICS = {
	'$ %Array%': Array,
	'$ %ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,
	'$ %ArrayBufferPrototype%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer.prototype,
	'$ %ArrayIteratorPrototype%': hasSymbols ? getProto([][Symbol.iterator]()) : undefined,
	'$ %ArrayPrototype%': Array.prototype,
	'$ %ArrayProto_entries%': Array.prototype.entries,
	'$ %ArrayProto_forEach%': Array.prototype.forEach,
	'$ %ArrayProto_keys%': Array.prototype.keys,
	'$ %ArrayProto_values%': Array.prototype.values,
	'$ %AsyncFromSyncIteratorPrototype%': undefined,
	'$ %AsyncFunction%': asyncFunction,
	'$ %AsyncFunctionPrototype%': asyncFunction ? asyncFunction.prototype : undefined,
	'$ %AsyncGenerator%': asyncGen ? getProto(asyncGenIterator) : undefined,
	'$ %AsyncGeneratorFunction%': asyncGenFunction,
	'$ %AsyncGeneratorPrototype%': asyncGenFunction ? asyncGenFunction.prototype : undefined,
	'$ %AsyncIteratorPrototype%': asyncGenIterator && hasSymbols && Symbol.asyncIterator ? asyncGenIterator[Symbol.asyncIterator]() : undefined,
	'$ %Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,
	'$ %Boolean%': Boolean,
	'$ %BooleanPrototype%': Boolean.prototype,
	'$ %DataView%': typeof DataView === 'undefined' ? undefined : DataView,
	'$ %DataViewPrototype%': typeof DataView === 'undefined' ? undefined : DataView.prototype,
	'$ %Date%': Date,
	'$ %DatePrototype%': Date.prototype,
	'$ %decodeURI%': decodeURI,
	'$ %decodeURIComponent%': decodeURIComponent,
	'$ %encodeURI%': encodeURI,
	'$ %encodeURIComponent%': encodeURIComponent,
	'$ %Error%': Error,
	'$ %ErrorPrototype%': Error.prototype,
	'$ %eval%': eval, // eslint-disable-line no-eval
	'$ %EvalError%': EvalError,
	'$ %EvalErrorPrototype%': EvalError.prototype,
	'$ %Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,
	'$ %Float32ArrayPrototype%': typeof Float32Array === 'undefined' ? undefined : Float32Array.prototype,
	'$ %Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,
	'$ %Float64ArrayPrototype%': typeof Float64Array === 'undefined' ? undefined : Float64Array.prototype,
	'$ %Function%': Function,
	'$ %FunctionPrototype%': Function.prototype,
	'$ %Generator%': generator ? getProto(generator()) : undefined,
	'$ %GeneratorFunction%': generatorFunction,
	'$ %GeneratorPrototype%': generatorFunction ? generatorFunction.prototype : undefined,
	'$ %Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,
	'$ %Int8ArrayPrototype%': typeof Int8Array === 'undefined' ? undefined : Int8Array.prototype,
	'$ %Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,
	'$ %Int16ArrayPrototype%': typeof Int16Array === 'undefined' ? undefined : Int8Array.prototype,
	'$ %Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,
	'$ %Int32ArrayPrototype%': typeof Int32Array === 'undefined' ? undefined : Int32Array.prototype,
	'$ %isFinite%': isFinite,
	'$ %isNaN%': isNaN,
	'$ %IteratorPrototype%': hasSymbols ? getProto(getProto([][Symbol.iterator]())) : undefined,
	'$ %JSON%': JSON,
	'$ %JSONParse%': JSON.parse,
	'$ %Map%': typeof Map === 'undefined' ? undefined : Map,
	'$ %MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols ? undefined : getProto(new Map()[Symbol.iterator]()),
	'$ %MapPrototype%': typeof Map === 'undefined' ? undefined : Map.prototype,
	'$ %Math%': Math,
	'$ %Number%': Number,
	'$ %NumberPrototype%': Number.prototype,
	'$ %Object%': Object,
	'$ %ObjectPrototype%': Object.prototype,
	'$ %ObjProto_toString%': Object.prototype.toString,
	'$ %ObjProto_valueOf%': Object.prototype.valueOf,
	'$ %parseFloat%': parseFloat,
	'$ %parseInt%': parseInt,
	'$ %Promise%': typeof Promise === 'undefined' ? undefined : Promise,
	'$ %PromisePrototype%': typeof Promise === 'undefined' ? undefined : Promise.prototype,
	'$ %PromiseProto_then%': typeof Promise === 'undefined' ? undefined : Promise.prototype.then,
	'$ %Promise_all%': typeof Promise === 'undefined' ? undefined : Promise.all,
	'$ %Promise_reject%': typeof Promise === 'undefined' ? undefined : Promise.reject,
	'$ %Promise_resolve%': typeof Promise === 'undefined' ? undefined : Promise.resolve,
	'$ %Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,
	'$ %RangeError%': RangeError,
	'$ %RangeErrorPrototype%': RangeError.prototype,
	'$ %ReferenceError%': ReferenceError,
	'$ %ReferenceErrorPrototype%': ReferenceError.prototype,
	'$ %Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,
	'$ %RegExp%': RegExp,
	'$ %RegExpPrototype%': RegExp.prototype,
	'$ %Set%': typeof Set === 'undefined' ? undefined : Set,
	'$ %SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols ? undefined : getProto(new Set()[Symbol.iterator]()),
	'$ %SetPrototype%': typeof Set === 'undefined' ? undefined : Set.prototype,
	'$ %SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,
	'$ %SharedArrayBufferPrototype%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer.prototype,
	'$ %String%': String,
	'$ %StringIteratorPrototype%': hasSymbols ? getProto(''[Symbol.iterator]()) : undefined,
	'$ %StringPrototype%': String.prototype,
	'$ %Symbol%': hasSymbols ? Symbol : undefined,
	'$ %SymbolPrototype%': hasSymbols ? Symbol.prototype : undefined,
	'$ %SyntaxError%': SyntaxError,
	'$ %SyntaxErrorPrototype%': SyntaxError.prototype,
	'$ %ThrowTypeError%': ThrowTypeError,
	'$ %TypedArray%': TypedArray,
	'$ %TypedArrayPrototype%': TypedArray ? TypedArray.prototype : undefined,
	'$ %TypeError%': TypeError,
	'$ %TypeErrorPrototype%': TypeError.prototype,
	'$ %Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,
	'$ %Uint8ArrayPrototype%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array.prototype,
	'$ %Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,
	'$ %Uint8ClampedArrayPrototype%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray.prototype,
	'$ %Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,
	'$ %Uint16ArrayPrototype%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array.prototype,
	'$ %Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,
	'$ %Uint32ArrayPrototype%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array.prototype,
	'$ %URIError%': URIError,
	'$ %URIErrorPrototype%': URIError.prototype,
	'$ %WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,
	'$ %WeakMapPrototype%': typeof WeakMap === 'undefined' ? undefined : WeakMap.prototype,
	'$ %WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet,
	'$ %WeakSetPrototype%': typeof WeakSet === 'undefined' ? undefined : WeakSet.prototype
};

module.exports = function GetIntrinsic(name, allowMissing) {
	if (arguments.length > 1 && typeof allowMissing !== 'boolean') {
		throw new TypeError('"allowMissing" argument must be a boolean');
	}

	var key = '$ ' + name;
	if (!(key in INTRINSICS)) {
		throw new SyntaxError('intrinsic ' + name + ' does not exist!');
	}

	// istanbul ignore if // hopefully this is impossible to test :-)
	if (typeof INTRINSICS[key] === 'undefined' && !allowMissing) {
		throw new TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');
	}
	return INTRINSICS[key];
};


/***/ }),

/***/ "./node_modules/es-abstract/es2015.js":
/*!********************************************!*\
  !*** ./node_modules/es-abstract/es2015.js ***!
  \********************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var has = __webpack_require__( "./node_modules/has/src/index.js");
var toPrimitive = __webpack_require__( "./node_modules/es-to-primitive/es6.js");

var GetIntrinsic = __webpack_require__( "./node_modules/es-abstract/GetIntrinsic.js");

var $TypeError = GetIntrinsic('%TypeError%');
var $SyntaxError = GetIntrinsic('%SyntaxError%');
var $Array = GetIntrinsic('%Array%');
var $String = GetIntrinsic('%String%');
var $Object = GetIntrinsic('%Object%');
var $Number = GetIntrinsic('%Number%');
var $Symbol = GetIntrinsic('%Symbol%', true);
var $RegExp = GetIntrinsic('%RegExp%');

var hasSymbols = !!$Symbol;

var $isNaN = __webpack_require__( "./node_modules/es-abstract/helpers/isNaN.js");
var $isFinite = __webpack_require__( "./node_modules/es-abstract/helpers/isFinite.js");
var MAX_SAFE_INTEGER = $Number.MAX_SAFE_INTEGER || Math.pow(2, 53) - 1;

var assign = __webpack_require__( "./node_modules/es-abstract/helpers/assign.js");
var sign = __webpack_require__( "./node_modules/es-abstract/helpers/sign.js");
var mod = __webpack_require__( "./node_modules/es-abstract/helpers/mod.js");
var isPrimitive = __webpack_require__( "./node_modules/es-abstract/helpers/isPrimitive.js");
var parseInteger = parseInt;
var bind = __webpack_require__( "./node_modules/function-bind/index.js");
var arraySlice = bind.call(Function.call, $Array.prototype.slice);
var strSlice = bind.call(Function.call, $String.prototype.slice);
var isBinary = bind.call(Function.call, $RegExp.prototype.test, /^0b[01]+$/i);
var isOctal = bind.call(Function.call, $RegExp.prototype.test, /^0o[0-7]+$/i);
var regexExec = bind.call(Function.call, $RegExp.prototype.exec);
var nonWS = ['\u0085', '\u200b', '\ufffe'].join('');
var nonWSregex = new $RegExp('[' + nonWS + ']', 'g');
var hasNonWS = bind.call(Function.call, $RegExp.prototype.test, nonWSregex);
var invalidHexLiteral = /^[-+]0x[0-9a-f]+$/i;
var isInvalidHexLiteral = bind.call(Function.call, $RegExp.prototype.test, invalidHexLiteral);
var $charCodeAt = bind.call(Function.call, $String.prototype.charCodeAt);

var toStr = bind.call(Function.call, Object.prototype.toString);

var $floor = Math.floor;
var $abs = Math.abs;

var $ObjectCreate = Object.create;
var $gOPD = $Object.getOwnPropertyDescriptor;

var $isExtensible = $Object.isExtensible;

// whitespace from: http://es5.github.io/#x15.5.4.20
// implementation from https://github.com/es-shims/es5-shim/blob/v3.4.0/es5-shim.js#L1304-L1324
var ws = [
	'\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003',
	'\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028',
	'\u2029\uFEFF'
].join('');
var trimRegex = new RegExp('(^[' + ws + ']+)|([' + ws + ']+$)', 'g');
var replace = bind.call(Function.call, $String.prototype.replace);
var trim = function (value) {
	return replace(value, trimRegex, '');
};

var ES5 = __webpack_require__( "./node_modules/es-abstract/es5.js");

var hasRegExpMatcher = __webpack_require__( "./node_modules/is-regex/index.js");

// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-abstract-operations
var ES6 = assign(assign({}, ES5), {

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-call-f-v-args
	Call: function Call(F, V) {
		var args = arguments.length > 2 ? arguments[2] : [];
		if (!this.IsCallable(F)) {
			throw new $TypeError(F + ' is not a function');
		}
		return F.apply(V, args);
	},

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toprimitive
	ToPrimitive: toPrimitive,

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toboolean
	// ToBoolean: ES5.ToBoolean,

	// https://ecma-international.org/ecma-262/6.0/#sec-tonumber
	ToNumber: function ToNumber(argument) {
		var value = isPrimitive(argument) ? argument : toPrimitive(argument, $Number);
		if (typeof value === 'symbol') {
			throw new $TypeError('Cannot convert a Symbol value to a number');
		}
		if (typeof value === 'string') {
			if (isBinary(value)) {
				return this.ToNumber(parseInteger(strSlice(value, 2), 2));
			} else if (isOctal(value)) {
				return this.ToNumber(parseInteger(strSlice(value, 2), 8));
			} else if (hasNonWS(value) || isInvalidHexLiteral(value)) {
				return NaN;
			} else {
				var trimmed = trim(value);
				if (trimmed !== value) {
					return this.ToNumber(trimmed);
				}
			}
		}
		return $Number(value);
	},

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tointeger
	// ToInteger: ES5.ToNumber,

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toint32
	// ToInt32: ES5.ToInt32,

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint32
	// ToUint32: ES5.ToUint32,

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toint16
	ToInt16: function ToInt16(argument) {
		var int16bit = this.ToUint16(argument);
		return int16bit >= 0x8000 ? int16bit - 0x10000 : int16bit;
	},

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint16
	// ToUint16: ES5.ToUint16,

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toint8
	ToInt8: function ToInt8(argument) {
		var int8bit = this.ToUint8(argument);
		return int8bit >= 0x80 ? int8bit - 0x100 : int8bit;
	},

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint8
	ToUint8: function ToUint8(argument) {
		var number = this.ToNumber(argument);
		if ($isNaN(number) || number === 0 || !$isFinite(number)) { return 0; }
		var posInt = sign(number) * $floor($abs(number));
		return mod(posInt, 0x100);
	},

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint8clamp
	ToUint8Clamp: function ToUint8Clamp(argument) {
		var number = this.ToNumber(argument);
		if ($isNaN(number) || number <= 0) { return 0; }
		if (number >= 0xFF) { return 0xFF; }
		var f = $floor(argument);
		if (f + 0.5 < number) { return f + 1; }
		if (number < f + 0.5) { return f; }
		if (f % 2 !== 0) { return f + 1; }
		return f;
	},

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tostring
	ToString: function ToString(argument) {
		if (typeof argument === 'symbol') {
			throw new $TypeError('Cannot convert a Symbol value to a string');
		}
		return $String(argument);
	},

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toobject
	ToObject: function ToObject(value) {
		this.RequireObjectCoercible(value);
		return $Object(value);
	},

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-topropertykey
	ToPropertyKey: function ToPropertyKey(argument) {
		var key = this.ToPrimitive(argument, $String);
		return typeof key === 'symbol' ? key : this.ToString(key);
	},

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength
	ToLength: function ToLength(argument) {
		var len = this.ToInteger(argument);
		if (len <= 0) { return 0; } // includes converting -0 to +0
		if (len > MAX_SAFE_INTEGER) { return MAX_SAFE_INTEGER; }
		return len;
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-canonicalnumericindexstring
	CanonicalNumericIndexString: function CanonicalNumericIndexString(argument) {
		if (toStr(argument) !== '[object String]') {
			throw new $TypeError('must be a string');
		}
		if (argument === '-0') { return -0; }
		var n = this.ToNumber(argument);
		if (this.SameValue(this.ToString(n), argument)) { return n; }
		return void 0;
	},

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-requireobjectcoercible
	RequireObjectCoercible: ES5.CheckObjectCoercible,

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isarray
	IsArray: $Array.isArray || function IsArray(argument) {
		return toStr(argument) === '[object Array]';
	},

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-iscallable
	// IsCallable: ES5.IsCallable,

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isconstructor
	IsConstructor: function IsConstructor(argument) {
		return typeof argument === 'function' && !!argument.prototype; // unfortunately there's no way to truly check this without try/catch `new argument`
	},

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isextensible-o
	IsExtensible: Object.preventExtensions
		? function IsExtensible(obj) {
			if (isPrimitive(obj)) {
				return false;
			}
			return $isExtensible(obj);
		}
		: function isExtensible(obj) { return true; }, // eslint-disable-line no-unused-vars

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isinteger
	IsInteger: function IsInteger(argument) {
		if (typeof argument !== 'number' || $isNaN(argument) || !$isFinite(argument)) {
			return false;
		}
		var abs = $abs(argument);
		return $floor(abs) === abs;
	},

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ispropertykey
	IsPropertyKey: function IsPropertyKey(argument) {
		return typeof argument === 'string' || typeof argument === 'symbol';
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-isregexp
	IsRegExp: function IsRegExp(argument) {
		if (!argument || typeof argument !== 'object') {
			return false;
		}
		if (hasSymbols) {
			var isRegExp = argument[$Symbol.match];
			if (typeof isRegExp !== 'undefined') {
				return ES5.ToBoolean(isRegExp);
			}
		}
		return hasRegExpMatcher(argument);
	},

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-samevalue
	// SameValue: ES5.SameValue,

	// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-samevaluezero
	SameValueZero: function SameValueZero(x, y) {
		return (x === y) || ($isNaN(x) && $isNaN(y));
	},

	/**
	 * 7.3.2 GetV (V, P)
	 * 1. Assert: IsPropertyKey(P) is true.
	 * 2. Let O be ToObject(V).
	 * 3. ReturnIfAbrupt(O).
	 * 4. Return O.[[Get]](P, V).
	 */
	GetV: function GetV(V, P) {
		// 7.3.2.1
		if (!this.IsPropertyKey(P)) {
			throw new $TypeError('Assertion failed: IsPropertyKey(P) is not true');
		}

		// 7.3.2.2-3
		var O = this.ToObject(V);

		// 7.3.2.4
		return O[P];
	},

	/**
	 * 7.3.9 - https://ecma-international.org/ecma-262/6.0/#sec-getmethod
	 * 1. Assert: IsPropertyKey(P) is true.
	 * 2. Let func be GetV(O, P).
	 * 3. ReturnIfAbrupt(func).
	 * 4. If func is either undefined or null, return undefined.
	 * 5. If IsCallable(func) is false, throw a TypeError exception.
	 * 6. Return func.
	 */
	GetMethod: function GetMethod(O, P) {
		// 7.3.9.1
		if (!this.IsPropertyKey(P)) {
			throw new $TypeError('Assertion failed: IsPropertyKey(P) is not true');
		}

		// 7.3.9.2
		var func = this.GetV(O, P);

		// 7.3.9.4
		if (func == null) {
			return void 0;
		}

		// 7.3.9.5
		if (!this.IsCallable(func)) {
			throw new $TypeError(P + 'is not a function');
		}

		// 7.3.9.6
		return func;
	},

	/**
	 * 7.3.1 Get (O, P) - https://ecma-international.org/ecma-262/6.0/#sec-get-o-p
	 * 1. Assert: Type(O) is Object.
	 * 2. Assert: IsPropertyKey(P) is true.
	 * 3. Return O.[[Get]](P, O).
	 */
	Get: function Get(O, P) {
		// 7.3.1.1
		if (this.Type(O) !== 'Object') {
			throw new $TypeError('Assertion failed: Type(O) is not Object');
		}
		// 7.3.1.2
		if (!this.IsPropertyKey(P)) {
			throw new $TypeError('Assertion failed: IsPropertyKey(P) is not true');
		}
		// 7.3.1.3
		return O[P];
	},

	Type: function Type(x) {
		if (typeof x === 'symbol') {
			return 'Symbol';
		}
		return ES5.Type(x);
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-speciesconstructor
	SpeciesConstructor: function SpeciesConstructor(O, defaultConstructor) {
		if (this.Type(O) !== 'Object') {
			throw new $TypeError('Assertion failed: Type(O) is not Object');
		}
		var C = O.constructor;
		if (typeof C === 'undefined') {
			return defaultConstructor;
		}
		if (this.Type(C) !== 'Object') {
			throw new $TypeError('O.constructor is not an Object');
		}
		var S = hasSymbols && $Symbol.species ? C[$Symbol.species] : void 0;
		if (S == null) {
			return defaultConstructor;
		}
		if (this.IsConstructor(S)) {
			return S;
		}
		throw new $TypeError('no constructor found');
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-completepropertydescriptor
	CompletePropertyDescriptor: function CompletePropertyDescriptor(Desc) {
		if (!this.IsPropertyDescriptor(Desc)) {
			throw new $TypeError('Desc must be a Property Descriptor');
		}

		if (this.IsGenericDescriptor(Desc) || this.IsDataDescriptor(Desc)) {
			if (!has(Desc, '[[Value]]')) {
				Desc['[[Value]]'] = void 0;
			}
			if (!has(Desc, '[[Writable]]')) {
				Desc['[[Writable]]'] = false;
			}
		} else {
			if (!has(Desc, '[[Get]]')) {
				Desc['[[Get]]'] = void 0;
			}
			if (!has(Desc, '[[Set]]')) {
				Desc['[[Set]]'] = void 0;
			}
		}
		if (!has(Desc, '[[Enumerable]]')) {
			Desc['[[Enumerable]]'] = false;
		}
		if (!has(Desc, '[[Configurable]]')) {
			Desc['[[Configurable]]'] = false;
		}
		return Desc;
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-set-o-p-v-throw
	Set: function Set(O, P, V, Throw) {
		if (this.Type(O) !== 'Object') {
			throw new $TypeError('O must be an Object');
		}
		if (!this.IsPropertyKey(P)) {
			throw new $TypeError('P must be a Property Key');
		}
		if (this.Type(Throw) !== 'Boolean') {
			throw new $TypeError('Throw must be a Boolean');
		}
		if (Throw) {
			O[P] = V;
			return true;
		} else {
			try {
				O[P] = V;
			} catch (e) {
				return false;
			}
		}
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-hasownproperty
	HasOwnProperty: function HasOwnProperty(O, P) {
		if (this.Type(O) !== 'Object') {
			throw new $TypeError('O must be an Object');
		}
		if (!this.IsPropertyKey(P)) {
			throw new $TypeError('P must be a Property Key');
		}
		return has(O, P);
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-hasproperty
	HasProperty: function HasProperty(O, P) {
		if (this.Type(O) !== 'Object') {
			throw new $TypeError('O must be an Object');
		}
		if (!this.IsPropertyKey(P)) {
			throw new $TypeError('P must be a Property Key');
		}
		return P in O;
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-isconcatspreadable
	IsConcatSpreadable: function IsConcatSpreadable(O) {
		if (this.Type(O) !== 'Object') {
			return false;
		}
		if (hasSymbols && typeof $Symbol.isConcatSpreadable === 'symbol') {
			var spreadable = this.Get(O, Symbol.isConcatSpreadable);
			if (typeof spreadable !== 'undefined') {
				return this.ToBoolean(spreadable);
			}
		}
		return this.IsArray(O);
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-invoke
	Invoke: function Invoke(O, P) {
		if (!this.IsPropertyKey(P)) {
			throw new $TypeError('P must be a Property Key');
		}
		var argumentsList = arraySlice(arguments, 2);
		var func = this.GetV(O, P);
		return this.Call(func, O, argumentsList);
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-getiterator
	GetIterator: function GetIterator(obj, method) {
		if (!hasSymbols) {
			throw new SyntaxError('ES.GetIterator depends on native iterator support.');
		}

		var actualMethod = method;
		if (arguments.length < 2) {
			actualMethod = this.GetMethod(obj, $Symbol.iterator);
		}
		var iterator = this.Call(actualMethod, obj);
		if (this.Type(iterator) !== 'Object') {
			throw new $TypeError('iterator must return an object');
		}

		return iterator;
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-iteratornext
	IteratorNext: function IteratorNext(iterator, value) {
		var result = this.Invoke(iterator, 'next', arguments.length < 2 ? [] : [value]);
		if (this.Type(result) !== 'Object') {
			throw new $TypeError('iterator next must return an object');
		}
		return result;
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-iteratorcomplete
	IteratorComplete: function IteratorComplete(iterResult) {
		if (this.Type(iterResult) !== 'Object') {
			throw new $TypeError('Assertion failed: Type(iterResult) is not Object');
		}
		return this.ToBoolean(this.Get(iterResult, 'done'));
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-iteratorvalue
	IteratorValue: function IteratorValue(iterResult) {
		if (this.Type(iterResult) !== 'Object') {
			throw new $TypeError('Assertion failed: Type(iterResult) is not Object');
		}
		return this.Get(iterResult, 'value');
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-iteratorstep
	IteratorStep: function IteratorStep(iterator) {
		var result = this.IteratorNext(iterator);
		var done = this.IteratorComplete(result);
		return done === true ? false : result;
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-iteratorclose
	IteratorClose: function IteratorClose(iterator, completion) {
		if (this.Type(iterator) !== 'Object') {
			throw new $TypeError('Assertion failed: Type(iterator) is not Object');
		}
		if (!this.IsCallable(completion)) {
			throw new $TypeError('Assertion failed: completion is not a thunk for a Completion Record');
		}
		var completionThunk = completion;

		var iteratorReturn = this.GetMethod(iterator, 'return');

		if (typeof iteratorReturn === 'undefined') {
			return completionThunk();
		}

		var completionRecord;
		try {
			var innerResult = this.Call(iteratorReturn, iterator, []);
		} catch (e) {
			// if we hit here, then "e" is the innerResult completion that needs re-throwing

			// if the completion is of type "throw", this will throw.
			completionRecord = completionThunk();
			completionThunk = null; // ensure it's not called twice.

			// if not, then return the innerResult completion
			throw e;
		}
		completionRecord = completionThunk(); // if innerResult worked, then throw if the completion does
		completionThunk = null; // ensure it's not called twice.

		if (this.Type(innerResult) !== 'Object') {
			throw new $TypeError('iterator .return must return an object');
		}

		return completionRecord;
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-createiterresultobject
	CreateIterResultObject: function CreateIterResultObject(value, done) {
		if (this.Type(done) !== 'Boolean') {
			throw new $TypeError('Assertion failed: Type(done) is not Boolean');
		}
		return {
			value: value,
			done: done
		};
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-regexpexec
	RegExpExec: function RegExpExec(R, S) {
		if (this.Type(R) !== 'Object') {
			throw new $TypeError('R must be an Object');
		}
		if (this.Type(S) !== 'String') {
			throw new $TypeError('S must be a String');
		}
		var exec = this.Get(R, 'exec');
		if (this.IsCallable(exec)) {
			var result = this.Call(exec, R, [S]);
			if (result === null || this.Type(result) === 'Object') {
				return result;
			}
			throw new $TypeError('"exec" method must return `null` or an Object');
		}
		return regexExec(R, S);
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-arrayspeciescreate
	ArraySpeciesCreate: function ArraySpeciesCreate(originalArray, length) {
		if (!this.IsInteger(length) || length < 0) {
			throw new $TypeError('Assertion failed: length must be an integer >= 0');
		}
		var len = length === 0 ? 0 : length;
		var C;
		var isArray = this.IsArray(originalArray);
		if (isArray) {
			C = this.Get(originalArray, 'constructor');
			// TODO: figure out how to make a cross-realm normal Array, a same-realm Array
			// if (this.IsConstructor(C)) {
			// 	if C is another realm's Array, C = undefined
			// 	Object.getPrototypeOf(Object.getPrototypeOf(Object.getPrototypeOf(Array))) === null ?
			// }
			if (this.Type(C) === 'Object' && hasSymbols && $Symbol.species) {
				C = this.Get(C, $Symbol.species);
				if (C === null) {
					C = void 0;
				}
			}
		}
		if (typeof C === 'undefined') {
			return $Array(len);
		}
		if (!this.IsConstructor(C)) {
			throw new $TypeError('C must be a constructor');
		}
		return new C(len); // this.Construct(C, len);
	},

	CreateDataProperty: function CreateDataProperty(O, P, V) {
		if (this.Type(O) !== 'Object') {
			throw new $TypeError('Assertion failed: Type(O) is not Object');
		}
		if (!this.IsPropertyKey(P)) {
			throw new $TypeError('Assertion failed: IsPropertyKey(P) is not true');
		}
		var oldDesc = $gOPD(O, P);
		var extensible = oldDesc || (typeof $isExtensible !== 'function' || $isExtensible(O));
		var immutable = oldDesc && (!oldDesc.writable || !oldDesc.configurable);
		if (immutable || !extensible) {
			return false;
		}
		var newDesc = {
			configurable: true,
			enumerable: true,
			value: V,
			writable: true
		};
		Object.defineProperty(O, P, newDesc);
		return true;
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-createdatapropertyorthrow
	CreateDataPropertyOrThrow: function CreateDataPropertyOrThrow(O, P, V) {
		if (this.Type(O) !== 'Object') {
			throw new $TypeError('Assertion failed: Type(O) is not Object');
		}
		if (!this.IsPropertyKey(P)) {
			throw new $TypeError('Assertion failed: IsPropertyKey(P) is not true');
		}
		var success = this.CreateDataProperty(O, P, V);
		if (!success) {
			throw new $TypeError('unable to create data property');
		}
		return success;
	},

	// https://www.ecma-international.org/ecma-262/6.0/#sec-objectcreate
	ObjectCreate: function ObjectCreate(proto, internalSlotsList) {
		if (proto !== null && this.Type(proto) !== 'Object') {
			throw new $TypeError('Assertion failed: proto must be null or an object');
		}
		var slots = arguments.length < 2 ? [] : internalSlotsList;
		if (slots.length > 0) {
			throw new $SyntaxError('es-abstract does not yet support internal slots');
		}

		if (proto === null && !$ObjectCreate) {
			throw new $SyntaxError('native Object.create support is required to create null objects');
		}

		return $ObjectCreate(proto);
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-advancestringindex
	AdvanceStringIndex: function AdvanceStringIndex(S, index, unicode) {
		if (this.Type(S) !== 'String') {
			throw new $TypeError('S must be a String');
		}
		if (!this.IsInteger(index) || index < 0 || index > MAX_SAFE_INTEGER) {
			throw new $TypeError('Assertion failed: length must be an integer >= 0 and <= 2**53');
		}
		if (this.Type(unicode) !== 'Boolean') {
			throw new $TypeError('Assertion failed: unicode must be a Boolean');
		}
		if (!unicode) {
			return index + 1;
		}
		var length = S.length;
		if ((index + 1) >= length) {
			return index + 1;
		}

		var first = $charCodeAt(S, index);
		if (first < 0xD800 || first > 0xDBFF) {
			return index + 1;
		}

		var second = $charCodeAt(S, index + 1);
		if (second < 0xDC00 || second > 0xDFFF) {
			return index + 1;
		}

		return index + 2;
	}
});

delete ES6.CheckObjectCoercible; // renamed in ES6 to RequireObjectCoercible

module.exports = ES6;


/***/ }),

/***/ "./node_modules/es-abstract/es2016.js":
/*!********************************************!*\
  !*** ./node_modules/es-abstract/es2016.js ***!
  \********************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var ES2015 = __webpack_require__( "./node_modules/es-abstract/es2015.js");
var assign = __webpack_require__( "./node_modules/es-abstract/helpers/assign.js");

var ES2016 = assign(assign({}, ES2015), {
	// https://github.com/tc39/ecma262/pull/60
	SameValueNonNumber: function SameValueNonNumber(x, y) {
		if (typeof x === 'number' || typeof x !== typeof y) {
			throw new TypeError('SameValueNonNumber requires two non-number values of the same type.');
		}
		return this.SameValue(x, y);
	}
});

module.exports = ES2016;


/***/ }),

/***/ "./node_modules/es-abstract/es5.js":
/*!*****************************************!*\
  !*** ./node_modules/es-abstract/es5.js ***!
  \*****************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var GetIntrinsic = __webpack_require__( "./node_modules/es-abstract/GetIntrinsic.js");

var $Object = GetIntrinsic('%Object%');
var $TypeError = GetIntrinsic('%TypeError%');
var $String = GetIntrinsic('%String%');

var $isNaN = __webpack_require__( "./node_modules/es-abstract/helpers/isNaN.js");
var $isFinite = __webpack_require__( "./node_modules/es-abstract/helpers/isFinite.js");

var sign = __webpack_require__( "./node_modules/es-abstract/helpers/sign.js");
var mod = __webpack_require__( "./node_modules/es-abstract/helpers/mod.js");

var IsCallable = __webpack_require__( "./node_modules/is-callable/index.js");
var toPrimitive = __webpack_require__( "./node_modules/es-to-primitive/es5.js");

var has = __webpack_require__( "./node_modules/has/src/index.js");

// https://es5.github.io/#x9
var ES5 = {
	ToPrimitive: toPrimitive,

	ToBoolean: function ToBoolean(value) {
		return !!value;
	},
	ToNumber: function ToNumber(value) {
		return +value; // eslint-disable-line no-implicit-coercion
	},
	ToInteger: function ToInteger(value) {
		var number = this.ToNumber(value);
		if ($isNaN(number)) { return 0; }
		if (number === 0 || !$isFinite(number)) { return number; }
		return sign(number) * Math.floor(Math.abs(number));
	},
	ToInt32: function ToInt32(x) {
		return this.ToNumber(x) >> 0;
	},
	ToUint32: function ToUint32(x) {
		return this.ToNumber(x) >>> 0;
	},
	ToUint16: function ToUint16(value) {
		var number = this.ToNumber(value);
		if ($isNaN(number) || number === 0 || !$isFinite(number)) { return 0; }
		var posInt = sign(number) * Math.floor(Math.abs(number));
		return mod(posInt, 0x10000);
	},
	ToString: function ToString(value) {
		return $String(value);
	},
	ToObject: function ToObject(value) {
		this.CheckObjectCoercible(value);
		return $Object(value);
	},
	CheckObjectCoercible: function CheckObjectCoercible(value, optMessage) {
		
		if (value == null) {
			throw new $TypeError(optMessage || 'Cannot call method on ' + value);
		}
		return value;
	},
	IsCallable: IsCallable,
	SameValue: function SameValue(x, y) {
		if (x === y) { // 0 === -0, but they are not identical.
			if (x === 0) { return 1 / x === 1 / y; }
			return true;
		}
		return $isNaN(x) && $isNaN(y);
	},

	// https://www.ecma-international.org/ecma-262/5.1/#sec-8
	Type: function Type(x) {
		if (x === null) {
			return 'Null';
		}
		if (typeof x === 'undefined') {
			return 'Undefined';
		}
		if (typeof x === 'function' || typeof x === 'object') {
			return 'Object';
		}
		if (typeof x === 'number') {
			return 'Number';
		}
		if (typeof x === 'boolean') {
			return 'Boolean';
		}
		if (typeof x === 'string') {
			return 'String';
		}
	},

	// https://ecma-international.org/ecma-262/6.0/#sec-property-descriptor-specification-type
	IsPropertyDescriptor: function IsPropertyDescriptor(Desc) {
		if (this.Type(Desc) !== 'Object') {
			return false;
		}
		var allowed = {
			'[[Configurable]]': true,
			'[[Enumerable]]': true,
			'[[Get]]': true,
			'[[Set]]': true,
			'[[Value]]': true,
			'[[Writable]]': true
		};
		// jscs:disable
		for (var key in Desc) { // eslint-disable-line
			if (has(Desc, key) && !allowed[key]) {
				return false;
			}
		}
		// jscs:enable
		var isData = has(Desc, '[[Value]]');
		var IsAccessor = has(Desc, '[[Get]]') || has(Desc, '[[Set]]');
		if (isData && IsAccessor) {
			throw new $TypeError('Property Descriptors may not be both accessor and data descriptors');
		}
		return true;
	},

	// https://ecma-international.org/ecma-262/5.1/#sec-8.10.1
	IsAccessorDescriptor: function IsAccessorDescriptor(Desc) {
		if (typeof Desc === 'undefined') {
			return false;
		}

		if (!this.IsPropertyDescriptor(Desc)) {
			throw new $TypeError('Desc must be a Property Descriptor');
		}

		if (!has(Desc, '[[Get]]') && !has(Desc, '[[Set]]')) {
			return false;
		}

		return true;
	},

	// https://ecma-international.org/ecma-262/5.1/#sec-8.10.2
	IsDataDescriptor: function IsDataDescriptor(Desc) {
		if (typeof Desc === 'undefined') {
			return false;
		}

		if (!this.IsPropertyDescriptor(Desc)) {
			throw new $TypeError('Desc must be a Property Descriptor');
		}

		if (!has(Desc, '[[Value]]') && !has(Desc, '[[Writable]]')) {
			return false;
		}

		return true;
	},

	// https://ecma-international.org/ecma-262/5.1/#sec-8.10.3
	IsGenericDescriptor: function IsGenericDescriptor(Desc) {
		if (typeof Desc === 'undefined') {
			return false;
		}

		if (!this.IsPropertyDescriptor(Desc)) {
			throw new $TypeError('Desc must be a Property Descriptor');
		}

		if (!this.IsAccessorDescriptor(Desc) && !this.IsDataDescriptor(Desc)) {
			return true;
		}

		return false;
	},

	// https://ecma-international.org/ecma-262/5.1/#sec-8.10.4
	FromPropertyDescriptor: function FromPropertyDescriptor(Desc) {
		if (typeof Desc === 'undefined') {
			return Desc;
		}

		if (!this.IsPropertyDescriptor(Desc)) {
			throw new $TypeError('Desc must be a Property Descriptor');
		}

		if (this.IsDataDescriptor(Desc)) {
			return {
				value: Desc['[[Value]]'],
				writable: !!Desc['[[Writable]]'],
				enumerable: !!Desc['[[Enumerable]]'],
				configurable: !!Desc['[[Configurable]]']
			};
		} else if (this.IsAccessorDescriptor(Desc)) {
			return {
				get: Desc['[[Get]]'],
				set: Desc['[[Set]]'],
				enumerable: !!Desc['[[Enumerable]]'],
				configurable: !!Desc['[[Configurable]]']
			};
		} else {
			throw new $TypeError('FromPropertyDescriptor must be called with a fully populated Property Descriptor');
		}
	},

	// https://ecma-international.org/ecma-262/5.1/#sec-8.10.5
	ToPropertyDescriptor: function ToPropertyDescriptor(Obj) {
		if (this.Type(Obj) !== 'Object') {
			throw new $TypeError('ToPropertyDescriptor requires an object');
		}

		var desc = {};
		if (has(Obj, 'enumerable')) {
			desc['[[Enumerable]]'] = this.ToBoolean(Obj.enumerable);
		}
		if (has(Obj, 'configurable')) {
			desc['[[Configurable]]'] = this.ToBoolean(Obj.configurable);
		}
		if (has(Obj, 'value')) {
			desc['[[Value]]'] = Obj.value;
		}
		if (has(Obj, 'writable')) {
			desc['[[Writable]]'] = this.ToBoolean(Obj.writable);
		}
		if (has(Obj, 'get')) {
			var getter = Obj.get;
			if (typeof getter !== 'undefined' && !this.IsCallable(getter)) {
				throw new TypeError('getter must be a function');
			}
			desc['[[Get]]'] = getter;
		}
		if (has(Obj, 'set')) {
			var setter = Obj.set;
			if (typeof setter !== 'undefined' && !this.IsCallable(setter)) {
				throw new $TypeError('setter must be a function');
			}
			desc['[[Set]]'] = setter;
		}

		if ((has(desc, '[[Get]]') || has(desc, '[[Set]]')) && (has(desc, '[[Value]]') || has(desc, '[[Writable]]'))) {
			throw new $TypeError('Invalid property descriptor. Cannot both specify accessors and a value or writable attribute');
		}
		return desc;
	}
};

module.exports = ES5;


/***/ }),

/***/ "./node_modules/es-abstract/es7.js":
/*!*****************************************!*\
  !*** ./node_modules/es-abstract/es7.js ***!
  \*****************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = __webpack_require__( "./node_modules/es-abstract/es2016.js");


/***/ }),

/***/ "./node_modules/es-abstract/helpers/assign.js":
/*!****************************************************!*\
  !*** ./node_modules/es-abstract/helpers/assign.js ***!
  \****************************************************/

/***/ (function(module, exports, __webpack_require__) {

var bind = __webpack_require__( "./node_modules/function-bind/index.js");
var has = bind.call(Function.call, Object.prototype.hasOwnProperty);

var $assign = Object.assign;

module.exports = function assign(target, source) {
	if ($assign) {
		return $assign(target, source);
	}

	for (var key in source) {
		if (has(source, key)) {
			target[key] = source[key];
		}
	}
	return target;
};


/***/ }),

/***/ "./node_modules/es-abstract/helpers/isFinite.js":
/*!******************************************************!*\
  !*** ./node_modules/es-abstract/helpers/isFinite.js ***!
  \******************************************************/

/***/ (function(module, exports) {

var $isNaN = Number.isNaN || function (a) { return a !== a; };

module.exports = Number.isFinite || function (x) { return typeof x === 'number' && !$isNaN(x) && x !== Infinity && x !== -Infinity; };


/***/ }),

/***/ "./node_modules/es-abstract/helpers/isNaN.js":
/*!***************************************************!*\
  !*** ./node_modules/es-abstract/helpers/isNaN.js ***!
  \***************************************************/

/***/ (function(module, exports) {

module.exports = Number.isNaN || function isNaN(a) {
	return a !== a;
};


/***/ }),

/***/ "./node_modules/es-abstract/helpers/isPrimitive.js":
/*!*********************************************************!*\
  !*** ./node_modules/es-abstract/helpers/isPrimitive.js ***!
  \*********************************************************/

/***/ (function(module, exports) {

module.exports = function isPrimitive(value) {
	return value === null || (typeof value !== 'function' && typeof value !== 'object');
};


/***/ }),

/***/ "./node_modules/es-abstract/helpers/mod.js":
/*!*************************************************!*\
  !*** ./node_modules/es-abstract/helpers/mod.js ***!
  \*************************************************/

/***/ (function(module, exports) {

module.exports = function mod(number, modulo) {
	var remain = number % modulo;
	return Math.floor(remain >= 0 ? remain : remain + modulo);
};


/***/ }),

/***/ "./node_modules/es-abstract/helpers/sign.js":
/*!**************************************************!*\
  !*** ./node_modules/es-abstract/helpers/sign.js ***!
  \**************************************************/

/***/ (function(module, exports) {

module.exports = function sign(number) {
	return number >= 0 ? 1 : -1;
};


/***/ }),

/***/ "./node_modules/es-to-primitive/es2015.js":
/*!************************************************!*\
  !*** ./node_modules/es-to-primitive/es2015.js ***!
  \************************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var hasSymbols = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol';

var isPrimitive = __webpack_require__( "./node_modules/es-to-primitive/helpers/isPrimitive.js");
var isCallable = __webpack_require__( "./node_modules/is-callable/index.js");
var isDate = __webpack_require__( "./node_modules/is-date-object/index.js");
var isSymbol = __webpack_require__( "./node_modules/is-symbol/index.js");

var ordinaryToPrimitive = function OrdinaryToPrimitive(O, hint) {
	if (typeof O === 'undefined' || O === null) {
		throw new TypeError('Cannot call method on ' + O);
	}
	if (typeof hint !== 'string' || (hint !== 'number' && hint !== 'string')) {
		throw new TypeError('hint must be "string" or "number"');
	}
	var methodNames = hint === 'string' ? ['toString', 'valueOf'] : ['valueOf', 'toString'];
	var method, result, i;
	for (i = 0; i < methodNames.length; ++i) {
		method = O[methodNames[i]];
		if (isCallable(method)) {
			result = method.call(O);
			if (isPrimitive(result)) {
				return result;
			}
		}
	}
	throw new TypeError('No default value');
};

var GetMethod = function GetMethod(O, P) {
	var func = O[P];
	if (func !== null && typeof func !== 'undefined') {
		if (!isCallable(func)) {
			throw new TypeError(func + ' returned for property ' + P + ' of object ' + O + ' is not a function');
		}
		return func;
	}
	return void 0;
};

// http://www.ecma-international.org/ecma-262/6.0/#sec-toprimitive
module.exports = function ToPrimitive(input) {
	if (isPrimitive(input)) {
		return input;
	}
	var hint = 'default';
	if (arguments.length > 1) {
		if (arguments[1] === String) {
			hint = 'string';
		} else if (arguments[1] === Number) {
			hint = 'number';
		}
	}

	var exoticToPrim;
	if (hasSymbols) {
		if (Symbol.toPrimitive) {
			exoticToPrim = GetMethod(input, Symbol.toPrimitive);
		} else if (isSymbol(input)) {
			exoticToPrim = Symbol.prototype.valueOf;
		}
	}
	if (typeof exoticToPrim !== 'undefined') {
		var result = exoticToPrim.call(input, hint);
		if (isPrimitive(result)) {
			return result;
		}
		throw new TypeError('unable to convert exotic object to primitive');
	}
	if (hint === 'default' && (isDate(input) || isSymbol(input))) {
		hint = 'string';
	}
	return ordinaryToPrimitive(input, hint === 'default' ? 'number' : hint);
};


/***/ }),

/***/ "./node_modules/es-to-primitive/es5.js":
/*!*********************************************!*\
  !*** ./node_modules/es-to-primitive/es5.js ***!
  \*********************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var toStr = Object.prototype.toString;

var isPrimitive = __webpack_require__( "./node_modules/es-to-primitive/helpers/isPrimitive.js");

var isCallable = __webpack_require__( "./node_modules/is-callable/index.js");

// http://ecma-international.org/ecma-262/5.1/#sec-8.12.8
var ES5internalSlots = {
	'[[DefaultValue]]': function (O) {
		var actualHint;
		if (arguments.length > 1) {
			actualHint = arguments[1];
		} else {
			actualHint = toStr.call(O) === '[object Date]' ? String : Number;
		}

		if (actualHint === String || actualHint === Number) {
			var methods = actualHint === String ? ['toString', 'valueOf'] : ['valueOf', 'toString'];
			var value, i;
			for (i = 0; i < methods.length; ++i) {
				if (isCallable(O[methods[i]])) {
					value = O[methods[i]]();
					if (isPrimitive(value)) {
						return value;
					}
				}
			}
			throw new TypeError('No default value');
		}
		throw new TypeError('invalid [[DefaultValue]] hint supplied');
	}
};

// http://ecma-international.org/ecma-262/5.1/#sec-9.1
module.exports = function ToPrimitive(input) {
	if (isPrimitive(input)) {
		return input;
	}
	if (arguments.length > 1) {
		return ES5internalSlots['[[DefaultValue]]'](input, arguments[1]);
	}
	return ES5internalSlots['[[DefaultValue]]'](input);
};


/***/ }),

/***/ "./node_modules/es-to-primitive/es6.js":
/*!*********************************************!*\
  !*** ./node_modules/es-to-primitive/es6.js ***!
  \*********************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = __webpack_require__( "./node_modules/es-to-primitive/es2015.js");


/***/ }),

/***/ "./node_modules/es-to-primitive/helpers/isPrimitive.js":
/*!*************************************************************!*\
  !*** ./node_modules/es-to-primitive/helpers/isPrimitive.js ***!
  \*************************************************************/

/***/ (function(module, exports) {

module.exports = function isPrimitive(value) {
	return value === null || (typeof value !== 'function' && typeof value !== 'object');
};


/***/ }),

/***/ "./node_modules/es6-promise/auto.js":
/*!******************************************!*\
  !*** ./node_modules/es6-promise/auto.js ***!
  \******************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";
// This file can be required in Browserify and Node.js for automatic polyfill
// To use it:  require('es6-promise/auto');

module.exports = __webpack_require__( "./node_modules/es6-promise/dist/es6-promise.js").polyfill();


/***/ }),

/***/ "./node_modules/es6-promise/dist/es6-promise.js":
/*!******************************************************!*\
  !*** ./node_modules/es6-promise/dist/es6-promise.js ***!
  \******************************************************/

/***/ (function(module, exports, __webpack_require__) {

(function(process, global) {/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */

(function (global, factory) {
	 true ? module.exports = factory() :
	undefined;
}(this, (function () { 'use strict';

function objectOrFunction(x) {
  var type = typeof x;
  return x !== null && (type === 'object' || type === 'function');
}

function isFunction(x) {
  return typeof x === 'function';
}



var _isArray = void 0;
if (Array.isArray) {
  _isArray = Array.isArray;
} else {
  _isArray = function (x) {
    return Object.prototype.toString.call(x) === '[object Array]';
  };
}

var isArray = _isArray;

var len = 0;
var vertxNext = void 0;
var customSchedulerFn = void 0;

var asap = function asap(callback, arg) {
  queue[len] = callback;
  queue[len + 1] = arg;
  len += 2;
  if (len === 2) {
    // If len is 2, that means that we need to schedule an async flush.
    // If additional callbacks are queued before the queue is flushed, they
    // will be processed by this flush that we are scheduling.
    if (customSchedulerFn) {
      customSchedulerFn(flush);
    } else {
      scheduleFlush();
    }
  }
};

function setScheduler(scheduleFn) {
  customSchedulerFn = scheduleFn;
}

function setAsap(asapFn) {
  asap = asapFn;
}

var browserWindow = typeof window !== 'undefined' ? window : undefined;
var browserGlobal = browserWindow || {};
var BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;
var isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';

// test for web worker but not in IE10
var isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';

// node
function useNextTick() {
  // node version 0.10.x displays a deprecation warning when nextTick is used recursively
  // see https://github.com/cujojs/when/issues/410 for details
  return function () {
    return process.nextTick(flush);
  };
}

// vertx
function useVertxTimer() {
  if (typeof vertxNext !== 'undefined') {
    return function () {
      vertxNext(flush);
    };
  }

  return useSetTimeout();
}

function useMutationObserver() {
  var iterations = 0;
  var observer = new BrowserMutationObserver(flush);
  var node = document.createTextNode('');
  observer.observe(node, { characterData: true });

  return function () {
    node.data = iterations = ++iterations % 2;
  };
}

// web worker
function useMessageChannel() {
  var channel = new MessageChannel();
  channel.port1.onmessage = flush;
  return function () {
    return channel.port2.postMessage(0);
  };
}

function useSetTimeout() {
  // Store setTimeout reference so es6-promise will be unaffected by
  // other code modifying setTimeout (like sinon.useFakeTimers())
  var globalSetTimeout = setTimeout;
  return function () {
    return globalSetTimeout(flush, 1);
  };
}

var queue = new Array(1000);
function flush() {
  for (var i = 0; i < len; i += 2) {
    var callback = queue[i];
    var arg = queue[i + 1];

    callback(arg);

    queue[i] = undefined;
    queue[i + 1] = undefined;
  }

  len = 0;
}

function attemptVertx() {
  try {
    var vertx = Function('return this')().require('vertx');
    vertxNext = vertx.runOnLoop || vertx.runOnContext;
    return useVertxTimer();
  } catch (e) {
    return useSetTimeout();
  }
}

var scheduleFlush = void 0;
// Decide what async method to use to triggering processing of queued callbacks:
if (isNode) {
  scheduleFlush = useNextTick();
} else if (BrowserMutationObserver) {
  scheduleFlush = useMutationObserver();
} else if (isWorker) {
  scheduleFlush = useMessageChannel();
} else if (browserWindow === undefined && "function" === 'function') {
  scheduleFlush = attemptVertx();
} else {
  scheduleFlush = useSetTimeout();
}

function then(onFulfillment, onRejection) {
  var parent = this;

  var child = new this.constructor(noop);

  if (child[PROMISE_ID] === undefined) {
    makePromise(child);
  }

  var _state = parent._state;


  if (_state) {
    var callback = arguments[_state - 1];
    asap(function () {
      return invokeCallback(_state, child, callback, parent._result);
    });
  } else {
    subscribe(parent, child, onFulfillment, onRejection);
  }

  return child;
}

/**
  `Promise.resolve` returns a promise that will become resolved with the
  passed `value`. It is shorthand for the following:

  ```javascript
  let promise = new Promise(function(resolve, reject){
    resolve(1);
  });

  promise.then(function(value){
    // value === 1
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  let promise = Promise.resolve(1);

  promise.then(function(value){
    // value === 1
  });
  ```

  @method resolve
  @static
  @param {Any} value value that the returned promise will be resolved with
  Useful for tooling.
  @return {Promise} a promise that will become fulfilled with the given
  `value`
*/
function resolve$1(object) {
  
  var Constructor = this;

  if (object && typeof object === 'object' && object.constructor === Constructor) {
    return object;
  }

  var promise = new Constructor(noop);
  resolve(promise, object);
  return promise;
}

var PROMISE_ID = Math.random().toString(36).substring(2);

function noop() {}

var PENDING = void 0;
var FULFILLED = 1;
var REJECTED = 2;

var TRY_CATCH_ERROR = { error: null };

function selfFulfillment() {
  return new TypeError("You cannot resolve a promise with itself");
}

function cannotReturnOwn() {
  return new TypeError('A promises callback cannot return that same promise.');
}

function getThen(promise) {
  try {
    return promise.then;
  } catch (error) {
    TRY_CATCH_ERROR.error = error;
    return TRY_CATCH_ERROR;
  }
}

function tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {
  try {
    then$$1.call(value, fulfillmentHandler, rejectionHandler);
  } catch (e) {
    return e;
  }
}

function handleForeignThenable(promise, thenable, then$$1) {
  asap(function (promise) {
    var sealed = false;
    var error = tryThen(then$$1, thenable, function (value) {
      if (sealed) {
        return;
      }
      sealed = true;
      if (thenable !== value) {
        resolve(promise, value);
      } else {
        fulfill(promise, value);
      }
    }, function (reason) {
      if (sealed) {
        return;
      }
      sealed = true;

      reject(promise, reason);
    }, 'Settle: ' + (promise._label || ' unknown promise'));

    if (!sealed && error) {
      sealed = true;
      reject(promise, error);
    }
  }, promise);
}

function handleOwnThenable(promise, thenable) {
  if (thenable._state === FULFILLED) {
    fulfill(promise, thenable._result);
  } else if (thenable._state === REJECTED) {
    reject(promise, thenable._result);
  } else {
    subscribe(thenable, undefined, function (value) {
      return resolve(promise, value);
    }, function (reason) {
      return reject(promise, reason);
    });
  }
}

function handleMaybeThenable(promise, maybeThenable, then$$1) {
  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {
    handleOwnThenable(promise, maybeThenable);
  } else {
    if (then$$1 === TRY_CATCH_ERROR) {
      reject(promise, TRY_CATCH_ERROR.error);
      TRY_CATCH_ERROR.error = null;
    } else if (then$$1 === undefined) {
      fulfill(promise, maybeThenable);
    } else if (isFunction(then$$1)) {
      handleForeignThenable(promise, maybeThenable, then$$1);
    } else {
      fulfill(promise, maybeThenable);
    }
  }
}

function resolve(promise, value) {
  if (promise === value) {
    reject(promise, selfFulfillment());
  } else if (objectOrFunction(value)) {
    handleMaybeThenable(promise, value, getThen(value));
  } else {
    fulfill(promise, value);
  }
}

function publishRejection(promise) {
  if (promise._onerror) {
    promise._onerror(promise._result);
  }

  publish(promise);
}

function fulfill(promise, value) {
  if (promise._state !== PENDING) {
    return;
  }

  promise._result = value;
  promise._state = FULFILLED;

  if (promise._subscribers.length !== 0) {
    asap(publish, promise);
  }
}

function reject(promise, reason) {
  if (promise._state !== PENDING) {
    return;
  }
  promise._state = REJECTED;
  promise._result = reason;

  asap(publishRejection, promise);
}

function subscribe(parent, child, onFulfillment, onRejection) {
  var _subscribers = parent._subscribers;
  var length = _subscribers.length;


  parent._onerror = null;

  _subscribers[length] = child;
  _subscribers[length + FULFILLED] = onFulfillment;
  _subscribers[length + REJECTED] = onRejection;

  if (length === 0 && parent._state) {
    asap(publish, parent);
  }
}

function publish(promise) {
  var subscribers = promise._subscribers;
  var settled = promise._state;

  if (subscribers.length === 0) {
    return;
  }

  var child = void 0,
      callback = void 0,
      detail = promise._result;

  for (var i = 0; i < subscribers.length; i += 3) {
    child = subscribers[i];
    callback = subscribers[i + settled];

    if (child) {
      invokeCallback(settled, child, callback, detail);
    } else {
      callback(detail);
    }
  }

  promise._subscribers.length = 0;
}

function tryCatch(callback, detail) {
  try {
    return callback(detail);
  } catch (e) {
    TRY_CATCH_ERROR.error = e;
    return TRY_CATCH_ERROR;
  }
}

function invokeCallback(settled, promise, callback, detail) {
  var hasCallback = isFunction(callback),
      value = void 0,
      error = void 0,
      succeeded = void 0,
      failed = void 0;

  if (hasCallback) {
    value = tryCatch(callback, detail);

    if (value === TRY_CATCH_ERROR) {
      failed = true;
      error = value.error;
      value.error = null;
    } else {
      succeeded = true;
    }

    if (promise === value) {
      reject(promise, cannotReturnOwn());
      return;
    }
  } else {
    value = detail;
    succeeded = true;
  }

  if (promise._state !== PENDING) {
    // noop
  } else if (hasCallback && succeeded) {
    resolve(promise, value);
  } else if (failed) {
    reject(promise, error);
  } else if (settled === FULFILLED) {
    fulfill(promise, value);
  } else if (settled === REJECTED) {
    reject(promise, value);
  }
}

function initializePromise(promise, resolver) {
  try {
    resolver(function resolvePromise(value) {
      resolve(promise, value);
    }, function rejectPromise(reason) {
      reject(promise, reason);
    });
  } catch (e) {
    reject(promise, e);
  }
}

var id = 0;
function nextId() {
  return id++;
}

function makePromise(promise) {
  promise[PROMISE_ID] = id++;
  promise._state = undefined;
  promise._result = undefined;
  promise._subscribers = [];
}

function validationError() {
  return new Error('Array Methods must be provided an Array');
}

var Enumerator = function () {
  function Enumerator(Constructor, input) {
    this._instanceConstructor = Constructor;
    this.promise = new Constructor(noop);

    if (!this.promise[PROMISE_ID]) {
      makePromise(this.promise);
    }

    if (isArray(input)) {
      this.length = input.length;
      this._remaining = input.length;

      this._result = new Array(this.length);

      if (this.length === 0) {
        fulfill(this.promise, this._result);
      } else {
        this.length = this.length || 0;
        this._enumerate(input);
        if (this._remaining === 0) {
          fulfill(this.promise, this._result);
        }
      }
    } else {
      reject(this.promise, validationError());
    }
  }

  Enumerator.prototype._enumerate = function _enumerate(input) {
    for (var i = 0; this._state === PENDING && i < input.length; i++) {
      this._eachEntry(input[i], i);
    }
  };

  Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {
    var c = this._instanceConstructor;
    var resolve$$1 = c.resolve;


    if (resolve$$1 === resolve$1) {
      var _then = getThen(entry);

      if (_then === then && entry._state !== PENDING) {
        this._settledAt(entry._state, i, entry._result);
      } else if (typeof _then !== 'function') {
        this._remaining--;
        this._result[i] = entry;
      } else if (c === Promise$1) {
        var promise = new c(noop);
        handleMaybeThenable(promise, entry, _then);
        this._willSettleAt(promise, i);
      } else {
        this._willSettleAt(new c(function (resolve$$1) {
          return resolve$$1(entry);
        }), i);
      }
    } else {
      this._willSettleAt(resolve$$1(entry), i);
    }
  };

  Enumerator.prototype._settledAt = function _settledAt(state, i, value) {
    var promise = this.promise;


    if (promise._state === PENDING) {
      this._remaining--;

      if (state === REJECTED) {
        reject(promise, value);
      } else {
        this._result[i] = value;
      }
    }

    if (this._remaining === 0) {
      fulfill(promise, this._result);
    }
  };

  Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {
    var enumerator = this;

    subscribe(promise, undefined, function (value) {
      return enumerator._settledAt(FULFILLED, i, value);
    }, function (reason) {
      return enumerator._settledAt(REJECTED, i, reason);
    });
  };

  return Enumerator;
}();

/**
  `Promise.all` accepts an array of promises, and returns a new promise which
  is fulfilled with an array of fulfillment values for the passed promises, or
  rejected with the reason of the first passed promise to be rejected. It casts all
  elements of the passed iterable to promises as it runs this algorithm.

  Example:

  ```javascript
  let promise1 = resolve(1);
  let promise2 = resolve(2);
  let promise3 = resolve(3);
  let promises = [ promise1, promise2, promise3 ];

  Promise.all(promises).then(function(array){
    // The array here would be [ 1, 2, 3 ];
  });
  ```

  If any of the `promises` given to `all` are rejected, the first promise
  that is rejected will be given as an argument to the returned promises's
  rejection handler. For example:

  Example:

  ```javascript
  let promise1 = resolve(1);
  let promise2 = reject(new Error("2"));
  let promise3 = reject(new Error("3"));
  let promises = [ promise1, promise2, promise3 ];

  Promise.all(promises).then(function(array){
    // Code here never runs because there are rejected promises!
  }, function(error) {
    // error.message === "2"
  });
  ```

  @method all
  @static
  @param {Array} entries array of promises
  @param {String} label optional string for labeling the promise.
  Useful for tooling.
  @return {Promise} promise that is fulfilled when all `promises` have been
  fulfilled, or rejected if any of them become rejected.
  @static
*/
function all(entries) {
  return new Enumerator(this, entries).promise;
}

/**
  `Promise.race` returns a new promise which is settled in the same way as the
  first passed promise to settle.

  Example:

  ```javascript
  let promise1 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 1');
    }, 200);
  });

  let promise2 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 2');
    }, 100);
  });

  Promise.race([promise1, promise2]).then(function(result){
    // result === 'promise 2' because it was resolved before promise1
    // was resolved.
  });
  ```

  `Promise.race` is deterministic in that only the state of the first
  settled promise matters. For example, even if other promises given to the
  `promises` array argument are resolved, but the first settled promise has
  become rejected before the other promises became fulfilled, the returned
  promise will become rejected:

  ```javascript
  let promise1 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 1');
    }, 200);
  });

  let promise2 = new Promise(function(resolve, reject){
    setTimeout(function(){
      reject(new Error('promise 2'));
    }, 100);
  });

  Promise.race([promise1, promise2]).then(function(result){
    // Code here never runs
  }, function(reason){
    // reason.message === 'promise 2' because promise 2 became rejected before
    // promise 1 became fulfilled
  });
  ```

  An example real-world use case is implementing timeouts:

  ```javascript
  Promise.race([ajax('foo.json'), timeout(5000)])
  ```

  @method race
  @static
  @param {Array} promises array of promises to observe
  Useful for tooling.
  @return {Promise} a promise which settles in the same way as the first passed
  promise to settle.
*/
function race(entries) {
  
  var Constructor = this;

  if (!isArray(entries)) {
    return new Constructor(function (_, reject) {
      return reject(new TypeError('You must pass an array to race.'));
    });
  } else {
    return new Constructor(function (resolve, reject) {
      var length = entries.length;
      for (var i = 0; i < length; i++) {
        Constructor.resolve(entries[i]).then(resolve, reject);
      }
    });
  }
}

/**
  `Promise.reject` returns a promise rejected with the passed `reason`.
  It is shorthand for the following:

  ```javascript
  let promise = new Promise(function(resolve, reject){
    reject(new Error('WHOOPS'));
  });

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  let promise = Promise.reject(new Error('WHOOPS'));

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  @method reject
  @static
  @param {Any} reason value that the returned promise will be rejected with.
  Useful for tooling.
  @return {Promise} a promise rejected with the given `reason`.
*/
function reject$1(reason) {
  
  var Constructor = this;
  var promise = new Constructor(noop);
  reject(promise, reason);
  return promise;
}

function needsResolver() {
  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');
}

function needsNew() {
  throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}

/**
  Promise objects represent the eventual result of an asynchronous operation. The
  primary way of interacting with a promise is through its `then` method, which
  registers callbacks to receive either a promise's eventual value or the reason
  why the promise cannot be fulfilled.

  Terminology
  -----------

  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.
  - `thenable` is an object or function that defines a `then` method.
  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).
  - `exception` is a value that is thrown using the throw statement.
  - `reason` is a value that indicates why a promise was rejected.
  - `settled` the final resting state of a promise, fulfilled or rejected.

  A promise can be in one of three states: pending, fulfilled, or rejected.

  Promises that are fulfilled have a fulfillment value and are in the fulfilled
  state.  Promises that are rejected have a rejection reason and are in the
  rejected state.  A fulfillment value is never a thenable.

  Promises can also be said to *resolve* a value.  If this value is also a
  promise, then the original promise's settled state will match the value's
  settled state.  So a promise that *resolves* a promise that rejects will
  itself reject, and a promise that *resolves* a promise that fulfills will
  itself fulfill.


  Basic Usage:
  ------------

  ```js
  let promise = new Promise(function(resolve, reject) {
    // on success
    resolve(value);

    // on failure
    reject(reason);
  });

  promise.then(function(value) {
    // on fulfillment
  }, function(reason) {
    // on rejection
  });
  ```

  Advanced Usage:
  ---------------

  Promises shine when abstracting away asynchronous interactions such as
  `XMLHttpRequest`s.

  ```js
  function getJSON(url) {
    return new Promise(function(resolve, reject){
      let xhr = new XMLHttpRequest();

      xhr.open('GET', url);
      xhr.onreadystatechange = handler;
      xhr.responseType = 'json';
      xhr.setRequestHeader('Accept', 'application/json');
      xhr.send();

      function handler() {
        if (this.readyState === this.DONE) {
          if (this.status === 200) {
            resolve(this.response);
          } else {
            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));
          }
        }
      };
    });
  }

  getJSON('/posts.json').then(function(json) {
    // on fulfillment
  }, function(reason) {
    // on rejection
  });
  ```

  Unlike callbacks, promises are great composable primitives.

  ```js
  Promise.all([
    getJSON('/posts'),
    getJSON('/comments')
  ]).then(function(values){
    values[0] // => postsJSON
    values[1] // => commentsJSON

    return values;
  });
  ```

  @class Promise
  @param {Function} resolver
  Useful for tooling.
  @constructor
*/

var Promise$1 = function () {
  function Promise(resolver) {
    this[PROMISE_ID] = nextId();
    this._result = this._state = undefined;
    this._subscribers = [];

    if (noop !== resolver) {
      typeof resolver !== 'function' && needsResolver();
      this instanceof Promise ? initializePromise(this, resolver) : needsNew();
    }
  }

  /**
  The primary way of interacting with a promise is through its `then` method,
  which registers callbacks to receive either a promise's eventual value or the
  reason why the promise cannot be fulfilled.
   ```js
  findUser().then(function(user){
    // user is available
  }, function(reason){
    // user is unavailable, and you are given the reason why
  });
  ```
   Chaining
  --------
   The return value of `then` is itself a promise.  This second, 'downstream'
  promise is resolved with the return value of the first promise's fulfillment
  or rejection handler, or rejected if the handler throws an exception.
   ```js
  findUser().then(function (user) {
    return user.name;
  }, function (reason) {
    return 'default name';
  }).then(function (userName) {
    // If `findUser` fulfilled, `userName` will be the user's name, otherwise it
    // will be `'default name'`
  });
   findUser().then(function (user) {
    throw new Error('Found user, but still unhappy');
  }, function (reason) {
    throw new Error('`findUser` rejected and we're unhappy');
  }).then(function (value) {
    // never reached
  }, function (reason) {
    // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.
    // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.
  });
  ```
  If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.
   ```js
  findUser().then(function (user) {
    throw new PedagogicalException('Upstream error');
  }).then(function (value) {
    // never reached
  }).then(function (value) {
    // never reached
  }, function (reason) {
    // The `PedgagocialException` is propagated all the way down to here
  });
  ```
   Assimilation
  ------------
   Sometimes the value you want to propagate to a downstream promise can only be
  retrieved asynchronously. This can be achieved by returning a promise in the
  fulfillment or rejection handler. The downstream promise will then be pending
  until the returned promise is settled. This is called *assimilation*.
   ```js
  findUser().then(function (user) {
    return findCommentsByAuthor(user);
  }).then(function (comments) {
    // The user's comments are now available
  });
  ```
   If the assimliated promise rejects, then the downstream promise will also reject.
   ```js
  findUser().then(function (user) {
    return findCommentsByAuthor(user);
  }).then(function (comments) {
    // If `findCommentsByAuthor` fulfills, we'll have the value here
  }, function (reason) {
    // If `findCommentsByAuthor` rejects, we'll have the reason here
  });
  ```
   Simple Example
  --------------
   Synchronous Example
   ```javascript
  let result;
   try {
    result = findResult();
    // success
  } catch(reason) {
    // failure
  }
  ```
   Errback Example
   ```js
  findResult(function(result, err){
    if (err) {
      // failure
    } else {
      // success
    }
  });
  ```
   Promise Example;
   ```javascript
  findResult().then(function(result){
    // success
  }, function(reason){
    // failure
  });
  ```
   Advanced Example
  --------------
   Synchronous Example
   ```javascript
  let author, books;
   try {
    author = findAuthor();
    books  = findBooksByAuthor(author);
    // success
  } catch(reason) {
    // failure
  }
  ```
   Errback Example
   ```js
   function foundBooks(books) {
   }
   function failure(reason) {
   }
   findAuthor(function(author, err){
    if (err) {
      failure(err);
      // failure
    } else {
      try {
        findBoooksByAuthor(author, function(books, err) {
          if (err) {
            failure(err);
          } else {
            try {
              foundBooks(books);
            } catch(reason) {
              failure(reason);
            }
          }
        });
      } catch(error) {
        failure(err);
      }
      // success
    }
  });
  ```
   Promise Example;
   ```javascript
  findAuthor().
    then(findBooksByAuthor).
    then(function(books){
      // found books
  }).catch(function(reason){
    // something went wrong
  });
  ```
   @method then
  @param {Function} onFulfilled
  @param {Function} onRejected
  Useful for tooling.
  @return {Promise}
  */

  /**
  `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same
  as the catch block of a try/catch statement.
  ```js
  function findAuthor(){
  throw new Error('couldn't find that author');
  }
  // synchronous
  try {
  findAuthor();
  } catch(reason) {
  // something went wrong
  }
  // async with promises
  findAuthor().catch(function(reason){
  // something went wrong
  });
  ```
  @method catch
  @param {Function} onRejection
  Useful for tooling.
  @return {Promise}
  */


  Promise.prototype.catch = function _catch(onRejection) {
    return this.then(null, onRejection);
  };

  /**
    `finally` will be invoked regardless of the promise's fate just as native
    try/catch/finally behaves
  
    Synchronous example:
  
    ```js
    findAuthor() {
      if (Math.random() > 0.5) {
        throw new Error();
      }
      return new Author();
    }
  
    try {
      return findAuthor(); // succeed or fail
    } catch(error) {
      return findOtherAuther();
    } finally {
      // always runs
      // doesn't affect the return value
    }
    ```
  
    Asynchronous example:
  
    ```js
    findAuthor().catch(function(reason){
      return findOtherAuther();
    }).finally(function(){
      // author was either found, or not
    });
    ```
  
    @method finally
    @param {Function} callback
    @return {Promise}
  */


  Promise.prototype.finally = function _finally(callback) {
    var promise = this;
    var constructor = promise.constructor;

    if (isFunction(callback)) {
      return promise.then(function (value) {
        return constructor.resolve(callback()).then(function () {
          return value;
        });
      }, function (reason) {
        return constructor.resolve(callback()).then(function () {
          throw reason;
        });
      });
    }

    return promise.then(callback, callback);
  };

  return Promise;
}();

Promise$1.prototype.then = then;
Promise$1.all = all;
Promise$1.race = race;
Promise$1.resolve = resolve$1;
Promise$1.reject = reject$1;
Promise$1._setScheduler = setScheduler;
Promise$1._setAsap = setAsap;
Promise$1._asap = asap;


function polyfill() {
  var local = void 0;

  if (typeof global !== 'undefined') {
    local = global;
  } else if (typeof self !== 'undefined') {
    local = self;
  } else {
    try {
      local = Function('return this')();
    } catch (e) {
      throw new Error('polyfill failed because global object is unavailable in this environment');
    }
  }

  var P = local.Promise;

  if (P) {
    var promiseToString = null;
    try {
      promiseToString = Object.prototype.toString.call(P.resolve());
    } catch (e) {
      // silently ignored
    }

    if (promiseToString === '[object Promise]' && !P.cast) {
      return;
    }
  }

  local.Promise = Promise$1;
}

// Strange compat..
Promise$1.polyfill = polyfill;
Promise$1.Promise = Promise$1;

return Promise$1;

})));



//# sourceMappingURL=es6-promise.map

}.call(this, __webpack_require__( "./node_modules/process/browser.js"), __webpack_require__( "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/currency-selector/currency-selector.vue?vue&type=style&index=0&lang=scss":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib??ref--1-2!./node_modules/resolve-url-loader!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib??ref--1-5!./node_modules/vue-loader/lib??vue-loader-options!./src/components/currency-selector/currency-selector.vue?vue&type=style&index=0&lang=scss ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/

/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/global-search/global-search.vue?vue&type=style&index=0&lang=scss":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib??ref--1-2!./node_modules/resolve-url-loader!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib??ref--1-5!./node_modules/vue-loader/lib??vue-loader-options!./src/components/global-search/global-search.vue?vue&type=style&index=0&lang=scss ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/

/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/going-app/going-app.vue?vue&type=style&index=0&lang=scss":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib??ref--1-2!./node_modules/resolve-url-loader!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib??ref--1-5!./node_modules/vue-loader/lib??vue-loader-options!./src/components/going-app/going-app.vue?vue&type=style&index=0&lang=scss ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/

/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/homepage/search-overlay/search-overlay.vue?vue&type=style&index=0&lang=scss":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib??ref--1-2!./node_modules/resolve-url-loader!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib??ref--1-5!./node_modules/vue-loader/lib??vue-loader-options!./src/components/homepage/search-overlay/search-overlay.vue?vue&type=style&index=0&lang=scss ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/

/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/language-selector/language-selector.vue?vue&type=style&index=0&lang=scss":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib??ref--1-2!./node_modules/resolve-url-loader!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib??ref--1-5!./node_modules/vue-loader/lib??vue-loader-options!./src/components/language-selector/language-selector.vue?vue&type=style&index=0&lang=scss ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/

/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/layer/loading/loading.vue?vue&type=style&index=0&lang=scss":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib??ref--1-2!./node_modules/resolve-url-loader!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib??ref--1-5!./node_modules/vue-loader/lib??vue-loader-options!./src/components/layer/loading/loading.vue?vue&type=style&index=0&lang=scss ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/

/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=style&index=0&lang=scss":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib??ref--1-2!./node_modules/resolve-url-loader!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib??ref--1-5!./node_modules/vue-loader/lib??vue-loader-options!./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=style&index=0&lang=scss ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/

/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=style&index=0&lang=scss":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib??ref--1-2!./node_modules/resolve-url-loader!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib??ref--1-5!./node_modules/vue-loader/lib??vue-loader-options!./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=style&index=0&lang=scss ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/

/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/desktop/page.vue?vue&type=style&index=0&lang=scss":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib??ref--1-2!./node_modules/resolve-url-loader!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib??ref--1-5!./node_modules/vue-loader/lib??vue-loader-options!./src/desktop/page.vue?vue&type=style&index=0&lang=scss ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/

/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/shared/html/base.vue?vue&type=style&index=0&lang=scss":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib??ref--1-2!./node_modules/resolve-url-loader!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib??ref--1-5!./node_modules/vue-loader/lib??vue-loader-options!./src/shared/html/base.vue?vue&type=style&index=0&lang=scss ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/

/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./node_modules/fetch-polyfill2/dist/index.js":
/*!****************************************************!*\
  !*** ./node_modules/fetch-polyfill2/dist/index.js ***!
  \****************************************************/

/***/ (function(module, exports, __webpack_require__) {

(function webpackUniversalModuleDefinition(root, factory) {
	if(true)
		module.exports = factory();
	else {}
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([

/***/ function(module, exports, __webpack_require__) {

	var Request = __webpack_require__(1)
	var Response = __webpack_require__(5)
	var Headers = __webpack_require__(2)
	var Transport = __webpack_require__(6)

	if (![].forEach) {
	    Array.prototype.forEach = function (fn, scope) {
	        'use strict'
	        var i, len
	        for (i = 0, len = this.length; i < len; ++i) {
	            if (i in this) {
	                fn.call(scope, this[i], i, this)
	            }
	        }
	    }
	}
	if (!'司徒正美'.trim) {
	    var rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g
	    String.prototype.trim = function () {
	        return this.replace(rtrim, '')
	    }
	}
	function headers(xhr) {
	    var head = new Headers()
	    if (xhr.getAllResponseHeaders) {
	        var headerStr = xhr.getAllResponseHeaders() || ''
	        if (/\S/.test(headerStr)) {
	            //http://www.w3.org/TR/XMLHttpRequest/#the-getallresponseheaders-method
	            var headerPairs = headerStr.split('\u000d\u000a');
	            for (var i = 0; i < headerPairs.length; i++) {
	                var headerPair = headerPairs[i];
	                // Can't use split() here because it does the wrong thing
	                // if the header value has the string ": " in it.
	                var index = headerPair.indexOf('\u003a\u0020')
	                if (index > 0) {
	                    var key = headerPair.substring(0, index).trim()
	                    var value = headerPair.substring(index + 2).trim()
	                    head.append(key, value)
	                }
	            }
	        }
	    }
	    return head
	}
	function fetch(input, init) {
	    return new Promise(function (resolve, reject) {
	        var request
	        if (!init && (init instanceof Request)) {
	            request = input
	        } else {
	            request = new Request(input, init)
	        }
	     

	        var xhr = new Transport(request)
	        function responseURL() {
	            if ('responseURL' in xhr) {
	                return xhr.responseURL
	            }
	            // Avoid security warnings on getResponseHeader when not allowed by CORS
	            if (xhr.getResponseHeader && /^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {
	                return xhr.getResponseHeader('X-Request-URL')
	            }

	            return
	        }

	        xhr.on('load', function (event) {
	            var options = {
	                status: event.status,
	                statusText: event.statusText,
	                headers: headers(event),
	                url: responseURL()
	            }
	            var body = 'response' in event ? event.response : event.responseText
	            resolve(new Response(body, options))
	        })
	        xhr.on('error', function () {
	            reject(new TypeError('Network request failed'))
	        })
	        xhr.on('timeout', function () {
	            reject(new TypeError('Network request timeout'))
	        })

	        xhr.open(request.method, request.url, true)

	        request.headers.forEach(function (value, name) {
	            xhr.setRequestHeader(name, value)
	        })

	        xhr.send(typeof request._body === 'undefined' ? null : request._body)
	    })
	}
	function notFunc(a){
	  return  !/\scode\]\s+\}$/.test(a)
	}
	if (notFunc(window.fetch)) {
	    window.fetch = fetch
	}
	if (typeof avalon === 'function') {
	    avalon.fetch = fetch
	}
	module.exports = fetch

/***/ },

/***/ function(module, exports, __webpack_require__) {

	var Headers = __webpack_require__(2)
	var Body = __webpack_require__(4)

	function Request(input, options) {
	    options = options || {}
	    var body = options.body
	    if (input instanceof Request) {
	        if (input.bodyUsed) {
	            throw new TypeError('Already read')
	        }
	        this.url = input.url
	        this.credentials = input.credentials
	        if (!options.headers) {
	            var h = this.headers = new Headers(input.headers)
	            if(!h.map['x-requested-with']){
	                h.set('X-Requested-With', 'XMLHttpRequest')
	            }
	        }
	        this.method = input.method
	        this.mode = input.mode
	        if (!body) {
	            body = input._body
	            input.bodyUsed = true
	        }
	    } else {
	        this.url = input
	    }

	    this.credentials = options.credentials || this.credentials || 'omit'
	    if (options.headers || !this.headers) {
	        this.headers = new Headers(options.headers)
	    }
	    this.method = (options.method || this.method || 'GET').toUpperCase()
	    this.mode = options.mode || this.mode || null
	    this.referrer = null

	    if ((this.method === 'GET' || this.method === 'HEAD') && body) {
	        throw new TypeError('Body not allowed for GET or HEAD requests')
	    }
	    this._initBody(body)
	}

	Request.prototype.clone = function () {
	    return new Request(this)
	}

	var F = function(){} 
	F.prototype = Body.prototype 
	Request.prototype = new F() 

	module.exports = Request

/***/ },

/***/ function(module, exports, __webpack_require__) {

	var support = __webpack_require__(3)

	function Headers(headers) {
	    this.map = {}
	    if (headers instanceof Headers) {
	        headers.forEach(function (value, name) {
	            this.append(name, value)
	        }, this)

	    } else if (headers) {
	        for (var name in headers) {
	            if (headers.hasOwnProperty(name)) {
	                this.append(name, headers[name])
	            }
	        }

	    }
	}

	Headers.prototype.append = function (name, value) {
	    name = normalizeName(name)
	    value = normalizeValue(value)
	    var list = this.map[name]
	    if (!list) {
	        list = []
	        this.map[name] = list
	    }
	    list.push(value)
	}

	Headers.prototype['delete'] = function (name) {
	    delete this.map[normalizeName(name)]
	}

	Headers.prototype.get = function (name) {
	    var values = this.map[normalizeName(name)]
	    return values ? values[0] : null
	}

	Headers.prototype.getAll = function (name) {
	    return this.map[normalizeName(name)] || []
	}

	Headers.prototype.has = function (name) {
	    return this.map.hasOwnProperty(normalizeName(name))
	}

	Headers.prototype.set = function (name, value) {
	    this.map[normalizeName(name)] = [normalizeValue(value)]
	}

	Headers.prototype.forEach = function (callback, thisArg) {
	    for (var name in this.map) {
	        if (this.map.hasOwnProperty(name)) {
	            this.map[name].forEach(function (value) {
	                callback.call(thisArg, value, name, this)
	            }, this)
	        }
	    }
	}

	Headers.prototype.keys = function () {
	    var items = []
	    this.forEach(function (value, name) {
	        items.push(name)
	    })
	    return iteratorFor(items)
	}

	Headers.prototype.values = function () {
	    var items = []
	    this.forEach(function (value) {
	        items.push(value)
	    })
	    return iteratorFor(items)
	}

	Headers.prototype.entries = function () {
	    var items = []
	    this.forEach(function (value, name) {
	        items.push([name, value])
	    })
	    return iteratorFor(items)
	}

	  if (support.iterable) {
	    Headers.prototype[Symbol.iterator] = Headers.prototype.entries
	  }

	function normalizeName(name) {
	    if (typeof name !== 'string') {
	        name = String(name)
	    }
	    if (/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name)) {
	        throw new TypeError('Invalid character in header field name')
	    }
	    return name.toLowerCase()
	}

	function normalizeValue(value) {
	    if (typeof value !== 'string') {
	        value = String(value)
	    }
	    return value
	}

	module.exports = Headers

/***/ },

/***/ function(module, exports) {

	module.exports = {
	    searchParams: 'URLSearchParams' in window,
	    iterable: 'Symbol' in window && 'iterator' in window,
	    blob: 'FileReader' in window && 'Blob' in window && (function () {
	        try {
	            new Blob()
	            return true
	        } catch (e) {
	            return false
	        }
	    })(),
	    formData: 'FormData' in window,
	    arrayBuffer: 'ArrayBuffer' in window
	}


/***/ },

/***/ function(module, exports, __webpack_require__) {

	var support = __webpack_require__(3)

	function Body() {
	    this.bodyUsed = false
	}
	var p = Body.prototype

	'text,blob,formData,json,arrayBuffer'.replace(/\w+/g, function (method) {
	    p[method] = function () {
	        return consumeBody(this).then(function (body) {
	            return convertBody(body, method)
	        })
	    }
	})

	p._initBody = function (body) {
	    this._body = body
	    if (!this.headers.get('content-type')) {
	        var a = bodyType(body)
	        switch (a) {
	            case 'text':
	                this.headers.set('content-type', 'text/plain;charset=UTF-8')
	                break
	            case 'blob':
	                if (body && body.type) {
	                    this.headers.set('content-type', body.type)
	                }
	                break
	            case 'searchParams':
	                this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')
	                break
	        }
	    }
	}

	function consumeBody(body) {
	    if (body.bodyUsed) {
	        return Promise.reject(new TypeError('Already read'))
	    } else {
	        body.bodyUsed = true
	        return Promise.resolve(body._body)
	    }
	}

	function convertBody(body, to) {
	    var from = bodyType(body)
	    if (body === null || body === void 0 || !from || from === to) {
	        return Promise.resolve(body)
	    } else if (map[to] && map[to][from]) {
	        return map[to][from](body)
	    } else {
	        return Promise.reject(new Error('Convertion from ' + from + ' to ' + to + ' not supported'))
	    }
	}


	var map = {
	    text: {
	        json: function (body) {//json --> text
	            return Promise.resolve(JSON.stringify(body))
	        },
	        blob: function (body) {//blob --> text
	            return blob2text(body)
	        },
	        searchParams: function (body) {//searchParams --> text
	            return Promise.resolve(body.toString())
	        }
	    },
	    json: {
	        text: function (body) {//text --> json
	            return Promise.resolve(parseJSON(body))
	        },
	        blob: function (body) {//blob --> json
	            return blob2text(body).then(parseJSON)
	        }
	    },
	    formData: {
	        text: function (body) {//text --> formData
	            return text2formData(body)
	        }
	    },
	    blob: {
	        text: function (body) {//json --> blob
	            return Promise.resolve(new Blob([body]))
	        },
	        json: function (body) {//json --> blob
	            return Promise.resolve(new Blob([JSON.stringify(body)]))
	        }
	    },
	    arrayBuffer: {
	        blob: function (body) {
	            return blob2ArrayBuffer(body)
	        }
	    }
	}

	function bodyType(body) {
	    if (typeof body === 'string') {
	        return 'text'
	    } else if (support.blob && (body instanceof Blob)) {
	        return 'blob'
	    } else if (support.formData && (body instanceof FormData)) {
	        return 'formData'
	    } else if (support.searchParams && (body instanceof URLSearchParams)) {
	        return 'searchParams'
	    } else if (body && typeof body === 'object') {
	        return 'json'
	    } else {
	        return null
	    }
	}


	function reader2Promise(reader) {
	    return new Promise(function (resolve, reject) {
	        reader.onload = function () {
	            resolve(reader.result)
	        }
	        reader.onerror = function () {
	            reject(reader.error)
	        }
	    })
	}
	
	function text2formData(body) {
	    var form = new FormData()
	    body.trim().split('&').forEach(function (bytes) {
	        if (bytes) {
	            var split = bytes.split('=')
	            var name = split.shift().replace(/\+/g, ' ')
	            var value = split.join('=').replace(/\+/g, ' ')
	            form.append(decodeURIComponent(name), decodeURIComponent(value))
	        }
	    })
	    return Promise.resolve(form)
	}

	function blob2ArrayBuffer(blob) {
	    var reader = new FileReader()
	    reader.readAsArrayBuffer(blob)
	    return reader2Promise(reader)
	}

	function blob2text(blob) {
	    var reader = new FileReader()
	    reader.readAsText(blob)
	    return reader2Promise(reader)
	}


	function parseJSON(body) {
	    try {
	        return JSON.parse(body)
	    } catch (ex) {
	        throw 'Invalid JSON'
	    }
	}

	module.exports = Body

/***/ },

/***/ function(module, exports, __webpack_require__) {

	var Headers = __webpack_require__(2)
	var Body = __webpack_require__(4)

	function Response(bodyInit, options) {
	    if (!options) {
	        options = {}
	    }

	    this.type = 'default'

	    this.status = options.status
	    if (1223 === this.status) {
	        this.status = 204
	    }
	    this.ok = this.status >= 200 && this.status < 300
	    this.statusText = options.statusText
	    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)
	    this.url = options.url || ''
	    this._initBody(bodyInit)
	}

	var F = function(){} 
	F.prototype = Body.prototype 
	Response.prototype = new F() 

	Response.prototype.clone = function () {
	    return new Response(this._bodyInit, {
	        status: this.status,
	        statusText: this.statusText,
	        headers: new Headers(this.headers),
	        url: this.url
	    })
	}

	Response.error = function () {
	    var response = new Response(null, {status: 0, statusText: ''})
	    response.type = 'error'
	    return response
	}

	var redirectStatuses = [301, 302, 303, 307, 308]

	Response.redirect = function (url, status) {
	    if (redirectStatuses.indexOf(status) === -1) {
	        throw new RangeError('Invalid status code')
	    }

	    return new Response(null, {status: status, headers: {location: url}})
	}

	module.exports = Response

/***/ },

/***/ function(module, exports, __webpack_require__) {

	var AXO = __webpack_require__(7)
	var JSONP = __webpack_require__(8)
	var XDR = __webpack_require__(9)
	var XHR = __webpack_require__(10)
	var msie = 0
	if (window.VBArray) {
	    msie = document.documentMode || (window.XMLHttpRequest ? 7 : 6)
	}

	function Transport(request) {
	    if (msie === 8 || msie === 9) {
	        this.core = new XDR(request)
	    } else if (!msie) {
	        this.core = new XHR(request)
	    } else if (msie <= 7) {
	        if (request.credentials === 'include') {
	            this.core = new JSONP(request)
	        } else {
	            this.core = new AXO(request)
	        }
	    }
	}

	var p = Transport.prototype
	p.on = function (type, fn) {
	    this.core.on(type, fn)
	}

	p.setRequestHeader = function (a, b) {
	    if (this.core.setRequestHeader) {
	        this.core.setRequestHeader(a, b)
	    }
	}

	p.open = function (a, b, c, d, e) {
	    if (this.core.open) {
	        this.core.open(a, b, c, d, e)
	    }
	}

	p.send = function (a) {
	    if (this.core.send) {
	        this.core.send(a)
	    }
	}

	p.abort = function () {
	    if (this.core.abort) {
	        this.core.abort()
	    }
	}

	module.exports = Transport

/***/ },

/***/ function(module, exports) {

	

	module.exports = function AXO(opts) {
	    var xhr = new ActiveXObject('Microsoft.XMLHTTP')
	    
	    xhr.onreadystatechange = function () {
	        if (xhr.readyState === 4) {
	            if (/^2\d\d|1224/.test(xhr.status)) {
	                events['load'] && events['load'](xhr)
	            } else {
	                events['error'] && events['error']()
	            }
	        }
	    }
	    var events = {}
	    xhr.on = function (type, fn) {
	        events[type] = fn
	    }

	    xhr.abort = function () {
	        events = {}
	    }
	    if (opts.timeout === 'number') {
	        setTimeout(function () {
	            events['timeout'] && events['timeout']()
	            xhr.abort()
	        }, opts.timeout)
	    }
	    return xhr
	}

/***/ },

/***/ function(module, exports) {

	
	function JSONP(opts) {
	    var callbackFunction = opts.jsonpCallbackFunction || generateCallbackFunction();
	    var jsonpCallback = opts.jsonpCallback || 'callback'
	    var xhr = document.createElement('script')
	    if (xhr.charset) {
	        xhr.charset = opts.charset
	    }
	    xhr.onerror = xhr[useOnload ? 'onload' : 'onreadystatechange'] = function (e) {
	        var execute = /loaded|complete|undefined/i.test(xhr.readyState)
	        if (e && e.type === 'error') {
	            events['error'] && events['error']()
	        } else if (execute) {
	            setTimeout(function () {
	                xhr.abort()
	            }, 0)
	        }
	    }

	    var events = {}
	    xhr.on = function (type, fn) {
	        events[type] = fn
	    }
	    xhr.abort = function () {
	        events = {}
	        removeNode(xhr)
	        clearFunction(callbackFunction)
	    }
	    xhr.open = function (a, url) {
	        window[callbackFunction] = function (response) {
	            events['load'] && events['load']({
	                status: 200,
	                statusText: 'ok',
	                response: response
	            })
	            clearFunction(callbackFunction)
	        }
	        var head = document.getElementsTagName('head')[0]

	        url += (url.indexOf('?') === -1) ? '?' : '&';
	        xhr.setAttribute('src', url + jsonpCallback + '=' + callbackFunction);
	        head.insertBefore(xhr, head.firstChild)
	        if (typeof opts.timeout === 'number') {
	            setTimeout(function () {
	                events['timeout'] && events['timeout']()
	                xhr.abort()
	            }, opts.timeout)
	        }
	    }
	}


	function generateCallbackFunction() {
	    return ('jsonp' + Math.random()).replace(/0\./, '')
	}

	// Known issue: Will throw 'Uncaught ReferenceError: callback_*** is not defined' error if request timeout
	function clearFunction(functionName) {
	    // IE8 throws an exception when you try to delete a property on window
	    // http://stackoverflow.com/a/1824228/751089
	    try {
	        delete window[functionName];
	    } catch (e) {
	        window[functionName] = undefined;
	    }
	}

	var f = document.createDocumentFragment()
	var useOnload = 'textContent' in document

	function removeNode(node) {
	    f.appendChild(node)
	    f.removeChild(node)
	    node.onload = onerror = onreadystatechange = function () {
	    }
	    return node
	}

	module.exports = JSONP

/***/ },

/***/ function(module, exports) {

	//https://msdn.microsoft.com/en-us/library/cc288060(v=VS.85).aspx
	module.exports = function XDR(opts) {
	    var xhr = new XDomainRequest()
	    'load,error,timeout'.replace(/\w+/g, function (method) {
	        xhr['on' + method] = function () {
	            if (events[method]) {
	                events[method](xhr)
	            }
	        }
	    })
	    var events = {}
	    xhr.on = function (type, fn) {
	        events[type] = fn
	    }
	    xhr.onabort = function () {
	        events = {}
	    }
	    if (typeof opts.timeout === 'number') {
	        xhr.timeout = opts.timeout
	    }
	    return xhr
	}

/***/ },

/***/ function(module, exports) {

	
	module.exports = function XHR(opts) {
	    var xhr = new XMLHttpRequest
	    'load,error,timeout'.replace(/\w+/g, function (method) {
	        xhr['on' + method] = function () {
	            if (events[method]) {
	                events[method](xhr)
	            }
	        }
	    })
	    var events = {}
	    xhr.on = function (type, fn) {
	        events[type] = fn
	    }
	    xhr.onabort = function () {
	        events = {}
	    }
	    if (opts.credentials === 'include') {
	        xhr.withCredentials = true
	    }

	    if ('responseType' in xhr && ('Blob' in window)) {
	        xhr.responseType = 'blob'
	    }
	    return xhr
	}

/***/ }
/******/ ])
});
;

/***/ }),

/***/ "./node_modules/function-bind/implementation.js":
/*!******************************************************!*\
  !*** ./node_modules/function-bind/implementation.js ***!
  \******************************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";




var ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';
var slice = Array.prototype.slice;
var toStr = Object.prototype.toString;
var funcType = '[object Function]';

module.exports = function bind(that) {
    var target = this;
    if (typeof target !== 'function' || toStr.call(target) !== funcType) {
        throw new TypeError(ERROR_MESSAGE + target);
    }
    var args = slice.call(arguments, 1);

    var bound;
    var binder = function () {
        if (this instanceof bound) {
            var result = target.apply(
                this,
                args.concat(slice.call(arguments))
            );
            if (Object(result) === result) {
                return result;
            }
            return this;
        } else {
            return target.apply(
                that,
                args.concat(slice.call(arguments))
            );
        }
    };

    var boundLength = Math.max(0, target.length - args.length);
    var boundArgs = [];
    for (var i = 0; i < boundLength; i++) {
        boundArgs.push('$' + i);
    }

    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this,arguments); }')(binder);

    if (target.prototype) {
        var Empty = function Empty() {};
        Empty.prototype = target.prototype;
        bound.prototype = new Empty();
        Empty.prototype = null;
    }

    return bound;
};


/***/ }),

/***/ "./node_modules/function-bind/index.js":
/*!*********************************************!*\
  !*** ./node_modules/function-bind/index.js ***!
  \*********************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var implementation = __webpack_require__( "./node_modules/function-bind/implementation.js");

module.exports = Function.prototype.bind || implementation;


/***/ }),

/***/ "./node_modules/has-symbols/index.js":
/*!*******************************************!*\
  !*** ./node_modules/has-symbols/index.js ***!
  \*******************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";
(function(global) {

var origSymbol = global.Symbol;
var hasSymbolSham = __webpack_require__( "./node_modules/has-symbols/shams.js");

module.exports = function hasNativeSymbols() {
	if (typeof origSymbol !== 'function') { return false; }
	if (typeof Symbol !== 'function') { return false; }
	if (typeof origSymbol('foo') !== 'symbol') { return false; }
	if (typeof Symbol('bar') !== 'symbol') { return false; }

	return hasSymbolSham();
};

}.call(this, __webpack_require__( "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/has-symbols/shams.js":
/*!*******************************************!*\
  !*** ./node_modules/has-symbols/shams.js ***!
  \*******************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";



module.exports = function hasSymbols() {
	if (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }
	if (typeof Symbol.iterator === 'symbol') { return true; }

	var obj = {};
	var sym = Symbol('test');
	var symObj = Object(sym);
	if (typeof sym === 'string') { return false; }

	if (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }
	if (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }

	// temp disabled per https://github.com/ljharb/object.assign/issues/17
	// if (sym instanceof Symbol) { return false; }
	// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4
	// if (!(symObj instanceof Symbol)) { return false; }

	// if (typeof Symbol.prototype.toString !== 'function') { return false; }
	// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }

	var symVal = 42;
	obj[sym] = symVal;
	for (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax
	if (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }

	if (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }

	var syms = Object.getOwnPropertySymbols(obj);
	if (syms.length !== 1 || syms[0] !== sym) { return false; }

	if (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }

	if (typeof Object.getOwnPropertyDescriptor === 'function') {
		var descriptor = Object.getOwnPropertyDescriptor(obj, sym);
		if (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }
	}

	return true;
};


/***/ }),

/***/ "./node_modules/has/src/index.js":
/*!***************************************!*\
  !*** ./node_modules/has/src/index.js ***!
  \***************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var bind = __webpack_require__( "./node_modules/function-bind/index.js");

module.exports = bind.call(Function.call, Object.prototype.hasOwnProperty);


/***/ }),

/***/ "./node_modules/is-callable/index.js":
/*!*******************************************!*\
  !*** ./node_modules/is-callable/index.js ***!
  \*******************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var fnToStr = Function.prototype.toString;

var constructorRegex = /^\s*class\b/;
var isES6ClassFn = function isES6ClassFunction(value) {
	try {
		var fnStr = fnToStr.call(value);
		return constructorRegex.test(fnStr);
	} catch (e) {
		return false; // not a function
	}
};

var tryFunctionObject = function tryFunctionToStr(value) {
	try {
		if (isES6ClassFn(value)) { return false; }
		fnToStr.call(value);
		return true;
	} catch (e) {
		return false;
	}
};
var toStr = Object.prototype.toString;
var fnClass = '[object Function]';
var genClass = '[object GeneratorFunction]';
var hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';

module.exports = function isCallable(value) {
	if (!value) { return false; }
	if (typeof value !== 'function' && typeof value !== 'object') { return false; }
	if (typeof value === 'function' && !value.prototype) { return true; }
	if (hasToStringTag) { return tryFunctionObject(value); }
	if (isES6ClassFn(value)) { return false; }
	var strClass = toStr.call(value);
	return strClass === fnClass || strClass === genClass;
};


/***/ }),

/***/ "./node_modules/is-date-object/index.js":
/*!**********************************************!*\
  !*** ./node_modules/is-date-object/index.js ***!
  \**********************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var getDay = Date.prototype.getDay;
var tryDateObject = function tryDateObject(value) {
	try {
		getDay.call(value);
		return true;
	} catch (e) {
		return false;
	}
};

var toStr = Object.prototype.toString;
var dateClass = '[object Date]';
var hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';

module.exports = function isDateObject(value) {
	if (typeof value !== 'object' || value === null) { return false; }
	return hasToStringTag ? tryDateObject(value) : toStr.call(value) === dateClass;
};


/***/ }),

/***/ "./node_modules/is-regex/index.js":
/*!****************************************!*\
  !*** ./node_modules/is-regex/index.js ***!
  \****************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var has = __webpack_require__( "./node_modules/has/src/index.js");
var regexExec = RegExp.prototype.exec;
var gOPD = Object.getOwnPropertyDescriptor;

var tryRegexExecCall = function tryRegexExec(value) {
	try {
		var lastIndex = value.lastIndex;
		value.lastIndex = 0;

		regexExec.call(value);
		return true;
	} catch (e) {
		return false;
	} finally {
		value.lastIndex = lastIndex;
	}
};
var toStr = Object.prototype.toString;
var regexClass = '[object RegExp]';
var hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';

module.exports = function isRegex(value) {
	if (!value || typeof value !== 'object') {
		return false;
	}
	if (!hasToStringTag) {
		return toStr.call(value) === regexClass;
	}

	var descriptor = gOPD(value, 'lastIndex');
	var hasLastIndexDataProperty = descriptor && has(descriptor, 'value');
	if (!hasLastIndexDataProperty) {
		return false;
	}

	return tryRegexExecCall(value);
};


/***/ }),

/***/ "./node_modules/is-symbol/index.js":
/*!*****************************************!*\
  !*** ./node_modules/is-symbol/index.js ***!
  \*****************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var toStr = Object.prototype.toString;
var hasSymbols = __webpack_require__( "./node_modules/has-symbols/index.js")();

if (hasSymbols) {
	var symToStr = Symbol.prototype.toString;
	var symStringRegex = /^Symbol\(.*\)$/;
	var isSymbolObject = function isRealSymbolObject(value) {
		if (typeof value.valueOf() !== 'symbol') {
			return false;
		}
		return symStringRegex.test(symToStr.call(value));
	};

	module.exports = function isSymbol(value) {
		if (typeof value === 'symbol') {
			return true;
		}
		if (toStr.call(value) !== '[object Symbol]') {
			return false;
		}
		try {
			return isSymbolObject(value);
		} catch (e) {
			return false;
		}
	};
} else {

	module.exports = function isSymbol(value) {
		// this environment does not support Symbols.
		return false && value;
	};
}


/***/ }),

/***/ "./node_modules/object-assign/index.js":
/*!*********************************************!*\
  !*** ./node_modules/object-assign/index.js ***!
  \*********************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";




var getOwnPropertySymbols = Object.getOwnPropertySymbols;
var hasOwnProperty = Object.prototype.hasOwnProperty;
var propIsEnumerable = Object.prototype.propertyIsEnumerable;

function toObject(val) {
	if (val === null || val === undefined) {
		throw new TypeError('Object.assign cannot be called with null or undefined');
	}

	return Object(val);
}

function shouldUseNative() {
	try {
		if (!Object.assign) {
			return false;
		}

		// Detect buggy property enumeration order in older V8 versions.

		// https://bugs.chromium.org/p/v8/issues/detail?id=4118
		var test1 = new String('abc');  // eslint-disable-line no-new-wrappers
		test1[5] = 'de';
		if (Object.getOwnPropertyNames(test1)[0] === '5') {
			return false;
		}

		// https://bugs.chromium.org/p/v8/issues/detail?id=3056
		var test2 = {};
		for (var i = 0; i < 10; i++) {
			test2['_' + String.fromCharCode(i)] = i;
		}
		var order2 = Object.getOwnPropertyNames(test2).map(function (n) {
			return test2[n];
		});
		if (order2.join('') !== '0123456789') {
			return false;
		}

		// https://bugs.chromium.org/p/v8/issues/detail?id=3056
		var test3 = {};
		'abcdefghijklmnopqrst'.split('').forEach(function (letter) {
			test3[letter] = letter;
		});
		if (Object.keys(Object.assign({}, test3)).join('') !==
				'abcdefghijklmnopqrst') {
			return false;
		}

		return true;
	} catch (err) {
		// We don't expect any of the above to throw, but better to be safe.
		return false;
	}
}

module.exports = shouldUseNative() ? Object.assign : function (target, source) {
	var from;
	var to = toObject(target);
	var symbols;

	for (var s = 1; s < arguments.length; s++) {
		from = Object(arguments[s]);

		for (var key in from) {
			if (hasOwnProperty.call(from, key)) {
				to[key] = from[key];
			}
		}

		if (getOwnPropertySymbols) {
			symbols = getOwnPropertySymbols(from);
			for (var i = 0; i < symbols.length; i++) {
				if (propIsEnumerable.call(from, symbols[i])) {
					to[symbols[i]] = from[symbols[i]];
				}
			}
		}
	}

	return to;
};


/***/ }),

/***/ "./node_modules/object-keys/index.js":
/*!*******************************************!*\
  !*** ./node_modules/object-keys/index.js ***!
  \*******************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


// modified from https://github.com/es-shims/es5-shim
var has = Object.prototype.hasOwnProperty;
var toStr = Object.prototype.toString;
var slice = Array.prototype.slice;
var isArgs = __webpack_require__( "./node_modules/object-keys/isArguments.js");
var isEnumerable = Object.prototype.propertyIsEnumerable;
var hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');
var hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');
var dontEnums = [
	'toString',
	'toLocaleString',
	'valueOf',
	'hasOwnProperty',
	'isPrototypeOf',
	'propertyIsEnumerable',
	'constructor'
];
var equalsConstructorPrototype = function (o) {
	var ctor = o.constructor;
	return ctor && ctor.prototype === o;
};
var excludedKeys = {
	$applicationCache: true,
	$console: true,
	$external: true,
	$frame: true,
	$frameElement: true,
	$frames: true,
	$innerHeight: true,
	$innerWidth: true,
	$outerHeight: true,
	$outerWidth: true,
	$pageXOffset: true,
	$pageYOffset: true,
	$parent: true,
	$scrollLeft: true,
	$scrollTop: true,
	$scrollX: true,
	$scrollY: true,
	$self: true,
	$webkitIndexedDB: true,
	$webkitStorageInfo: true,
	$window: true
};
var hasAutomationEqualityBug = (function () {
	
	if (typeof window === 'undefined') { return false; }
	for (var k in window) {
		try {
			if (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {
				try {
					equalsConstructorPrototype(window[k]);
				} catch (e) {
					return true;
				}
			}
		} catch (e) {
			return true;
		}
	}
	return false;
}());
var equalsConstructorPrototypeIfNotBuggy = function (o) {
	
	if (typeof window === 'undefined' || !hasAutomationEqualityBug) {
		return equalsConstructorPrototype(o);
	}
	try {
		return equalsConstructorPrototype(o);
	} catch (e) {
		return false;
	}
};

var keysShim = function keys(object) {
	var isObject = object !== null && typeof object === 'object';
	var isFunction = toStr.call(object) === '[object Function]';
	var isArguments = isArgs(object);
	var isString = isObject && toStr.call(object) === '[object String]';
	var theKeys = [];

	if (!isObject && !isFunction && !isArguments) {
		throw new TypeError('Object.keys called on a non-object');
	}

	var skipProto = hasProtoEnumBug && isFunction;
	if (isString && object.length > 0 && !has.call(object, 0)) {
		for (var i = 0; i < object.length; ++i) {
			theKeys.push(String(i));
		}
	}

	if (isArguments && object.length > 0) {
		for (var j = 0; j < object.length; ++j) {
			theKeys.push(String(j));
		}
	} else {
		for (var name in object) {
			if (!(skipProto && name === 'prototype') && has.call(object, name)) {
				theKeys.push(String(name));
			}
		}
	}

	if (hasDontEnumBug) {
		var skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);

		for (var k = 0; k < dontEnums.length; ++k) {
			if (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {
				theKeys.push(dontEnums[k]);
			}
		}
	}
	return theKeys;
};

keysShim.shim = function shimObjectKeys() {
	if (Object.keys) {
		var keysWorksWithArguments = (function () {
			// Safari 5.0 bug
			return (Object.keys(arguments) || '').length === 2;
		}(1, 2));
		if (!keysWorksWithArguments) {
			var originalKeys = Object.keys;
			Object.keys = function keys(object) { // eslint-disable-line func-name-matching
				if (isArgs(object)) {
					return originalKeys(slice.call(object));
				} else {
					return originalKeys(object);
				}
			};
		}
	} else {
		Object.keys = keysShim;
	}
	return Object.keys || keysShim;
};

module.exports = keysShim;


/***/ }),

/***/ "./node_modules/object-keys/isArguments.js":
/*!*************************************************!*\
  !*** ./node_modules/object-keys/isArguments.js ***!
  \*************************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var toStr = Object.prototype.toString;

module.exports = function isArguments(value) {
	var str = toStr.call(value);
	var isArgs = str === '[object Arguments]';
	if (!isArgs) {
		isArgs = str !== '[object Array]' &&
			value !== null &&
			typeof value === 'object' &&
			typeof value.length === 'number' &&
			value.length >= 0 &&
			toStr.call(value.callee) === '[object Function]';
	}
	return isArgs;
};


/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/

/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),

/***/ "./node_modules/promise.prototype.finally/implementation.js":
/*!******************************************************************!*\
  !*** ./node_modules/promise.prototype.finally/implementation.js ***!
  \******************************************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var requirePromise = __webpack_require__( "./node_modules/promise.prototype.finally/requirePromise.js");

requirePromise();

var ES = __webpack_require__( "./node_modules/es-abstract/es7.js");
var bind = __webpack_require__( "./node_modules/function-bind/index.js");

var promiseResolve = function PromiseResolve(C, value) {
	return new C(function (resolve) {
		resolve(value);
	});
};

var OriginalPromise = Promise;

var createThenFinally = function CreateThenFinally(C, onFinally) {
	return function (value) {
		var result = onFinally();
		var promise = promiseResolve(C, result);
		var valueThunk = function () {
			return value;
		};
		return promise.then(valueThunk);
	};
};

var createCatchFinally = function CreateCatchFinally(C, onFinally) {
	return function (reason) {
		var result = onFinally();
		var promise = promiseResolve(C, result);
		var thrower = function () {
			throw reason;
		};
		return promise.then(thrower);
	};
};

var then = bind.call(Function.call, OriginalPromise.prototype.then);

var promiseFinally = function finally_(onFinally) {
	

	var promise = this;

	then(promise, null, function () {}); // throw if IsPromise(this) is false; catch() to avoid unhandled rejection warnings

	var C = ES.SpeciesConstructor(promise, OriginalPromise); // may throw

	var thenFinally = onFinally;
	var catchFinally = onFinally;
	if (ES.IsCallable(onFinally)) {
		thenFinally = createThenFinally(C, onFinally);
		catchFinally = createCatchFinally(C, onFinally);
	}

	return promise.then(thenFinally, catchFinally);
};

if (Object.getOwnPropertyDescriptor) {
	var descriptor = Object.getOwnPropertyDescriptor(promiseFinally, 'name');
	if (descriptor && descriptor.configurable) {
		Object.defineProperty(promiseFinally, 'name', { configurable: true, value: 'finally' });
	}
}

module.exports = promiseFinally;


/***/ }),

/***/ "./node_modules/promise.prototype.finally/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/promise.prototype.finally/index.js ***!
  \*********************************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var bind = __webpack_require__( "./node_modules/function-bind/index.js");
var define = __webpack_require__( "./node_modules/define-properties/index.js");

var implementation = __webpack_require__( "./node_modules/promise.prototype.finally/implementation.js");
var getPolyfill = __webpack_require__( "./node_modules/promise.prototype.finally/polyfill.js");
var shim = __webpack_require__( "./node_modules/promise.prototype.finally/shim.js");

var bound = bind.call(Function.call, getPolyfill());

define(bound, {
	getPolyfill: getPolyfill,
	implementation: implementation,
	shim: shim
});

module.exports = bound;


/***/ }),

/***/ "./node_modules/promise.prototype.finally/polyfill.js":
/*!************************************************************!*\
  !*** ./node_modules/promise.prototype.finally/polyfill.js ***!
  \************************************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var requirePromise = __webpack_require__( "./node_modules/promise.prototype.finally/requirePromise.js");

var implementation = __webpack_require__( "./node_modules/promise.prototype.finally/implementation.js");

module.exports = function getPolyfill() {
	requirePromise();
	return typeof Promise.prototype['finally'] === 'function' ? Promise.prototype['finally'] : implementation;
};


/***/ }),

/***/ "./node_modules/promise.prototype.finally/requirePromise.js":
/*!******************************************************************!*\
  !*** ./node_modules/promise.prototype.finally/requirePromise.js ***!
  \******************************************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function requirePromise() {
	if (typeof Promise !== 'function') {
		throw new TypeError('`Promise.prototype.finally` requires a global `Promise` be available.');
	}
};


/***/ }),

/***/ "./node_modules/promise.prototype.finally/shim.js":
/*!********************************************************!*\
  !*** ./node_modules/promise.prototype.finally/shim.js ***!
  \********************************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";


var requirePromise = __webpack_require__( "./node_modules/promise.prototype.finally/requirePromise.js");

var getPolyfill = __webpack_require__( "./node_modules/promise.prototype.finally/polyfill.js");
var define = __webpack_require__( "./node_modules/define-properties/index.js");

module.exports = function shimPromiseFinally() {
	requirePromise();

	var polyfill = getPolyfill();
	define(Promise.prototype, { 'finally': polyfill }, {
		'finally': function testFinally() {
			return Promise.prototype['finally'] !== polyfill;
		}
	});
	return polyfill;
};


/***/ }),

/***/ "./node_modules/query-string/index.js":
/*!********************************************!*\
  !*** ./node_modules/query-string/index.js ***!
  \********************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";

var strictUriEncode = __webpack_require__( "./node_modules/strict-uri-encode/index.js");
var objectAssign = __webpack_require__( "./node_modules/object-assign/index.js");
var decodeComponent = __webpack_require__( "./node_modules/decode-uri-component/index.js");

function encoderForArrayFormat(opts) {
	switch (opts.arrayFormat) {
		case 'index':
			return function (key, value, index) {
				return value === null ? [
					encode(key, opts),
					'[',
					index,
					']'
				].join('') : [
					encode(key, opts),
					'[',
					encode(index, opts),
					']=',
					encode(value, opts)
				].join('');
			};

		case 'bracket':
			return function (key, value) {
				return value === null ? encode(key, opts) : [
					encode(key, opts),
					'[]=',
					encode(value, opts)
				].join('');
			};

		default:
			return function (key, value) {
				return value === null ? encode(key, opts) : [
					encode(key, opts),
					'=',
					encode(value, opts)
				].join('');
			};
	}
}

function parserForArrayFormat(opts) {
	var result;

	switch (opts.arrayFormat) {
		case 'index':
			return function (key, value, accumulator) {
				result = /\[(\d*)\]$/.exec(key);

				key = key.replace(/\[\d*\]$/, '');

				if (!result) {
					accumulator[key] = value;
					return;
				}

				if (accumulator[key] === undefined) {
					accumulator[key] = {};
				}

				accumulator[key][result[1]] = value;
			};

		case 'bracket':
			return function (key, value, accumulator) {
				result = /(\[\])$/.exec(key);
				key = key.replace(/\[\]$/, '');

				if (!result) {
					accumulator[key] = value;
					return;
				} else if (accumulator[key] === undefined) {
					accumulator[key] = [value];
					return;
				}

				accumulator[key] = [].concat(accumulator[key], value);
			};

		default:
			return function (key, value, accumulator) {
				if (accumulator[key] === undefined) {
					accumulator[key] = value;
					return;
				}

				accumulator[key] = [].concat(accumulator[key], value);
			};
	}
}

function encode(value, opts) {
	if (opts.encode) {
		return opts.strict ? strictUriEncode(value) : encodeURIComponent(value);
	}

	return value;
}

function keysSorter(input) {
	if (Array.isArray(input)) {
		return input.sort();
	} else if (typeof input === 'object') {
		return keysSorter(Object.keys(input)).sort(function (a, b) {
			return Number(a) - Number(b);
		}).map(function (key) {
			return input[key];
		});
	}

	return input;
}

function extract(str) {
	var queryStart = str.indexOf('?');
	if (queryStart === -1) {
		return '';
	}
	return str.slice(queryStart + 1);
}

function parse(str, opts) {
	opts = objectAssign({arrayFormat: 'none'}, opts);

	var formatter = parserForArrayFormat(opts);

	// Create an object with no prototype
	// https://github.com/sindresorhus/query-string/issues/47
	var ret = Object.create(null);

	if (typeof str !== 'string') {
		return ret;
	}

	str = str.trim().replace(/^[?#&]/, '');

	if (!str) {
		return ret;
	}

	str.split('&').forEach(function (param) {
		var parts = param.replace(/\+/g, ' ').split('=');
		// Firefox (pre 40) decodes `%3D` to `=`
		// https://github.com/sindresorhus/query-string/pull/37
		var key = parts.shift();
		var val = parts.length > 0 ? parts.join('=') : undefined;

		// missing `=` should be `null`:
		// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters
		val = val === undefined ? null : decodeComponent(val);

		formatter(decodeComponent(key), val, ret);
	});

	return Object.keys(ret).sort().reduce(function (result, key) {
		var val = ret[key];
		if (Boolean(val) && typeof val === 'object' && !Array.isArray(val)) {
			// Sort object keys, not values
			result[key] = keysSorter(val);
		} else {
			result[key] = val;
		}

		return result;
	}, Object.create(null));
}

exports.extract = extract;
exports.parse = parse;

exports.stringify = function (obj, opts) {
	var defaults = {
		encode: true,
		strict: true,
		arrayFormat: 'none'
	};

	opts = objectAssign(defaults, opts);

	if (opts.sort === false) {
		opts.sort = function () {};
	}

	var formatter = encoderForArrayFormat(opts);

	return obj ? Object.keys(obj).sort(opts.sort).map(function (key) {
		var val = obj[key];

		if (val === undefined) {
			return '';
		}

		if (val === null) {
			return encode(key, opts);
		}

		if (Array.isArray(val)) {
			var result = [];

			val.slice().forEach(function (val2) {
				if (val2 === undefined) {
					return;
				}

				result.push(formatter(key, val2, result.length));
			});

			return result.join('&');
		}

		return encode(key, opts) + '=' + encode(val, opts);
	}).filter(function (x) {
		return x.length > 0;
	}).join('&') : '';
};

exports.parseUrl = function (str, opts) {
	return {
		url: str.split('?')[0] || '',
		query: parse(extract(str), opts)
	};
};


/***/ }),

/***/ "./node_modules/setimmediate/setImmediate.js":
/*!***************************************************!*\
  !*** ./node_modules/setimmediate/setImmediate.js ***!
  \***************************************************/

/***/ (function(module, exports, __webpack_require__) {

(function(global, process) {(function (global, undefined) {
    "use strict";

    if (global.setImmediate) {
        return;
    }

    var nextHandle = 1; // Spec says greater than zero
    var tasksByHandle = {};
    var currentlyRunningATask = false;
    var doc = global.document;
    var registerImmediate;

    function setImmediate(callback) {
      // Callback can either be a function or a string
      if (typeof callback !== "function") {
        callback = new Function("" + callback);
      }
      // Copy function arguments
      var args = new Array(arguments.length - 1);
      for (var i = 0; i < args.length; i++) {
          args[i] = arguments[i + 1];
      }
      // Store and register the task
      var task = { callback: callback, args: args };
      tasksByHandle[nextHandle] = task;
      registerImmediate(nextHandle);
      return nextHandle++;
    }

    function clearImmediate(handle) {
        delete tasksByHandle[handle];
    }

    function run(task) {
        var callback = task.callback;
        var args = task.args;
        switch (args.length) {
        case 0:
            callback();
            break;
        case 1:
            callback(args[0]);
            break;
        case 2:
            callback(args[0], args[1]);
            break;
        case 3:
            callback(args[0], args[1], args[2]);
            break;
        default:
            callback.apply(undefined, args);
            break;
        }
    }

    function runIfPresent(handle) {
        // From the spec: "Wait until any invocations of this algorithm started before this one have completed."
        // So if we're currently running a task, we'll need to delay this invocation.
        if (currentlyRunningATask) {
            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a
            // "too much recursion" error.
            setTimeout(runIfPresent, 0, handle);
        } else {
            var task = tasksByHandle[handle];
            if (task) {
                currentlyRunningATask = true;
                try {
                    run(task);
                } finally {
                    clearImmediate(handle);
                    currentlyRunningATask = false;
                }
            }
        }
    }

    function installNextTickImplementation() {
        registerImmediate = function(handle) {
            process.nextTick(function () { runIfPresent(handle); });
        };
    }

    function canUsePostMessage() {
        // The test against `importScripts` prevents this implementation from being installed inside a web worker,
        // where `global.postMessage` means something completely different and can't be used for this purpose.
        if (global.postMessage && !global.importScripts) {
            var postMessageIsAsynchronous = true;
            var oldOnMessage = global.onmessage;
            global.onmessage = function() {
                postMessageIsAsynchronous = false;
            };
            global.postMessage("", "*");
            global.onmessage = oldOnMessage;
            return postMessageIsAsynchronous;
        }
    }

    function installPostMessageImplementation() {
        // Installs an event handler on `global` for the `message` event: see
        // * https://developer.mozilla.org/en/DOM/window.postMessage
        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages

        var messagePrefix = "setImmediate$" + Math.random() + "$";
        var onGlobalMessage = function(event) {
            if (event.source === global &&
                typeof event.data === "string" &&
                event.data.indexOf(messagePrefix) === 0) {
                runIfPresent(+event.data.slice(messagePrefix.length));
            }
        };

        if (global.addEventListener) {
            global.addEventListener("message", onGlobalMessage, false);
        } else {
            global.attachEvent("onmessage", onGlobalMessage);
        }

        registerImmediate = function(handle) {
            global.postMessage(messagePrefix + handle, "*");
        };
    }

    function installMessageChannelImplementation() {
        var channel = new MessageChannel();
        channel.port1.onmessage = function(event) {
            var handle = event.data;
            runIfPresent(handle);
        };

        registerImmediate = function(handle) {
            channel.port2.postMessage(handle);
        };
    }

    function installReadyStateChangeImplementation() {
        var html = doc.documentElement;
        registerImmediate = function(handle) {
            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted
            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.
            var script = doc.createElement("script");
            script.onreadystatechange = function () {
                runIfPresent(handle);
                script.onreadystatechange = null;
                html.removeChild(script);
                script = null;
            };
            html.appendChild(script);
        };
    }

    function installSetTimeoutImplementation() {
        registerImmediate = function(handle) {
            setTimeout(runIfPresent, 0, handle);
        };
    }

    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.
    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);
    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;

    // Don't get fooled by e.g. browserify environments.
    if ({}.toString.call(global.process) === "[object process]") {
        // For Node.js before 0.9
        installNextTickImplementation();

    } else if (canUsePostMessage()) {
        // For non-IE10 modern browsers
        installPostMessageImplementation();

    } else if (global.MessageChannel) {
        // For web workers, where supported
        installMessageChannelImplementation();

    } else if (doc && "onreadystatechange" in doc.createElement("script")) {
        // For IE 6–8
        installReadyStateChangeImplementation();

    } else {
        // For older browsers
        installSetTimeoutImplementation();
    }

    attachTo.setImmediate = setImmediate;
    attachTo.clearImmediate = clearImmediate;
}(typeof self === "undefined" ? typeof global === "undefined" ? this : global : self));

}.call(this, __webpack_require__( "./node_modules/webpack/buildin/global.js"), __webpack_require__( "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/strict-uri-encode/index.js":
/*!*************************************************!*\
  !*** ./node_modules/strict-uri-encode/index.js ***!
  \*************************************************/

/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = function (str) {
	return encodeURIComponent(str).replace(/[!'()*]/g, function (c) {
		return '%' + c.charCodeAt(0).toString(16).toUpperCase();
	});
};


/***/ }),

/***/ "./node_modules/timers-browserify/main.js":
/*!************************************************!*\
  !*** ./node_modules/timers-browserify/main.js ***!
  \************************************************/

/***/ (function(module, exports, __webpack_require__) {

(function(global) {var scope = (typeof global !== "undefined" && global) ||
            (typeof self !== "undefined" && self) ||
            window;
var apply = Function.prototype.apply;

// DOM APIs, for completeness

exports.setTimeout = function() {
  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);
};
exports.setInterval = function() {
  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);
};
exports.clearTimeout =
exports.clearInterval = function(timeout) {
  if (timeout) {
    timeout.close();
  }
};

function Timeout(id, clearFn) {
  this._id = id;
  this._clearFn = clearFn;
}
Timeout.prototype.unref = Timeout.prototype.ref = function() {};
Timeout.prototype.close = function() {
  this._clearFn.call(scope, this._id);
};

// Does not start the time, just sets up the members needed.
exports.enroll = function(item, msecs) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = msecs;
};

exports.unenroll = function(item) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = -1;
};

exports._unrefActive = exports.active = function(item) {
  clearTimeout(item._idleTimeoutId);

  var msecs = item._idleTimeout;
  if (msecs >= 0) {
    item._idleTimeoutId = setTimeout(function onTimeout() {
      if (item._onTimeout)
        item._onTimeout();
    }, msecs);
  }
};

// setimmediate attaches itself to the global object
__webpack_require__( "./node_modules/setimmediate/setImmediate.js");
// On some exotic environments, it's not clear which object `setimmediate` was
// able to install onto.  Search each possibility in the same order as the
// `setimmediate` library.
exports.setImmediate = (typeof self !== "undefined" && self.setImmediate) ||
                       (typeof global !== "undefined" && global.setImmediate) ||
                       (this && this.setImmediate);
exports.clearImmediate = (typeof self !== "undefined" && self.clearImmediate) ||
                         (typeof global !== "undefined" && global.clearImmediate) ||
                         (this && this.clearImmediate);

}.call(this, __webpack_require__( "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/vue-i18n/dist/vue-i18n.esm.js":
/*!****************************************************!*\
  !*** ./node_modules/vue-i18n/dist/vue-i18n.esm.js ***!
  \****************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/*!
 * vue-i18n v8.0.0 
 * (c) 2018 kazuya kawaguchi
 * Released under the MIT License.
 */


/**
 * utilites
 */

function warn (msg, err) {
  if (typeof console !== 'undefined') {
    console.warn('[vue-i18n] ' + msg);
    
    if (err) {
      console.warn(err.stack);
    }
  }
}

function isObject (obj) {
  return obj !== null && typeof obj === 'object'
}

var toString = Object.prototype.toString;
var OBJECT_STRING = '[object Object]';
function isPlainObject (obj) {
  return toString.call(obj) === OBJECT_STRING
}

function isNull (val) {
  return val === null || val === undefined
}

function parseArgs () {
  var args = [], len = arguments.length;
  while ( len-- ) args[ len ] = arguments[ len ];

  var locale = null;
  var params = null;
  if (args.length === 1) {
    if (isObject(args[0]) || Array.isArray(args[0])) {
      params = args[0];
    } else if (typeof args[0] === 'string') {
      locale = args[0];
    }
  } else if (args.length === 2) {
    if (typeof args[0] === 'string') {
      locale = args[0];
    }
    
    if (isObject(args[1]) || Array.isArray(args[1])) {
      params = args[1];
    }
  }

  return { locale: locale, params: params }
}

function getOldChoiceIndexFixed (choice) {
  return choice
    ? choice > 1
      ? 1
      : 0
    : 1
}

function getChoiceIndex (choice, choicesLength) {
  choice = Math.abs(choice);

  if (choicesLength === 2) { return getOldChoiceIndexFixed(choice) }

  return choice ? Math.min(choice, 2) : 0
}

function fetchChoice (message, choice) {
  
  if (!message && typeof message !== 'string') { return null }
  var choices = message.split('|');

  choice = getChoiceIndex(choice, choices.length);
  if (!choices[choice]) { return message }
  return choices[choice].trim()
}

function looseClone (obj) {
  return JSON.parse(JSON.stringify(obj))
}

function remove (arr, item) {
  if (arr.length) {
    var index = arr.indexOf(item);
    if (index > -1) {
      return arr.splice(index, 1)
    }
  }
}

var hasOwnProperty = Object.prototype.hasOwnProperty;
function hasOwn (obj, key) {
  return hasOwnProperty.call(obj, key)
}

function merge (target) {
  var arguments$1 = arguments;

  var output = Object(target);
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments$1[i];
    if (source !== undefined && source !== null) {
      var key = (void 0);
      for (key in source) {
        if (hasOwn(source, key)) {
          if (isObject(source[key])) {
            output[key] = merge(output[key], source[key]);
          } else {
            output[key] = source[key];
          }
        }
      }
    }
  }
  return output
}

function looseEqual (a, b) {
  if (a === b) { return true }
  var isObjectA = isObject(a);
  var isObjectB = isObject(b);
  if (isObjectA && isObjectB) {
    try {
      var isArrayA = Array.isArray(a);
      var isArrayB = Array.isArray(b);
      if (isArrayA && isArrayB) {
        return a.length === b.length && a.every(function (e, i) {
          return looseEqual(e, b[i])
        })
      } else if (!isArrayA && !isArrayB) {
        var keysA = Object.keys(a);
        var keysB = Object.keys(b);
        return keysA.length === keysB.length && keysA.every(function (key) {
          return looseEqual(a[key], b[key])
        })
      } else {
        
        return false
      }
    } catch (e) {
      
      return false
    }
  } else if (!isObjectA && !isObjectB) {
    return String(a) === String(b)
  } else {
    return false
  }
}

var canUseDateTimeFormat =
  typeof Intl !== 'undefined' && typeof Intl.DateTimeFormat !== 'undefined';

var canUseNumberFormat =
  typeof Intl !== 'undefined' && typeof Intl.NumberFormat !== 'undefined';



function extend (Vue) {
  // $FlowFixMe
  Object.defineProperty(Vue.prototype, '$i18n', {
    get: function get () { return this._i18n }
  });

  Vue.prototype.$t = function (key) {
    var values = [], len = arguments.length - 1;
    while ( len-- > 0 ) values[ len ] = arguments[ len + 1 ];

    var i18n = this.$i18n;
    return i18n._t.apply(i18n, [ key, i18n.locale, i18n._getMessages(), this ].concat( values ))
  };

  Vue.prototype.$tc = function (key, choice) {
    var values = [], len = arguments.length - 2;
    while ( len-- > 0 ) values[ len ] = arguments[ len + 2 ];

    var i18n = this.$i18n;
    return i18n._tc.apply(i18n, [ key, i18n.locale, i18n._getMessages(), this, choice ].concat( values ))
  };

  Vue.prototype.$te = function (key, locale) {
    var i18n = this.$i18n;
    return i18n._te(key, i18n.locale, i18n._getMessages(), locale)
  };

  Vue.prototype.$d = function (value) {
    var ref;

    var args = [], len = arguments.length - 1;
    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];
    return (ref = this.$i18n).d.apply(ref, [ value ].concat( args ))
  };

  Vue.prototype.$n = function (value) {
    var ref;

    var args = [], len = arguments.length - 1;
    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];
    return (ref = this.$i18n).n.apply(ref, [ value ].concat( args ))
  };
}



var mixin = {
  beforeCreate: function beforeCreate () {
    var options = this.$options;
    options.i18n = options.i18n || (options.__i18n ? {} : null);

    if (options.i18n) {
      if (options.i18n instanceof VueI18n) {
        // init locale messages via custom blocks
        if (options.__i18n) {
          try {
            var localeMessages = {};
            options.__i18n.forEach(function (resource) {
              localeMessages = merge(localeMessages, JSON.parse(resource));
            });
            Object.keys(localeMessages).forEach(function (locale) {
              options.i18n.mergeLocaleMessage(locale, localeMessages[locale]);
            });
          } catch (e) {
            if (false) {}
          }
        }
        this._i18n = options.i18n;
        this._i18nWatcher = this._i18n.watchI18nData();
        this._i18n.subscribeDataChanging(this);
        this._subscribing = true;
      } else if (isPlainObject(options.i18n)) {
        // component local i18n
        if (this.$root && this.$root.$i18n && this.$root.$i18n instanceof VueI18n) {
          options.i18n.root = this.$root.$i18n;
          options.i18n.formatter = this.$root.$i18n.formatter;
          options.i18n.fallbackLocale = this.$root.$i18n.fallbackLocale;
          options.i18n.silentTranslationWarn = this.$root.$i18n.silentTranslationWarn;
        }

        // init locale messages via custom blocks
        if (options.__i18n) {
          try {
            var localeMessages$1 = {};
            options.__i18n.forEach(function (resource) {
              localeMessages$1 = merge(localeMessages$1, JSON.parse(resource));
            });
            options.i18n.messages = localeMessages$1;
          } catch (e) {
            if (false) {}
          }
        }

        this._i18n = new VueI18n(options.i18n);
        this._i18nWatcher = this._i18n.watchI18nData();
        this._i18n.subscribeDataChanging(this);
        this._subscribing = true;

        if (options.i18n.sync === undefined || !!options.i18n.sync) {
          this._localeWatcher = this.$i18n.watchLocale();
        }
      } else {
        if (false) {}
      }
    } else if (this.$root && this.$root.$i18n && this.$root.$i18n instanceof VueI18n) {
      // root i18n
      this._i18n = this.$root.$i18n;
      this._i18n.subscribeDataChanging(this);
      this._subscribing = true;
    } else if (options.parent && options.parent.$i18n && options.parent.$i18n instanceof VueI18n) {
      // parent i18n
      this._i18n = options.parent.$i18n;
      this._i18n.subscribeDataChanging(this);
      this._subscribing = true;
    }
  },

  beforeDestroy: function beforeDestroy () {
    if (!this._i18n) { return }

    if (this._subscribing) {
      this._i18n.unsubscribeDataChanging(this);
      delete this._subscribing;
    }

    if (this._i18nWatcher) {
      this._i18nWatcher();
      delete this._i18nWatcher;
    }

    if (this._localeWatcher) {
      this._localeWatcher();
      delete this._localeWatcher;
    }

    this._i18n = null;
  }
}



var component = {
  name: 'i18n',
  functional: true,
  props: {
    tag: {
      type: String,
      default: 'span'
    },
    path: {
      type: String,
      required: true
    },
    locale: {
      type: String
    },
    places: {
      type: [Array, Object]
    }
  },
  render: function render (h, ref) {
    var props = ref.props;
    var data = ref.data;
    var children = ref.children;
    var parent = ref.parent;

    var i18n = parent.$i18n;

    children = (children || []).filter(function (child) {
      return child.tag || (child.text = child.text.trim())
    });

    if (!i18n) {
      if (false) {}
      return children
    }

    var path = props.path;
    var locale = props.locale;

    var params = {};
    var places = props.places || {};

    var hasPlaces = Array.isArray(places)
      ? places.length > 0
      : Object.keys(places).length > 0;

    var everyPlace = children.every(function (child) {
      if (child.data && child.data.attrs) {
        var place = child.data.attrs.place;
        return (typeof place !== 'undefined') && place !== ''
      }
    });

    if (hasPlaces && children.length > 0 && !everyPlace) {
      warn('If places prop is set, all child elements must have place prop set.');
    }

    if (Array.isArray(places)) {
      places.forEach(function (el, i) {
        params[i] = el;
      });
    } else {
      Object.keys(places).forEach(function (key) {
        params[key] = places[key];
      });
    }

    children.forEach(function (child, i) {
      var key = everyPlace
        ? ("" + (child.data.attrs.place))
        : ("" + i);
      params[key] = child;
    });

    return h(props.tag, data, i18n.i(path, locale, params))
  }
}



function bind (el, binding, vnode) {
  if (!assert(el, vnode)) { return }

  t(el, binding, vnode);
}

function update (el, binding, vnode, oldVNode) {
  if (!assert(el, vnode)) { return }

  if (localeEqual(el, vnode) && looseEqual(binding.value, binding.oldValue)) { return }

  t(el, binding, vnode);
}

function unbind (el, binding, vnode, oldVNode) {
  var vm = vnode.context;
  if (!vm) {
    warn('not exist Vue instance in VNode context');
    return
  }

  el.textContent = '';
  el._vt = undefined;
  delete el['_vt'];
  el._locale = undefined;
  delete el['_locale'];
}

function assert (el, vnode) {
  var vm = vnode.context;
  if (!vm) {
    warn('not exist Vue instance in VNode context');
    return false
  }

  if (!vm.$i18n) {
    warn('not exist VueI18n instance in Vue instance');
    return false
  }

  return true
}

function localeEqual (el, vnode) {
  var vm = vnode.context;
  return el._locale === vm.$i18n.locale
}

function t (el, binding, vnode) {
  var ref$1, ref$2;

  var value = binding.value;

  var ref = parseValue(value);
  var path = ref.path;
  var locale = ref.locale;
  var args = ref.args;
  var choice = ref.choice;
  if (!path && !locale && !args) {
    warn('not support value type');
    return
  }

  if (!path) {
    warn('required `path` in v-t directive');
    return
  }

  var vm = vnode.context;
  if (choice) {
    el._vt = el.textContent = (ref$1 = vm.$i18n).tc.apply(ref$1, [ path, choice ].concat( makeParams(locale, args) ));
  } else {
    el._vt = el.textContent = (ref$2 = vm.$i18n).t.apply(ref$2, [ path ].concat( makeParams(locale, args) ));
  }
  el._locale = vm.$i18n.locale;
}

function parseValue (value) {
  var path;
  var locale;
  var args;
  var choice;

  if (typeof value === 'string') {
    path = value;
  } else if (isPlainObject(value)) {
    path = value.path;
    locale = value.locale;
    args = value.args;
    choice = value.choice;
  }

  return { path: path, locale: locale, args: args, choice: choice }
}

function makeParams (locale, args) {
  var params = [];

  locale && params.push(locale);
  if (args && (Array.isArray(args) || isPlainObject(args))) {
    params.push(args);
  }

  return params
}

var Vue;

function install (_Vue) {
  Vue = _Vue;

  var version = (Vue.version && Number(Vue.version.split('.')[0])) || -1;
  
  if (false) {}
  install.installed = true;

  
  if (false) {}

  extend(Vue);
  Vue.mixin(mixin);
  Vue.directive('t', { bind: bind, update: update, unbind: unbind });
  Vue.component(component.name, component);

  // use object-based merge strategy
  var strats = Vue.config.optionMergeStrategies;
  strats.i18n = strats.methods;
}



var BaseFormatter = function BaseFormatter () {
  this._caches = Object.create(null);
};

BaseFormatter.prototype.interpolate = function interpolate (message, values) {
  if (!values) {
    return [message]
  }
  var tokens = this._caches[message];
  if (!tokens) {
    tokens = parse(message);
    this._caches[message] = tokens;
  }
  return compile(tokens, values)
};



var RE_TOKEN_LIST_VALUE = /^(\d)+/;
var RE_TOKEN_NAMED_VALUE = /^(\w)+/;

function parse (format) {
  var tokens = [];
  var position = 0;

  var text = '';
  while (position < format.length) {
    var char = format[position++];
    if (char === '{') {
      if (text) {
        tokens.push({ type: 'text', value: text });
      }

      text = '';
      var sub = '';
      char = format[position++];
      while (char !== '}') {
        sub += char;
        char = format[position++];
      }

      var type = RE_TOKEN_LIST_VALUE.test(sub)
        ? 'list'
        : RE_TOKEN_NAMED_VALUE.test(sub)
          ? 'named'
          : 'unknown';
      tokens.push({ value: sub, type: type });
    } else if (char === '%') {
      // when found rails i18n syntax, skip text capture
      if (format[(position)] !== '{') {
        text += char;
      }
    } else {
      text += char;
    }
  }

  text && tokens.push({ type: 'text', value: text });

  return tokens
}

function compile (tokens, values) {
  var compiled = [];
  var index = 0;

  var mode = Array.isArray(values)
    ? 'list'
    : isObject(values)
      ? 'named'
      : 'unknown';
  if (mode === 'unknown') { return compiled }

  while (index < tokens.length) {
    var token = tokens[index];
    switch (token.type) {
      case 'text':
        compiled.push(token.value);
        break
      case 'list':
        compiled.push(values[parseInt(token.value, 10)]);
        break
      case 'named':
        if (mode === 'named') {
          compiled.push((values)[token.value]);
        } else {
          if (false) {}
        }
        break
      case 'unknown':
        if (false) {}
        break
    }
    index++;
  }

  return compiled
}



/**
 *  Path paerser
 *  - Inspired:
 *    Vue.js Path parser
 */

// actions
var APPEND = 0;
var PUSH = 1;
var INC_SUB_PATH_DEPTH = 2;
var PUSH_SUB_PATH = 3;

// states
var BEFORE_PATH = 0;
var IN_PATH = 1;
var BEFORE_IDENT = 2;
var IN_IDENT = 3;
var IN_SUB_PATH = 4;
var IN_SINGLE_QUOTE = 5;
var IN_DOUBLE_QUOTE = 6;
var AFTER_PATH = 7;
var ERROR = 8;

var pathStateMachine = [];

pathStateMachine[BEFORE_PATH] = {
  'ws': [BEFORE_PATH],
  'ident': [IN_IDENT, APPEND],
  '[': [IN_SUB_PATH],
  'eof': [AFTER_PATH]
};

pathStateMachine[IN_PATH] = {
  'ws': [IN_PATH],
  '.': [BEFORE_IDENT],
  '[': [IN_SUB_PATH],
  'eof': [AFTER_PATH]
};

pathStateMachine[BEFORE_IDENT] = {
  'ws': [BEFORE_IDENT],
  'ident': [IN_IDENT, APPEND],
  '0': [IN_IDENT, APPEND],
  'number': [IN_IDENT, APPEND]
};

pathStateMachine[IN_IDENT] = {
  'ident': [IN_IDENT, APPEND],
  '0': [IN_IDENT, APPEND],
  'number': [IN_IDENT, APPEND],
  'ws': [IN_PATH, PUSH],
  '.': [BEFORE_IDENT, PUSH],
  '[': [IN_SUB_PATH, PUSH],
  'eof': [AFTER_PATH, PUSH]
};

pathStateMachine[IN_SUB_PATH] = {
  "'": [IN_SINGLE_QUOTE, APPEND],
  '"': [IN_DOUBLE_QUOTE, APPEND],
  '[': [IN_SUB_PATH, INC_SUB_PATH_DEPTH],
  ']': [IN_PATH, PUSH_SUB_PATH],
  'eof': ERROR,
  'else': [IN_SUB_PATH, APPEND]
};

pathStateMachine[IN_SINGLE_QUOTE] = {
  "'": [IN_SUB_PATH, APPEND],
  'eof': ERROR,
  'else': [IN_SINGLE_QUOTE, APPEND]
};

pathStateMachine[IN_DOUBLE_QUOTE] = {
  '"': [IN_SUB_PATH, APPEND],
  'eof': ERROR,
  'else': [IN_DOUBLE_QUOTE, APPEND]
};

/**
 * Check if an expression is a literal value.
 */

var literalValueRE = /^\s?(true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;
function isLiteral (exp) {
  return literalValueRE.test(exp)
}

/**
 * Strip quotes from a string
 */

function stripQuotes (str) {
  var a = str.charCodeAt(0);
  var b = str.charCodeAt(str.length - 1);
  return a === b && (a === 0x22 || a === 0x27)
    ? str.slice(1, -1)
    : str
}

/**
 * Determine the type of a character in a keypath.
 */

function getPathCharType (ch) {
  if (ch === undefined || ch === null) { return 'eof' }

  var code = ch.charCodeAt(0);

  switch (code) {
    case 0x5B: // [
    case 0x5D: // ]
    case 0x2E: // .
    case 0x22: // "
    case 0x27: // '
    case 0x30: // 0
      return ch

    case 0x5F: // _
    case 0x24: // $
    case 0x2D: // -
      return 'ident'

    case 0x20: // Space
    case 0x09: // Tab
    case 0x0A: // Newline
    case 0x0D: // Return
    case 0xA0:  // No-break space
    case 0xFEFF:  // Byte Order Mark
    case 0x2028:  // Line Separator
    case 0x2029:  // Paragraph Separator
      return 'ws'
  }

  // a-z, A-Z
  if ((code >= 0x61 && code <= 0x7A) || (code >= 0x41 && code <= 0x5A)) {
    return 'ident'
  }

  // 1-9
  if (code >= 0x31 && code <= 0x39) { return 'number' }

  return 'else'
}

/**
 * Format a subPath, return its plain form if it is
 * a literal string or number. Otherwise prepend the
 * dynamic indicator (*).
 */

function formatSubPath (path) {
  var trimmed = path.trim();
  // invalid leading 0
  if (path.charAt(0) === '0' && isNaN(path)) { return false }

  return isLiteral(trimmed) ? stripQuotes(trimmed) : '*' + trimmed
}

/**
 * Parse a string path into an array of segments
 */

function parse$1 (path) {
  var keys = [];
  var index = -1;
  var mode = BEFORE_PATH;
  var subPathDepth = 0;
  var c;
  var key;
  var newChar;
  var type;
  var transition;
  var action;
  var typeMap;
  var actions = [];

  actions[PUSH] = function () {
    if (key !== undefined) {
      keys.push(key);
      key = undefined;
    }
  };

  actions[APPEND] = function () {
    if (key === undefined) {
      key = newChar;
    } else {
      key += newChar;
    }
  };

  actions[INC_SUB_PATH_DEPTH] = function () {
    actions[APPEND]();
    subPathDepth++;
  };

  actions[PUSH_SUB_PATH] = function () {
    if (subPathDepth > 0) {
      subPathDepth--;
      mode = IN_SUB_PATH;
      actions[APPEND]();
    } else {
      subPathDepth = 0;
      key = formatSubPath(key);
      if (key === false) {
        return false
      } else {
        actions[PUSH]();
      }
    }
  };

  function maybeUnescapeQuote () {
    var nextChar = path[index + 1];
    if ((mode === IN_SINGLE_QUOTE && nextChar === "'") ||
      (mode === IN_DOUBLE_QUOTE && nextChar === '"')) {
      index++;
      newChar = '\\' + nextChar;
      actions[APPEND]();
      return true
    }
  }

  while (mode !== null) {
    index++;
    c = path[index];

    if (c === '\\' && maybeUnescapeQuote()) {
      continue
    }

    type = getPathCharType(c);
    typeMap = pathStateMachine[mode];
    transition = typeMap[type] || typeMap['else'] || ERROR;

    if (transition === ERROR) {
      return // parse error
    }

    mode = transition[0];
    action = actions[transition[1]];
    if (action) {
      newChar = transition[2];
      newChar = newChar === undefined
        ? c
        : newChar;
      if (action() === false) {
        return
      }
    }

    if (mode === AFTER_PATH) {
      return keys
    }
  }
}





function empty (target) {
  
  if (Array.isArray(target)) {
    return target.length === 0
  } else {
    return false
  }
}

var I18nPath = function I18nPath () {
  this._cache = Object.create(null);
};

/**
 * External parse that check for a cache hit first
 */
I18nPath.prototype.parsePath = function parsePath (path) {
  var hit = this._cache[path];
  if (!hit) {
    hit = parse$1(path);
    if (hit) {
      this._cache[path] = hit;
    }
  }
  return hit || []
};

/**
 * Get path value from path string
 */
I18nPath.prototype.getPathValue = function getPathValue (obj, path) {
  if (!isObject(obj)) { return null }

  var paths = this.parsePath(path);
  if (empty(paths)) {
    return null
  } else {
    var length = paths.length;
    var ret = null;
    var last = obj;
    var i = 0;
    while (i < length) {
      var value = last[paths[i]];
      if (value === undefined) {
        last = null;
        break
      }
      last = value;
      i++;
    }

    ret = last;
    return ret
  }
};





var numberFormatKeys = [
  'style',
  'currency',
  'currencyDisplay',
  'useGrouping',
  'minimumIntegerDigits',
  'minimumFractionDigits',
  'maximumFractionDigits',
  'minimumSignificantDigits',
  'maximumSignificantDigits',
  'localeMatcher',
  'formatMatcher'
];

var VueI18n = function VueI18n (options) {
  var this$1 = this;
  if ( options === void 0 ) options = {};

  // Auto install if it is not done yet and `window` has `Vue`.
  // To allow users to avoid auto-installation in some cases,
  // this code should be placed here. See #290
  
  if (!Vue && typeof window !== 'undefined' && window.Vue) {
    install(window.Vue);
  }

  var locale = options.locale || 'en-US';
  var fallbackLocale = options.fallbackLocale || 'en-US';
  var messages = options.messages || {};
  var dateTimeFormats = options.dateTimeFormats || {};
  var numberFormats = options.numberFormats || {};

  this._vm = null;
  this._formatter = options.formatter || new BaseFormatter();
  this._missing = options.missing || null;
  this._root = options.root || null;
  this._sync = options.sync === undefined ? true : !!options.sync;
  this._fallbackRoot = options.fallbackRoot === undefined
    ? true
    : !!options.fallbackRoot;
  this._silentTranslationWarn = options.silentTranslationWarn === undefined
    ? false
    : !!options.silentTranslationWarn;
  this._dateTimeFormatters = {};
  this._numberFormatters = {};
  this._path = new I18nPath();
  this._dataListeners = [];

  this._exist = function (message, key) {
    if (!message || !key) { return false }
    return !isNull(this$1._path.getPathValue(message, key))
  };

  this._initVM({
    locale: locale,
    fallbackLocale: fallbackLocale,
    messages: messages,
    dateTimeFormats: dateTimeFormats,
    numberFormats: numberFormats
  });
};

var prototypeAccessors = { vm: { configurable: true },messages: { configurable: true },dateTimeFormats: { configurable: true },numberFormats: { configurable: true },locale: { configurable: true },fallbackLocale: { configurable: true },missing: { configurable: true },formatter: { configurable: true },silentTranslationWarn: { configurable: true } };

VueI18n.prototype._initVM = function _initVM (data) {
  var silent = Vue.config.silent;
  Vue.config.silent = true;
  this._vm = new Vue({ data: data });
  Vue.config.silent = silent;
};

VueI18n.prototype.subscribeDataChanging = function subscribeDataChanging (vm) {
  this._dataListeners.push(vm);
};

VueI18n.prototype.unsubscribeDataChanging = function unsubscribeDataChanging (vm) {
  remove(this._dataListeners, vm);
};

VueI18n.prototype.watchI18nData = function watchI18nData () {
  var self = this;
  return this._vm.$watch('$data', function () {
    var i = self._dataListeners.length;
    while (i--) {
      Vue.nextTick(function () {
        self._dataListeners[i] && self._dataListeners[i].$forceUpdate();
      });
    }
  }, { deep: true })
};

VueI18n.prototype.watchLocale = function watchLocale () {
  
  if (!this._sync || !this._root) { return null }
  var target = this._vm;
  return this._root.vm.$watch('locale', function (val) {
    target.$set(target, 'locale', val);
    target.$forceUpdate();
  }, { immediate: true })
};

prototypeAccessors.vm.get = function () { return this._vm };

prototypeAccessors.messages.get = function () { return looseClone(this._getMessages()) };
prototypeAccessors.dateTimeFormats.get = function () { return looseClone(this._getDateTimeFormats()) };
prototypeAccessors.numberFormats.get = function () { return looseClone(this._getNumberFormats()) };

prototypeAccessors.locale.get = function () { return this._vm.locale };
prototypeAccessors.locale.set = function (locale) {
  this._vm.$set(this._vm, 'locale', locale);
};

prototypeAccessors.fallbackLocale.get = function () { return this._vm.fallbackLocale };
prototypeAccessors.fallbackLocale.set = function (locale) {
  this._vm.$set(this._vm, 'fallbackLocale', locale);
};

prototypeAccessors.missing.get = function () { return this._missing };
prototypeAccessors.missing.set = function (handler) { this._missing = handler; };

prototypeAccessors.formatter.get = function () { return this._formatter };
prototypeAccessors.formatter.set = function (formatter) { this._formatter = formatter; };

prototypeAccessors.silentTranslationWarn.get = function () { return this._silentTranslationWarn };
prototypeAccessors.silentTranslationWarn.set = function (silent) { this._silentTranslationWarn = silent; };

VueI18n.prototype._getMessages = function _getMessages () { return this._vm.messages };
VueI18n.prototype._getDateTimeFormats = function _getDateTimeFormats () { return this._vm.dateTimeFormats };
VueI18n.prototype._getNumberFormats = function _getNumberFormats () { return this._vm.numberFormats };

VueI18n.prototype._warnDefault = function _warnDefault (locale, key, result, vm, values) {
  if (!isNull(result)) { return result }
  if (this._missing) {
    var missingRet = this._missing.apply(null, [locale, key, vm, values]);
    if (typeof missingRet === 'string') {
      return missingRet
    }
  } else {
    if (false) {}
  }
  return key
};

VueI18n.prototype._isFallbackRoot = function _isFallbackRoot (val) {
  return !val && !isNull(this._root) && this._fallbackRoot
};

VueI18n.prototype._interpolate = function _interpolate (
  locale,
  message,
  key,
  host,
  interpolateMode,
  values
) {
  if (!message) { return null }

  var pathRet = this._path.getPathValue(message, key);
  if (Array.isArray(pathRet) || isPlainObject(pathRet)) { return pathRet }

  var ret;
  if (isNull(pathRet)) {
    
    if (isPlainObject(message)) {
      ret = message[key];
      if (typeof ret !== 'string') {
        if (false) {}
        return null
      }
    } else {
      return null
    }
  } else {
    
    if (typeof pathRet === 'string') {
      ret = pathRet;
    } else {
      if (false) {}
      return null
    }
  }

  // Check for the existance of links within the translated string
  if (ret.indexOf('@:') >= 0) {
    ret = this._link(locale, message, ret, host, interpolateMode, values);
  }

  return this._render(ret, interpolateMode, values)
};

VueI18n.prototype._link = function _link (
  locale,
  message,
  str,
  host,
  interpolateMode,
  values
) {
    var this$1 = this;

  var ret = str;

  // Match all the links within the local
  // We are going to replace each of
  // them with its translation
  var matches = ret.match(/(@:[\w\-_|.]+)/g);
  for (var idx in matches) {
    // ie compatible: filter custom array
    // prototype method
    if (!matches.hasOwnProperty(idx)) {
      continue
    }
    var link = matches[idx];
    // Remove the leading @:
    var linkPlaceholder = link.substr(2);
    // Translate the link
    var translated = this$1._interpolate(
      locale, message, linkPlaceholder, host,
      interpolateMode === 'raw' ? 'string' : interpolateMode,
      interpolateMode === 'raw' ? undefined : values
    );

    if (this$1._isFallbackRoot(translated)) {
      if (false) {}
      
      if (!this$1._root) { throw Error('unexpected error') }
      var root = this$1._root;
      translated = root._translate(
        root._getMessages(), root.locale, root.fallbackLocale,
        linkPlaceholder, host, interpolateMode, values
      );
    }
    translated = this$1._warnDefault(
      locale, linkPlaceholder, translated, host,
      Array.isArray(values) ? values : [values]
    );

    // Replace the link with the translated
    ret = !translated ? ret : ret.replace(link, translated);
  }

  return ret
};

VueI18n.prototype._render = function _render (message, interpolateMode, values) {
  var ret = this._formatter.interpolate(message, values);
  // if interpolateMode is **not** 'string' ('row'),
  // return the compiled data (e.g. ['foo', VNode, 'bar']) with formatter
  return interpolateMode === 'string' ? ret.join('') : ret
};

VueI18n.prototype._translate = function _translate (
  messages,
  locale,
  fallback,
  key,
  host,
  interpolateMode,
  args
) {
  var res =
    this._interpolate(locale, messages[locale], key, host, interpolateMode, args);
  if (!isNull(res)) { return res }

  res = this._interpolate(fallback, messages[fallback], key, host, interpolateMode, args);
  if (!isNull(res)) {
    if (false) {}
    return res
  } else {
    return null
  }
};

VueI18n.prototype._t = function _t (key, _locale, messages, host) {
    var ref;

    var values = [], len = arguments.length - 4;
    while ( len-- > 0 ) values[ len ] = arguments[ len + 4 ];
  if (!key) { return '' }

  var parsedArgs = parseArgs.apply(void 0, values);
  var locale = parsedArgs.locale || _locale;

  var ret = this._translate(
    messages, locale, this.fallbackLocale, key,
    host, 'string', parsedArgs.params
  );
  if (this._isFallbackRoot(ret)) {
    if (false) {}
    
    if (!this._root) { throw Error('unexpected error') }
    return (ref = this._root).t.apply(ref, [ key ].concat( values ))
  } else {
    return this._warnDefault(locale, key, ret, host, values)
  }
};

VueI18n.prototype.t = function t (key) {
    var ref;

    var values = [], len = arguments.length - 1;
    while ( len-- > 0 ) values[ len ] = arguments[ len + 1 ];
  return (ref = this)._t.apply(ref, [ key, this.locale, this._getMessages(), null ].concat( values ))
};

VueI18n.prototype._i = function _i (key, locale, messages, host, values) {
  var ret =
    this._translate(messages, locale, this.fallbackLocale, key, host, 'raw', values);
  if (this._isFallbackRoot(ret)) {
    if (false) {}
    if (!this._root) { throw Error('unexpected error') }
    return this._root.i(key, locale, values)
  } else {
    return this._warnDefault(locale, key, ret, host, [values])
  }
};

VueI18n.prototype.i = function i (key, locale, values) {
  
  if (!key) { return '' }

  if (typeof locale !== 'string') {
    locale = this.locale;
  }

  return this._i(key, locale, this._getMessages(), null, values)
};

VueI18n.prototype._tc = function _tc (
  key,
  _locale,
  messages,
  host,
  choice
) {
    var ref;

    var values = [], len = arguments.length - 5;
    while ( len-- > 0 ) values[ len ] = arguments[ len + 5 ];
  if (!key) { return '' }
  if (choice === undefined) {
    choice = 1;
  }
  return fetchChoice((ref = this)._t.apply(ref, [ key, _locale, messages, host ].concat( values )), choice)
};

VueI18n.prototype.tc = function tc (key, choice) {
    var ref;

    var values = [], len = arguments.length - 2;
    while ( len-- > 0 ) values[ len ] = arguments[ len + 2 ];
  return (ref = this)._tc.apply(ref, [ key, this.locale, this._getMessages(), null, choice ].concat( values ))
};

VueI18n.prototype._te = function _te (key, locale, messages) {
    var args = [], len = arguments.length - 3;
    while ( len-- > 0 ) args[ len ] = arguments[ len + 3 ];

  var _locale = parseArgs.apply(void 0, args).locale || locale;
  return this._exist(messages[_locale], key)
};

VueI18n.prototype.te = function te (key, locale) {
  return this._te(key, this.locale, this._getMessages(), locale)
};

VueI18n.prototype.getLocaleMessage = function getLocaleMessage (locale) {
  return looseClone(this._vm.messages[locale] || {})
};

VueI18n.prototype.setLocaleMessage = function setLocaleMessage (locale, message) {
  this._vm.$set(this._vm.messages, locale, message);
};

VueI18n.prototype.mergeLocaleMessage = function mergeLocaleMessage (locale, message) {
  this._vm.$set(this._vm.messages, locale, Vue.util.extend(this._vm.messages[locale] || {}, message));
};

VueI18n.prototype.getDateTimeFormat = function getDateTimeFormat (locale) {
  return looseClone(this._vm.dateTimeFormats[locale] || {})
};

VueI18n.prototype.setDateTimeFormat = function setDateTimeFormat (locale, format) {
  this._vm.$set(this._vm.dateTimeFormats, locale, format);
};

VueI18n.prototype.mergeDateTimeFormat = function mergeDateTimeFormat (locale, format) {
  this._vm.$set(this._vm.dateTimeFormats, locale, Vue.util.extend(this._vm.dateTimeFormats[locale] || {}, format));
};

VueI18n.prototype._localizeDateTime = function _localizeDateTime (
  value,
  locale,
  fallback,
  dateTimeFormats,
  key
) {
  var _locale = locale;
  var formats = dateTimeFormats[_locale];

  // fallback locale
  if (isNull(formats) || isNull(formats[key])) {
    if (false) {}
    _locale = fallback;
    formats = dateTimeFormats[_locale];
  }

  if (isNull(formats) || isNull(formats[key])) {
    return null
  } else {
    var format = formats[key];
    var id = _locale + "__" + key;
    var formatter = this._dateTimeFormatters[id];
    if (!formatter) {
      formatter = this._dateTimeFormatters[id] = new Intl.DateTimeFormat(_locale, format);
    }
    return formatter.format(value)
  }
};

VueI18n.prototype._d = function _d (value, locale, key) {
  
  if (false) {}

  if (!key) {
    return new Intl.DateTimeFormat(locale).format(value)
  }

  var ret =
    this._localizeDateTime(value, locale, this.fallbackLocale, this._getDateTimeFormats(), key);
  if (this._isFallbackRoot(ret)) {
    if (false) {}
    
    if (!this._root) { throw Error('unexpected error') }
    return this._root.d(value, key, locale)
  } else {
    return ret || ''
  }
};

VueI18n.prototype.d = function d (value) {
    var args = [], len = arguments.length - 1;
    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];

  var locale = this.locale;
  var key = null;

  if (args.length === 1) {
    if (typeof args[0] === 'string') {
      key = args[0];
    } else if (isObject(args[0])) {
      if (args[0].locale) {
        locale = args[0].locale;
      }
      if (args[0].key) {
        key = args[0].key;
      }
    }
  } else if (args.length === 2) {
    if (typeof args[0] === 'string') {
      key = args[0];
    }
    if (typeof args[1] === 'string') {
      locale = args[1];
    }
  }

  return this._d(value, locale, key)
};

VueI18n.prototype.getNumberFormat = function getNumberFormat (locale) {
  return looseClone(this._vm.numberFormats[locale] || {})
};

VueI18n.prototype.setNumberFormat = function setNumberFormat (locale, format) {
  this._vm.$set(this._vm.numberFormats, locale, format);
};

VueI18n.prototype.mergeNumberFormat = function mergeNumberFormat (locale, format) {
  this._vm.$set(this._vm.numberFormats, locale, Vue.util.extend(this._vm.numberFormats[locale] || {}, format));
};

VueI18n.prototype._localizeNumber = function _localizeNumber (
  value,
  locale,
  fallback,
  numberFormats,
  key,
  options
) {
  var _locale = locale;
  var formats = numberFormats[_locale];

  // fallback locale
  if (isNull(formats) || isNull(formats[key])) {
    if (false) {}
    _locale = fallback;
    formats = numberFormats[_locale];
  }

  if (isNull(formats) || isNull(formats[key])) {
    return null
  } else {
    var format = formats[key];

    var formatter;
    if (options) {
      // If options specified - create one time number formatter
      formatter = new Intl.NumberFormat(_locale, Object.assign({}, format, options));
    } else {
      var id = _locale + "__" + key;
      formatter = this._numberFormatters[id];
      if (!formatter) {
        formatter = this._numberFormatters[id] = new Intl.NumberFormat(_locale, format);
      }
    }
    return formatter.format(value)
  }
};

VueI18n.prototype._n = function _n (value, locale, key, options) {
  
  if (false) {}

  if (!key) {
    var nf = !options ? new Intl.NumberFormat(locale) : new Intl.NumberFormat(locale, options);
    return nf.format(value)
  }

  var ret =
    this._localizeNumber(value, locale, this.fallbackLocale, this._getNumberFormats(), key, options);
  if (this._isFallbackRoot(ret)) {
    if (false) {}
    
    if (!this._root) { throw Error('unexpected error') }
    return this._root.n(value, Object.assign({}, { key: key, locale: locale }, options))
  } else {
    return ret || ''
  }
};

VueI18n.prototype.n = function n (value) {
    var args = [], len = arguments.length - 1;
    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];

  var locale = this.locale;
  var key = null;
  var options = null;

  if (args.length === 1) {
    if (typeof args[0] === 'string') {
      key = args[0];
    } else if (isObject(args[0])) {
      if (args[0].locale) {
        locale = args[0].locale;
      }
      if (args[0].key) {
        key = args[0].key;
      }

      // Filter out number format options only
      options = Object.keys(args[0]).reduce(function (acc, key) {
          var obj;

        if (numberFormatKeys.includes(key)) {
          return Object.assign({}, acc, ( obj = {}, obj[key] = args[0][key], obj ))
        }
        return acc
      }, null);
    }
  } else if (args.length === 2) {
    if (typeof args[0] === 'string') {
      key = args[0];
    }
    if (typeof args[1] === 'string') {
      locale = args[1];
    }
  }

  return this._n(value, locale, key, options)
};

Object.defineProperties( VueI18n.prototype, prototypeAccessors );

VueI18n.availabilities = {
  dateTimeFormat: canUseDateTimeFormat,
  numberFormat: canUseNumberFormat
};
VueI18n.install = install;
VueI18n.version = '8.0.0';

 __webpack_exports__["default"] = (VueI18n);


/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/currency-selector/currency-selector.vue?vue&type=template&id=c4f78ba0":
/*!****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/components/currency-selector/currency-selector.vue?vue&type=template&id=c4f78ba0 ***!
  \****************************************************************************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"currency-selector page-container--without-navigation"},[_c('span',{staticClass:"currency-selector__back icon-icon_I015",on:{"click":_vm.back}}),_vm._v(" "),_c('h1',{staticClass:"currency-selector__title"},[_vm._v(_vm._s(_vm.$t('checkout.change_currency')))]),_vm._v(" "),_c('ul',{staticClass:"currency-selector__currencies"},_vm._l((_vm.currencies),function(currency){return _c('li',{staticClass:"currency-selector__currency",on:{"click":function($event){_vm.selectRadio(currency)}}},[_c('span',{staticClass:"currency-selector__currency-name"},[(_vm.currencyFlags)?_c('img',{staticClass:"currency-selector__flag",staticStyle:{"vertical-align":"middle"},attrs:{"src":_vm.currencyFlags[currency.code]}}):_c('svg',{staticClass:"currency-selector__flag",staticStyle:{"vertical-align":"middle"}},[_c('use',{attrs:{"xlink:href":'#' + currency.code}})]),_vm._v("\n                "+_vm._s(currency.code)+"\n            ")]),_vm._v(" "),_c('span',{staticClass:"currency-selector__currency-radio-wrapper"},[_c('span',{staticClass:"currency-selector__currency-radio",class:currency.code === (_vm.selectedCurrencyOnUI || _vm.selectedCurrency).code
                      ? 'currency-selector__currency-radio--selected': ''})])])})),_vm._v(" "),_c('button',{staticClass:"button",attrs:{"type":"button","disabled":!_vm.selectedCurrencyOnUI || (_vm.selectedCurrencyOnUI.code === _vm.selectedCurrency.code)},on:{"click":function($event){_vm.selectCurrency(_vm.selectedCurrencyOnUI)}}},[_vm._v("\n        "+_vm._s(_vm.$t('preferences.update_currency'))+"\n    ")])])}
var staticRenderFns = []



/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/global-search/global-search.vue?vue&type=template&id=7addf392":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/components/global-search/global-search.vue?vue&type=template&id=7addf392 ***!
  \********************************************************************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"global-search-overlay page-container--without-navigation"},[_c('div',{staticClass:"global-search-overlay__search"},[_c('div',{staticClass:"global-search-overlay__search-content"},[_c('span',{staticClass:"icon-icon_D001 global-search-overlay__search-content-icon"}),_vm._v(" "),_c('input',{directives:[{name:"model",rawName:"v-model",value:(_vm.searchVal),expression:"searchVal"}],ref:"input",staticClass:"global-search-overlay__search-content-input",attrs:{"type":"text","placeholder":_vm.$t('booking.search'),"autofocus":""},domProps:{"value":(_vm.searchVal)},on:{"blur":_vm.blur,"focus":_vm.focus,"input":function($event){if($event.target.composing){ return; }_vm.searchVal=$event.target.value}}}),_vm._v(" "),_c('span',{staticClass:"global-search-overlay__search-content-clear",on:{"click":_vm.clear}},[_vm._v(_vm._s(_vm.$t('booking.clear')))]),_vm._v(" "),_c('div',{staticClass:"global-search-overlay__search-content-home"},[_c('span',{staticClass:"icon-icon_I016 global-search-overlay__search-content-home-icon",on:{"click":_vm.back}})])]),_vm._v(" "),_c('div',{}),_vm._v(" "),(_vm.noResults&&_vm.searchKey)?_c('div',{staticClass:"global-search-overlay__search-no-result"},[_vm._v("\n            "+_vm._s(_vm.$t('booking.no_results'))+"\n        ")]):_c('div',{staticClass:"global-search-overlay__search-result"},[(!_vm.searchResults&&_vm.getFocus)?_c('div',{staticClass:"global-search-overlay__search-result-history"},[_c('h3',[_vm._v(_vm._s(_vm.$t('booking.recently_viewed')))]),_vm._v(" "),(_vm.searchHistory&&_vm.searchHistory.length>0)?_c('ul',_vm._l((_vm.searchHistory),function(item,index){return _c('li',[_c('a',{on:{"click":function($event){_vm.gotoLink(item.url)}}},[_vm._v(_vm._s(item.name))])])})):_c('div',{staticClass:"global-search-overlay__search-result-history-none"},[_vm._v(_vm._s(_vm.$t('booking.no_results'))+"\n                ")])]):_vm._e(),_vm._v(" "),(_vm.searchResultslist&&!_vm.showAllList)?_c('div',{staticClass:"global-search-overlay__search-result-item"},[_c('h3',{staticClass:"active"},[_vm._v(_vm._s(_vm.$t('general.properties')))]),_vm._v(" "),_c('ul',_vm._l((_vm.searchResultslist),function(item,index){return (index<=2)?_c('li',[(item.type==='destination')?_c('a',{on:{"click":function($event){_vm.gotoLink(item.url)}}},[_vm._v(_vm._s(_vm.$t('booking.hotelsincity', [item.name]))+" ("+_vm._s(item.number)+" "+_vm._s(_vm.$t('general.properties'))+")")]):_c('a',{on:{"click":function($event){_vm.gotoLink(item.url)}}},[_vm._v(_vm._s(item.name))])]):_vm._e()})),_vm._v(" "),(_vm.searchResultslist.length>3)?_c('div',{staticClass:"global-search-overlay__search-result-item-viewAll",on:{"click":_vm.toggleViewAll}},[_vm._v("\n                    "+_vm._s(_vm.$t('packages.view_all'))+"\n                ")]):_vm._e(),_vm._v(" "),(!_vm.searchResultslist.length)?_c('div',{staticClass:"global-search-overlay__no-results"},[_vm._v("\n                    "+_vm._s(_vm.$t('globalsearch.nomatched_title'))+"\n                ")]):_vm._e()]):_vm._e(),_vm._v(" "),(_vm.searchResultslist&&_vm.showAllList)?_c('div',{staticClass:"global-search-overlay__search-result-allList"},[_c('div',{staticClass:"global-search-overlay__search-result-allList-backResults",on:{"click":_vm.toggleViewAll}},[_c('span',{staticClass:"icon-icon_I015 back-icon"}),_vm._v(" "),_c('span',{staticClass:"global-search-overlay__back"},[_vm._v(_vm._s(_vm.$t('booking.back_to_all_search_results')))])]),_vm._v(" "),_c('vue-scroll',{attrs:{"ops":_vm.ops}},[_c('div',{staticClass:"global-search-overlay__search-result-allList-scroll"},[_c('h3',[_vm._v(_vm._s(_vm.$t('general.properties')))]),_vm._v(" "),_c('ul',_vm._l((_vm.searchResultslist),function(item,index){return _c('li',[(item.type==='destination')?_c('a',{on:{"click":function($event){_vm.gotoLink(item.url)}}},[_vm._v(_vm._s(_vm.$t('booking.hotelsincity', [item.name]))+" ("+_vm._s(item.number)+" "+_vm._s(_vm.$t('general.properties'))+")")]):_c('a',{on:{"click":function($event){_vm.gotoLink(item.url)}}},[_vm._v(_vm._s(item.name))])])}))])])],1):_vm._e()])])])}
var staticRenderFns = []



/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/going-app/going-app.vue?vue&type=template&id=0d485394":
/*!************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/components/going-app/going-app.vue?vue&type=template&id=0d485394 ***!
  \************************************************************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.appInstallClosed && !_vm.fromapp)?_c('div',{staticClass:"app-guide"},[_c('a',{staticClass:"close_btn",on:{"click":_vm.close}},[_c('span',{staticClass:"icon-icon_B017"})]),_vm._v(" "),_c('span',{staticClass:"logo icon-icon_A001"}),_vm._v(" "),_c('div',{staticClass:"guide-text"},[_c('h6',[_vm._v(_vm._s(_vm.$t('app.titleone')))]),_vm._v(" "),_c('span',[_vm._v(_vm._s(_vm.$t('app.shortDes')))])]),_vm._v(" "),_c('span',{staticClass:"guide-btn",attrs:{"href":""},on:{"click":_vm.goApp}},[_vm._v(_vm._s(_vm.$t('app.go_to_app')))])]):_vm._e()}
var staticRenderFns = []



/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/homepage/search-overlay/search-overlay.vue?vue&type=template&id=8a9d65a8":
/*!*******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/components/homepage/search-overlay/search-overlay.vue?vue&type=template&id=8a9d65a8 ***!
  \*******************************************************************************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"search-overlay page-container--without-navigation"},[_c('router-link',{staticClass:"search-overlay__close icon-icon_B017",attrs:{"to":"/search-page"}}),_vm._v(" "),_c('div',{staticClass:"search-overlay__search"},[_c('h3',[_vm._v(_vm._s(_vm.$t('booking.where_go_to')))]),_vm._v(" "),_c('div',{staticClass:"search-overlay__search-content"},[_c('input',{directives:[{name:"debounce",rawName:"v-debounce",value:(_vm.searchHotel),expression:"searchHotel"},{name:"model",rawName:"v-model",value:(_vm.searchVal),expression:"searchVal"}],ref:"input",staticClass:"search-overlay__search-content-input",attrs:{"type":"text","placeholder":"Try ‘London’","autofocus":""},domProps:{"value":(_vm.searchVal)},on:{"input":function($event){if($event.target.composing){ return; }_vm.searchVal=$event.target.value}}}),_vm._v(" "),_c('span',{staticClass:"icon-icon_D001 search-overlay__search-content-icon"})]),_vm._v(" "),(!_vm.noResults&&_vm.searchResults)?_c('div',{staticClass:"search-overlay__search-results"},[_c('h3',[_vm._v(_vm._s(_vm.$t('general.search_results')))]),_vm._v(" "),_c('ul',[_vm._l((_vm.searchResults.city),function(item){return _c('li',[(item.type==='destination')?_c('span',{directives:[{name:"strong-key",rawName:"v-strong-key",value:([((_vm.$t('tours.hotels_in')) + " " + (item.name) + " (" + (item.number) + " " + (item.number>1?_vm.$t('general.properties'):_vm.$t('general.property')) + ")"),_vm.searchKey]),expression:"[`${$t('tours.hotels_in')} ${item.name} (${item.number} ${item.number>1?$t('general.properties'):$t('general.property')})`,searchKey]"}],on:{"click":function($event){_vm.updateLocation(item)}}}):_c('span',[_vm._v(_vm._s(item.name))])])}),_vm._v(" "),_vm._l((_vm.searchResults.hotel),function(item){return _c('li',[_c('span',{directives:[{name:"strong-key",rawName:"v-strong-key",value:([item.name,_vm.searchKey]),expression:"[item.name,searchKey]"}],on:{"click":function($event){_vm.updateLocation(item)}}},[_vm._v(_vm._s(item.name))])])})],2)]):_vm._e(),_vm._v(" "),(_vm.noResults&&_vm.searchKey)?_c('div',{staticClass:"search-overlay__search-no-result"},[_vm._m(0),_vm._v(" "),_c('p',{staticClass:"search-overlay__search-no-result-title"},[_vm._v("\n                "+_vm._s(_vm.$t('general.your_search_no_results',[_vm.searchKey]))+"\n            ")]),_vm._v(" "),_c('p',{staticClass:"search-overlay__search-no-result-content"},[_vm._v("\n                "+_vm._s(_vm.$t('general.check_your_spelling_and_try'))+"\n            ")])]):_vm._e()]),_vm._v(" "),_c('div',{directives:[{name:"show",rawName:"v-show",value:(!_vm.searchKey&&_vm.noResults),expression:"!searchKey&&noResults"}],staticClass:"search-overlay__topTen"},[_c('h3',{staticClass:"search-overlay__topTen-title"},[_vm._v(_vm._s(_vm.$t('quickbook.search_destinations')))]),_vm._v(" "),_c('ul',{staticClass:"search-overlay__topTen-list"},_vm._l((_vm.topTen),function(item){return _c('li',[_c('span',{on:{"click":function($event){_vm.updateLocation(item)}}},[_vm._v(_vm._s(item.name))])])}))])],1)}
var staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"search-overlay__search-no-result-icons"},[_c('span',{staticClass:"icon-icon_P011"})])}]



/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/language-selector/language-selector.vue?vue&type=template&id=d9a81d86":
/*!****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/components/language-selector/language-selector.vue?vue&type=template&id=d9a81d86 ***!
  \****************************************************************************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"language-selector page-container--without-navigation"},[_c('span',{staticClass:"language-selector__back icon-icon_I015",on:{"click":_vm.back}}),_vm._v(" "),_c('h1',{staticClass:"language-selector__title"},[_vm._v(_vm._s(_vm.$t('preferences.change_language')))]),_vm._v(" "),_c('ul',{staticClass:"language-selector__languages"},_vm._l((_vm.languages),function(language){return _c('li',{staticClass:"language-selector__language",on:{"click":function($event){_vm.selectRadio(language)}}},[_c('span',{staticClass:"language-selector__language-name"},[_vm._v("\n                "+_vm._s(language.name)+"\n            ")]),_vm._v(" "),_c('span',{staticClass:"language-selector__language-radio-wrapper"},[_c('span',{staticClass:"language-selector__language-radio",class:language === (_vm.selectedLanguageOnUI || _vm.selectedLanguage)
                      ? 'language-selector__language-radio--selected': ''})])])})),_vm._v(" "),_c('button',{staticClass:"button",attrs:{"type":"button","disabled":!_vm.selectedLanguageOnUI || (_vm.selectedLanguageOnUI === _vm.selectedLanguage)},on:{"click":function($event){_vm.selectLanguage(_vm.selectedLanguageOnUI)}}},[_vm._v("\n        "+_vm._s(_vm.$t('preferences.update_language'))+"\n    ")])])}
var staticRenderFns = []



/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/layer/loading/loading.vue?vue&type=template&id=0250ba9d":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/components/layer/loading/loading.vue?vue&type=template&id=0250ba9d ***!
  \**************************************************************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.loadingShow)?_c('div',{staticClass:"loading"},[_vm._m(0)]):_vm._e()}
var staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"loading__content"},[_c('div',{staticClass:"loading__content-img"},[_c('img',{attrs:{"src":__webpack_require__( "./src/assets/images/loading.gif"),"alt":""}})])])}]



/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=template&id=22790b60":
/*!*********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=template&id=22790b60 ***!
  \*********************************************************************************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:"container",staticClass:"navigation-bar"},[_c('span',{staticClass:"navigation-bar__icon navigation-bar__icon--menu"},[_c('span',{staticClass:"icon-icon_C007",on:{"click":_vm.toggleMenu}})]),_vm._v(" "),(!_vm.navigation.isM4BPage)?_c('span',{staticClass:"navigation-bar__logo",on:{"click":_vm.toHome}},[_vm._m(0)]):_vm._e(),_vm._v(" "),(_vm.navigation.isM4BPage)?_c('span',{staticClass:"navigation-bar__logo"},[_c('span',{staticClass:"navigation-bar__logo-icon icon-icon_A001",on:{"click":_vm.toHome}}),_vm._v(" "),_c('span',{staticClass:"navigation-bar__logo-divider"}),_vm._v(" "),_c('span',{staticClass:"navigation-bar__logo-icon icon-icon_mhr_m4b-logo-white",on:{"click":_vm.toM4BHome}})]):_vm._e(),_vm._v(" "),_c('span',{staticClass:"navigation-bar__icon navigation-bar__icon--search",class:{'navigation-bar__icon--hide': _vm.navigation.isM4BPage},on:{"click":_vm.triggerSearchFocus}},[_c('router-link',{attrs:{"to":"/global-search"}},[_c('span',{staticClass:"icon-icon_D001"})])],1),_vm._v(" "),_c('transition',{attrs:{"name":"fade"}},[_c('div',{directives:[{name:"show",rawName:"v-show",value:(_vm.navigation.menuExpanded),expression:"navigation.menuExpanded"}],staticClass:"navigation-bar__overlay"})]),_vm._v(" "),_c('transition',{attrs:{"name":"left-slide-in"}},[_c('navigation-popup',{directives:[{name:"show",rawName:"v-show",value:(_vm.navigation.menuExpanded),expression:"navigation.menuExpanded"}]})],1),_vm._v(" "),_c('input',{ref:"hiddenFocus",staticClass:"hidden",attrs:{"type":"text"}})],1)}
var staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:"navigation-bar__logo-icon icon-icon_mhr_mhr-QB-white"},[_c('span',{staticClass:"path1"}),_c('span',{staticClass:"path2"}),_c('span',{staticClass:"path3"}),_c('span',{staticClass:"path4"}),_c('span',{staticClass:"path5"}),_c('span',{staticClass:"path6"}),_c('span',{staticClass:"path7"}),_c('span',{staticClass:"path8"}),_c('span',{staticClass:"path9"}),_c('span',{staticClass:"path10"}),_c('span',{staticClass:"path11"}),_c('span',{staticClass:"path12"}),_c('span',{staticClass:"path13"}),_c('span',{staticClass:"path14"}),_c('span',{staticClass:"path15"}),_c('span',{staticClass:"path16"}),_c('span',{staticClass:"path17"}),_c('span',{staticClass:"path18"}),_c('span',{staticClass:"path19"}),_c('span',{staticClass:"path20"}),_c('span',{staticClass:"path21"}),_c('span',{staticClass:"path22"}),_c('span',{staticClass:"path23"}),_c('span',{staticClass:"path24"}),_c('span',{staticClass:"path25"}),_c('span',{staticClass:"path26"}),_c('span',{staticClass:"path27"})])}]



/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=template&id=bb190116":
/*!*************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=template&id=bb190116 ***!
  \*************************************************************************************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"navigation-popup",on:{"click":_vm.toggleMenu}},[_c('div',{staticClass:"navigation-popup__menu",on:{"click":_vm.stopNavPropagation}},[_c('div',{staticClass:"navigation-popup__close"},[_c('span',{staticClass:"icon-icon_B017",on:{"click":_vm.toggleMenu}})]),_vm._v(" "),_c('div',{staticClass:"navigation-popup__user"},[_vm._m(0),_vm._v(" "),(!_vm.user.isLogin)?_c('div',{staticClass:"navigation-popup__guest"},[_c('div',{staticClass:"icon-icon_K006 navigation-popup__guest-avatar"}),_vm._v(" "),_c('div',{staticClass:"navigation-popup__username"},[_vm._v(_vm._s(_vm.$t("general.guest")))]),_vm._v(" "),(_vm.user.links)?_c('div',{staticClass:"navigation-popup__user-links"},[_c('a',{staticClass:"navigation-popup__user-link",attrs:{"data-href":_vm.user.links.signUp},on:{"click":function($event){_vm.redirectSignUp(_vm.user.links.signUp)}}},[_vm._v(_vm._s(_vm.$t("form.sign_up_now")))]),_vm._v(" "),_c('span',{staticClass:"navigation-popup__divider"},[_vm._v("|")]),_vm._v(" "),_c('a',{staticClass:"navigation-popup__user-link",attrs:{"data-href":_vm.user.links.signIn},on:{"click":function($event){_vm.redirectSignIn(_vm.user.links.signIn)}}},[_vm._v(_vm._s(_vm.$t("form.sign_in")))])]):_vm._e()]):_vm._e(),_vm._v(" "),(_vm.user.isLogin)?_c('div',{staticClass:"navigation-popup__member"},[_c('div',{staticClass:"navigation-popup__member-avatar"},[_c('img',{attrs:{"src":_vm.user.profile.avatar.medium,"alt":""}})]),_vm._v(" "),_c('div',{staticClass:"navigation-popup__username"},[_c('span',[_vm._v(_vm._s(_vm.user.profile.firstname)+" ")]),_vm._v(" "),_c('span',[_vm._v(_vm._s(_vm.user.profile.lastname))])]),_vm._v(" "),_c('div',{staticClass:"navigation-popup__user-links"},[_c('a',{staticClass:"navigation-popup__user-link",attrs:{"href":_vm.user.links.profile}},[_vm._v(_vm._s(_vm.$t("login.view_profile")))]),_vm._v(" "),_c('span',{staticClass:"navigation-popup__divider"},[_vm._v("|")]),_vm._v(" "),_c('span',{on:{"click":_vm.signOut}},[_vm._v(_vm._s(_vm.$t("login.logout")))])])]):_vm._e()]),_vm._v(" "),_c('div',{staticClass:"navigation-popup__menu-scroll"},_vm._l((_vm.navigationLinks),function(item,index){return _c('a',{key:index,staticClass:"navigation-popup__menu-item",attrs:{"href":item.url}},[_vm._v("\n                "+_vm._s(item.label)+"\n            ")])})),_vm._v(" "),_c('router-link',{staticClass:"navigation-popup__menu-item",attrs:{"to":"/language-selector"}},[_vm._v("\n            "+_vm._s(_vm.$t("form.language"))+"\n            "),_c('span',{staticClass:"navigation-popup__menu-item-mark"},[_vm._v(_vm._s(_vm.selectedLanguage.displaycode)+" "),_c('span',[_vm._v(">")])])]),_vm._v(" "),_c('router-link',{staticClass:"navigation-popup__menu-item",attrs:{"to":"/currency-selector"}},[_vm._v("\n            "+_vm._s(_vm.$t("form.currency"))+"\n            "),_c('span',{staticClass:"navigation-popup__menu-item-mark"},[_vm._v(_vm._s(_vm.selectedCurrency.code)+"  "),_c('span',[_vm._v(">")])])]),_vm._v(" "),(_vm.navigation.enableM4B)?_c('div',{staticClass:"navigation-popup__switch"},[_c('p',{staticClass:"navigation-popup__switch-header"},[_vm._v(_vm._s(_vm.$t("m4b.switch_to")))]),_vm._v(" "),(_vm.navigation.isM4BPage)?_c('a',{staticClass:"navigation-popup__switch-button",attrs:{"href":_vm.navigation.homePageUrl}},[_c('span',{staticClass:"navigation-popup__switch-button-text"},[_vm._v(_vm._s(_vm.$t("general.millennium_hotels")))]),_c('span',{staticClass:"navigation-popup__switch-button-arrow"},[_vm._v(">")])]):_vm._e(),_vm._v(" "),(!_vm.navigation.isM4BPage)?_c('a',{staticClass:"navigation-popup__switch-button",attrs:{"href":_vm.navigation.M4BHomePageUrl}},[_c('span',{staticClass:"navigation-popup__switch-button-text"},[_vm._v(_vm._s(_vm.$t("m4b.millennium_for_business")))]),_c('span',{staticClass:"navigation-popup__switch-button-arrow"},[_vm._v(">")])]):_vm._e()]):_vm._e()],1)])}
var staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"chelsea-logo"},[_c('span',{staticClass:"chelsea-icon-logo-x"},[_c('a',{staticClass:"chelsea-icon-logo-url",attrs:{"href":"/"}})])])}]



/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/desktop/page.vue?vue&type=template&id=5b3ee448":
/*!******************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/desktop/page.vue?vue&type=template&id=5b3ee448 ***!
  \******************************************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div')}
var staticRenderFns = []



/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/shared/html/base.vue?vue&type=template&id=24e8b270":
/*!**********************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/shared/html/base.vue?vue&type=template&id=24e8b270 ***!
  \**********************************************************************************************************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"page-root",attrs:{"data-app-root":""}},[_c('app-install'),_vm._v(" "),_c('navigation-bar'),_vm._v(" "),_c('loading'),_vm._v(" "),_c('keep-alive',[_c('router-view')],1)],1)}
var staticRenderFns = []



/***/ }),

/***/ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js":
/*!********************************************************************!*\
  !*** ./node_modules/vue-loader/lib/runtime/componentNormalizer.js ***!
  \********************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_require__.d(__webpack_exports__, "default", function() { return normalizeComponent; });


// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).
// This module is a runtime utility for cleaner component module output and will
// be included in the final webpack user bundle.

function normalizeComponent (
  scriptExports,
  render,
  staticRenderFns,
  functionalTemplate,
  injectStyles,
  scopeId,
  moduleIdentifier, 
  shadowMode 
) {
  // Vue.extend constructor export interop
  var options = typeof scriptExports === 'function'
    ? scriptExports.options
    : scriptExports

  // render functions
  if (render) {
    options.render = render
    options.staticRenderFns = staticRenderFns
    options._compiled = true
  }

  // functional template
  if (functionalTemplate) {
    options.functional = true
  }

  // scopedId
  if (scopeId) {
    options._scopeId = 'data-v-' + scopeId
  }

  var hook
  if (moduleIdentifier) { // server build
    hook = function (context) {
      // 2.3 injection
      context =
        context || // cached call
        (this.$vnode && this.$vnode.ssrContext) || // stateful
        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional
      // 2.2 with runInNewContext: true
      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {
        context = __VUE_SSR_CONTEXT__
      }
      // inject component styles
      if (injectStyles) {
        injectStyles.call(this, context)
      }
      // register component module identifier for async chunk inferrence
      if (context && context._registeredComponents) {
        context._registeredComponents.add(moduleIdentifier)
      }
    }
    // used by ssr in case component is cached and beforeCreate
    // never gets called
    options._ssrRegister = hook
  } else if (injectStyles) {
    hook = shadowMode
      ? function () { injectStyles.call(this, this.$root.$options.shadowRoot) }
      : injectStyles
  }

  if (hook) {
    if (options.functional) {
      // for template-only hot-reload because in that case the render fn doesn't
      // go through the normalizer
      options._injectStyles = hook
      // register for functioal component in vue file
      var originalRender = options.render
      options.render = function renderWithStyleInjection (h, context) {
        hook.call(context)
        return originalRender(h, context)
      }
    } else {
      // inject component registration as beforeCreate hook
      var existing = options.beforeCreate
      options.beforeCreate = existing
        ? [].concat(existing, hook)
        : [hook]
    }
  }

  return {
    exports: scriptExports,
    options: options
  }
}


/***/ }),

/***/ "./node_modules/vue-router/dist/vue-router.esm.js":
/*!********************************************************!*\
  !*** ./node_modules/vue-router/dist/vue-router.esm.js ***!
  \********************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
  * vue-router v3.0.1
  * (c) 2017 Evan You
  * @license MIT
  */


function assert (condition, message) {
  if (!condition) {
    throw new Error(("[vue-router] " + message))
  }
}

function warn (condition, message) {
  if (false) {}
}

function isError (err) {
  return Object.prototype.toString.call(err).indexOf('Error') > -1
}

var View = {
  name: 'router-view',
  functional: true,
  props: {
    name: {
      type: String,
      default: 'default'
    }
  },
  render: function render (_, ref) {
    var props = ref.props;
    var children = ref.children;
    var parent = ref.parent;
    var data = ref.data;

    data.routerView = true;

    // directly use parent context's createElement() function
    // so that components rendered by router-view can resolve named slots
    var h = parent.$createElement;
    var name = props.name;
    var route = parent.$route;
    var cache = parent._routerViewCache || (parent._routerViewCache = {});

    // determine current view depth, also check to see if the tree
    // has been toggled inactive but kept-alive.
    var depth = 0;
    var inactive = false;
    while (parent && parent._routerRoot !== parent) {
      if (parent.$vnode && parent.$vnode.data.routerView) {
        depth++;
      }
      if (parent._inactive) {
        inactive = true;
      }
      parent = parent.$parent;
    }
    data.routerViewDepth = depth;

    // render previous view if the tree is inactive and kept-alive
    if (inactive) {
      return h(cache[name], data, children)
    }

    var matched = route.matched[depth];
    // render empty node if no matched route
    if (!matched) {
      cache[name] = null;
      return h()
    }

    var component = cache[name] = matched.components[name];

    // attach instance registration hook
    // this will be called in the instance's injected lifecycle hooks
    data.registerRouteInstance = function (vm, val) {
      // val could be undefined for unregistration
      var current = matched.instances[name];
      if (
        (val && current !== vm) ||
        (!val && current === vm)
      ) {
        matched.instances[name] = val;
      }
    }

    // also register instance in prepatch hook
    // in case the same component instance is reused across different routes
    ;(data.hook || (data.hook = {})).prepatch = function (_, vnode) {
      matched.instances[name] = vnode.componentInstance;
    };

    // resolve props
    var propsToPass = data.props = resolveProps(route, matched.props && matched.props[name]);
    if (propsToPass) {
      // clone to prevent mutation
      propsToPass = data.props = extend({}, propsToPass);
      // pass non-declared props as attrs
      var attrs = data.attrs = data.attrs || {};
      for (var key in propsToPass) {
        if (!component.props || !(key in component.props)) {
          attrs[key] = propsToPass[key];
          delete propsToPass[key];
        }
      }
    }

    return h(component, data, children)
  }
};

function resolveProps (route, config) {
  switch (typeof config) {
    case 'undefined':
      return
    case 'object':
      return config
    case 'function':
      return config(route)
    case 'boolean':
      return config ? route.params : undefined
    default:
      if (false) {}
  }
}

function extend (to, from) {
  for (var key in from) {
    to[key] = from[key];
  }
  return to
}



var encodeReserveRE = /[!'()*]/g;
var encodeReserveReplacer = function (c) { return '%' + c.charCodeAt(0).toString(16); };
var commaRE = /%2C/g;

// fixed encodeURIComponent which is more conformant to RFC3986:
// - escapes [!'()*]
// - preserve commas
var encode = function (str) { return encodeURIComponent(str)
  .replace(encodeReserveRE, encodeReserveReplacer)
  .replace(commaRE, ','); };

var decode = decodeURIComponent;

function resolveQuery (
  query,
  extraQuery,
  _parseQuery
) {
  if ( extraQuery === void 0 ) extraQuery = {};

  var parse = _parseQuery || parseQuery;
  var parsedQuery;
  try {
    parsedQuery = parse(query || '');
  } catch (e) {
    "production" !== 'production' && warn(false, e.message);
    parsedQuery = {};
  }
  for (var key in extraQuery) {
    parsedQuery[key] = extraQuery[key];
  }
  return parsedQuery
}

function parseQuery (query) {
  var res = {};

  query = query.trim().replace(/^(\?|#|&)/, '');

  if (!query) {
    return res
  }

  query.split('&').forEach(function (param) {
    var parts = param.replace(/\+/g, ' ').split('=');
    var key = decode(parts.shift());
    var val = parts.length > 0
      ? decode(parts.join('='))
      : null;

    if (res[key] === undefined) {
      res[key] = val;
    } else if (Array.isArray(res[key])) {
      res[key].push(val);
    } else {
      res[key] = [res[key], val];
    }
  });

  return res
}

function stringifyQuery (obj) {
  var res = obj ? Object.keys(obj).map(function (key) {
    var val = obj[key];

    if (val === undefined) {
      return ''
    }

    if (val === null) {
      return encode(key)
    }

    if (Array.isArray(val)) {
      var result = [];
      val.forEach(function (val2) {
        if (val2 === undefined) {
          return
        }
        if (val2 === null) {
          result.push(encode(key));
        } else {
          result.push(encode(key) + '=' + encode(val2));
        }
      });
      return result.join('&')
    }

    return encode(key) + '=' + encode(val)
  }).filter(function (x) { return x.length > 0; }).join('&') : null;
  return res ? ("?" + res) : ''
}




var trailingSlashRE = /\/?$/;

function createRoute (
  record,
  location,
  redirectedFrom,
  router
) {
  var stringifyQuery$$1 = router && router.options.stringifyQuery;

  var query = location.query || {};
  try {
    query = clone(query);
  } catch (e) {}

  var route = {
    name: location.name || (record && record.name),
    meta: (record && record.meta) || {},
    path: location.path || '/',
    hash: location.hash || '',
    query: query,
    params: location.params || {},
    fullPath: getFullPath(location, stringifyQuery$$1),
    matched: record ? formatMatch(record) : []
  };
  if (redirectedFrom) {
    route.redirectedFrom = getFullPath(redirectedFrom, stringifyQuery$$1);
  }
  return Object.freeze(route)
}

function clone (value) {
  if (Array.isArray(value)) {
    return value.map(clone)
  } else if (value && typeof value === 'object') {
    var res = {};
    for (var key in value) {
      res[key] = clone(value[key]);
    }
    return res
  } else {
    return value
  }
}

// the starting route that represents the initial state
var START = createRoute(null, {
  path: '/'
});

function formatMatch (record) {
  var res = [];
  while (record) {
    res.unshift(record);
    record = record.parent;
  }
  return res
}

function getFullPath (
  ref,
  _stringifyQuery
) {
  var path = ref.path;
  var query = ref.query; if ( query === void 0 ) query = {};
  var hash = ref.hash; if ( hash === void 0 ) hash = '';

  var stringify = _stringifyQuery || stringifyQuery;
  return (path || '/') + stringify(query) + hash
}

function isSameRoute (a, b) {
  if (b === START) {
    return a === b
  } else if (!b) {
    return false
  } else if (a.path && b.path) {
    return (
      a.path.replace(trailingSlashRE, '') === b.path.replace(trailingSlashRE, '') &&
      a.hash === b.hash &&
      isObjectEqual(a.query, b.query)
    )
  } else if (a.name && b.name) {
    return (
      a.name === b.name &&
      a.hash === b.hash &&
      isObjectEqual(a.query, b.query) &&
      isObjectEqual(a.params, b.params)
    )
  } else {
    return false
  }
}

function isObjectEqual (a, b) {
  if ( a === void 0 ) a = {};
  if ( b === void 0 ) b = {};

  // handle null value #1566
  if (!a || !b) { return a === b }
  var aKeys = Object.keys(a);
  var bKeys = Object.keys(b);
  if (aKeys.length !== bKeys.length) {
    return false
  }
  return aKeys.every(function (key) {
    var aVal = a[key];
    var bVal = b[key];
    // check nested equality
    if (typeof aVal === 'object' && typeof bVal === 'object') {
      return isObjectEqual(aVal, bVal)
    }
    return String(aVal) === String(bVal)
  })
}

function isIncludedRoute (current, target) {
  return (
    current.path.replace(trailingSlashRE, '/').indexOf(
      target.path.replace(trailingSlashRE, '/')
    ) === 0 &&
    (!target.hash || current.hash === target.hash) &&
    queryIncludes(current.query, target.query)
  )
}

function queryIncludes (current, target) {
  for (var key in target) {
    if (!(key in current)) {
      return false
    }
  }
  return true
}



// work around weird flow bug
var toTypes = [String, Object];
var eventTypes = [String, Array];

var Link = {
  name: 'router-link',
  props: {
    to: {
      type: toTypes,
      required: true
    },
    tag: {
      type: String,
      default: 'a'
    },
    exact: Boolean,
    append: Boolean,
    replace: Boolean,
    activeClass: String,
    exactActiveClass: String,
    event: {
      type: eventTypes,
      default: 'click'
    }
  },
  render: function render (h) {
    var this$1 = this;

    var router = this.$router;
    var current = this.$route;
    var ref = router.resolve(this.to, current, this.append);
    var location = ref.location;
    var route = ref.route;
    var href = ref.href;

    var classes = {};
    var globalActiveClass = router.options.linkActiveClass;
    var globalExactActiveClass = router.options.linkExactActiveClass;
    // Support global empty active class
    var activeClassFallback = globalActiveClass == null
            ? 'router-link-active'
            : globalActiveClass;
    var exactActiveClassFallback = globalExactActiveClass == null
            ? 'router-link-exact-active'
            : globalExactActiveClass;
    var activeClass = this.activeClass == null
            ? activeClassFallback
            : this.activeClass;
    var exactActiveClass = this.exactActiveClass == null
            ? exactActiveClassFallback
            : this.exactActiveClass;
    var compareTarget = location.path
      ? createRoute(null, location, null, router)
      : route;

    classes[exactActiveClass] = isSameRoute(current, compareTarget);
    classes[activeClass] = this.exact
      ? classes[exactActiveClass]
      : isIncludedRoute(current, compareTarget);

    var handler = function (e) {
      if (guardEvent(e)) {
        if (this$1.replace) {
          router.replace(location);
        } else {
          router.push(location);
        }
      }
    };

    var on = { click: guardEvent };
    if (Array.isArray(this.event)) {
      this.event.forEach(function (e) { on[e] = handler; });
    } else {
      on[this.event] = handler;
    }

    var data = {
      class: classes
    };

    if (this.tag === 'a') {
      data.on = on;
      data.attrs = { href: href };
    } else {
      // find the first <a> child and apply listener and href
      var a = findAnchor(this.$slots.default);
      if (a) {
        // in case the <a> is a static node
        a.isStatic = false;
        var extend = _Vue.util.extend;
        var aData = a.data = extend({}, a.data);
        aData.on = on;
        var aAttrs = a.data.attrs = extend({}, a.data.attrs);
        aAttrs.href = href;
      } else {
        // doesn't have <a> child, apply listener to self
        data.on = on;
      }
    }

    return h(this.tag, data, this.$slots.default)
  }
};

function guardEvent (e) {
  // don't redirect with control keys
  if (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) { return }
  // don't redirect when preventDefault called
  if (e.defaultPrevented) { return }
  // don't redirect on right click
  if (e.button !== undefined && e.button !== 0) { return }
  // don't redirect if `target="_blank"`
  if (e.currentTarget && e.currentTarget.getAttribute) {
    var target = e.currentTarget.getAttribute('target');
    if (/\b_blank\b/i.test(target)) { return }
  }
  // this may be a Weex event which doesn't have this method
  if (e.preventDefault) {
    e.preventDefault();
  }
  return true
}

function findAnchor (children) {
  if (children) {
    var child;
    for (var i = 0; i < children.length; i++) {
      child = children[i];
      if (child.tag === 'a') {
        return child
      }
      if (child.children && (child = findAnchor(child.children))) {
        return child
      }
    }
  }
}

var _Vue;

function install (Vue) {
  if (install.installed && _Vue === Vue) { return }
  install.installed = true;

  _Vue = Vue;

  var isDef = function (v) { return v !== undefined; };

  var registerInstance = function (vm, callVal) {
    var i = vm.$options._parentVnode;
    if (isDef(i) && isDef(i = i.data) && isDef(i = i.registerRouteInstance)) {
      i(vm, callVal);
    }
  };

  Vue.mixin({
    beforeCreate: function beforeCreate () {
      if (isDef(this.$options.router)) {
        this._routerRoot = this;
        this._router = this.$options.router;
        this._router.init(this);
        Vue.util.defineReactive(this, '_route', this._router.history.current);
      } else {
        this._routerRoot = (this.$parent && this.$parent._routerRoot) || this;
      }
      registerInstance(this, this);
    },
    destroyed: function destroyed () {
      registerInstance(this);
    }
  });

  Object.defineProperty(Vue.prototype, '$router', {
    get: function get () { return this._routerRoot._router }
  });

  Object.defineProperty(Vue.prototype, '$route', {
    get: function get () { return this._routerRoot._route }
  });

  Vue.component('router-view', View);
  Vue.component('router-link', Link);

  var strats = Vue.config.optionMergeStrategies;
  // use the same hook merging strategy for route hooks
  strats.beforeRouteEnter = strats.beforeRouteLeave = strats.beforeRouteUpdate = strats.created;
}



var inBrowser = typeof window !== 'undefined';



function resolvePath (
  relative,
  base,
  append
) {
  var firstChar = relative.charAt(0);
  if (firstChar === '/') {
    return relative
  }

  if (firstChar === '?' || firstChar === '#') {
    return base + relative
  }

  var stack = base.split('/');

  // remove trailing segment if:
  // - not appending
  // - appending to trailing slash (last segment is empty)
  if (!append || !stack[stack.length - 1]) {
    stack.pop();
  }

  // resolve relative path
  var segments = relative.replace(/^\//, '').split('/');
  for (var i = 0; i < segments.length; i++) {
    var segment = segments[i];
    if (segment === '..') {
      stack.pop();
    } else if (segment !== '.') {
      stack.push(segment);
    }
  }

  // ensure leading slash
  if (stack[0] !== '') {
    stack.unshift('');
  }

  return stack.join('/')
}

function parsePath (path) {
  var hash = '';
  var query = '';

  var hashIndex = path.indexOf('#');
  if (hashIndex >= 0) {
    hash = path.slice(hashIndex);
    path = path.slice(0, hashIndex);
  }

  var queryIndex = path.indexOf('?');
  if (queryIndex >= 0) {
    query = path.slice(queryIndex + 1);
    path = path.slice(0, queryIndex);
  }

  return {
    path: path,
    query: query,
    hash: hash
  }
}

function cleanPath (path) {
  return path.replace(/\/\//g, '/')
}

var isarray = Array.isArray || function (arr) {
  return Object.prototype.toString.call(arr) == '[object Array]';
};

/**
 * Expose `pathToRegexp`.
 */
var pathToRegexp_1 = pathToRegexp;
var parse_1 = parse;
var compile_1 = compile;
var tokensToFunction_1 = tokensToFunction;
var tokensToRegExp_1 = tokensToRegExp;

/**
 * The main path matching regexp utility.
 *
 * @type {RegExp}
 */
var PATH_REGEXP = new RegExp([
  // Match escaped characters that would otherwise appear in future matches.
  // This allows the user to escape special characters that won't transform.
  '(\\\\.)',
  // Match Express-style parameters and un-named parameters with a prefix
  // and optional suffixes. Matches appear as:
  //
  // "/:test(\\d+)?" => ["/", "test", "\d+", undefined, "?", undefined]
  // "/route(\\d+)"  => [undefined, undefined, undefined, "\d+", undefined, undefined]
  // "/*"            => ["/", undefined, undefined, undefined, undefined, "*"]
  '([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))'
].join('|'), 'g');

/**
 * Parse a string for the raw tokens.
 *
 * @param  {string}  str
 * @param  {Object=} options
 * @return {!Array}
 */
function parse (str, options) {
  var tokens = [];
  var key = 0;
  var index = 0;
  var path = '';
  var defaultDelimiter = options && options.delimiter || '/';
  var res;

  while ((res = PATH_REGEXP.exec(str)) != null) {
    var m = res[0];
    var escaped = res[1];
    var offset = res.index;
    path += str.slice(index, offset);
    index = offset + m.length;

    // Ignore already escaped sequences.
    if (escaped) {
      path += escaped[1];
      continue
    }

    var next = str[index];
    var prefix = res[2];
    var name = res[3];
    var capture = res[4];
    var group = res[5];
    var modifier = res[6];
    var asterisk = res[7];

    // Push the current path onto the tokens.
    if (path) {
      tokens.push(path);
      path = '';
    }

    var partial = prefix != null && next != null && next !== prefix;
    var repeat = modifier === '+' || modifier === '*';
    var optional = modifier === '?' || modifier === '*';
    var delimiter = res[2] || defaultDelimiter;
    var pattern = capture || group;

    tokens.push({
      name: name || key++,
      prefix: prefix || '',
      delimiter: delimiter,
      optional: optional,
      repeat: repeat,
      partial: partial,
      asterisk: !!asterisk,
      pattern: pattern ? escapeGroup(pattern) : (asterisk ? '.*' : '[^' + escapeString(delimiter) + ']+?')
    });
  }

  // Match any characters still remaining.
  if (index < str.length) {
    path += str.substr(index);
  }

  // If the path exists, push it onto the end.
  if (path) {
    tokens.push(path);
  }

  return tokens
}

/**
 * Compile a string to a template function for the path.
 *
 * @param  {string}             str
 * @param  {Object=}            options
 * @return {!function(Object=, Object=)}
 */
function compile (str, options) {
  return tokensToFunction(parse(str, options))
}

/**
 * Prettier encoding of URI path segments.
 *
 * @param  {string}
 * @return {string}
 */
function encodeURIComponentPretty (str) {
  return encodeURI(str).replace(/[\/?#]/g, function (c) {
    return '%' + c.charCodeAt(0).toString(16).toUpperCase()
  })
}

/**
 * Encode the asterisk parameter. Similar to `pretty`, but allows slashes.
 *
 * @param  {string}
 * @return {string}
 */
function encodeAsterisk (str) {
  return encodeURI(str).replace(/[?#]/g, function (c) {
    return '%' + c.charCodeAt(0).toString(16).toUpperCase()
  })
}

/**
 * Expose a method for transforming tokens into the path function.
 */
function tokensToFunction (tokens) {
  // Compile all the tokens into regexps.
  var matches = new Array(tokens.length);

  // Compile all the patterns before compilation.
  for (var i = 0; i < tokens.length; i++) {
    if (typeof tokens[i] === 'object') {
      matches[i] = new RegExp('^(?:' + tokens[i].pattern + ')$');
    }
  }

  return function (obj, opts) {
    var path = '';
    var data = obj || {};
    var options = opts || {};
    var encode = options.pretty ? encodeURIComponentPretty : encodeURIComponent;

    for (var i = 0; i < tokens.length; i++) {
      var token = tokens[i];

      if (typeof token === 'string') {
        path += token;

        continue
      }

      var value = data[token.name];
      var segment;

      if (value == null) {
        if (token.optional) {
          // Prepend partial segment prefixes.
          if (token.partial) {
            path += token.prefix;
          }

          continue
        } else {
          throw new TypeError('Expected "' + token.name + '" to be defined')
        }
      }

      if (isarray(value)) {
        if (!token.repeat) {
          throw new TypeError('Expected "' + token.name + '" to not repeat, but received `' + JSON.stringify(value) + '`')
        }

        if (value.length === 0) {
          if (token.optional) {
            continue
          } else {
            throw new TypeError('Expected "' + token.name + '" to not be empty')
          }
        }

        for (var j = 0; j < value.length; j++) {
          segment = encode(value[j]);

          if (!matches[i].test(segment)) {
            throw new TypeError('Expected all "' + token.name + '" to match "' + token.pattern + '", but received `' + JSON.stringify(segment) + '`')
          }

          path += (j === 0 ? token.prefix : token.delimiter) + segment;
        }

        continue
      }

      segment = token.asterisk ? encodeAsterisk(value) : encode(value);

      if (!matches[i].test(segment)) {
        throw new TypeError('Expected "' + token.name + '" to match "' + token.pattern + '", but received "' + segment + '"')
      }

      path += token.prefix + segment;
    }

    return path
  }
}

/**
 * Escape a regular expression string.
 *
 * @param  {string} str
 * @return {string}
 */
function escapeString (str) {
  return str.replace(/([.+*?=^!:${}()[\]|\/\\])/g, '\\$1')
}

/**
 * Escape the capturing group by escaping special characters and meaning.
 *
 * @param  {string} group
 * @return {string}
 */
function escapeGroup (group) {
  return group.replace(/([=!:$\/()])/g, '\\$1')
}

/**
 * Attach the keys as a property of the regexp.
 *
 * @param  {!RegExp} re
 * @param  {Array}   keys
 * @return {!RegExp}
 */
function attachKeys (re, keys) {
  re.keys = keys;
  return re
}

/**
 * Get the flags for a regexp from the options.
 *
 * @param  {Object} options
 * @return {string}
 */
function flags (options) {
  return options.sensitive ? '' : 'i'
}

/**
 * Pull out keys from a regexp.
 *
 * @param  {!RegExp} path
 * @param  {!Array}  keys
 * @return {!RegExp}
 */
function regexpToRegexp (path, keys) {
  // Use a negative lookahead to match only capturing groups.
  var groups = path.source.match(/\((?!\?)/g);

  if (groups) {
    for (var i = 0; i < groups.length; i++) {
      keys.push({
        name: i,
        prefix: null,
        delimiter: null,
        optional: false,
        repeat: false,
        partial: false,
        asterisk: false,
        pattern: null
      });
    }
  }

  return attachKeys(path, keys)
}

/**
 * Transform an array into a regexp.
 *
 * @param  {!Array}  path
 * @param  {Array}   keys
 * @param  {!Object} options
 * @return {!RegExp}
 */
function arrayToRegexp (path, keys, options) {
  var parts = [];

  for (var i = 0; i < path.length; i++) {
    parts.push(pathToRegexp(path[i], keys, options).source);
  }

  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options));

  return attachKeys(regexp, keys)
}

/**
 * Create a path regexp from string input.
 *
 * @param  {string}  path
 * @param  {!Array}  keys
 * @param  {!Object} options
 * @return {!RegExp}
 */
function stringToRegexp (path, keys, options) {
  return tokensToRegExp(parse(path, options), keys, options)
}

/**
 * Expose a function for taking tokens and returning a RegExp.
 *
 * @param  {!Array}          tokens
 * @param  {(Array|Object)=} keys
 * @param  {Object=}         options
 * @return {!RegExp}
 */
function tokensToRegExp (tokens, keys, options) {
  if (!isarray(keys)) {
    options = /** @type {!Object} */ (keys || options);
    keys = [];
  }

  options = options || {};

  var strict = options.strict;
  var end = options.end !== false;
  var route = '';

  // Iterate over the tokens and create our regexp string.
  for (var i = 0; i < tokens.length; i++) {
    var token = tokens[i];

    if (typeof token === 'string') {
      route += escapeString(token);
    } else {
      var prefix = escapeString(token.prefix);
      var capture = '(?:' + token.pattern + ')';

      keys.push(token);

      if (token.repeat) {
        capture += '(?:' + prefix + capture + ')*';
      }

      if (token.optional) {
        if (!token.partial) {
          capture = '(?:' + prefix + '(' + capture + '))?';
        } else {
          capture = prefix + '(' + capture + ')?';
        }
      } else {
        capture = prefix + '(' + capture + ')';
      }

      route += capture;
    }
  }

  var delimiter = escapeString(options.delimiter || '/');
  var endsWithDelimiter = route.slice(-delimiter.length) === delimiter;

  // In non-strict mode we allow a slash at the end of match. If the path to
  // match already ends with a slash, we remove it for consistency. The slash
  // is valid at the end of a path match, not in the middle. This is important
  // in non-ending mode, where "/test/" shouldn't match "/test//route".
  if (!strict) {
    route = (endsWithDelimiter ? route.slice(0, -delimiter.length) : route) + '(?:' + delimiter + '(?=$))?';
  }

  if (end) {
    route += '$';
  } else {
    // In non-ending mode, we need the capturing groups to match as much as
    // possible by using a positive lookahead to the end or next path segment.
    route += strict && endsWithDelimiter ? '' : '(?=' + delimiter + '|$)';
  }

  return attachKeys(new RegExp('^' + route, flags(options)), keys)
}

/**
 * Normalize the given path string, returning a regular expression.
 *
 * An empty array can be passed in for the keys, which will hold the
 * placeholder key descriptions. For example, using `/user/:id`, `keys` will
 * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.
 *
 * @param  {(string|RegExp|Array)} path
 * @param  {(Array|Object)=}       keys
 * @param  {Object=}               options
 * @return {!RegExp}
 */
function pathToRegexp (path, keys, options) {
  if (!isarray(keys)) {
    options = /** @type {!Object} */ (keys || options);
    keys = [];
  }

  options = options || {};

  if (path instanceof RegExp) {
    return regexpToRegexp(path, /** @type {!Array} */ (keys))
  }

  if (isarray(path)) {
    return arrayToRegexp(/** @type {!Array} */ (path), /** @type {!Array} */ (keys), options)
  }

  return stringToRegexp(/** @type {string} */ (path), /** @type {!Array} */ (keys), options)
}

pathToRegexp_1.parse = parse_1;
pathToRegexp_1.compile = compile_1;
pathToRegexp_1.tokensToFunction = tokensToFunction_1;
pathToRegexp_1.tokensToRegExp = tokensToRegExp_1;



// $flow-disable-line
var regexpCompileCache = Object.create(null);

function fillParams (
  path,
  params,
  routeMsg
) {
  try {
    var filler =
      regexpCompileCache[path] ||
      (regexpCompileCache[path] = pathToRegexp_1.compile(path));
    return filler(params || {}, { pretty: true })
  } catch (e) {
    if (false) {}
    return ''
  }
}



function createRouteMap (
  routes,
  oldPathList,
  oldPathMap,
  oldNameMap
) {
  // the path list is used to control path matching priority
  var pathList = oldPathList || [];
  // $flow-disable-line
  var pathMap = oldPathMap || Object.create(null);
  // $flow-disable-line
  var nameMap = oldNameMap || Object.create(null);

  routes.forEach(function (route) {
    addRouteRecord(pathList, pathMap, nameMap, route);
  });

  // ensure wildcard routes are always at the end
  for (var i = 0, l = pathList.length; i < l; i++) {
    if (pathList[i] === '*') {
      pathList.push(pathList.splice(i, 1)[0]);
      l--;
      i--;
    }
  }

  return {
    pathList: pathList,
    pathMap: pathMap,
    nameMap: nameMap
  }
}

function addRouteRecord (
  pathList,
  pathMap,
  nameMap,
  route,
  parent,
  matchAs
) {
  var path = route.path;
  var name = route.name;
  if (false) {}

  var pathToRegexpOptions = route.pathToRegexpOptions || {};
  var normalizedPath = normalizePath(
    path,
    parent,
    pathToRegexpOptions.strict
  );

  if (typeof route.caseSensitive === 'boolean') {
    pathToRegexpOptions.sensitive = route.caseSensitive;
  }

  var record = {
    path: normalizedPath,
    regex: compileRouteRegex(normalizedPath, pathToRegexpOptions),
    components: route.components || { default: route.component },
    instances: {},
    name: name,
    parent: parent,
    matchAs: matchAs,
    redirect: route.redirect,
    beforeEnter: route.beforeEnter,
    meta: route.meta || {},
    props: route.props == null
      ? {}
      : route.components
        ? route.props
        : { default: route.props }
  };

  if (route.children) {
    // Warn if route is named, does not redirect and has a default child route.
    // If users navigate to this route by name, the default child will
    // not be rendered (GH Issue #629)
    if (false) {}
    route.children.forEach(function (child) {
      var childMatchAs = matchAs
        ? cleanPath((matchAs + "/" + (child.path)))
        : undefined;
      addRouteRecord(pathList, pathMap, nameMap, child, record, childMatchAs);
    });
  }

  if (route.alias !== undefined) {
    var aliases = Array.isArray(route.alias)
      ? route.alias
      : [route.alias];

    aliases.forEach(function (alias) {
      var aliasRoute = {
        path: alias,
        children: route.children
      };
      addRouteRecord(
        pathList,
        pathMap,
        nameMap,
        aliasRoute,
        parent,
        record.path || '/' // matchAs
      );
    });
  }

  if (!pathMap[record.path]) {
    pathList.push(record.path);
    pathMap[record.path] = record;
  }

  if (name) {
    if (!nameMap[name]) {
      nameMap[name] = record;
    } else if (false) {}
  }
}

function compileRouteRegex (path, pathToRegexpOptions) {
  var regex = pathToRegexp_1(path, [], pathToRegexpOptions);
  if (false) { var keys; }
  return regex
}

function normalizePath (path, parent, strict) {
  if (!strict) { path = path.replace(/\/$/, ''); }
  if (path[0] === '/') { return path }
  if (parent == null) { return path }
  return cleanPath(((parent.path) + "/" + path))
}




function normalizeLocation (
  raw,
  current,
  append,
  router
) {
  var next = typeof raw === 'string' ? { path: raw } : raw;
  // named target
  if (next.name || next._normalized) {
    return next
  }

  // relative params
  if (!next.path && next.params && current) {
    next = assign({}, next);
    next._normalized = true;
    var params = assign(assign({}, current.params), next.params);
    if (current.name) {
      next.name = current.name;
      next.params = params;
    } else if (current.matched.length) {
      var rawPath = current.matched[current.matched.length - 1].path;
      next.path = fillParams(rawPath, params, ("path " + (current.path)));
    } else if (false) {}
    return next
  }

  var parsedPath = parsePath(next.path || '');
  var basePath = (current && current.path) || '/';
  var path = parsedPath.path
    ? resolvePath(parsedPath.path, basePath, append || next.append)
    : basePath;

  var query = resolveQuery(
    parsedPath.query,
    next.query,
    router && router.options.parseQuery
  );

  var hash = next.hash || parsedPath.hash;
  if (hash && hash.charAt(0) !== '#') {
    hash = "#" + hash;
  }

  return {
    _normalized: true,
    path: path,
    query: query,
    hash: hash
  }
}

function assign (a, b) {
  for (var key in b) {
    a[key] = b[key];
  }
  return a
}




function createMatcher (
  routes,
  router
) {
  var ref = createRouteMap(routes);
  var pathList = ref.pathList;
  var pathMap = ref.pathMap;
  var nameMap = ref.nameMap;

  function addRoutes (routes) {
    createRouteMap(routes, pathList, pathMap, nameMap);
  }

  function match (
    raw,
    currentRoute,
    redirectedFrom
  ) {
    var location = normalizeLocation(raw, currentRoute, false, router);
    var name = location.name;

    if (name) {
      var record = nameMap[name];
      if (false) {}
      if (!record) { return _createRoute(null, location) }
      var paramNames = record.regex.keys
        .filter(function (key) { return !key.optional; })
        .map(function (key) { return key.name; });

      if (typeof location.params !== 'object') {
        location.params = {};
      }

      if (currentRoute && typeof currentRoute.params === 'object') {
        for (var key in currentRoute.params) {
          if (!(key in location.params) && paramNames.indexOf(key) > -1) {
            location.params[key] = currentRoute.params[key];
          }
        }
      }

      if (record) {
        location.path = fillParams(record.path, location.params, ("named route \"" + name + "\""));
        return _createRoute(record, location, redirectedFrom)
      }
    } else if (location.path) {
      location.params = {};
      for (var i = 0; i < pathList.length; i++) {
        var path = pathList[i];
        var record$1 = pathMap[path];
        if (matchRoute(record$1.regex, location.path, location.params)) {
          return _createRoute(record$1, location, redirectedFrom)
        }
      }
    }
    // no match
    return _createRoute(null, location)
  }

  function redirect (
    record,
    location
  ) {
    var originalRedirect = record.redirect;
    var redirect = typeof originalRedirect === 'function'
        ? originalRedirect(createRoute(record, location, null, router))
        : originalRedirect;

    if (typeof redirect === 'string') {
      redirect = { path: redirect };
    }

    if (!redirect || typeof redirect !== 'object') {
      if (false) {}
      return _createRoute(null, location)
    }

    var re = redirect;
    var name = re.name;
    var path = re.path;
    var query = location.query;
    var hash = location.hash;
    var params = location.params;
    query = re.hasOwnProperty('query') ? re.query : query;
    hash = re.hasOwnProperty('hash') ? re.hash : hash;
    params = re.hasOwnProperty('params') ? re.params : params;

    if (name) {
      // resolved named direct
      var targetRecord = nameMap[name];
      if (false) {}
      return match({
        _normalized: true,
        name: name,
        query: query,
        hash: hash,
        params: params
      }, undefined, location)
    } else if (path) {
      // 1. resolve relative redirect
      var rawPath = resolveRecordPath(path, record);
      // 2. resolve params
      var resolvedPath = fillParams(rawPath, params, ("redirect route with path \"" + rawPath + "\""));
      // 3. rematch with existing query and hash
      return match({
        _normalized: true,
        path: resolvedPath,
        query: query,
        hash: hash
      }, undefined, location)
    } else {
      if (false) {}
      return _createRoute(null, location)
    }
  }

  function alias (
    record,
    location,
    matchAs
  ) {
    var aliasedPath = fillParams(matchAs, location.params, ("aliased route with path \"" + matchAs + "\""));
    var aliasedMatch = match({
      _normalized: true,
      path: aliasedPath
    });
    if (aliasedMatch) {
      var matched = aliasedMatch.matched;
      var aliasedRecord = matched[matched.length - 1];
      location.params = aliasedMatch.params;
      return _createRoute(aliasedRecord, location)
    }
    return _createRoute(null, location)
  }

  function _createRoute (
    record,
    location,
    redirectedFrom
  ) {
    if (record && record.redirect) {
      return redirect(record, redirectedFrom || location)
    }
    if (record && record.matchAs) {
      return alias(record, location, record.matchAs)
    }
    return createRoute(record, location, redirectedFrom, router)
  }

  return {
    match: match,
    addRoutes: addRoutes
  }
}

function matchRoute (
  regex,
  path,
  params
) {
  var m = path.match(regex);

  if (!m) {
    return false
  } else if (!params) {
    return true
  }

  for (var i = 1, len = m.length; i < len; ++i) {
    var key = regex.keys[i - 1];
    var val = typeof m[i] === 'string' ? decodeURIComponent(m[i]) : m[i];
    if (key) {
      params[key.name] = val;
    }
  }

  return true
}

function resolveRecordPath (path, record) {
  return resolvePath(path, record.parent ? record.parent.path : '/', true)
}




var positionStore = Object.create(null);

function setupScroll () {
  // Fix for #1585 for Firefox
  window.history.replaceState({ key: getStateKey() }, '');
  window.addEventListener('popstate', function (e) {
    saveScrollPosition();
    if (e.state && e.state.key) {
      setStateKey(e.state.key);
    }
  });
}

function handleScroll (
  router,
  to,
  from,
  isPop
) {
  if (!router.app) {
    return
  }

  var behavior = router.options.scrollBehavior;
  if (!behavior) {
    return
  }

  if (false) {}

  // wait until re-render finishes before scrolling
  router.app.$nextTick(function () {
    var position = getScrollPosition();
    var shouldScroll = behavior(to, from, isPop ? position : null);

    if (!shouldScroll) {
      return
    }

    if (typeof shouldScroll.then === 'function') {
      shouldScroll.then(function (shouldScroll) {
        scrollToPosition((shouldScroll), position);
      }).catch(function (err) {
        if (false) {}
      });
    } else {
      scrollToPosition(shouldScroll, position);
    }
  });
}

function saveScrollPosition () {
  var key = getStateKey();
  if (key) {
    positionStore[key] = {
      x: window.pageXOffset,
      y: window.pageYOffset
    };
  }
}

function getScrollPosition () {
  var key = getStateKey();
  if (key) {
    return positionStore[key]
  }
}

function getElementPosition (el, offset) {
  var docEl = document.documentElement;
  var docRect = docEl.getBoundingClientRect();
  var elRect = el.getBoundingClientRect();
  return {
    x: elRect.left - docRect.left - offset.x,
    y: elRect.top - docRect.top - offset.y
  }
}

function isValidPosition (obj) {
  return isNumber(obj.x) || isNumber(obj.y)
}

function normalizePosition (obj) {
  return {
    x: isNumber(obj.x) ? obj.x : window.pageXOffset,
    y: isNumber(obj.y) ? obj.y : window.pageYOffset
  }
}

function normalizeOffset (obj) {
  return {
    x: isNumber(obj.x) ? obj.x : 0,
    y: isNumber(obj.y) ? obj.y : 0
  }
}

function isNumber (v) {
  return typeof v === 'number'
}

function scrollToPosition (shouldScroll, position) {
  var isObject = typeof shouldScroll === 'object';
  if (isObject && typeof shouldScroll.selector === 'string') {
    var el = document.querySelector(shouldScroll.selector);
    if (el) {
      var offset = shouldScroll.offset && typeof shouldScroll.offset === 'object' ? shouldScroll.offset : {};
      offset = normalizeOffset(offset);
      position = getElementPosition(el, offset);
    } else if (isValidPosition(shouldScroll)) {
      position = normalizePosition(shouldScroll);
    }
  } else if (isObject && isValidPosition(shouldScroll)) {
    position = normalizePosition(shouldScroll);
  }

  if (position) {
    window.scrollTo(position.x, position.y);
  }
}



var supportsPushState = inBrowser && (function () {
  var ua = window.navigator.userAgent;

  if (
    (ua.indexOf('Android 2.') !== -1 || ua.indexOf('Android 4.0') !== -1) &&
    ua.indexOf('Mobile Safari') !== -1 &&
    ua.indexOf('Chrome') === -1 &&
    ua.indexOf('Windows Phone') === -1
  ) {
    return false
  }

  return window.history && 'pushState' in window.history
})();

// use User Timing api (if present) for more accurate key precision
var Time = inBrowser && window.performance && window.performance.now
  ? window.performance
  : Date;

var _key = genKey();

function genKey () {
  return Time.now().toFixed(3)
}

function getStateKey () {
  return _key
}

function setStateKey (key) {
  _key = key;
}

function pushState (url, replace) {
  saveScrollPosition();
  // try...catch the pushState call to get around Safari
  // DOM Exception 18 where it limits to 100 pushState calls
  var history = window.history;
  try {
    if (replace) {
      history.replaceState({ key: _key }, '', url);
    } else {
      _key = genKey();
      history.pushState({ key: _key }, '', url);
    }
  } catch (e) {
    window.location[replace ? 'replace' : 'assign'](url);
  }
}

function replaceState (url) {
  pushState(url, true);
}



function runQueue (queue, fn, cb) {
  var step = function (index) {
    if (index >= queue.length) {
      cb();
    } else {
      if (queue[index]) {
        fn(queue[index], function () {
          step(index + 1);
        });
      } else {
        step(index + 1);
      }
    }
  };
  step(0);
}



function resolveAsyncComponents (matched) {
  return function (to, from, next) {
    var hasAsync = false;
    var pending = 0;
    var error = null;

    flatMapComponents(matched, function (def, _, match, key) {
      // if it's a function and doesn't have cid attached,
      // assume it's an async component resolve function.
      // we are not using Vue's default async resolving mechanism because
      // we want to halt the navigation until the incoming component has been
      // resolved.
      if (typeof def === 'function' && def.cid === undefined) {
        hasAsync = true;
        pending++;

        var resolve = once(function (resolvedDef) {
          if (isESModule(resolvedDef)) {
            resolvedDef = resolvedDef.default;
          }
          // save resolved on async factory in case it's used elsewhere
          def.resolved = typeof resolvedDef === 'function'
            ? resolvedDef
            : _Vue.extend(resolvedDef);
          match.components[key] = resolvedDef;
          pending--;
          if (pending <= 0) {
            next();
          }
        });

        var reject = once(function (reason) {
          var msg = "Failed to resolve async component " + key + ": " + reason;
          "production" !== 'production' && warn(false, msg);
          if (!error) {
            error = isError(reason)
              ? reason
              : new Error(msg);
            next(error);
          }
        });

        var res;
        try {
          res = def(resolve, reject);
        } catch (e) {
          reject(e);
        }
        if (res) {
          if (typeof res.then === 'function') {
            res.then(resolve, reject);
          } else {
            // new syntax in Vue 2.3
            var comp = res.component;
            if (comp && typeof comp.then === 'function') {
              comp.then(resolve, reject);
            }
          }
        }
      }
    });

    if (!hasAsync) { next(); }
  }
}

function flatMapComponents (
  matched,
  fn
) {
  return flatten(matched.map(function (m) {
    return Object.keys(m.components).map(function (key) { return fn(
      m.components[key],
      m.instances[key],
      m, key
    ); })
  }))
}

function flatten (arr) {
  return Array.prototype.concat.apply([], arr)
}

var hasSymbol =
  typeof Symbol === 'function' &&
  typeof Symbol.toStringTag === 'symbol';

function isESModule (obj) {
  return obj.__esModule || (hasSymbol && obj[Symbol.toStringTag] === 'Module')
}

// in Webpack 2, require.ensure now also returns a Promise
// so the resolve/reject functions may get called an extra time
// if the user uses an arrow function shorthand that happens to
// return that Promise.
function once (fn) {
  var called = false;
  return function () {
    var args = [], len = arguments.length;
    while ( len-- ) args[ len ] = arguments[ len ];

    if (called) { return }
    called = true;
    return fn.apply(this, args)
  }
}



var History = function History (router, base) {
  this.router = router;
  this.base = normalizeBase(base);
  // start with a route object that stands for "nowhere"
  this.current = START;
  this.pending = null;
  this.ready = false;
  this.readyCbs = [];
  this.readyErrorCbs = [];
  this.errorCbs = [];
};

History.prototype.listen = function listen (cb) {
  this.cb = cb;
};

History.prototype.onReady = function onReady (cb, errorCb) {
  if (this.ready) {
    cb();
  } else {
    this.readyCbs.push(cb);
    if (errorCb) {
      this.readyErrorCbs.push(errorCb);
    }
  }
};

History.prototype.onError = function onError (errorCb) {
  this.errorCbs.push(errorCb);
};

History.prototype.transitionTo = function transitionTo (location, onComplete, onAbort) {
    var this$1 = this;

  var route = this.router.match(location, this.current);
  this.confirmTransition(route, function () {
    this$1.updateRoute(route);
    onComplete && onComplete(route);
    this$1.ensureURL();

    // fire ready cbs once
    if (!this$1.ready) {
      this$1.ready = true;
      this$1.readyCbs.forEach(function (cb) { cb(route); });
    }
  }, function (err) {
    if (onAbort) {
      onAbort(err);
    }
    if (err && !this$1.ready) {
      this$1.ready = true;
      this$1.readyErrorCbs.forEach(function (cb) { cb(err); });
    }
  });
};

History.prototype.confirmTransition = function confirmTransition (route, onComplete, onAbort) {
    var this$1 = this;

  var current = this.current;
  var abort = function (err) {
    if (isError(err)) {
      if (this$1.errorCbs.length) {
        this$1.errorCbs.forEach(function (cb) { cb(err); });
      } else {
        warn(false, 'uncaught error during route navigation:');
        console.error(err);
      }
    }
    onAbort && onAbort(err);
  };
  if (
    isSameRoute(route, current) &&
    // in the case the route map has been dynamically appended to
    route.matched.length === current.matched.length
  ) {
    this.ensureURL();
    return abort()
  }

  var ref = resolveQueue(this.current.matched, route.matched);
    var updated = ref.updated;
    var deactivated = ref.deactivated;
    var activated = ref.activated;

  var queue = [].concat(
    // in-component leave guards
    extractLeaveGuards(deactivated),
    // global before hooks
    this.router.beforeHooks,
    // in-component update hooks
    extractUpdateHooks(updated),
    // in-config enter guards
    activated.map(function (m) { return m.beforeEnter; }),
    // async components
    resolveAsyncComponents(activated)
  );

  this.pending = route;
  var iterator = function (hook, next) {
    if (this$1.pending !== route) {
      return abort()
    }
    try {
      hook(route, current, function (to) {
        if (to === false || isError(to)) {
          // next(false) -> abort navigation, ensure current URL
          this$1.ensureURL(true);
          abort(to);
        } else if (
          typeof to === 'string' ||
          (typeof to === 'object' && (
            typeof to.path === 'string' ||
            typeof to.name === 'string'
          ))
        ) {
          // next('/') or next({ path: '/' }) -> redirect
          abort();
          if (typeof to === 'object' && to.replace) {
            this$1.replace(to);
          } else {
            this$1.push(to);
          }
        } else {
          // confirm transition and pass on the value
          next(to);
        }
      });
    } catch (e) {
      abort(e);
    }
  };

  runQueue(queue, iterator, function () {
    var postEnterCbs = [];
    var isValid = function () { return this$1.current === route; };
    // wait until async components are resolved before
    // extracting in-component enter guards
    var enterGuards = extractEnterGuards(activated, postEnterCbs, isValid);
    var queue = enterGuards.concat(this$1.router.resolveHooks);
    runQueue(queue, iterator, function () {
      if (this$1.pending !== route) {
        return abort()
      }
      this$1.pending = null;
      onComplete(route);
      if (this$1.router.app) {
        this$1.router.app.$nextTick(function () {
          postEnterCbs.forEach(function (cb) { cb(); });
        });
      }
    });
  });
};

History.prototype.updateRoute = function updateRoute (route) {
  var prev = this.current;
  this.current = route;
  this.cb && this.cb(route);
  this.router.afterHooks.forEach(function (hook) {
    hook && hook(route, prev);
  });
};

function normalizeBase (base) {
  if (!base) {
    if (inBrowser) {
      // respect <base> tag
      var baseEl = document.querySelector('base');
      base = (baseEl && baseEl.getAttribute('href')) || '/';
      // strip full URL origin
      base = base.replace(/^https?:\/\/[^\/]+/, '');
    } else {
      base = '/';
    }
  }
  // make sure there's the starting slash
  if (base.charAt(0) !== '/') {
    base = '/' + base;
  }
  // remove trailing slash
  return base.replace(/\/$/, '')
}

function resolveQueue (
  current,
  next
) {
  var i;
  var max = Math.max(current.length, next.length);
  for (i = 0; i < max; i++) {
    if (current[i] !== next[i]) {
      break
    }
  }
  return {
    updated: next.slice(0, i),
    activated: next.slice(i),
    deactivated: current.slice(i)
  }
}

function extractGuards (
  records,
  name,
  bind,
  reverse
) {
  var guards = flatMapComponents(records, function (def, instance, match, key) {
    var guard = extractGuard(def, name);
    if (guard) {
      return Array.isArray(guard)
        ? guard.map(function (guard) { return bind(guard, instance, match, key); })
        : bind(guard, instance, match, key)
    }
  });
  return flatten(reverse ? guards.reverse() : guards)
}

function extractGuard (
  def,
  key
) {
  if (typeof def !== 'function') {
    // extend now so that global mixins are applied.
    def = _Vue.extend(def);
  }
  return def.options[key]
}

function extractLeaveGuards (deactivated) {
  return extractGuards(deactivated, 'beforeRouteLeave', bindGuard, true)
}

function extractUpdateHooks (updated) {
  return extractGuards(updated, 'beforeRouteUpdate', bindGuard)
}

function bindGuard (guard, instance) {
  if (instance) {
    return function boundRouteGuard () {
      return guard.apply(instance, arguments)
    }
  }
}

function extractEnterGuards (
  activated,
  cbs,
  isValid
) {
  return extractGuards(activated, 'beforeRouteEnter', function (guard, _, match, key) {
    return bindEnterGuard(guard, match, key, cbs, isValid)
  })
}

function bindEnterGuard (
  guard,
  match,
  key,
  cbs,
  isValid
) {
  return function routeEnterGuard (to, from, next) {
    return guard(to, from, function (cb) {
      next(cb);
      if (typeof cb === 'function') {
        cbs.push(function () {
          // #750
          // if a router-view is wrapped with an out-in transition,
          // the instance may not have been registered at this time.
          // we will need to poll for registration until current route
          // is no longer valid.
          poll(cb, match.instances, key, isValid);
        });
      }
    })
  }
}

function poll (
  cb, // somehow flow cannot infer this is a function
  instances,
  key,
  isValid
) {
  if (instances[key]) {
    cb(instances[key]);
  } else if (isValid()) {
    setTimeout(function () {
      poll(cb, instances, key, isValid);
    }, 16);
  }
}




var HTML5History = (function (History$$1) {
  function HTML5History (router, base) {
    var this$1 = this;

    History$$1.call(this, router, base);

    var expectScroll = router.options.scrollBehavior;

    if (expectScroll) {
      setupScroll();
    }

    var initLocation = getLocation(this.base);
    window.addEventListener('popstate', function (e) {
      var current = this$1.current;

      // Avoiding first `popstate` event dispatched in some browsers but first
      // history route not updated since async guard at the same time.
      var location = getLocation(this$1.base);
      if (this$1.current === START && location === initLocation) {
        return
      }

      this$1.transitionTo(location, function (route) {
        if (expectScroll) {
          handleScroll(router, route, current, true);
        }
      });
    });
  }

  if ( History$$1 ) HTML5History.__proto__ = History$$1;
  HTML5History.prototype = Object.create( History$$1 && History$$1.prototype );
  HTML5History.prototype.constructor = HTML5History;

  HTML5History.prototype.go = function go (n) {
    window.history.go(n);
  };

  HTML5History.prototype.push = function push (location, onComplete, onAbort) {
    var this$1 = this;

    var ref = this;
    var fromRoute = ref.current;
    this.transitionTo(location, function (route) {
      pushState(cleanPath(this$1.base + route.fullPath));
      handleScroll(this$1.router, route, fromRoute, false);
      onComplete && onComplete(route);
    }, onAbort);
  };

  HTML5History.prototype.replace = function replace (location, onComplete, onAbort) {
    var this$1 = this;

    var ref = this;
    var fromRoute = ref.current;
    this.transitionTo(location, function (route) {
      replaceState(cleanPath(this$1.base + route.fullPath));
      handleScroll(this$1.router, route, fromRoute, false);
      onComplete && onComplete(route);
    }, onAbort);
  };

  HTML5History.prototype.ensureURL = function ensureURL (push) {
    if (getLocation(this.base) !== this.current.fullPath) {
      var current = cleanPath(this.base + this.current.fullPath);
      push ? pushState(current) : replaceState(current);
    }
  };

  HTML5History.prototype.getCurrentLocation = function getCurrentLocation () {
    return getLocation(this.base)
  };

  return HTML5History;
}(History));

function getLocation (base) {
  var path = window.location.pathname;
  if (base && path.indexOf(base) === 0) {
    path = path.slice(base.length);
  }
  return (path || '/') + window.location.search + window.location.hash
}




var HashHistory = (function (History$$1) {
  function HashHistory (router, base, fallback) {
    History$$1.call(this, router, base);
    // check history fallback deeplinking
    if (fallback && checkFallback(this.base)) {
      return
    }
    ensureSlash();
  }

  if ( History$$1 ) HashHistory.__proto__ = History$$1;
  HashHistory.prototype = Object.create( History$$1 && History$$1.prototype );
  HashHistory.prototype.constructor = HashHistory;

  // this is delayed until the app mounts
  // to avoid the hashchange listener being fired too early
  HashHistory.prototype.setupListeners = function setupListeners () {
    var this$1 = this;

    var router = this.router;
    var expectScroll = router.options.scrollBehavior;
    var supportsScroll = supportsPushState && expectScroll;

    if (supportsScroll) {
      setupScroll();
    }

    window.addEventListener(supportsPushState ? 'popstate' : 'hashchange', function () {
      var current = this$1.current;
      if (!ensureSlash()) {
        return
      }
      this$1.transitionTo(getHash(), function (route) {
        if (supportsScroll) {
          handleScroll(this$1.router, route, current, true);
        }
        if (!supportsPushState) {
          replaceHash(route.fullPath);
        }
      });
    });
  };

  HashHistory.prototype.push = function push (location, onComplete, onAbort) {
    var this$1 = this;

    var ref = this;
    var fromRoute = ref.current;
    this.transitionTo(location, function (route) {
      pushHash(route.fullPath);
      handleScroll(this$1.router, route, fromRoute, false);
      onComplete && onComplete(route);
    }, onAbort);
  };

  HashHistory.prototype.replace = function replace (location, onComplete, onAbort) {
    var this$1 = this;

    var ref = this;
    var fromRoute = ref.current;
    this.transitionTo(location, function (route) {
      replaceHash(route.fullPath);
      handleScroll(this$1.router, route, fromRoute, false);
      onComplete && onComplete(route);
    }, onAbort);
  };

  HashHistory.prototype.go = function go (n) {
    window.history.go(n);
  };

  HashHistory.prototype.ensureURL = function ensureURL (push) {
    var current = this.current.fullPath;
    if (getHash() !== current) {
      push ? pushHash(current) : replaceHash(current);
    }
  };

  HashHistory.prototype.getCurrentLocation = function getCurrentLocation () {
    return getHash()
  };

  return HashHistory;
}(History));

function checkFallback (base) {
  var location = getLocation(base);
  if (!/^\/#/.test(location)) {
    window.location.replace(
      cleanPath(base + '/#' + location)
    );
    return true
  }
}

function ensureSlash () {
  var path = getHash();
  if (path.charAt(0) === '/') {
    return true
  }
  replaceHash('/' + path);
  return false
}

function getHash () {
  // We can't use window.location.hash here because it's not
  // consistent across browsers - Firefox will pre-decode it!
  var href = window.location.href;
  var index = href.indexOf('#');
  return index === -1 ? '' : href.slice(index + 1)
}

function getUrl (path) {
  var href = window.location.href;
  var i = href.indexOf('#');
  var base = i >= 0 ? href.slice(0, i) : href;
  return (base + "#" + path)
}

function pushHash (path) {
  if (supportsPushState) {
    pushState(getUrl(path));
  } else {
    window.location.hash = path;
  }
}

function replaceHash (path) {
  if (supportsPushState) {
    replaceState(getUrl(path));
  } else {
    window.location.replace(getUrl(path));
  }
}




var AbstractHistory = (function (History$$1) {
  function AbstractHistory (router, base) {
    History$$1.call(this, router, base);
    this.stack = [];
    this.index = -1;
  }

  if ( History$$1 ) AbstractHistory.__proto__ = History$$1;
  AbstractHistory.prototype = Object.create( History$$1 && History$$1.prototype );
  AbstractHistory.prototype.constructor = AbstractHistory;

  AbstractHistory.prototype.push = function push (location, onComplete, onAbort) {
    var this$1 = this;

    this.transitionTo(location, function (route) {
      this$1.stack = this$1.stack.slice(0, this$1.index + 1).concat(route);
      this$1.index++;
      onComplete && onComplete(route);
    }, onAbort);
  };

  AbstractHistory.prototype.replace = function replace (location, onComplete, onAbort) {
    var this$1 = this;

    this.transitionTo(location, function (route) {
      this$1.stack = this$1.stack.slice(0, this$1.index).concat(route);
      onComplete && onComplete(route);
    }, onAbort);
  };

  AbstractHistory.prototype.go = function go (n) {
    var this$1 = this;

    var targetIndex = this.index + n;
    if (targetIndex < 0 || targetIndex >= this.stack.length) {
      return
    }
    var route = this.stack[targetIndex];
    this.confirmTransition(route, function () {
      this$1.index = targetIndex;
      this$1.updateRoute(route);
    });
  };

  AbstractHistory.prototype.getCurrentLocation = function getCurrentLocation () {
    var current = this.stack[this.stack.length - 1];
    return current ? current.fullPath : '/'
  };

  AbstractHistory.prototype.ensureURL = function ensureURL () {
    // noop
  };

  return AbstractHistory;
}(History));



var VueRouter = function VueRouter (options) {
  if ( options === void 0 ) options = {};

  this.app = null;
  this.apps = [];
  this.options = options;
  this.beforeHooks = [];
  this.resolveHooks = [];
  this.afterHooks = [];
  this.matcher = createMatcher(options.routes || [], this);

  var mode = options.mode || 'hash';
  this.fallback = mode === 'history' && !supportsPushState && options.fallback !== false;
  if (this.fallback) {
    mode = 'hash';
  }
  if (!inBrowser) {
    mode = 'abstract';
  }
  this.mode = mode;

  switch (mode) {
    case 'history':
      this.history = new HTML5History(this, options.base);
      break
    case 'hash':
      this.history = new HashHistory(this, options.base, this.fallback);
      break
    case 'abstract':
      this.history = new AbstractHistory(this, options.base);
      break
    default:
      if (false) {}
  }
};

var prototypeAccessors = { currentRoute: { configurable: true } };

VueRouter.prototype.match = function match (
  raw,
  current,
  redirectedFrom
) {
  return this.matcher.match(raw, current, redirectedFrom)
};

prototypeAccessors.currentRoute.get = function () {
  return this.history && this.history.current
};

VueRouter.prototype.init = function init (app ) {
    var this$1 = this;

  "production" !== 'production' && assert(
    install.installed,
    "not installed. Make sure to call `Vue.use(VueRouter)` " +
    "before creating root instance."
  );

  this.apps.push(app);

  // main app already initialized.
  if (this.app) {
    return
  }

  this.app = app;

  var history = this.history;

  if (history instanceof HTML5History) {
    history.transitionTo(history.getCurrentLocation());
  } else if (history instanceof HashHistory) {
    var setupHashListener = function () {
      history.setupListeners();
    };
    history.transitionTo(
      history.getCurrentLocation(),
      setupHashListener,
      setupHashListener
    );
  }

  history.listen(function (route) {
    this$1.apps.forEach(function (app) {
      app._route = route;
    });
  });
};

VueRouter.prototype.beforeEach = function beforeEach (fn) {
  return registerHook(this.beforeHooks, fn)
};

VueRouter.prototype.beforeResolve = function beforeResolve (fn) {
  return registerHook(this.resolveHooks, fn)
};

VueRouter.prototype.afterEach = function afterEach (fn) {
  return registerHook(this.afterHooks, fn)
};

VueRouter.prototype.onReady = function onReady (cb, errorCb) {
  this.history.onReady(cb, errorCb);
};

VueRouter.prototype.onError = function onError (errorCb) {
  this.history.onError(errorCb);
};

VueRouter.prototype.push = function push (location, onComplete, onAbort) {
  this.history.push(location, onComplete, onAbort);
};

VueRouter.prototype.replace = function replace (location, onComplete, onAbort) {
  this.history.replace(location, onComplete, onAbort);
};

VueRouter.prototype.go = function go (n) {
  this.history.go(n);
};

VueRouter.prototype.back = function back () {
  this.go(-1);
};

VueRouter.prototype.forward = function forward () {
  this.go(1);
};

VueRouter.prototype.getMatchedComponents = function getMatchedComponents (to) {
  var route = to
    ? to.matched
      ? to
      : this.resolve(to).route
    : this.currentRoute;
  if (!route) {
    return []
  }
  return [].concat.apply([], route.matched.map(function (m) {
    return Object.keys(m.components).map(function (key) {
      return m.components[key]
    })
  }))
};

VueRouter.prototype.resolve = function resolve (
  to,
  current,
  append
) {
  var location = normalizeLocation(
    to,
    current || this.history.current,
    append,
    this
  );
  var route = this.match(location, current);
  var fullPath = route.redirectedFrom || route.fullPath;
  var base = this.history.base;
  var href = createHref(base, fullPath, this.mode);
  return {
    location: location,
    route: route,
    href: href,
    // for backwards compat
    normalizedTo: location,
    resolved: route
  }
};

VueRouter.prototype.addRoutes = function addRoutes (routes) {
  this.matcher.addRoutes(routes);
  if (this.history.current !== START) {
    this.history.transitionTo(this.history.getCurrentLocation());
  }
};

Object.defineProperties( VueRouter.prototype, prototypeAccessors );

function registerHook (list, fn) {
  list.push(fn);
  return function () {
    var i = list.indexOf(fn);
    if (i > -1) { list.splice(i, 1); }
  }
}

function createHref (base, fullPath, mode) {
  var path = mode === 'hash' ? '#' + fullPath : fullPath;
  return base ? cleanPath(base + '/' + path) : path
}

VueRouter.install = install;
VueRouter.version = '3.0.1';

if (inBrowser && window.Vue) {
  window.Vue.use(VueRouter);
}

 __webpack_exports__["default"] = (VueRouter);


/***/ }),

/***/ "./node_modules/vue/dist/vue.runtime.esm.js":
/*!**************************************************!*\
  !*** ./node_modules/vue/dist/vue.runtime.esm.js ***!
  \**************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
(function(global, setImmediate) {/*!
 * Vue.js v2.5.17
 * (c) 2014-2018 Evan You
 * Released under the MIT License.
 */


var emptyObject = Object.freeze({});

// these helpers produces better vm code in JS engines due to their
// explicitness and function inlining
function isUndef (v) {
  return v === undefined || v === null
}

function isDef (v) {
  return v !== undefined && v !== null
}

function isTrue (v) {
  return v === true
}

function isFalse (v) {
  return v === false
}

/**
 * Check if value is primitive
 */
function isPrimitive (value) {
  return (
    typeof value === 'string' ||
    typeof value === 'number' ||
    // $flow-disable-line
    typeof value === 'symbol' ||
    typeof value === 'boolean'
  )
}

/**
 * Quick object check - this is primarily used to tell
 * Objects from primitive values when we know the value
 * is a JSON-compliant type.
 */
function isObject (obj) {
  return obj !== null && typeof obj === 'object'
}

/**
 * Get the raw type string of a value e.g. [object Object]
 */
var _toString = Object.prototype.toString;

function toRawType (value) {
  return _toString.call(value).slice(8, -1)
}

/**
 * Strict object type check. Only returns true
 * for plain JavaScript objects.
 */
function isPlainObject (obj) {
  return _toString.call(obj) === '[object Object]'
}

function isRegExp (v) {
  return _toString.call(v) === '[object RegExp]'
}

/**
 * Check if val is a valid array index.
 */
function isValidArrayIndex (val) {
  var n = parseFloat(String(val));
  return n >= 0 && Math.floor(n) === n && isFinite(val)
}

/**
 * Convert a value to a string that is actually rendered.
 */
function toString (val) {
  return val == null
    ? ''
    : typeof val === 'object'
      ? JSON.stringify(val, null, 2)
      : String(val)
}

/**
 * Convert a input value to a number for persistence.
 * If the conversion fails, return original string.
 */
function toNumber (val) {
  var n = parseFloat(val);
  return isNaN(n) ? val : n
}

/**
 * Make a map and return a function for checking if a key
 * is in that map.
 */
function makeMap (
  str,
  expectsLowerCase
) {
  var map = Object.create(null);
  var list = str.split(',');
  for (var i = 0; i < list.length; i++) {
    map[list[i]] = true;
  }
  return expectsLowerCase
    ? function (val) { return map[val.toLowerCase()]; }
    : function (val) { return map[val]; }
}

/**
 * Check if a tag is a built-in tag.
 */
var isBuiltInTag = makeMap('slot,component', true);

/**
 * Check if a attribute is a reserved attribute.
 */
var isReservedAttribute = makeMap('key,ref,slot,slot-scope,is');

/**
 * Remove an item from an array
 */
function remove (arr, item) {
  if (arr.length) {
    var index = arr.indexOf(item);
    if (index > -1) {
      return arr.splice(index, 1)
    }
  }
}

/**
 * Check whether the object has the property.
 */
var hasOwnProperty = Object.prototype.hasOwnProperty;
function hasOwn (obj, key) {
  return hasOwnProperty.call(obj, key)
}

/**
 * Create a cached version of a pure function.
 */
function cached (fn) {
  var cache = Object.create(null);
  return (function cachedFn (str) {
    var hit = cache[str];
    return hit || (cache[str] = fn(str))
  })
}

/**
 * Camelize a hyphen-delimited string.
 */
var camelizeRE = /-(\w)/g;
var camelize = cached(function (str) {
  return str.replace(camelizeRE, function (_, c) { return c ? c.toUpperCase() : ''; })
});

/**
 * Capitalize a string.
 */
var capitalize = cached(function (str) {
  return str.charAt(0).toUpperCase() + str.slice(1)
});

/**
 * Hyphenate a camelCase string.
 */
var hyphenateRE = /\B([A-Z])/g;
var hyphenate = cached(function (str) {
  return str.replace(hyphenateRE, '-$1').toLowerCase()
});

/**
 * Simple bind polyfill for environments that do not support it... e.g.
 * PhantomJS 1.x. Technically we don't need this anymore since native bind is
 * now more performant in most browsers, but removing it would be breaking for
 * code that was able to run in PhantomJS 1.x, so this must be kept for
 * backwards compatibility.
 */


function polyfillBind (fn, ctx) {
  function boundFn (a) {
    var l = arguments.length;
    return l
      ? l > 1
        ? fn.apply(ctx, arguments)
        : fn.call(ctx, a)
      : fn.call(ctx)
  }

  boundFn._length = fn.length;
  return boundFn
}

function nativeBind (fn, ctx) {
  return fn.bind(ctx)
}

var bind = Function.prototype.bind
  ? nativeBind
  : polyfillBind;

/**
 * Convert an Array-like object to a real Array.
 */
function toArray (list, start) {
  start = start || 0;
  var i = list.length - start;
  var ret = new Array(i);
  while (i--) {
    ret[i] = list[i + start];
  }
  return ret
}

/**
 * Mix properties into target object.
 */
function extend (to, _from) {
  for (var key in _from) {
    to[key] = _from[key];
  }
  return to
}

/**
 * Merge an Array of Objects into a single Object.
 */
function toObject (arr) {
  var res = {};
  for (var i = 0; i < arr.length; i++) {
    if (arr[i]) {
      extend(res, arr[i]);
    }
  }
  return res
}

/**
 * Perform no operation.
 * Stubbing args to make Flow happy without leaving useless transpiled code
 * with ...rest (https://flow.org/blog/2017/05/07/Strict-Function-Call-Arity/)
 */
function noop (a, b, c) {}

/**
 * Always return false.
 */
var no = function (a, b, c) { return false; };

/**
 * Return same value
 */
var identity = function (_) { return _; };

/**
 * Generate a static keys string from compiler modules.
 */


/**
 * Check if two values are loosely equal - that is,
 * if they are plain objects, do they have the same shape?
 */
function looseEqual (a, b) {
  if (a === b) { return true }
  var isObjectA = isObject(a);
  var isObjectB = isObject(b);
  if (isObjectA && isObjectB) {
    try {
      var isArrayA = Array.isArray(a);
      var isArrayB = Array.isArray(b);
      if (isArrayA && isArrayB) {
        return a.length === b.length && a.every(function (e, i) {
          return looseEqual(e, b[i])
        })
      } else if (!isArrayA && !isArrayB) {
        var keysA = Object.keys(a);
        var keysB = Object.keys(b);
        return keysA.length === keysB.length && keysA.every(function (key) {
          return looseEqual(a[key], b[key])
        })
      } else {
        
        return false
      }
    } catch (e) {
      
      return false
    }
  } else if (!isObjectA && !isObjectB) {
    return String(a) === String(b)
  } else {
    return false
  }
}

function looseIndexOf (arr, val) {
  for (var i = 0; i < arr.length; i++) {
    if (looseEqual(arr[i], val)) { return i }
  }
  return -1
}

/**
 * Ensure a function is called only once.
 */
function once (fn) {
  var called = false;
  return function () {
    if (!called) {
      called = true;
      fn.apply(this, arguments);
    }
  }
}

var SSR_ATTR = 'data-server-rendered';

var ASSET_TYPES = [
  'component',
  'directive',
  'filter'
];

var LIFECYCLE_HOOKS = [
  'beforeCreate',
  'created',
  'beforeMount',
  'mounted',
  'beforeUpdate',
  'updated',
  'beforeDestroy',
  'destroyed',
  'activated',
  'deactivated',
  'errorCaptured'
];



var config = ({
  /**
   * Option merge strategies (used in core/util/options)
   */
  // $flow-disable-line
  optionMergeStrategies: Object.create(null),

  /**
   * Whether to suppress warnings.
   */
  silent: false,

  /**
   * Show production mode tip message on boot?
   */
  productionTip: "production" !== 'production',

  /**
   * Whether to enable devtools
   */
  devtools: "production" !== 'production',

  /**
   * Whether to record perf
   */
  performance: false,

  /**
   * Error handler for watcher errors
   */
  errorHandler: null,

  /**
   * Warn handler for watcher warns
   */
  warnHandler: null,

  /**
   * Ignore certain custom elements
   */
  ignoredElements: [],

  /**
   * Custom user key aliases for v-on
   */
  // $flow-disable-line
  keyCodes: Object.create(null),

  /**
   * Check if a tag is reserved so that it cannot be registered as a
   * component. This is platform-dependent and may be overwritten.
   */
  isReservedTag: no,

  /**
   * Check if an attribute is reserved so that it cannot be used as a component
   * prop. This is platform-dependent and may be overwritten.
   */
  isReservedAttr: no,

  /**
   * Check if a tag is an unknown element.
   * Platform-dependent.
   */
  isUnknownElement: no,

  /**
   * Get the namespace of an element
   */
  getTagNamespace: noop,

  /**
   * Parse the real tag name for the specific platform.
   */
  parsePlatformTagName: identity,

  /**
   * Check if an attribute must be bound using property, e.g. value
   * Platform-dependent.
   */
  mustUseProp: no,

  /**
   * Exposed for legacy reasons
   */
  _lifecycleHooks: LIFECYCLE_HOOKS
})



/**
 * Check if a string starts with $ or _
 */
function isReserved (str) {
  var c = (str + '').charCodeAt(0);
  return c === 0x24 || c === 0x5F
}

/**
 * Define a property.
 */
function def (obj, key, val, enumerable) {
  Object.defineProperty(obj, key, {
    value: val,
    enumerable: !!enumerable,
    writable: true,
    configurable: true
  });
}

/**
 * Parse simple path.
 */
var bailRE = /[^\w.$]/;
function parsePath (path) {
  if (bailRE.test(path)) {
    return
  }
  var segments = path.split('.');
  return function (obj) {
    for (var i = 0; i < segments.length; i++) {
      if (!obj) { return }
      obj = obj[segments[i]];
    }
    return obj
  }
}



// can we use __proto__?
var hasProto = '__proto__' in {};

// Browser environment sniffing
var inBrowser = typeof window !== 'undefined';
var inWeex = typeof WXEnvironment !== 'undefined' && !!WXEnvironment.platform;
var weexPlatform = inWeex && WXEnvironment.platform.toLowerCase();
var UA = inBrowser && window.navigator.userAgent.toLowerCase();
var isIE = UA && /msie|trident/.test(UA);
var isIE9 = UA && UA.indexOf('msie 9.0') > 0;
var isEdge = UA && UA.indexOf('edge/') > 0;
var isAndroid = (UA && UA.indexOf('android') > 0) || (weexPlatform === 'android');
var isIOS = (UA && /iphone|ipad|ipod|ios/.test(UA)) || (weexPlatform === 'ios');
var isChrome = UA && /chrome\/\d+/.test(UA) && !isEdge;

// Firefox has a "watch" function on Object.prototype...
var nativeWatch = ({}).watch;

var supportsPassive = false;
if (inBrowser) {
  try {
    var opts = {};
    Object.defineProperty(opts, 'passive', ({
      get: function get () {
        
        supportsPassive = true;
      }
    })); // https://github.com/facebook/flow/issues/285
    window.addEventListener('test-passive', null, opts);
  } catch (e) {}
}

// this needs to be lazy-evaled because vue may be required before
// vue-server-renderer can set VUE_ENV
var _isServer;
var isServerRendering = function () {
  if (_isServer === undefined) {
    
    if (!inBrowser && !inWeex && typeof global !== 'undefined') {
      // detect presence of vue-server-renderer and avoid
      // Webpack shimming the process
      _isServer = global['process'].env.VUE_ENV === 'server';
    } else {
      _isServer = false;
    }
  }
  return _isServer
};

// detect devtools
var devtools = inBrowser && window.__VUE_DEVTOOLS_GLOBAL_HOOK__;


function isNative (Ctor) {
  return typeof Ctor === 'function' && /native code/.test(Ctor.toString())
}

var hasSymbol =
  typeof Symbol !== 'undefined' && isNative(Symbol) &&
  typeof Reflect !== 'undefined' && isNative(Reflect.ownKeys);

var _Set;
 // $flow-disable-line
if (typeof Set !== 'undefined' && isNative(Set)) {
  // use native Set when available.
  _Set = Set;
} else {
  // a non-standard Set polyfill that only works with primitive keys.
  _Set = (function () {
    function Set () {
      this.set = Object.create(null);
    }
    Set.prototype.has = function has (key) {
      return this.set[key] === true
    };
    Set.prototype.add = function add (key) {
      this.set[key] = true;
    };
    Set.prototype.clear = function clear () {
      this.set = Object.create(null);
    };

    return Set;
  }());
}



var warn = noop;
var tip = noop;
var generateComponentTrace = (noop); // work around flow check
var formatComponentName = (noop);

if (false) { var repeat, classify, classifyRE, hasConsole; }




var uid = 0;

/**
 * A dep is an observable that can have multiple
 * directives subscribing to it.
 */
var Dep = function Dep () {
  this.id = uid++;
  this.subs = [];
};

Dep.prototype.addSub = function addSub (sub) {
  this.subs.push(sub);
};

Dep.prototype.removeSub = function removeSub (sub) {
  remove(this.subs, sub);
};

Dep.prototype.depend = function depend () {
  if (Dep.target) {
    Dep.target.addDep(this);
  }
};

Dep.prototype.notify = function notify () {
  // stabilize the subscriber list first
  var subs = this.subs.slice();
  for (var i = 0, l = subs.length; i < l; i++) {
    subs[i].update();
  }
};

// the current target watcher being evaluated.
// this is globally unique because there could be only one
// watcher being evaluated at any time.
Dep.target = null;
var targetStack = [];

function pushTarget (_target) {
  if (Dep.target) { targetStack.push(Dep.target); }
  Dep.target = _target;
}

function popTarget () {
  Dep.target = targetStack.pop();
}



var VNode = function VNode (
  tag,
  data,
  children,
  text,
  elm,
  context,
  componentOptions,
  asyncFactory
) {
  this.tag = tag;
  this.data = data;
  this.children = children;
  this.text = text;
  this.elm = elm;
  this.ns = undefined;
  this.context = context;
  this.fnContext = undefined;
  this.fnOptions = undefined;
  this.fnScopeId = undefined;
  this.key = data && data.key;
  this.componentOptions = componentOptions;
  this.componentInstance = undefined;
  this.parent = undefined;
  this.raw = false;
  this.isStatic = false;
  this.isRootInsert = true;
  this.isComment = false;
  this.isCloned = false;
  this.isOnce = false;
  this.asyncFactory = asyncFactory;
  this.asyncMeta = undefined;
  this.isAsyncPlaceholder = false;
};

var prototypeAccessors = { child: { configurable: true } };

// DEPRECATED: alias for componentInstance for backwards compat.

prototypeAccessors.child.get = function () {
  return this.componentInstance
};

Object.defineProperties( VNode.prototype, prototypeAccessors );

var createEmptyVNode = function (text) {
  if ( text === void 0 ) text = '';

  var node = new VNode();
  node.text = text;
  node.isComment = true;
  return node
};

function createTextVNode (val) {
  return new VNode(undefined, undefined, undefined, String(val))
}

// optimized shallow clone
// used for static nodes and slot nodes because they may be reused across
// multiple renders, cloning them avoids errors when DOM manipulations rely
// on their elm reference.
function cloneVNode (vnode) {
  var cloned = new VNode(
    vnode.tag,
    vnode.data,
    vnode.children,
    vnode.text,
    vnode.elm,
    vnode.context,
    vnode.componentOptions,
    vnode.asyncFactory
  );
  cloned.ns = vnode.ns;
  cloned.isStatic = vnode.isStatic;
  cloned.key = vnode.key;
  cloned.isComment = vnode.isComment;
  cloned.fnContext = vnode.fnContext;
  cloned.fnOptions = vnode.fnOptions;
  cloned.fnScopeId = vnode.fnScopeId;
  cloned.isCloned = true;
  return cloned
}

/*
 * not type checking this file because flow doesn't play well with
 * dynamically accessing methods on Array prototype
 */

var arrayProto = Array.prototype;
var arrayMethods = Object.create(arrayProto);

var methodsToPatch = [
  'push',
  'pop',
  'shift',
  'unshift',
  'splice',
  'sort',
  'reverse'
];

/**
 * Intercept mutating methods and emit events
 */
methodsToPatch.forEach(function (method) {
  // cache original method
  var original = arrayProto[method];
  def(arrayMethods, method, function mutator () {
    var args = [], len = arguments.length;
    while ( len-- ) args[ len ] = arguments[ len ];

    var result = original.apply(this, args);
    var ob = this.__ob__;
    var inserted;
    switch (method) {
      case 'push':
      case 'unshift':
        inserted = args;
        break
      case 'splice':
        inserted = args.slice(2);
        break
    }
    if (inserted) { ob.observeArray(inserted); }
    // notify change
    ob.dep.notify();
    return result
  });
});



var arrayKeys = Object.getOwnPropertyNames(arrayMethods);

/**
 * In some cases we may want to disable observation inside a component's
 * update computation.
 */
var shouldObserve = true;

function toggleObserving (value) {
  shouldObserve = value;
}

/**
 * Observer class that is attached to each observed
 * object. Once attached, the observer converts the target
 * object's property keys into getter/setters that
 * collect dependencies and dispatch updates.
 */
var Observer = function Observer (value) {
  this.value = value;
  this.dep = new Dep();
  this.vmCount = 0;
  def(value, '__ob__', this);
  if (Array.isArray(value)) {
    var augment = hasProto
      ? protoAugment
      : copyAugment;
    augment(value, arrayMethods, arrayKeys);
    this.observeArray(value);
  } else {
    this.walk(value);
  }
};

/**
 * Walk through each property and convert them into
 * getter/setters. This method should only be called when
 * value type is Object.
 */
Observer.prototype.walk = function walk (obj) {
  var keys = Object.keys(obj);
  for (var i = 0; i < keys.length; i++) {
    defineReactive(obj, keys[i]);
  }
};

/**
 * Observe a list of Array items.
 */
Observer.prototype.observeArray = function observeArray (items) {
  for (var i = 0, l = items.length; i < l; i++) {
    observe(items[i]);
  }
};

// helpers

/**
 * Augment an target Object or Array by intercepting
 * the prototype chain using __proto__
 */
function protoAugment (target, src, keys) {
  
  target.__proto__ = src;
  
}

/**
 * Augment an target Object or Array by defining
 * hidden properties.
 */

function copyAugment (target, src, keys) {
  for (var i = 0, l = keys.length; i < l; i++) {
    var key = keys[i];
    def(target, key, src[key]);
  }
}

/**
 * Attempt to create an observer instance for a value,
 * returns the new observer if successfully observed,
 * or the existing observer if the value already has one.
 */
function observe (value, asRootData) {
  if (!isObject(value) || value instanceof VNode) {
    return
  }
  var ob;
  if (hasOwn(value, '__ob__') && value.__ob__ instanceof Observer) {
    ob = value.__ob__;
  } else if (
    shouldObserve &&
    !isServerRendering() &&
    (Array.isArray(value) || isPlainObject(value)) &&
    Object.isExtensible(value) &&
    !value._isVue
  ) {
    ob = new Observer(value);
  }
  if (asRootData && ob) {
    ob.vmCount++;
  }
  return ob
}

/**
 * Define a reactive property on an Object.
 */
function defineReactive (
  obj,
  key,
  val,
  customSetter,
  shallow
) {
  var dep = new Dep();

  var property = Object.getOwnPropertyDescriptor(obj, key);
  if (property && property.configurable === false) {
    return
  }

  // cater for pre-defined getter/setters
  var getter = property && property.get;
  if (!getter && arguments.length === 2) {
    val = obj[key];
  }
  var setter = property && property.set;

  var childOb = !shallow && observe(val);
  Object.defineProperty(obj, key, {
    enumerable: true,
    configurable: true,
    get: function reactiveGetter () {
      var value = getter ? getter.call(obj) : val;
      if (Dep.target) {
        dep.depend();
        if (childOb) {
          childOb.dep.depend();
          if (Array.isArray(value)) {
            dependArray(value);
          }
        }
      }
      return value
    },
    set: function reactiveSetter (newVal) {
      var value = getter ? getter.call(obj) : val;
      
      if (newVal === value || (newVal !== newVal && value !== value)) {
        return
      }
      
      if (false) {}
      if (setter) {
        setter.call(obj, newVal);
      } else {
        val = newVal;
      }
      childOb = !shallow && observe(newVal);
      dep.notify();
    }
  });
}

/**
 * Set a property on an object. Adds the new property and
 * triggers change notification if the property doesn't
 * already exist.
 */
function set (target, key, val) {
  if (false
  ) {}
  if (Array.isArray(target) && isValidArrayIndex(key)) {
    target.length = Math.max(target.length, key);
    target.splice(key, 1, val);
    return val
  }
  if (key in target && !(key in Object.prototype)) {
    target[key] = val;
    return val
  }
  var ob = (target).__ob__;
  if (target._isVue || (ob && ob.vmCount)) {
    "production" !== 'production' && warn(
      'Avoid adding reactive properties to a Vue instance or its root $data ' +
      'at runtime - declare it upfront in the data option.'
    );
    return val
  }
  if (!ob) {
    target[key] = val;
    return val
  }
  defineReactive(ob.value, key, val);
  ob.dep.notify();
  return val
}

/**
 * Delete a property and trigger change if necessary.
 */
function del (target, key) {
  if (false
  ) {}
  if (Array.isArray(target) && isValidArrayIndex(key)) {
    target.splice(key, 1);
    return
  }
  var ob = (target).__ob__;
  if (target._isVue || (ob && ob.vmCount)) {
    "production" !== 'production' && warn(
      'Avoid deleting properties on a Vue instance or its root $data ' +
      '- just set it to null.'
    );
    return
  }
  if (!hasOwn(target, key)) {
    return
  }
  delete target[key];
  if (!ob) {
    return
  }
  ob.dep.notify();
}

/**
 * Collect dependencies on array elements when the array is touched, since
 * we cannot intercept array element access like property getters.
 */
function dependArray (value) {
  for (var e = (void 0), i = 0, l = value.length; i < l; i++) {
    e = value[i];
    e && e.__ob__ && e.__ob__.dep.depend();
    if (Array.isArray(e)) {
      dependArray(e);
    }
  }
}



/**
 * Option overwriting strategies are functions that handle
 * how to merge a parent option value and a child option
 * value into the final value.
 */
var strats = config.optionMergeStrategies;

/**
 * Options with restrictions
 */
if (false) {}

/**
 * Helper that recursively merges two data objects together.
 */
function mergeData (to, from) {
  if (!from) { return to }
  var key, toVal, fromVal;
  var keys = Object.keys(from);
  for (var i = 0; i < keys.length; i++) {
    key = keys[i];
    toVal = to[key];
    fromVal = from[key];
    if (!hasOwn(to, key)) {
      set(to, key, fromVal);
    } else if (isPlainObject(toVal) && isPlainObject(fromVal)) {
      mergeData(toVal, fromVal);
    }
  }
  return to
}

/**
 * Data
 */
function mergeDataOrFn (
  parentVal,
  childVal,
  vm
) {
  if (!vm) {
    // in a Vue.extend merge, both should be functions
    if (!childVal) {
      return parentVal
    }
    if (!parentVal) {
      return childVal
    }
    // when parentVal & childVal are both present,
    // we need to return a function that returns the
    // merged result of both functions... no need to
    // check if parentVal is a function here because
    // it has to be a function to pass previous merges.
    return function mergedDataFn () {
      return mergeData(
        typeof childVal === 'function' ? childVal.call(this, this) : childVal,
        typeof parentVal === 'function' ? parentVal.call(this, this) : parentVal
      )
    }
  } else {
    return function mergedInstanceDataFn () {
      // instance merge
      var instanceData = typeof childVal === 'function'
        ? childVal.call(vm, vm)
        : childVal;
      var defaultData = typeof parentVal === 'function'
        ? parentVal.call(vm, vm)
        : parentVal;
      if (instanceData) {
        return mergeData(instanceData, defaultData)
      } else {
        return defaultData
      }
    }
  }
}

strats.data = function (
  parentVal,
  childVal,
  vm
) {
  if (!vm) {
    if (childVal && typeof childVal !== 'function') {
      "production" !== 'production' && warn(
        'The "data" option should be a function ' +
        'that returns a per-instance value in component ' +
        'definitions.',
        vm
      );

      return parentVal
    }
    return mergeDataOrFn(parentVal, childVal)
  }

  return mergeDataOrFn(parentVal, childVal, vm)
};

/**
 * Hooks and props are merged as arrays.
 */
function mergeHook (
  parentVal,
  childVal
) {
  return childVal
    ? parentVal
      ? parentVal.concat(childVal)
      : Array.isArray(childVal)
        ? childVal
        : [childVal]
    : parentVal
}

LIFECYCLE_HOOKS.forEach(function (hook) {
  strats[hook] = mergeHook;
});

/**
 * Assets
 *
 * When a vm is present (instance creation), we need to do
 * a three-way merge between constructor options, instance
 * options and parent options.
 */
function mergeAssets (
  parentVal,
  childVal,
  vm,
  key
) {
  var res = Object.create(parentVal || null);
  if (childVal) {
    "production" !== 'production' && assertObjectType(key, childVal, vm);
    return extend(res, childVal)
  } else {
    return res
  }
}

ASSET_TYPES.forEach(function (type) {
  strats[type + 's'] = mergeAssets;
});

/**
 * Watchers.
 *
 * Watchers hashes should not overwrite one
 * another, so we merge them as arrays.
 */
strats.watch = function (
  parentVal,
  childVal,
  vm,
  key
) {
  // work around Firefox's Object.prototype.watch...
  if (parentVal === nativeWatch) { parentVal = undefined; }
  if (childVal === nativeWatch) { childVal = undefined; }
  
  if (!childVal) { return Object.create(parentVal || null) }
  if (false) {}
  if (!parentVal) { return childVal }
  var ret = {};
  extend(ret, parentVal);
  for (var key$1 in childVal) {
    var parent = ret[key$1];
    var child = childVal[key$1];
    if (parent && !Array.isArray(parent)) {
      parent = [parent];
    }
    ret[key$1] = parent
      ? parent.concat(child)
      : Array.isArray(child) ? child : [child];
  }
  return ret
};

/**
 * Other object hashes.
 */
strats.props =
strats.methods =
strats.inject =
strats.computed = function (
  parentVal,
  childVal,
  vm,
  key
) {
  if (childVal && "production" !== 'production') {
    assertObjectType(key, childVal, vm);
  }
  if (!parentVal) { return childVal }
  var ret = Object.create(null);
  extend(ret, parentVal);
  if (childVal) { extend(ret, childVal); }
  return ret
};
strats.provide = mergeDataOrFn;

/**
 * Default strategy.
 */
var defaultStrat = function (parentVal, childVal) {
  return childVal === undefined
    ? parentVal
    : childVal
};

/**
 * Validate component names
 */
function checkComponents (options) {
  for (var key in options.components) {
    validateComponentName(key);
  }
}

function validateComponentName (name) {
  if (!/^[a-zA-Z][\w-]*$/.test(name)) {
    warn(
      'Invalid component name: "' + name + '". Component names ' +
      'can only contain alphanumeric characters and the hyphen, ' +
      'and must start with a letter.'
    );
  }
  if (isBuiltInTag(name) || config.isReservedTag(name)) {
    warn(
      'Do not use built-in or reserved HTML elements as component ' +
      'id: ' + name
    );
  }
}

/**
 * Ensure all props option syntax are normalized into the
 * Object-based format.
 */
function normalizeProps (options, vm) {
  var props = options.props;
  if (!props) { return }
  var res = {};
  var i, val, name;
  if (Array.isArray(props)) {
    i = props.length;
    while (i--) {
      val = props[i];
      if (typeof val === 'string') {
        name = camelize(val);
        res[name] = { type: null };
      } else if (false) {}
    }
  } else if (isPlainObject(props)) {
    for (var key in props) {
      val = props[key];
      name = camelize(key);
      res[name] = isPlainObject(val)
        ? val
        : { type: val };
    }
  } else if (false) {}
  options.props = res;
}

/**
 * Normalize all injections into Object-based format
 */
function normalizeInject (options, vm) {
  var inject = options.inject;
  if (!inject) { return }
  var normalized = options.inject = {};
  if (Array.isArray(inject)) {
    for (var i = 0; i < inject.length; i++) {
      normalized[inject[i]] = { from: inject[i] };
    }
  } else if (isPlainObject(inject)) {
    for (var key in inject) {
      var val = inject[key];
      normalized[key] = isPlainObject(val)
        ? extend({ from: key }, val)
        : { from: val };
    }
  } else if (false) {}
}

/**
 * Normalize raw function directives into object format.
 */
function normalizeDirectives (options) {
  var dirs = options.directives;
  if (dirs) {
    for (var key in dirs) {
      var def = dirs[key];
      if (typeof def === 'function') {
        dirs[key] = { bind: def, update: def };
      }
    }
  }
}

function assertObjectType (name, value, vm) {
  if (!isPlainObject(value)) {
    warn(
      "Invalid value for option \"" + name + "\": expected an Object, " +
      "but got " + (toRawType(value)) + ".",
      vm
    );
  }
}

/**
 * Merge two option objects into a new one.
 * Core utility used in both instantiation and inheritance.
 */
function mergeOptions (
  parent,
  child,
  vm
) {
  if (false) {}

  if (typeof child === 'function') {
    child = child.options;
  }

  normalizeProps(child, vm);
  normalizeInject(child, vm);
  normalizeDirectives(child);
  var extendsFrom = child.extends;
  if (extendsFrom) {
    parent = mergeOptions(parent, extendsFrom, vm);
  }
  if (child.mixins) {
    for (var i = 0, l = child.mixins.length; i < l; i++) {
      parent = mergeOptions(parent, child.mixins[i], vm);
    }
  }
  var options = {};
  var key;
  for (key in parent) {
    mergeField(key);
  }
  for (key in child) {
    if (!hasOwn(parent, key)) {
      mergeField(key);
    }
  }
  function mergeField (key) {
    var strat = strats[key] || defaultStrat;
    options[key] = strat(parent[key], child[key], vm, key);
  }
  return options
}

/**
 * Resolve an asset.
 * This function is used because child instances need access
 * to assets defined in its ancestor chain.
 */
function resolveAsset (
  options,
  type,
  id,
  warnMissing
) {
  
  if (typeof id !== 'string') {
    return
  }
  var assets = options[type];
  // check local registration variations first
  if (hasOwn(assets, id)) { return assets[id] }
  var camelizedId = camelize(id);
  if (hasOwn(assets, camelizedId)) { return assets[camelizedId] }
  var PascalCaseId = capitalize(camelizedId);
  if (hasOwn(assets, PascalCaseId)) { return assets[PascalCaseId] }
  // fallback to prototype chain
  var res = assets[id] || assets[camelizedId] || assets[PascalCaseId];
  if (false) {}
  return res
}



function validateProp (
  key,
  propOptions,
  propsData,
  vm
) {
  var prop = propOptions[key];
  var absent = !hasOwn(propsData, key);
  var value = propsData[key];
  // boolean casting
  var booleanIndex = getTypeIndex(Boolean, prop.type);
  if (booleanIndex > -1) {
    if (absent && !hasOwn(prop, 'default')) {
      value = false;
    } else if (value === '' || value === hyphenate(key)) {
      // only cast empty string / same name to boolean if
      // boolean has higher priority
      var stringIndex = getTypeIndex(String, prop.type);
      if (stringIndex < 0 || booleanIndex < stringIndex) {
        value = true;
      }
    }
  }
  // check default value
  if (value === undefined) {
    value = getPropDefaultValue(vm, prop, key);
    // since the default value is a fresh copy,
    // make sure to observe it.
    var prevShouldObserve = shouldObserve;
    toggleObserving(true);
    observe(value);
    toggleObserving(prevShouldObserve);
  }
  if (
    false
  ) {}
  return value
}

/**
 * Get the default value of a prop.
 */
function getPropDefaultValue (vm, prop, key) {
  // no default, return undefined
  if (!hasOwn(prop, 'default')) {
    return undefined
  }
  var def = prop.default;
  // warn against non-factory defaults for Object & Array
  if (false) {}
  // the raw prop value was also undefined from previous render,
  // return previous default value to avoid unnecessary watcher trigger
  if (vm && vm.$options.propsData &&
    vm.$options.propsData[key] === undefined &&
    vm._props[key] !== undefined
  ) {
    return vm._props[key]
  }
  // call factory function for non-Function types
  // a value is Function if its prototype is function even across different execution context
  return typeof def === 'function' && getType(prop.type) !== 'Function'
    ? def.call(vm)
    : def
}

/**
 * Assert whether a prop is valid.
 */
function assertProp (
  prop,
  name,
  value,
  vm,
  absent
) {
  if (prop.required && absent) {
    warn(
      'Missing required prop: "' + name + '"',
      vm
    );
    return
  }
  if (value == null && !prop.required) {
    return
  }
  var type = prop.type;
  var valid = !type || type === true;
  var expectedTypes = [];
  if (type) {
    if (!Array.isArray(type)) {
      type = [type];
    }
    for (var i = 0; i < type.length && !valid; i++) {
      var assertedType = assertType(value, type[i]);
      expectedTypes.push(assertedType.expectedType || '');
      valid = assertedType.valid;
    }
  }
  if (!valid) {
    warn(
      "Invalid prop: type check failed for prop \"" + name + "\"." +
      " Expected " + (expectedTypes.map(capitalize).join(', ')) +
      ", got " + (toRawType(value)) + ".",
      vm
    );
    return
  }
  var validator = prop.validator;
  if (validator) {
    if (!validator(value)) {
      warn(
        'Invalid prop: custom validator check failed for prop "' + name + '".',
        vm
      );
    }
  }
}

var simpleCheckRE = /^(String|Number|Boolean|Function|Symbol)$/;

function assertType (value, type) {
  var valid;
  var expectedType = getType(type);
  if (simpleCheckRE.test(expectedType)) {
    var t = typeof value;
    valid = t === expectedType.toLowerCase();
    // for primitive wrapper objects
    if (!valid && t === 'object') {
      valid = value instanceof type;
    }
  } else if (expectedType === 'Object') {
    valid = isPlainObject(value);
  } else if (expectedType === 'Array') {
    valid = Array.isArray(value);
  } else {
    valid = value instanceof type;
  }
  return {
    valid: valid,
    expectedType: expectedType
  }
}

/**
 * Use function string name to check built-in types,
 * because a simple equality check will fail when running
 * across different vms / iframes.
 */
function getType (fn) {
  var match = fn && fn.toString().match(/^\s*function (\w+)/);
  return match ? match[1] : ''
}

function isSameType (a, b) {
  return getType(a) === getType(b)
}

function getTypeIndex (type, expectedTypes) {
  if (!Array.isArray(expectedTypes)) {
    return isSameType(expectedTypes, type) ? 0 : -1
  }
  for (var i = 0, len = expectedTypes.length; i < len; i++) {
    if (isSameType(expectedTypes[i], type)) {
      return i
    }
  }
  return -1
}



function handleError (err, vm, info) {
  if (vm) {
    var cur = vm;
    while ((cur = cur.$parent)) {
      var hooks = cur.$options.errorCaptured;
      if (hooks) {
        for (var i = 0; i < hooks.length; i++) {
          try {
            var capture = hooks[i].call(cur, err, vm, info) === false;
            if (capture) { return }
          } catch (e) {
            globalHandleError(e, cur, 'errorCaptured hook');
          }
        }
      }
    }
  }
  globalHandleError(err, vm, info);
}

function globalHandleError (err, vm, info) {
  if (config.errorHandler) {
    try {
      return config.errorHandler.call(null, err, vm, info)
    } catch (e) {
      logError(e, null, 'config.errorHandler');
    }
  }
  logError(err, vm, info);
}

function logError (err, vm, info) {
  if (false) {}
  
  if ((inBrowser || inWeex) && typeof console !== 'undefined') {
    console.error(err);
  } else {
    throw err
  }
}




var callbacks = [];
var pending = false;

function flushCallbacks () {
  pending = false;
  var copies = callbacks.slice(0);
  callbacks.length = 0;
  for (var i = 0; i < copies.length; i++) {
    copies[i]();
  }
}

// Here we have async deferring wrappers using both microtasks and (macro) tasks.
// In < 2.4 we used microtasks everywhere, but there are some scenarios where
// microtasks have too high a priority and fire in between supposedly
// sequential events (e.g. #4521, #6690) or even between bubbling of the same
// event (#6566). However, using (macro) tasks everywhere also has subtle problems
// when state is changed right before repaint (e.g. #6813, out-in transitions).
// Here we use microtask by default, but expose a way to force (macro) task when
// needed (e.g. in event handlers attached by v-on).
var microTimerFunc;
var macroTimerFunc;
var useMacroTask = false;

// Determine (macro) task defer implementation.
// Technically setImmediate should be the ideal choice, but it's only available
// in IE. The only polyfill that consistently queues the callback after all DOM
// events triggered in the same loop is by using MessageChannel.

if (typeof setImmediate !== 'undefined' && isNative(setImmediate)) {
  macroTimerFunc = function () {
    setImmediate(flushCallbacks);
  };
} else if (typeof MessageChannel !== 'undefined' && (
  isNative(MessageChannel) ||
  // PhantomJS
  MessageChannel.toString() === '[object MessageChannelConstructor]'
)) {
  var channel = new MessageChannel();
  var port = channel.port2;
  channel.port1.onmessage = flushCallbacks;
  macroTimerFunc = function () {
    port.postMessage(1);
  };
} else {
  
  macroTimerFunc = function () {
    setTimeout(flushCallbacks, 0);
  };
}

// Determine microtask defer implementation.

if (typeof Promise !== 'undefined' && isNative(Promise)) {
  var p = Promise.resolve();
  microTimerFunc = function () {
    p.then(flushCallbacks);
    // in problematic UIWebViews, Promise.then doesn't completely break, but
    // it can get stuck in a weird state where callbacks are pushed into the
    // microtask queue but the queue isn't being flushed, until the browser
    // needs to do some other work, e.g. handle a timer. Therefore we can
    // "force" the microtask queue to be flushed by adding an empty timer.
    if (isIOS) { setTimeout(noop); }
  };
} else {
  // fallback to macro
  microTimerFunc = macroTimerFunc;
}

/**
 * Wrap a function so that if any code inside triggers state change,
 * the changes are queued using a (macro) task instead of a microtask.
 */
function withMacroTask (fn) {
  return fn._withTask || (fn._withTask = function () {
    useMacroTask = true;
    var res = fn.apply(null, arguments);
    useMacroTask = false;
    return res
  })
}

function nextTick (cb, ctx) {
  var _resolve;
  callbacks.push(function () {
    if (cb) {
      try {
        cb.call(ctx);
      } catch (e) {
        handleError(e, ctx, 'nextTick');
      }
    } else if (_resolve) {
      _resolve(ctx);
    }
  });
  if (!pending) {
    pending = true;
    if (useMacroTask) {
      macroTimerFunc();
    } else {
      microTimerFunc();
    }
  }
  // $flow-disable-line
  if (!cb && typeof Promise !== 'undefined') {
    return new Promise(function (resolve) {
      _resolve = resolve;
    })
  }
}





var initProxy;

if (false) { var getHandler, hasHandler, isBuiltInModifier, hasProxy, warnNonPresent, allowedGlobals; }



var seenObjects = new _Set();

/**
 * Recursively traverse an object to evoke all converted
 * getters, so that every nested property inside the object
 * is collected as a "deep" dependency.
 */
function traverse (val) {
  _traverse(val, seenObjects);
  seenObjects.clear();
}

function _traverse (val, seen) {
  var i, keys;
  var isA = Array.isArray(val);
  if ((!isA && !isObject(val)) || Object.isFrozen(val) || val instanceof VNode) {
    return
  }
  if (val.__ob__) {
    var depId = val.__ob__.dep.id;
    if (seen.has(depId)) {
      return
    }
    seen.add(depId);
  }
  if (isA) {
    i = val.length;
    while (i--) { _traverse(val[i], seen); }
  } else {
    keys = Object.keys(val);
    i = keys.length;
    while (i--) { _traverse(val[keys[i]], seen); }
  }
}

var mark;
var measure;

if (false) { var perf; }



var normalizeEvent = cached(function (name) {
  var passive = name.charAt(0) === '&';
  name = passive ? name.slice(1) : name;
  var once$$1 = name.charAt(0) === '~'; // Prefixed last, checked first
  name = once$$1 ? name.slice(1) : name;
  var capture = name.charAt(0) === '!';
  name = capture ? name.slice(1) : name;
  return {
    name: name,
    once: once$$1,
    capture: capture,
    passive: passive
  }
});

function createFnInvoker (fns) {
  function invoker () {
    var arguments$1 = arguments;

    var fns = invoker.fns;
    if (Array.isArray(fns)) {
      var cloned = fns.slice();
      for (var i = 0; i < cloned.length; i++) {
        cloned[i].apply(null, arguments$1);
      }
    } else {
      // return handler return value for single handlers
      return fns.apply(null, arguments)
    }
  }
  invoker.fns = fns;
  return invoker
}

function updateListeners (
  on,
  oldOn,
  add,
  remove$$1,
  vm
) {
  var name, def, cur, old, event;
  for (name in on) {
    def = cur = on[name];
    old = oldOn[name];
    event = normalizeEvent(name);
    
    if (isUndef(cur)) {
      "production" !== 'production' && warn(
        "Invalid handler for event \"" + (event.name) + "\": got " + String(cur),
        vm
      );
    } else if (isUndef(old)) {
      if (isUndef(cur.fns)) {
        cur = on[name] = createFnInvoker(cur);
      }
      add(event.name, cur, event.once, event.capture, event.passive, event.params);
    } else if (cur !== old) {
      old.fns = cur;
      on[name] = old;
    }
  }
  for (name in oldOn) {
    if (isUndef(on[name])) {
      event = normalizeEvent(name);
      remove$$1(event.name, oldOn[name], event.capture);
    }
  }
}



function mergeVNodeHook (def, hookKey, hook) {
  if (def instanceof VNode) {
    def = def.data.hook || (def.data.hook = {});
  }
  var invoker;
  var oldHook = def[hookKey];

  function wrappedHook () {
    hook.apply(this, arguments);
    // important: remove merged hook to ensure it's called only once
    // and prevent memory leak
    remove(invoker.fns, wrappedHook);
  }

  if (isUndef(oldHook)) {
    // no existing hook
    invoker = createFnInvoker([wrappedHook]);
  } else {
    
    if (isDef(oldHook.fns) && isTrue(oldHook.merged)) {
      // already a merged invoker
      invoker = oldHook;
      invoker.fns.push(wrappedHook);
    } else {
      // existing plain hook
      invoker = createFnInvoker([oldHook, wrappedHook]);
    }
  }

  invoker.merged = true;
  def[hookKey] = invoker;
}



function extractPropsFromVNodeData (
  data,
  Ctor,
  tag
) {
  // we are only extracting raw values here.
  // validation and default values are handled in the child
  // component itself.
  var propOptions = Ctor.options.props;
  if (isUndef(propOptions)) {
    return
  }
  var res = {};
  var attrs = data.attrs;
  var props = data.props;
  if (isDef(attrs) || isDef(props)) {
    for (var key in propOptions) {
      var altKey = hyphenate(key);
      if (false) { var keyInLowerCase; }
      checkProp(res, props, key, altKey, true) ||
      checkProp(res, attrs, key, altKey, false);
    }
  }
  return res
}

function checkProp (
  res,
  hash,
  key,
  altKey,
  preserve
) {
  if (isDef(hash)) {
    if (hasOwn(hash, key)) {
      res[key] = hash[key];
      if (!preserve) {
        delete hash[key];
      }
      return true
    } else if (hasOwn(hash, altKey)) {
      res[key] = hash[altKey];
      if (!preserve) {
        delete hash[altKey];
      }
      return true
    }
  }
  return false
}



// The template compiler attempts to minimize the need for normalization by
// statically analyzing the template at compile time.
//
// For plain HTML markup, normalization can be completely skipped because the
// generated render function is guaranteed to return Array<VNode>. There are
// two cases where extra normalization is needed:

// 1. When the children contains components - because a functional component
// may return an Array instead of a single root. In this case, just a simple
// normalization is needed - if any child is an Array, we flatten the whole
// thing with Array.prototype.concat. It is guaranteed to be only 1-level deep
// because functional components already normalize their own children.
function simpleNormalizeChildren (children) {
  for (var i = 0; i < children.length; i++) {
    if (Array.isArray(children[i])) {
      return Array.prototype.concat.apply([], children)
    }
  }
  return children
}

// 2. When the children contains constructs that always generated nested Arrays,
// e.g. <template>, <slot>, v-for, or when the children is provided by user
// with hand-written render functions / JSX. In such cases a full normalization
// is needed to cater to all possible types of children values.
function normalizeChildren (children) {
  return isPrimitive(children)
    ? [createTextVNode(children)]
    : Array.isArray(children)
      ? normalizeArrayChildren(children)
      : undefined
}

function isTextNode (node) {
  return isDef(node) && isDef(node.text) && isFalse(node.isComment)
}

function normalizeArrayChildren (children, nestedIndex) {
  var res = [];
  var i, c, lastIndex, last;
  for (i = 0; i < children.length; i++) {
    c = children[i];
    if (isUndef(c) || typeof c === 'boolean') { continue }
    lastIndex = res.length - 1;
    last = res[lastIndex];
    //  nested
    if (Array.isArray(c)) {
      if (c.length > 0) {
        c = normalizeArrayChildren(c, ((nestedIndex || '') + "_" + i));
        // merge adjacent text nodes
        if (isTextNode(c[0]) && isTextNode(last)) {
          res[lastIndex] = createTextVNode(last.text + (c[0]).text);
          c.shift();
        }
        res.push.apply(res, c);
      }
    } else if (isPrimitive(c)) {
      if (isTextNode(last)) {
        // merge adjacent text nodes
        // this is necessary for SSR hydration because text nodes are
        // essentially merged when rendered to HTML strings
        res[lastIndex] = createTextVNode(last.text + c);
      } else if (c !== '') {
        // convert primitive to vnode
        res.push(createTextVNode(c));
      }
    } else {
      if (isTextNode(c) && isTextNode(last)) {
        // merge adjacent text nodes
        res[lastIndex] = createTextVNode(last.text + c.text);
      } else {
        // default key for nested array children (likely generated by v-for)
        if (isTrue(children._isVList) &&
          isDef(c.tag) &&
          isUndef(c.key) &&
          isDef(nestedIndex)) {
          c.key = "__vlist" + nestedIndex + "_" + i + "__";
        }
        res.push(c);
      }
    }
  }
  return res
}



function ensureCtor (comp, base) {
  if (
    comp.__esModule ||
    (hasSymbol && comp[Symbol.toStringTag] === 'Module')
  ) {
    comp = comp.default;
  }
  return isObject(comp)
    ? base.extend(comp)
    : comp
}

function createAsyncPlaceholder (
  factory,
  data,
  context,
  children,
  tag
) {
  var node = createEmptyVNode();
  node.asyncFactory = factory;
  node.asyncMeta = { data: data, context: context, children: children, tag: tag };
  return node
}

function resolveAsyncComponent (
  factory,
  baseCtor,
  context
) {
  if (isTrue(factory.error) && isDef(factory.errorComp)) {
    return factory.errorComp
  }

  if (isDef(factory.resolved)) {
    return factory.resolved
  }

  if (isTrue(factory.loading) && isDef(factory.loadingComp)) {
    return factory.loadingComp
  }

  if (isDef(factory.contexts)) {
    // already pending
    factory.contexts.push(context);
  } else {
    var contexts = factory.contexts = [context];
    var sync = true;

    var forceRender = function () {
      for (var i = 0, l = contexts.length; i < l; i++) {
        contexts[i].$forceUpdate();
      }
    };

    var resolve = once(function (res) {
      // cache resolved
      factory.resolved = ensureCtor(res, baseCtor);
      // invoke callbacks only if this is not a synchronous resolve
      // (async resolves are shimmed as synchronous during SSR)
      if (!sync) {
        forceRender();
      }
    });

    var reject = once(function (reason) {
      "production" !== 'production' && warn(
        "Failed to resolve async component: " + (String(factory)) +
        (reason ? ("\nReason: " + reason) : '')
      );
      if (isDef(factory.errorComp)) {
        factory.error = true;
        forceRender();
      }
    });

    var res = factory(resolve, reject);

    if (isObject(res)) {
      if (typeof res.then === 'function') {
        // () => Promise
        if (isUndef(factory.resolved)) {
          res.then(resolve, reject);
        }
      } else if (isDef(res.component) && typeof res.component.then === 'function') {
        res.component.then(resolve, reject);

        if (isDef(res.error)) {
          factory.errorComp = ensureCtor(res.error, baseCtor);
        }

        if (isDef(res.loading)) {
          factory.loadingComp = ensureCtor(res.loading, baseCtor);
          if (res.delay === 0) {
            factory.loading = true;
          } else {
            setTimeout(function () {
              if (isUndef(factory.resolved) && isUndef(factory.error)) {
                factory.loading = true;
                forceRender();
              }
            }, res.delay || 200);
          }
        }

        if (isDef(res.timeout)) {
          setTimeout(function () {
            if (isUndef(factory.resolved)) {
              reject(
                 false
                  ? (undefined)
                  : null
              );
            }
          }, res.timeout);
        }
      }
    }

    sync = false;
    // return in case resolved synchronously
    return factory.loading
      ? factory.loadingComp
      : factory.resolved
  }
}



function isAsyncPlaceholder (node) {
  return node.isComment && node.asyncFactory
}



function getFirstComponentChild (children) {
  if (Array.isArray(children)) {
    for (var i = 0; i < children.length; i++) {
      var c = children[i];
      if (isDef(c) && (isDef(c.componentOptions) || isAsyncPlaceholder(c))) {
        return c
      }
    }
  }
}





function initEvents (vm) {
  vm._events = Object.create(null);
  vm._hasHookEvent = false;
  // init parent attached events
  var listeners = vm.$options._parentListeners;
  if (listeners) {
    updateComponentListeners(vm, listeners);
  }
}

var target;

function add (event, fn, once) {
  if (once) {
    target.$once(event, fn);
  } else {
    target.$on(event, fn);
  }
}

function remove$1 (event, fn) {
  target.$off(event, fn);
}

function updateComponentListeners (
  vm,
  listeners,
  oldListeners
) {
  target = vm;
  updateListeners(listeners, oldListeners || {}, add, remove$1, vm);
  target = undefined;
}

function eventsMixin (Vue) {
  var hookRE = /^hook:/;
  Vue.prototype.$on = function (event, fn) {
    var this$1 = this;

    var vm = this;
    if (Array.isArray(event)) {
      for (var i = 0, l = event.length; i < l; i++) {
        this$1.$on(event[i], fn);
      }
    } else {
      (vm._events[event] || (vm._events[event] = [])).push(fn);
      // optimize hook:event cost by using a boolean flag marked at registration
      // instead of a hash lookup
      if (hookRE.test(event)) {
        vm._hasHookEvent = true;
      }
    }
    return vm
  };

  Vue.prototype.$once = function (event, fn) {
    var vm = this;
    function on () {
      vm.$off(event, on);
      fn.apply(vm, arguments);
    }
    on.fn = fn;
    vm.$on(event, on);
    return vm
  };

  Vue.prototype.$off = function (event, fn) {
    var this$1 = this;

    var vm = this;
    // all
    if (!arguments.length) {
      vm._events = Object.create(null);
      return vm
    }
    // array of events
    if (Array.isArray(event)) {
      for (var i = 0, l = event.length; i < l; i++) {
        this$1.$off(event[i], fn);
      }
      return vm
    }
    // specific event
    var cbs = vm._events[event];
    if (!cbs) {
      return vm
    }
    if (!fn) {
      vm._events[event] = null;
      return vm
    }
    if (fn) {
      // specific handler
      var cb;
      var i$1 = cbs.length;
      while (i$1--) {
        cb = cbs[i$1];
        if (cb === fn || cb.fn === fn) {
          cbs.splice(i$1, 1);
          break
        }
      }
    }
    return vm
  };

  Vue.prototype.$emit = function (event) {
    var vm = this;
    if (false) { var lowerCaseEvent; }
    var cbs = vm._events[event];
    if (cbs) {
      cbs = cbs.length > 1 ? toArray(cbs) : cbs;
      var args = toArray(arguments, 1);
      for (var i = 0, l = cbs.length; i < l; i++) {
        try {
          cbs[i].apply(vm, args);
        } catch (e) {
          handleError(e, vm, ("event handler for \"" + event + "\""));
        }
      }
    }
    return vm
  };
}





/**
 * Runtime helper for resolving raw children VNodes into a slot object.
 */
function resolveSlots (
  children,
  context
) {
  var slots = {};
  if (!children) {
    return slots
  }
  for (var i = 0, l = children.length; i < l; i++) {
    var child = children[i];
    var data = child.data;
    // remove slot attribute if the node is resolved as a Vue slot node
    if (data && data.attrs && data.attrs.slot) {
      delete data.attrs.slot;
    }
    // named slots should only be respected if the vnode was rendered in the
    // same context.
    if ((child.context === context || child.fnContext === context) &&
      data && data.slot != null
    ) {
      var name = data.slot;
      var slot = (slots[name] || (slots[name] = []));
      if (child.tag === 'template') {
        slot.push.apply(slot, child.children || []);
      } else {
        slot.push(child);
      }
    } else {
      (slots.default || (slots.default = [])).push(child);
    }
  }
  // ignore slots that contains only whitespace
  for (var name$1 in slots) {
    if (slots[name$1].every(isWhitespace)) {
      delete slots[name$1];
    }
  }
  return slots
}

function isWhitespace (node) {
  return (node.isComment && !node.asyncFactory) || node.text === ' '
}

function resolveScopedSlots (
  fns, // see flow/vnode
  res
) {
  res = res || {};
  for (var i = 0; i < fns.length; i++) {
    if (Array.isArray(fns[i])) {
      resolveScopedSlots(fns[i], res);
    } else {
      res[fns[i].key] = fns[i].fn;
    }
  }
  return res
}



var activeInstance = null;
var isUpdatingChildComponent = false;

function initLifecycle (vm) {
  var options = vm.$options;

  // locate first non-abstract parent
  var parent = options.parent;
  if (parent && !options.abstract) {
    while (parent.$options.abstract && parent.$parent) {
      parent = parent.$parent;
    }
    parent.$children.push(vm);
  }

  vm.$parent = parent;
  vm.$root = parent ? parent.$root : vm;

  vm.$children = [];
  vm.$refs = {};

  vm._watcher = null;
  vm._inactive = null;
  vm._directInactive = false;
  vm._isMounted = false;
  vm._isDestroyed = false;
  vm._isBeingDestroyed = false;
}

function lifecycleMixin (Vue) {
  Vue.prototype._update = function (vnode, hydrating) {
    var vm = this;
    if (vm._isMounted) {
      callHook(vm, 'beforeUpdate');
    }
    var prevEl = vm.$el;
    var prevVnode = vm._vnode;
    var prevActiveInstance = activeInstance;
    activeInstance = vm;
    vm._vnode = vnode;
    // Vue.prototype.__patch__ is injected in entry points
    // based on the rendering backend used.
    if (!prevVnode) {
      // initial render
      vm.$el = vm.__patch__(
        vm.$el, vnode, hydrating, false ,
        vm.$options._parentElm,
        vm.$options._refElm
      );
      // no need for the ref nodes after initial patch
      // this prevents keeping a detached DOM tree in memory (#5851)
      vm.$options._parentElm = vm.$options._refElm = null;
    } else {
      // updates
      vm.$el = vm.__patch__(prevVnode, vnode);
    }
    activeInstance = prevActiveInstance;
    // update __vue__ reference
    if (prevEl) {
      prevEl.__vue__ = null;
    }
    if (vm.$el) {
      vm.$el.__vue__ = vm;
    }
    // if parent is an HOC, update its $el as well
    if (vm.$vnode && vm.$parent && vm.$vnode === vm.$parent._vnode) {
      vm.$parent.$el = vm.$el;
    }
    // updated hook is called by the scheduler to ensure that children are
    // updated in a parent's updated hook.
  };

  Vue.prototype.$forceUpdate = function () {
    var vm = this;
    if (vm._watcher) {
      vm._watcher.update();
    }
  };

  Vue.prototype.$destroy = function () {
    var vm = this;
    if (vm._isBeingDestroyed) {
      return
    }
    callHook(vm, 'beforeDestroy');
    vm._isBeingDestroyed = true;
    // remove self from parent
    var parent = vm.$parent;
    if (parent && !parent._isBeingDestroyed && !vm.$options.abstract) {
      remove(parent.$children, vm);
    }
    // teardown watchers
    if (vm._watcher) {
      vm._watcher.teardown();
    }
    var i = vm._watchers.length;
    while (i--) {
      vm._watchers[i].teardown();
    }
    // remove reference from data ob
    // frozen object may not have observer.
    if (vm._data.__ob__) {
      vm._data.__ob__.vmCount--;
    }
    // call the last hook...
    vm._isDestroyed = true;
    // invoke destroy hooks on current rendered tree
    vm.__patch__(vm._vnode, null);
    // fire destroyed hook
    callHook(vm, 'destroyed');
    // turn off all instance listeners.
    vm.$off();
    // remove __vue__ reference
    if (vm.$el) {
      vm.$el.__vue__ = null;
    }
    // release circular reference (#6759)
    if (vm.$vnode) {
      vm.$vnode.parent = null;
    }
  };
}

function mountComponent (
  vm,
  el,
  hydrating
) {
  vm.$el = el;
  if (!vm.$options.render) {
    vm.$options.render = createEmptyVNode;
    if (false) {}
  }
  callHook(vm, 'beforeMount');

  var updateComponent;
  
  if (false) {} else {
    updateComponent = function () {
      vm._update(vm._render(), hydrating);
    };
  }

  // we set this to vm._watcher inside the watcher's constructor
  // since the watcher's initial patch may call $forceUpdate (e.g. inside child
  // component's mounted hook), which relies on vm._watcher being already defined
  new Watcher(vm, updateComponent, noop, null, true );
  hydrating = false;

  // manually mounted instance, call mounted on self
  // mounted is called for render-created child components in its inserted hook
  if (vm.$vnode == null) {
    vm._isMounted = true;
    callHook(vm, 'mounted');
  }
  return vm
}

function updateChildComponent (
  vm,
  propsData,
  listeners,
  parentVnode,
  renderChildren
) {
  if (false) {}

  // determine whether component has slot children
  // we need to do this before overwriting $options._renderChildren
  var hasChildren = !!(
    renderChildren ||               // has new static slots
    vm.$options._renderChildren ||  // has old static slots
    parentVnode.data.scopedSlots || // has new scoped slots
    vm.$scopedSlots !== emptyObject // has old scoped slots
  );

  vm.$options._parentVnode = parentVnode;
  vm.$vnode = parentVnode; // update vm's placeholder node without re-render

  if (vm._vnode) { // update child tree's parent
    vm._vnode.parent = parentVnode;
  }
  vm.$options._renderChildren = renderChildren;

  // update $attrs and $listeners hash
  // these are also reactive so they may trigger child update if the child
  // used them during render
  vm.$attrs = parentVnode.data.attrs || emptyObject;
  vm.$listeners = listeners || emptyObject;

  // update props
  if (propsData && vm.$options.props) {
    toggleObserving(false);
    var props = vm._props;
    var propKeys = vm.$options._propKeys || [];
    for (var i = 0; i < propKeys.length; i++) {
      var key = propKeys[i];
      var propOptions = vm.$options.props; // wtf flow?
      props[key] = validateProp(key, propOptions, propsData, vm);
    }
    toggleObserving(true);
    // keep a copy of raw propsData
    vm.$options.propsData = propsData;
  }

  // update listeners
  listeners = listeners || emptyObject;
  var oldListeners = vm.$options._parentListeners;
  vm.$options._parentListeners = listeners;
  updateComponentListeners(vm, listeners, oldListeners);

  // resolve slots + force update if has children
  if (hasChildren) {
    vm.$slots = resolveSlots(renderChildren, parentVnode.context);
    vm.$forceUpdate();
  }

  if (false) {}
}

function isInInactiveTree (vm) {
  while (vm && (vm = vm.$parent)) {
    if (vm._inactive) { return true }
  }
  return false
}

function activateChildComponent (vm, direct) {
  if (direct) {
    vm._directInactive = false;
    if (isInInactiveTree(vm)) {
      return
    }
  } else if (vm._directInactive) {
    return
  }
  if (vm._inactive || vm._inactive === null) {
    vm._inactive = false;
    for (var i = 0; i < vm.$children.length; i++) {
      activateChildComponent(vm.$children[i]);
    }
    callHook(vm, 'activated');
  }
}

function deactivateChildComponent (vm, direct) {
  if (direct) {
    vm._directInactive = true;
    if (isInInactiveTree(vm)) {
      return
    }
  }
  if (!vm._inactive) {
    vm._inactive = true;
    for (var i = 0; i < vm.$children.length; i++) {
      deactivateChildComponent(vm.$children[i]);
    }
    callHook(vm, 'deactivated');
  }
}

function callHook (vm, hook) {
  // #7573 disable dep collection when invoking lifecycle hooks
  pushTarget();
  var handlers = vm.$options[hook];
  if (handlers) {
    for (var i = 0, j = handlers.length; i < j; i++) {
      try {
        handlers[i].call(vm);
      } catch (e) {
        handleError(e, vm, (hook + " hook"));
      }
    }
  }
  if (vm._hasHookEvent) {
    vm.$emit('hook:' + hook);
  }
  popTarget();
}




var MAX_UPDATE_COUNT = 100;

var queue = [];
var activatedChildren = [];
var has = {};
var circular = {};
var waiting = false;
var flushing = false;
var index = 0;

/**
 * Reset the scheduler's state.
 */
function resetSchedulerState () {
  index = queue.length = activatedChildren.length = 0;
  has = {};
  if (false) {}
  waiting = flushing = false;
}

/**
 * Flush both queues and run the watchers.
 */
function flushSchedulerQueue () {
  flushing = true;
  var watcher, id;

  // Sort queue before flush.
  // This ensures that:
  // 1. Components are updated from parent to child. (because parent is always
  //    created before the child)
  // 2. A component's user watchers are run before its render watcher (because
  //    user watchers are created before the render watcher)
  // 3. If a component is destroyed during a parent component's watcher run,
  //    its watchers can be skipped.
  queue.sort(function (a, b) { return a.id - b.id; });

  // do not cache length because more watchers might be pushed
  // as we run existing watchers
  for (index = 0; index < queue.length; index++) {
    watcher = queue[index];
    id = watcher.id;
    has[id] = null;
    watcher.run();
    // in dev build, check and stop circular updates.
    if (false) {}
  }

  // keep copies of post queues before resetting state
  var activatedQueue = activatedChildren.slice();
  var updatedQueue = queue.slice();

  resetSchedulerState();

  // call component updated and activated hooks
  callActivatedHooks(activatedQueue);
  callUpdatedHooks(updatedQueue);

  // devtool hook
  
  if (devtools && config.devtools) {
    devtools.emit('flush');
  }
}

function callUpdatedHooks (queue) {
  var i = queue.length;
  while (i--) {
    var watcher = queue[i];
    var vm = watcher.vm;
    if (vm._watcher === watcher && vm._isMounted) {
      callHook(vm, 'updated');
    }
  }
}

/**
 * Queue a kept-alive component that was activated during patch.
 * The queue will be processed after the entire tree has been patched.
 */
function queueActivatedComponent (vm) {
  // setting _inactive to false here so that a render function can
  // rely on checking whether it's in an inactive tree (e.g. router-view)
  vm._inactive = false;
  activatedChildren.push(vm);
}

function callActivatedHooks (queue) {
  for (var i = 0; i < queue.length; i++) {
    queue[i]._inactive = true;
    activateChildComponent(queue[i], true );
  }
}

/**
 * Push a watcher into the watcher queue.
 * Jobs with duplicate IDs will be skipped unless it's
 * pushed when the queue is being flushed.
 */
function queueWatcher (watcher) {
  var id = watcher.id;
  if (has[id] == null) {
    has[id] = true;
    if (!flushing) {
      queue.push(watcher);
    } else {
      // if already flushing, splice the watcher based on its id
      // if already past its id, it will be run next immediately.
      var i = queue.length - 1;
      while (i > index && queue[i].id > watcher.id) {
        i--;
      }
      queue.splice(i + 1, 0, watcher);
    }
    // queue the flush
    if (!waiting) {
      waiting = true;
      nextTick(flushSchedulerQueue);
    }
  }
}



var uid$1 = 0;

/**
 * A watcher parses an expression, collects dependencies,
 * and fires callback when the expression value changes.
 * This is used for both the $watch() api and directives.
 */
var Watcher = function Watcher (
  vm,
  expOrFn,
  cb,
  options,
  isRenderWatcher
) {
  this.vm = vm;
  if (isRenderWatcher) {
    vm._watcher = this;
  }
  vm._watchers.push(this);
  // options
  if (options) {
    this.deep = !!options.deep;
    this.user = !!options.user;
    this.lazy = !!options.lazy;
    this.sync = !!options.sync;
  } else {
    this.deep = this.user = this.lazy = this.sync = false;
  }
  this.cb = cb;
  this.id = ++uid$1; // uid for batching
  this.active = true;
  this.dirty = this.lazy; // for lazy watchers
  this.deps = [];
  this.newDeps = [];
  this.depIds = new _Set();
  this.newDepIds = new _Set();
  this.expression =  false
    ? undefined
    : '';
  // parse expression for getter
  if (typeof expOrFn === 'function') {
    this.getter = expOrFn;
  } else {
    this.getter = parsePath(expOrFn);
    if (!this.getter) {
      this.getter = function () {};
      "production" !== 'production' && warn(
        "Failed watching path: \"" + expOrFn + "\" " +
        'Watcher only accepts simple dot-delimited paths. ' +
        'For full control, use a function instead.',
        vm
      );
    }
  }
  this.value = this.lazy
    ? undefined
    : this.get();
};

/**
 * Evaluate the getter, and re-collect dependencies.
 */
Watcher.prototype.get = function get () {
  pushTarget(this);
  var value;
  var vm = this.vm;
  try {
    value = this.getter.call(vm, vm);
  } catch (e) {
    if (this.user) {
      handleError(e, vm, ("getter for watcher \"" + (this.expression) + "\""));
    } else {
      throw e
    }
  } finally {
    // "touch" every property so they are all tracked as
    // dependencies for deep watching
    if (this.deep) {
      traverse(value);
    }
    popTarget();
    this.cleanupDeps();
  }
  return value
};

/**
 * Add a dependency to this directive.
 */
Watcher.prototype.addDep = function addDep (dep) {
  var id = dep.id;
  if (!this.newDepIds.has(id)) {
    this.newDepIds.add(id);
    this.newDeps.push(dep);
    if (!this.depIds.has(id)) {
      dep.addSub(this);
    }
  }
};

/**
 * Clean up for dependency collection.
 */
Watcher.prototype.cleanupDeps = function cleanupDeps () {
    var this$1 = this;

  var i = this.deps.length;
  while (i--) {
    var dep = this$1.deps[i];
    if (!this$1.newDepIds.has(dep.id)) {
      dep.removeSub(this$1);
    }
  }
  var tmp = this.depIds;
  this.depIds = this.newDepIds;
  this.newDepIds = tmp;
  this.newDepIds.clear();
  tmp = this.deps;
  this.deps = this.newDeps;
  this.newDeps = tmp;
  this.newDeps.length = 0;
};

/**
 * Subscriber interface.
 * Will be called when a dependency changes.
 */
Watcher.prototype.update = function update () {
  
  if (this.lazy) {
    this.dirty = true;
  } else if (this.sync) {
    this.run();
  } else {
    queueWatcher(this);
  }
};

/**
 * Scheduler job interface.
 * Will be called by the scheduler.
 */
Watcher.prototype.run = function run () {
  if (this.active) {
    var value = this.get();
    if (
      value !== this.value ||
      // Deep watchers and watchers on Object/Arrays should fire even
      // when the value is the same, because the value may
      // have mutated.
      isObject(value) ||
      this.deep
    ) {
      // set new value
      var oldValue = this.value;
      this.value = value;
      if (this.user) {
        try {
          this.cb.call(this.vm, value, oldValue);
        } catch (e) {
          handleError(e, this.vm, ("callback for watcher \"" + (this.expression) + "\""));
        }
      } else {
        this.cb.call(this.vm, value, oldValue);
      }
    }
  }
};

/**
 * Evaluate the value of the watcher.
 * This only gets called for lazy watchers.
 */
Watcher.prototype.evaluate = function evaluate () {
  this.value = this.get();
  this.dirty = false;
};

/**
 * Depend on all deps collected by this watcher.
 */
Watcher.prototype.depend = function depend () {
    var this$1 = this;

  var i = this.deps.length;
  while (i--) {
    this$1.deps[i].depend();
  }
};

/**
 * Remove self from all dependencies' subscriber list.
 */
Watcher.prototype.teardown = function teardown () {
    var this$1 = this;

  if (this.active) {
    // remove self from vm's watcher list
    // this is a somewhat expensive operation so we skip it
    // if the vm is being destroyed.
    if (!this.vm._isBeingDestroyed) {
      remove(this.vm._watchers, this);
    }
    var i = this.deps.length;
    while (i--) {
      this$1.deps[i].removeSub(this$1);
    }
    this.active = false;
  }
};



var sharedPropertyDefinition = {
  enumerable: true,
  configurable: true,
  get: noop,
  set: noop
};

function proxy (target, sourceKey, key) {
  sharedPropertyDefinition.get = function proxyGetter () {
    return this[sourceKey][key]
  };
  sharedPropertyDefinition.set = function proxySetter (val) {
    this[sourceKey][key] = val;
  };
  Object.defineProperty(target, key, sharedPropertyDefinition);
}

function initState (vm) {
  vm._watchers = [];
  var opts = vm.$options;
  if (opts.props) { initProps(vm, opts.props); }
  if (opts.methods) { initMethods(vm, opts.methods); }
  if (opts.data) {
    initData(vm);
  } else {
    observe(vm._data = {}, true );
  }
  if (opts.computed) { initComputed(vm, opts.computed); }
  if (opts.watch && opts.watch !== nativeWatch) {
    initWatch(vm, opts.watch);
  }
}

function initProps (vm, propsOptions) {
  var propsData = vm.$options.propsData || {};
  var props = vm._props = {};
  // cache prop keys so that future props updates can iterate using Array
  // instead of dynamic object key enumeration.
  var keys = vm.$options._propKeys = [];
  var isRoot = !vm.$parent;
  // root instance props should be converted
  if (!isRoot) {
    toggleObserving(false);
  }
  var loop = function ( key ) {
    keys.push(key);
    var value = validateProp(key, propsOptions, propsData, vm);
    
    if (false) { var hyphenatedKey; } else {
      defineReactive(props, key, value);
    }
    // static props are already proxied on the component's prototype
    // during Vue.extend(). We only need to proxy props defined at
    // instantiation here.
    if (!(key in vm)) {
      proxy(vm, "_props", key);
    }
  };

  for (var key in propsOptions) loop( key );
  toggleObserving(true);
}

function initData (vm) {
  var data = vm.$options.data;
  data = vm._data = typeof data === 'function'
    ? getData(data, vm)
    : data || {};
  if (!isPlainObject(data)) {
    data = {};
    "production" !== 'production' && warn(
      'data functions should return an object:\n' +
      'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function',
      vm
    );
  }
  // proxy data on instance
  var keys = Object.keys(data);
  var props = vm.$options.props;
  var methods = vm.$options.methods;
  var i = keys.length;
  while (i--) {
    var key = keys[i];
    if (false) {}
    if (props && hasOwn(props, key)) {
      "production" !== 'production' && warn(
        "The data property \"" + key + "\" is already declared as a prop. " +
        "Use prop default value instead.",
        vm
      );
    } else if (!isReserved(key)) {
      proxy(vm, "_data", key);
    }
  }
  // observe data
  observe(data, true );
}

function getData (data, vm) {
  // #7573 disable dep collection when invoking data getters
  pushTarget();
  try {
    return data.call(vm, vm)
  } catch (e) {
    handleError(e, vm, "data()");
    return {}
  } finally {
    popTarget();
  }
}

var computedWatcherOptions = { lazy: true };

function initComputed (vm, computed) {
  // $flow-disable-line
  var watchers = vm._computedWatchers = Object.create(null);
  // computed properties are just getters during SSR
  var isSSR = isServerRendering();

  for (var key in computed) {
    var userDef = computed[key];
    var getter = typeof userDef === 'function' ? userDef : userDef.get;
    if (false) {}

    if (!isSSR) {
      // create internal watcher for the computed property.
      watchers[key] = new Watcher(
        vm,
        getter || noop,
        noop,
        computedWatcherOptions
      );
    }

    // component-defined computed properties are already defined on the
    // component prototype. We only need to define computed properties defined
    // at instantiation here.
    if (!(key in vm)) {
      defineComputed(vm, key, userDef);
    } else if (false) {}
  }
}

function defineComputed (
  target,
  key,
  userDef
) {
  var shouldCache = !isServerRendering();
  if (typeof userDef === 'function') {
    sharedPropertyDefinition.get = shouldCache
      ? createComputedGetter(key)
      : userDef;
    sharedPropertyDefinition.set = noop;
  } else {
    sharedPropertyDefinition.get = userDef.get
      ? shouldCache && userDef.cache !== false
        ? createComputedGetter(key)
        : userDef.get
      : noop;
    sharedPropertyDefinition.set = userDef.set
      ? userDef.set
      : noop;
  }
  if (false) {}
  Object.defineProperty(target, key, sharedPropertyDefinition);
}

function createComputedGetter (key) {
  return function computedGetter () {
    var watcher = this._computedWatchers && this._computedWatchers[key];
    if (watcher) {
      if (watcher.dirty) {
        watcher.evaluate();
      }
      if (Dep.target) {
        watcher.depend();
      }
      return watcher.value
    }
  }
}

function initMethods (vm, methods) {
  var props = vm.$options.props;
  for (var key in methods) {
    if (false) {}
    vm[key] = methods[key] == null ? noop : bind(methods[key], vm);
  }
}

function initWatch (vm, watch) {
  for (var key in watch) {
    var handler = watch[key];
    if (Array.isArray(handler)) {
      for (var i = 0; i < handler.length; i++) {
        createWatcher(vm, key, handler[i]);
      }
    } else {
      createWatcher(vm, key, handler);
    }
  }
}

function createWatcher (
  vm,
  expOrFn,
  handler,
  options
) {
  if (isPlainObject(handler)) {
    options = handler;
    handler = handler.handler;
  }
  if (typeof handler === 'string') {
    handler = vm[handler];
  }
  return vm.$watch(expOrFn, handler, options)
}

function stateMixin (Vue) {
  // flow somehow has problems with directly declared definition object
  // when using Object.defineProperty, so we have to procedurally build up
  // the object here.
  var dataDef = {};
  dataDef.get = function () { return this._data };
  var propsDef = {};
  propsDef.get = function () { return this._props };
  if (false) {}
  Object.defineProperty(Vue.prototype, '$data', dataDef);
  Object.defineProperty(Vue.prototype, '$props', propsDef);

  Vue.prototype.$set = set;
  Vue.prototype.$delete = del;

  Vue.prototype.$watch = function (
    expOrFn,
    cb,
    options
  ) {
    var vm = this;
    if (isPlainObject(cb)) {
      return createWatcher(vm, expOrFn, cb, options)
    }
    options = options || {};
    options.user = true;
    var watcher = new Watcher(vm, expOrFn, cb, options);
    if (options.immediate) {
      cb.call(vm, watcher.value);
    }
    return function unwatchFn () {
      watcher.teardown();
    }
  };
}



function initProvide (vm) {
  var provide = vm.$options.provide;
  if (provide) {
    vm._provided = typeof provide === 'function'
      ? provide.call(vm)
      : provide;
  }
}

function initInjections (vm) {
  var result = resolveInject(vm.$options.inject, vm);
  if (result) {
    toggleObserving(false);
    Object.keys(result).forEach(function (key) {
      
      if (false) {} else {
        defineReactive(vm, key, result[key]);
      }
    });
    toggleObserving(true);
  }
}

function resolveInject (inject, vm) {
  if (inject) {
    // inject is :any because flow is not smart enough to figure out cached
    var result = Object.create(null);
    var keys = hasSymbol
      ? Reflect.ownKeys(inject).filter(function (key) {
        
        return Object.getOwnPropertyDescriptor(inject, key).enumerable
      })
      : Object.keys(inject);

    for (var i = 0; i < keys.length; i++) {
      var key = keys[i];
      var provideKey = inject[key].from;
      var source = vm;
      while (source) {
        if (source._provided && hasOwn(source._provided, provideKey)) {
          result[key] = source._provided[provideKey];
          break
        }
        source = source.$parent;
      }
      if (!source) {
        if ('default' in inject[key]) {
          var provideDefault = inject[key].default;
          result[key] = typeof provideDefault === 'function'
            ? provideDefault.call(vm)
            : provideDefault;
        } else if (false) {}
      }
    }
    return result
  }
}



/**
 * Runtime helper for rendering v-for lists.
 */
function renderList (
  val,
  render
) {
  var ret, i, l, keys, key;
  if (Array.isArray(val) || typeof val === 'string') {
    ret = new Array(val.length);
    for (i = 0, l = val.length; i < l; i++) {
      ret[i] = render(val[i], i);
    }
  } else if (typeof val === 'number') {
    ret = new Array(val);
    for (i = 0; i < val; i++) {
      ret[i] = render(i + 1, i);
    }
  } else if (isObject(val)) {
    keys = Object.keys(val);
    ret = new Array(keys.length);
    for (i = 0, l = keys.length; i < l; i++) {
      key = keys[i];
      ret[i] = render(val[key], key, i);
    }
  }
  if (isDef(ret)) {
    (ret)._isVList = true;
  }
  return ret
}



/**
 * Runtime helper for rendering <slot>
 */
function renderSlot (
  name,
  fallback,
  props,
  bindObject
) {
  var scopedSlotFn = this.$scopedSlots[name];
  var nodes;
  if (scopedSlotFn) { // scoped slot
    props = props || {};
    if (bindObject) {
      if (false) {}
      props = extend(extend({}, bindObject), props);
    }
    nodes = scopedSlotFn(props) || fallback;
  } else {
    var slotNodes = this.$slots[name];
    // warn duplicate slot usage
    if (slotNodes) {
      if (false) {}
      slotNodes._rendered = true;
    }
    nodes = slotNodes || fallback;
  }

  var target = props && props.slot;
  if (target) {
    return this.$createElement('template', { slot: target }, nodes)
  } else {
    return nodes
  }
}



/**
 * Runtime helper for resolving filters
 */
function resolveFilter (id) {
  return resolveAsset(this.$options, 'filters', id, true) || identity
}



function isKeyNotMatch (expect, actual) {
  if (Array.isArray(expect)) {
    return expect.indexOf(actual) === -1
  } else {
    return expect !== actual
  }
}

/**
 * Runtime helper for checking keyCodes from config.
 * exposed as Vue.prototype._k
 * passing in eventKeyName as last argument separately for backwards compat
 */
function checkKeyCodes (
  eventKeyCode,
  key,
  builtInKeyCode,
  eventKeyName,
  builtInKeyName
) {
  var mappedKeyCode = config.keyCodes[key] || builtInKeyCode;
  if (builtInKeyName && eventKeyName && !config.keyCodes[key]) {
    return isKeyNotMatch(builtInKeyName, eventKeyName)
  } else if (mappedKeyCode) {
    return isKeyNotMatch(mappedKeyCode, eventKeyCode)
  } else if (eventKeyName) {
    return hyphenate(eventKeyName) !== key
  }
}



/**
 * Runtime helper for merging v-bind="object" into a VNode's data.
 */
function bindObjectProps (
  data,
  tag,
  value,
  asProp,
  isSync
) {
  if (value) {
    if (!isObject(value)) {
      "production" !== 'production' && warn(
        'v-bind without argument expects an Object or Array value',
        this
      );
    } else {
      if (Array.isArray(value)) {
        value = toObject(value);
      }
      var hash;
      var loop = function ( key ) {
        if (
          key === 'class' ||
          key === 'style' ||
          isReservedAttribute(key)
        ) {
          hash = data;
        } else {
          var type = data.attrs && data.attrs.type;
          hash = asProp || config.mustUseProp(tag, type, key)
            ? data.domProps || (data.domProps = {})
            : data.attrs || (data.attrs = {});
        }
        if (!(key in hash)) {
          hash[key] = value[key];

          if (isSync) {
            var on = data.on || (data.on = {});
            on[("update:" + key)] = function ($event) {
              value[key] = $event;
            };
          }
        }
      };

      for (var key in value) loop( key );
    }
  }
  return data
}



/**
 * Runtime helper for rendering static trees.
 */
function renderStatic (
  index,
  isInFor
) {
  var cached = this._staticTrees || (this._staticTrees = []);
  var tree = cached[index];
  // if has already-rendered static tree and not inside v-for,
  // we can reuse the same tree.
  if (tree && !isInFor) {
    return tree
  }
  // otherwise, render a fresh tree.
  tree = cached[index] = this.$options.staticRenderFns[index].call(
    this._renderProxy,
    null,
    this // for render fns generated for functional component templates
  );
  markStatic(tree, ("__static__" + index), false);
  return tree
}

/**
 * Runtime helper for v-once.
 * Effectively it means marking the node as static with a unique key.
 */
function markOnce (
  tree,
  index,
  key
) {
  markStatic(tree, ("__once__" + index + (key ? ("_" + key) : "")), true);
  return tree
}

function markStatic (
  tree,
  key,
  isOnce
) {
  if (Array.isArray(tree)) {
    for (var i = 0; i < tree.length; i++) {
      if (tree[i] && typeof tree[i] !== 'string') {
        markStaticNode(tree[i], (key + "_" + i), isOnce);
      }
    }
  } else {
    markStaticNode(tree, key, isOnce);
  }
}

function markStaticNode (node, key, isOnce) {
  node.isStatic = true;
  node.key = key;
  node.isOnce = isOnce;
}



function bindObjectListeners (data, value) {
  if (value) {
    if (!isPlainObject(value)) {
      "production" !== 'production' && warn(
        'v-on without argument expects an Object value',
        this
      );
    } else {
      var on = data.on = data.on ? extend({}, data.on) : {};
      for (var key in value) {
        var existing = on[key];
        var ours = value[key];
        on[key] = existing ? [].concat(existing, ours) : ours;
      }
    }
  }
  return data
}



function installRenderHelpers (target) {
  target._o = markOnce;
  target._n = toNumber;
  target._s = toString;
  target._l = renderList;
  target._t = renderSlot;
  target._q = looseEqual;
  target._i = looseIndexOf;
  target._m = renderStatic;
  target._f = resolveFilter;
  target._k = checkKeyCodes;
  target._b = bindObjectProps;
  target._v = createTextVNode;
  target._e = createEmptyVNode;
  target._u = resolveScopedSlots;
  target._g = bindObjectListeners;
}



function FunctionalRenderContext (
  data,
  props,
  children,
  parent,
  Ctor
) {
  var options = Ctor.options;
  // ensure the createElement function in functional components
  // gets a unique context - this is necessary for correct named slot check
  var contextVm;
  if (hasOwn(parent, '_uid')) {
    contextVm = Object.create(parent);
    // $flow-disable-line
    contextVm._original = parent;
  } else {
    // the context vm passed in is a functional context as well.
    // in this case we want to make sure we are able to get a hold to the
    // real context instance.
    contextVm = parent;
    // $flow-disable-line
    parent = parent._original;
  }
  var isCompiled = isTrue(options._compiled);
  var needNormalization = !isCompiled;

  this.data = data;
  this.props = props;
  this.children = children;
  this.parent = parent;
  this.listeners = data.on || emptyObject;
  this.injections = resolveInject(options.inject, parent);
  this.slots = function () { return resolveSlots(children, parent); };

  // support for compiled functional template
  if (isCompiled) {
    // exposing $options for renderStatic()
    this.$options = options;
    // pre-resolve slots for renderSlot()
    this.$slots = this.slots();
    this.$scopedSlots = data.scopedSlots || emptyObject;
  }

  if (options._scopeId) {
    this._c = function (a, b, c, d) {
      var vnode = createElement(contextVm, a, b, c, d, needNormalization);
      if (vnode && !Array.isArray(vnode)) {
        vnode.fnScopeId = options._scopeId;
        vnode.fnContext = parent;
      }
      return vnode
    };
  } else {
    this._c = function (a, b, c, d) { return createElement(contextVm, a, b, c, d, needNormalization); };
  }
}

installRenderHelpers(FunctionalRenderContext.prototype);

function createFunctionalComponent (
  Ctor,
  propsData,
  data,
  contextVm,
  children
) {
  var options = Ctor.options;
  var props = {};
  var propOptions = options.props;
  if (isDef(propOptions)) {
    for (var key in propOptions) {
      props[key] = validateProp(key, propOptions, propsData || emptyObject);
    }
  } else {
    if (isDef(data.attrs)) { mergeProps(props, data.attrs); }
    if (isDef(data.props)) { mergeProps(props, data.props); }
  }

  var renderContext = new FunctionalRenderContext(
    data,
    props,
    children,
    contextVm,
    Ctor
  );

  var vnode = options.render.call(null, renderContext._c, renderContext);

  if (vnode instanceof VNode) {
    return cloneAndMarkFunctionalResult(vnode, data, renderContext.parent, options)
  } else if (Array.isArray(vnode)) {
    var vnodes = normalizeChildren(vnode) || [];
    var res = new Array(vnodes.length);
    for (var i = 0; i < vnodes.length; i++) {
      res[i] = cloneAndMarkFunctionalResult(vnodes[i], data, renderContext.parent, options);
    }
    return res
  }
}

function cloneAndMarkFunctionalResult (vnode, data, contextVm, options) {
  // #7817 clone node before setting fnContext, otherwise if the node is reused
  // (e.g. it was from a cached normal slot) the fnContext causes named slots
  // that should not be matched to match.
  var clone = cloneVNode(vnode);
  clone.fnContext = contextVm;
  clone.fnOptions = options;
  if (data.slot) {
    (clone.data || (clone.data = {})).slot = data.slot;
  }
  return clone
}

function mergeProps (to, from) {
  for (var key in from) {
    to[camelize(key)] = from[key];
  }
}






// Register the component hook to weex native render engine.
// The hook will be triggered by native, not javascript.


// Updates the state of the component to weex native render engine.



// https://github.com/Hanks10100/weex-native-directive/tree/master/component

// listening on native callback





// inline hooks to be invoked on component VNodes during patch
var componentVNodeHooks = {
  init: function init (
    vnode,
    hydrating,
    parentElm,
    refElm
  ) {
    if (
      vnode.componentInstance &&
      !vnode.componentInstance._isDestroyed &&
      vnode.data.keepAlive
    ) {
      // kept-alive components, treat as a patch
      var mountedNode = vnode; // work around flow
      componentVNodeHooks.prepatch(mountedNode, mountedNode);
    } else {
      var child = vnode.componentInstance = createComponentInstanceForVnode(
        vnode,
        activeInstance,
        parentElm,
        refElm
      );
      child.$mount(hydrating ? vnode.elm : undefined, hydrating);
    }
  },

  prepatch: function prepatch (oldVnode, vnode) {
    var options = vnode.componentOptions;
    var child = vnode.componentInstance = oldVnode.componentInstance;
    updateChildComponent(
      child,
      options.propsData, // updated props
      options.listeners, // updated listeners
      vnode, // new parent vnode
      options.children // new children
    );
  },

  insert: function insert (vnode) {
    var context = vnode.context;
    var componentInstance = vnode.componentInstance;
    if (!componentInstance._isMounted) {
      componentInstance._isMounted = true;
      callHook(componentInstance, 'mounted');
    }
    if (vnode.data.keepAlive) {
      if (context._isMounted) {
        // vue-router#1212
        // During updates, a kept-alive component's child components may
        // change, so directly walking the tree here may call activated hooks
        // on incorrect children. Instead we push them into a queue which will
        // be processed after the whole patch process ended.
        queueActivatedComponent(componentInstance);
      } else {
        activateChildComponent(componentInstance, true );
      }
    }
  },

  destroy: function destroy (vnode) {
    var componentInstance = vnode.componentInstance;
    if (!componentInstance._isDestroyed) {
      if (!vnode.data.keepAlive) {
        componentInstance.$destroy();
      } else {
        deactivateChildComponent(componentInstance, true );
      }
    }
  }
};

var hooksToMerge = Object.keys(componentVNodeHooks);

function createComponent (
  Ctor,
  data,
  context,
  children,
  tag
) {
  if (isUndef(Ctor)) {
    return
  }

  var baseCtor = context.$options._base;

  // plain options object: turn it into a constructor
  if (isObject(Ctor)) {
    Ctor = baseCtor.extend(Ctor);
  }

  // if at this stage it's not a constructor or an async component factory,
  // reject.
  if (typeof Ctor !== 'function') {
    if (false) {}
    return
  }

  // async component
  var asyncFactory;
  if (isUndef(Ctor.cid)) {
    asyncFactory = Ctor;
    Ctor = resolveAsyncComponent(asyncFactory, baseCtor, context);
    if (Ctor === undefined) {
      // return a placeholder node for async component, which is rendered
      // as a comment node but preserves all the raw information for the node.
      // the information will be used for async server-rendering and hydration.
      return createAsyncPlaceholder(
        asyncFactory,
        data,
        context,
        children,
        tag
      )
    }
  }

  data = data || {};

  // resolve constructor options in case global mixins are applied after
  // component constructor creation
  resolveConstructorOptions(Ctor);

  // transform component v-model data into props & events
  if (isDef(data.model)) {
    transformModel(Ctor.options, data);
  }

  // extract props
  var propsData = extractPropsFromVNodeData(data, Ctor, tag);

  // functional component
  if (isTrue(Ctor.options.functional)) {
    return createFunctionalComponent(Ctor, propsData, data, context, children)
  }

  // extract listeners, since these needs to be treated as
  // child component listeners instead of DOM listeners
  var listeners = data.on;
  // replace with listeners with .native modifier
  // so it gets processed during parent component patch.
  data.on = data.nativeOn;

  if (isTrue(Ctor.options.abstract)) {
    // abstract components do not keep anything
    // other than props & listeners & slot

    // work around flow
    var slot = data.slot;
    data = {};
    if (slot) {
      data.slot = slot;
    }
  }

  // install component management hooks onto the placeholder node
  installComponentHooks(data);

  // return a placeholder vnode
  var name = Ctor.options.name || tag;
  var vnode = new VNode(
    ("vue-component-" + (Ctor.cid) + (name ? ("-" + name) : '')),
    data, undefined, undefined, undefined, context,
    { Ctor: Ctor, propsData: propsData, listeners: listeners, tag: tag, children: children },
    asyncFactory
  );

  // Weex specific: invoke recycle-list optimized @render function for
  // extracting cell-slot template.
  // https://github.com/Hanks10100/weex-native-directive/tree/master/component
  
  return vnode
}

function createComponentInstanceForVnode (
  vnode, // we know it's MountedComponentVNode but flow doesn't
  parent, // activeInstance in lifecycle state
  parentElm,
  refElm
) {
  var options = {
    _isComponent: true,
    parent: parent,
    _parentVnode: vnode,
    _parentElm: parentElm || null,
    _refElm: refElm || null
  };
  // check inline-template render functions
  var inlineTemplate = vnode.data.inlineTemplate;
  if (isDef(inlineTemplate)) {
    options.render = inlineTemplate.render;
    options.staticRenderFns = inlineTemplate.staticRenderFns;
  }
  return new vnode.componentOptions.Ctor(options)
}

function installComponentHooks (data) {
  var hooks = data.hook || (data.hook = {});
  for (var i = 0; i < hooksToMerge.length; i++) {
    var key = hooksToMerge[i];
    hooks[key] = componentVNodeHooks[key];
  }
}

// transform component v-model info (value and callback) into
// prop and event handler respectively.
function transformModel (options, data) {
  var prop = (options.model && options.model.prop) || 'value';
  var event = (options.model && options.model.event) || 'input';(data.props || (data.props = {}))[prop] = data.model.value;
  var on = data.on || (data.on = {});
  if (isDef(on[event])) {
    on[event] = [data.model.callback].concat(on[event]);
  } else {
    on[event] = data.model.callback;
  }
}



var SIMPLE_NORMALIZE = 1;
var ALWAYS_NORMALIZE = 2;

// wrapper function for providing a more flexible interface
// without getting yelled at by flow
function createElement (
  context,
  tag,
  data,
  children,
  normalizationType,
  alwaysNormalize
) {
  if (Array.isArray(data) || isPrimitive(data)) {
    normalizationType = children;
    children = data;
    data = undefined;
  }
  if (isTrue(alwaysNormalize)) {
    normalizationType = ALWAYS_NORMALIZE;
  }
  return _createElement(context, tag, data, children, normalizationType)
}

function _createElement (
  context,
  tag,
  data,
  children,
  normalizationType
) {
  if (isDef(data) && isDef((data).__ob__)) {
    "production" !== 'production' && warn(
      "Avoid using observed data object as vnode data: " + (JSON.stringify(data)) + "\n" +
      'Always create fresh vnode data objects in each render!',
      context
    );
    return createEmptyVNode()
  }
  // object syntax in v-bind
  if (isDef(data) && isDef(data.is)) {
    tag = data.is;
  }
  if (!tag) {
    // in case of component :is set to falsy value
    return createEmptyVNode()
  }
  // warn against non-primitive key
  if (false
  ) {}
  // support single function children as default scoped slot
  if (Array.isArray(children) &&
    typeof children[0] === 'function'
  ) {
    data = data || {};
    data.scopedSlots = { default: children[0] };
    children.length = 0;
  }
  if (normalizationType === ALWAYS_NORMALIZE) {
    children = normalizeChildren(children);
  } else if (normalizationType === SIMPLE_NORMALIZE) {
    children = simpleNormalizeChildren(children);
  }
  var vnode, ns;
  if (typeof tag === 'string') {
    var Ctor;
    ns = (context.$vnode && context.$vnode.ns) || config.getTagNamespace(tag);
    if (config.isReservedTag(tag)) {
      // platform built-in elements
      vnode = new VNode(
        config.parsePlatformTagName(tag), data, children,
        undefined, undefined, context
      );
    } else if (isDef(Ctor = resolveAsset(context.$options, 'components', tag))) {
      // component
      vnode = createComponent(Ctor, data, context, children, tag);
    } else {
      // unknown or unlisted namespaced elements
      // check at runtime because it may get assigned a namespace when its
      // parent normalizes children
      vnode = new VNode(
        tag, data, children,
        undefined, undefined, context
      );
    }
  } else {
    // direct component options / constructor
    vnode = createComponent(tag, data, context, children);
  }
  if (Array.isArray(vnode)) {
    return vnode
  } else if (isDef(vnode)) {
    if (isDef(ns)) { applyNS(vnode, ns); }
    if (isDef(data)) { registerDeepBindings(data); }
    return vnode
  } else {
    return createEmptyVNode()
  }
}

function applyNS (vnode, ns, force) {
  vnode.ns = ns;
  if (vnode.tag === 'foreignObject') {
    // use default namespace inside foreignObject
    ns = undefined;
    force = true;
  }
  if (isDef(vnode.children)) {
    for (var i = 0, l = vnode.children.length; i < l; i++) {
      var child = vnode.children[i];
      if (isDef(child.tag) && (
        isUndef(child.ns) || (isTrue(force) && child.tag !== 'svg'))) {
        applyNS(child, ns, force);
      }
    }
  }
}

// ref #5318
// necessary to ensure parent re-render when deep bindings like :style and
// :class are used on slot nodes
function registerDeepBindings (data) {
  if (isObject(data.style)) {
    traverse(data.style);
  }
  if (isObject(data.class)) {
    traverse(data.class);
  }
}



function initRender (vm) {
  vm._vnode = null; // the root of the child tree
  vm._staticTrees = null; // v-once cached trees
  var options = vm.$options;
  var parentVnode = vm.$vnode = options._parentVnode; // the placeholder node in parent tree
  var renderContext = parentVnode && parentVnode.context;
  vm.$slots = resolveSlots(options._renderChildren, renderContext);
  vm.$scopedSlots = emptyObject;
  // bind the createElement fn to this instance
  // so that we get proper render context inside it.
  // args order: tag, data, children, normalizationType, alwaysNormalize
  // internal version is used by render functions compiled from templates
  vm._c = function (a, b, c, d) { return createElement(vm, a, b, c, d, false); };
  // normalization is always applied for the public version, used in
  // user-written render functions.
  vm.$createElement = function (a, b, c, d) { return createElement(vm, a, b, c, d, true); };

  // $attrs & $listeners are exposed for easier HOC creation.
  // they need to be reactive so that HOCs using them are always updated
  var parentData = parentVnode && parentVnode.data;

  
  if (false) {} else {
    defineReactive(vm, '$attrs', parentData && parentData.attrs || emptyObject, null, true);
    defineReactive(vm, '$listeners', options._parentListeners || emptyObject, null, true);
  }
}

function renderMixin (Vue) {
  // install runtime convenience helpers
  installRenderHelpers(Vue.prototype);

  Vue.prototype.$nextTick = function (fn) {
    return nextTick(fn, this)
  };

  Vue.prototype._render = function () {
    var vm = this;
    var ref = vm.$options;
    var render = ref.render;
    var _parentVnode = ref._parentVnode;

    // reset _rendered flag on slots for duplicate slot check
    if (false) { var key; }

    if (_parentVnode) {
      vm.$scopedSlots = _parentVnode.data.scopedSlots || emptyObject;
    }

    // set parent vnode. this allows render functions to have access
    // to the data on the placeholder node.
    vm.$vnode = _parentVnode;
    // render self
    var vnode;
    try {
      vnode = render.call(vm._renderProxy, vm.$createElement);
    } catch (e) {
      handleError(e, vm, "render");
      // return error render result,
      // or previous vnode to prevent render error causing blank component
      
      if (false) {} else {
        vnode = vm._vnode;
      }
    }
    // return empty vnode in case the render function errored out
    if (!(vnode instanceof VNode)) {
      if (false) {}
      vnode = createEmptyVNode();
    }
    // set parent
    vnode.parent = _parentVnode;
    return vnode
  };
}



var uid$3 = 0;

function initMixin (Vue) {
  Vue.prototype._init = function (options) {
    var vm = this;
    // a uid
    vm._uid = uid$3++;

    var startTag, endTag;
    
    if (false) {}

    // a flag to avoid this being observed
    vm._isVue = true;
    // merge options
    if (options && options._isComponent) {
      // optimize internal component instantiation
      // since dynamic options merging is pretty slow, and none of the
      // internal component options needs special treatment.
      initInternalComponent(vm, options);
    } else {
      vm.$options = mergeOptions(
        resolveConstructorOptions(vm.constructor),
        options || {},
        vm
      );
    }
    
    if (false) {} else {
      vm._renderProxy = vm;
    }
    // expose real self
    vm._self = vm;
    initLifecycle(vm);
    initEvents(vm);
    initRender(vm);
    callHook(vm, 'beforeCreate');
    initInjections(vm); // resolve injections before data/props
    initState(vm);
    initProvide(vm); // resolve provide after data/props
    callHook(vm, 'created');

    
    if (false) {}

    if (vm.$options.el) {
      vm.$mount(vm.$options.el);
    }
  };
}

function initInternalComponent (vm, options) {
  var opts = vm.$options = Object.create(vm.constructor.options);
  // doing this because it's faster than dynamic enumeration.
  var parentVnode = options._parentVnode;
  opts.parent = options.parent;
  opts._parentVnode = parentVnode;
  opts._parentElm = options._parentElm;
  opts._refElm = options._refElm;

  var vnodeComponentOptions = parentVnode.componentOptions;
  opts.propsData = vnodeComponentOptions.propsData;
  opts._parentListeners = vnodeComponentOptions.listeners;
  opts._renderChildren = vnodeComponentOptions.children;
  opts._componentTag = vnodeComponentOptions.tag;

  if (options.render) {
    opts.render = options.render;
    opts.staticRenderFns = options.staticRenderFns;
  }
}

function resolveConstructorOptions (Ctor) {
  var options = Ctor.options;
  if (Ctor.super) {
    var superOptions = resolveConstructorOptions(Ctor.super);
    var cachedSuperOptions = Ctor.superOptions;
    if (superOptions !== cachedSuperOptions) {
      // super option changed,
      // need to resolve new options.
      Ctor.superOptions = superOptions;
      // check if there are any late-modified/attached options (#4976)
      var modifiedOptions = resolveModifiedOptions(Ctor);
      // update base extend options
      if (modifiedOptions) {
        extend(Ctor.extendOptions, modifiedOptions);
      }
      options = Ctor.options = mergeOptions(superOptions, Ctor.extendOptions);
      if (options.name) {
        options.components[options.name] = Ctor;
      }
    }
  }
  return options
}

function resolveModifiedOptions (Ctor) {
  var modified;
  var latest = Ctor.options;
  var extended = Ctor.extendOptions;
  var sealed = Ctor.sealedOptions;
  for (var key in latest) {
    if (latest[key] !== sealed[key]) {
      if (!modified) { modified = {}; }
      modified[key] = dedupe(latest[key], extended[key], sealed[key]);
    }
  }
  return modified
}

function dedupe (latest, extended, sealed) {
  // compare latest and sealed to ensure lifecycle hooks won't be duplicated
  // between merges
  if (Array.isArray(latest)) {
    var res = [];
    sealed = Array.isArray(sealed) ? sealed : [sealed];
    extended = Array.isArray(extended) ? extended : [extended];
    for (var i = 0; i < latest.length; i++) {
      // push original options and not sealed options to exclude duplicated options
      if (extended.indexOf(latest[i]) >= 0 || sealed.indexOf(latest[i]) < 0) {
        res.push(latest[i]);
      }
    }
    return res
  } else {
    return latest
  }
}

function Vue (options) {
  if (false
  ) {}
  this._init(options);
}

initMixin(Vue);
stateMixin(Vue);
eventsMixin(Vue);
lifecycleMixin(Vue);
renderMixin(Vue);



function initUse (Vue) {
  Vue.use = function (plugin) {
    var installedPlugins = (this._installedPlugins || (this._installedPlugins = []));
    if (installedPlugins.indexOf(plugin) > -1) {
      return this
    }

    // additional parameters
    var args = toArray(arguments, 1);
    args.unshift(this);
    if (typeof plugin.install === 'function') {
      plugin.install.apply(plugin, args);
    } else if (typeof plugin === 'function') {
      plugin.apply(null, args);
    }
    installedPlugins.push(plugin);
    return this
  };
}



function initMixin$1 (Vue) {
  Vue.mixin = function (mixin) {
    this.options = mergeOptions(this.options, mixin);
    return this
  };
}



function initExtend (Vue) {
  /**
   * Each instance constructor, including Vue, has a unique
   * cid. This enables us to create wrapped "child
   * constructors" for prototypal inheritance and cache them.
   */
  Vue.cid = 0;
  var cid = 1;

  /**
   * Class inheritance
   */
  Vue.extend = function (extendOptions) {
    extendOptions = extendOptions || {};
    var Super = this;
    var SuperId = Super.cid;
    var cachedCtors = extendOptions._Ctor || (extendOptions._Ctor = {});
    if (cachedCtors[SuperId]) {
      return cachedCtors[SuperId]
    }

    var name = extendOptions.name || Super.options.name;
    if (false) {}

    var Sub = function VueComponent (options) {
      this._init(options);
    };
    Sub.prototype = Object.create(Super.prototype);
    Sub.prototype.constructor = Sub;
    Sub.cid = cid++;
    Sub.options = mergeOptions(
      Super.options,
      extendOptions
    );
    Sub['super'] = Super;

    // For props and computed properties, we define the proxy getters on
    // the Vue instances at extension time, on the extended prototype. This
    // avoids Object.defineProperty calls for each instance created.
    if (Sub.options.props) {
      initProps$1(Sub);
    }
    if (Sub.options.computed) {
      initComputed$1(Sub);
    }

    // allow further extension/mixin/plugin usage
    Sub.extend = Super.extend;
    Sub.mixin = Super.mixin;
    Sub.use = Super.use;

    // create asset registers, so extended classes
    // can have their private assets too.
    ASSET_TYPES.forEach(function (type) {
      Sub[type] = Super[type];
    });
    // enable recursive self-lookup
    if (name) {
      Sub.options.components[name] = Sub;
    }

    // keep a reference to the super options at extension time.
    // later at instantiation we can check if Super's options have
    // been updated.
    Sub.superOptions = Super.options;
    Sub.extendOptions = extendOptions;
    Sub.sealedOptions = extend({}, Sub.options);

    // cache constructor
    cachedCtors[SuperId] = Sub;
    return Sub
  };
}

function initProps$1 (Comp) {
  var props = Comp.options.props;
  for (var key in props) {
    proxy(Comp.prototype, "_props", key);
  }
}

function initComputed$1 (Comp) {
  var computed = Comp.options.computed;
  for (var key in computed) {
    defineComputed(Comp.prototype, key, computed[key]);
  }
}



function initAssetRegisters (Vue) {
  /**
   * Create asset registration methods.
   */
  ASSET_TYPES.forEach(function (type) {
    Vue[type] = function (
      id,
      definition
    ) {
      if (!definition) {
        return this.options[type + 's'][id]
      } else {
        
        if (false) {}
        if (type === 'component' && isPlainObject(definition)) {
          definition.name = definition.name || id;
          definition = this.options._base.extend(definition);
        }
        if (type === 'directive' && typeof definition === 'function') {
          definition = { bind: definition, update: definition };
        }
        this.options[type + 's'][id] = definition;
        return definition
      }
    };
  });
}



function getComponentName (opts) {
  return opts && (opts.Ctor.options.name || opts.tag)
}

function matches (pattern, name) {
  if (Array.isArray(pattern)) {
    return pattern.indexOf(name) > -1
  } else if (typeof pattern === 'string') {
    return pattern.split(',').indexOf(name) > -1
  } else if (isRegExp(pattern)) {
    return pattern.test(name)
  }
  
  return false
}

function pruneCache (keepAliveInstance, filter) {
  var cache = keepAliveInstance.cache;
  var keys = keepAliveInstance.keys;
  var _vnode = keepAliveInstance._vnode;
  for (var key in cache) {
    var cachedNode = cache[key];
    if (cachedNode) {
      var name = getComponentName(cachedNode.componentOptions);
      if (name && !filter(name)) {
        pruneCacheEntry(cache, key, keys, _vnode);
      }
    }
  }
}

function pruneCacheEntry (
  cache,
  key,
  keys,
  current
) {
  var cached$$1 = cache[key];
  if (cached$$1 && (!current || cached$$1.tag !== current.tag)) {
    cached$$1.componentInstance.$destroy();
  }
  cache[key] = null;
  remove(keys, key);
}

var patternTypes = [String, RegExp, Array];

var KeepAlive = {
  name: 'keep-alive',
  abstract: true,

  props: {
    include: patternTypes,
    exclude: patternTypes,
    max: [String, Number]
  },

  created: function created () {
    this.cache = Object.create(null);
    this.keys = [];
  },

  destroyed: function destroyed () {
    var this$1 = this;

    for (var key in this$1.cache) {
      pruneCacheEntry(this$1.cache, key, this$1.keys);
    }
  },

  mounted: function mounted () {
    var this$1 = this;

    this.$watch('include', function (val) {
      pruneCache(this$1, function (name) { return matches(val, name); });
    });
    this.$watch('exclude', function (val) {
      pruneCache(this$1, function (name) { return !matches(val, name); });
    });
  },

  render: function render () {
    var slot = this.$slots.default;
    var vnode = getFirstComponentChild(slot);
    var componentOptions = vnode && vnode.componentOptions;
    if (componentOptions) {
      // check pattern
      var name = getComponentName(componentOptions);
      var ref = this;
      var include = ref.include;
      var exclude = ref.exclude;
      if (
        // not included
        (include && (!name || !matches(include, name))) ||
        // excluded
        (exclude && name && matches(exclude, name))
      ) {
        return vnode
      }

      var ref$1 = this;
      var cache = ref$1.cache;
      var keys = ref$1.keys;
      var key = vnode.key == null
        // same constructor may get registered as different local components
        // so cid alone is not enough (#3269)
        ? componentOptions.Ctor.cid + (componentOptions.tag ? ("::" + (componentOptions.tag)) : '')
        : vnode.key;
      if (cache[key]) {
        vnode.componentInstance = cache[key].componentInstance;
        // make current key freshest
        remove(keys, key);
        keys.push(key);
      } else {
        cache[key] = vnode;
        keys.push(key);
        // prune oldest entry
        if (this.max && keys.length > parseInt(this.max)) {
          pruneCacheEntry(cache, keys[0], keys, this._vnode);
        }
      }

      vnode.data.keepAlive = true;
    }
    return vnode || (slot && slot[0])
  }
}

var builtInComponents = {
  KeepAlive: KeepAlive
}



function initGlobalAPI (Vue) {
  // config
  var configDef = {};
  configDef.get = function () { return config; };
  if (false) {}
  Object.defineProperty(Vue, 'config', configDef);

  // exposed util methods.
  // NOTE: these are not considered part of the public API - avoid relying on
  // them unless you are aware of the risk.
  Vue.util = {
    warn: warn,
    extend: extend,
    mergeOptions: mergeOptions,
    defineReactive: defineReactive
  };

  Vue.set = set;
  Vue.delete = del;
  Vue.nextTick = nextTick;

  Vue.options = Object.create(null);
  ASSET_TYPES.forEach(function (type) {
    Vue.options[type + 's'] = Object.create(null);
  });

  // this is used to identify the "base" constructor to extend all plain-object
  // components with in Weex's multi-instance scenarios.
  Vue.options._base = Vue;

  extend(Vue.options.components, builtInComponents);

  initUse(Vue);
  initMixin$1(Vue);
  initExtend(Vue);
  initAssetRegisters(Vue);
}

initGlobalAPI(Vue);

Object.defineProperty(Vue.prototype, '$isServer', {
  get: isServerRendering
});

Object.defineProperty(Vue.prototype, '$ssrContext', {
  get: function get () {
    
    return this.$vnode && this.$vnode.ssrContext
  }
});

// expose FunctionalRenderContext for ssr runtime helper installation
Object.defineProperty(Vue, 'FunctionalRenderContext', {
  value: FunctionalRenderContext
});

Vue.version = '2.5.17';



// these are reserved for web because they are directly compiled away
// during template compilation
var isReservedAttr = makeMap('style,class');

// attributes that should be using props for binding
var acceptValue = makeMap('input,textarea,option,select,progress');
var mustUseProp = function (tag, type, attr) {
  return (
    (attr === 'value' && acceptValue(tag)) && type !== 'button' ||
    (attr === 'selected' && tag === 'option') ||
    (attr === 'checked' && tag === 'input') ||
    (attr === 'muted' && tag === 'video')
  )
};

var isEnumeratedAttr = makeMap('contenteditable,draggable,spellcheck');

var isBooleanAttr = makeMap(
  'allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,' +
  'default,defaultchecked,defaultmuted,defaultselected,defer,disabled,' +
  'enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,' +
  'muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,' +
  'required,reversed,scoped,seamless,selected,sortable,translate,' +
  'truespeed,typemustmatch,visible'
);

var xlinkNS = 'http://www.w3.org/1999/xlink';

var isXlink = function (name) {
  return name.charAt(5) === ':' && name.slice(0, 5) === 'xlink'
};

var getXlinkProp = function (name) {
  return isXlink(name) ? name.slice(6, name.length) : ''
};

var isFalsyAttrValue = function (val) {
  return val == null || val === false
};



function genClassForVnode (vnode) {
  var data = vnode.data;
  var parentNode = vnode;
  var childNode = vnode;
  while (isDef(childNode.componentInstance)) {
    childNode = childNode.componentInstance._vnode;
    if (childNode && childNode.data) {
      data = mergeClassData(childNode.data, data);
    }
  }
  while (isDef(parentNode = parentNode.parent)) {
    if (parentNode && parentNode.data) {
      data = mergeClassData(data, parentNode.data);
    }
  }
  return renderClass(data.staticClass, data.class)
}

function mergeClassData (child, parent) {
  return {
    staticClass: concat(child.staticClass, parent.staticClass),
    class: isDef(child.class)
      ? [child.class, parent.class]
      : parent.class
  }
}

function renderClass (
  staticClass,
  dynamicClass
) {
  if (isDef(staticClass) || isDef(dynamicClass)) {
    return concat(staticClass, stringifyClass(dynamicClass))
  }
  
  return ''
}

function concat (a, b) {
  return a ? b ? (a + ' ' + b) : a : (b || '')
}

function stringifyClass (value) {
  if (Array.isArray(value)) {
    return stringifyArray(value)
  }
  if (isObject(value)) {
    return stringifyObject(value)
  }
  if (typeof value === 'string') {
    return value
  }
  
  return ''
}

function stringifyArray (value) {
  var res = '';
  var stringified;
  for (var i = 0, l = value.length; i < l; i++) {
    if (isDef(stringified = stringifyClass(value[i])) && stringified !== '') {
      if (res) { res += ' '; }
      res += stringified;
    }
  }
  return res
}

function stringifyObject (value) {
  var res = '';
  for (var key in value) {
    if (value[key]) {
      if (res) { res += ' '; }
      res += key;
    }
  }
  return res
}



var namespaceMap = {
  svg: 'http://www.w3.org/2000/svg',
  math: 'http://www.w3.org/1998/Math/MathML'
};

var isHTMLTag = makeMap(
  'html,body,base,head,link,meta,style,title,' +
  'address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,' +
  'div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,' +
  'a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,' +
  's,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,' +
  'embed,object,param,source,canvas,script,noscript,del,ins,' +
  'caption,col,colgroup,table,thead,tbody,td,th,tr,' +
  'button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,' +
  'output,progress,select,textarea,' +
  'details,dialog,menu,menuitem,summary,' +
  'content,element,shadow,template,blockquote,iframe,tfoot'
);

// this map is intentionally selective, only covering SVG elements that may
// contain child elements.
var isSVG = makeMap(
  'svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,' +
  'foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,' +
  'polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view',
  true
);



var isReservedTag = function (tag) {
  return isHTMLTag(tag) || isSVG(tag)
};

function getTagNamespace (tag) {
  if (isSVG(tag)) {
    return 'svg'
  }
  // basic support for MathML
  // note it doesn't support other MathML elements being component roots
  if (tag === 'math') {
    return 'math'
  }
}

var unknownElementCache = Object.create(null);
function isUnknownElement (tag) {
  
  if (!inBrowser) {
    return true
  }
  if (isReservedTag(tag)) {
    return false
  }
  tag = tag.toLowerCase();
  
  if (unknownElementCache[tag] != null) {
    return unknownElementCache[tag]
  }
  var el = document.createElement(tag);
  if (tag.indexOf('-') > -1) {
    // http://stackoverflow.com/a/28210364/1070244
    return (unknownElementCache[tag] = (
      el.constructor === window.HTMLUnknownElement ||
      el.constructor === window.HTMLElement
    ))
  } else {
    return (unknownElementCache[tag] = /HTMLUnknownElement/.test(el.toString()))
  }
}

var isTextInputType = makeMap('text,number,password,search,email,tel,url');



/**
 * Query an element selector if it's not an element already.
 */
function query (el) {
  if (typeof el === 'string') {
    var selected = document.querySelector(el);
    if (!selected) {
      "production" !== 'production' && warn(
        'Cannot find element: ' + el
      );
      return document.createElement('div')
    }
    return selected
  } else {
    return el
  }
}



function createElement$1 (tagName, vnode) {
  var elm = document.createElement(tagName);
  if (tagName !== 'select') {
    return elm
  }
  // false or null will remove the attribute but undefined will not
  if (vnode.data && vnode.data.attrs && vnode.data.attrs.multiple !== undefined) {
    elm.setAttribute('multiple', 'multiple');
  }
  return elm
}

function createElementNS (namespace, tagName) {
  return document.createElementNS(namespaceMap[namespace], tagName)
}

function createTextNode (text) {
  return document.createTextNode(text)
}

function createComment (text) {
  return document.createComment(text)
}

function insertBefore (parentNode, newNode, referenceNode) {
  parentNode.insertBefore(newNode, referenceNode);
}

function removeChild (node, child) {
  node.removeChild(child);
}

function appendChild (node, child) {
  node.appendChild(child);
}

function parentNode (node) {
  return node.parentNode
}

function nextSibling (node) {
  return node.nextSibling
}

function tagName (node) {
  return node.tagName
}

function setTextContent (node, text) {
  node.textContent = text;
}

function setStyleScope (node, scopeId) {
  node.setAttribute(scopeId, '');
}


var nodeOps = Object.freeze({
	createElement: createElement$1,
	createElementNS: createElementNS,
	createTextNode: createTextNode,
	createComment: createComment,
	insertBefore: insertBefore,
	removeChild: removeChild,
	appendChild: appendChild,
	parentNode: parentNode,
	nextSibling: nextSibling,
	tagName: tagName,
	setTextContent: setTextContent,
	setStyleScope: setStyleScope
});



var ref = {
  create: function create (_, vnode) {
    registerRef(vnode);
  },
  update: function update (oldVnode, vnode) {
    if (oldVnode.data.ref !== vnode.data.ref) {
      registerRef(oldVnode, true);
      registerRef(vnode);
    }
  },
  destroy: function destroy (vnode) {
    registerRef(vnode, true);
  }
}

function registerRef (vnode, isRemoval) {
  var key = vnode.data.ref;
  if (!isDef(key)) { return }

  var vm = vnode.context;
  var ref = vnode.componentInstance || vnode.elm;
  var refs = vm.$refs;
  if (isRemoval) {
    if (Array.isArray(refs[key])) {
      remove(refs[key], ref);
    } else if (refs[key] === ref) {
      refs[key] = undefined;
    }
  } else {
    if (vnode.data.refInFor) {
      if (!Array.isArray(refs[key])) {
        refs[key] = [ref];
      } else if (refs[key].indexOf(ref) < 0) {
        // $flow-disable-line
        refs[key].push(ref);
      }
    } else {
      refs[key] = ref;
    }
  }
}

/**
 * Virtual DOM patching algorithm based on Snabbdom by
 * Simon Friis Vindum (@paldepind)
 * Licensed under the MIT License
 * https://github.com/paldepind/snabbdom/blob/master/LICENSE
 *
 * modified by Evan You (@yyx990803)
 *
 * Not type-checking this because this file is perf-critical and the cost
 * of making flow understand it is not worth it.
 */

var emptyNode = new VNode('', {}, []);

var hooks = ['create', 'activate', 'update', 'remove', 'destroy'];

function sameVnode (a, b) {
  return (
    a.key === b.key && (
      (
        a.tag === b.tag &&
        a.isComment === b.isComment &&
        isDef(a.data) === isDef(b.data) &&
        sameInputType(a, b)
      ) || (
        isTrue(a.isAsyncPlaceholder) &&
        a.asyncFactory === b.asyncFactory &&
        isUndef(b.asyncFactory.error)
      )
    )
  )
}

function sameInputType (a, b) {
  if (a.tag !== 'input') { return true }
  var i;
  var typeA = isDef(i = a.data) && isDef(i = i.attrs) && i.type;
  var typeB = isDef(i = b.data) && isDef(i = i.attrs) && i.type;
  return typeA === typeB || isTextInputType(typeA) && isTextInputType(typeB)
}

function createKeyToOldIdx (children, beginIdx, endIdx) {
  var i, key;
  var map = {};
  for (i = beginIdx; i <= endIdx; ++i) {
    key = children[i].key;
    if (isDef(key)) { map[key] = i; }
  }
  return map
}

function createPatchFunction (backend) {
  var i, j;
  var cbs = {};

  var modules = backend.modules;
  var nodeOps = backend.nodeOps;

  for (i = 0; i < hooks.length; ++i) {
    cbs[hooks[i]] = [];
    for (j = 0; j < modules.length; ++j) {
      if (isDef(modules[j][hooks[i]])) {
        cbs[hooks[i]].push(modules[j][hooks[i]]);
      }
    }
  }

  function emptyNodeAt (elm) {
    return new VNode(nodeOps.tagName(elm).toLowerCase(), {}, [], undefined, elm)
  }

  function createRmCb (childElm, listeners) {
    function remove () {
      if (--remove.listeners === 0) {
        removeNode(childElm);
      }
    }
    remove.listeners = listeners;
    return remove
  }

  function removeNode (el) {
    var parent = nodeOps.parentNode(el);
    // element may have already been removed due to v-html / v-text
    if (isDef(parent)) {
      nodeOps.removeChild(parent, el);
    }
  }

  function isUnknownElement$$1 (vnode, inVPre) {
    return (
      !inVPre &&
      !vnode.ns &&
      !(
        config.ignoredElements.length &&
        config.ignoredElements.some(function (ignore) {
          return isRegExp(ignore)
            ? ignore.test(vnode.tag)
            : ignore === vnode.tag
        })
      ) &&
      config.isUnknownElement(vnode.tag)
    )
  }

  var creatingElmInVPre = 0;

  function createElm (
    vnode,
    insertedVnodeQueue,
    parentElm,
    refElm,
    nested,
    ownerArray,
    index
  ) {
    if (isDef(vnode.elm) && isDef(ownerArray)) {
      // This vnode was used in a previous render!
      // now it's used as a new node, overwriting its elm would cause
      // potential patch errors down the road when it's used as an insertion
      // reference node. Instead, we clone the node on-demand before creating
      // associated DOM element for it.
      vnode = ownerArray[index] = cloneVNode(vnode);
    }

    vnode.isRootInsert = !nested; // for transition enter check
    if (createComponent(vnode, insertedVnodeQueue, parentElm, refElm)) {
      return
    }

    var data = vnode.data;
    var children = vnode.children;
    var tag = vnode.tag;
    if (isDef(tag)) {
      if (false) {}

      vnode.elm = vnode.ns
        ? nodeOps.createElementNS(vnode.ns, tag)
        : nodeOps.createElement(tag, vnode);
      setScope(vnode);

      
      {
        createChildren(vnode, children, insertedVnodeQueue);
        if (isDef(data)) {
          invokeCreateHooks(vnode, insertedVnodeQueue);
        }
        insert(parentElm, vnode.elm, refElm);
      }

      if (false) {}
    } else if (isTrue(vnode.isComment)) {
      vnode.elm = nodeOps.createComment(vnode.text);
      insert(parentElm, vnode.elm, refElm);
    } else {
      vnode.elm = nodeOps.createTextNode(vnode.text);
      insert(parentElm, vnode.elm, refElm);
    }
  }

  function createComponent (vnode, insertedVnodeQueue, parentElm, refElm) {
    var i = vnode.data;
    if (isDef(i)) {
      var isReactivated = isDef(vnode.componentInstance) && i.keepAlive;
      if (isDef(i = i.hook) && isDef(i = i.init)) {
        i(vnode, false , parentElm, refElm);
      }
      // after calling the init hook, if the vnode is a child component
      // it should've created a child instance and mounted it. the child
      // component also has set the placeholder vnode's elm.
      // in that case we can just return the element and be done.
      if (isDef(vnode.componentInstance)) {
        initComponent(vnode, insertedVnodeQueue);
        if (isTrue(isReactivated)) {
          reactivateComponent(vnode, insertedVnodeQueue, parentElm, refElm);
        }
        return true
      }
    }
  }

  function initComponent (vnode, insertedVnodeQueue) {
    if (isDef(vnode.data.pendingInsert)) {
      insertedVnodeQueue.push.apply(insertedVnodeQueue, vnode.data.pendingInsert);
      vnode.data.pendingInsert = null;
    }
    vnode.elm = vnode.componentInstance.$el;
    if (isPatchable(vnode)) {
      invokeCreateHooks(vnode, insertedVnodeQueue);
      setScope(vnode);
    } else {
      // empty component root.
      // skip all element-related modules except for ref (#3455)
      registerRef(vnode);
      // make sure to invoke the insert hook
      insertedVnodeQueue.push(vnode);
    }
  }

  function reactivateComponent (vnode, insertedVnodeQueue, parentElm, refElm) {
    var i;
    // hack for #4339: a reactivated component with inner transition
    // does not trigger because the inner node's created hooks are not called
    // again. It's not ideal to involve module-specific logic in here but
    // there doesn't seem to be a better way to do it.
    var innerNode = vnode;
    while (innerNode.componentInstance) {
      innerNode = innerNode.componentInstance._vnode;
      if (isDef(i = innerNode.data) && isDef(i = i.transition)) {
        for (i = 0; i < cbs.activate.length; ++i) {
          cbs.activate[i](emptyNode, innerNode);
        }
        insertedVnodeQueue.push(innerNode);
        break
      }
    }
    // unlike a newly created component,
    // a reactivated keep-alive component doesn't insert itself
    insert(parentElm, vnode.elm, refElm);
  }

  function insert (parent, elm, ref$$1) {
    if (isDef(parent)) {
      if (isDef(ref$$1)) {
        if (ref$$1.parentNode === parent) {
          nodeOps.insertBefore(parent, elm, ref$$1);
        }
      } else {
        nodeOps.appendChild(parent, elm);
      }
    }
  }

  function createChildren (vnode, children, insertedVnodeQueue) {
    if (Array.isArray(children)) {
      if (false) {}
      for (var i = 0; i < children.length; ++i) {
        createElm(children[i], insertedVnodeQueue, vnode.elm, null, true, children, i);
      }
    } else if (isPrimitive(vnode.text)) {
      nodeOps.appendChild(vnode.elm, nodeOps.createTextNode(String(vnode.text)));
    }
  }

  function isPatchable (vnode) {
    while (vnode.componentInstance) {
      vnode = vnode.componentInstance._vnode;
    }
    return isDef(vnode.tag)
  }

  function invokeCreateHooks (vnode, insertedVnodeQueue) {
    for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {
      cbs.create[i$1](emptyNode, vnode);
    }
    i = vnode.data.hook; // Reuse variable
    if (isDef(i)) {
      if (isDef(i.create)) { i.create(emptyNode, vnode); }
      if (isDef(i.insert)) { insertedVnodeQueue.push(vnode); }
    }
  }

  // set scope id attribute for scoped CSS.
  // this is implemented as a special case to avoid the overhead
  // of going through the normal attribute patching process.
  function setScope (vnode) {
    var i;
    if (isDef(i = vnode.fnScopeId)) {
      nodeOps.setStyleScope(vnode.elm, i);
    } else {
      var ancestor = vnode;
      while (ancestor) {
        if (isDef(i = ancestor.context) && isDef(i = i.$options._scopeId)) {
          nodeOps.setStyleScope(vnode.elm, i);
        }
        ancestor = ancestor.parent;
      }
    }
    // for slot content they should also get the scopeId from the host instance.
    if (isDef(i = activeInstance) &&
      i !== vnode.context &&
      i !== vnode.fnContext &&
      isDef(i = i.$options._scopeId)
    ) {
      nodeOps.setStyleScope(vnode.elm, i);
    }
  }

  function addVnodes (parentElm, refElm, vnodes, startIdx, endIdx, insertedVnodeQueue) {
    for (; startIdx <= endIdx; ++startIdx) {
      createElm(vnodes[startIdx], insertedVnodeQueue, parentElm, refElm, false, vnodes, startIdx);
    }
  }

  function invokeDestroyHook (vnode) {
    var i, j;
    var data = vnode.data;
    if (isDef(data)) {
      if (isDef(i = data.hook) && isDef(i = i.destroy)) { i(vnode); }
      for (i = 0; i < cbs.destroy.length; ++i) { cbs.destroy[i](vnode); }
    }
    if (isDef(i = vnode.children)) {
      for (j = 0; j < vnode.children.length; ++j) {
        invokeDestroyHook(vnode.children[j]);
      }
    }
  }

  function removeVnodes (parentElm, vnodes, startIdx, endIdx) {
    for (; startIdx <= endIdx; ++startIdx) {
      var ch = vnodes[startIdx];
      if (isDef(ch)) {
        if (isDef(ch.tag)) {
          removeAndInvokeRemoveHook(ch);
          invokeDestroyHook(ch);
        } else { // Text node
          removeNode(ch.elm);
        }
      }
    }
  }

  function removeAndInvokeRemoveHook (vnode, rm) {
    if (isDef(rm) || isDef(vnode.data)) {
      var i;
      var listeners = cbs.remove.length + 1;
      if (isDef(rm)) {
        // we have a recursively passed down rm callback
        // increase the listeners count
        rm.listeners += listeners;
      } else {
        // directly removing
        rm = createRmCb(vnode.elm, listeners);
      }
      // recursively invoke hooks on child component root node
      if (isDef(i = vnode.componentInstance) && isDef(i = i._vnode) && isDef(i.data)) {
        removeAndInvokeRemoveHook(i, rm);
      }
      for (i = 0; i < cbs.remove.length; ++i) {
        cbs.remove[i](vnode, rm);
      }
      if (isDef(i = vnode.data.hook) && isDef(i = i.remove)) {
        i(vnode, rm);
      } else {
        rm();
      }
    } else {
      removeNode(vnode.elm);
    }
  }

  function updateChildren (parentElm, oldCh, newCh, insertedVnodeQueue, removeOnly) {
    var oldStartIdx = 0;
    var newStartIdx = 0;
    var oldEndIdx = oldCh.length - 1;
    var oldStartVnode = oldCh[0];
    var oldEndVnode = oldCh[oldEndIdx];
    var newEndIdx = newCh.length - 1;
    var newStartVnode = newCh[0];
    var newEndVnode = newCh[newEndIdx];
    var oldKeyToIdx, idxInOld, vnodeToMove, refElm;

    // removeOnly is a special flag used only by <transition-group>
    // to ensure removed elements stay in correct relative positions
    // during leaving transitions
    var canMove = !removeOnly;

    if (false) {}

    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {
      if (isUndef(oldStartVnode)) {
        oldStartVnode = oldCh[++oldStartIdx]; // Vnode has been moved left
      } else if (isUndef(oldEndVnode)) {
        oldEndVnode = oldCh[--oldEndIdx];
      } else if (sameVnode(oldStartVnode, newStartVnode)) {
        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);
        oldStartVnode = oldCh[++oldStartIdx];
        newStartVnode = newCh[++newStartIdx];
      } else if (sameVnode(oldEndVnode, newEndVnode)) {
        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);
        oldEndVnode = oldCh[--oldEndIdx];
        newEndVnode = newCh[--newEndIdx];
      } else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right
        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);
        canMove && nodeOps.insertBefore(parentElm, oldStartVnode.elm, nodeOps.nextSibling(oldEndVnode.elm));
        oldStartVnode = oldCh[++oldStartIdx];
        newEndVnode = newCh[--newEndIdx];
      } else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left
        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);
        canMove && nodeOps.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);
        oldEndVnode = oldCh[--oldEndIdx];
        newStartVnode = newCh[++newStartIdx];
      } else {
        if (isUndef(oldKeyToIdx)) { oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx); }
        idxInOld = isDef(newStartVnode.key)
          ? oldKeyToIdx[newStartVnode.key]
          : findIdxInOld(newStartVnode, oldCh, oldStartIdx, oldEndIdx);
        if (isUndef(idxInOld)) { // New element
          createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);
        } else {
          vnodeToMove = oldCh[idxInOld];
          if (sameVnode(vnodeToMove, newStartVnode)) {
            patchVnode(vnodeToMove, newStartVnode, insertedVnodeQueue);
            oldCh[idxInOld] = undefined;
            canMove && nodeOps.insertBefore(parentElm, vnodeToMove.elm, oldStartVnode.elm);
          } else {
            // same key but different element. treat as new element
            createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);
          }
        }
        newStartVnode = newCh[++newStartIdx];
      }
    }
    if (oldStartIdx > oldEndIdx) {
      refElm = isUndef(newCh[newEndIdx + 1]) ? null : newCh[newEndIdx + 1].elm;
      addVnodes(parentElm, refElm, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);
    } else if (newStartIdx > newEndIdx) {
      removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);
    }
  }

  function checkDuplicateKeys (children) {
    var seenKeys = {};
    for (var i = 0; i < children.length; i++) {
      var vnode = children[i];
      var key = vnode.key;
      if (isDef(key)) {
        if (seenKeys[key]) {
          warn(
            ("Duplicate keys detected: '" + key + "'. This may cause an update error."),
            vnode.context
          );
        } else {
          seenKeys[key] = true;
        }
      }
    }
  }

  function findIdxInOld (node, oldCh, start, end) {
    for (var i = start; i < end; i++) {
      var c = oldCh[i];
      if (isDef(c) && sameVnode(node, c)) { return i }
    }
  }

  function patchVnode (oldVnode, vnode, insertedVnodeQueue, removeOnly) {
    if (oldVnode === vnode) {
      return
    }

    var elm = vnode.elm = oldVnode.elm;

    if (isTrue(oldVnode.isAsyncPlaceholder)) {
      if (isDef(vnode.asyncFactory.resolved)) {
        hydrate(oldVnode.elm, vnode, insertedVnodeQueue);
      } else {
        vnode.isAsyncPlaceholder = true;
      }
      return
    }

    // reuse element for static trees.
    // note we only do this if the vnode is cloned -
    // if the new node is not cloned it means the render functions have been
    // reset by the hot-reload-api and we need to do a proper re-render.
    if (isTrue(vnode.isStatic) &&
      isTrue(oldVnode.isStatic) &&
      vnode.key === oldVnode.key &&
      (isTrue(vnode.isCloned) || isTrue(vnode.isOnce))
    ) {
      vnode.componentInstance = oldVnode.componentInstance;
      return
    }

    var i;
    var data = vnode.data;
    if (isDef(data) && isDef(i = data.hook) && isDef(i = i.prepatch)) {
      i(oldVnode, vnode);
    }

    var oldCh = oldVnode.children;
    var ch = vnode.children;
    if (isDef(data) && isPatchable(vnode)) {
      for (i = 0; i < cbs.update.length; ++i) { cbs.update[i](oldVnode, vnode); }
      if (isDef(i = data.hook) && isDef(i = i.update)) { i(oldVnode, vnode); }
    }
    if (isUndef(vnode.text)) {
      if (isDef(oldCh) && isDef(ch)) {
        if (oldCh !== ch) { updateChildren(elm, oldCh, ch, insertedVnodeQueue, removeOnly); }
      } else if (isDef(ch)) {
        if (isDef(oldVnode.text)) { nodeOps.setTextContent(elm, ''); }
        addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);
      } else if (isDef(oldCh)) {
        removeVnodes(elm, oldCh, 0, oldCh.length - 1);
      } else if (isDef(oldVnode.text)) {
        nodeOps.setTextContent(elm, '');
      }
    } else if (oldVnode.text !== vnode.text) {
      nodeOps.setTextContent(elm, vnode.text);
    }
    if (isDef(data)) {
      if (isDef(i = data.hook) && isDef(i = i.postpatch)) { i(oldVnode, vnode); }
    }
  }

  function invokeInsertHook (vnode, queue, initial) {
    // delay insert hooks for component root nodes, invoke them after the
    // element is really inserted
    if (isTrue(initial) && isDef(vnode.parent)) {
      vnode.parent.data.pendingInsert = queue;
    } else {
      for (var i = 0; i < queue.length; ++i) {
        queue[i].data.hook.insert(queue[i]);
      }
    }
  }

  var hydrationBailed = false;
  // list of modules that can skip create hook during hydration because they
  // are already rendered on the client or has no need for initialization
  // Note: style is excluded because it relies on initial clone for future
  // deep updates (#7063).
  var isRenderedModule = makeMap('attrs,class,staticClass,staticStyle,key');

  // Note: this is a browser-only function so we can assume elms are DOM nodes.
  function hydrate (elm, vnode, insertedVnodeQueue, inVPre) {
    var i;
    var tag = vnode.tag;
    var data = vnode.data;
    var children = vnode.children;
    inVPre = inVPre || (data && data.pre);
    vnode.elm = elm;

    if (isTrue(vnode.isComment) && isDef(vnode.asyncFactory)) {
      vnode.isAsyncPlaceholder = true;
      return true
    }
    // assert node match
    if (false) {}
    if (isDef(data)) {
      if (isDef(i = data.hook) && isDef(i = i.init)) { i(vnode, true ); }
      if (isDef(i = vnode.componentInstance)) {
        // child component. it should have hydrated its own tree.
        initComponent(vnode, insertedVnodeQueue);
        return true
      }
    }
    if (isDef(tag)) {
      if (isDef(children)) {
        // empty element, allow client to pick up and populate children
        if (!elm.hasChildNodes()) {
          createChildren(vnode, children, insertedVnodeQueue);
        } else {
          // v-html and domProps: innerHTML
          if (isDef(i = data) && isDef(i = i.domProps) && isDef(i = i.innerHTML)) {
            if (i !== elm.innerHTML) {
              
              if (false
              ) {}
              return false
            }
          } else {
            // iterate and compare children lists
            var childrenMatch = true;
            var childNode = elm.firstChild;
            for (var i$1 = 0; i$1 < children.length; i$1++) {
              if (!childNode || !hydrate(childNode, children[i$1], insertedVnodeQueue, inVPre)) {
                childrenMatch = false;
                break
              }
              childNode = childNode.nextSibling;
            }
            // if childNode is not null, it means the actual childNodes list is
            // longer than the virtual children list.
            if (!childrenMatch || childNode) {
              
              if (false
              ) {}
              return false
            }
          }
        }
      }
      if (isDef(data)) {
        var fullInvoke = false;
        for (var key in data) {
          if (!isRenderedModule(key)) {
            fullInvoke = true;
            invokeCreateHooks(vnode, insertedVnodeQueue);
            break
          }
        }
        if (!fullInvoke && data['class']) {
          // ensure collecting deps for deep class bindings for future updates
          traverse(data['class']);
        }
      }
    } else if (elm.data !== vnode.text) {
      elm.data = vnode.text;
    }
    return true
  }

  function assertNodeMatch (node, vnode, inVPre) {
    if (isDef(vnode.tag)) {
      return vnode.tag.indexOf('vue-component') === 0 || (
        !isUnknownElement$$1(vnode, inVPre) &&
        vnode.tag.toLowerCase() === (node.tagName && node.tagName.toLowerCase())
      )
    } else {
      return node.nodeType === (vnode.isComment ? 8 : 3)
    }
  }

  return function patch (oldVnode, vnode, hydrating, removeOnly, parentElm, refElm) {
    if (isUndef(vnode)) {
      if (isDef(oldVnode)) { invokeDestroyHook(oldVnode); }
      return
    }

    var isInitialPatch = false;
    var insertedVnodeQueue = [];

    if (isUndef(oldVnode)) {
      // empty mount (likely as component), create new root element
      isInitialPatch = true;
      createElm(vnode, insertedVnodeQueue, parentElm, refElm);
    } else {
      var isRealElement = isDef(oldVnode.nodeType);
      if (!isRealElement && sameVnode(oldVnode, vnode)) {
        // patch existing root node
        patchVnode(oldVnode, vnode, insertedVnodeQueue, removeOnly);
      } else {
        if (isRealElement) {
          // mounting to a real element
          // check if this is server-rendered content and if we can perform
          // a successful hydration.
          if (oldVnode.nodeType === 1 && oldVnode.hasAttribute(SSR_ATTR)) {
            oldVnode.removeAttribute(SSR_ATTR);
            hydrating = true;
          }
          if (isTrue(hydrating)) {
            if (hydrate(oldVnode, vnode, insertedVnodeQueue)) {
              invokeInsertHook(vnode, insertedVnodeQueue, true);
              return oldVnode
            } else if (false) {}
          }
          // either not server-rendered, or hydration failed.
          // create an empty node and replace it
          oldVnode = emptyNodeAt(oldVnode);
        }

        // replacing existing element
        var oldElm = oldVnode.elm;
        var parentElm$1 = nodeOps.parentNode(oldElm);

        // create new node
        createElm(
          vnode,
          insertedVnodeQueue,
          // extremely rare edge case: do not insert if old element is in a
          // leaving transition. Only happens when combining transition +
          // keep-alive + HOCs. (#4590)
          oldElm._leaveCb ? null : parentElm$1,
          nodeOps.nextSibling(oldElm)
        );

        // update parent placeholder node element, recursively
        if (isDef(vnode.parent)) {
          var ancestor = vnode.parent;
          var patchable = isPatchable(vnode);
          while (ancestor) {
            for (var i = 0; i < cbs.destroy.length; ++i) {
              cbs.destroy[i](ancestor);
            }
            ancestor.elm = vnode.elm;
            if (patchable) {
              for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {
                cbs.create[i$1](emptyNode, ancestor);
              }
              // #6513
              // invoke insert hooks that may have been merged by create hooks.
              // e.g. for directives that uses the "inserted" hook.
              var insert = ancestor.data.hook.insert;
              if (insert.merged) {
                // start at index 1 to avoid re-invoking component mounted hook
                for (var i$2 = 1; i$2 < insert.fns.length; i$2++) {
                  insert.fns[i$2]();
                }
              }
            } else {
              registerRef(ancestor);
            }
            ancestor = ancestor.parent;
          }
        }

        // destroy old node
        if (isDef(parentElm$1)) {
          removeVnodes(parentElm$1, [oldVnode], 0, 0);
        } else if (isDef(oldVnode.tag)) {
          invokeDestroyHook(oldVnode);
        }
      }
    }

    invokeInsertHook(vnode, insertedVnodeQueue, isInitialPatch);
    return vnode.elm
  }
}



var directives = {
  create: updateDirectives,
  update: updateDirectives,
  destroy: function unbindDirectives (vnode) {
    updateDirectives(vnode, emptyNode);
  }
}

function updateDirectives (oldVnode, vnode) {
  if (oldVnode.data.directives || vnode.data.directives) {
    _update(oldVnode, vnode);
  }
}

function _update (oldVnode, vnode) {
  var isCreate = oldVnode === emptyNode;
  var isDestroy = vnode === emptyNode;
  var oldDirs = normalizeDirectives$1(oldVnode.data.directives, oldVnode.context);
  var newDirs = normalizeDirectives$1(vnode.data.directives, vnode.context);

  var dirsWithInsert = [];
  var dirsWithPostpatch = [];

  var key, oldDir, dir;
  for (key in newDirs) {
    oldDir = oldDirs[key];
    dir = newDirs[key];
    if (!oldDir) {
      // new directive, bind
      callHook$1(dir, 'bind', vnode, oldVnode);
      if (dir.def && dir.def.inserted) {
        dirsWithInsert.push(dir);
      }
    } else {
      // existing directive, update
      dir.oldValue = oldDir.value;
      callHook$1(dir, 'update', vnode, oldVnode);
      if (dir.def && dir.def.componentUpdated) {
        dirsWithPostpatch.push(dir);
      }
    }
  }

  if (dirsWithInsert.length) {
    var callInsert = function () {
      for (var i = 0; i < dirsWithInsert.length; i++) {
        callHook$1(dirsWithInsert[i], 'inserted', vnode, oldVnode);
      }
    };
    if (isCreate) {
      mergeVNodeHook(vnode, 'insert', callInsert);
    } else {
      callInsert();
    }
  }

  if (dirsWithPostpatch.length) {
    mergeVNodeHook(vnode, 'postpatch', function () {
      for (var i = 0; i < dirsWithPostpatch.length; i++) {
        callHook$1(dirsWithPostpatch[i], 'componentUpdated', vnode, oldVnode);
      }
    });
  }

  if (!isCreate) {
    for (key in oldDirs) {
      if (!newDirs[key]) {
        // no longer present, unbind
        callHook$1(oldDirs[key], 'unbind', oldVnode, oldVnode, isDestroy);
      }
    }
  }
}

var emptyModifiers = Object.create(null);

function normalizeDirectives$1 (
  dirs,
  vm
) {
  var res = Object.create(null);
  if (!dirs) {
    // $flow-disable-line
    return res
  }
  var i, dir;
  for (i = 0; i < dirs.length; i++) {
    dir = dirs[i];
    if (!dir.modifiers) {
      // $flow-disable-line
      dir.modifiers = emptyModifiers;
    }
    res[getRawDirName(dir)] = dir;
    dir.def = resolveAsset(vm.$options, 'directives', dir.name, true);
  }
  // $flow-disable-line
  return res
}

function getRawDirName (dir) {
  return dir.rawName || ((dir.name) + "." + (Object.keys(dir.modifiers || {}).join('.')))
}

function callHook$1 (dir, hook, vnode, oldVnode, isDestroy) {
  var fn = dir.def && dir.def[hook];
  if (fn) {
    try {
      fn(vnode.elm, dir, vnode, oldVnode, isDestroy);
    } catch (e) {
      handleError(e, vnode.context, ("directive " + (dir.name) + " " + hook + " hook"));
    }
  }
}

var baseModules = [
  ref,
  directives
]



function updateAttrs (oldVnode, vnode) {
  var opts = vnode.componentOptions;
  if (isDef(opts) && opts.Ctor.options.inheritAttrs === false) {
    return
  }
  if (isUndef(oldVnode.data.attrs) && isUndef(vnode.data.attrs)) {
    return
  }
  var key, cur, old;
  var elm = vnode.elm;
  var oldAttrs = oldVnode.data.attrs || {};
  var attrs = vnode.data.attrs || {};
  // clone observed objects, as the user probably wants to mutate it
  if (isDef(attrs.__ob__)) {
    attrs = vnode.data.attrs = extend({}, attrs);
  }

  for (key in attrs) {
    cur = attrs[key];
    old = oldAttrs[key];
    if (old !== cur) {
      setAttr(elm, key, cur);
    }
  }
  // #4391: in IE9, setting type can reset value for input[type=radio]
  // #6666: IE/Edge forces progress value down to 1 before setting a max
  
  if ((isIE || isEdge) && attrs.value !== oldAttrs.value) {
    setAttr(elm, 'value', attrs.value);
  }
  for (key in oldAttrs) {
    if (isUndef(attrs[key])) {
      if (isXlink(key)) {
        elm.removeAttributeNS(xlinkNS, getXlinkProp(key));
      } else if (!isEnumeratedAttr(key)) {
        elm.removeAttribute(key);
      }
    }
  }
}

function setAttr (el, key, value) {
  if (el.tagName.indexOf('-') > -1) {
    baseSetAttr(el, key, value);
  } else if (isBooleanAttr(key)) {
    // set attribute for blank value
    // e.g. <option disabled>Select one</option>
    if (isFalsyAttrValue(value)) {
      el.removeAttribute(key);
    } else {
      // technically allowfullscreen is a boolean attribute for <iframe>,
      // but Flash expects a value of "true" when used on <embed> tag
      value = key === 'allowfullscreen' && el.tagName === 'EMBED'
        ? 'true'
        : key;
      el.setAttribute(key, value);
    }
  } else if (isEnumeratedAttr(key)) {
    el.setAttribute(key, isFalsyAttrValue(value) || value === 'false' ? 'false' : 'true');
  } else if (isXlink(key)) {
    if (isFalsyAttrValue(value)) {
      el.removeAttributeNS(xlinkNS, getXlinkProp(key));
    } else {
      el.setAttributeNS(xlinkNS, key, value);
    }
  } else {
    baseSetAttr(el, key, value);
  }
}

function baseSetAttr (el, key, value) {
  if (isFalsyAttrValue(value)) {
    el.removeAttribute(key);
  } else {
    // #7138: IE10 & 11 fires input event when setting placeholder on
    // <textarea>... block the first input event and remove the blocker
    // immediately.
    
    if (
      isIE && !isIE9 &&
      el.tagName === 'TEXTAREA' &&
      key === 'placeholder' && !el.__ieph
    ) {
      var blocker = function (e) {
        e.stopImmediatePropagation();
        el.removeEventListener('input', blocker);
      };
      el.addEventListener('input', blocker);
      // $flow-disable-line
      el.__ieph = true; 
    }
    el.setAttribute(key, value);
  }
}

var attrs = {
  create: updateAttrs,
  update: updateAttrs
}



function updateClass (oldVnode, vnode) {
  var el = vnode.elm;
  var data = vnode.data;
  var oldData = oldVnode.data;
  if (
    isUndef(data.staticClass) &&
    isUndef(data.class) && (
      isUndef(oldData) || (
        isUndef(oldData.staticClass) &&
        isUndef(oldData.class)
      )
    )
  ) {
    return
  }

  var cls = genClassForVnode(vnode);

  // handle transition classes
  var transitionClass = el._transitionClasses;
  if (isDef(transitionClass)) {
    cls = concat(cls, stringifyClass(transitionClass));
  }

  // set the class
  if (cls !== el._prevClass) {
    el.setAttribute('class', cls);
    el._prevClass = cls;
  }
}

var klass = {
  create: updateClass,
  update: updateClass
}













// add a raw attr (use this in preTransforms)








// note: this only removes the attr from the Array (attrsList) so that it
// doesn't get processed by processAttrs.
// By default it does NOT remove it from the map (attrsMap) because the map is
// needed during codegen.



/**
 * Cross-platform code generation for component v-model
 */


/**
 * Cross-platform codegen helper for generating v-model value assignment code.
 */



// in some cases, the event used has to be determined at runtime
// so we used some reserved tokens during compile.
var RANGE_TOKEN = '__r';
var CHECKBOX_RADIO_TOKEN = '__c';



// normalize v-model event tokens that can only be determined at runtime.
// it's important to place the event as the first in the array because
// the whole point is ensuring the v-model callback gets called before
// user-attached handlers.
function normalizeEvents (on) {
  
  if (isDef(on[RANGE_TOKEN])) {
    // IE input[type=range] only supports `change` event
    var event = isIE ? 'change' : 'input';
    on[event] = [].concat(on[RANGE_TOKEN], on[event] || []);
    delete on[RANGE_TOKEN];
  }
  // This was originally intended to fix #4521 but no longer necessary
  // after 2.5. Keeping it for backwards compat with generated code from < 2.4
  
  if (isDef(on[CHECKBOX_RADIO_TOKEN])) {
    on.change = [].concat(on[CHECKBOX_RADIO_TOKEN], on.change || []);
    delete on[CHECKBOX_RADIO_TOKEN];
  }
}

var target$1;

function createOnceHandler (handler, event, capture) {
  var _target = target$1; // save current target element in closure
  return function onceHandler () {
    var res = handler.apply(null, arguments);
    if (res !== null) {
      remove$2(event, onceHandler, capture, _target);
    }
  }
}

function add$1 (
  event,
  handler,
  once$$1,
  capture,
  passive
) {
  handler = withMacroTask(handler);
  if (once$$1) { handler = createOnceHandler(handler, event, capture); }
  target$1.addEventListener(
    event,
    handler,
    supportsPassive
      ? { capture: capture, passive: passive }
      : capture
  );
}

function remove$2 (
  event,
  handler,
  capture,
  _target
) {
  (_target || target$1).removeEventListener(
    event,
    handler._withTask || handler,
    capture
  );
}

function updateDOMListeners (oldVnode, vnode) {
  if (isUndef(oldVnode.data.on) && isUndef(vnode.data.on)) {
    return
  }
  var on = vnode.data.on || {};
  var oldOn = oldVnode.data.on || {};
  target$1 = vnode.elm;
  normalizeEvents(on);
  updateListeners(on, oldOn, add$1, remove$2, vnode.context);
  target$1 = undefined;
}

var events = {
  create: updateDOMListeners,
  update: updateDOMListeners
}



function updateDOMProps (oldVnode, vnode) {
  if (isUndef(oldVnode.data.domProps) && isUndef(vnode.data.domProps)) {
    return
  }
  var key, cur;
  var elm = vnode.elm;
  var oldProps = oldVnode.data.domProps || {};
  var props = vnode.data.domProps || {};
  // clone observed objects, as the user probably wants to mutate it
  if (isDef(props.__ob__)) {
    props = vnode.data.domProps = extend({}, props);
  }

  for (key in oldProps) {
    if (isUndef(props[key])) {
      elm[key] = '';
    }
  }
  for (key in props) {
    cur = props[key];
    // ignore children if the node has textContent or innerHTML,
    // as these will throw away existing DOM nodes and cause removal errors
    // on subsequent patches (#3360)
    if (key === 'textContent' || key === 'innerHTML') {
      if (vnode.children) { vnode.children.length = 0; }
      if (cur === oldProps[key]) { continue }
      // #6601 work around Chrome version <= 55 bug where single textNode
      // replaced by innerHTML/textContent retains its parentNode property
      if (elm.childNodes.length === 1) {
        elm.removeChild(elm.childNodes[0]);
      }
    }

    if (key === 'value') {
      // store value as _value as well since
      // non-string values will be stringified
      elm._value = cur;
      // avoid resetting cursor position when value is the same
      var strCur = isUndef(cur) ? '' : String(cur);
      if (shouldUpdateValue(elm, strCur)) {
        elm.value = strCur;
      }
    } else {
      elm[key] = cur;
    }
  }
}

// check platforms/web/util/attrs.js acceptValue


function shouldUpdateValue (elm, checkVal) {
  return (!elm.composing && (
    elm.tagName === 'OPTION' ||
    isNotInFocusAndDirty(elm, checkVal) ||
    isDirtyWithModifiers(elm, checkVal)
  ))
}

function isNotInFocusAndDirty (elm, checkVal) {
  // return true when textbox (.number and .trim) loses focus and its value is
  // not equal to the updated value
  var notInFocus = true;
  // #6157
  // work around IE bug when accessing document.activeElement in an iframe
  try { notInFocus = document.activeElement !== elm; } catch (e) {}
  return notInFocus && elm.value !== checkVal
}

function isDirtyWithModifiers (elm, newVal) {
  var value = elm.value;
  var modifiers = elm._vModifiers; // injected by v-model runtime
  if (isDef(modifiers)) {
    if (modifiers.lazy) {
      // inputs with lazy should only be updated when not in focus
      return false
    }
    if (modifiers.number) {
      return toNumber(value) !== toNumber(newVal)
    }
    if (modifiers.trim) {
      return value.trim() !== newVal.trim()
    }
  }
  return value !== newVal
}

var domProps = {
  create: updateDOMProps,
  update: updateDOMProps
}



var parseStyleText = cached(function (cssText) {
  var res = {};
  var listDelimiter = /;(?![^(]*\))/g;
  var propertyDelimiter = /:(.+)/;
  cssText.split(listDelimiter).forEach(function (item) {
    if (item) {
      var tmp = item.split(propertyDelimiter);
      tmp.length > 1 && (res[tmp[0].trim()] = tmp[1].trim());
    }
  });
  return res
});

// merge static and dynamic style data on the same vnode
function normalizeStyleData (data) {
  var style = normalizeStyleBinding(data.style);
  // static style is pre-processed into an object during compilation
  // and is always a fresh object, so it's safe to merge into it
  return data.staticStyle
    ? extend(data.staticStyle, style)
    : style
}

// normalize possible array / string values into Object
function normalizeStyleBinding (bindingStyle) {
  if (Array.isArray(bindingStyle)) {
    return toObject(bindingStyle)
  }
  if (typeof bindingStyle === 'string') {
    return parseStyleText(bindingStyle)
  }
  return bindingStyle
}

/**
 * parent component style should be after child's
 * so that parent component's style could override it
 */
function getStyle (vnode, checkChild) {
  var res = {};
  var styleData;

  if (checkChild) {
    var childNode = vnode;
    while (childNode.componentInstance) {
      childNode = childNode.componentInstance._vnode;
      if (
        childNode && childNode.data &&
        (styleData = normalizeStyleData(childNode.data))
      ) {
        extend(res, styleData);
      }
    }
  }

  if ((styleData = normalizeStyleData(vnode.data))) {
    extend(res, styleData);
  }

  var parentNode = vnode;
  while ((parentNode = parentNode.parent)) {
    if (parentNode.data && (styleData = normalizeStyleData(parentNode.data))) {
      extend(res, styleData);
    }
  }
  return res
}



var cssVarRE = /^--/;
var importantRE = /\s*!important$/;
var setProp = function (el, name, val) {
  
  if (cssVarRE.test(name)) {
    el.style.setProperty(name, val);
  } else if (importantRE.test(val)) {
    el.style.setProperty(name, val.replace(importantRE, ''), 'important');
  } else {
    var normalizedName = normalize(name);
    if (Array.isArray(val)) {
      // Support values array created by autoprefixer, e.g.
      // {display: ["-webkit-box", "-ms-flexbox", "flex"]}
      // Set them one by one, and the browser will only set those it can recognize
      for (var i = 0, len = val.length; i < len; i++) {
        el.style[normalizedName] = val[i];
      }
    } else {
      el.style[normalizedName] = val;
    }
  }
};

var vendorNames = ['Webkit', 'Moz', 'ms'];

var emptyStyle;
var normalize = cached(function (prop) {
  emptyStyle = emptyStyle || document.createElement('div').style;
  prop = camelize(prop);
  if (prop !== 'filter' && (prop in emptyStyle)) {
    return prop
  }
  var capName = prop.charAt(0).toUpperCase() + prop.slice(1);
  for (var i = 0; i < vendorNames.length; i++) {
    var name = vendorNames[i] + capName;
    if (name in emptyStyle) {
      return name
    }
  }
});

function updateStyle (oldVnode, vnode) {
  var data = vnode.data;
  var oldData = oldVnode.data;

  if (isUndef(data.staticStyle) && isUndef(data.style) &&
    isUndef(oldData.staticStyle) && isUndef(oldData.style)
  ) {
    return
  }

  var cur, name;
  var el = vnode.elm;
  var oldStaticStyle = oldData.staticStyle;
  var oldStyleBinding = oldData.normalizedStyle || oldData.style || {};

  // if static style exists, stylebinding already merged into it when doing normalizeStyleData
  var oldStyle = oldStaticStyle || oldStyleBinding;

  var style = normalizeStyleBinding(vnode.data.style) || {};

  // store normalized style under a different key for next diff
  // make sure to clone it if it's reactive, since the user likely wants
  // to mutate it.
  vnode.data.normalizedStyle = isDef(style.__ob__)
    ? extend({}, style)
    : style;

  var newStyle = getStyle(vnode, true);

  for (name in oldStyle) {
    if (isUndef(newStyle[name])) {
      setProp(el, name, '');
    }
  }
  for (name in newStyle) {
    cur = newStyle[name];
    if (cur !== oldStyle[name]) {
      // ie9 setting to null has no effect, must use empty string
      setProp(el, name, cur == null ? '' : cur);
    }
  }
}

var style = {
  create: updateStyle,
  update: updateStyle
}



/**
 * Add class with compatibility for SVG since classList is not supported on
 * SVG elements in IE
 */
function addClass (el, cls) {
  
  if (!cls || !(cls = cls.trim())) {
    return
  }

  
  if (el.classList) {
    if (cls.indexOf(' ') > -1) {
      cls.split(/\s+/).forEach(function (c) { return el.classList.add(c); });
    } else {
      el.classList.add(cls);
    }
  } else {
    var cur = " " + (el.getAttribute('class') || '') + " ";
    if (cur.indexOf(' ' + cls + ' ') < 0) {
      el.setAttribute('class', (cur + cls).trim());
    }
  }
}

/**
 * Remove class with compatibility for SVG since classList is not supported on
 * SVG elements in IE
 */
function removeClass (el, cls) {
  
  if (!cls || !(cls = cls.trim())) {
    return
  }

  
  if (el.classList) {
    if (cls.indexOf(' ') > -1) {
      cls.split(/\s+/).forEach(function (c) { return el.classList.remove(c); });
    } else {
      el.classList.remove(cls);
    }
    if (!el.classList.length) {
      el.removeAttribute('class');
    }
  } else {
    var cur = " " + (el.getAttribute('class') || '') + " ";
    var tar = ' ' + cls + ' ';
    while (cur.indexOf(tar) >= 0) {
      cur = cur.replace(tar, ' ');
    }
    cur = cur.trim();
    if (cur) {
      el.setAttribute('class', cur);
    } else {
      el.removeAttribute('class');
    }
  }
}



function resolveTransition (def) {
  if (!def) {
    return
  }
  
  if (typeof def === 'object') {
    var res = {};
    if (def.css !== false) {
      extend(res, autoCssTransition(def.name || 'v'));
    }
    extend(res, def);
    return res
  } else if (typeof def === 'string') {
    return autoCssTransition(def)
  }
}

var autoCssTransition = cached(function (name) {
  return {
    enterClass: (name + "-enter"),
    enterToClass: (name + "-enter-to"),
    enterActiveClass: (name + "-enter-active"),
    leaveClass: (name + "-leave"),
    leaveToClass: (name + "-leave-to"),
    leaveActiveClass: (name + "-leave-active")
  }
});

var hasTransition = inBrowser && !isIE9;
var TRANSITION = 'transition';
var ANIMATION = 'animation';

// Transition property/event sniffing
var transitionProp = 'transition';
var transitionEndEvent = 'transitionend';
var animationProp = 'animation';
var animationEndEvent = 'animationend';
if (hasTransition) {
  
  if (window.ontransitionend === undefined &&
    window.onwebkittransitionend !== undefined
  ) {
    transitionProp = 'WebkitTransition';
    transitionEndEvent = 'webkitTransitionEnd';
  }
  if (window.onanimationend === undefined &&
    window.onwebkitanimationend !== undefined
  ) {
    animationProp = 'WebkitAnimation';
    animationEndEvent = 'webkitAnimationEnd';
  }
}

// binding to window is necessary to make hot reload work in IE in strict mode
var raf = inBrowser
  ? window.requestAnimationFrame
    ? window.requestAnimationFrame.bind(window)
    : setTimeout
  :  function (fn) { return fn(); };

function nextFrame (fn) {
  raf(function () {
    raf(fn);
  });
}

function addTransitionClass (el, cls) {
  var transitionClasses = el._transitionClasses || (el._transitionClasses = []);
  if (transitionClasses.indexOf(cls) < 0) {
    transitionClasses.push(cls);
    addClass(el, cls);
  }
}

function removeTransitionClass (el, cls) {
  if (el._transitionClasses) {
    remove(el._transitionClasses, cls);
  }
  removeClass(el, cls);
}

function whenTransitionEnds (
  el,
  expectedType,
  cb
) {
  var ref = getTransitionInfo(el, expectedType);
  var type = ref.type;
  var timeout = ref.timeout;
  var propCount = ref.propCount;
  if (!type) { return cb() }
  var event = type === TRANSITION ? transitionEndEvent : animationEndEvent;
  var ended = 0;
  var end = function () {
    el.removeEventListener(event, onEnd);
    cb();
  };
  var onEnd = function (e) {
    if (e.target === el) {
      if (++ended >= propCount) {
        end();
      }
    }
  };
  setTimeout(function () {
    if (ended < propCount) {
      end();
    }
  }, timeout + 1);
  el.addEventListener(event, onEnd);
}

var transformRE = /\b(transform|all)(,|$)/;

function getTransitionInfo (el, expectedType) {
  var styles = window.getComputedStyle(el);
  var transitionDelays = styles[transitionProp + 'Delay'].split(', ');
  var transitionDurations = styles[transitionProp + 'Duration'].split(', ');
  var transitionTimeout = getTimeout(transitionDelays, transitionDurations);
  var animationDelays = styles[animationProp + 'Delay'].split(', ');
  var animationDurations = styles[animationProp + 'Duration'].split(', ');
  var animationTimeout = getTimeout(animationDelays, animationDurations);

  var type;
  var timeout = 0;
  var propCount = 0;
  
  if (expectedType === TRANSITION) {
    if (transitionTimeout > 0) {
      type = TRANSITION;
      timeout = transitionTimeout;
      propCount = transitionDurations.length;
    }
  } else if (expectedType === ANIMATION) {
    if (animationTimeout > 0) {
      type = ANIMATION;
      timeout = animationTimeout;
      propCount = animationDurations.length;
    }
  } else {
    timeout = Math.max(transitionTimeout, animationTimeout);
    type = timeout > 0
      ? transitionTimeout > animationTimeout
        ? TRANSITION
        : ANIMATION
      : null;
    propCount = type
      ? type === TRANSITION
        ? transitionDurations.length
        : animationDurations.length
      : 0;
  }
  var hasTransform =
    type === TRANSITION &&
    transformRE.test(styles[transitionProp + 'Property']);
  return {
    type: type,
    timeout: timeout,
    propCount: propCount,
    hasTransform: hasTransform
  }
}

function getTimeout (delays, durations) {
  
  while (delays.length < durations.length) {
    delays = delays.concat(delays);
  }

  return Math.max.apply(null, durations.map(function (d, i) {
    return toMs(d) + toMs(delays[i])
  }))
}

function toMs (s) {
  return Number(s.slice(0, -1)) * 1000
}



function enter (vnode, toggleDisplay) {
  var el = vnode.elm;

  // call leave callback now
  if (isDef(el._leaveCb)) {
    el._leaveCb.cancelled = true;
    el._leaveCb();
  }

  var data = resolveTransition(vnode.data.transition);
  if (isUndef(data)) {
    return
  }

  
  if (isDef(el._enterCb) || el.nodeType !== 1) {
    return
  }

  var css = data.css;
  var type = data.type;
  var enterClass = data.enterClass;
  var enterToClass = data.enterToClass;
  var enterActiveClass = data.enterActiveClass;
  var appearClass = data.appearClass;
  var appearToClass = data.appearToClass;
  var appearActiveClass = data.appearActiveClass;
  var beforeEnter = data.beforeEnter;
  var enter = data.enter;
  var afterEnter = data.afterEnter;
  var enterCancelled = data.enterCancelled;
  var beforeAppear = data.beforeAppear;
  var appear = data.appear;
  var afterAppear = data.afterAppear;
  var appearCancelled = data.appearCancelled;
  var duration = data.duration;

  // activeInstance will always be the <transition> component managing this
  // transition. One edge case to check is when the <transition> is placed
  // as the root node of a child component. In that case we need to check
  // <transition>'s parent for appear check.
  var context = activeInstance;
  var transitionNode = activeInstance.$vnode;
  while (transitionNode && transitionNode.parent) {
    transitionNode = transitionNode.parent;
    context = transitionNode.context;
  }

  var isAppear = !context._isMounted || !vnode.isRootInsert;

  if (isAppear && !appear && appear !== '') {
    return
  }

  var startClass = isAppear && appearClass
    ? appearClass
    : enterClass;
  var activeClass = isAppear && appearActiveClass
    ? appearActiveClass
    : enterActiveClass;
  var toClass = isAppear && appearToClass
    ? appearToClass
    : enterToClass;

  var beforeEnterHook = isAppear
    ? (beforeAppear || beforeEnter)
    : beforeEnter;
  var enterHook = isAppear
    ? (typeof appear === 'function' ? appear : enter)
    : enter;
  var afterEnterHook = isAppear
    ? (afterAppear || afterEnter)
    : afterEnter;
  var enterCancelledHook = isAppear
    ? (appearCancelled || enterCancelled)
    : enterCancelled;

  var explicitEnterDuration = toNumber(
    isObject(duration)
      ? duration.enter
      : duration
  );

  if (false) {}

  var expectsCSS = css !== false && !isIE9;
  var userWantsControl = getHookArgumentsLength(enterHook);

  var cb = el._enterCb = once(function () {
    if (expectsCSS) {
      removeTransitionClass(el, toClass);
      removeTransitionClass(el, activeClass);
    }
    if (cb.cancelled) {
      if (expectsCSS) {
        removeTransitionClass(el, startClass);
      }
      enterCancelledHook && enterCancelledHook(el);
    } else {
      afterEnterHook && afterEnterHook(el);
    }
    el._enterCb = null;
  });

  if (!vnode.data.show) {
    // remove pending leave element on enter by injecting an insert hook
    mergeVNodeHook(vnode, 'insert', function () {
      var parent = el.parentNode;
      var pendingNode = parent && parent._pending && parent._pending[vnode.key];
      if (pendingNode &&
        pendingNode.tag === vnode.tag &&
        pendingNode.elm._leaveCb
      ) {
        pendingNode.elm._leaveCb();
      }
      enterHook && enterHook(el, cb);
    });
  }

  // start enter transition
  beforeEnterHook && beforeEnterHook(el);
  if (expectsCSS) {
    addTransitionClass(el, startClass);
    addTransitionClass(el, activeClass);
    nextFrame(function () {
      removeTransitionClass(el, startClass);
      if (!cb.cancelled) {
        addTransitionClass(el, toClass);
        if (!userWantsControl) {
          if (isValidDuration(explicitEnterDuration)) {
            setTimeout(cb, explicitEnterDuration);
          } else {
            whenTransitionEnds(el, type, cb);
          }
        }
      }
    });
  }

  if (vnode.data.show) {
    toggleDisplay && toggleDisplay();
    enterHook && enterHook(el, cb);
  }

  if (!expectsCSS && !userWantsControl) {
    cb();
  }
}

function leave (vnode, rm) {
  var el = vnode.elm;

  // call enter callback now
  if (isDef(el._enterCb)) {
    el._enterCb.cancelled = true;
    el._enterCb();
  }

  var data = resolveTransition(vnode.data.transition);
  if (isUndef(data) || el.nodeType !== 1) {
    return rm()
  }

  
  if (isDef(el._leaveCb)) {
    return
  }

  var css = data.css;
  var type = data.type;
  var leaveClass = data.leaveClass;
  var leaveToClass = data.leaveToClass;
  var leaveActiveClass = data.leaveActiveClass;
  var beforeLeave = data.beforeLeave;
  var leave = data.leave;
  var afterLeave = data.afterLeave;
  var leaveCancelled = data.leaveCancelled;
  var delayLeave = data.delayLeave;
  var duration = data.duration;

  var expectsCSS = css !== false && !isIE9;
  var userWantsControl = getHookArgumentsLength(leave);

  var explicitLeaveDuration = toNumber(
    isObject(duration)
      ? duration.leave
      : duration
  );

  if (false) {}

  var cb = el._leaveCb = once(function () {
    if (el.parentNode && el.parentNode._pending) {
      el.parentNode._pending[vnode.key] = null;
    }
    if (expectsCSS) {
      removeTransitionClass(el, leaveToClass);
      removeTransitionClass(el, leaveActiveClass);
    }
    if (cb.cancelled) {
      if (expectsCSS) {
        removeTransitionClass(el, leaveClass);
      }
      leaveCancelled && leaveCancelled(el);
    } else {
      rm();
      afterLeave && afterLeave(el);
    }
    el._leaveCb = null;
  });

  if (delayLeave) {
    delayLeave(performLeave);
  } else {
    performLeave();
  }

  function performLeave () {
    // the delayed leave may have already been cancelled
    if (cb.cancelled) {
      return
    }
    // record leaving element
    if (!vnode.data.show) {
      (el.parentNode._pending || (el.parentNode._pending = {}))[(vnode.key)] = vnode;
    }
    beforeLeave && beforeLeave(el);
    if (expectsCSS) {
      addTransitionClass(el, leaveClass);
      addTransitionClass(el, leaveActiveClass);
      nextFrame(function () {
        removeTransitionClass(el, leaveClass);
        if (!cb.cancelled) {
          addTransitionClass(el, leaveToClass);
          if (!userWantsControl) {
            if (isValidDuration(explicitLeaveDuration)) {
              setTimeout(cb, explicitLeaveDuration);
            } else {
              whenTransitionEnds(el, type, cb);
            }
          }
        }
      });
    }
    leave && leave(el, cb);
    if (!expectsCSS && !userWantsControl) {
      cb();
    }
  }
}

// only used in dev mode
function checkDuration (val, name, vnode) {
  if (typeof val !== 'number') {
    warn(
      "<transition> explicit " + name + " duration is not a valid number - " +
      "got " + (JSON.stringify(val)) + ".",
      vnode.context
    );
  } else if (isNaN(val)) {
    warn(
      "<transition> explicit " + name + " duration is NaN - " +
      'the duration expression might be incorrect.',
      vnode.context
    );
  }
}

function isValidDuration (val) {
  return typeof val === 'number' && !isNaN(val)
}

/**
 * Normalize a transition hook's argument length. The hook may be:
 * - a merged hook (invoker) with the original in .fns
 * - a wrapped component method (check ._length)
 * - a plain function (.length)
 */
function getHookArgumentsLength (fn) {
  if (isUndef(fn)) {
    return false
  }
  var invokerFns = fn.fns;
  if (isDef(invokerFns)) {
    // invoker
    return getHookArgumentsLength(
      Array.isArray(invokerFns)
        ? invokerFns[0]
        : invokerFns
    )
  } else {
    return (fn._length || fn.length) > 1
  }
}

function _enter (_, vnode) {
  if (vnode.data.show !== true) {
    enter(vnode);
  }
}

var transition = inBrowser ? {
  create: _enter,
  activate: _enter,
  remove: function remove$$1 (vnode, rm) {
    
    if (vnode.data.show !== true) {
      leave(vnode, rm);
    } else {
      rm();
    }
  }
} : {}

var platformModules = [
  attrs,
  klass,
  events,
  domProps,
  style,
  transition
]



// the directive module should be applied last, after all
// built-in modules have been applied.
var modules = platformModules.concat(baseModules);

var patch = createPatchFunction({ nodeOps: nodeOps, modules: modules });

/**
 * Not type checking this file because flow doesn't like attaching
 * properties to Elements.
 */


if (isIE9) {
  // http://www.matts411.com/post/internet-explorer-9-oninput/
  document.addEventListener('selectionchange', function () {
    var el = document.activeElement;
    if (el && el.vmodel) {
      trigger(el, 'input');
    }
  });
}

var directive = {
  inserted: function inserted (el, binding, vnode, oldVnode) {
    if (vnode.tag === 'select') {
      // #6903
      if (oldVnode.elm && !oldVnode.elm._vOptions) {
        mergeVNodeHook(vnode, 'postpatch', function () {
          directive.componentUpdated(el, binding, vnode);
        });
      } else {
        setSelected(el, binding, vnode.context);
      }
      el._vOptions = [].map.call(el.options, getValue);
    } else if (vnode.tag === 'textarea' || isTextInputType(el.type)) {
      el._vModifiers = binding.modifiers;
      if (!binding.modifiers.lazy) {
        el.addEventListener('compositionstart', onCompositionStart);
        el.addEventListener('compositionend', onCompositionEnd);
        // Safari < 10.2 & UIWebView doesn't fire compositionend when
        // switching focus before confirming composition choice
        // this also fixes the issue where some browsers e.g. iOS Chrome
        // fires "change" instead of "input" on autocomplete.
        el.addEventListener('change', onCompositionEnd);
        
        if (isIE9) {
          el.vmodel = true;
        }
      }
    }
  },

  componentUpdated: function componentUpdated (el, binding, vnode) {
    if (vnode.tag === 'select') {
      setSelected(el, binding, vnode.context);
      // in case the options rendered by v-for have changed,
      // it's possible that the value is out-of-sync with the rendered options.
      // detect such cases and filter out values that no longer has a matching
      // option in the DOM.
      var prevOptions = el._vOptions;
      var curOptions = el._vOptions = [].map.call(el.options, getValue);
      if (curOptions.some(function (o, i) { return !looseEqual(o, prevOptions[i]); })) {
        // trigger change event if
        // no matching option found for at least one value
        var needReset = el.multiple
          ? binding.value.some(function (v) { return hasNoMatchingOption(v, curOptions); })
          : binding.value !== binding.oldValue && hasNoMatchingOption(binding.value, curOptions);
        if (needReset) {
          trigger(el, 'change');
        }
      }
    }
  }
};

function setSelected (el, binding, vm) {
  actuallySetSelected(el, binding, vm);
  
  if (isIE || isEdge) {
    setTimeout(function () {
      actuallySetSelected(el, binding, vm);
    }, 0);
  }
}

function actuallySetSelected (el, binding, vm) {
  var value = binding.value;
  var isMultiple = el.multiple;
  if (isMultiple && !Array.isArray(value)) {
    "production" !== 'production' && warn(
      "<select multiple v-model=\"" + (binding.expression) + "\"> " +
      "expects an Array value for its binding, but got " + (Object.prototype.toString.call(value).slice(8, -1)),
      vm
    );
    return
  }
  var selected, option;
  for (var i = 0, l = el.options.length; i < l; i++) {
    option = el.options[i];
    if (isMultiple) {
      selected = looseIndexOf(value, getValue(option)) > -1;
      if (option.selected !== selected) {
        option.selected = selected;
      }
    } else {
      if (looseEqual(getValue(option), value)) {
        if (el.selectedIndex !== i) {
          el.selectedIndex = i;
        }
        return
      }
    }
  }
  if (!isMultiple) {
    el.selectedIndex = -1;
  }
}

function hasNoMatchingOption (value, options) {
  return options.every(function (o) { return !looseEqual(o, value); })
}

function getValue (option) {
  return '_value' in option
    ? option._value
    : option.value
}

function onCompositionStart (e) {
  e.target.composing = true;
}

function onCompositionEnd (e) {
  // prevent triggering an input event for no reason
  if (!e.target.composing) { return }
  e.target.composing = false;
  trigger(e.target, 'input');
}

function trigger (el, type) {
  var e = document.createEvent('HTMLEvents');
  e.initEvent(type, true, true);
  el.dispatchEvent(e);
}



// recursively search for possible transition defined inside the component root
function locateNode (vnode) {
  return vnode.componentInstance && (!vnode.data || !vnode.data.transition)
    ? locateNode(vnode.componentInstance._vnode)
    : vnode
}

var show = {
  bind: function bind (el, ref, vnode) {
    var value = ref.value;

    vnode = locateNode(vnode);
    var transition$$1 = vnode.data && vnode.data.transition;
    var originalDisplay = el.__vOriginalDisplay =
      el.style.display === 'none' ? '' : el.style.display;
    if (value && transition$$1) {
      vnode.data.show = true;
      enter(vnode, function () {
        el.style.display = originalDisplay;
      });
    } else {
      el.style.display = value ? originalDisplay : 'none';
    }
  },

  update: function update (el, ref, vnode) {
    var value = ref.value;
    var oldValue = ref.oldValue;

    
    if (!value === !oldValue) { return }
    vnode = locateNode(vnode);
    var transition$$1 = vnode.data && vnode.data.transition;
    if (transition$$1) {
      vnode.data.show = true;
      if (value) {
        enter(vnode, function () {
          el.style.display = el.__vOriginalDisplay;
        });
      } else {
        leave(vnode, function () {
          el.style.display = 'none';
        });
      }
    } else {
      el.style.display = value ? el.__vOriginalDisplay : 'none';
    }
  },

  unbind: function unbind (
    el,
    binding,
    vnode,
    oldVnode,
    isDestroy
  ) {
    if (!isDestroy) {
      el.style.display = el.__vOriginalDisplay;
    }
  }
}

var platformDirectives = {
  model: directive,
  show: show
}



// Provides transition support for a single element/component.
// supports transition mode (out-in / in-out)

var transitionProps = {
  name: String,
  appear: Boolean,
  css: Boolean,
  mode: String,
  type: String,
  enterClass: String,
  leaveClass: String,
  enterToClass: String,
  leaveToClass: String,
  enterActiveClass: String,
  leaveActiveClass: String,
  appearClass: String,
  appearActiveClass: String,
  appearToClass: String,
  duration: [Number, String, Object]
};

// in case the child is also an abstract component, e.g. <keep-alive>
// we want to recursively retrieve the real component to be rendered
function getRealChild (vnode) {
  var compOptions = vnode && vnode.componentOptions;
  if (compOptions && compOptions.Ctor.options.abstract) {
    return getRealChild(getFirstComponentChild(compOptions.children))
  } else {
    return vnode
  }
}

function extractTransitionData (comp) {
  var data = {};
  var options = comp.$options;
  // props
  for (var key in options.propsData) {
    data[key] = comp[key];
  }
  // events.
  // extract listeners and pass them directly to the transition methods
  var listeners = options._parentListeners;
  for (var key$1 in listeners) {
    data[camelize(key$1)] = listeners[key$1];
  }
  return data
}

function placeholder (h, rawChild) {
  if (/\d-keep-alive$/.test(rawChild.tag)) {
    return h('keep-alive', {
      props: rawChild.componentOptions.propsData
    })
  }
}

function hasParentTransition (vnode) {
  while ((vnode = vnode.parent)) {
    if (vnode.data.transition) {
      return true
    }
  }
}

function isSameChild (child, oldChild) {
  return oldChild.key === child.key && oldChild.tag === child.tag
}

var Transition = {
  name: 'transition',
  props: transitionProps,
  abstract: true,

  render: function render (h) {
    var this$1 = this;

    var children = this.$slots.default;
    if (!children) {
      return
    }

    // filter out text nodes (possible whitespaces)
    children = children.filter(function (c) { return c.tag || isAsyncPlaceholder(c); });
    
    if (!children.length) {
      return
    }

    // warn multiple elements
    if (false) {}

    var mode = this.mode;

    // warn invalid mode
    if (false
    ) {}

    var rawChild = children[0];

    // if this is a component root node and the component's
    // parent container node also has transition, skip.
    if (hasParentTransition(this.$vnode)) {
      return rawChild
    }

    // apply transition data to child
    // use getRealChild() to ignore abstract components e.g. keep-alive
    var child = getRealChild(rawChild);
    
    if (!child) {
      return rawChild
    }

    if (this._leaving) {
      return placeholder(h, rawChild)
    }

    // ensure a key that is unique to the vnode type and to this transition
    // component instance. This key will be used to remove pending leaving nodes
    // during entering.
    var id = "__transition-" + (this._uid) + "-";
    child.key = child.key == null
      ? child.isComment
        ? id + 'comment'
        : id + child.tag
      : isPrimitive(child.key)
        ? (String(child.key).indexOf(id) === 0 ? child.key : id + child.key)
        : child.key;

    var data = (child.data || (child.data = {})).transition = extractTransitionData(this);
    var oldRawChild = this._vnode;
    var oldChild = getRealChild(oldRawChild);

    // mark v-show
    // so that the transition module can hand over the control to the directive
    if (child.data.directives && child.data.directives.some(function (d) { return d.name === 'show'; })) {
      child.data.show = true;
    }

    if (
      oldChild &&
      oldChild.data &&
      !isSameChild(child, oldChild) &&
      !isAsyncPlaceholder(oldChild) &&
      // #6687 component root is a comment node
      !(oldChild.componentInstance && oldChild.componentInstance._vnode.isComment)
    ) {
      // replace old child transition data with fresh one
      // important for dynamic transitions!
      var oldData = oldChild.data.transition = extend({}, data);
      // handle transition mode
      if (mode === 'out-in') {
        // return placeholder node and queue update when leave finishes
        this._leaving = true;
        mergeVNodeHook(oldData, 'afterLeave', function () {
          this$1._leaving = false;
          this$1.$forceUpdate();
        });
        return placeholder(h, rawChild)
      } else if (mode === 'in-out') {
        if (isAsyncPlaceholder(child)) {
          return oldRawChild
        }
        var delayedLeave;
        var performLeave = function () { delayedLeave(); };
        mergeVNodeHook(data, 'afterEnter', performLeave);
        mergeVNodeHook(data, 'enterCancelled', performLeave);
        mergeVNodeHook(oldData, 'delayLeave', function (leave) { delayedLeave = leave; });
      }
    }

    return rawChild
  }
}



// Provides transition support for list items.
// supports move transitions using the FLIP technique.

// Because the vdom's children update algorithm is "unstable" - i.e.
// it doesn't guarantee the relative positioning of removed elements,
// we force transition-group to update its children into two passes:
// in the first pass, we remove all nodes that need to be removed,
// triggering their leaving transition; in the second pass, we insert/move
// into the final desired state. This way in the second pass removed
// nodes will remain where they should be.

var props = extend({
  tag: String,
  moveClass: String
}, transitionProps);

delete props.mode;

var TransitionGroup = {
  props: props,

  render: function render (h) {
    var tag = this.tag || this.$vnode.data.tag || 'span';
    var map = Object.create(null);
    var prevChildren = this.prevChildren = this.children;
    var rawChildren = this.$slots.default || [];
    var children = this.children = [];
    var transitionData = extractTransitionData(this);

    for (var i = 0; i < rawChildren.length; i++) {
      var c = rawChildren[i];
      if (c.tag) {
        if (c.key != null && String(c.key).indexOf('__vlist') !== 0) {
          children.push(c);
          map[c.key] = c
          ;(c.data || (c.data = {})).transition = transitionData;
        } else if (false) { var name, opts; }
      }
    }

    if (prevChildren) {
      var kept = [];
      var removed = [];
      for (var i$1 = 0; i$1 < prevChildren.length; i$1++) {
        var c$1 = prevChildren[i$1];
        c$1.data.transition = transitionData;
        c$1.data.pos = c$1.elm.getBoundingClientRect();
        if (map[c$1.key]) {
          kept.push(c$1);
        } else {
          removed.push(c$1);
        }
      }
      this.kept = h(tag, null, kept);
      this.removed = removed;
    }

    return h(tag, null, children)
  },

  beforeUpdate: function beforeUpdate () {
    // force removing pass
    this.__patch__(
      this._vnode,
      this.kept,
      false, // hydrating
      true // removeOnly (!important, avoids unnecessary moves)
    );
    this._vnode = this.kept;
  },

  updated: function updated () {
    var children = this.prevChildren;
    var moveClass = this.moveClass || ((this.name || 'v') + '-move');
    if (!children.length || !this.hasMove(children[0].elm, moveClass)) {
      return
    }

    // we divide the work into three loops to avoid mixing DOM reads and writes
    // in each iteration - which helps prevent layout thrashing.
    children.forEach(callPendingCbs);
    children.forEach(recordPosition);
    children.forEach(applyTranslation);

    // force reflow to put everything in position
    // assign to this to avoid being removed in tree-shaking
    // $flow-disable-line
    this._reflow = document.body.offsetHeight;

    children.forEach(function (c) {
      if (c.data.moved) {
        var el = c.elm;
        var s = el.style;
        addTransitionClass(el, moveClass);
        s.transform = s.WebkitTransform = s.transitionDuration = '';
        el.addEventListener(transitionEndEvent, el._moveCb = function cb (e) {
          if (!e || /transform$/.test(e.propertyName)) {
            el.removeEventListener(transitionEndEvent, cb);
            el._moveCb = null;
            removeTransitionClass(el, moveClass);
          }
        });
      }
    });
  },

  methods: {
    hasMove: function hasMove (el, moveClass) {
      
      if (!hasTransition) {
        return false
      }
      
      if (this._hasMove) {
        return this._hasMove
      }
      // Detect whether an element with the move class applied has
      // CSS transitions. Since the element may be inside an entering
      // transition at this very moment, we make a clone of it and remove
      // all other transition classes applied to ensure only the move class
      // is applied.
      var clone = el.cloneNode();
      if (el._transitionClasses) {
        el._transitionClasses.forEach(function (cls) { removeClass(clone, cls); });
      }
      addClass(clone, moveClass);
      clone.style.display = 'none';
      this.$el.appendChild(clone);
      var info = getTransitionInfo(clone);
      this.$el.removeChild(clone);
      return (this._hasMove = info.hasTransform)
    }
  }
}

function callPendingCbs (c) {
  
  if (c.elm._moveCb) {
    c.elm._moveCb();
  }
  
  if (c.elm._enterCb) {
    c.elm._enterCb();
  }
}

function recordPosition (c) {
  c.data.newPos = c.elm.getBoundingClientRect();
}

function applyTranslation (c) {
  var oldPos = c.data.pos;
  var newPos = c.data.newPos;
  var dx = oldPos.left - newPos.left;
  var dy = oldPos.top - newPos.top;
  if (dx || dy) {
    c.data.moved = true;
    var s = c.elm.style;
    s.transform = s.WebkitTransform = "translate(" + dx + "px," + dy + "px)";
    s.transitionDuration = '0s';
  }
}

var platformComponents = {
  Transition: Transition,
  TransitionGroup: TransitionGroup
}



// install platform specific utils
Vue.config.mustUseProp = mustUseProp;
Vue.config.isReservedTag = isReservedTag;
Vue.config.isReservedAttr = isReservedAttr;
Vue.config.getTagNamespace = getTagNamespace;
Vue.config.isUnknownElement = isUnknownElement;

// install platform runtime directives & components
extend(Vue.options.directives, platformDirectives);
extend(Vue.options.components, platformComponents);

// install platform patch function
Vue.prototype.__patch__ = inBrowser ? patch : noop;

// public mount method
Vue.prototype.$mount = function (
  el,
  hydrating
) {
  el = el && inBrowser ? query(el) : undefined;
  return mountComponent(this, el, hydrating)
};

// devtools global hook

if (inBrowser) {
  setTimeout(function () {
    if (config.devtools) {
      if (devtools) {
        devtools.emit('init', Vue);
      } else if (
        false
      ) {}
    }
    if (false
    ) {}
  }, 0);
}



 __webpack_exports__["default"] = (Vue);

}.call(this, __webpack_require__( "./node_modules/webpack/buildin/global.js"), __webpack_require__( "./node_modules/timers-browserify/main.js").setImmediate))

/***/ }),

/***/ "./node_modules/vuex/dist/vuex.esm.js":
/*!********************************************!*\
  !*** ./node_modules/vuex/dist/vuex.esm.js ***!
  \********************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_require__.d(__webpack_exports__, "Store", function() { return Store; });
 __webpack_require__.d(__webpack_exports__, "install", function() { return install; });
 __webpack_require__.d(__webpack_exports__, "mapState", function() { return mapState; });
 __webpack_require__.d(__webpack_exports__, "mapMutations", function() { return mapMutations; });
 __webpack_require__.d(__webpack_exports__, "mapGetters", function() { return mapGetters; });
 __webpack_require__.d(__webpack_exports__, "mapActions", function() { return mapActions; });
 __webpack_require__.d(__webpack_exports__, "createNamespacedHelpers", function() { return createNamespacedHelpers; });
/**
 * vuex v3.0.1
 * (c) 2017 Evan You
 * @license MIT
 */
var applyMixin = function (Vue) {
  var version = Number(Vue.version.split('.')[0]);

  if (version >= 2) {
    Vue.mixin({ beforeCreate: vuexInit });
  } else {
    // override init and inject vuex init procedure
    // for 1.x backwards compatibility.
    var _init = Vue.prototype._init;
    Vue.prototype._init = function (options) {
      if ( options === void 0 ) options = {};

      options.init = options.init
        ? [vuexInit].concat(options.init)
        : vuexInit;
      _init.call(this, options);
    };
  }

  /**
   * Vuex init hook, injected into each instances init hooks list.
   */

  function vuexInit () {
    var options = this.$options;
    // store injection
    if (options.store) {
      this.$store = typeof options.store === 'function'
        ? options.store()
        : options.store;
    } else if (options.parent && options.parent.$store) {
      this.$store = options.parent.$store;
    }
  }
};

var devtoolHook =
  typeof window !== 'undefined' &&
  window.__VUE_DEVTOOLS_GLOBAL_HOOK__;

function devtoolPlugin (store) {
  if (!devtoolHook) { return }

  store._devtoolHook = devtoolHook;

  devtoolHook.emit('vuex:init', store);

  devtoolHook.on('vuex:travel-to-state', function (targetState) {
    store.replaceState(targetState);
  });

  store.subscribe(function (mutation, state) {
    devtoolHook.emit('vuex:mutation', mutation, state);
  });
}

/**
 * Get the first item that pass the test
 * by second argument function
 *
 * @param {Array} list
 * @param {Function} f
 * @return {*}
 */
/**
 * Deep copy the given object considering circular structure.
 * This function caches all nested objects and its copies.
 * If it detects circular structure, use cached copy to avoid infinite loop.
 *
 * @param {*} obj
 * @param {Array<Object>} cache
 * @return {*}
 */


/**
 * forEach for object
 */
function forEachValue (obj, fn) {
  Object.keys(obj).forEach(function (key) { return fn(obj[key], key); });
}

function isObject (obj) {
  return obj !== null && typeof obj === 'object'
}

function isPromise (val) {
  return val && typeof val.then === 'function'
}

function assert (condition, msg) {
  if (!condition) { throw new Error(("[vuex] " + msg)) }
}

var Module = function Module (rawModule, runtime) {
  this.runtime = runtime;
  this._children = Object.create(null);
  this._rawModule = rawModule;
  var rawState = rawModule.state;
  this.state = (typeof rawState === 'function' ? rawState() : rawState) || {};
};

var prototypeAccessors$1 = { namespaced: { configurable: true } };

prototypeAccessors$1.namespaced.get = function () {
  return !!this._rawModule.namespaced
};

Module.prototype.addChild = function addChild (key, module) {
  this._children[key] = module;
};

Module.prototype.removeChild = function removeChild (key) {
  delete this._children[key];
};

Module.prototype.getChild = function getChild (key) {
  return this._children[key]
};

Module.prototype.update = function update (rawModule) {
  this._rawModule.namespaced = rawModule.namespaced;
  if (rawModule.actions) {
    this._rawModule.actions = rawModule.actions;
  }
  if (rawModule.mutations) {
    this._rawModule.mutations = rawModule.mutations;
  }
  if (rawModule.getters) {
    this._rawModule.getters = rawModule.getters;
  }
};

Module.prototype.forEachChild = function forEachChild (fn) {
  forEachValue(this._children, fn);
};

Module.prototype.forEachGetter = function forEachGetter (fn) {
  if (this._rawModule.getters) {
    forEachValue(this._rawModule.getters, fn);
  }
};

Module.prototype.forEachAction = function forEachAction (fn) {
  if (this._rawModule.actions) {
    forEachValue(this._rawModule.actions, fn);
  }
};

Module.prototype.forEachMutation = function forEachMutation (fn) {
  if (this._rawModule.mutations) {
    forEachValue(this._rawModule.mutations, fn);
  }
};

Object.defineProperties( Module.prototype, prototypeAccessors$1 );

var ModuleCollection = function ModuleCollection (rawRootModule) {
  // register root module (Vuex.Store options)
  this.register([], rawRootModule, false);
};

ModuleCollection.prototype.get = function get (path) {
  return path.reduce(function (module, key) {
    return module.getChild(key)
  }, this.root)
};

ModuleCollection.prototype.getNamespace = function getNamespace (path) {
  var module = this.root;
  return path.reduce(function (namespace, key) {
    module = module.getChild(key);
    return namespace + (module.namespaced ? key + '/' : '')
  }, '')
};

ModuleCollection.prototype.update = function update$1 (rawRootModule) {
  update([], this.root, rawRootModule);
};

ModuleCollection.prototype.register = function register (path, rawModule, runtime) {
    var this$1 = this;
    if ( runtime === void 0 ) runtime = true;

  if (false) {}

  var newModule = new Module(rawModule, runtime);
  if (path.length === 0) {
    this.root = newModule;
  } else {
    var parent = this.get(path.slice(0, -1));
    parent.addChild(path[path.length - 1], newModule);
  }

  // register nested modules
  if (rawModule.modules) {
    forEachValue(rawModule.modules, function (rawChildModule, key) {
      this$1.register(path.concat(key), rawChildModule, runtime);
    });
  }
};

ModuleCollection.prototype.unregister = function unregister (path) {
  var parent = this.get(path.slice(0, -1));
  var key = path[path.length - 1];
  if (!parent.getChild(key).runtime) { return }

  parent.removeChild(key);
};

function update (path, targetModule, newModule) {
  if (false) {}

  // update target module
  targetModule.update(newModule);

  // update nested modules
  if (newModule.modules) {
    for (var key in newModule.modules) {
      if (!targetModule.getChild(key)) {
        if (false) {}
        return
      }
      update(
        path.concat(key),
        targetModule.getChild(key),
        newModule.modules[key]
      );
    }
  }
}

var functionAssert = {
  assert: function (value) { return typeof value === 'function'; },
  expected: 'function'
};

var objectAssert = {
  assert: function (value) { return typeof value === 'function' ||
    (typeof value === 'object' && typeof value.handler === 'function'); },
  expected: 'function or object with "handler" function'
};

var assertTypes = {
  getters: functionAssert,
  mutations: functionAssert,
  actions: objectAssert
};

function assertRawModule (path, rawModule) {
  Object.keys(assertTypes).forEach(function (key) {
    if (!rawModule[key]) { return }

    var assertOptions = assertTypes[key];

    forEachValue(rawModule[key], function (value, type) {
      assert(
        assertOptions.assert(value),
        makeAssertionMessage(path, key, type, value, assertOptions.expected)
      );
    });
  });
}

function makeAssertionMessage (path, key, type, value, expected) {
  var buf = key + " should be " + expected + " but \"" + key + "." + type + "\"";
  if (path.length > 0) {
    buf += " in module \"" + (path.join('.')) + "\"";
  }
  buf += " is " + (JSON.stringify(value)) + ".";
  return buf
}

var Vue; // bind on install

var Store = function Store (options) {
  var this$1 = this;
  if ( options === void 0 ) options = {};

  // Auto install if it is not done yet and `window` has `Vue`.
  // To allow users to avoid auto-installation in some cases,
  // this code should be placed here. See #731
  if (!Vue && typeof window !== 'undefined' && window.Vue) {
    install(window.Vue);
  }

  if (false) {}

  var plugins = options.plugins; if ( plugins === void 0 ) plugins = [];
  var strict = options.strict; if ( strict === void 0 ) strict = false;

  var state = options.state; if ( state === void 0 ) state = {};
  if (typeof state === 'function') {
    state = state() || {};
  }

  // store internal state
  this._committing = false;
  this._actions = Object.create(null);
  this._actionSubscribers = [];
  this._mutations = Object.create(null);
  this._wrappedGetters = Object.create(null);
  this._modules = new ModuleCollection(options);
  this._modulesNamespaceMap = Object.create(null);
  this._subscribers = [];
  this._watcherVM = new Vue();

  // bind commit and dispatch to self
  var store = this;
  var ref = this;
  var dispatch = ref.dispatch;
  var commit = ref.commit;
  this.dispatch = function boundDispatch (type, payload) {
    return dispatch.call(store, type, payload)
  };
  this.commit = function boundCommit (type, payload, options) {
    return commit.call(store, type, payload, options)
  };

  // strict mode
  this.strict = strict;

  // init root module.
  // this also recursively registers all sub-modules
  // and collects all module getters inside this._wrappedGetters
  installModule(this, state, [], this._modules.root);

  // initialize the store vm, which is responsible for the reactivity
  // (also registers _wrappedGetters as computed properties)
  resetStoreVM(this, state);

  // apply plugins
  plugins.forEach(function (plugin) { return plugin(this$1); });

  if (Vue.config.devtools) {
    devtoolPlugin(this);
  }
};

var prototypeAccessors = { state: { configurable: true } };

prototypeAccessors.state.get = function () {
  return this._vm._data.$$state
};

prototypeAccessors.state.set = function (v) {
  if (false) {}
};

Store.prototype.commit = function commit (_type, _payload, _options) {
    var this$1 = this;

  // check object-style commit
  var ref = unifyObjectStyle(_type, _payload, _options);
    var type = ref.type;
    var payload = ref.payload;
    var options = ref.options;

  var mutation = { type: type, payload: payload };
  var entry = this._mutations[type];
  if (!entry) {
    if (false) {}
    return
  }
  this._withCommit(function () {
    entry.forEach(function commitIterator (handler) {
      handler(payload);
    });
  });
  this._subscribers.forEach(function (sub) { return sub(mutation, this$1.state); });

  if (
    false
  ) {}
};

Store.prototype.dispatch = function dispatch (_type, _payload) {
    var this$1 = this;

  // check object-style dispatch
  var ref = unifyObjectStyle(_type, _payload);
    var type = ref.type;
    var payload = ref.payload;

  var action = { type: type, payload: payload };
  var entry = this._actions[type];
  if (!entry) {
    if (false) {}
    return
  }

  this._actionSubscribers.forEach(function (sub) { return sub(action, this$1.state); });

  return entry.length > 1
    ? Promise.all(entry.map(function (handler) { return handler(payload); }))
    : entry[0](payload)
};

Store.prototype.subscribe = function subscribe (fn) {
  return genericSubscribe(fn, this._subscribers)
};

Store.prototype.subscribeAction = function subscribeAction (fn) {
  return genericSubscribe(fn, this._actionSubscribers)
};

Store.prototype.watch = function watch (getter, cb, options) {
    var this$1 = this;

  if (false) {}
  return this._watcherVM.$watch(function () { return getter(this$1.state, this$1.getters); }, cb, options)
};

Store.prototype.replaceState = function replaceState (state) {
    var this$1 = this;

  this._withCommit(function () {
    this$1._vm._data.$$state = state;
  });
};

Store.prototype.registerModule = function registerModule (path, rawModule, options) {
    if ( options === void 0 ) options = {};

  if (typeof path === 'string') { path = [path]; }

  if (false) {}

  this._modules.register(path, rawModule);
  installModule(this, this.state, path, this._modules.get(path), options.preserveState);
  // reset store to update getters...
  resetStoreVM(this, this.state);
};

Store.prototype.unregisterModule = function unregisterModule (path) {
    var this$1 = this;

  if (typeof path === 'string') { path = [path]; }

  if (false) {}

  this._modules.unregister(path);
  this._withCommit(function () {
    var parentState = getNestedState(this$1.state, path.slice(0, -1));
    Vue.delete(parentState, path[path.length - 1]);
  });
  resetStore(this);
};

Store.prototype.hotUpdate = function hotUpdate (newOptions) {
  this._modules.update(newOptions);
  resetStore(this, true);
};

Store.prototype._withCommit = function _withCommit (fn) {
  var committing = this._committing;
  this._committing = true;
  fn();
  this._committing = committing;
};

Object.defineProperties( Store.prototype, prototypeAccessors );

function genericSubscribe (fn, subs) {
  if (subs.indexOf(fn) < 0) {
    subs.push(fn);
  }
  return function () {
    var i = subs.indexOf(fn);
    if (i > -1) {
      subs.splice(i, 1);
    }
  }
}

function resetStore (store, hot) {
  store._actions = Object.create(null);
  store._mutations = Object.create(null);
  store._wrappedGetters = Object.create(null);
  store._modulesNamespaceMap = Object.create(null);
  var state = store.state;
  // init all modules
  installModule(store, state, [], store._modules.root, true);
  // reset vm
  resetStoreVM(store, state, hot);
}

function resetStoreVM (store, state, hot) {
  var oldVm = store._vm;

  // bind store public getters
  store.getters = {};
  var wrappedGetters = store._wrappedGetters;
  var computed = {};
  forEachValue(wrappedGetters, function (fn, key) {
    // use computed to leverage its lazy-caching mechanism
    computed[key] = function () { return fn(store); };
    Object.defineProperty(store.getters, key, {
      get: function () { return store._vm[key]; },
      enumerable: true // for local getters
    });
  });

  // use a Vue instance to store the state tree
  // suppress warnings just in case the user has added
  // some funky global mixins
  var silent = Vue.config.silent;
  Vue.config.silent = true;
  store._vm = new Vue({
    data: {
      $$state: state
    },
    computed: computed
  });
  Vue.config.silent = silent;

  // enable strict mode for new vm
  if (store.strict) {
    enableStrictMode(store);
  }

  if (oldVm) {
    if (hot) {
      // dispatch changes in all subscribed watchers
      // to force getter re-evaluation for hot reloading.
      store._withCommit(function () {
        oldVm._data.$$state = null;
      });
    }
    Vue.nextTick(function () { return oldVm.$destroy(); });
  }
}

function installModule (store, rootState, path, module, hot) {
  var isRoot = !path.length;
  var namespace = store._modules.getNamespace(path);

  // register in namespace map
  if (module.namespaced) {
    store._modulesNamespaceMap[namespace] = module;
  }

  // set state
  if (!isRoot && !hot) {
    var parentState = getNestedState(rootState, path.slice(0, -1));
    var moduleName = path[path.length - 1];
    store._withCommit(function () {
      Vue.set(parentState, moduleName, module.state);
    });
  }

  var local = module.context = makeLocalContext(store, namespace, path);

  module.forEachMutation(function (mutation, key) {
    var namespacedType = namespace + key;
    registerMutation(store, namespacedType, mutation, local);
  });

  module.forEachAction(function (action, key) {
    var type = action.root ? key : namespace + key;
    var handler = action.handler || action;
    registerAction(store, type, handler, local);
  });

  module.forEachGetter(function (getter, key) {
    var namespacedType = namespace + key;
    registerGetter(store, namespacedType, getter, local);
  });

  module.forEachChild(function (child, key) {
    installModule(store, rootState, path.concat(key), child, hot);
  });
}

/**
 * make localized dispatch, commit, getters and state
 * if there is no namespace, just use root ones
 */
function makeLocalContext (store, namespace, path) {
  var noNamespace = namespace === '';

  var local = {
    dispatch: noNamespace ? store.dispatch : function (_type, _payload, _options) {
      var args = unifyObjectStyle(_type, _payload, _options);
      var payload = args.payload;
      var options = args.options;
      var type = args.type;

      if (!options || !options.root) {
        type = namespace + type;
        if (false) {}
      }

      return store.dispatch(type, payload)
    },

    commit: noNamespace ? store.commit : function (_type, _payload, _options) {
      var args = unifyObjectStyle(_type, _payload, _options);
      var payload = args.payload;
      var options = args.options;
      var type = args.type;

      if (!options || !options.root) {
        type = namespace + type;
        if (false) {}
      }

      store.commit(type, payload, options);
    }
  };

  // getters and state object must be gotten lazily
  // because they will be changed by vm update
  Object.defineProperties(local, {
    getters: {
      get: noNamespace
        ? function () { return store.getters; }
        : function () { return makeLocalGetters(store, namespace); }
    },
    state: {
      get: function () { return getNestedState(store.state, path); }
    }
  });

  return local
}

function makeLocalGetters (store, namespace) {
  var gettersProxy = {};

  var splitPos = namespace.length;
  Object.keys(store.getters).forEach(function (type) {
    // skip if the target getter is not match this namespace
    if (type.slice(0, splitPos) !== namespace) { return }

    // extract local getter type
    var localType = type.slice(splitPos);

    // Add a port to the getters proxy.
    // Define as getter property because
    // we do not want to evaluate the getters in this time.
    Object.defineProperty(gettersProxy, localType, {
      get: function () { return store.getters[type]; },
      enumerable: true
    });
  });

  return gettersProxy
}

function registerMutation (store, type, handler, local) {
  var entry = store._mutations[type] || (store._mutations[type] = []);
  entry.push(function wrappedMutationHandler (payload) {
    handler.call(store, local.state, payload);
  });
}

function registerAction (store, type, handler, local) {
  var entry = store._actions[type] || (store._actions[type] = []);
  entry.push(function wrappedActionHandler (payload, cb) {
    var res = handler.call(store, {
      dispatch: local.dispatch,
      commit: local.commit,
      getters: local.getters,
      state: local.state,
      rootGetters: store.getters,
      rootState: store.state
    }, payload, cb);
    if (!isPromise(res)) {
      res = Promise.resolve(res);
    }
    if (store._devtoolHook) {
      return res.catch(function (err) {
        store._devtoolHook.emit('vuex:error', err);
        throw err
      })
    } else {
      return res
    }
  });
}

function registerGetter (store, type, rawGetter, local) {
  if (store._wrappedGetters[type]) {
    if (false) {}
    return
  }
  store._wrappedGetters[type] = function wrappedGetter (store) {
    return rawGetter(
      local.state, // local state
      local.getters, // local getters
      store.state, // root state
      store.getters // root getters
    )
  };
}

function enableStrictMode (store) {
  store._vm.$watch(function () { return this._data.$$state }, function () {
    if (false) {}
  }, { deep: true, sync: true });
}

function getNestedState (state, path) {
  return path.length
    ? path.reduce(function (state, key) { return state[key]; }, state)
    : state
}

function unifyObjectStyle (type, payload, options) {
  if (isObject(type) && type.type) {
    options = payload;
    payload = type;
    type = type.type;
  }

  if (false) {}

  return { type: type, payload: payload, options: options }
}

function install (_Vue) {
  if (Vue && _Vue === Vue) {
    if (false) {}
    return
  }
  Vue = _Vue;
  applyMixin(Vue);
}

var mapState = normalizeNamespace(function (namespace, states) {
  var res = {};
  normalizeMap(states).forEach(function (ref) {
    var key = ref.key;
    var val = ref.val;

    res[key] = function mappedState () {
      var state = this.$store.state;
      var getters = this.$store.getters;
      if (namespace) {
        var module = getModuleByNamespace(this.$store, 'mapState', namespace);
        if (!module) {
          return
        }
        state = module.context.state;
        getters = module.context.getters;
      }
      return typeof val === 'function'
        ? val.call(this, state, getters)
        : state[val]
    };
    // mark vuex getter for devtools
    res[key].vuex = true;
  });
  return res
});

var mapMutations = normalizeNamespace(function (namespace, mutations) {
  var res = {};
  normalizeMap(mutations).forEach(function (ref) {
    var key = ref.key;
    var val = ref.val;

    res[key] = function mappedMutation () {
      var args = [], len = arguments.length;
      while ( len-- ) args[ len ] = arguments[ len ];

      var commit = this.$store.commit;
      if (namespace) {
        var module = getModuleByNamespace(this.$store, 'mapMutations', namespace);
        if (!module) {
          return
        }
        commit = module.context.commit;
      }
      return typeof val === 'function'
        ? val.apply(this, [commit].concat(args))
        : commit.apply(this.$store, [val].concat(args))
    };
  });
  return res
});

var mapGetters = normalizeNamespace(function (namespace, getters) {
  var res = {};
  normalizeMap(getters).forEach(function (ref) {
    var key = ref.key;
    var val = ref.val;

    val = namespace + val;
    res[key] = function mappedGetter () {
      if (namespace && !getModuleByNamespace(this.$store, 'mapGetters', namespace)) {
        return
      }
      if (false) {}
      return this.$store.getters[val]
    };
    // mark vuex getter for devtools
    res[key].vuex = true;
  });
  return res
});

var mapActions = normalizeNamespace(function (namespace, actions) {
  var res = {};
  normalizeMap(actions).forEach(function (ref) {
    var key = ref.key;
    var val = ref.val;

    res[key] = function mappedAction () {
      var args = [], len = arguments.length;
      while ( len-- ) args[ len ] = arguments[ len ];

      var dispatch = this.$store.dispatch;
      if (namespace) {
        var module = getModuleByNamespace(this.$store, 'mapActions', namespace);
        if (!module) {
          return
        }
        dispatch = module.context.dispatch;
      }
      return typeof val === 'function'
        ? val.apply(this, [dispatch].concat(args))
        : dispatch.apply(this.$store, [val].concat(args))
    };
  });
  return res
});

var createNamespacedHelpers = function (namespace) { return ({
  mapState: mapState.bind(null, namespace),
  mapGetters: mapGetters.bind(null, namespace),
  mapMutations: mapMutations.bind(null, namespace),
  mapActions: mapActions.bind(null, namespace)
}); };

function normalizeMap (map) {
  return Array.isArray(map)
    ? map.map(function (key) { return ({ key: key, val: key }); })
    : Object.keys(map).map(function (key) { return ({ key: key, val: map[key] }); })
}

function normalizeNamespace (fn) {
  return function (namespace, map) {
    if (typeof namespace !== 'string') {
      map = namespace;
      namespace = '';
    } else if (namespace.charAt(namespace.length - 1) !== '/') {
      namespace += '/';
    }
    return fn(namespace, map)
  }
}

function getModuleByNamespace (store, helper, namespace) {
  var module = store._modulesNamespaceMap[namespace];
  if (false) {}
  return module
}

var index_esm = {
  Store: Store,
  install: install,
  version: '3.0.1',
  mapState: mapState,
  mapMutations: mapMutations,
  mapGetters: mapGetters,
  mapActions: mapActions,
  createNamespacedHelpers: createNamespacedHelpers
};


 __webpack_exports__["default"] = (index_esm);


/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/

/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || Function("return this")() || (1, eval)("this");
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./src/assets/images/loading.gif":
/*!***************************************!*\
  !*** ./src/assets/images/loading.gif ***!
  \***************************************/

/***/ (function(module, exports) {

module.exports = "../../images/loading.gif";

/***/ }),

/***/ "./src/components/currency-selector/currency-selector.vue":
/*!****************************************************************!*\
  !*** ./src/components/currency-selector/currency-selector.vue ***!
  \****************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _currency_selector_vue_vue_type_template_id_c4f78ba0__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/components/currency-selector/currency-selector.vue?vue&type=template&id=c4f78ba0");
 var _currency_selector_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/components/currency-selector/currency-selector.vue?vue&type=script&lang=js");
 var _currency_selector_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/components/currency-selector/currency-selector.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__( "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");








var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _currency_selector_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__["default"],
  _currency_selector_vue_vue_type_template_id_c4f78ba0__WEBPACK_IMPORTED_MODULE_0__["render"],
  _currency_selector_vue_vue_type_template_id_c4f78ba0__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

 __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./src/components/currency-selector/currency-selector.vue?vue&type=script&lang=js":
/*!****************************************************************************************!*\
  !*** ./src/components/currency-selector/currency-selector.vue?vue&type=script&lang=js ***!
  \****************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_currency_selector_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/currency-selector/currency-selector.vue?vue&type=script&lang=js");
  __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_currency_selector_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./src/components/currency-selector/currency-selector.vue?vue&type=style&index=0&lang=scss":
/*!*************************************************************************************************!*\
  !*** ./src/components/currency-selector/currency-selector.vue?vue&type=style&index=0&lang=scss ***!
  \*************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_currency_selector_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/currency-selector/currency-selector.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_currency_selector_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_currency_selector_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__);
 for(var __WEBPACK_IMPORT_KEY__ in _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_currency_selector_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_currency_selector_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
  __webpack_exports__["default"] = (_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_currency_selector_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ "./src/components/currency-selector/currency-selector.vue?vue&type=template&id=c4f78ba0":
/*!**********************************************************************************************!*\
  !*** ./src/components/currency-selector/currency-selector.vue?vue&type=template&id=c4f78ba0 ***!
  \**********************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_currency_selector_vue_vue_type_template_id_c4f78ba0__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/currency-selector/currency-selector.vue?vue&type=template&id=c4f78ba0");
 __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_currency_selector_vue_vue_type_template_id_c4f78ba0__WEBPACK_IMPORTED_MODULE_0__["render"]; });

 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_currency_selector_vue_vue_type_template_id_c4f78ba0__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./src/components/currency-selector/data.js":
/*!**************************************************!*\
  !*** ./src/components/currency-selector/data.js ***!
  \**************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
 var _shared_js_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/util.js");



 __webpack_exports__["default"] = (function (actionType) {
    var param = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    switch (actionType) {
        case _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["FETCH_CURRENCY"]:
            return _shared_js_util__WEBPACK_IMPORTED_MODULE_1__["default"].getData('/api/account/preferences/currency', param);
        case _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["SELECT_CURRENCY"]:
            return _shared_js_util__WEBPACK_IMPORTED_MODULE_1__["default"].postData('/api/account/preferences/currency', param, { showLoading: true });
        default:
            return Promise.resolve({});
    }
});

/***/ }),

/***/ "./src/components/currency-selector/store.js":
/*!***************************************************!*\
  !*** ./src/components/currency-selector/store.js ***!
  \***************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/shared/js/constants/mutation-types.js");
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
 var _data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/components/currency-selector/data.js");
var _mutations, _actions;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





 __webpack_exports__["default"] = ({
    namespaced: true,

    state: {
        currencies: []
    },

    getters: {
        currencyCode: function currencyCode(state) {
            return (state.currencies.find(function (currency) {
                return currency.selected;
            }) || {}).code;
        }
    },

    mutations: (_mutations = {}, _defineProperty(_mutations, _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_0__["LOAD_CURRENCY"], function (state, _ref) {
        var data = _ref.data;

        state.currencies = [];
        state.currencies.push.apply(state.currencies, data);
    }), _defineProperty(_mutations, _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SELECT_CURRENCY"], function (state, _ref2) {
        var code = _ref2.code;

        state.currencies.forEach(function (currency) {
            return currency.selected = false;
        });
        state.currencies.find(function (currency) {
            return currency.code === code;
        }).selected = true;
    }), _mutations),

    actions: (_actions = {}, _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["FETCH_CURRENCY"], function (_ref3) {
        var commit = _ref3.commit;

        Object(_data__WEBPACK_IMPORTED_MODULE_2__["default"])(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["FETCH_CURRENCY"]).then(function (data) {
            commit(_shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_0__["LOAD_CURRENCY"], { data: data });
        }).catch(function (error) {});
    }), _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["SELECT_CURRENCY"], function (_ref4, currency) {
        var _this = this;

        var commit = _ref4.commit,
            dispatch = _ref4.dispatch;

        Object(_data__WEBPACK_IMPORTED_MODULE_2__["default"])(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["SELECT_CURRENCY"], currency).then(function (data) {
            commit(_shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SELECT_CURRENCY"], currency);
            dispatch(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["CURRENCY_UPDATED"], data);
            dispatch('navigation/' + _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["TOGGLE_NAV_MENU"], false, { root: true });
            _this.router.back();
        }).catch(function (error) {});
    }), _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["CURRENCY_UPDATED"], function () {
        // do nothing, to be overridden by specific pages
    }), _actions)
});

/***/ }),

/***/ "./src/components/global-search/data.js":
/*!**********************************************!*\
  !*** ./src/components/global-search/data.js ***!
  \**********************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
 var _shared_js_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/util.js");



 __webpack_exports__["default"] = (function (actionType) {
    var param = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    switch (actionType) {
        case _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["SEARCH_HOTEL"]:
            var hotelList = _shared_js_util__WEBPACK_IMPORTED_MODULE_1__["default"].getData('/mapi/Search/Destination', param);
            return hotelList;
        case _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["GET_SEARCH_HISTORY"]:
            var searchHistory = window.searchHistory || _shared_js_util__WEBPACK_IMPORTED_MODULE_1__["default"].getData('/api/book2/searchhistory', { _rand: new Date().getTime() });
            return searchHistory;
        default:
            return Promise.resolve({});
    }
});

/***/ }),

/***/ "./src/components/global-search/global-search.vue":
/*!********************************************************!*\
  !*** ./src/components/global-search/global-search.vue ***!
  \********************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _global_search_vue_vue_type_template_id_7addf392__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/components/global-search/global-search.vue?vue&type=template&id=7addf392");
 var _global_search_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/components/global-search/global-search.vue?vue&type=script&lang=js");
 var _global_search_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/components/global-search/global-search.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__( "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");








var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _global_search_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__["default"],
  _global_search_vue_vue_type_template_id_7addf392__WEBPACK_IMPORTED_MODULE_0__["render"],
  _global_search_vue_vue_type_template_id_7addf392__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

 __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./src/components/global-search/global-search.vue?vue&type=script&lang=js":
/*!********************************************************************************!*\
  !*** ./src/components/global-search/global-search.vue?vue&type=script&lang=js ***!
  \********************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_global_search_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/global-search/global-search.vue?vue&type=script&lang=js");
  __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_global_search_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./src/components/global-search/global-search.vue?vue&type=style&index=0&lang=scss":
/*!*****************************************************************************************!*\
  !*** ./src/components/global-search/global-search.vue?vue&type=style&index=0&lang=scss ***!
  \*****************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_global_search_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/global-search/global-search.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_global_search_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_global_search_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__);
 for(var __WEBPACK_IMPORT_KEY__ in _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_global_search_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_global_search_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
  __webpack_exports__["default"] = (_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_global_search_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ "./src/components/global-search/global-search.vue?vue&type=template&id=7addf392":
/*!**************************************************************************************!*\
  !*** ./src/components/global-search/global-search.vue?vue&type=template&id=7addf392 ***!
  \**************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_global_search_vue_vue_type_template_id_7addf392__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/global-search/global-search.vue?vue&type=template&id=7addf392");
 __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_global_search_vue_vue_type_template_id_7addf392__WEBPACK_IMPORTED_MODULE_0__["render"]; });

 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_global_search_vue_vue_type_template_id_7addf392__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./src/components/global-search/store.js":
/*!***********************************************!*\
  !*** ./src/components/global-search/store.js ***!
  \***********************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
 var _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/constants/mutation-types.js");
 var _data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/components/global-search/data.js");
var _actions, _mutations;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





 __webpack_exports__["default"] = ({
    namespaced: true,
    state: {
        searchResults: '',
        searchHistory: ''
    },
    getters: {
        searchResultslist: function searchResultslist(state) {
            if (state.searchResults) {
                return state.searchResults.city.concat(state.searchResults.hotel);
            } else {
                return '';
            }
        }
    },
    actions: (_actions = {}, _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["SEARCH_HOTEL"], function (_ref, payload) {
        var commit = _ref.commit;

        commit(_shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["SEARCH_HOTEL"], payload);
    }), _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["GET_SEARCH_HISTORY"], function (_ref2, payload) {
        var commit = _ref2.commit;

        commit(_shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["GET_SEARCH_HISTORY"], payload);
    }), _actions),
    mutations: (_mutations = {}, _defineProperty(_mutations, _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["SEARCH_HOTEL"], function (state, _ref3) {
        var keyword = _ref3.keyword;

        Object(_data__WEBPACK_IMPORTED_MODULE_2__["default"])(_shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["SEARCH_HOTEL"], { keyword: keyword }).then(function (data) {
            state.searchResults = data.data;
        }).catch(function (error) {
            state.searchResults = [];
        });
    }), _defineProperty(_mutations, _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["GET_SEARCH_HISTORY"], function (state) {
        Object(_data__WEBPACK_IMPORTED_MODULE_2__["default"])(_shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["GET_SEARCH_HISTORY"]).then(function (data) {
            state.searchHistory = data.data;
        }).catch(function (error) {
            state.searchHistory = [];
        });
    }), _mutations)
});

/***/ }),

/***/ "./src/components/going-app/going-app.vue":
/*!************************************************!*\
  !*** ./src/components/going-app/going-app.vue ***!
  \************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _going_app_vue_vue_type_template_id_0d485394__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/components/going-app/going-app.vue?vue&type=template&id=0d485394");
 var _going_app_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/components/going-app/going-app.vue?vue&type=script&lang=js");
 var _going_app_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/components/going-app/going-app.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__( "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");








var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _going_app_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__["default"],
  _going_app_vue_vue_type_template_id_0d485394__WEBPACK_IMPORTED_MODULE_0__["render"],
  _going_app_vue_vue_type_template_id_0d485394__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

 __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./src/components/going-app/going-app.vue?vue&type=script&lang=js":
/*!************************************************************************!*\
  !*** ./src/components/going-app/going-app.vue?vue&type=script&lang=js ***!
  \************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_going_app_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/going-app/going-app.vue?vue&type=script&lang=js");
  __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_going_app_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./src/components/going-app/going-app.vue?vue&type=style&index=0&lang=scss":
/*!*********************************************************************************!*\
  !*** ./src/components/going-app/going-app.vue?vue&type=style&index=0&lang=scss ***!
  \*********************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_going_app_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/going-app/going-app.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_going_app_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_going_app_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__);
 for(var __WEBPACK_IMPORT_KEY__ in _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_going_app_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_going_app_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
  __webpack_exports__["default"] = (_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_going_app_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ "./src/components/going-app/going-app.vue?vue&type=template&id=0d485394":
/*!******************************************************************************!*\
  !*** ./src/components/going-app/going-app.vue?vue&type=template&id=0d485394 ***!
  \******************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_going_app_vue_vue_type_template_id_0d485394__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/going-app/going-app.vue?vue&type=template&id=0d485394");
 __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_going_app_vue_vue_type_template_id_0d485394__WEBPACK_IMPORTED_MODULE_0__["render"]; });

 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_going_app_vue_vue_type_template_id_0d485394__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./src/components/going-app/store.js":
/*!*******************************************!*\
  !*** ./src/components/going-app/store.js ***!
  \*******************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

 __webpack_exports__["default"] = ({
    namespaced: true,
    state: _extends({}, (window.pageData || {}).appConfig)
});

/***/ }),

/***/ "./src/components/homepage/search-overlay/data.js":
/*!********************************************************!*\
  !*** ./src/components/homepage/search-overlay/data.js ***!
  \********************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
 var _shared_js_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/util.js");



 __webpack_exports__["default"] = (function (actionType) {
    var param = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    switch (actionType) {
        case _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["GET_TOP_TEN"]:
            var topTen = window.topTen && Promise.resolve(window.topTen) || _shared_js_util__WEBPACK_IMPORTED_MODULE_1__["default"].getData('/api/book2/destinations/top10');
            window.topTen = topTen;
            return topTen;
        case _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["SEARCH_HOTEL"]:
            var hotelList = _shared_js_util__WEBPACK_IMPORTED_MODULE_1__["default"].getData('/mapi/Search/Destination', param);
            return hotelList;
        default:
            return Promise.resolve({});
    }
});

/***/ }),

/***/ "./src/components/homepage/search-overlay/search-overlay.vue":
/*!*******************************************************************!*\
  !*** ./src/components/homepage/search-overlay/search-overlay.vue ***!
  \*******************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _search_overlay_vue_vue_type_template_id_8a9d65a8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/components/homepage/search-overlay/search-overlay.vue?vue&type=template&id=8a9d65a8");
 var _search_overlay_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/components/homepage/search-overlay/search-overlay.vue?vue&type=script&lang=js");
 var _search_overlay_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/components/homepage/search-overlay/search-overlay.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__( "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");








var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _search_overlay_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__["default"],
  _search_overlay_vue_vue_type_template_id_8a9d65a8__WEBPACK_IMPORTED_MODULE_0__["render"],
  _search_overlay_vue_vue_type_template_id_8a9d65a8__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

 __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./src/components/homepage/search-overlay/search-overlay.vue?vue&type=script&lang=js":
/*!*******************************************************************************************!*\
  !*** ./src/components/homepage/search-overlay/search-overlay.vue?vue&type=script&lang=js ***!
  \*******************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_search_overlay_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/homepage/search-overlay/search-overlay.vue?vue&type=script&lang=js");
  __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_search_overlay_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./src/components/homepage/search-overlay/search-overlay.vue?vue&type=style&index=0&lang=scss":
/*!****************************************************************************************************!*\
  !*** ./src/components/homepage/search-overlay/search-overlay.vue?vue&type=style&index=0&lang=scss ***!
  \****************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_search_overlay_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/homepage/search-overlay/search-overlay.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_search_overlay_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_search_overlay_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__);
 for(var __WEBPACK_IMPORT_KEY__ in _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_search_overlay_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_search_overlay_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
  __webpack_exports__["default"] = (_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_search_overlay_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ "./src/components/homepage/search-overlay/search-overlay.vue?vue&type=template&id=8a9d65a8":
/*!*************************************************************************************************!*\
  !*** ./src/components/homepage/search-overlay/search-overlay.vue?vue&type=template&id=8a9d65a8 ***!
  \*************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_search_overlay_vue_vue_type_template_id_8a9d65a8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/homepage/search-overlay/search-overlay.vue?vue&type=template&id=8a9d65a8");
 __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_search_overlay_vue_vue_type_template_id_8a9d65a8__WEBPACK_IMPORTED_MODULE_0__["render"]; });

 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_search_overlay_vue_vue_type_template_id_8a9d65a8__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./src/components/homepage/search-overlay/store.js":
/*!*********************************************************!*\
  !*** ./src/components/homepage/search-overlay/store.js ***!
  \*********************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
 var _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/constants/mutation-types.js");
 var _data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/components/homepage/search-overlay/data.js");
var _actions, _mutations;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





 __webpack_exports__["default"] = ({
    namespaced: true,
    state: (JSON.parse(window.sessionStorage.getItem('searchState') || null) || {}).searchOverlay || {
        searchLocation: '',
        topTen: [],
        searchResults: ''
    },
    actions: (_actions = {}, _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["UPDATE_LOCATION"], function (_ref, payload) {
        var commit = _ref.commit,
            dispatch = _ref.dispatch;

        commit(_shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["UPDATE_LOCATION"], payload);
        dispatch('applyCode/' + _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["VALID_CODE"], {}, { root: true });
        dispatch('searchPage/' + _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["UPDATE_LOCATION"], {}, { root: true });
    }), _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["GET_TOP_TEN"], function (_ref2) {
        var commit = _ref2.commit;

        commit(_shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["GET_TOP_TEN"]);
    }), _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["SEARCH_HOTEL"], function (_ref3, payload) {
        var commit = _ref3.commit;

        commit(_shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["SEARCH_HOTEL"], payload);
    }), _actions),
    mutations: (_mutations = {}, _defineProperty(_mutations, _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["GET_TOP_TEN"], function (state) {
        Object(_data__WEBPACK_IMPORTED_MODULE_2__["default"])(_shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["GET_TOP_TEN"]).then(function (data) {
            state.topTen = data.data;
        }).catch(function (error) {
            state.topTen = [];
        });
    }), _defineProperty(_mutations, _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["SEARCH_HOTEL"], function (state, _ref4) {
        var keyword = _ref4.keyword;

        Object(_data__WEBPACK_IMPORTED_MODULE_2__["default"])(_shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["SEARCH_HOTEL"], { keyword: keyword }).then(function (data) {
            state.searchResults = data.data;
        }).catch(function (error) {
            state.searchResults = [];
        });
    }), _defineProperty(_mutations, _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["UPDATE_LOCATION"], function (state, _ref5) {
        var searchLocation = _ref5.searchLocation;

        state.searchLocation = searchLocation;
    }), _mutations)
});

/***/ }),

/***/ "./src/components/language-selector/data.js":
/*!**************************************************!*\
  !*** ./src/components/language-selector/data.js ***!
  \**************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
 var _shared_js_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/util.js");



 __webpack_exports__["default"] = (function (actionType) {
    var param = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    switch (actionType) {
        case _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["FETCH_LANGUAGE"]:
            return _shared_js_util__WEBPACK_IMPORTED_MODULE_1__["default"].getData('/api/account/preferences/lang', param);
        case _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["SELECT_LANGUAGE"]:
            return _shared_js_util__WEBPACK_IMPORTED_MODULE_1__["default"].postData('/api/account/preferences/lang', param, { showLoading: true });
        default:
            return Promise.resolve({});
    }
});

/***/ }),

/***/ "./src/components/language-selector/language-selector.vue":
/*!****************************************************************!*\
  !*** ./src/components/language-selector/language-selector.vue ***!
  \****************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _language_selector_vue_vue_type_template_id_d9a81d86__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/components/language-selector/language-selector.vue?vue&type=template&id=d9a81d86");
 var _language_selector_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/components/language-selector/language-selector.vue?vue&type=script&lang=js");
 var _language_selector_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/components/language-selector/language-selector.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__( "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");








var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _language_selector_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__["default"],
  _language_selector_vue_vue_type_template_id_d9a81d86__WEBPACK_IMPORTED_MODULE_0__["render"],
  _language_selector_vue_vue_type_template_id_d9a81d86__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

 __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./src/components/language-selector/language-selector.vue?vue&type=script&lang=js":
/*!****************************************************************************************!*\
  !*** ./src/components/language-selector/language-selector.vue?vue&type=script&lang=js ***!
  \****************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_language_selector_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/language-selector/language-selector.vue?vue&type=script&lang=js");
  __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_language_selector_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./src/components/language-selector/language-selector.vue?vue&type=style&index=0&lang=scss":
/*!*************************************************************************************************!*\
  !*** ./src/components/language-selector/language-selector.vue?vue&type=style&index=0&lang=scss ***!
  \*************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_language_selector_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/language-selector/language-selector.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_language_selector_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_language_selector_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__);
 for(var __WEBPACK_IMPORT_KEY__ in _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_language_selector_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_language_selector_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
  __webpack_exports__["default"] = (_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_language_selector_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ "./src/components/language-selector/language-selector.vue?vue&type=template&id=d9a81d86":
/*!**********************************************************************************************!*\
  !*** ./src/components/language-selector/language-selector.vue?vue&type=template&id=d9a81d86 ***!
  \**********************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_language_selector_vue_vue_type_template_id_d9a81d86__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/language-selector/language-selector.vue?vue&type=template&id=d9a81d86");
 __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_language_selector_vue_vue_type_template_id_d9a81d86__WEBPACK_IMPORTED_MODULE_0__["render"]; });

 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_language_selector_vue_vue_type_template_id_d9a81d86__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./src/components/language-selector/store.js":
/*!***************************************************!*\
  !*** ./src/components/language-selector/store.js ***!
  \***************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/shared/js/constants/mutation-types.js");
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
 var _data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/components/language-selector/data.js");
var _actions;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





 __webpack_exports__["default"] = ({
    namespaced: true,

    state: {
        languages: []
    },

    mutations: _defineProperty({}, _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_0__["LOAD_LANGUAGE"], function (state, _ref) {
        var data = _ref.data;

        state.languages.push.apply(state.languages, data);
    }),

    actions: (_actions = {}, _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["FETCH_LANGUAGE"], function (_ref2) {
        var commit = _ref2.commit;

        Object(_data__WEBPACK_IMPORTED_MODULE_2__["default"])(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["FETCH_LANGUAGE"]).then(function (data) {
            commit(_shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_0__["LOAD_LANGUAGE"], { data: data });
        }).catch(function (error) {});
    }), _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["SELECT_LANGUAGE"], function (_ref3, language) {
        var _this = this;

        var dispatch = _ref3.dispatch,
            commit = _ref3.commit;

        Object(_data__WEBPACK_IMPORTED_MODULE_2__["default"])(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["SELECT_LANGUAGE"], language).then(function (data) {
            dispatch('navigation/' + _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["TOGGLE_NAV_MENU"], false, { root: true });

            _this.router.back();

            _this._vm.$nextTick(function () {
                window.location.href = data.url;
            });
        }).catch(function (error) {});
    }), _actions)
});

/***/ }),

/***/ "./src/components/layer/loading/loading.vue":
/*!**************************************************!*\
  !*** ./src/components/layer/loading/loading.vue ***!
  \**************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _loading_vue_vue_type_template_id_0250ba9d__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/components/layer/loading/loading.vue?vue&type=template&id=0250ba9d");
 var _loading_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/components/layer/loading/loading.vue?vue&type=script&lang=js");
 var _loading_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/components/layer/loading/loading.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__( "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");








var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _loading_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__["default"],
  _loading_vue_vue_type_template_id_0250ba9d__WEBPACK_IMPORTED_MODULE_0__["render"],
  _loading_vue_vue_type_template_id_0250ba9d__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

 __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./src/components/layer/loading/loading.vue?vue&type=script&lang=js":
/*!**************************************************************************!*\
  !*** ./src/components/layer/loading/loading.vue?vue&type=script&lang=js ***!
  \**************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_loading_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/layer/loading/loading.vue?vue&type=script&lang=js");
  __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_loading_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./src/components/layer/loading/loading.vue?vue&type=style&index=0&lang=scss":
/*!***********************************************************************************!*\
  !*** ./src/components/layer/loading/loading.vue?vue&type=style&index=0&lang=scss ***!
  \***********************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_loading_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/layer/loading/loading.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_loading_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_loading_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__);
 for(var __WEBPACK_IMPORT_KEY__ in _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_loading_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_loading_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
  __webpack_exports__["default"] = (_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_loading_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ "./src/components/layer/loading/loading.vue?vue&type=template&id=0250ba9d":
/*!********************************************************************************!*\
  !*** ./src/components/layer/loading/loading.vue?vue&type=template&id=0250ba9d ***!
  \********************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_loading_vue_vue_type_template_id_0250ba9d__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/layer/loading/loading.vue?vue&type=template&id=0250ba9d");
 __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_loading_vue_vue_type_template_id_0250ba9d__WEBPACK_IMPORTED_MODULE_0__["render"]; });

 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_loading_vue_vue_type_template_id_0250ba9d__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./src/components/layer/loading/store.js":
/*!***********************************************!*\
  !*** ./src/components/layer/loading/store.js ***!
  \***********************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
 var _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/constants/mutation-types.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



 __webpack_exports__["default"] = ({
    namespaced: true,
    state: {
        loadings: {}
    },
    getters: {
        loadingShow: function loadingShow(state) {
            var bool = false;
            for (var key in state.loadings) {
                if (state.loadings[key]) {
                    bool = true;
                }
            }
            return bool;
        }
    },
    actions: _defineProperty({}, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["SET_GLOBAL_LOADING"], function (_ref, payload) {
        var commit = _ref.commit;

        commit(_shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["SET_GLOBAL_LOADING"], payload);
    }),
    mutations: _defineProperty({}, _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["SET_GLOBAL_LOADING"], function (state, obj) {
        state.loadings = Object.assign({}, state.loadings, obj);
    })
});

/***/ }),

/***/ "./src/components/navigation/navigation-bar/navigation-bar.vue":
/*!*********************************************************************!*\
  !*** ./src/components/navigation/navigation-bar/navigation-bar.vue ***!
  \*********************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _navigation_bar_vue_vue_type_template_id_22790b60__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=template&id=22790b60");
 var _navigation_bar_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=script&lang=js");
 var _navigation_bar_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__( "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");








var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _navigation_bar_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__["default"],
  _navigation_bar_vue_vue_type_template_id_22790b60__WEBPACK_IMPORTED_MODULE_0__["render"],
  _navigation_bar_vue_vue_type_template_id_22790b60__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

 __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=script&lang=js":
/*!*********************************************************************************************!*\
  !*** ./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=script&lang=js ***!
  \*********************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_bar_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=script&lang=js");
  __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_bar_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=style&index=0&lang=scss":
/*!******************************************************************************************************!*\
  !*** ./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=style&index=0&lang=scss ***!
  \******************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_bar_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_bar_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_bar_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__);
 for(var __WEBPACK_IMPORT_KEY__ in _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_bar_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_bar_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
  __webpack_exports__["default"] = (_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_bar_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ "./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=template&id=22790b60":
/*!***************************************************************************************************!*\
  !*** ./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=template&id=22790b60 ***!
  \***************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_bar_vue_vue_type_template_id_22790b60__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/navigation/navigation-bar/navigation-bar.vue?vue&type=template&id=22790b60");
 __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_bar_vue_vue_type_template_id_22790b60__WEBPACK_IMPORTED_MODULE_0__["render"]; });

 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_bar_vue_vue_type_template_id_22790b60__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./src/components/navigation/navigation-popup/navigation-popup.vue":
/*!*************************************************************************!*\
  !*** ./src/components/navigation/navigation-popup/navigation-popup.vue ***!
  \*************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _navigation_popup_vue_vue_type_template_id_bb190116__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=template&id=bb190116");
 var _navigation_popup_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=script&lang=js");
 var _navigation_popup_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__( "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");








var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _navigation_popup_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__["default"],
  _navigation_popup_vue_vue_type_template_id_bb190116__WEBPACK_IMPORTED_MODULE_0__["render"],
  _navigation_popup_vue_vue_type_template_id_bb190116__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

 __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=script&lang=js":
/*!*************************************************************************************************!*\
  !*** ./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=script&lang=js ***!
  \*************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_popup_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=script&lang=js");
  __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_popup_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=style&index=0&lang=scss":
/*!**********************************************************************************************************!*\
  !*** ./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=style&index=0&lang=scss ***!
  \**********************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_popup_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_popup_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_popup_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__);
 for(var __WEBPACK_IMPORT_KEY__ in _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_popup_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_popup_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
  __webpack_exports__["default"] = (_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_popup_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ "./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=template&id=bb190116":
/*!*******************************************************************************************************!*\
  !*** ./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=template&id=bb190116 ***!
  \*******************************************************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_popup_vue_vue_type_template_id_bb190116__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/navigation/navigation-popup/navigation-popup.vue?vue&type=template&id=bb190116");
 __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_popup_vue_vue_type_template_id_bb190116__WEBPACK_IMPORTED_MODULE_0__["render"]; });

 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_navigation_popup_vue_vue_type_template_id_bb190116__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./src/components/navigation/store.js":
/*!********************************************!*\
  !*** ./src/components/navigation/store.js ***!
  \********************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
 var _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/constants/mutation-types.js");
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




 __webpack_exports__["default"] = ({
    namespaced: true,

    state: _extends({
        menuExpanded: false
    }, (window.pageData || {}).navigation),

    actions: _defineProperty({}, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["TOGGLE_NAV_MENU"], function (_ref, open) {
        var commit = _ref.commit;

        commit(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["TOGGLE_NAV_MENU"], open);
    }),

    mutations: _defineProperty({}, _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_1__["TOGGLE_NAV_MENU"], function (state, open) {
        state.menuExpanded = typeof open !== 'boolean' ? !state.menuExpanded : open;
    })
});

/***/ }),

/***/ "./src/components/user/data.js":
/*!*************************************!*\
  !*** ./src/components/user/data.js ***!
  \*************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
 var _shared_js_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/util.js");



 __webpack_exports__["default"] = (function (actionType) {
    var param = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    switch (actionType) {
        case _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["FETCH_USER_PROFILE"]:
            return _shared_js_util__WEBPACK_IMPORTED_MODULE_1__["default"].getData('/mapi/Account/GetUserProfile', param);
        case _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["SIGN_OUT"]:
            return _shared_js_util__WEBPACK_IMPORTED_MODULE_1__["default"].postData('/mapi/Account/Logout', param);
        case _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["REGISTER"]:
            return _shared_js_util__WEBPACK_IMPORTED_MODULE_1__["default"].postData('/mapi/Account/Register', param, { showLoading: true });
        case _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_0__["FETCH_USER_CARDS"]:
            return _shared_js_util__WEBPACK_IMPORTED_MODULE_1__["default"].getData('/mapi/Account/GetUserCards', param);
        default:
            return Promise.resolve({});
    }
});

/***/ }),

/***/ "./src/components/user/store.js":
/*!**************************************!*\
  !*** ./src/components/user/store.js ***!
  \**************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vue/dist/vue.runtime.esm.js");
 var deepmerge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./node_modules/deepmerge/dist/es.js");
 var _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/shared/js/constants/mutation-types.js");
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
 var _data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__( "./src/components/user/data.js");
var _mutations, _actions;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }







 __webpack_exports__["default"] = ({
    namespaced: true,

    state: _extends({
        profile: {},
        isLogin: false,
        cards: []
    }, (window.pageData || {}).user),

    mutations: (_mutations = {}, _defineProperty(_mutations, _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_2__["LOAD_USER_PROFILE"], function (state, data) {
        if (data.data && data.data.firstname) {
            state.profile = data.data;
            state.isLogin = true;
        } else {
            state.isLogin = false;
        }
    }), _defineProperty(_mutations, _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_2__["LOAD_USER_CARDS"], function (state, cards) {
        if (cards[0]) {
            cards[0].selected = true;
        }
        state.cards = cards;
    }), _defineProperty(_mutations, _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_2__["UPDATE_CARD"], function (state, _ref) {
        var card = _ref.card,
            index = _ref.index;

        vue__WEBPACK_IMPORTED_MODULE_0__["default"].set(state.cards, index, Object(deepmerge__WEBPACK_IMPORTED_MODULE_1__["default"])(state.cards[index], card));
    }), _defineProperty(_mutations, _shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_2__["SELECT_CARD"], function (state, index) {
        state.cards.forEach(function (card) {
            card.selected = false;
        });

        state.cards[index].selected = true;
    }), _mutations),

    actions: (_actions = {}, _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["FETCH_USER_PROFILE"], function (_ref2) {
        var commit = _ref2.commit,
            dispatch = _ref2.dispatch;

        Object(_data__WEBPACK_IMPORTED_MODULE_4__["default"])(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["FETCH_USER_PROFILE"]).then(function (data) {
            commit(_shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_2__["LOAD_USER_PROFILE"], data);
            dispatch(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["USER_FETCHED"]);
        }).catch(function (error) {
            console.log(error);
            // error handling like commit(FETCH_USER_PROFILE_ERROR)
        });
    }), _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["FETCH_USER_CARDS"], function (_ref3) {
        var commit = _ref3.commit;

        Object(_data__WEBPACK_IMPORTED_MODULE_4__["default"])(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["FETCH_USER_CARDS"]).then(function (data) {
            if (data.success) {
                commit(_shared_js_constants_mutation_types__WEBPACK_IMPORTED_MODULE_2__["LOAD_USER_CARDS"], data.data);
            }
        }).catch(function (error) {
            console.log(error);
            // error handling like commit(FETCH_USER_PROFILE_ERROR)
        });
    }), _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["SIGN_OUT"], function () {
        Object(_data__WEBPACK_IMPORTED_MODULE_4__["default"])(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["SIGN_OUT"]).then(function () {
            window.location.reload();
        }).catch(function (error) {
            console.log(error);
            // error handling like commit(FETCH_USER_PROFILE_ERROR)
        });
    }), _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["REGISTER"], function (_ref4, userData) {
        var dispatch = _ref4.dispatch;

        Object(_data__WEBPACK_IMPORTED_MODULE_4__["default"])(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["REGISTER"], userData).then(function (data) {
            if (data.success) {
                dispatch(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["FETCH_USER_PROFILE"]);
                dispatch(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["USER_REGISTERED"]);
            }
            dispatch(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["USER_REGISTERED_FAIL"], data.message);
        }).catch(function () {
            dispatch(_shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["USER_REGISTERED_FAIL"], local.general.network_error);
        });
    }), _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["USER_FETCHED"], function () {}), _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["USER_REGISTERED"], function () {}), _defineProperty(_actions, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_3__["USER_REGISTERED_FAIL"], function () {}), _actions)
});

/***/ }),

/***/ "./src/config.js":
/*!***********************!*\
  !*** ./src/config.js ***!
  \***********************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_exports__["default"] = ({
    apiBase: window.location.href.indexOf('http://localhost') > -1 ? 'http://mhdev03.loweproferotech.com' : '',
    mapKeys: 'AIzaSyDu3E2UtBYsFE9YhCOu-7ha_dEksVjbljY',
    mapAddress: 'https://maps.googleapis.com/maps/api/staticmap',
    mapAddress1: 'https://ditu.gdgdocs.org/maps/api/staticmap',
    mapstyle: [{
        featureType: "landscape.natural",
        elementType: "geometry.fill",
        stylers: [{
            visibility: "on"
        }, {
            color: "#e0efef"
        }]
    }, {
        featureType: "poi",
        elementType: "geometry.fill",
        stylers: [{
            visibility: "on"
        }, {
            color: "#c0e8e8"
        }, {
            hue: "#c0e8e8"
        }]
    }, {
        featureType: "road",
        elementType: "geometry",
        stylers: [{
            visibility: "simplified"
        }, {
            lightness: 100
        }, {
            color: "#fff"
        }]
    }, {
        featureType: "road",
        elementType: "labels",
        stylers: [{
            visibility: "off"
        }]
    }, {
        featureType: "transit.line",
        elementType: "geometry",
        stylers: [{
            visibility: "on"
        }, {
            lightness: 700
        }]
    }, {
        featureType: "water",
        elementType: "geometry",
        stylers: [{
            "color": "#7dcdcd"
        }]
    }, {
        featureType: "water",
        elementType: "labels.text.fill",
        stylers: [{
            "color": "#7dcdcd"
        }]
    }, {
        featureType: "poi.business",
        elementType: "labels",
        stylers: [{
            visibility: "off"
        }]
    }]
});

/***/ }),

/***/ "./src/desktop/entry.js":
/*!******************************!*\
  !*** ./src/desktop/entry.js ***!
  \******************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _shared_desktop_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/shared/desktop/base.js");
 var _routes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/desktop/routes.js");
 var _store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/desktop/store.js");




Object(_shared_desktop_base__WEBPACK_IMPORTED_MODULE_0__["default"])(_routes__WEBPACK_IMPORTED_MODULE_1__["default"], _store__WEBPACK_IMPORTED_MODULE_2__["default"], "[data-mobile-nav]");

/***/ }),

/***/ "./src/desktop/page.vue":
/*!******************************!*\
  !*** ./src/desktop/page.vue ***!
  \******************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _page_vue_vue_type_template_id_5b3ee448__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/desktop/page.vue?vue&type=template&id=5b3ee448");
 var _page_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/desktop/page.vue?vue&type=script&lang=js");
 var _page_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/desktop/page.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__( "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");








var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _page_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__["default"],
  _page_vue_vue_type_template_id_5b3ee448__WEBPACK_IMPORTED_MODULE_0__["render"],
  _page_vue_vue_type_template_id_5b3ee448__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

 __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./src/desktop/page.vue?vue&type=script&lang=js":
/*!******************************************************!*\
  !*** ./src/desktop/page.vue?vue&type=script&lang=js ***!
  \******************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_page_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/desktop/page.vue?vue&type=script&lang=js");
  __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_page_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./src/desktop/page.vue?vue&type=style&index=0&lang=scss":
/*!***************************************************************!*\
  !*** ./src/desktop/page.vue?vue&type=style&index=0&lang=scss ***!
  \***************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_page_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/desktop/page.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_page_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_page_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__);
 for(var __WEBPACK_IMPORT_KEY__ in _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_page_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_page_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
  __webpack_exports__["default"] = (_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_page_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ "./src/desktop/page.vue?vue&type=template&id=5b3ee448":
/*!************************************************************!*\
  !*** ./src/desktop/page.vue?vue&type=template&id=5b3ee448 ***!
  \************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_page_vue_vue_type_template_id_5b3ee448__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/desktop/page.vue?vue&type=template&id=5b3ee448");
 __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_page_vue_vue_type_template_id_5b3ee448__WEBPACK_IMPORTED_MODULE_0__["render"]; });

 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_page_vue_vue_type_template_id_5b3ee448__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./src/desktop/routes.js":
/*!*******************************!*\
  !*** ./src/desktop/routes.js ***!
  \*******************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _page_vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/desktop/page.vue");
 var _components_homepage_search_overlay_search_overlay_vue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/components/homepage/search-overlay/search-overlay.vue");


 __webpack_exports__["default"] = ([{ path: '/', component: _page_vue__WEBPACK_IMPORTED_MODULE_0__["default"] }, { path: '/search-overlay', component: _components_homepage_search_overlay_search_overlay_vue__WEBPACK_IMPORTED_MODULE_1__["default"] }, { path: '*', component: _page_vue__WEBPACK_IMPORTED_MODULE_0__["default"] }]);

/***/ }),

/***/ "./src/desktop/store.js":
/*!******************************!*\
  !*** ./src/desktop/store.js ***!
  \******************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _components_homepage_search_overlay_store_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/components/homepage/search-overlay/store.js");
 var _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/js/constants/action-types.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




 __webpack_exports__["default"] = ({
    state: window.pageData,
    actions: {},
    mutations: {},
    modules: {
        searchOverlay: _components_homepage_search_overlay_store_js__WEBPACK_IMPORTED_MODULE_0__["default"],
        currency: {
            actions: _defineProperty({}, _shared_js_constants_action_types__WEBPACK_IMPORTED_MODULE_1__["CURRENCY_UPDATED"], function (_ref, payload) {
                var commit = _ref.commit;

                this._vm.$nextTick(function () {
                    window.location.href = payload.referer;
                });
            })
        }
    }
});

/***/ }),

/***/ "./src/shared/desktop/base.js":
/*!************************************!*\
  !*** ./src/shared/desktop/base.js ***!
  \************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vue/dist/vue.runtime.esm.js");
 var vue_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./node_modules/vue-router/dist/vue-router.esm.js");
 var vuex__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./node_modules/vuex/dist/vuex.esm.js");
 var vue_i18n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__( "./node_modules/vue-i18n/dist/vue-i18n.esm.js");
 var deepmerge__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__( "./node_modules/deepmerge/dist/es.js");
 var _html_base_vue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__( "./src/shared/html/base.vue");
 var _js_base_base_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__( "./src/shared/js/base/base-store.js");
 var _js_base_base_routes__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__( "./src/shared/js/base/base-routes.js");
 var _js_util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__( "./src/shared/js/util.js");
 var _base_scss__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__( "./src/shared/desktop/base.scss");
 var _base_scss__WEBPACK_IMPORTED_MODULE_9___default = __webpack_require__.n(_base_scss__WEBPACK_IMPORTED_MODULE_9__);
 var fetch_polyfill2__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__( "./node_modules/fetch-polyfill2/dist/index.js");
 var fetch_polyfill2__WEBPACK_IMPORTED_MODULE_10___default = __webpack_require__.n(fetch_polyfill2__WEBPACK_IMPORTED_MODULE_10__);
 var es6_promise_auto__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__( "./node_modules/es6-promise/auto.js");
 var es6_promise_auto__WEBPACK_IMPORTED_MODULE_11___default = __webpack_require__.n(es6_promise_auto__WEBPACK_IMPORTED_MODULE_11__);
 var promise_prototype_finally__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__( "./node_modules/promise.prototype.finally/index.js");
 var promise_prototype_finally__WEBPACK_IMPORTED_MODULE_12___default = __webpack_require__.n(promise_prototype_finally__WEBPACK_IMPORTED_MODULE_12__);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };















vue__WEBPACK_IMPORTED_MODULE_0__["default"].use(vue_router__WEBPACK_IMPORTED_MODULE_1__["default"]);
vue__WEBPACK_IMPORTED_MODULE_0__["default"].use(vuex__WEBPACK_IMPORTED_MODULE_2__["default"]);
vue__WEBPACK_IMPORTED_MODULE_0__["default"].use(vue_i18n__WEBPACK_IMPORTED_MODULE_3__["default"]);

 __webpack_exports__["default"] = (function (routes, vueStore, selector) {

    var init = function init() {
        if (document.querySelector(selector || '[data-app-root]') && !window.rootVueInstance && Math.max(document.documentElement.clientWidth, window.innerWidth || 0) <= 768) {
            var router = new vue_router__WEBPACK_IMPORTED_MODULE_1__["default"]({
                routes: Object(deepmerge__WEBPACK_IMPORTED_MODULE_4__["default"])(_js_base_base_routes__WEBPACK_IMPORTED_MODULE_7__["default"], routes),
                mode: 'hash',
                scrollBehavior: function scrollBehavior(to, from, savedPosition) {
                    var popUpRoutes = ['/currency-selector', '/language-selector', '/cancellation-policy'];

                    if (popUpRoutes.includes(from.path)) {
                        // return savedPosition;
                        return new Promise(function (resolve, reject) {
                            setTimeout(function () {
                                resolve(savedPosition);
                            });
                        });
                    }
                    return { x: 0, y: 0 };
                }
            });

            var store = new vuex__WEBPACK_IMPORTED_MODULE_2__["default"].Store(Object(deepmerge__WEBPACK_IMPORTED_MODULE_4__["default"])(_js_base_base_store__WEBPACK_IMPORTED_MODULE_6__["default"], vueStore));
            _js_util__WEBPACK_IMPORTED_MODULE_8__["default"].store = store;
            store.router = router;

            var i18n = new vue_i18n__WEBPACK_IMPORTED_MODULE_3__["default"]({
                locale: 'en',
                messages: {
                    en: _extends({}, window.local)
                }
            });

            window.rootVueInstance = new vue__WEBPACK_IMPORTED_MODULE_0__["default"]({
                el: selector || '[data-app-root]',
                render: function render(h) {
                    return h(_html_base_vue__WEBPACK_IMPORTED_MODULE_5__["default"]);
                },
                router: router,
                store: store,
                i18n: i18n
            });
        }
    };

    window.addEventListener('resize', _js_util__WEBPACK_IMPORTED_MODULE_8__["default"].debounce(init, 500));

    init();
});

/***/ }),

/***/ "./src/shared/desktop/base.scss":
/*!**************************************!*\
  !*** ./src/shared/desktop/base.scss ***!
  \**************************************/

/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./src/shared/html/base.vue":
/*!**********************************!*\
  !*** ./src/shared/html/base.vue ***!
  \**********************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _base_vue_vue_type_template_id_24e8b270__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/shared/html/base.vue?vue&type=template&id=24e8b270");
 var _base_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/shared/html/base.vue?vue&type=script&lang=js");
 var _base_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/shared/html/base.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__( "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");








var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _base_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__["default"],
  _base_vue_vue_type_template_id_24e8b270__WEBPACK_IMPORTED_MODULE_0__["render"],
  _base_vue_vue_type_template_id_24e8b270__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

 __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./src/shared/html/base.vue?vue&type=script&lang=js":
/*!**********************************************************!*\
  !*** ./src/shared/html/base.vue?vue&type=script&lang=js ***!
  \**********************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_base_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/shared/html/base.vue?vue&type=script&lang=js");
  __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_base_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./src/shared/html/base.vue?vue&type=style&index=0&lang=scss":
/*!*******************************************************************!*\
  !*** ./src/shared/html/base.vue?vue&type=style&index=0&lang=scss ***!
  \*******************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_base_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!./node_modules/css-loader/index.js??ref--1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??ref--1-2!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js??ref--1-4!./node_modules/style-resources-loader/lib/index.js??ref--1-5!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/shared/html/base.vue?vue&type=style&index=0&lang=scss");
 var _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_base_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_base_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__);
 for(var __WEBPACK_IMPORT_KEY__ in _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_base_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_base_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
  __webpack_exports__["default"] = (_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_1_0_node_modules_css_loader_index_js_ref_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_1_2_node_modules_resolve_url_loader_index_js_node_modules_sass_loader_lib_loader_js_ref_1_4_node_modules_style_resources_loader_lib_index_js_ref_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_base_vue_vue_type_style_index_0_lang_scss__WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ "./src/shared/html/base.vue?vue&type=template&id=24e8b270":
/*!****************************************************************!*\
  !*** ./src/shared/html/base.vue?vue&type=template&id=24e8b270 ***!
  \****************************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_base_vue_vue_type_template_id_24e8b270__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/shared/html/base.vue?vue&type=template&id=24e8b270");
 __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_base_vue_vue_type_template_id_24e8b270__WEBPACK_IMPORTED_MODULE_0__["render"]; });

 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_base_vue_vue_type_template_id_24e8b270__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./src/shared/js/base/base-routes.js":
/*!*******************************************!*\
  !*** ./src/shared/js/base/base-routes.js ***!
  \*******************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _components_currency_selector_currency_selector_vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/components/currency-selector/currency-selector.vue");
 var _components_language_selector_language_selector_vue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/components/language-selector/language-selector.vue");
 var _components_global_search_global_search_vue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/components/global-search/global-search.vue");




 __webpack_exports__["default"] = ([{ path: '/language-selector', component: _components_language_selector_language_selector_vue__WEBPACK_IMPORTED_MODULE_1__["default"] }, { path: '/currency-selector', component: _components_currency_selector_currency_selector_vue__WEBPACK_IMPORTED_MODULE_0__["default"] }, { path: '/global-search', component: _components_global_search_global_search_vue__WEBPACK_IMPORTED_MODULE_2__["default"] }]);

/***/ }),

/***/ "./src/shared/js/base/base-store.js":
/*!******************************************!*\
  !*** ./src/shared/js/base/base-store.js ***!
  \******************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _components_user_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./src/components/user/store.js");
 var _components_navigation_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/components/navigation/store.js");
 var _components_language_selector_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/components/language-selector/store.js");
 var _components_currency_selector_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__( "./src/components/currency-selector/store.js");
 var _components_global_search_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__( "./src/components/global-search/store.js");
 var _components_layer_loading_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__( "./src/components/layer/loading/store.js");
 var _components_going_app_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__( "./src/components/going-app/store.js");








 __webpack_exports__["default"] = ({
    state: {},

    modules: {
        user: _components_user_store__WEBPACK_IMPORTED_MODULE_0__["default"],
        navigation: _components_navigation_store__WEBPACK_IMPORTED_MODULE_1__["default"],
        language: _components_language_selector_store__WEBPACK_IMPORTED_MODULE_2__["default"],
        currency: _components_currency_selector_store__WEBPACK_IMPORTED_MODULE_3__["default"],
        globalSearch: _components_global_search_store__WEBPACK_IMPORTED_MODULE_4__["default"],
        loading: _components_layer_loading_store__WEBPACK_IMPORTED_MODULE_5__["default"],
        goingApp: _components_going_app_store__WEBPACK_IMPORTED_MODULE_6__["default"]
    }

});

/***/ }),

/***/ "./src/shared/js/constants/action-types.js":
/*!*************************************************!*\
  !*** ./src/shared/js/constants/action-types.js ***!
  \*************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_require__.d(__webpack_exports__, "GET_HOTEL_IMAGE_LIST", function() { return GET_HOTEL_IMAGE_LIST; });
 __webpack_require__.d(__webpack_exports__, "SET_GLOBAL_LOADING", function() { return SET_GLOBAL_LOADING; });
 __webpack_require__.d(__webpack_exports__, "GET_SEARCH_HISTORY", function() { return GET_SEARCH_HISTORY; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_CHECKBOX_STATE", function() { return UPDATE_CHECKBOX_STATE; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_NUM", function() { return UPDATE_NUM; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_LOCATION", function() { return UPDATE_LOCATION; });
 __webpack_require__.d(__webpack_exports__, "GET_TOP_TEN", function() { return GET_TOP_TEN; });
 __webpack_require__.d(__webpack_exports__, "SEARCH_HOTEL", function() { return SEARCH_HOTEL; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_CODE", function() { return UPDATE_CODE; });
 __webpack_require__.d(__webpack_exports__, "VALID_CODE", function() { return VALID_CODE; });
 __webpack_require__.d(__webpack_exports__, "RESET_CODE", function() { return RESET_CODE; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_DATE", function() { return UPDATE_DATE; });
 __webpack_require__.d(__webpack_exports__, "FETCH_USER_PROFILE", function() { return FETCH_USER_PROFILE; });
 __webpack_require__.d(__webpack_exports__, "SIGN_OUT", function() { return SIGN_OUT; });
 __webpack_require__.d(__webpack_exports__, "USER_REGISTERED", function() { return USER_REGISTERED; });
 __webpack_require__.d(__webpack_exports__, "USER_REGISTERED_FAIL", function() { return USER_REGISTERED_FAIL; });
 __webpack_require__.d(__webpack_exports__, "USER_FETCHED", function() { return USER_FETCHED; });
 __webpack_require__.d(__webpack_exports__, "REGISTER", function() { return REGISTER; });
 __webpack_require__.d(__webpack_exports__, "FETCH_USER_CARDS", function() { return FETCH_USER_CARDS; });
 __webpack_require__.d(__webpack_exports__, "TOGGLE_NAV_MENU", function() { return TOGGLE_NAV_MENU; });
 __webpack_require__.d(__webpack_exports__, "FETCH_LANGUAGE", function() { return FETCH_LANGUAGE; });
 __webpack_require__.d(__webpack_exports__, "SELECT_LANGUAGE", function() { return SELECT_LANGUAGE; });
 __webpack_require__.d(__webpack_exports__, "FETCH_CURRENCY", function() { return FETCH_CURRENCY; });
 __webpack_require__.d(__webpack_exports__, "SELECT_CURRENCY", function() { return SELECT_CURRENCY; });
 __webpack_require__.d(__webpack_exports__, "CURRENCY_UPDATED", function() { return CURRENCY_UPDATED; });
 __webpack_require__.d(__webpack_exports__, "GET_CITY_DATA", function() { return GET_CITY_DATA; });
 __webpack_require__.d(__webpack_exports__, "GET_MAP_DATA", function() { return GET_MAP_DATA; });
 __webpack_require__.d(__webpack_exports__, "GET_HOTEL_DATA", function() { return GET_HOTEL_DATA; });
 __webpack_require__.d(__webpack_exports__, "CHANGE_POINTS_SELECT", function() { return CHANGE_POINTS_SELECT; });
 __webpack_require__.d(__webpack_exports__, "GET_ROOM_DATA", function() { return GET_ROOM_DATA; });
 __webpack_require__.d(__webpack_exports__, "GET_CLICK_ROOM_DATA", function() { return GET_CLICK_ROOM_DATA; });
 __webpack_require__.d(__webpack_exports__, "GET_CART_INFO", function() { return GET_CART_INFO; });
 __webpack_require__.d(__webpack_exports__, "CHECK_CARD", function() { return CHECK_CARD; });
 __webpack_require__.d(__webpack_exports__, "BUILD_ORDER", function() { return BUILD_ORDER; });
 __webpack_require__.d(__webpack_exports__, "PAY_ORDER", function() { return PAY_ORDER; });
 __webpack_require__.d(__webpack_exports__, "CHECK_ORDER", function() { return CHECK_ORDER; });
 __webpack_require__.d(__webpack_exports__, "SPECIAL_REQUESTS", function() { return SPECIAL_REQUESTS; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_CART_INFO", function() { return UPDATE_CART_INFO; });
 __webpack_require__.d(__webpack_exports__, "SHOW_ROOM_TIPS_TYPE", function() { return SHOW_ROOM_TIPS_TYPE; });
 __webpack_require__.d(__webpack_exports__, "SHOW_ROOM_TIPS_BOOKING", function() { return SHOW_ROOM_TIPS_BOOKING; });
 __webpack_require__.d(__webpack_exports__, "GET_ROOM_IMAGE_LIST", function() { return GET_ROOM_IMAGE_LIST; });
 __webpack_require__.d(__webpack_exports__, "GET_ROOM_TIP_DATA", function() { return GET_ROOM_TIP_DATA; });
 __webpack_require__.d(__webpack_exports__, "BODY_ROOM_TYPE", function() { return BODY_ROOM_TYPE; });
 __webpack_require__.d(__webpack_exports__, "BODY_TIPS_OCCUPANCY", function() { return BODY_TIPS_OCCUPANCY; });
 __webpack_require__.d(__webpack_exports__, "GET_ROOM_CHECKOUT_DATA", function() { return GET_ROOM_CHECKOUT_DATA; });
 __webpack_require__.d(__webpack_exports__, "GET_UPGRADE_DATA", function() { return GET_UPGRADE_DATA; });
 __webpack_require__.d(__webpack_exports__, "CLOSE_UPGRADE_MODAL", function() { return CLOSE_UPGRADE_MODAL; });
 __webpack_require__.d(__webpack_exports__, "SET_UPGRADE_ENABLE", function() { return SET_UPGRADE_ENABLE; });
 __webpack_require__.d(__webpack_exports__, "CLEAR_UPGRADE_CACHE", function() { return CLEAR_UPGRADE_CACHE; });
 __webpack_require__.d(__webpack_exports__, "GET_ADD_ONS_DATA", function() { return GET_ADD_ONS_DATA; });
 __webpack_require__.d(__webpack_exports__, "GET_QUANTITY_DATA", function() { return GET_QUANTITY_DATA; });
 __webpack_require__.d(__webpack_exports__, "GET_SHOW_POINTS_ROOM", function() { return GET_SHOW_POINTS_ROOM; });
 __webpack_require__.d(__webpack_exports__, "GET_IG_DATA", function() { return GET_IG_DATA; });
 __webpack_require__.d(__webpack_exports__, "CLOSE_IG_MODAL", function() { return CLOSE_IG_MODAL; });
 __webpack_require__.d(__webpack_exports__, "GET_ORDER", function() { return GET_ORDER; });
 __webpack_require__.d(__webpack_exports__, "GET_DETAILS_CLICK_DATA", function() { return GET_DETAILS_CLICK_DATA; });
//
// gallery
var GET_HOTEL_IMAGE_LIST = 'get_hotel_image_list';
// loading
var SET_GLOBAL_LOADING = 'SET_GLOBAL_LOADING';
// global search
var GET_SEARCH_HISTORY = 'get_search_history';
// homepage
var UPDATE_CHECKBOX_STATE = 'update_checkbox_state';
var UPDATE_NUM = 'update_num';
var UPDATE_LOCATION = 'update_location';
var GET_TOP_TEN = 'get_top_ten';
var SEARCH_HOTEL = 'search_hotel';
var UPDATE_CODE = 'update_Code';
var VALID_CODE = 'valid_Code';
var RESET_CODE = 'reset_Code';
var UPDATE_DATE = "update_date";

// user
var FETCH_USER_PROFILE = 'FETCH_USER_PROFILE';
var SIGN_OUT = 'SIGN_OUT';
var USER_REGISTERED = 'USER_REGISTERED';
var USER_REGISTERED_FAIL = 'USER_REGISTERED_FAIL';
var USER_FETCHED = 'USER_FETCHED';
var REGISTER = 'REGISTER';
var FETCH_USER_CARDS = 'FETCH_USER_CARDS';

// nav
var TOGGLE_NAV_MENU = 'TOGGLE_NAV_MENU';

// language
var FETCH_LANGUAGE = 'FETCH_LANGUAGE';
var SELECT_LANGUAGE = 'SELECT_LANGUAGE';

// currency
var FETCH_CURRENCY = 'FETCH_CURRENCY';
var SELECT_CURRENCY = 'SELECT_CURRENCY';
var CURRENCY_UPDATED = 'CURRENCY_UPDATED';

// CITY
var GET_CITY_DATA = 'GET_CITY_DATA';
var GET_MAP_DATA = 'GET_MAP_DATA';

//HOTEL
var GET_HOTEL_DATA = 'GET_HOTEL_DATA';
var CHANGE_POINTS_SELECT = 'CHANGE_POINTS_SELECT';

//ROOM
var GET_ROOM_DATA = 'GET_ROOM_DATA';

//CLICK ROOM
var GET_CLICK_ROOM_DATA = 'GET_CLICK_ROOM_DATA';

// checkout
var GET_CART_INFO = 'GET_CART_INFO';
var CHECK_CARD = 'CHECK_CARD';
var BUILD_ORDER = 'BUILD_ORDER';
var PAY_ORDER = 'PAY_ORDER';
var CHECK_ORDER = 'CHECK_ORDER';
var SPECIAL_REQUESTS = 'SPECIAL_REQUESTS';
var UPDATE_CART_INFO = 'UPDATE_CART_INFO';

//body
var SHOW_ROOM_TIPS_TYPE = 'SHOW_ROOM_TIPS_TYPE';
var SHOW_ROOM_TIPS_BOOKING = 'SHOW_ROOM_TIPS_BOOKING';
//room
var GET_ROOM_IMAGE_LIST = 'get_room_image_list';
var GET_ROOM_TIP_DATA = 'GET_ROOM_TIP_DATA';
var BODY_ROOM_TYPE = 'BODY_ROOM_TYPE';
var BODY_TIPS_OCCUPANCY = 'BODY_TIPS_OCCUPANCY';
var GET_ROOM_CHECKOUT_DATA = 'GET_ROOM_CHECKOUT_DATA';

//room upgrade
var GET_UPGRADE_DATA = 'GET_UPGRADE_DATA';
var CLOSE_UPGRADE_MODAL = 'CLOSE_UPGRADE_MODAL';
var SET_UPGRADE_ENABLE = 'SET_UPGRADE_ENABLE';
var CLEAR_UPGRADE_CACHE = 'CLEAR_UPGRADE_CACHE';

//add-ons
var GET_ADD_ONS_DATA = 'GET_ADD_ONS_DATA';
var GET_QUANTITY_DATA = 'GET_QUANTITY_DATA';
var GET_SHOW_POINTS_ROOM = 'GET_SHOW_POINTS_ROOM';
var GET_IG_DATA = 'GET_IG_DATA';
var CLOSE_IG_MODAL = 'CLOSE_IG_MODAL';

// confirmation
var GET_ORDER = 'GET_ORDER';
var GET_DETAILS_CLICK_DATA = 'GET_DETAILS_CLICK_DATA';

/***/ }),

/***/ "./src/shared/js/constants/mutation-types.js":
/*!***************************************************!*\
  !*** ./src/shared/js/constants/mutation-types.js ***!
  \***************************************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_require__.d(__webpack_exports__, "GET_HOTEL_IMAGE_LIST", function() { return GET_HOTEL_IMAGE_LIST; });
 __webpack_require__.d(__webpack_exports__, "GET_SEARCH_HISTORY", function() { return GET_SEARCH_HISTORY; });
 __webpack_require__.d(__webpack_exports__, "SET_GLOBAL_LOADING", function() { return SET_GLOBAL_LOADING; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_CHECKBOX_STATE", function() { return UPDATE_CHECKBOX_STATE; });
 __webpack_require__.d(__webpack_exports__, "ADD_NUM", function() { return ADD_NUM; });
 __webpack_require__.d(__webpack_exports__, "REDUCE_NUM", function() { return REDUCE_NUM; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_LOCATION", function() { return UPDATE_LOCATION; });
 __webpack_require__.d(__webpack_exports__, "GET_TOP_TEN", function() { return GET_TOP_TEN; });
 __webpack_require__.d(__webpack_exports__, "SEARCH_HOTEL", function() { return SEARCH_HOTEL; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_CODE", function() { return UPDATE_CODE; });
 __webpack_require__.d(__webpack_exports__, "VALID_CODE", function() { return VALID_CODE; });
 __webpack_require__.d(__webpack_exports__, "RESET_CODE", function() { return RESET_CODE; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_DATE", function() { return UPDATE_DATE; });
 __webpack_require__.d(__webpack_exports__, "LOAD_USER_PROFILE", function() { return LOAD_USER_PROFILE; });
 __webpack_require__.d(__webpack_exports__, "TOGGLE_NAV_MENU", function() { return TOGGLE_NAV_MENU; });
 __webpack_require__.d(__webpack_exports__, "LOAD_USER_CARDS", function() { return LOAD_USER_CARDS; });
 __webpack_require__.d(__webpack_exports__, "SELECT_CARD", function() { return SELECT_CARD; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_CARD", function() { return UPDATE_CARD; });
 __webpack_require__.d(__webpack_exports__, "LOAD_LANGUAGE", function() { return LOAD_LANGUAGE; });
 __webpack_require__.d(__webpack_exports__, "LOAD_CURRENCY", function() { return LOAD_CURRENCY; });
 __webpack_require__.d(__webpack_exports__, "SELECT_CURRENCY", function() { return SELECT_CURRENCY; });
 __webpack_require__.d(__webpack_exports__, "GET_CITY_DATA", function() { return GET_CITY_DATA; });
 __webpack_require__.d(__webpack_exports__, "GET_MAP_DATA", function() { return GET_MAP_DATA; });
 __webpack_require__.d(__webpack_exports__, "GET_HOTEL_DATA", function() { return GET_HOTEL_DATA; });
 __webpack_require__.d(__webpack_exports__, "CHANGE_POINTS_SELECT", function() { return CHANGE_POINTS_SELECT; });
 __webpack_require__.d(__webpack_exports__, "GET_ROOM_DATA", function() { return GET_ROOM_DATA; });
 __webpack_require__.d(__webpack_exports__, "GET_CLICK_ROOM_DATA", function() { return GET_CLICK_ROOM_DATA; });
 __webpack_require__.d(__webpack_exports__, "GET_CART_INFO", function() { return GET_CART_INFO; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_SPECIAL_REQUESTS", function() { return UPDATE_SPECIAL_REQUESTS; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_GUEST", function() { return UPDATE_GUEST; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_GUEST_ERROR", function() { return UPDATE_GUEST_ERROR; });
 __webpack_require__.d(__webpack_exports__, "ADD_GUEST", function() { return ADD_GUEST; });
 __webpack_require__.d(__webpack_exports__, "REMOVE_GUEST", function() { return REMOVE_GUEST; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_PAYMENT", function() { return UPDATE_PAYMENT; });
 __webpack_require__.d(__webpack_exports__, "CHECK_CARD", function() { return CHECK_CARD; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_ORDER_ID", function() { return UPDATE_ORDER_ID; });
 __webpack_require__.d(__webpack_exports__, "NOTHING_IN_CART", function() { return NOTHING_IN_CART; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_ERROR_MESSAGE", function() { return UPDATE_ERROR_MESSAGE; });
 __webpack_require__.d(__webpack_exports__, "SPECIAL_REQUESTS", function() { return SPECIAL_REQUESTS; });
 __webpack_require__.d(__webpack_exports__, "GET_ROOM_IMAGE_LIST", function() { return GET_ROOM_IMAGE_LIST; });
 __webpack_require__.d(__webpack_exports__, "GET_ROOM_TIP_DATA", function() { return GET_ROOM_TIP_DATA; });
 __webpack_require__.d(__webpack_exports__, "GET_ROOM_CHECKOUT_DATA", function() { return GET_ROOM_CHECKOUT_DATA; });
 __webpack_require__.d(__webpack_exports__, "SHOW_ROOM_TIPS_TYPE", function() { return SHOW_ROOM_TIPS_TYPE; });
 __webpack_require__.d(__webpack_exports__, "SHOW_ROOM_TIPS_BOOKING", function() { return SHOW_ROOM_TIPS_BOOKING; });
 __webpack_require__.d(__webpack_exports__, "GET_UPGRADE_DATA", function() { return GET_UPGRADE_DATA; });
 __webpack_require__.d(__webpack_exports__, "CLOSE_UPGRADE_MODAL", function() { return CLOSE_UPGRADE_MODAL; });
 __webpack_require__.d(__webpack_exports__, "SET_UPGRADE_ENABLE", function() { return SET_UPGRADE_ENABLE; });
 __webpack_require__.d(__webpack_exports__, "CLEAR_UPGRADE_CACHE", function() { return CLEAR_UPGRADE_CACHE; });
 __webpack_require__.d(__webpack_exports__, "SHOW_POINTS_ERROR_MODAL", function() { return SHOW_POINTS_ERROR_MODAL; });
 __webpack_require__.d(__webpack_exports__, "GET_ADD_ONS_DATA", function() { return GET_ADD_ONS_DATA; });
 __webpack_require__.d(__webpack_exports__, "GET_QUANTITY_DATA", function() { return GET_QUANTITY_DATA; });
 __webpack_require__.d(__webpack_exports__, "GET_SHOW_POINTS_ROOM", function() { return GET_SHOW_POINTS_ROOM; });
 __webpack_require__.d(__webpack_exports__, "GET_IG_DATA", function() { return GET_IG_DATA; });
 __webpack_require__.d(__webpack_exports__, "CLOSE_IG_MODAL", function() { return CLOSE_IG_MODAL; });
 __webpack_require__.d(__webpack_exports__, "UPDATE_ORDER", function() { return UPDATE_ORDER; });
 __webpack_require__.d(__webpack_exports__, "GET_DETAILS_CLICK_DATA", function() { return GET_DETAILS_CLICK_DATA; });
// gallery
var GET_HOTEL_IMAGE_LIST = 'get_hotel_image_list';
// gloabel search
var GET_SEARCH_HISTORY = 'get_search_history';
// loading
var SET_GLOBAL_LOADING = 'SET_GLOBAL_LOADING';
// homepage
var UPDATE_CHECKBOX_STATE = 'update_checkbox_state';
var ADD_NUM = 'add_num';
var REDUCE_NUM = 'reduce_num';
var UPDATE_LOCATION = 'update_location';
var GET_TOP_TEN = 'get_top_ten';
var SEARCH_HOTEL = 'search_hotel';
var UPDATE_CODE = 'update_Code';
var VALID_CODE = 'valid_Code';
var RESET_CODE = 'reset_Code';
var UPDATE_DATE = "update_date";

// user
var LOAD_USER_PROFILE = 'LOAD_USER_PROFILE';
var TOGGLE_NAV_MENU = 'TOGGLE_NAV_MENU';
var LOAD_USER_CARDS = 'LOAD_USER_CARDS';
var SELECT_CARD = 'SELECT_CARD';
var UPDATE_CARD = 'UPDATE_CARD';

// language
var LOAD_LANGUAGE = 'LOAD_LANGUAGE';

// currency
var LOAD_CURRENCY = 'LOAD_CURRENCY';
var SELECT_CURRENCY = 'SELECT_CURRENCY';

// CITY
var GET_CITY_DATA = 'GET_CITY_DATA';
var GET_MAP_DATA = 'GET_MAP_DATA';

//HOTEL
var GET_HOTEL_DATA = 'GET_HOTEL_DATA';
var CHANGE_POINTS_SELECT = 'CHANGE_POINTS_SELECT';

//ROOM
var GET_ROOM_DATA = 'GET_ROOM_DATA';

//CLICK ROOM
var GET_CLICK_ROOM_DATA = 'GET_CLICK_ROOM_DATA';

// checkout
var GET_CART_INFO = 'GET_CART_INFO';
var UPDATE_SPECIAL_REQUESTS = 'UPDATE_SPECIAL_REQUESTS';
var UPDATE_GUEST = 'UPDATE_GUEST';
var UPDATE_GUEST_ERROR = 'UPDATE_GUEST_ERROR';
var ADD_GUEST = 'ADD_GUEST';
var REMOVE_GUEST = 'REMOVE_GUEST';
var UPDATE_PAYMENT = 'UPDATE_PAYMENT';
var CHECK_CARD = 'CHECK_CARD';
var UPDATE_ORDER_ID = 'UPDATE_ORDER_ID';
var NOTHING_IN_CART = 'NOTHING_IN_CART';
var UPDATE_ERROR_MESSAGE = 'UPDATE_ERROR_MESSAGE';
var SPECIAL_REQUESTS = 'SPECIAL_REQUESTS';

//room
var GET_ROOM_IMAGE_LIST = 'get_room_image_list';
var GET_ROOM_TIP_DATA = 'GET_ROOM_TIP_DATA';
var GET_ROOM_CHECKOUT_DATA = 'GET_ROOM_CHECKOUT_DATA';

//body
var SHOW_ROOM_TIPS_TYPE = 'SHOW_ROOM_TIPS_TYPE';
var SHOW_ROOM_TIPS_BOOKING = 'SHOW_ROOM_TIPS_BOOKING';

//room upgrade
var GET_UPGRADE_DATA = 'GET_UPGRADE_DATA';
var CLOSE_UPGRADE_MODAL = 'CLOSE_UPGRADE_MODAL';
var SET_UPGRADE_ENABLE = 'SET_UPGRADE_ENABLE';
var CLEAR_UPGRADE_CACHE = 'CLEAR_UPGRADE_CACHE';
var SHOW_POINTS_ERROR_MODAL = 'SHOW_POINTS_ERROR_MODAL';

//add-ons
var GET_ADD_ONS_DATA = 'GET_ADD_ONS_DATA';
var GET_QUANTITY_DATA = 'GET_QUANTITY_DATA';
var GET_SHOW_POINTS_ROOM = 'GET_SHOW_POINTS_ROOM';
var GET_IG_DATA = 'GET_IG_DATA';
var CLOSE_IG_MODAL = 'CLOSE_IG_MODAL';

// confirmation
var UPDATE_ORDER = 'UPDATE_ORDER';
var GET_DETAILS_CLICK_DATA = 'GET_DETAILS_CLICK_DATA';

/***/ }),

/***/ "./src/shared/js/util.js":
/*!*******************************!*\
  !*** ./src/shared/js/util.js ***!
  \*******************************/

/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var query_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( "./node_modules/query-string/index.js");
 var query_string__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(query_string__WEBPACK_IMPORTED_MODULE_0__);
 var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( "./src/config.js");
 var _constants_action_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( "./src/shared/js/constants/action-types.js");




var generalFetchOptions = {
    mode: "cors", // no-cors, cors, *same-origin
    cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
    headers: {
        "Content-Type": "application/json; charset=utf-8",
        "Accept": "application/json, text/javascript"
    },
    credentials: 'include'
};

var requestControllers = {};

 __webpack_exports__["default"] = ({
    getData: function getData(url) {
        var _this = this;

        var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

        var query = query_string__WEBPACK_IMPORTED_MODULE_0___default.a.stringify(data);

        if (options.showLoading) {
            var obj = {};
            obj[url + '?' + query_string__WEBPACK_IMPORTED_MODULE_0___default.a.stringify(data)] = true;
            this.store.dispatch('loading/' + _constants_action_types__WEBPACK_IMPORTED_MODULE_2__["SET_GLOBAL_LOADING"], obj);
        }
        if (options.singleRequest) {
            if (requestControllers[url]) {
                requestControllers[url].abort();
            }

            requestControllers[url] = new AbortController();

            options.signal = requestControllers[url].signal;
        }

        return fetch('' + _config__WEBPACK_IMPORTED_MODULE_1__["default"].apiBase + url + (query ? '?' : '') + query, Object.assign({
            method: "GET"
        }, options, generalFetchOptions)).then(function (response) {
            return response.json().then(function (json) {
                if (options.showLoading) {
                    var _obj = {};
                    _obj[url + '?' + query_string__WEBPACK_IMPORTED_MODULE_0___default.a.stringify(data)] = false;
                    _this.store.dispatch('loading/' + _constants_action_types__WEBPACK_IMPORTED_MODULE_2__["SET_GLOBAL_LOADING"], _obj);
                }

                return json;
            });
        }).catch(function () {
            if (options.showLoading) {
                var _obj2 = {};
                _obj2[url + '?' + query_string__WEBPACK_IMPORTED_MODULE_0___default.a.stringify(data)] = false;
                _this.store.dispatch('loading/' + _constants_action_types__WEBPACK_IMPORTED_MODULE_2__["SET_GLOBAL_LOADING"], _obj2);
            }
        });
    },
    postData: function postData(url) {
        var _this2 = this;

        var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

        if (options.showLoading) {
            var obj = {};
            obj[url + '?' + query_string__WEBPACK_IMPORTED_MODULE_0___default.a.stringify(data)] = true;
            this.store.dispatch('loading/' + _constants_action_types__WEBPACK_IMPORTED_MODULE_2__["SET_GLOBAL_LOADING"], obj);
        }
        if (options.singleRequest) {
            if (requestControllers[url]) {
                requestControllers[url].abort();
            }

            requestControllers[url] = new AbortController();

            options.signal = requestControllers[url].signal;
        }
        return fetch(_config__WEBPACK_IMPORTED_MODULE_1__["default"].apiBase + url, Object.assign({
            method: "POST",
            body: JSON.stringify(data)
        }, options, generalFetchOptions)).then(function (response) {
            return response.json().then(function (json) {
                if (options.showLoading) {
                    var _obj3 = {};
                    _obj3[url + '?' + query_string__WEBPACK_IMPORTED_MODULE_0___default.a.stringify(data)] = false;
                    _this2.store.dispatch('loading/' + _constants_action_types__WEBPACK_IMPORTED_MODULE_2__["SET_GLOBAL_LOADING"], _obj3);
                }

                return json;
            });
        }).catch(function () {
            if (options.showLoading) {
                var _obj4 = {};
                _obj4[url + '?' + query_string__WEBPACK_IMPORTED_MODULE_0___default.a.stringify(data)] = false;
                _this2.store.dispatch('loading/' + _constants_action_types__WEBPACK_IMPORTED_MODULE_2__["SET_GLOBAL_LOADING"], _obj4);
            }
        });
    },
    debounce: function debounce(method, delay) {
        var timer = null;
        return function () {
            var context = this,
                args = arguments;
            clearTimeout(timer);
            timer = setTimeout(function () {
                method.apply(context, args);
            }, delay);
        };
    },

    //return hash and querystring
    getUrlParamQuestion: function getUrlParamQuestion(key) {
        var allParam = location.href.split("?")[1];
        if (!allParam) return key ? '' : {};
        var query = allParam.split('#')[0];
        var obj = query.slice(0, query.length).split("&").reduce(function (params, pair) {
            pair = pair.split("=");
            if (pair.length == 2) params[pair[0]] = decodeURIComponent(pair[1].replace(/\+/g, ' '));
            return params;
        }, {});

        return key ? obj[key] : obj;
    },
    getMapstyleToString: function getMapstyleToString(data) {
        var style = data ? data : _config__WEBPACK_IMPORTED_MODULE_1__["default"].mapstyle;
        var str = '';
        style.forEach(function (item) {
            if (item.featureType) {
                str += '&style=feature:' + item.featureType;
            }
            if (item.elementType) {
                str += '|element:' + item.elementType;
            }
            item.stylers.forEach(function (i) {
                for (var key in i) {
                    if (key == 'color' || key == 'hue') {
                        i[key] = i[key].replace('#', '0x');
                    }
                    str += '|' + key + ':' + i[key];
                }
            });
        });
        return encodeURI(str);
    }
});

/***/ }),

/***/ 0:
/*!************************************!*\
  !*** multi ./src/desktop/entry.js ***!
  \************************************/

/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__("./src/desktop/entry.js");


/***/ })

/******/ });
/*!
 * accounting.js v0.4.2, copyright 2014 Open Exchange Rates, MIT license, http://openexchangerates.github.io/accounting.js
 */
(function(n,t){function o(n){return!!(""===n||n&&n.charCodeAt&&n.substr)}function u(n){return v?v(n):"[object Array]"===y.call(n)}function s(n){return"[object Object]"===y.call(n)}function h(n,t){var i,n=n||{},t=t||{};for(i in t)t.hasOwnProperty(i)&&null==n[i]&&(n[i]=t[i]);return n}function r(n,t,i){var u=[],r,f;if(!n)return u;if(a&&n.map===a)return n.map(t,i);for(r=0,f=n.length;r<f;r++)u[r]=t.call(i,n[r],r,n);return u}function f(n,t){return n=Math.round(Math.abs(n)),isNaN(n)?t:n}function l(n){var t=i.settings.currency.format;return"function"==typeof n&&(n=n()),o(n)&&n.match("%v")?{pos:n,neg:n.replace("-","").replace("%v","-%v"),zero:n}:!n||!n.pos||!n.pos.match("%v")?o(t)?i.settings.currency.format={pos:t,neg:t.replace("%v","-%v"),zero:t}:t:n}var i={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},a=Array.prototype.map,v=Array.isArray,y=Object.prototype.toString,e=i.unformat=i.parse=function(n,t){if(u(n))return r(n,function(n){return e(n,t)});if(n=n||0,"number"==typeof n)return n;var t=t||".",i=RegExp("[^0-9-"+t+"]",["g"]),i=parseFloat((""+n).replace(/\((.*)\)/,"-$1").replace(i,"").replace(t,"."));return isNaN(i)?0:i},p=i.toFixed=function(n,t){var t=f(t,i.settings.number.precision),r=Math.pow(10,t);return(Math.round(i.unformat(n)*r)/r).toFixed(t)},c=i.formatNumber=i.format=function(n,t,o,l){if(u(n))return r(n,function(n){return c(n,t,o,l)});var n=e(n),a=h(s(t)?t:{precision:t,thousand:o,decimal:l},i.settings.number),y=f(a.precision),b=0>n?"-":"",v=parseInt(p(Math.abs(n||0),y),10)+"",w=3<v.length?v.length%3:0;return b+(w?v.substr(0,w)+a.thousand:"")+v.substr(w).replace(/(\d{3})(?=\d)/g,"$1"+a.thousand)+(y?a.decimal+p(Math.abs(n),y).split(".")[1]:"")},w=i.formatMoney=function(n,t,o,a,v,y){if(u(n))return r(n,function(n){return w(n,t,o,a,v,y)});var n=e(n),p=h(s(t)?t:{symbol:t,precision:o,thousand:a,decimal:v,format:y},i.settings.currency),b=l(p.format);return(0<n?b.pos:0>n?b.neg:b.zero).replace("%s",p.symbol).replace("%v",c(Math.abs(n),f(p.precision),p.thousand,p.decimal))};i.formatColumn=function(n,t,a,v,y,p){if(!n)return[];var w=h(s(t)?t:{symbol:t,precision:a,thousand:v,decimal:y,format:p},i.settings.currency),b=l(w.format),d=b.pos.indexOf("%s")<b.pos.indexOf("%v")?!0:!1,k=0,n=r(n,function(n){return u(n)?i.formatColumn(n,w):(n=e(n),n=(0<n?b.pos:0>n?b.neg:b.zero).replace("%s",w.symbol).replace("%v",c(Math.abs(n),f(w.precision),w.thousand,w.decimal)),n.length>k&&(k=n.length),n)});return r(n,function(n){return o(n)&&n.length<k?d?n.replace(w.symbol,w.symbol+Array(k-n.length+1).join(" ")):Array(k-n.length+1).join(" ")+n:n})};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports.accounting=i):"function"==typeof define&&define.amd?define([],function(){return i}):(i.noConflict=function(r){return function(){return n.accounting=r,i.noConflict=t,i}}(n.accounting),n.accounting=i)})(this);!function(){"use strict";function n(t,r){function s(n,t){return function(){return n.apply(t,arguments)}}var o;if(r=r||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=r.touchBoundary||10,this.layer=t,this.tapDelay=r.tapDelay||200,this.tapTimeout=r.tapTimeout||700,!n.notNeeded(t)){for(var f=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],e=this,u=0,h=f.length;h>u;u++)e[f[u]]=s(e[f[u]],e);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0));t.addEventListener("click",this.onClick,!0);t.addEventListener("touchstart",this.onTouchStart,!1);t.addEventListener("touchmove",this.onTouchMove,!1);t.addEventListener("touchend",this.onTouchEnd,!1);t.addEventListener("touchcancel",this.onTouchCancel,!1);Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(n,i,r){var u=Node.prototype.removeEventListener;"click"===n?u.call(t,n,i.hijacked||i,r):u.call(t,n,i,r)},t.addEventListener=function(n,i,r){var u=Node.prototype.addEventListener;"click"===n?u.call(t,n,i.hijacked||(i.hijacked=function(n){n.propagationStopped||i(n)}),r):u.call(t,n,i,r)});"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(n){o(n)},!1),t.onclick=null)}}var r=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!r,t=/iP(ad|hone|od)/.test(navigator.userAgent)&&!r,u=t&&/OS 4_\d(_\d)?/.test(navigator.userAgent),f=t&&/OS [6-7]_\d/.test(navigator.userAgent),e=navigator.userAgent.indexOf("BB10")>0;n.prototype.needsClick=function(n){switch(n.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(n.disabled)return!0;break;case"input":if(t&&"file"===n.type||n.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(n.className)};n.prototype.needsFocus=function(n){switch(n.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(n.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!n.disabled&&!n.readOnly;default:return/\bneedsfocus\b/.test(n.className)}};n.prototype.sendClick=function(n,t){var r,i;document.activeElement&&document.activeElement!==n&&document.activeElement.blur();i=t.changedTouches[0];r=document.createEvent("MouseEvents");r.initMouseEvent(this.determineEventType(n),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null);r.forwardedTouchEvent=!0;n.dispatchEvent(r)};n.prototype.determineEventType=function(n){return i&&"select"===n.tagName.toLowerCase()?"mousedown":"click"};n.prototype.focus=function(n){var i;t&&n.setSelectionRange&&0!==n.type.indexOf("date")&&"time"!==n.type&&"month"!==n.type?(i=n.value.length,n.setSelectionRange(i,i)):n.focus()};n.prototype.updateScrollParent=function(n){var i,t;if(i=n.fastClickScrollParent,!i||!i.contains(n)){t=n;do{if(t.scrollHeight>t.offsetHeight){i=t;n.fastClickScrollParent=t;break}t=t.parentElement}while(t)}i&&(i.fastClickLastScrollTop=i.scrollTop)};n.prototype.getTargetElementFromEventTarget=function(n){return n.nodeType===Node.TEXT_NODE?n.parentNode:n};n.prototype.onTouchStart=function(n){var r,i,f;if(n.targetTouches.length>1)return!0;if(r=this.getTargetElementFromEventTarget(n.target),i=n.targetTouches[0],t){if(f=window.getSelection(),f.rangeCount&&!f.isCollapsed)return!0;if(!u){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return n.preventDefault(),!1;this.lastTouchIdentifier=i.identifier;this.updateScrollParent(r)}}return this.trackingClick=!0,this.trackingClickStart=n.timeStamp,this.targetElement=r,this.touchStartX=i.pageX,this.touchStartY=i.pageY,n.timeStamp-this.lastClickTime<this.tapDelay&&n.preventDefault(),!0};n.prototype.touchHasMoved=function(n){var t=n.changedTouches[0],i=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>i||Math.abs(t.pageY-this.touchStartY)>i?!0:!1};n.prototype.onTouchMove=function(n){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(n.target)||this.touchHasMoved(n))&&(this.trackingClick=!1,this.targetElement=null),!0):!0};n.prototype.findControl=function(n){return void 0!==n.control?n.control:n.htmlFor?document.getElementById(n.htmlFor):n.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};n.prototype.onTouchEnd=function(n){var h,c,e,o,s,r=this.targetElement;if(!this.trackingClick)return!0;if(n.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(n.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=n.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,f&&(s=n.changedTouches[0],r=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||r,r.fastClickScrollParent=this.targetElement.fastClickScrollParent),e=r.tagName.toLowerCase(),"label"===e){if(h=this.findControl(r)){if(this.focus(r),i)return!1;r=h}}else if(this.needsFocus(r))return n.timeStamp-c>100||t&&window.top!==window&&"input"===e?(this.targetElement=null,!1):(this.focus(r),this.sendClick(r,n),t&&"select"===e||(this.targetElement=null,n.preventDefault()),!1);return t&&!u&&(o=r.fastClickScrollParent,o&&o.fastClickLastScrollTop!==o.scrollTop)?!0:(this.needsClick(r)||(n.preventDefault(),this.sendClick(r,n)),!1)};n.prototype.onTouchCancel=function(){this.trackingClick=!1;this.targetElement=null};n.prototype.onMouse=function(n){return this.targetElement?n.forwardedTouchEvent?!0:n.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(n.stopImmediatePropagation?n.stopImmediatePropagation():n.propagationStopped=!0,n.stopPropagation(),n.preventDefault(),!1):!0:!0};n.prototype.onClick=function(n){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===n.target.type&&0===n.detail?!0:(t=this.onMouse(n),t||(this.targetElement=null),t)};n.prototype.destroy=function(){var n=this.layer;i&&(n.removeEventListener("mouseover",this.onMouse,!0),n.removeEventListener("mousedown",this.onMouse,!0),n.removeEventListener("mouseup",this.onMouse,!0));n.removeEventListener("click",this.onClick,!0);n.removeEventListener("touchstart",this.onTouchStart,!1);n.removeEventListener("touchmove",this.onTouchMove,!1);n.removeEventListener("touchend",this.onTouchEnd,!1);n.removeEventListener("touchcancel",this.onTouchCancel,!1)};n.notNeeded=function(n){var t,u,r,f;return"undefined"==typeof ontouchstart?!0:(u=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1])&&(!i||(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||u>31&&document.documentElement.scrollWidth<=window.outerWidth))?!0:e&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]")))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth)?!0:"none"===n.style.msTouchAction||"manipulation"===n.style.touchAction?!0:(f=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],f>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===n.style.touchAction||"manipulation"===n.style.touchAction?!0:!1)};n.attach=function(t,i){return new n(t,i)};"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return n}):"undefined"!=typeof module&&module.exports?(module.exports=n.attach,module.exports.FastClick=n):window.FastClick=n}();

!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.Handlebars=t():n.Handlebars=t()}(this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var i={};return t.m=n,t.c=i,t.p="",t(0)}([function(n,t,i){"use strict";function e(){var n=k();return n.compile=function(t,i){return f.compile(t,i,n)},n.precompile=function(t,i){return f.precompile(t,i,n)},n.AST=l["default"],n.Compiler=f.Compiler,n.JavaScriptCompiler=v["default"],n.Parser=o.parser,n.parse=o.parse,n}var u=i(8)["default"];t.__esModule=!0;var s=i(1),h=u(s),c=i(2),l=u(c),o=i(3),f=i(4),a=i(5),v=u(a),y=i(6),p=u(y),w=i(7),b=u(w),k=h["default"].create,r=e();r.create=e;b["default"](r);r.Visitor=p["default"];r["default"]=r;t["default"]=r;n.exports=t["default"]},function(n,t,i){"use strict";function e(){var n=new o.HandlebarsEnvironment;return f.extend(n,o),n.SafeString=l["default"],n.Exception=v["default"],n.Utils=f,n.escapeExpression=f.escapeExpression,n.VM=s,n.template=function(t){return s.template(t,n)},n}var r=i(8)["default"];t.__esModule=!0;var h=i(9),o=r(h),c=i(10),l=r(c),a=i(11),v=r(a),y=i(12),f=r(y),p=i(13),s=r(p),w=i(7),b=r(w),u=e();u.create=e;b["default"](u);u["default"]=u;t["default"]=u;n.exports=t["default"]},function(n,t){"use strict";t.__esModule=!0;var i={Program:function(n,t,i,r){this.loc=r;this.type="Program";this.body=n;this.blockParams=t;this.strip=i},MustacheStatement:function(n,t,i,r,u,f){this.loc=f;this.type="MustacheStatement";this.path=n;this.params=t||[];this.hash=i;this.escaped=r;this.strip=u},BlockStatement:function(n,t,i,r,u,f,e,o,s){this.loc=s;this.type="BlockStatement";this.path=n;this.params=t||[];this.hash=i;this.program=r;this.inverse=u;this.openStrip=f;this.inverseStrip=e;this.closeStrip=o},PartialStatement:function(n,t,i,r,u){this.loc=u;this.type="PartialStatement";this.name=n;this.params=t||[];this.hash=i;this.indent="";this.strip=r},ContentStatement:function(n,t){this.loc=t;this.type="ContentStatement";this.original=this.value=n},CommentStatement:function(n,t,i){this.loc=i;this.type="CommentStatement";this.value=n;this.strip=t},SubExpression:function(n,t,i,r){this.loc=r;this.type="SubExpression";this.path=n;this.params=t||[];this.hash=i},PathExpression:function(n,t,i,r,u){this.loc=u;this.type="PathExpression";this.data=n;this.original=r;this.parts=i;this.depth=t},StringLiteral:function(n,t){this.loc=t;this.type="StringLiteral";this.original=this.value=n},NumberLiteral:function(n,t){this.loc=t;this.type="NumberLiteral";this.original=this.value=Number(n)},BooleanLiteral:function(n,t){this.loc=t;this.type="BooleanLiteral";this.original=this.value="true"===n},UndefinedLiteral:function(n){this.loc=n;this.type="UndefinedLiteral";this.original=this.value=void 0},NullLiteral:function(n){this.loc=n;this.type="NullLiteral";this.original=this.value=null},Hash:function(n,t){this.loc=t;this.type="Hash";this.pairs=n},HashPair:function(n,t,i){this.loc=i;this.type="HashPair";this.key=n;this.value=t},helpers:{helperExpression:function(n){return!("SubExpression"!==n.type&&!n.params.length&&!n.hash)},scopedId:function(n){return/^\.|this\b/.test(n.original)},simpleId:function(n){return 1===n.parts.length&&!i.helpers.scopedId(n)&&!n.depth}}};t["default"]=i;n.exports=t["default"]},function(n,t,i){"use strict";function e(n,t){if("Program"===n.type)return n;f["default"].yy=r;r.locInfo=function(n){return new r.SourceLocation(t&&t.srcName,n)};var i=new l["default"];return i.accept(f["default"].parse(n))}var u=i(8)["default"],r;t.__esModule=!0;t.parse=e;var o=i(14),f=u(o),s=i(2),h=u(s),c=i(15),l=u(c),a=i(16),v=u(a),y=i(12);t.parser=f["default"];r={};y.extend(r,v,h["default"])},function(n,t,i){"use strict";function f(){}function c(n,t,i){if(null==n||"string"!=typeof n&&"Program"!==n.type)throw new u["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+n);t=t||{};"data"in t||(t.data=!0);t.compat&&(t.useDepths=!0);var r=i.parse(n,t),f=(new i.Compiler).compile(r,t);return(new i.JavaScriptCompiler).compile(f,t)}function l(n,t,i){function e(){var t=i.parse(n,f),r=(new i.Compiler).compile(t,f),u=(new i.JavaScriptCompiler).compile(r,f,void 0,!0);return i.template(u)}function o(n,t){return r||(r=e()),r.call(this,n,t)}var f=void 0===arguments[1]?{}:arguments[1],r;if(null==n||"string"!=typeof n&&"Program"!==n.type)throw new u["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n);return"data"in f||(f.data=!0),f.compat&&(f.useDepths=!0),r=void 0,o._setup=function(n){return r||(r=e()),r._setup(n)},o._child=function(n,t,i,u){return r||(r=e()),r._child(n,t,i,u)},o}function o(n,t){if(n===t)return!0;if(e.isArray(n)&&e.isArray(t)&&n.length===t.length){for(var i=0;i<n.length;i++)if(!o(n[i],t[i]))return!1;return!0}}function s(n){if(!n.path.parts){var t=n.path;n.path=new r["default"].PathExpression(!1,0,[t.original+""],t.original+"",t.loc)}}var h=i(8)["default"];t.__esModule=!0;t.Compiler=f;t.precompile=c;t.compile=l;var a=i(11),u=h(a),e=i(12),v=i(2),r=h(v),y=[].slice;f.prototype={compiler:f,equals:function(n){var i=this.opcodes.length,r,u,t;if(n.opcodes.length!==i)return!1;for(t=0;i>t;t++)if(r=this.opcodes[t],u=n.opcodes[t],r.opcode!==u.opcode||!o(r.args,u.args))return!1;for(i=this.children.length,t=0;i>t;t++)if(!this.children[t].equals(n.children[t]))return!1;return!0},guid:0,compile:function(n,t){var i,r;if(this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],i=t.knownHelpers,t.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},i)for(r in i)r in i&&(t.knownHelpers[r]=i[r]);return this.accept(n)},compileProgram:function(n){var r=new this.compiler,t=r.compile(n,this.options),i=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[i]=t,this.useDepths=this.useDepths||t.useDepths,i},accept:function(n){this.sourceNode.unshift(n);var t=this[n.type](n);return this.sourceNode.shift(),t},Program:function(n){this.options.blockParams.unshift(n.blockParams);for(var i=n.body,r=i.length,t=0;r>t;t++)this.accept(i[t]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=n.blockParams?n.blockParams.length:0,this},BlockStatement:function(n){var t,i,r;s(n);t=n.program;i=n.inverse;t=t&&this.compileProgram(t);i=i&&this.compileProgram(i);r=this.classifySexpr(n);"helper"===r?this.helperSexpr(n,t,i):"simple"===r?(this.simpleSexpr(n),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue",n.path.original)):(this.ambiguousSexpr(n,t,i),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));this.opcode("append")},PartialStatement:function(n){var t,f,r,i;if(this.usePartial=!0,t=n.params,t.length>1)throw new u["default"]("Unsupported number of partial arguments: "+t.length,n);t.length||t.push({type:"PathExpression",parts:[],depth:0});f=n.name.original;r="SubExpression"===n.name.type;r&&this.accept(n.name);this.setupFullMustacheParams(n,void 0,void 0,!0);i=n.indent||"";this.options.preventIndent&&i&&(this.opcode("appendContent",i),i="");this.opcode("invokePartial",r,f,i);this.opcode("append")},MustacheStatement:function(n){this.SubExpression(n);this.opcode(n.escaped&&!this.options.noEscape?"appendEscaped":"append")},ContentStatement:function(n){n.value&&this.opcode("appendContent",n.value)},CommentStatement:function(){},SubExpression:function(n){s(n);var t=this.classifySexpr(n);"simple"===t?this.simpleSexpr(n):"helper"===t?this.helperSexpr(n):this.ambiguousSexpr(n)},ambiguousSexpr:function(n,t,i){var r=n.path,u=r.parts[0],f=null!=t||null!=i;this.opcode("getContext",r.depth);this.opcode("pushProgram",t);this.opcode("pushProgram",i);this.accept(r);this.opcode("invokeAmbiguous",u,f)},simpleSexpr:function(n){this.accept(n.path);this.opcode("resolvePossibleLambda")},helperSexpr:function(n,t,i){var o=this.setupFullMustacheParams(n,t,i),f=n.path,e=f.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",o.length,e);else{if(this.options.knownHelpersOnly)throw new u["default"]("You specified knownHelpersOnly, but used the unknown helper "+e,n);f.falsy=!0;this.accept(f);this.opcode("invokeHelper",o.length,f.original,r["default"].helpers.simpleId(f))}},PathExpression:function(n){this.addDepth(n.depth);this.opcode("getContext",n.depth);var t=n.parts[0],i=r["default"].helpers.scopedId(n),u=!n.depth&&!i&&this.blockParamIndex(t);u?this.opcode("lookupBlockParam",u,n.parts):t?n.data?(this.options.data=!0,this.opcode("lookupData",n.depth,n.parts)):this.opcode("lookupOnContext",n.parts,n.falsy,i):this.opcode("pushContext")},StringLiteral:function(n){this.opcode("pushString",n.value)},NumberLiteral:function(n){this.opcode("pushLiteral",n.value)},BooleanLiteral:function(n){this.opcode("pushLiteral",n.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(n){var i=n.pairs,t=0,r=i.length;for(this.opcode("pushHash");r>t;t++)this.pushParam(i[t].value);for(;t--;)this.opcode("assignToHash",i[t].key);this.opcode("popHash")},opcode:function(n){this.opcodes.push({opcode:n,args:y.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(n){n&&(this.useDepths=!0)},classifySexpr:function(n){var f=r["default"].helpers.simpleId(n.path),e=f&&!!this.blockParamIndex(n.path.parts[0]),t=!e&&r["default"].helpers.helperExpression(n),i=!e&&(t||f),o,u;return i&&!t&&(o=n.path.parts[0],u=this.options,u.knownHelpers[o]?t=!0:u.knownHelpersOnly&&(i=!1)),t?"helper":i?"ambiguous":"simple"},pushParams:function(n){for(var t=0,i=n.length;i>t;t++)this.pushParam(n[t])},pushParam:function(n){var t=null!=n.value?n.value:n.original||"",i,u;this.stringParams?(t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",t,n.type),"SubExpression"===n.type&&this.accept(n)):(this.trackIds&&(i=void 0,(!n.parts||r["default"].helpers.scopedId(n)||n.depth||(i=this.blockParamIndex(n.parts[0])),i)?(u=n.parts.slice(1).join("."),this.opcode("pushId","BlockParam",i,u)):(t=n.original||t,t.replace&&(t=t.replace(/^\.\//g,"").replace(/^\.$/g,"")),this.opcode("pushId",n.type,t))),this.accept(n))},setupFullMustacheParams:function(n,t,i,r){var u=n.params;return this.pushParams(u),this.opcode("pushProgram",t),this.opcode("pushProgram",i),n.hash?this.accept(n.hash):this.opcode("emptyHash",r),u},blockParamIndex:function(n){for(var i,r,t=0,u=this.options.blockParams.length;u>t;t++)if(i=this.options.blockParams[t],r=i&&e.indexOf(i,n),i&&r>=0)return[t,r]}}},function(n,t,i){"use strict";function u(n){this.value=n}function r(){}function s(n,t,i,r){var u=t.popStack(),f=0,e=i.length;for(n&&e--;e>f;f++)u=t.nameLookup(u,i[f],r);return n?[t.aliasable("this.strict"),"(",u,", ",t.quotedString(i[f]),")"]:u}var e=i(8)["default"];t.__esModule=!0;var o=i(9),h=i(11),f=e(h),c=i(12),l=i(17),a=e(l);r.prototype={nameLookup:function(n,t){return r.isValidJavaScriptVariableName(t)?[n,".",t]:[n,"['",t,"']"]},depthedLookup:function(n){return[this.aliasable("this.lookup"),'(depths, "',n,'")']},compilerInfo:function(){var n=o.COMPILER_REVISION,t=o.REVISION_CHANGES[n];return[n,t]},appendToBuffer:function(n,t,i){return c.isArray(n)||(n=[n]),n=this.source.wrap(n,t),this.environment.isSimple?["return ",n,";"]:i?["buffer += ",n,";"]:(n.appendToBuffer=!0,n)},initializeBuffer:function(){return this.quotedString("")},compile:function(n,t,i,r){var l,u,h;this.environment=n;this.options=t;this.stringParams=this.options.stringParams;this.trackIds=this.options.trackIds;this.precompile=!r;this.name=this.environment.name;this.isChild=!!i;this.context=i||{programs:[],environments:[]};this.preamble();this.stackSlot=0;this.stackVars=[];this.aliases={};this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.blockParams=[];this.compileChildren(n,t);this.useDepths=this.useDepths||n.useDepths||this.options.compat;this.useBlockParams=this.useBlockParams||n.useBlockParams;for(var a=n.opcodes,o=void 0,c=void 0,e=void 0,s=void 0,e=0,s=a.length;s>e;e++)o=a[e],this.source.currentLocation=o.loc,c=c||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=c,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new f["default"]("Compile completed with content left on stack");if(l=this.createFunctionContext(r),this.isChild)return l;for(u={compiler:this.compilerInfo(),main:l},h=this.context.programs,e=0,s=h.length;s>e;e++)h[e]&&(u[e]=h[e]);return this.environment.usePartial&&(u.usePartial=!0),this.options.data&&(u.useData=!0),this.useDepths&&(u.useDepths=!0),this.useBlockParams&&(u.useBlockParams=!0),this.options.compat&&(u.compat=!0),r?u.compilerOptions=this.options:(u.compiler=JSON.stringify(u.compiler),this.source.currentLocation={start:{line:1,column:0}},u=this.objectLiteral(u),t.srcName?(u=u.toStringWithSourceMap({file:t.destName}),u.map=u.map&&u.map.toString()):u=u.toString()),u},preamble:function(){this.lastContext=0;this.source=new a["default"](this.options.srcName)},createFunctionContext:function(n){var u="",o=this.stackVars.concat(this.registers.list),f,i,r,t,e;o.length>0&&(u+=", "+o.join(", "));f=0;for(i in this.aliases)r=this.aliases[i],this.aliases.hasOwnProperty(i)&&r.children&&r.referenceCount>1&&(u+=", alias"+ ++f+"="+i,r.children[0]="alias"+f);return t=["depth0","helpers","partials","data"],(this.useBlockParams||this.useDepths)&&t.push("blockParams"),this.useDepths&&t.push("depths"),e=this.mergeSource(u),n?(t.push(e),Function.apply(this,t)):this.source.wrap(["function(",t.join(","),") {\n  ",e,"}"])},mergeSource:function(n){var e=this.environment.isSimple,f=!this.forceBuffer,r=void 0,u=void 0,t=void 0,i=void 0;return this.source.each(function(n){n.appendToBuffer?(t?n.prepend("  + "):t=n,i=n):(t&&(u?t.prepend("buffer += "):r=!0,i.add(";"),t=i=void 0),u=!0,e||(f=!1))}),f?t?(t.prepend("return "),i.add(";")):u||this.source.push('return "";'):(n+=", buffer = "+(r?"":this.initializeBuffer()),t?(t.prepend("return buffer + "),i.add(";")):this.source.push("return buffer;")),n&&this.source.prepend("var "+n.substring(2)+(r?"":";\n")),this.source.merge()},blockValue:function(n){var r=this.aliasable("helpers.blockHelperMissing"),t=[this.contextName(0)],i;this.setupHelperArgs(n,0,t);i=this.popStack();t.splice(1,0,i);this.push(this.source.functionCall(r,"call",t))},ambiguousBlockValue:function(){var i=this.aliasable("helpers.blockHelperMissing"),n=[this.contextName(0)],t;this.setupHelperArgs("",0,n,!0);this.flushInline();t=this.topStack();n.splice(1,0,t);this.pushSource(["if (!",this.lastHelper,") { ",t," = ",this.source.functionCall(i,"call",n),"}"])},appendContent:function(n){this.pendingContent?n=this.pendingContent+n:this.pendingLocation=this.source.currentLocation;this.pendingContent=n},append:function(){if(this.isInline())this.replaceStack(function(n){return[" != null ? ",n,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var n=this.popStack();this.pushSource(["if (",n," != null) { ",this.appendToBuffer(n,void 0,!0)," }"]);this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("this.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(n){this.lastContext=n},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(n,t,i){var r=0;i||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(n[r++]));this.resolvePath("context",n,r,t)},lookupBlockParam:function(n,t){this.useBlockParams=!0;this.push(["blockParams[",n[0],"][",n[1],"]"]);this.resolvePath("context",t,1)},lookupData:function(n,t){this.pushStackLiteral(n?"this.data(data, "+n+")":"data");this.resolvePath("data",t,0,!0)},resolvePath:function(n,t,i,r){var f=this,u;if(this.options.strict||this.options.assumeObjects)return void this.push(s(this.options.strict,this,t,n));for(u=t.length;u>i;i++)this.replaceStack(function(u){var e=f.nameLookup(u,t[i],n);return r?[" && ",e]:[" != null ? ",e," : ",u]})},resolvePossibleLambda:function(){this.push([this.aliasable("this.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(n,t){this.pushContext();this.pushString(t);"SubExpression"!==t&&("string"==typeof n?this.pushString(n):this.pushStackLiteral(n))},emptyHash:function(n){this.trackIds&&this.push("{}");this.stringParams&&(this.push("{}"),this.push("{}"));this.pushStackLiteral(n?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash);this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var n=this.hash;this.hash=this.hashes.pop();this.trackIds&&this.push(this.objectLiteral(n.ids));this.stringParams&&(this.push(this.objectLiteral(n.contexts)),this.push(this.objectLiteral(n.types)));this.push(this.objectLiteral(n.values))},pushString:function(n){this.pushStackLiteral(this.quotedString(n))},pushLiteral:function(n){this.pushStackLiteral(n)},pushProgram:function(n){this.pushStackLiteral(null!=n?this.programExpression(n):null)},invokeHelper:function(n,t,i){var f=this.popStack(),u=this.setupHelper(n,t),e=i?[u.name," || "]:"",r=["("].concat(e,f);this.options.strict||r.push(" || ",this.aliasable("helpers.helperMissing"));r.push(")");this.push(this.source.functionCall(r,"call",u.callParams))},invokeKnownHelper:function(n,t){var i=this.setupHelper(n,t);this.push(this.source.functionCall(i.name,"call",i.callParams))},invokeAmbiguous:function(n,t){var u;this.useRegister("helper");u=this.popStack();this.emptyHash();var i=this.setupHelper(0,n,t),f=this.lastHelper=this.nameLookup("helpers",n,"helper"),r=["(","(helper = ",f," || ",u,")"];this.options.strict||(r[0]="(helper = ",r.push(" != null ? helper : ",this.aliasable("helpers.helperMissing")));this.push(["(",r,i.paramsInit?["),(",i.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",i.callParams)," : helper))"])},invokePartial:function(n,t,i){var u=[],r=this.setupParams(t,1,u,!1);n&&(t=this.popStack(),delete r.name);i&&(r.indent=JSON.stringify(i));r.helpers="helpers";r.partials="partials";u.unshift(n?t:this.nameLookup("partials",t,"partial"));this.options.compat&&(r.depths="depths");r=this.objectLiteral(r);u.push(r);this.push(this.source.functionCall("this.invokePartial","",u))},assignToHash:function(n){var f=this.popStack(),i=void 0,r=void 0,u=void 0,t;this.trackIds&&(u=this.popStack());this.stringParams&&(r=this.popStack(),i=this.popStack());t=this.hash;i&&(t.contexts[n]=i);r&&(t.types[n]=r);u&&(t.ids[n]=u);t.values[n]=f},pushId:function(n,t,i){"BlockParam"===n?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(i?" + "+JSON.stringify("."+i):"")):"PathExpression"===n?this.pushString(t):this.pushStackLiteral("SubExpression"===n?"true":"null")},compiler:r,compileChildren:function(n,t){for(var r,e=n.children,i=void 0,u=void 0,f=0,o=e.length;o>f;f++)i=e[f],u=new this.compiler,r=this.matchExistingProgram(i),null==r?(this.context.programs.push(""),r=this.context.programs.length,i.index=r,i.name="program"+r,this.context.programs[r]=u.compile(i,t,this.context,!this.precompile),this.context.environments[r]=i,this.useDepths=this.useDepths||u.useDepths,this.useBlockParams=this.useBlockParams||u.useBlockParams):(i.index=r,i.name="program"+r,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams)},matchExistingProgram:function(n){for(var i,t=0,r=this.context.environments.length;r>t;t++)if(i=this.context.environments[t],i&&i.equals(n))return t},programExpression:function(n){var i=this.environment.children[n],t=[i.index,"data",i.blockParams];return(this.useBlockParams||this.useDepths)&&t.push("blockParams"),this.useDepths&&t.push("depths"),"this.program("+t.join(", ")+")"},useRegister:function(n){this.registers[n]||(this.registers[n]=!0,this.registers.list.push(n))},push:function(n){return n instanceof u||(n=this.source.wrap(n)),this.inlineStack.push(n),n},pushStackLiteral:function(n){this.push(new u(n))},pushSource:function(n){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0);n&&this.source.push(n)},replaceStack:function(n){var r=["("],t=void 0,e=void 0,o=void 0,i,s,h;if(!this.isInline())throw new f["default"]("replaceStack on non-inline");i=this.popStack(!0);i instanceof u?(t=[i.value],r=["(",t],o=!0):(e=!0,s=this.incrStack(),r=["((",this.push(s)," = ",i,")"],t=this.topStack());h=n.call(this,t);o||this.popStack();e&&this.stackSlot--;this.push(r.concat(h,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var r=this.inlineStack,n,f,t,i;for(this.inlineStack=[],n=0,f=r.length;f>n;n++)t=r[n],t instanceof u?this.compileStack.push(t):(i=this.incrStack(),this.pushSource([i," = ",t,";"]),this.compileStack.push(i))},isInline:function(){return this.inlineStack.length},popStack:function(n){var i=this.isInline(),t=(i?this.inlineStack:this.compileStack).pop();if(!n&&t instanceof u)return t.value;if(!i){if(!this.stackSlot)throw new f["default"]("Invalid stack pop");this.stackSlot--}return t},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return n instanceof u?n.value:n},contextName:function(n){return this.useDepths&&n?"depths["+n+"]":"depth"+n},quotedString:function(n){return this.source.quotedString(n)},objectLiteral:function(n){return this.source.objectLiteral(n)},aliasable:function(n){var t=this.aliases[n];return t?(t.referenceCount++,t):(t=this.aliases[n]=this.source.wrap(n),t.aliasable=!0,t.referenceCount=1,t)},setupHelper:function(n,t,i){var r=[],u=this.setupHelperArgs(t,n,r,i),f=this.nameLookup("helpers",t,"helper");return{params:r,paramsInit:u,name:f,callParams:[this.contextName(0)].concat(r)}},setupParams:function(n,t,i){var r={},o=[],s=[],h=[],c=void 0,f,e,u;for(r.name=this.quotedString(n),r.hash=this.popStack(),this.trackIds&&(r.hashIds=this.popStack()),this.stringParams&&(r.hashTypes=this.popStack(),r.hashContexts=this.popStack()),f=this.popStack(),e=this.popStack(),(e||f)&&(r.fn=e||"this.noop",r.inverse=f||"this.noop"),u=t;u--;)c=this.popStack(),i[u]=c,this.trackIds&&(h[u]=this.popStack()),this.stringParams&&(s[u]=this.popStack(),o[u]=this.popStack());return this.trackIds&&(r.ids=this.source.generateArray(h)),this.stringParams&&(r.types=this.source.generateArray(s),r.contexts=this.source.generateArray(o)),this.options.data&&(r.data="data"),this.useBlockParams&&(r.blockParams="blockParams"),r},setupHelperArgs:function(n,t,i,r){var u=this.setupParams(n,t,i,!0);return u=this.objectLiteral(u),r?(this.useRegister("options"),i.push("options"),["options=",u]):(i.push(u),"")}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),i=r.RESERVED_WORDS={},n=0,u=t.length;u>n;n++)i[t[n]]=!0}();r.isValidJavaScriptVariableName=function(n){return!r.RESERVED_WORDS[n]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(n)};t["default"]=r;n.exports=t["default"]},function(n,t,i){"use strict";function r(){this.parents=[]}var u=i(8)["default"];t.__esModule=!0;var e=i(11),f=u(e),o=i(2),s=u(o);r.prototype={constructor:r,mutating:!1,acceptKey:function(n,t){var i=this.accept(n[t]);if(this.mutating){if(i&&(!i.type||!s["default"][i.type]))throw new f["default"]('Unexpected node type "'+i.type+'" found when accepting '+t+" on "+n.type);n[t]=i}},acceptRequired:function(n,t){if(this.acceptKey(n,t),!n[t])throw new f["default"](n.type+" requires "+t);},acceptArray:function(n){for(var t=0,i=n.length;i>t;t++)this.acceptKey(n,t),n[t]||(n.splice(t,1),t--,i--)},accept:function(n){if(n){this.current&&this.parents.unshift(this.current);this.current=n;var t=this[n.type](n);return this.current=this.parents.shift(),!this.mutating||t?t:t!==!1?n:void 0}},Program:function(n){this.acceptArray(n.body)},MustacheStatement:function(n){this.acceptRequired(n,"path");this.acceptArray(n.params);this.acceptKey(n,"hash")},BlockStatement:function(n){this.acceptRequired(n,"path");this.acceptArray(n.params);this.acceptKey(n,"hash");this.acceptKey(n,"program");this.acceptKey(n,"inverse")},PartialStatement:function(n){this.acceptRequired(n,"name");this.acceptArray(n.params);this.acceptKey(n,"hash")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:function(n){this.acceptRequired(n,"path");this.acceptArray(n.params);this.acceptKey(n,"hash")},PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(n){this.acceptArray(n.pairs)},HashPair:function(n){this.acceptRequired(n,"value")}};t["default"]=r;n.exports=t["default"]},function(n,t){(function(i){"use strict";t.__esModule=!0;t["default"]=function(n){var t="undefined"!=typeof i?i:window,r=t.Handlebars;n.noConflict=function(){t.Handlebars===n&&(t.Handlebars=r)}};n.exports=t["default"]}).call(t,function(){return this}())},function(n,t){"use strict";t["default"]=function(n){return n&&n.__esModule?n:{"default":n}};t.__esModule=!0},function(n,t,i){"use strict";function o(n,t){this.helpers=n||{};this.partials=t||{};w(this)}function w(n){n.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new e["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"');});n.registerHelper("blockHelperMissing",function(t,i){var e=i.inverse,o=i.fn,u;return t===!0?o(this):t===!1||null==t?e(this):v(t)?t.length>0?(i.ids&&(i.ids=[i.name]),n.helpers.each(t,i)):e(this):(i.data&&i.ids&&(u=f(i.data),u.contextPath=r.appendContextPath(i.data.contextPath,i.name),i={data:u}),o(t,i))});n.registerHelper("each",function(n,t){function c(t,i,f){u&&(u.key=t,u.index=i,u.first=0===i,u.last=!!f,h&&(u.contextPath=h+t));l+=p(n[t],{data:u,blockParams:r.blockParams([n[t],t],[h+t,null])})}var y,o,a;if(!t)throw new e["default"]("Must pass iterator to #each");var p=t.fn,w=t.inverse,i=0,l="",u=void 0,h=void 0;if(t.data&&t.ids&&(h=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),s(n)&&(n=n.call(this)),t.data&&(u=f(t.data)),n&&"object"==typeof n)if(v(n))for(y=n.length;y>i;i++)c(i,i,i===n.length-1);else{o=void 0;for(a in n)n.hasOwnProperty(a)&&(o&&c(o,i-1),o=a,i++);o&&c(o,i-1,!0)}return 0===i&&(l=w(this)),l});n.registerHelper("if",function(n,t){return s(n)&&(n=n.call(this)),!t.hash.includeZero&&!n||r.isEmpty(n)?t.inverse(this):t.fn(this)});n.registerHelper("unless",function(t,i){return n.helpers["if"].call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})});n.registerHelper("with",function(n,t){var u,i;return(s(n)&&(n=n.call(this)),u=t.fn,r.isEmpty(n))?t.inverse(this):(t.data&&t.ids&&(i=f(t.data),i.contextPath=r.appendContextPath(t.data.contextPath,t.ids[0]),t={data:i}),u(n,t))});n.registerHelper("log",function(t,i){var r=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;n.log(r,t)});n.registerHelper("lookup",function(n,t){return n&&n[t]})}function f(n){var t=r.extend({},n);return t._parent=n,t}var c=i(8)["default"],l,a,u,h;t.__esModule=!0;t.HandlebarsEnvironment=o;t.createFrame=f;var b=i(12),r=c(b),k=i(11),e=c(k);t.VERSION="3.0.1";l=6;t.COMPILER_REVISION=l;a={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};t.REVISION_CHANGES=a;var v=r.isArray,s=r.isFunction,y=r.toString,p="[object Object]";o.prototype={constructor:o,logger:u,log:h,registerHelper:function(n,t){if(y.call(n)===p){if(t)throw new e["default"]("Arg not supported with multiple helpers");r.extend(this.helpers,n)}else this.helpers[n]=t},unregisterHelper:function(n){delete this.helpers[n]},registerPartial:function(n,t){if(y.call(n)===p)r.extend(this.partials,n);else{if("undefined"==typeof t)throw new e["default"]("Attempting to register a partial as undefined");this.partials[n]=t}},unregisterPartial:function(n){delete this.partials[n]}};u={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(n,t){if("undefined"!=typeof console&&u.level<=n){var i=u.methodMap[n];(console[i]||console.log).call(console,t)}}};t.logger=u;h=u.log;t.log=h},function(n,t){"use strict";function i(n){this.string=n}t.__esModule=!0;i.prototype.toString=i.prototype.toHTML=function(){return""+this.string};t["default"]=i;n.exports=t["default"]},function(n,t){"use strict";function i(n,t){var f=t&&t.loc,e=void 0,o=void 0,s,u;for(f&&(e=f.start.line,o=f.start.column,n+=" - "+e+":"+o),s=Error.prototype.constructor.call(this,n),u=0;u<r.length;u++)this[r[u]]=s[r[u]];Error.captureStackTrace&&Error.captureStackTrace(this,i);f&&(this.lineNumber=e,this.column=o)}t.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error;t["default"]=i;n.exports=t["default"]},function(n,t){"use strict";function f(n){return a[n]}function e(n){for(var i,t=1;t<arguments.length;t++)for(i in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],i)&&(n[i]=arguments[t][i]);return n}function o(n,t){for(var i=0,r=n.length;r>i;i++)if(n[i]===t)return i;return-1}function s(n){if("string"!=typeof n){if(n&&n.toHTML)return n.toHTML();if(null==n)return"";if(!n)return n+"";n=""+n}return y.test(n)?n.replace(v,f):n}function h(n){return n||0===n?u(n)&&0===n.length?!0:!1:!0}function c(n,t){return n.path=t,n}function l(n,t){return(n?n+".":"")+t}var i,u;t.__esModule=!0;t.extend=e;t.indexOf=o;t.escapeExpression=s;t.isEmpty=h;t.blockParams=c;t.appendContextPath=l;var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},v=/[&<>"'`]/g,y=/[&<>"'`]/,r=Object.prototype.toString;t.toString=r;i=function(n){return"function"==typeof n};i(/x/)&&(t.isFunction=i=function(n){return"function"==typeof n&&"[object Function]"===r.call(n)});t.isFunction=i;u=Array.isArray||function(n){return n&&"object"==typeof n?"[object Array]"===r.call(n):!1};t.isArray=u},function(n,t,i){"use strict";function s(n){var t=n&&n[0]||1,i=f.COMPILER_REVISION,u,e;if(t!==i){if(i>t){u=f.REVISION_CHANGES[i];e=f.REVISION_CHANGES[t];throw new r["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+u+") or downgrade your runtime to an older version ("+e+").");}throw new r["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+n[1]+").");}}function h(n,t){function o(i,u,f){var o;if(f.hash&&(u=e.extend({},u,f.hash)),i=t.VM.resolvePartial.call(this,i,u,f),o=t.VM.invokePartial.call(this,i,u,f),null==o&&t.compile&&(f.partials[f.name]=t.compile(i,n.compilerOptions,t),o=f.partials[f.name](u,f)),null!=o){if(f.indent){for(var h=o.split("\n"),s=0,c=h.length;c>s&&(h[s]||s+1!==c);s++)h[s]=f.indent+h[s];o=h.join("\n")}return o}throw new r["default"]("The partial "+f.name+" could not be compiled when running in runtime-only mode");}function f(t){var r=void 0===arguments[1]?{}:arguments[1],u=r.data,e,o;return f._setup(r),!r.partial&&n.useData&&(u=v(t,u)),e=void 0,o=n.useBlockParams?[]:void 0,n.useDepths&&(e=r.depths?[t].concat(r.depths):[t]),n.main.call(i,t,i.helpers,i.partials,u,o,e)}if(!t)throw new r["default"]("No environment passed to template");if(!n||!n.main)throw new r["default"]("Unknown template object: "+typeof n);t.VM.checkRevision(n.compiler);var i={strict:function(n,t){if(!(t in n))throw new r["default"]('"'+t+'" not defined in '+n);return n[t]},lookup:function(n,t){for(var r=n.length,i=0;r>i;i++)if(n[i]&&null!=n[i][t])return n[i][t]},lambda:function(n,t){return"function"==typeof n?n.call(t):n},escapeExpression:e.escapeExpression,invokePartial:o,fn:function(t){return n[t]},programs:[],program:function(n,t,i,r,f){var e=this.programs[n],o=this.fn(n);return t||f||r||i?e=u(this,n,o,t,i,r,f):e||(e=this.programs[n]=u(this,n,o)),e},data:function(n,t){for(;n&&t--;)n=n._parent;return n},merge:function(n,t){var i=n||t;return n&&t&&n!==t&&(i=e.extend({},t,n)),i},noop:t.VM.noop,compilerInfo:n.compiler};return f.isTop=!0,f._setup=function(r){r.partial?(i.helpers=r.helpers,i.partials=r.partials):(i.helpers=i.merge(r.helpers,t.helpers),n.usePartial&&(i.partials=i.merge(r.partials,t.partials)))},f._child=function(t,f,e,o){if(n.useBlockParams&&!e)throw new r["default"]("must pass block params");if(n.useDepths&&!o)throw new r["default"]("must pass parent depths");return u(i,t,n[t],f,0,e,o)},f}function u(n,t,i,r,u,f,e){function o(t){var u=void 0===arguments[1]?{}:arguments[1];return i.call(n,t,n.helpers,n.partials,u.data||r,f&&[u.blockParams].concat(f),e&&[t].concat(e))}return o.program=t,o.depth=e?e.length:0,o.blockParams=u||0,o}function c(n,t,i){return n?n.call||i.name||(i.name=n,n=i.partials[n]):n=i.partials[i.name],n}function l(n,t,i){if(i.partial=!0,void 0===n)throw new r["default"]("The partial "+i.name+" could not be found");if(n instanceof Function)return n(t,i)}function a(){return""}function v(n,t){return t&&"root"in t||(t=t?f.createFrame(t):{},t.root=n),t}var o=i(8)["default"];t.__esModule=!0;t.checkRevision=s;t.template=h;t.wrapProgram=u;t.resolvePartial=c;t.invokePartial=l;t.noop=a;var y=i(12),e=o(y),p=i(11),r=o(p),f=i(9)},function(n,t){"use strict";t.__esModule=!0;var i=function(){function n(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,content:12,COMMENT:13,CONTENT:14,openRawBlock:15,END_RAW_BLOCK:16,OPEN_RAW_BLOCK:17,helperName:18,openRawBlock_repetition0:19,openRawBlock_option0:20,CLOSE_RAW_BLOCK:21,openBlock:22,block_option0:23,closeBlock:24,openInverse:25,block_option1:26,OPEN_BLOCK:27,openBlock_repetition0:28,openBlock_option0:29,openBlock_option1:30,CLOSE:31,OPEN_INVERSE:32,openInverse_repetition0:33,openInverse_option0:34,openInverse_option1:35,openInverseChain:36,OPEN_INVERSE_CHAIN:37,openInverseChain_repetition0:38,openInverseChain_option0:39,openInverseChain_option1:40,inverseAndProgram:41,INVERSE:42,inverseChain:43,inverseChain_option0:44,OPEN_ENDBLOCK:45,OPEN:46,mustache_repetition0:47,mustache_option0:48,OPEN_UNESCAPED:49,mustache_repetition1:50,mustache_option1:51,CLOSE_UNESCAPED:52,OPEN_PARTIAL:53,partialName:54,partial_repetition0:55,partial_option0:56,param:57,sexpr:58,OPEN_SEXPR:59,sexpr_repetition0:60,sexpr_option0:61,CLOSE_SEXPR:62,hash:63,hash_repetition_plus0:64,hashSegment:65,ID:66,EQUALS:67,blockParams:68,OPEN_BLOCK_PARAMS:69,blockParams_repetition_plus0:70,CLOSE_BLOCK_PARAMS:71,path:72,dataName:73,STRING:74,NUMBER:75,BOOLEAN:76,UNDEFINED:77,NULL:78,DATA:79,pathSegments:80,SEP:81,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"COMMENT",14:"CONTENT",16:"END_RAW_BLOCK",17:"OPEN_RAW_BLOCK",21:"CLOSE_RAW_BLOCK",27:"OPEN_BLOCK",31:"CLOSE",32:"OPEN_INVERSE",37:"OPEN_INVERSE_CHAIN",42:"INVERSE",45:"OPEN_ENDBLOCK",46:"OPEN",49:"OPEN_UNESCAPED",52:"CLOSE_UNESCAPED",53:"OPEN_PARTIAL",59:"OPEN_SEXPR",62:"CLOSE_SEXPR",66:"ID",67:"EQUALS",69:"OPEN_BLOCK_PARAMS",71:"CLOSE_BLOCK_PARAMS",74:"STRING",75:"NUMBER",76:"BOOLEAN",77:"UNDEFINED",78:"NULL",79:"DATA",81:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[12,1],[10,3],[15,5],[9,4],[9,4],[22,6],[25,6],[36,6],[41,2],[43,3],[43,1],[24,3],[8,5],[8,5],[11,5],[57,1],[57,1],[58,5],[63,1],[65,3],[68,3],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[54,1],[54,1],[73,2],[72,1],[80,3],[80,1],[6,0],[6,2],[19,0],[19,2],[20,0],[20,1],[23,0],[23,1],[26,0],[26,1],[28,0],[28,2],[29,0],[29,1],[30,0],[30,1],[33,0],[33,2],[34,0],[34,1],[35,0],[35,1],[38,0],[38,2],[39,0],[39,1],[40,0],[40,1],[44,0],[44,1],[47,0],[47,2],[48,0],[48,1],[50,0],[50,2],[51,0],[51,1],[55,0],[55,2],[56,0],[56,1],[60,0],[60,2],[61,0],[61,1],[64,1],[64,2],[70,1],[70,2]],performAction:function(n,t,i,r,u,f){var e=f.length-1,s,o;switch(u){case 1:return f[e-1];case 2:this.$=new r.Program(f[e],null,{},r.locInfo(this._$));break;case 3:this.$=f[e];break;case 4:this.$=f[e];break;case 5:this.$=f[e];break;case 6:this.$=f[e];break;case 7:this.$=f[e];break;case 8:this.$=new r.CommentStatement(r.stripComment(f[e]),r.stripFlags(f[e],f[e]),r.locInfo(this._$));break;case 9:this.$=new r.ContentStatement(f[e],r.locInfo(this._$));break;case 10:this.$=r.prepareRawBlock(f[e-2],f[e-1],f[e],this._$);break;case 11:this.$={path:f[e-3],params:f[e-2],hash:f[e-1]};break;case 12:this.$=r.prepareBlock(f[e-3],f[e-2],f[e-1],f[e],!1,this._$);break;case 13:this.$=r.prepareBlock(f[e-3],f[e-2],f[e-1],f[e],!0,this._$);break;case 14:this.$={path:f[e-4],params:f[e-3],hash:f[e-2],blockParams:f[e-1],strip:r.stripFlags(f[e-5],f[e])};break;case 15:this.$={path:f[e-4],params:f[e-3],hash:f[e-2],blockParams:f[e-1],strip:r.stripFlags(f[e-5],f[e])};break;case 16:this.$={path:f[e-4],params:f[e-3],hash:f[e-2],blockParams:f[e-1],strip:r.stripFlags(f[e-5],f[e])};break;case 17:this.$={strip:r.stripFlags(f[e-1],f[e-1]),program:f[e]};break;case 18:s=r.prepareBlock(f[e-2],f[e-1],f[e],f[e],!1,this._$);o=new r.Program([s],null,{},r.locInfo(this._$));o.chained=!0;this.$={strip:f[e-2].strip,program:o,chain:!0};break;case 19:this.$=f[e];break;case 20:this.$={path:f[e-1],strip:r.stripFlags(f[e-2],f[e])};break;case 21:this.$=r.prepareMustache(f[e-3],f[e-2],f[e-1],f[e-4],r.stripFlags(f[e-4],f[e]),this._$);break;case 22:this.$=r.prepareMustache(f[e-3],f[e-2],f[e-1],f[e-4],r.stripFlags(f[e-4],f[e]),this._$);break;case 23:this.$=new r.PartialStatement(f[e-3],f[e-2],f[e-1],r.stripFlags(f[e-4],f[e]),r.locInfo(this._$));break;case 24:this.$=f[e];break;case 25:this.$=f[e];break;case 26:this.$=new r.SubExpression(f[e-3],f[e-2],f[e-1],r.locInfo(this._$));break;case 27:this.$=new r.Hash(f[e],r.locInfo(this._$));break;case 28:this.$=new r.HashPair(r.id(f[e-2]),f[e],r.locInfo(this._$));break;case 29:this.$=r.id(f[e-1]);break;case 30:this.$=f[e];break;case 31:this.$=f[e];break;case 32:this.$=new r.StringLiteral(f[e],r.locInfo(this._$));break;case 33:this.$=new r.NumberLiteral(f[e],r.locInfo(this._$));break;case 34:this.$=new r.BooleanLiteral(f[e],r.locInfo(this._$));break;case 35:this.$=new r.UndefinedLiteral(r.locInfo(this._$));break;case 36:this.$=new r.NullLiteral(r.locInfo(this._$));break;case 37:this.$=f[e];break;case 38:this.$=f[e];break;case 39:this.$=r.preparePath(!0,f[e],this._$);break;case 40:this.$=r.preparePath(!1,f[e],this._$);break;case 41:f[e-2].push({part:r.id(f[e]),original:f[e],separator:f[e-1]});this.$=f[e-2];break;case 42:this.$=[{part:r.id(f[e]),original:f[e]}];break;case 43:this.$=[];break;case 44:f[e-1].push(f[e]);break;case 45:this.$=[];break;case 46:f[e-1].push(f[e]);break;case 53:this.$=[];break;case 54:f[e-1].push(f[e]);break;case 59:this.$=[];break;case 60:f[e-1].push(f[e]);break;case 65:this.$=[];break;case 66:f[e-1].push(f[e]);break;case 73:this.$=[];break;case 74:f[e-1].push(f[e]);break;case 77:this.$=[];break;case 78:f[e-1].push(f[e]);break;case 81:this.$=[];break;case 82:f[e-1].push(f[e]);break;case 85:this.$=[];break;case 86:f[e-1].push(f[e]);break;case 89:this.$=[f[e]];break;case 90:f[e-1].push(f[e]);break;case 91:this.$=[f[e]];break;case 92:f[e-1].push(f[e])}},table:[{3:1,4:2,5:[2,43],6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],46:[2,43],49:[2,43],53:[2,43]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:[1,11],14:[1,18],15:16,17:[1,21],22:14,25:15,27:[1,19],32:[1,20],37:[2,2],42:[2,2],45:[2,2],46:[1,12],49:[1,13],53:[1,17]},{1:[2,1]},{5:[2,44],13:[2,44],14:[2,44],17:[2,44],27:[2,44],32:[2,44],37:[2,44],42:[2,44],45:[2,44],46:[2,44],49:[2,44],53:[2,44]},{5:[2,3],13:[2,3],14:[2,3],17:[2,3],27:[2,3],32:[2,3],37:[2,3],42:[2,3],45:[2,3],46:[2,3],49:[2,3],53:[2,3]},{5:[2,4],13:[2,4],14:[2,4],17:[2,4],27:[2,4],32:[2,4],37:[2,4],42:[2,4],45:[2,4],46:[2,4],49:[2,4],53:[2,4]},{5:[2,5],13:[2,5],14:[2,5],17:[2,5],27:[2,5],32:[2,5],37:[2,5],42:[2,5],45:[2,5],46:[2,5],49:[2,5],53:[2,5]},{5:[2,6],13:[2,6],14:[2,6],17:[2,6],27:[2,6],32:[2,6],37:[2,6],42:[2,6],45:[2,6],46:[2,6],49:[2,6],53:[2,6]},{5:[2,7],13:[2,7],14:[2,7],17:[2,7],27:[2,7],32:[2,7],37:[2,7],42:[2,7],45:[2,7],46:[2,7],49:[2,7],53:[2,7]},{5:[2,8],13:[2,8],14:[2,8],17:[2,8],27:[2,8],32:[2,8],37:[2,8],42:[2,8],45:[2,8],46:[2,8],49:[2,8],53:[2,8]},{18:22,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:33,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:34,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{4:35,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{12:36,14:[1,18]},{18:38,54:37,58:39,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,9],13:[2,9],14:[2,9],16:[2,9],17:[2,9],27:[2,9],32:[2,9],37:[2,9],42:[2,9],45:[2,9],46:[2,9],49:[2,9],53:[2,9]},{18:41,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:42,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:43,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[2,73],47:44,59:[2,73],66:[2,73],74:[2,73],75:[2,73],76:[2,73],77:[2,73],78:[2,73],79:[2,73]},{21:[2,30],31:[2,30],52:[2,30],59:[2,30],62:[2,30],66:[2,30],69:[2,30],74:[2,30],75:[2,30],76:[2,30],77:[2,30],78:[2,30],79:[2,30]},{21:[2,31],31:[2,31],52:[2,31],59:[2,31],62:[2,31],66:[2,31],69:[2,31],74:[2,31],75:[2,31],76:[2,31],77:[2,31],78:[2,31],79:[2,31]},{21:[2,32],31:[2,32],52:[2,32],59:[2,32],62:[2,32],66:[2,32],69:[2,32],74:[2,32],75:[2,32],76:[2,32],77:[2,32],78:[2,32],79:[2,32]},{21:[2,33],31:[2,33],52:[2,33],59:[2,33],62:[2,33],66:[2,33],69:[2,33],74:[2,33],75:[2,33],76:[2,33],77:[2,33],78:[2,33],79:[2,33]},{21:[2,34],31:[2,34],52:[2,34],59:[2,34],62:[2,34],66:[2,34],69:[2,34],74:[2,34],75:[2,34],76:[2,34],77:[2,34],78:[2,34],79:[2,34]},{21:[2,35],31:[2,35],52:[2,35],59:[2,35],62:[2,35],66:[2,35],69:[2,35],74:[2,35],75:[2,35],76:[2,35],77:[2,35],78:[2,35],79:[2,35]},{21:[2,36],31:[2,36],52:[2,36],59:[2,36],62:[2,36],66:[2,36],69:[2,36],74:[2,36],75:[2,36],76:[2,36],77:[2,36],78:[2,36],79:[2,36]},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],78:[2,40],79:[2,40],81:[1,45]},{66:[1,32],80:46},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{50:47,52:[2,77],59:[2,77],66:[2,77],74:[2,77],75:[2,77],76:[2,77],77:[2,77],78:[2,77],79:[2,77]},{23:48,36:50,37:[1,52],41:51,42:[1,53],43:49,45:[2,49]},{26:54,41:55,42:[1,53],45:[2,51]},{16:[1,56]},{31:[2,81],55:57,59:[2,81],66:[2,81],74:[2,81],75:[2,81],76:[2,81],77:[2,81],78:[2,81],79:[2,81]},{31:[2,37],59:[2,37],66:[2,37],74:[2,37],75:[2,37],76:[2,37],77:[2,37],78:[2,37],79:[2,37]},{31:[2,38],59:[2,38],66:[2,38],74:[2,38],75:[2,38],76:[2,38],77:[2,38],78:[2,38],79:[2,38]},{18:58,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{28:59,31:[2,53],59:[2,53],66:[2,53],69:[2,53],74:[2,53],75:[2,53],76:[2,53],77:[2,53],78:[2,53],79:[2,53]},{31:[2,59],33:60,59:[2,59],66:[2,59],69:[2,59],74:[2,59],75:[2,59],76:[2,59],77:[2,59],78:[2,59],79:[2,59]},{19:61,21:[2,45],59:[2,45],66:[2,45],74:[2,45],75:[2,45],76:[2,45],77:[2,45],78:[2,45],79:[2,45]},{18:65,31:[2,75],48:62,57:63,58:66,59:[1,40],63:64,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{66:[1,70]},{21:[2,39],31:[2,39],52:[2,39],59:[2,39],62:[2,39],66:[2,39],69:[2,39],74:[2,39],75:[2,39],76:[2,39],77:[2,39],78:[2,39],79:[2,39],81:[1,45]},{18:65,51:71,52:[2,79],57:72,58:66,59:[1,40],63:73,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{24:74,45:[1,75]},{45:[2,50]},{4:76,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{45:[2,19]},{18:77,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:78,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{24:79,45:[1,75]},{45:[2,52]},{5:[2,10],13:[2,10],14:[2,10],17:[2,10],27:[2,10],32:[2,10],37:[2,10],42:[2,10],45:[2,10],46:[2,10],49:[2,10],53:[2,10]},{18:65,31:[2,83],56:80,57:81,58:66,59:[1,40],63:82,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{59:[2,85],60:83,62:[2,85],66:[2,85],74:[2,85],75:[2,85],76:[2,85],77:[2,85],78:[2,85],79:[2,85]},{18:65,29:84,31:[2,55],57:85,58:66,59:[1,40],63:86,64:67,65:68,66:[1,69],69:[2,55],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,31:[2,61],34:87,57:88,58:66,59:[1,40],63:89,64:67,65:68,66:[1,69],69:[2,61],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,20:90,21:[2,47],57:91,58:66,59:[1,40],63:92,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[1,93]},{31:[2,74],59:[2,74],66:[2,74],74:[2,74],75:[2,74],76:[2,74],77:[2,74],78:[2,74],79:[2,74]},{31:[2,76]},{21:[2,24],31:[2,24],52:[2,24],59:[2,24],62:[2,24],66:[2,24],69:[2,24],74:[2,24],75:[2,24],76:[2,24],77:[2,24],78:[2,24],79:[2,24]},{21:[2,25],31:[2,25],52:[2,25],59:[2,25],62:[2,25],66:[2,25],69:[2,25],74:[2,25],75:[2,25],76:[2,25],77:[2,25],78:[2,25],79:[2,25]},{21:[2,27],31:[2,27],52:[2,27],62:[2,27],65:94,66:[1,95],69:[2,27]},{21:[2,89],31:[2,89],52:[2,89],62:[2,89],66:[2,89],69:[2,89]},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],67:[1,96],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{21:[2,41],31:[2,41],52:[2,41],59:[2,41],62:[2,41],66:[2,41],69:[2,41],74:[2,41],75:[2,41],76:[2,41],77:[2,41],78:[2,41],79:[2,41],81:[2,41]},{52:[1,97]},{52:[2,78],59:[2,78],66:[2,78],74:[2,78],75:[2,78],76:[2,78],77:[2,78],78:[2,78],79:[2,78]},{52:[2,80]},{5:[2,12],13:[2,12],14:[2,12],17:[2,12],27:[2,12],32:[2,12],37:[2,12],42:[2,12],45:[2,12],46:[2,12],49:[2,12],53:[2,12]},{18:98,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{36:50,37:[1,52],41:51,42:[1,53],43:100,44:99,45:[2,71]},{31:[2,65],38:101,59:[2,65],66:[2,65],69:[2,65],74:[2,65],75:[2,65],76:[2,65],77:[2,65],78:[2,65],79:[2,65]},{45:[2,17]},{5:[2,13],13:[2,13],14:[2,13],17:[2,13],27:[2,13],32:[2,13],37:[2,13],42:[2,13],45:[2,13],46:[2,13],49:[2,13],53:[2,13]},{31:[1,102]},{31:[2,82],59:[2,82],66:[2,82],74:[2,82],75:[2,82],76:[2,82],77:[2,82],78:[2,82],79:[2,82]},{31:[2,84]},{18:65,57:104,58:66,59:[1,40],61:103,62:[2,87],63:105,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{30:106,31:[2,57],68:107,69:[1,108]},{31:[2,54],59:[2,54],66:[2,54],69:[2,54],74:[2,54],75:[2,54],76:[2,54],77:[2,54],78:[2,54],79:[2,54]},{31:[2,56],69:[2,56]},{31:[2,63],35:109,68:110,69:[1,108]},{31:[2,60],59:[2,60],66:[2,60],69:[2,60],74:[2,60],75:[2,60],76:[2,60],77:[2,60],78:[2,60],79:[2,60]},{31:[2,62],69:[2,62]},{21:[1,111]},{21:[2,46],59:[2,46],66:[2,46],74:[2,46],75:[2,46],76:[2,46],77:[2,46],78:[2,46],79:[2,46]},{21:[2,48]},{5:[2,21],13:[2,21],14:[2,21],17:[2,21],27:[2,21],32:[2,21],37:[2,21],42:[2,21],45:[2,21],46:[2,21],49:[2,21],53:[2,21]},{21:[2,90],31:[2,90],52:[2,90],62:[2,90],66:[2,90],69:[2,90]},{67:[1,96]},{18:65,57:112,58:66,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,22],13:[2,22],14:[2,22],17:[2,22],27:[2,22],32:[2,22],37:[2,22],42:[2,22],45:[2,22],46:[2,22],49:[2,22],53:[2,22]},{31:[1,113]},{45:[2,18]},{45:[2,72]},{18:65,31:[2,67],39:114,57:115,58:66,59:[1,40],63:116,64:67,65:68,66:[1,69],69:[2,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,23],13:[2,23],14:[2,23],17:[2,23],27:[2,23],32:[2,23],37:[2,23],42:[2,23],45:[2,23],46:[2,23],49:[2,23],53:[2,23]},{62:[1,117]},{59:[2,86],62:[2,86],66:[2,86],74:[2,86],75:[2,86],76:[2,86],77:[2,86],78:[2,86],79:[2,86]},{62:[2,88]},{31:[1,118]},{31:[2,58]},{66:[1,120],70:119},{31:[1,121]},{31:[2,64]},{14:[2,11]},{21:[2,28],31:[2,28],52:[2,28],62:[2,28],66:[2,28],69:[2,28]},{5:[2,20],13:[2,20],14:[2,20],17:[2,20],27:[2,20],32:[2,20],37:[2,20],42:[2,20],45:[2,20],46:[2,20],49:[2,20],53:[2,20]},{31:[2,69],40:122,68:123,69:[1,108]},{31:[2,66],59:[2,66],66:[2,66],69:[2,66],74:[2,66],75:[2,66],76:[2,66],77:[2,66],78:[2,66],79:[2,66]},{31:[2,68],69:[2,68]},{21:[2,26],31:[2,26],52:[2,26],59:[2,26],62:[2,26],66:[2,26],69:[2,26],74:[2,26],75:[2,26],76:[2,26],77:[2,26],78:[2,26],79:[2,26]},{13:[2,14],14:[2,14],17:[2,14],27:[2,14],32:[2,14],37:[2,14],42:[2,14],45:[2,14],46:[2,14],49:[2,14],53:[2,14]},{66:[1,125],71:[1,124]},{66:[2,91],71:[2,91]},{13:[2,15],14:[2,15],17:[2,15],27:[2,15],32:[2,15],42:[2,15],45:[2,15],46:[2,15],49:[2,15],53:[2,15]},{31:[1,126]},{31:[2,70]},{31:[2,29]},{66:[2,92],71:[2,92]},{13:[2,16],14:[2,16],17:[2,16],27:[2,16],32:[2,16],37:[2,16],42:[2,16],45:[2,16],46:[2,16],49:[2,16],53:[2,16]}],defaultActions:{4:[2,1],49:[2,50],51:[2,19],55:[2,52],64:[2,76],73:[2,80],78:[2,17],82:[2,84],92:[2,48],99:[2,18],100:[2,72],105:[2,88],107:[2,58],110:[2,64],111:[2,11],123:[2,70],124:[2,29]},parseError:function(n){throw new Error(n);},parse:function(n){function it(){var n;return n=k.lexer.lex()||1,"number"!=typeof n&&(n=k.symbols_[n]||n),n}var k=this,r=[0],e=[null],t=[],h=this.table,d="",c=0,g=0,y=0,l,nt,i,p,o,u,w,a,f,tt,v,s,b;for(this.lexer.setInput(n),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={}),l=this.lexer.yylloc,t.push(l),nt=this.lexer.options&&this.lexer.options.ranges,"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError),s={};;){if((o=r[r.length-1],this.defaultActions[o]?u=this.defaultActions[o]:((null===i||"undefined"==typeof i)&&(i=it()),u=h[o]&&h[o][i]),"undefined"==typeof u||!u.length||!u[0])&&(b="",!y)){v=[];for(a in h[o])this.terminals_[a]&&a>2&&v.push("'"+this.terminals_[a]+"'");b=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[i]||i)+"'":"Parse error on line "+(c+1)+": Unexpected "+(1==i?"end of input":"'"+(this.terminals_[i]||i)+"'");this.parseError(b,{text:this.lexer.match,token:this.terminals_[i]||i,line:this.lexer.yylineno,loc:l,expected:v})}if(u[0]instanceof Array&&u.length>1)throw new Error("Parse Error: multiple actions possible at state: "+o+", token: "+i);switch(u[0]){case 1:r.push(i);e.push(this.lexer.yytext);t.push(this.lexer.yylloc);r.push(u[1]);i=null;p?(i=p,p=null):(g=this.lexer.yyleng,d=this.lexer.yytext,c=this.lexer.yylineno,l=this.lexer.yylloc,y>0&&y--);break;case 2:if(f=this.productions_[u[1]][1],s.$=e[e.length-f],s._$={first_line:t[t.length-(f||1)].first_line,last_line:t[t.length-1].last_line,first_column:t[t.length-(f||1)].first_column,last_column:t[t.length-1].last_column},nt&&(s._$.range=[t[t.length-(f||1)].range[0],t[t.length-1].range[1]]),w=this.performAction.call(s,d,g,c,this.yy,u[1],e,t),"undefined"!=typeof w)return w;f&&(r=r.slice(0,-2*f),e=e.slice(0,-1*f),t=t.slice(0,-1*f));r.push(this.productions_[u[1]][0]);e.push(s.$);t.push(s._$);tt=h[r[r.length-2]][r[r.length-1]];r.push(tt);break;case 3:return!0}}return!0}},i=function(){var n={EOF:1,parseError:function(n,t){if(!this.yy.parser)throw new Error(n);this.yy.parser.parseError(n,t)},setInput:function(n){return this._input=n,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var n=this._input[0],t;return this.yytext+=n,this.yyleng++,this.offset++,this.match+=n,this.matched+=n,t=n.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),n},unput:function(n){var i=n.length,t=n.split(/(?:\r\n?|\n)/g),r,u;return this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-i-1),this.offset-=i,r=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),u=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===r.length?this.yylloc.first_column:0)+r[r.length-t.length].length-t[0].length:this.yylloc.first_column-i},this.options.ranges&&(this.yylloc.range=[u[0],u[0]+this.yyleng-i]),this},more:function(){return this._more=!0,this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var n=this.matched.substr(0,this.matched.length-this.match.length);return(n.length>20?"...":"")+n.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var n=this.match;return n.length<20&&(n+=this._input.substr(0,20-n.length)),(n.substr(0,20)+(n.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var n=this.pastInput(),t=new Array(n.length+1).join("-");return n+this.upcomingInput()+"\n"+t+"^"},next:function(){var f,n,r,e,t,u,i;if(this.done)return this.EOF;for(this._input||(this.done=!0),this._more||(this.yytext="",this.match=""),u=this._currentRules(),i=0;i<u.length&&(r=this._input.match(this.rules[u[i]]),!r||n&&!(r[0].length>n[0].length)||(n=r,e=i,this.options.flex));i++);return n?(t=n[0].match(/(?:\r\n?|\n).*/g),t&&(this.yylineno+=t.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:t?t[t.length-1].length-t[t.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+n[0].length},this.yytext+=n[0],this.match+=n[0],this.matches=n,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(n[0].length),this.matched+=n[0],f=this.performAction.call(this,this.yy,this,u[e],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),f?f:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var n=this.next();return"undefined"!=typeof n?n:this.lex()},begin:function(n){this.conditionStack.push(n)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(n){this.begin(n)}};return n.options={},n.performAction=function(n,t,i){function r(n,i){return t.yytext=t.yytext.substr(n,t.yyleng-i)}switch(i){case 0:if("\\\\"===t.yytext.slice(-2)?(r(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(r(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return t.yytext=t.yytext.substr(5,t.yyleng-9),this.popState(),16;case 4:return 14;case 5:return this.popState(),13;case 6:return 59;case 7:return 62;case 8:return 17;case 9:return this.popState(),this.begin("raw"),21;case 10:return 53;case 11:return 27;case 12:return 45;case 13:return this.popState(),42;case 14:return this.popState(),42;case 15:return 32;case 16:return 37;case 17:return 49;case 18:return 46;case 19:this.unput(t.yytext);this.popState();this.begin("com");break;case 20:return this.popState(),13;case 21:return 46;case 22:return 67;case 23:return 66;case 24:return 66;case 25:return 81;case 27:return this.popState(),52;case 28:return this.popState(),31;case 29:return t.yytext=r(1,2).replace(/\\"/g,'"'),74;case 30:return t.yytext=r(1,2).replace(/\\'/g,"'"),74;case 31:return 79;case 32:return 76;case 33:return 76;case 34:return 77;case 35:return 78;case 36:return 75;case 37:return 69;case 38:return 71;case 39:return 66;case 40:return 66;case 41:return"INVALID";case 42:return 5}},n.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],n.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,42],inclusive:!0}},n}();return t.lexer=i,n.prototype=t,t.Parser=n,new n}();t["default"]=i;n.exports=t["default"]},function(n,t,i){"use strict";function u(){}function e(n,t,i){void 0===t&&(t=n.length);var r=n[t-1],u=n[t-2];return r?"ContentStatement"===r.type?(u||!i?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original):void 0:i}function o(n,t,i){void 0===t&&(t=-1);var r=n[t+1],u=n[t+2];return r?"ContentStatement"===r.type?(u||!i?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original):void 0:i}function f(n,t,i){var r=n[null==t?0:t+1],u;r&&"ContentStatement"===r.type&&(i||!r.rightStripped)&&(u=r.value,r.value=r.value.replace(i?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.value!==u)}function r(n,t,i){var r=n[null==t?n.length-1:t-1],u;if(r&&"ContentStatement"===r.type&&(i||!r.leftStripped))return u=r.value,r.value=r.value.replace(i?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.value!==u,r.leftStripped}var c=i(8)["default"],s,h;t.__esModule=!0;s=i(6);h=c(s);u.prototype=new h["default"];u.prototype.Program=function(n){var h=!this.isRootSeen,u,s;this.isRootSeen=!0;for(var i=n.body,t=0,a=i.length;a>t;t++)if(u=i[t],s=this.accept(u),s){var c=e(i,t,h),l=o(i,t,h),v=s.openStandalone&&c,y=s.closeStandalone&&l,p=s.inlineStandalone&&c&&l;s.close&&f(i,t,!0);s.open&&r(i,t,!0);p&&(f(i,t),r(i,t)&&"PartialStatement"===u.type&&(u.indent=/([ \t]+$)/.exec(i[t-1].original)[1]));v&&(f((u.program||u.inverse).body),r(i,t));y&&(f(i,t),r((u.inverse||u.program).body))}return n};u.prototype.BlockStatement=function(n){var c,h;this.accept(n.program);this.accept(n.inverse);var t=n.program||n.inverse,i=n.program&&n.inverse,u=i,s=i;if(i&&i.chained)for(u=i.body[0].program;s.chained;)s=s.body[s.body.length-1].program;return c={open:n.openStrip.open,close:n.closeStrip.close,openStandalone:o(t.body),closeStandalone:e((u||t).body)},(n.openStrip.close&&f(t.body,null,!0),i)?(h=n.inverseStrip,h.open&&r(t.body,null,!0),h.close&&f(u.body,null,!0),n.closeStrip.open&&r(s.body,null,!0),e(t.body)&&o(u.body)&&(r(t.body),f(u.body))):n.closeStrip.open&&r(t.body,null,!0),c};u.prototype.MustacheStatement=function(n){return n.strip};u.prototype.PartialStatement=u.prototype.CommentStatement=function(n){var t=n.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}};t["default"]=u;n.exports=t["default"]},function(n,t,i){"use strict";function f(n,t){this.source=n;this.start={line:t.first_line,column:t.first_column};this.end={line:t.last_line,column:t.last_column}}function e(n){return/^\[.*\]$/.test(n)?n.substr(1,n.length-2):n}function o(n,t){return{open:"~"===n.charAt(2),close:"~"===t.charAt(t.length-3)}}function s(n){return n.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function h(n,t,i){var u,h;i=this.locInfo(i);for(var e=n?"@":"",o=[],s=0,c="",f=0,l=t.length;l>f;f++)if(u=t[f].part,h=t[f].original!==u,e+=(t[f].separator||"")+u,h||".."!==u&&"."!==u&&"this"!==u)o.push(u);else{if(o.length>0)throw new r["default"]("Invalid path: "+e,{loc:i});".."===u&&(s++,c+="../")}return new this.PathExpression(n,s,o,e,i)}function c(n,t,i,r,u,f){var e=r.charAt(3)||r.charAt(2),o="{"!==e&&"&"!==e;return new this.MustacheStatement(n,t,i,o,u,this.locInfo(f))}function l(n,t,i,u){var f,e;if(n.path.original!==i){f={loc:n.path.loc};throw new r["default"](n.path.original+" doesn't match "+i,f);}return u=this.locInfo(u),e=new this.Program([t],null,{},u),new this.BlockStatement(n.path,n.params,n.hash,e,void 0,{},{},{},u)}function a(n,t,i,u,f,e){var h,o,s;if(u&&u.path&&n.path.original!==u.path.original){h={loc:n.path.loc};throw new r["default"](n.path.original+" doesn't match "+u.path.original,h);}return t.blockParams=n.blockParams,o=void 0,s=void 0,i&&(i.chain&&(i.program.body[0].closeStrip=u.strip),s=i.strip,o=i.program),f&&(f=o,o=t,t=f),new this.BlockStatement(n.path,n.params,n.hash,t,o,n.strip,s,u&&u.strip,this.locInfo(e))}var v=i(8)["default"],u,r;t.__esModule=!0;t.SourceLocation=f;t.id=e;t.stripFlags=o;t.stripComment=s;t.preparePath=h;t.prepareMustache=c;t.prepareRawBlock=l;t.prepareBlock=a;u=i(11);r=v(u)},function(n,t,i){"use strict";function u(n,t,i){if(f.isArray(n)){for(var u=[],r=0,e=n.length;e>r;r++)u.push(t.wrap(n[r],i));return u}return"boolean"==typeof n||"number"==typeof n?n+"":n}function e(n){this.srcFile=n;this.source=[]}t.__esModule=!0;var f=i(12),r=void 0;try{}catch(o){}r||(r=function(n,t,i,r){this.src="";r&&this.add(r)},r.prototype={add:function(n){f.isArray(n)&&(n=n.join(""));this.src+=n},prepend:function(n){f.isArray(n)&&(n=n.join(""));this.src=n+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}});e.prototype={prepend:function(n,t){this.source.unshift(this.wrap(n,t))},push:function(n,t){this.source.push(this.wrap(n,t))},merge:function(){var n=this.empty();return this.each(function(t){n.add(["  ",t,"\n"])}),n},each:function(n){for(var t=0,i=this.source.length;i>t;t++)n(this.source[t])},empty:function(){var n=void 0===arguments[0]?this.currentLocation||{start:{}}:arguments[0];return new r(n.start.line,n.start.column,this.srcFile)},wrap:function(n){var t=void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return n instanceof r?n:(n=u(n,this,t),new r(t.start.line,t.start.column,this.srcFile,n))},functionCall:function(n,t,i){return i=this.generateList(i),this.wrap([n,t?"."+t+"(":"(",i,")"])},quotedString:function(n){return'"'+(n+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(n){var f=[],t,r,i;for(t in n)n.hasOwnProperty(t)&&(r=u(n[t],this),"undefined"!==r&&f.push([this.quotedString(t),":",r]));return i=this.generateList(f),i.prepend("{"),i.add("}"),i},generateList:function(n,t){for(var r=this.empty(t),i=0,f=n.length;f>i;i++)i&&r.add(","),r.add(u(n[i],this,t));return r},generateArray:function(n,t){var i=this.generateList(n,t);return i.prepend("["),i.add("]"),i}};t["default"]=e;n.exports=t["default"]}])});!function(n){function lt(n,t){if(!t||"function"==typeof t)return n;for(var i in t)n[i]=t[i];return n}function it(n,t){for(var i in t)i in n?it(n[i],t[i]):n[i]=t[i];return n}function at(n,t,i){var r,u=0,f=n.length,e=void 0===f||"[object Array]"!==Object.prototype.toString.apply(n)||"function"==typeof n;if(i)if(e){for(r in n)if(t.apply(n[r],i)===!1)break}else for(;f>u&&t.apply(n[u++],i)!==!1;);else if(e){for(r in n)if(t.call(n[r],r,n[r])===!1)break}else for(;f>u&&t.call(n[u],u,n[u++])!==!1;);return n}function vt(n){return"string"==typeof n?n.replace(/[&<>"'\/]/g,function(n){return ci[n]}):n}function yt(n){var r=function(n){if(window.XMLHttpRequest)return n(null,new XMLHttpRequest);if(window.ActiveXObject)try{return n(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(t){return n(null,new ActiveXObject("Microsoft.XMLHTTP"))}return n(new Error)},u=function(n){var i,t;if("string"==typeof n)return n;i=[];for(t in n)n.hasOwnProperty(t)&&i.push(encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return i.join("&")},f=function(n){var i,r,t;for(n=n.replace(/\r\n/g,"\n"),i="",r=0;r<n.length;r++)t=n.charCodeAt(r),128>t?i+=String.fromCharCode(t):t>127&&2048>t?(i+=String.fromCharCode(t>>6|192),i+=String.fromCharCode(63&t|128)):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128),i+=String.fromCharCode(63&t|128));return i},e=function(n){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o,t,i,h,c,s,r,l,u;n=f(n);l="";u=0;do o=n.charCodeAt(u++),t=n.charCodeAt(u++),i=n.charCodeAt(u++),h=o>>2,c=(3&o)<<4|t>>4,s=(15&t)<<2|i>>6,r=63&i,isNaN(t)?s=r=64:isNaN(i)&&(r=64),l+=e.charAt(h)+e.charAt(c)+e.charAt(s)+e.charAt(r),o=t=i="",h=c=s=r="";while(u<n.length);return l},o=function(){for(var t,i,r=arguments[0],n=1;n<arguments.length;n++){t=arguments[n];for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i])}return r},t=function(n,f,e,s){var c,l,h,v,a;if("function"==typeof e&&(s=e,e={}),e.cache=e.cache||!1,e.data=e.data||{},e.headers=e.headers||{},e.jsonp=e.jsonp||!1,e.async=void 0===e.async?!0:e.async,l=o({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},t.headers,e.headers),(c="application/json"===l["content-type"]?JSON.stringify(e.data):u(e.data),"GET"===n)&&(h=[],c&&(h.push(c),c=null),e.cache||h.push("_="+(new Date).getTime()),e.jsonp&&(h.push("callback="+e.jsonp),h.push("jsonp="+e.jsonp)),h=h.join("&"),h.length>1&&(f+=f.indexOf("?")>-1?"&"+h:"?"+h),e.jsonp))return v=document.getElementsByTagName("head")[0],a=document.createElement("script"),a.type="text/javascript",a.src=f,void v.appendChild(a);r(function(t,r){if(t)return s(t);r.open(n,f,e.async);for(var u in l)l.hasOwnProperty(u)&&r.setRequestHeader(u,l[u]);r.onreadystatechange=function(){if(4===r.readyState){var n=r.responseText||"";if(!s)return;s(r.status,{text:function(){return n},json:function(){try{return JSON.parse(n)}catch(t){return i.error("Can not parse JSON. URL: "+f),{}}}})}};r.send(c)})},s={authBasic:function(n,i){t.headers.Authorization="Basic "+e(n+":"+i)},connect:function(n,i,r){return t("CONNECT",n,i,r)},del:function(n,i,r){return t("DELETE",n,i,r)},get:function(n,i,r){return t("GET",n,i,r)},head:function(n,i,r){return t("HEAD",n,i,r)},headers:function(n){t.headers=n||{}},isAllowed:function(n,t,i){this.options(n,function(n,r){i(-1!==r.text().indexOf(t))})},options:function(n,i,r){return t("OPTIONS",n,i,r)},patch:function(n,i,r){return t("PATCH",n,i,r)},post:function(n,i,r){return t("POST",n,i,r)},put:function(n,i,r){return t("PUT",n,i,r)},trace:function(n,i,r){return t("TRACE",n,i,r)}},h=n.type?n.type.toLowerCase():"get";s[h](n.url,n,function(t,i){200===t||0===t&&i.text()?n.success(i.json(),t,null):n.error(i.text(),t,null)})}function k(n,s){var l,h,a,v,k;if("function"==typeof n&&(s=n,n={}),n=n||{},i.extend(t,n),delete t.fixLng,t.functions&&(delete t.functions,i.extend(i,n.functions)),"string"==typeof t.ns&&(t.ns={namespaces:[t.ns],defaultNs:t.ns}),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),("string"==typeof t.fallbackLng||"boolean"==typeof t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),t.interpolationPrefixEscaped=i.regexEscape(t.interpolationPrefix),t.interpolationSuffixEscaped=i.regexEscape(t.interpolationSuffix),t.lng||(t.lng=i.detectLanguage()),p=i.toLanguages(t.lng),c=p[0],i.log("currentLng set to: "+c),t.useCookie&&i.cookie.read(t.cookieName)!==c&&i.cookie.create(t.cookieName,c,t.cookieExpirationTime,t.cookieDomain),t.detectLngFromLocalStorage&&"undefined"!=typeof document&&window.localStorage&&i.localStorage.setItem("i18next_lng",c),l=o,n.fixLng&&(l=function(n,t){return t=t||{},t.lng=t.lng||l.lng,o(n,t)},l.lng=c),e.setCurrentLng(c),u&&t.setJqueryExt?et&&et():ot&&ot(),u&&u.Deferred&&(h=u.Deferred()),!t.resStore){for(a=i.toLanguages(t.lng),"string"==typeof t.preload&&(t.preload=[t.preload]),v=0,k=t.preload.length;k>v;v++)for(var b=i.toLanguages(t.preload[v]),y=0,d=b.length;d>y;y++)a.indexOf(b[y])<0&&a.push(b[y]);return f.sync.load(a,t,function(n,t){r=t;w=!0;s&&s(n,l);h&&(n?h.reject:h.resolve)(n||l)}),h?h.promise():void 0}return r=t.resStore,w=!0,s&&s(null,l),h&&h.resolve(l),h?h.promise():void 0}function pt(){return w}function wt(n,i){"string"==typeof n&&(n=[n]);for(var r=0,u=n.length;u>r;r++)t.preload.indexOf(n[r])<0&&t.preload.push(n[r]);return k(i)}function bt(n,u,f,e){"string"!=typeof u?(f=u,u=t.ns.defaultNs):t.ns.namespaces.indexOf(u)<0&&t.ns.namespaces.push(u);r[n]=r[n]||{};r[n][u]=r[n][u]||{};e?i.deepExtend(r[n][u],f):i.extend(r[n][u],f);t.useLocalStorage&&h._storeLocal(r)}function kt(n,i){var u,f,e;"string"!=typeof i&&(i=t.ns.defaultNs);r[n]=r[n]||{};u=r[n][i]||{};f=!1;for(e in u)u.hasOwnProperty(e)&&(f=!0);return f}function dt(n,u){return"string"!=typeof u&&(u=t.ns.defaultNs),r[n]=r[n]||{},i.extend({},r[n][u])}function gt(n,i){"string"!=typeof i&&(i=t.ns.defaultNs);r[n]=r[n]||{};r[n][i]={};t.useLocalStorage&&h._storeLocal(r)}function rt(n,i,u,f){"string"!=typeof i?(resource=i,i=t.ns.defaultNs):t.ns.namespaces.indexOf(i)<0&&t.ns.namespaces.push(i);r[n]=r[n]||{};r[n][i]=r[n][i]||{};for(var o=u.split(t.keyseparator),e=0,s=r[n][i];o[e];)e==o.length-1?s[o[e]]=f:(null==s[o[e]]&&(s[o[e]]={}),s=s[o[e]]),e++;t.useLocalStorage&&h._storeLocal(r)}function ni(n,i,r){"string"!=typeof i?(resource=i,i=t.ns.defaultNs):t.ns.namespaces.indexOf(i)<0&&t.ns.namespaces.push(i);for(var u in r)"string"==typeof r[u]&&rt(n,i,u,r[u])}function ti(n){t.ns.defaultNs=n}function ii(n,t){ut([n],t)}function ut(n,u){var b={dynamicLoad:t.dynamicLoad,resGetPath:t.resGetPath,getAsync:t.getAsync,customLoad:t.customLoad,ns:{namespaces:n,defaultNs:""}},e=i.toLanguages(t.lng),s,p,l,y,a,w;for("string"==typeof t.preload&&(t.preload=[t.preload]),s=0,p=t.preload.length;p>s;s++)for(var v=i.toLanguages(t.preload[s]),h=0,k=v.length;k>h;h++)e.indexOf(v[h])<0&&e.push(v[h]);for(var o=[],c=0,d=e.length;d>c;c++){if(l=!1,y=r[e[c]],y)for(a=0,w=n.length;w>a;a++)y[n[a]]||(l=!0);else l=!0;l&&o.push(e[c])}o.length?f.sync._fetch(o,b,function(e,s){var h=n.length*o.length;i.each(n,function(n,e){t.ns.namespaces.indexOf(e)<0&&t.ns.namespaces.push(e);i.each(o,function(n,i){r[i]=r[i]||{};r[i][e]=s[i][e];h--;0===h&&u&&(t.useLocalStorage&&f.sync._storeLocal(r),u())})})}):u&&u()}function ft(n,t,i){return"function"==typeof t?(i=t,t={}):t||(t={}),t.lng=n,k(t,i)}function ri(){return c}function ui(n){r={};ft(c,n)}function fi(){window.i18next=window.i18n;tt?window.i18n=tt:delete window.i18n}function et(){function n(n,i,r){var e,o,f,s,h;0!==i.length&&(e="text",0===i.indexOf("[")&&(o=i.split("]"),i=o[1],e=o[0].substr(1,o[0].length-1)),i.indexOf(";")===i.length-1&&(i=i.substr(0,i.length-2)),"html"===e?(f=t.defaultValueFromContent?u.extend({defaultValue:n.html()},r):r,n.html(u.t(i,f))):"text"===e?(f=t.defaultValueFromContent?u.extend({defaultValue:n.text()},r):r,n.text(u.t(i,f))):"prepend"===e?(f=t.defaultValueFromContent?u.extend({defaultValue:n.html()},r):r,n.prepend(u.t(i,f))):"append"===e?(f=t.defaultValueFromContent?u.extend({defaultValue:n.html()},r):r,n.append(u.t(i,f))):0===e.indexOf("data-")?(s=e.substr(5),f=t.defaultValueFromContent?u.extend({defaultValue:n.data(s)},r):r,h=u.t(i,f),n.data(s,h),n.attr(e,h)):(f=t.defaultValueFromContent?u.extend({defaultValue:n.attr(e)},r):r,n.attr(e,u.t(i,f))))}function i(i,r){var f=i.attr(t.selectorAttr),o,s,h,e;(f||"undefined"==typeof f||f===!1||(f=i.text()||i.val()),f)&&(o=i,s=i.data("i18n-target"),(s&&(o=i.find(s)||i),r||t.useDataAttrOptions!==!0||(r=i.data("i18n-options")),r=r||{},f.indexOf(";")>=0)?(h=f.split(";"),u.each(h,function(t,i){""!==i&&n(o,i,r)})):n(o,f,r),t.useDataAttrOptions===!0&&(e=u.extend({lng:"non",lngs:[],_origLng:"non"},r),delete e.lng,delete e.lngs,delete e._origLng,i.data("i18n-options",e)))}u.t=u.t||o;u.fn.i18n=function(n){return this.each(function(){i(u(this),n);var r=u(this).find("["+t.selectorAttr+"]");r.each(function(){i(u(this),n)})})}}function ot(){function n(n,t,i){var r,u;0!==t.length&&(r="text",0===t.indexOf("[")&&(u=t.split("]"),t=u[1],r=u[0].substr(1,u[0].length-1)),t.indexOf(";")===t.length-1&&(t=t.substr(0,t.length-2)),"html"===r?n.innerHTML=o(t,i):"text"===r?n.textContent=o(t,i):"prepend"===r?n.insertAdjacentHTML(o(t,i),"afterbegin"):"append"===r?n.insertAdjacentHTML(o(t,i),"beforeend"):n.setAttribute(r,o(t,i)))}function i(i,r){var u=i.getAttribute(t.selectorAttr),f,o;if(u||"undefined"==typeof u||u===!1||(u=i.textContent||i.value),u)if(f=i,o=i.getAttribute("i18n-target"),o&&(f=i.querySelector(o)||i),u.indexOf(";")>=0)for(var s=u.split(";"),e=0,h=s.length;h>e;e++)""!==s[e]&&n(f,s[e],r);else n(f,u,r)}f.translateObject=function(n,r){for(var f=n.querySelectorAll("["+t.selectorAttr+"]"),u=0,e=f.length;e>u;u++)i(f[u],r)}}function s(n,r,u,f){if(!n||(f=f||r,n.indexOf(f.interpolationPrefix||t.interpolationPrefix)<0))return n;var e=f.interpolationPrefix?i.regexEscape(f.interpolationPrefix):t.interpolationPrefixEscaped,o=f.interpolationSuffix?i.regexEscape(f.interpolationSuffix):t.interpolationSuffixEscaped,s=r.replace&&"object"==typeof r.replace?r.replace:r,h=new RegExp([e,"(.+?)","(HTML)?",o].join(""),"g"),c=f.escapeInterpolation||t.escapeInterpolation;return n.replace(h,function(n,r,u){for(var o,f=s,e=r;e.indexOf(t.keyseparator)>=0&&"object"==typeof f&&f;)o=e.slice(0,e.indexOf(t.keyseparator)),e=e.slice(e.indexOf(t.keyseparator)+1),f=f[o];return f&&"object"==typeof f&&f.hasOwnProperty(e)?(f[e],c&&!u?i.escape(f[e]):f[e]):n})}function d(n,r){var c=",",l="{",o="}",e=i.extend({},r),f,h,y,p;for(delete e.postProcess;-1!=n.indexOf(t.reusePrefix)&&(nt++,!(nt>t.maxRecursion));){var s=n.lastIndexOf(t.reusePrefix),a=n.indexOf(t.reuseSuffix,s)+t.reuseSuffix.length,v=n.substring(s,a),u=v.replace(t.reusePrefix,"").replace(t.reuseSuffix,"");if(s>=a)return i.error("there is an missing closing in following translation value",n),"";if(-1!=u.indexOf(c)&&(f=u.indexOf(c),-1!=u.indexOf(l,f)&&-1!=u.indexOf(o,f))){h=u.indexOf(l,f);y=u.indexOf(o,h)+o.length;try{e=i.extend(e,JSON.parse(u.substring(h,y)));u=u.substring(0,f)}catch(w){}}p=g(u,e);n=n.replace(v,i.regexReplacementEscape(p))}return n}function ei(n){return n.context&&("string"==typeof n.context||"number"==typeof n.context)}function st(n){return void 0!==n.count&&"string"!=typeof n.count}function oi(n){return void 0!==n.indefinite_article&&"string"!=typeof n.indefinite_article&&n.indefinite_article}function ht(n,t){t=t||{};var r=v(n,t),i=y(n,t);return void 0!==i||i===r}function o(n,t){return t=t||{},w?(nt=0,g.apply(null,arguments)):(i.log("i18next not finished initialization. you might have called t function before loading resources finished."),t.defaultValue||"")}function v(n,t){return void 0!==t.defaultValue?t.defaultValue:n}function si(){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);return{postProcess:"sprintf",sprintf:t}}function g(n,r){var u,c,e,b,k;if(r&&"object"!=typeof r?"sprintf"===t.shortcutFunction?r=si.apply(null,arguments):"defaultValue"===t.shortcutFunction&&(r={defaultValue:r}):r=r||{},"object"==typeof t.defaultVariables&&(r=i.extend({},t.defaultVariables,r)),void 0===n||null===n||""===n)return"";if("number"==typeof n&&(n=String(n)),"string"==typeof n&&(n=[n]),u=n[0],n.length>1)for(c=0;c<n.length&&(u=n[c],!ht(u,r));c++);var h,f=v(u,r),o=y(u,r),l=r.lng?i.toLanguages(r.lng,r.fallbackLng):p,w=r.ns||t.ns.defaultNs;return u.indexOf(t.nsseparator)>-1&&(h=u.split(t.nsseparator),w=h[0],u=h[1]),void 0===o&&t.sendMissing&&"function"==typeof t.missingKeyHandler&&(r.lng?t.missingKeyHandler(l[0],w,u,f,l):t.missingKeyHandler(t.lng,w,u,f,l)),e="string"==typeof t.postProcess&&""!==t.postProcess?[t.postProcess]:"array"==typeof t.postProcess||"object"==typeof t.postProcess?t.postProcess:[],"string"==typeof r.postProcess&&""!==r.postProcess?e=e.concat([r.postProcess]):("array"==typeof r.postProcess||"object"==typeof r.postProcess)&&(e=e.concat(r.postProcess)),void 0!==o&&e.length&&e.forEach(function(n){a[n]&&(o=a[n](o,u,r))}),b=f,(f.indexOf(t.nsseparator)>-1&&(h=f.split(t.nsseparator),b=h[1]),b===u&&t.parseMissingKey&&(f=t.parseMissingKey(f)),void 0===o&&(f=s(f,r),f=d(f,r),e.length))&&(k=v(u,r),e.forEach(function(n){a[n]&&(o=a[n](k,u,r))})),void 0!==o?o:f}function y(n,u){var c,a,tt,l,at,w,et,vt,k,it,ot,rt,yt,nt,lt,ft,wt,bt,kt;if((u=u||{},tt=v(n,u),l=p,!r)||"cimode"===l[0].toLowerCase())return tt;if((u.lngs&&(l=u.lngs),u.lng&&(l=i.toLanguages(u.lng,u.fallbackLng),!r[l[0]]))&&(at=t.getAsync,t.getAsync=!1,f.sync.load(l,t,function(n,u){i.extend(r,u);t.getAsync=at})),w=u.ns||t.ns.defaultNs,n.indexOf(t.nsseparator)>-1&&(et=n.split(t.nsseparator),w=et[0],n=et[1]),ei(u)&&(c=i.extend({},u),delete c.context,c.defaultValue=t.contextNotFound,vt=w+t.nsseparator+n+"_"+u.context,a=o(vt,c),a!=t.contextNotFound))return s(a,{context:u.context});if(st(u,l[0])){if(c=i.extend({lngs:[l[0]]},u),delete c.count,c._origLng=c._origLng||c.lng||l[0],delete c.lng,c.defaultValue=t.pluralNotFound,e.needsPlural(l[0],u.count)?(k=w+t.nsseparator+n+t.pluralSuffix,it=e.get(l[0],u.count),it>=0?k=k+"_"+it:1===it&&(k=w+t.nsseparator+n)):k=w+t.nsseparator+n,a=o(k,c),a!=t.pluralNotFound)return s(a,{count:u.count,interpolationPrefix:u.interpolationPrefix,interpolationSuffix:u.interpolationSuffix});if(!(l.length>1))return c.lng=c._origLng,delete c._origLng,a=o(w+t.nsseparator+n,c),s(a,{count:u.count,interpolationPrefix:u.interpolationPrefix,interpolationSuffix:u.interpolationSuffix});if(ot=l.slice(),ot.shift(),u=i.extend(u,{lngs:ot}),u._origLng=c._origLng,delete u.lng,a=o(w+t.nsseparator+n,u),a!=t.pluralNotFound)return a}if(oi(u)&&(rt=i.extend({},u),delete rt.indefinite_article,rt.defaultValue=t.indefiniteNotFound,yt=w+t.nsseparator+n+(u.count&&!st(u,l[0])||!u.count?t.indefiniteSuffix:""),a=o(yt,rt),a!=t.indefiniteNotFound))return a;for(var b,pt=n.split(t.keyseparator),ht=0,dt=l.length;dt>ht&&void 0===b;ht++){for(var ut=l[ht],ct=0,h=r[ut]&&r[ut][w];pt[ct];)h=h&&h[pt[ct]],ct++;void 0===h||t.showKeyIfEmpty&&""===h||(nt=Object.prototype.toString.apply(h),"string"==typeof h?(h=s(h,u),h=d(h,u)):"[object Array]"!==nt||t.returnObjectTrees||u.returnObjectTrees?null===h&&t.fallbackOnNull===!0?h=void 0:null!==h&&(t.returnObjectTrees||u.returnObjectTrees?"[object Number]"!==nt&&"[object Function]"!==nt&&"[object RegExp]"!==nt&&(lt="[object Array]"===nt?[]:{},i.each(h,function(i){lt[i]=g(w+t.nsseparator+n+t.keyseparator+i,u)}),h=lt):t.objectTreeKeyHandler&&"function"==typeof t.objectTreeKeyHandler?h=t.objectTreeKeyHandler(n,h,ut,w,u):(h="key '"+w+":"+n+" ("+ut+")' returned an object instead of string.",i.log(h))):(h=h.join("\n"),h=s(h,u),h=d(h,u)),"string"==typeof h&&""===h.trim()&&t.fallbackOnEmpty===!0&&(h=void 0),b=h)}if(void 0===b&&!u.isFallbackLookup&&(t.fallbackToDefaultNS===!0||t.fallbackNS&&t.fallbackNS.length>0)){if(u.isFallbackLookup=!0,t.fallbackNS.length){for(ft=0,wt=t.fallbackNS.length;wt>ft;ft++)if((b=y(t.fallbackNS[ft]+t.nsseparator+n,u),b||""===b&&t.fallbackOnEmpty===!1)&&(bt=b.indexOf(t.nsseparator)>-1?b.split(t.nsseparator)[1]:b,kt=tt.indexOf(t.nsseparator)>-1?tt.split(t.nsseparator)[1]:tt,bt!==kt))break}else u.ns=t.ns.defaultNs,b=y(n,u);u.isFallbackLookup=!1}return b}function hi(){var r,o=t.lngWhitelist||[],n=[],f,e,u;if(("undefined"!=typeof window&&!function(){for(var u,f,e=window.location.search.substring(1),r=e.split("&"),i=0;i<r.length;i++)u=r[i].indexOf("="),u>0&&(f=r[i].substring(0,u),f==t.detectLngQS&&n.push(r[i].substring(u+1)))}(),t.useCookie&&"undefined"!=typeof document)&&(f=i.cookie.read(t.cookieName),f&&n.push(f)),t.detectLngFromLocalStorage&&"undefined"!=typeof window&&window.localStorage&&(e=i.localStorage.getItem("i18next_lng"),e&&n.push(e)),"undefined"!=typeof navigator){if(navigator.languages)for(u=0;u<navigator.languages.length;u++)n.push(navigator.languages[u]);navigator.userLanguage&&n.push(navigator.userLanguage);navigator.language&&n.push(navigator.language)}return function(){for(var i,u,f=0;f<n.length;f++)if(i=n[f],i.indexOf("-")>-1&&(u=i.split("-"),i=t.lowerCaseLng?u[0].toLowerCase()+"-"+u[1].toLowerCase():u[0].toLowerCase()+"-"+u[1].toUpperCase()),0===o.length||o.indexOf(i)>-1){r=i;break}}(),r||(r=t.fallbackLng[0]),r}Array.prototype.indexOf||(Array.prototype.indexOf=function(n){"use strict";var u,r,t,i;if(null==this)throw new TypeError;if((u=Object(this),r=u.length>>>0,0===r)||(t=0,arguments.length>0&&(t=Number(arguments[1]),t!=t?t=0:0!=t&&t!=1/0&&t!=-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=r))return-1;for(i=t>=0?t:Math.max(r-Math.abs(t),0);r>i;i++)if(i in u&&u[i]===n)return i;return-1});Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(n){"use strict";var u,r,t,i;if(null==this)throw new TypeError;if(u=Object(this),r=u.length>>>0,0===r)return-1;for(t=r,arguments.length>1&&(t=Number(arguments[1]),t!=t?t=0:0!=t&&t!=1/0&&t!=-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),i=t>=0?Math.min(t,r-1):r-Math.abs(t);i>=0;i--)if(i in u&&u[i]===n)return i;return-1});"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var c,u=n.jQuery||n.Zepto,f={},r={},nt=0,p=[],w=!1,h={},tt=null;"undefined"!=typeof module&&module.exports?module.exports=f:(u&&(u.i18n=u.i18n||f),n.i18n&&(tt=n.i18n),n.i18n=f);h={load:function(n,t,r){t.useLocalStorage?h._loadLocal(n,t,function(u,f){for(var o=[],e=0,s=n.length;s>e;e++)f[n[e]]||o.push(n[e]);o.length>0?h._fetch(o,t,function(n,t){i.extend(f,t);h._storeLocal(t);r(n,f)}):r(u,f)}):h._fetch(n,t,function(n,t){r(n,t)})},_loadLocal:function(n,t,r){var f={},e=(new Date).getTime(),u;window.localStorage&&(u=n.length,i.each(n,function(n,o){var s=i.localStorage.getItem("res_"+o);s&&(s=JSON.parse(s),s.i18nStamp&&s.i18nStamp+t.localStorageExpirationTime>e&&(f[o]=s));u--;0===u&&r(null,f)}))},_storeLocal:function(n){if(window.localStorage)for(var t in n)n[t].i18nStamp=(new Date).getTime(),i.localStorage.setItem("res_"+t,JSON.stringify(n[t]))},_fetch:function(n,t,r){var u=t.ns,f={},e,o,c,l;t.dynamicLoad?(e=function(n,t){r(n,t)},"function"==typeof t.customLoad?t.customLoad(n,u.namespaces,t,e):(o=s(t.resGetPath,{lng:n.join("+"),ns:u.namespaces.join("+")}),i.ajax({url:o,cache:t.cache,success:function(n){i.log("loaded: "+o);e(null,n)},error:function(n,t,r){i.log("failed loading: "+o);e("failed loading resource.json error: "+r)},dataType:"json",async:t.getAsync,timeout:t.ajaxTimeout}))):(l=u.namespaces.length*n.length,i.each(u.namespaces,function(u,e){i.each(n,function(n,i){var u=function(n,t){n&&(c=c||[],c.push(n));f[i]=f[i]||{};f[i][e]=t;l--;0===l&&r(c,f)};"function"==typeof t.customLoad?t.customLoad(i,e,t,u):h._fetchOne(i,e,t,u)})}))},_fetchOne:function(n,t,r,u){var f=s(r.resGetPath,{lng:n,ns:t});i.ajax({url:f,cache:r.cache,success:function(n){i.log("loaded: "+f);u(null,n)},error:function(n,t,r){if(t&&200==t||n&&n.status&&200==n.status)i.error("There is a typo in: "+f);else if(t&&404==t||n&&n.status&&404==n.status)i.log("Does not exist: "+f);else{var e=t?t:n&&n.status?n.status:null;i.log(e+" when loading "+f)}u(r,{})},dataType:"json",async:r.getAsync,timeout:r.ajaxTimeout})},postMissing:function(n,u,f,e,o){var v={},c,h,y,a,p,l;if(v[f]=e,c=[],"fallback"===t.sendMissingTo&&t.fallbackLng[0]!==!1)for(h=0;h<t.fallbackLng.length;h++)c.push({lng:t.fallbackLng[h],url:s(t.resPostPath,{lng:t.fallbackLng[h],ns:u})});else if("current"===t.sendMissingTo||"fallback"===t.sendMissingTo&&t.fallbackLng[0]===!1)c.push({lng:n,url:s(t.resPostPath,{lng:n,ns:u})});else if("all"===t.sendMissingTo)for(h=0,y=o.length;y>h;h++)c.push({lng:o[h],url:s(t.resPostPath,{lng:o[h],ns:u})});for(a=0,p=c.length;p>a;a++)l=c[a],i.ajax({url:l.url,type:t.sendType,data:v,success:function(){i.log("posted missing key '"+f+"' to: "+l.url);for(var t=f.split("."),n=0,o=r[l.lng][u];t[n];)o=o[t[n]]=n===t.length-1?e:o[t[n]]||{},n++},error:function(){i.log("failed posting missing key '"+f+"' to: "+l.url)},dataType:"json",async:t.postAsync,timeout:t.ajaxTimeout})},reload:ui};var t={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:["dev"],fallbackNS:[],detectLngQS:"setLng",detectLngFromLocalStorage:!1,ns:{namespaces:["translation"],defaultNs:"translation"},fallbackOnNull:!0,fallbackOnEmpty:!1,fallbackToDefaultNS:!1,showKeyIfEmpty:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",defaultVariables:!1,reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),escapeInterpolation:!1,indefiniteSuffix:"_indefinite",indefiniteNotFound:["indefinite_not_found",Math.random()].join(""),setJqueryExt:!0,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"i18next",cookieDomain:void 0,objectTreeKeyHandler:void 0,postProcess:void 0,parseMissingKey:void 0,missingKeyHandler:h.postMissing,ajaxTimeout:0,shortcutFunction:"sprintf"},ci={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},li={create:function(n,t,i,r){var f,u;i?(u=new Date,u.setTime(u.getTime()+6e4*i),f="; expires="+u.toGMTString()):f="";r=r?"domain="+r+";":"";document.cookie=n+"="+t+f+";"+r+"path=/"},read:function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];" "==t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(r))return t.substring(r.length,t.length)}return null},remove:function(n){this.create(n,"",-1)}},ai={create:function(){},read:function(){return null},remove:function(){}},i={extend:u?u.extend:lt,deepExtend:it,each:u?u.each:at,ajax:u?u.ajax:"undefined"!=typeof document?yt:function(){},cookie:"undefined"!=typeof document?li:ai,detectLanguage:hi,escape:vt,log:function(n){t.debug&&"undefined"!=typeof console&&console.log(n)},error:function(n){"undefined"!=typeof console&&console.error(n)},getCountyIndexOfLng:function(n){var t=0;return("nb-NO"===n||"nn-NO"===n||"nb-no"===n||"nn-no"===n)&&(t=1),t},toLanguages:function(n,i){function u(n){var r=n,i;return"string"==typeof n&&n.indexOf("-")>-1?(i=n.split("-"),r=t.lowerCaseLng?i[0].toLowerCase()+"-"+i[1].toLowerCase():i[0].toLowerCase()+"-"+i[1].toUpperCase()):r=t.lowerCaseLng?n.toLowerCase():n,r}var h=this.log,s,r;i=i||t.fallbackLng;"string"==typeof i&&(i=[i]);var f=[],o=t.lngWhitelist||!1,e=function(n){!o||o.indexOf(n)>-1?f.push(n):h("rejecting non-whitelisted language: "+n)};for("string"==typeof n&&n.indexOf("-")>-1?(s=n.split("-"),"unspecific"!==t.load&&e(u(n)),"current"!==t.load&&e(u(s[this.getCountyIndexOfLng(n)]))):e(u(n)),r=0;r<i.length;r++)-1===f.indexOf(i[r])&&i[r]&&f.push(u(i[r]));return f},regexEscape:function(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},regexReplacementEscape:function(n){return"string"==typeof n?n.replace(/\$/g,"$$$$"):n},localStorage:{setItem:function(n,t){if(window.localStorage)try{window.localStorage.setItem(n,t)}catch(r){i.log('failed to set value for key "'+n+'" to localStorage.')}},getItem:function(n,t){if(window.localStorage)try{return window.localStorage.getItem(n,t)}catch(r){return void i.log('failed to get value for key "'+n+'" from localStorage.')}}}};i.applyReplacement=s;var l=[["ach","Acholi",[1,2],1],["af","Afrikaans",[1,2],2],["ak","Akan",[1,2],1],["am","Amharic",[1,2],1],["an","Aragonese",[1,2],2],["ar","Arabic",[0,1,2,3,11,100],5],["arn","Mapudungun",[1,2],1],["ast","Asturian",[1,2],2],["ay","Aymará",[1],3],["az","Azerbaijani",[1,2],2],["be","Belarusian",[1,2,5],4],["bg","Bulgarian",[1,2],2],["bn","Bengali",[1,2],2],["bo","Tibetan",[1],3],["br","Breton",[1,2],1],["bs","Bosnian",[1,2,5],4],["ca","Catalan",[1,2],2],["cgg","Chiga",[1],3],["cs","Czech",[1,2,5],6],["csb","Kashubian",[1,2,5],7],["cy","Welsh",[1,2,3,8],8],["da","Danish",[1,2],2],["de","German",[1,2],2],["dev","Development Fallback",[1,2],2],["dz","Dzongkha",[1],3],["el","Greek",[1,2],2],["en","English",[1,2],2],["eo","Esperanto",[1,2],2],["es","Spanish",[1,2],2],["es_ar","Argentinean Spanish",[1,2],2],["et","Estonian",[1,2],2],["eu","Basque",[1,2],2],["fa","Persian",[1],3],["fi","Finnish",[1,2],2],["fil","Filipino",[1,2],1],["fo","Faroese",[1,2],2],["fr","French",[1,2],9],["fur","Friulian",[1,2],2],["fy","Frisian",[1,2],2],["ga","Irish",[1,2,3,7,11],10],["gd","Scottish Gaelic",[1,2,3,20],11],["gl","Galician",[1,2],2],["gu","Gujarati",[1,2],2],["gun","Gun",[1,2],1],["ha","Hausa",[1,2],2],["he","Hebrew",[1,2],2],["hi","Hindi",[1,2],2],["hr","Croatian",[1,2,5],4],["hu","Hungarian",[1,2],2],["hy","Armenian",[1,2],2],["ia","Interlingua",[1,2],2],["id","Indonesian",[1],3],["is","Icelandic",[1,2],12],["it","Italian",[1,2],2],["ja","Japanese",[1],3],["jbo","Lojban",[1],3],["jv","Javanese",[0,1],13],["ka","Georgian",[1],3],["kk","Kazakh",[1],3],["km","Khmer",[1],3],["kn","Kannada",[1,2],2],["ko","Korean",[1],3],["ku","Kurdish",[1,2],2],["kw","Cornish",[1,2,3,4],14],["ky","Kyrgyz",[1],3],["lb","Letzeburgesch",[1,2],2],["ln","Lingala",[1,2],1],["lo","Lao",[1],3],["lt","Lithuanian",[1,2,10],15],["lv","Latvian",[1,2,0],16],["mai","Maithili",[1,2],2],["mfe","Mauritian Creole",[1,2],1],["mg","Malagasy",[1,2],1],["mi","Maori",[1,2],1],["mk","Macedonian",[1,2],17],["ml","Malayalam",[1,2],2],["mn","Mongolian",[1,2],2],["mnk","Mandinka",[0,1,2],18],["mr","Marathi",[1,2],2],["ms","Malay",[1],3],["mt","Maltese",[1,2,11,20],19],["nah","Nahuatl",[1,2],2],["nap","Neapolitan",[1,2],2],["nb","Norwegian Bokmal",[1,2],2],["ne","Nepali",[1,2],2],["nl","Dutch",[1,2],2],["nn","Norwegian Nynorsk",[1,2],2],["no","Norwegian",[1,2],2],["nso","Northern Sotho",[1,2],2],["oc","Occitan",[1,2],1],["or","Oriya",[2,1],2],["pa","Punjabi",[1,2],2],["pap","Papiamento",[1,2],2],["pl","Polish",[1,2,5],7],["pms","Piemontese",[1,2],2],["ps","Pashto",[1,2],2],["pt","Portuguese",[1,2],2],["pt_br","Brazilian Portuguese",[1,2],2],["rm","Romansh",[1,2],2],["ro","Romanian",[1,2,20],20],["ru","Russian",[1,2,5],4],["sah","Yakut",[1],3],["sco","Scots",[1,2],2],["se","Northern Sami",[1,2],2],["si","Sinhala",[1,2],2],["sk","Slovak",[1,2,5],6],["sl","Slovenian",[5,1,2,3],21],["so","Somali",[1,2],2],["son","Songhay",[1,2],2],["sq","Albanian",[1,2],2],["sr","Serbian",[1,2,5],4],["su","Sundanese",[1],3],["sv","Swedish",[1,2],2],["sw","Swahili",[1,2],2],["ta","Tamil",[1,2],2],["te","Telugu",[1,2],2],["tg","Tajik",[1,2],1],["th","Thai",[1],3],["ti","Tigrinya",[1,2],1],["tk","Turkmen",[1,2],2],["tr","Turkish",[1,2],1],["tt","Tatar",[1],3],["ug","Uyghur",[1],3],["uk","Ukrainian",[1,2,5],4],["ur","Urdu",[1,2],2],["uz","Uzbek",[1,2],1],["vi","Vietnamese",[1],3],["wa","Walloon",[1,2],1],["wo","Wolof",[1],3],["yo","Yoruba",[1,2],2],["zh","Chinese",[1],3]],vi={1:function(n){return Number(n>1)},2:function(n){return Number(1!=n)},3:function(){return 0},4:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&4>=n%10&&(10>n%100||n%100>=20)?1:2)},5:function(n){return Number(0===n?0:1==n?1:2==n?2:n%100>=3&&10>=n%100?3:n%100>=11?4:5)},6:function(n){return Number(1==n?0:n>=2&&4>=n?1:2)},7:function(n){return Number(1==n?0:n%10>=2&&4>=n%10&&(10>n%100||n%100>=20)?1:2)},8:function(n){return Number(1==n?0:2==n?1:8!=n&&11!=n?2:3)},9:function(n){return Number(n>=2)},10:function(n){return Number(1==n?0:2==n?1:7>n?2:11>n?3:4)},11:function(n){return Number(1==n||11==n?0:2==n||12==n?1:n>2&&20>n?2:3)},12:function(n){return Number(n%10!=1||n%100==11)},13:function(n){return Number(0!==n)},14:function(n){return Number(1==n?0:2==n?1:3==n?2:3)},15:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&(10>n%100||n%100>=20)?1:2)},16:function(n){return Number(n%10==1&&n%100!=11?0:0!==n?1:2)},17:function(n){return Number(1==n||n%10==1?0:1)},18:function(n){return Number(1==n?1:2)},19:function(n){return Number(1==n?0:0===n||n%100>1&&11>n%100?1:n%100>10&&20>n%100?2:3)},20:function(n){return Number(1==n?0:0===n||n%100>0&&20>n%100?1:2)},21:function(n){return Number(n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0)}},e={rules:function(){for(var t={},n=l.length;n--;)t[l[n][0]]={name:l[n][1],numbers:l[n][2],plurals:vi[l[n][3]]};return t}(),addRule:function(n,t){e.rules[n]=t},setCurrentLng:function(n){if(!e.currentRule||e.currentRule.lng!==n){var t=n.split("-");e.currentRule={lng:n,rule:e.rules[t[0]]}}},needsPlural:function(n,t){var r,u=n.split("-");return r=e.currentRule&&e.currentRule.lng===n?e.currentRule.rule:e.rules[u[i.getCountyIndexOfLng(n)]],r&&r.numbers.length<=1?!1:1!==this.get(n,t)},get:function(n,t){function r(t,i){var r,f,u;return(r=e.currentRule&&e.currentRule.lng===n?e.currentRule.rule:e.rules[t])?(f=r.plurals(r.noAbs?i:Math.abs(i)),u=r.numbers[f],2===r.numbers.length&&1===r.numbers[0]&&(2===u?u=-1:1===u&&(u=1)),u):1===i?"1":"-1"}var u=n.split("-");return r(u[i.getCountyIndexOfLng(n)],t)}},a={},ct=function(n,t){a[n]=t},b=function(){function t(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}function i(n,t){for(var i=[];t>0;i[--t]=n);return i.join("")}var n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,r){for(var u,o,f,s,l,a,v=1,y=n.length,h="",c=[],e=0;y>e;e++)if(h=t(n[e]),"string"===h)c.push(n[e]);else if("array"===h){if(f=n[e],f[2])for(u=r[v],o=0;o<f[2].length;o++){if(!u.hasOwnProperty(f[2][o]))throw b('[sprintf] property "%s" does not exist',f[2][o]);u=u[f[2][o]]}else u=f[1]?r[f[1]]:r[v++];if(/[^s]/.test(f[8])&&"number"!=t(u))throw b("[sprintf] expecting number but found %s",t(u));switch(f[8]){case"b":u=u.toString(2);break;case"c":u=String.fromCharCode(u);break;case"d":u=parseInt(u,10);break;case"e":u=f[7]?u.toExponential(f[7]):u.toExponential();break;case"f":u=f[7]?parseFloat(u).toFixed(f[7]):parseFloat(u);break;case"o":u=u.toString(8);break;case"s":u=(u=String(u))&&f[7]?u.substring(0,f[7]):u;break;case"u":u=Math.abs(u);break;case"x":u=u.toString(16);break;case"X":u=u.toString(16).toUpperCase()}u=/[def]/.test(f[8])&&f[3]&&u>=0?"+"+u:u;l=f[4]?"0"==f[4]?"0":f[4].charAt(1):" ";a=f[6]-String(u).length;s=f[6]?i(l,a):"";c.push(f[5]?u+s:s+u)}return c.join("")},n.cache={},n.parse=function(n){for(var r=n,t=[],f=[],o=0;r;){if(null!==(t=/^[^\x25]+/.exec(r)))f.push(t[0]);else if(null!==(t=/^\x25{2}/.exec(r)))f.push("%");else{if(null===(t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(r)))throw"[sprintf] huh?";if(t[2]){o|=1;var e=[],u=t[2],i=[];if(null===(i=/^([a-z_][a-z_\d]*)/i.exec(u)))throw"[sprintf] huh?";for(e.push(i[1]);""!==(u=u.substring(i[0].length));)if(null!==(i=/^\.([a-z_][a-z_\d]*)/i.exec(u)))e.push(i[1]);else{if(null===(i=/^\[(\d+)\]/.exec(u)))throw"[sprintf] huh?";e.push(i[1])}t[2]=e}else o|=2;if(3===o)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";f.push(t)}r=r.substring(t[0].length)}return f},n}(),yi=function(n,t){return t.unshift(n),b.apply(null,t)};ct("sprintf",function(n,t,i){return i.sprintf?"[object Array]"===Object.prototype.toString.apply(i.sprintf)?yi(n,i.sprintf):"object"==typeof i.sprintf?b(n,i.sprintf):n:n});f.init=k;f.isInitialized=pt;f.setLng=ft;f.preload=wt;f.addResourceBundle=bt;f.hasResourceBundle=kt;f.getResourceBundle=dt;f.addResource=rt;f.addResources=ni;f.removeResourceBundle=gt;f.loadNamespace=ii;f.loadNamespaces=ut;f.setDefaultNamespace=ti;f.t=o;f.translate=o;f.exists=ht;f.detectLanguage=i.detectLanguage;f.pluralExtensions=e;f.sync=h;f.functions=i;f.lng=ri;f.addPostProcessor=ct;f.applyReplacement=i.applyReplacement;f.options=t;f.noConflict=fi}("undefined"==typeof exports?window:exports);

(function(n,t,i){function u(n,i){this.wrapper=typeof n=="string"?t.querySelector(n):n;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var u in i)this.options[u]=i[u];this.translateZ=this.options.HWCompositing&&r.hasPerspective?" translateZ(0)":"";this.options.useTransition=r.hasTransition&&this.options.useTransition;this.options.useTransform=r.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=="vertical"?!1:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=="horizontal"?!1:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=="string"?r.ease[this.options.bounceEasing]||r.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;this.options.tap===!0&&(this.options.tap="tap");this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}var f=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(t){n.setTimeout(t,1e3/60)},r=function(){function u(n){return e===!1?!1:e===""?n:e+n.charAt(0).toUpperCase()+n.substr(1)}var r={},f=t.createElement("div").style,e=function(){for(var t=["t","webkitT","MozT","msT","OT"],i,n=0,r=t.length;n<r;n++)if(i=t[n]+"ransform",i in f)return t[n].substr(0,t[n].length-1);return!1}(),o;return r.getTime=Date.now||function(){return(new Date).getTime()},r.extend=function(n,t){for(var i in t)n[i]=t[i]},r.addEvent=function(n,t,i,r){n.addEventListener(t,i,!!r)},r.removeEvent=function(n,t,i,r){n.removeEventListener(t,i,!!r)},r.prefixPointerEvent=function(t){return n.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t},r.momentum=function(n,t,r,u,f,e){var h=n-t,s=i.abs(h)/r,o,c;return e=e===undefined?.0006:e,o=n+s*s/(2*e)*(h<0?-1:1),c=s/e,o<u?(o=f?u-f/2.5*(s/8):u,h=i.abs(o-n),c=h/s):o>0&&(o=f?f/2.5*(s/8):0,h=i.abs(n)+o,c=h/s),{destination:i.round(o),duration:c}},o=u("transform"),r.extend(r,{hasTransform:o!==!1,hasPerspective:u("perspective")in f,hasTouch:"ontouchstart"in n,hasPointer:n.PointerEvent||n.MSPointerEvent,hasTransition:u("transition")in f}),r.isBadAndroid=/Android /.test(n.navigator.appVersion)&&!/Chrome\/\d/.test(n.navigator.appVersion),r.extend(r.style={},{transform:o,transitionTimingFunction:u("transitionTimingFunction"),transitionDuration:u("transitionDuration"),transitionDelay:u("transitionDelay"),transformOrigin:u("transformOrigin")}),r.hasClass=function(n,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)");return i.test(n.className)},r.addClass=function(n,t){if(!r.hasClass(n,t)){var i=n.className.split(" ");i.push(t);n.className=i.join(" ")}},r.removeClass=function(n,t){if(r.hasClass(n,t)){var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");n.className=n.className.replace(i," ")}},r.offset=function(n){for(var t=-n.offsetLeft,i=-n.offsetTop;n=n.offsetParent;)t-=n.offsetLeft,i-=n.offsetTop;return{left:t,top:i}},r.preventDefaultException=function(n,t){for(var i in t)if(t[i].test(n[i]))return!0;return!1},r.extend(r.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),r.extend(r.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(n){return n*(2-n)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(n){return i.sqrt(1- --n*n)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(n){var t=4;return(n=n-1)*n*((t+1)*n+t)+1}},bounce:{style:"",fn:function(n){return(n/=1)<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}},elastic:{style:"",fn:function(n){var t=.22;return n===0?0:n==1?1:.4*i.pow(2,-10*n)*i.sin((n-t/4)*2*i.PI/t)+1}}}),r.tap=function(n,i){var r=t.createEvent("Event");r.initEvent(i,!0,!0);r.pageX=n.pageX;r.pageY=n.pageY;n.target.dispatchEvent(r)},r.click=function(n){var i=n.target,r;/(SELECT|INPUT|TEXTAREA)/i.test(i.tagName)||(r=t.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,n.view,1,i.screenX,i.screenY,i.clientX,i.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,null),r._constructed=!0,i.dispatchEvent(r))},r}();u.prototype={version:"5.1.3",_init:function(){this._initEvents()},destroy:function(){this._initEvents(!0);this._execEvent("destroy")},_transitionEnd:function(n){n.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(n){if((r.eventType[n.type]==1||n.button===0)&&this.enabled&&(!this.initiated||r.eventType[n.type]===this.initiated)){!this.options.preventDefault||r.isBadAndroid||r.preventDefaultException(n.target,this.options.preventDefaultException)||n.preventDefault();var u=n.touches?n.touches[0]:n,t;this.initiated=r.eventType[n.type];this.moved=!1;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.startTime=r.getTime();this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd"));this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=u.pageX;this.pointY=u.pageY;this._execEvent("beforeScrollStart")}},_move:function(n){if(this.enabled&&r.eventType[n.type]===this.initiated){this.options.preventDefault&&n.preventDefault();var o=n.touches?n.touches[0]:n,t=o.pageX-this.pointX,u=o.pageY-this.pointY,c=r.getTime(),f,e,s,h;if(this.pointX=o.pageX,this.pointY=o.pageY,this.distX+=t,this.distY+=u,s=i.abs(this.distX),h=i.abs(this.distY),!(c-this.endTime>300)||!(s<10)||!(h<10)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=s>h+this.options.directionLockThreshold?"h":h>=s+this.options.directionLockThreshold?"v":"n"),this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical")n.preventDefault();else if(this.options.eventPassthrough=="horizontal"){this.initiated=!1;return}u=0}else if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal")n.preventDefault();else if(this.options.eventPassthrough=="vertical"){this.initiated=!1;return}t=0}t=this.hasHorizontalScroll?t:0;u=this.hasVerticalScroll?u:0;f=this.x+t;e=this.y+u;(f>0||f<this.maxScrollX)&&(f=this.options.bounce?this.x+t/3:f>0?0:this.maxScrollX);(e>0||e<this.maxScrollY)&&(e=this.options.bounce?this.y+u/3:e>0?0:this.maxScrollY);this.directionX=t>0?-1:t<0?1:0;this.directionY=u>0?-1:u<0?1:0;this.moved||this._execEvent("scrollStart");this.moved=!0;this._translate(f,e);c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y)}}},_end:function(n){if(this.enabled&&r.eventType[n.type]===this.initiated){this.options.preventDefault&&!r.preventDefaultException(n.target,this.options.preventDefaultException)&&n.preventDefault();var a=n.changedTouches?n.changedTouches[0]:n,e,o,f=r.getTime()-this.startTime,t=i.round(this.x),u=i.round(this.y),c=i.abs(t-this.startX),l=i.abs(u-this.startY),s=0,h="";if(this.isInTransition=0,this.initiated=0,this.endTime=r.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(t,u),!this.moved){this.options.tap&&r.tap(n,this.options.tap);this.options.click&&r.click(n);this._execEvent("scrollCancel");return}if(this._events.flick&&f<200&&c<100&&l<100){this._execEvent("flick");return}if(this.options.momentum&&f<300&&(e=this.hasHorizontalScroll?r.momentum(this.x,this.startX,f,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:t,duration:0},o=this.hasVerticalScroll?r.momentum(this.y,this.startY,f,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:u,duration:0},t=e.destination,u=o.destination,s=i.max(e.duration,o.duration),this.isInTransition=1),t!=this.x||u!=this.y){(t>0||t<this.maxScrollX||u>0||u<this.maxScrollY)&&(h=r.ease.quadratic);this.scrollTo(t,u,s,h);return}this._execEvent("scrollEnd")}}},_resize:function(){var n=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){n.refresh()},this.options.resizePolling)},resetPosition:function(n){var t=this.x,i=this.y;return(n=n||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),t==this.x&&i==this.y)?!1:(this.scrollTo(t,i,n,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){var n=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth);this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight);this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=r.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(n,t){this._events[n]||(this._events[n]=[]);this._events[n].push(t)},off:function(n,t){if(this._events[n]){var i=this._events[n].indexOf(t);i>-1&&this._events[n].splice(i,1)}},_execEvent:function(n){if(this._events[n]){var t=0,i=this._events[n].length;if(i)for(;t<i;t++)this._events[n][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(n,t,i,r){n=this.x+n;t=this.y+t;i=i||0;this.scrollTo(n,t,i,r)},scrollTo:function(n,t,i,u){u=u||r.ease.circular;this.isInTransition=this.options.useTransition&&i>0;!i||this.options.useTransition&&u.style?(this._transitionTimingFunction(u.style),this._transitionTime(i),this._translate(n,t)):this._animate(n,t,i,u.fn)},scrollToElement:function(n,t,u,f,e){if(n=n.nodeType?n:this.scroller.querySelector(n),n){var o=r.offset(n);o.left-=this.wrapperOffset.left;o.top-=this.wrapperOffset.top;u===!0&&(u=i.round(n.offsetWidth/2-this.wrapper.offsetWidth/2));f===!0&&(f=i.round(n.offsetHeight/2-this.wrapper.offsetHeight/2));o.left-=u||0;o.top-=f||0;o.left=o.left>0?0:o.left<this.maxScrollX?this.maxScrollX:o.left;o.top=o.top>0?0:o.top<this.maxScrollY?this.maxScrollY:o.top;t=t===undefined||t===null||t==="auto"?i.max(i.abs(this.x-o.left),i.abs(this.y-o.top)):t;this.scrollTo(o.left,o.top,t,e)}},_transitionTime:function(n){n=n||0;this.scrollerStyle[r.style.transitionDuration]=n+"ms";!n&&r.isBadAndroid&&(this.scrollerStyle[r.style.transitionDuration]="0.001s")},_transitionTimingFunction:function(n){this.scrollerStyle[r.style.transitionTimingFunction]=n},_translate:function(n,t){this.options.useTransform?this.scrollerStyle[r.style.transform]="translate("+n+"px,"+t+"px)"+this.translateZ:(n=i.round(n),t=i.round(t),this.scrollerStyle.left=n+"px",this.scrollerStyle.top=t+"px");this.x=n;this.y=t},_initEvents:function(t){var i=t?r.removeEvent:r.addEvent,u=this.options.bindToWrapper?this.wrapper:n;i(n,"orientationchange",this);i(n,"resize",this);this.options.click&&i(this.wrapper,"click",this,!0);this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(u,"mousemove",this),i(u,"mousecancel",this),i(u,"mouseup",this));r.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,r.prefixPointerEvent("pointerdown"),this),i(u,r.prefixPointerEvent("pointermove"),this),i(u,r.prefixPointerEvent("pointercancel"),this),i(u,r.prefixPointerEvent("pointerup"),this));r.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(u,"touchmove",this),i(u,"touchcancel",this),i(u,"touchend",this));i(this.scroller,"transitionend",this);i(this.scroller,"webkitTransitionEnd",this);i(this.scroller,"oTransitionEnd",this);i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t=n.getComputedStyle(this.scroller,null),i,u;return this.options.useTransform?(t=t[r.style.transform].split(")")[0].split(", "),i=+(t[12]||t[4]),u=+(t[13]||t[5])):(i=+t.left.replace(/[^-\d.]/g,""),u=+t.top.replace(/[^-\d.]/g,"")),{x:i,y:u}},_animate:function(n,t,i,u){function c(){var a=r.getTime(),y,p,v;if(a>=l){e.isAnimating=!1;e._translate(n,t);e.resetPosition(e.options.bounceTime)||e._execEvent("scrollEnd");return}a=(a-h)/i;v=u(a);y=(n-o)*v+o;p=(t-s)*v+s;e._translate(y,p);e.isAnimating&&f(c)}var e=this,o=this.x,s=this.y,h=r.getTime(),l=h+i;this.isAnimating=!0;c()},handleEvent:function(n){switch(n.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(n);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(n);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(n);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(n);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(n);break;case"keydown":this._key(n);break;case"click":n._constructed||(n.preventDefault(),n.stopPropagation())}}};u.utils=r;typeof module!="undefined"&&module.exports?module.exports=u:n.IScroll=u})(window,document,Math);

!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?n(require("jquery")):n(jQuery)}(function(n){function i(n){return t.raw?n:encodeURIComponent(n)}function u(n){return t.raw?n:decodeURIComponent(n)}function f(n){return i(t.json?JSON.stringify(n):String(n))}function e(n){0===n.indexOf('"')&&(n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return n=decodeURIComponent(n.replace(o," ")),t.json?JSON.parse(n):n}catch(i){}}function r(i,r){var u=t.raw?i:e(i);return n.isFunction(r)?r(u):u}var o=/\+/g,t=n.cookie=function(e,o,s){var v,c;if(void 0!==o&&!n.isFunction(o))return(s=n.extend({},t.defaults,s),"number"==typeof s.expires)&&(v=s.expires,c=s.expires=new Date,c.setTime(+c+864e5*v)),document.cookie=[i(e),"=",f(o),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("");for(var l=e?void 0:{},y=document.cookie?document.cookie.split("; "):[],a=0,b=y.length;b>a;a++){var p=y[a].split("="),w=u(p.shift()),h=p.join("=");if(e&&e===w){l=r(h,o);break}e||void 0===(h=r(h))||(l[w]=h)}return l};t.defaults={};n.removeCookie=function(t,i){return void 0===n.cookie(t)?!1:(n.cookie(t,"",n.extend({},i,{expires:-1})),!n.cookie(t))}});!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n("object"==typeof module&&module.exports?require("jquery"):jQuery)}(function(n){function v(t){var i={},r=/^jQuery\d+$/;return n.each(t.attributes,function(n,t){t.specified&&!r.test(t.name)&&(i[t.name]=t.value)}),i}function i(i,r){var e=this,u=n(this);if(e.value===u.attr(f?"placeholder-x":"placeholder")&&u.hasClass(t.customClass))if(e.value="",u.removeClass(t.customClass),u.data("placeholder-password")){if(u=u.hide().nextAll('input[type="password"]:first').show().attr("id",u.removeAttr("id").data("placeholder-id")),i===!0)return u[0].value=r,r;u.focus()}else e==h()&&e.select()}function e(r){var e,o=this,u=n(this),h=o.id,s;if(!r||"blur"!==r.type||!u.hasClass(t.customClass))if(""===o.value){if("password"===o.type){if(!u.data("placeholder-textinput")){try{e=u.clone().prop({type:"text"})}catch(c){e=n("<input>").attr(n.extend(v(this),{type:"text"}))}e.removeAttr("data-bind").removeAttr("name").data({"placeholder-enabled":!0,"placeholder-password":u,"placeholder-id":h}).bind("focus.placeholder",i);u.data({"placeholder-textinput":e,"placeholder-id":h}).before(e)}o.value="";u=u.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",u.data("placeholder-id")).show()}else s=u.data("placeholder-password"),s&&(s[0].value="",u.attr("id",u.data("placeholder-id")).show().nextAll('input[type="password"]:last').hide().removeAttr("id"));u.addClass(t.customClass);u[0].value=u.attr(f?"placeholder-x":"placeholder")}else u.removeClass(t.customClass)}function h(){try{return document.activeElement}catch(n){}}var u,r,f=!1,c="[object OperaMini]"===Object.prototype.toString.call(window.operamini),o="placeholder"in document.createElement("input")&&!c&&!f,s="placeholder"in document.createElement("textarea")&&!c&&!f,l=n.valHooks,a=n.propHooks,t={};o&&s?(r=n.fn.placeholder=function(){return this},r.input=!0,r.textarea=!0):(r=n.fn.placeholder=function(r){return t=n.extend({},{customClass:"placeholder"},r),this.filter((o?"textarea":":input")+"["+(f?"placeholder-x":"placeholder")+"]").not("."+t.customClass).not(":radio, :checkbox, :hidden").bind({"focus.placeholder":i,"blur.placeholder":e,"change.placeholder":e}).data("placeholder-enabled",!0).trigger("blur.placeholder")},r.input=o,r.textarea=s,u={get:function(i){var r=n(i),u=r.data("placeholder-password");return u?u[0].value:r.data("placeholder-enabled")&&r.hasClass(t.customClass)?"":i.value},set:function(r,u){var o,s,f=n(r);return""!==u&&(o=f.data("placeholder-textinput"),s=f.data("placeholder-password"),o?(i.call(o[0],!0,u)||(r.value=u),o[0].value=u):s&&(i.call(r,!0,u)||(s[0].value=u),r.value=u)),f.data("placeholder-enabled")?(""===u?(r.value=u,r!=h()&&e.call(r)):(f.hasClass(t.customClass)&&i.call(r),r.value=u),f):(r.value=u,f)}},o||(l.input=u,a.value=u),s||(l.textarea=u,a.value=u),n(function(){n(document).delegate("form","submit.placeholder",function(){var r=n("."+t.customClass,this).each(function(){i.call(this,!0,"")});setTimeout(function(){r.each(e)},10)})}),n(window).bind("beforeunload.placeholder",function(){var i=!0;try{"javascript:void(0)"===document.activeElement.toString()&&(i=!1)}catch(r){}i&&n("."+t.customClass).each(function(){this.value=""})}))}),function(n){if(typeof define=="function"&&define.amd)define(n);else if(typeof exports=="object")module.exports=n();else{var i=window.Cookies,t=window.Cookies=n();t.noConflict=function(){return window.Cookies=i,t}}}(function(){function n(){for(var n=0,r={},t,i;n<arguments.length;n++){t=arguments[n];for(i in t)r[i]=t[i]}return r}function t(i){function r(t,u,f){var o,s;if(arguments.length>1){f=n({path:"/"},r.defaults,f);typeof f.expires=="number"&&(s=new Date,s.setMilliseconds(s.getMilliseconds()+f.expires*864e5),f.expires=s);try{o=JSON.stringify(u);/^[\{\[]/.test(o)&&(u=o)}catch(y){}return u=i.write?i.write(u,t):encodeURIComponent(String(u)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",u,f.expires&&"; expires="+f.expires.toUTCString(),f.path&&"; path="+f.path,f.domain&&"; domain="+f.domain,f.secure?"; secure":""].join("")}t||(o={});for(var l=document.cookie?document.cookie.split("; "):[],a=/(%[0-9A-Z]{2})+/g,c=0;c<l.length;c++){var v=l[c].split("="),h=v[0].replace(a,decodeURIComponent),e=v.slice(1).join("=");e.charAt(0)==='"'&&(e=e.slice(1,-1));try{if(e=i.read?i.read(e,h):i(e,h)||e.replace(a,decodeURIComponent),this.json)try{e=JSON.parse(e)}catch(y){}if(t===h){o=e;break}t||(o[h]=e)}catch(y){}}return o}return r.get=r.set=r,r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,i){r(t,"",n(i,{expires:-1}))},r.withConverter=t,r}return t(function(){})});!function(n){var i=[],r={},e="routie",h=n[e],u=function(n,t){this.name=t;this.path=n;this.keys=[];this.fns=[];this.params={};this.regex=c(this.path,this.keys,!1,!1)};u.prototype.addHandler=function(n){this.fns.push(n)};u.prototype.removeHandler=function(n){for(var r,t=0,i=this.fns.length;i>t;t++)if(r=this.fns[t],n==r)return void this.fns.splice(t,1)};u.prototype.run=function(n){for(var t=0,i=this.fns.length;i>t;t++)this.fns[t].apply(this,n)};u.prototype.match=function(n,t){var r=this.regex.exec(n),i,e,u,f;if(!r)return!1;for(i=1,e=r.length;e>i;++i)u=this.keys[i-1],f="string"==typeof r[i]?decodeURIComponent(r[i]):r[i],u&&(this.params[u.name]=f),t.push(f);return!0};u.prototype.toURL=function(n){var t=this.path;for(var i in n)t=t.replace("/:"+i,"/"+n[i]);if(t=t.replace(/\/:.*\?/g,"/").replace(/\?/g,""),-1!=t.indexOf(":"))throw new Error("missing parameters for url: "+t);return t};var c=function(n,t,i,r){return n instanceof RegExp?n:(n instanceof Array&&(n="("+n.join("|")+")"),n=n.concat(r?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(n,i,r,u,f,e){return t.push({name:u,optional:!!e}),i=i||"",""+(e?"":i)+"(?:"+(e?i:"")+(r||"")+(f||r&&"([^/.]+?)"||"([^/]+?)")+")"+(e||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+n+"$",i?"":"i"))},o=function(n,t){var f=n.split(" "),e=2==f.length?f[0]:null;n=2==f.length?f[1]:f[0];r[n]||(r[n]=new u(n,e),i.push(r[n]));r[n].addHandler(t)},t=function(n,i){if("function"==typeof i)o(n,i),t.reload();else if("object"==typeof n){for(var r in n)o(r,n[r]);t.reload()}else"undefined"==typeof i&&t.navigate(n)};t.lookup=function(n,t){for(var u,r=0,f=i.length;f>r;r++)if(u=i[r],u.name==n)return u.toURL(t)};t.remove=function(n,t){var i=r[n];i&&i.removeHandler(t)};t.removeAll=function(){r={};i=[]};t.navigate=function(n,t){t=t||{};var i=t.silent||!1;i&&v();setTimeout(function(){window.location.hash=n;i&&setTimeout(function(){s()},1)},1)};t.noConflict=function(){return n[e]=h,t};var l=function(){return window.location.hash.substring(1)},a=function(n,t){var i=[];return t.match(n,i)?(t.run(i),!0):!1},f=t.reload=function(){for(var t,r=l(),n=0,u=i.length;u>n;n++)if(t=i[n],a(r,t))return},s=function(){n.addEventListener?n.addEventListener("hashchange",f,!1):n.attachEvent("onhashchange",f)},v=function(){n.removeEventListener?n.removeEventListener("hashchange",f):n.detachEvent("onhashchange",f)};s();n[e]=t}(window);!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){if(e.support.cors||!e.ajaxTransport||!window.XDomainRequest)return e;var t=/^(https?:)?\/\//i,o=/^get|post$/i,n=new RegExp("^(//|"+location.protocol+")","i");return e.ajaxTransport("* text html xml json",function(r,s,a){if(r.crossDomain&&r.async&&o.test(r.type)&&t.test(r.url)&&n.test(r.url)){var i=null;return{send:function(t,o){var n="",a=(s.dataType||"").toLowerCase();i=new XDomainRequest,/^\d+$/.test(s.timeout)&&(i.timeout=s.timeout),i.ontimeout=function(){o(500,"timeout")},i.onload=function(){var t="Content-Length: "+i.responseText.length+"\r\nContent-Type: "+i.contentType,n={code:200,message:"success"},r={text:i.responseText};try{if("html"===a||/text\/html/i.test(i.contentType))r.html=i.responseText;else if("json"===a||"text"!==a&&/\/json/i.test(i.contentType))try{r.json=e.parseJSON(i.responseText)}catch(s){n.code=500,n.message="parseerror"}else if("xml"===a||"text"!==a&&/\/xml/i.test(i.contentType)){var c=new ActiveXObject("Microsoft.XMLDOM");c.async=!1;try{c.loadXML(i.responseText)}catch(s){c=void 0}if(!c||!c.documentElement||c.getElementsByTagName("parsererror").length)throw n.code=500,n.message="parseerror","Invalid XML: "+i.responseText;r.xml=c}}catch(p){throw p}finally{o(n.code,n.message,r,t)}},i.onprogress=function(){},i.onerror=function(){o(500,"error",{text:i.responseText})},s.data&&(n="string"===e.type(s.data)?s.data:e.param(s.data)),i.open(r.type,r.url),i.send(n)},abort:function(){i&&i.abort()}}}}),e});!function(e){e.fn.columnize=function(t){var n={width:400,columns:!1,buildOnce:!1,overflow:!1,doneFunc:function(){},target:!1,ignoreImageLoading:!0,columnFloat:"left",lastNeverTallest:!1,accuracy:!1,manualBreaks:!1,cssClassPrefix:""};return t=e.extend(n,t),"string"==typeof t.width&&(t.width=parseInt(t.width,10),isNaN(t.width)&&(t.width=n.width)),this.each(function(){function o(e,t){var n=t?".":"";return g.length?n+g+"-"+e:n+e}function i(n,i,l,a){for(;(u||l.height()<a)&&i[0].childNodes.length;){var d=i[0].childNodes[0];if(e(d).find(o("columnbreak",!0)).length)return;if(e(d).hasClass(o("columnbreak")))return;n.append(d)}if(0!==n[0].childNodes.length){var r=n[0].childNodes,s=r[r.length-1];n[0].removeChild(s);var c=e(s);if(3==c[0].nodeType){var h=c[0].nodeValue,f=t.width/18;t.accuracy&&(f=t.accuracy);for(var g,m=null;l.height()<a&&h.length;){var v=h.indexOf(" ",f);g=-1!=v?h.substring(0,h.indexOf(" ",f)):h,m=document.createTextNode(g),n.append(m),h=h.length>f&&-1!=v?h.substring(v):""}if(l.height()>=a&&null!==m&&(n[0].removeChild(m),h=m.nodeValue+h),!h.length)return!1;c[0].nodeValue=h}return i.contents().length?i.prepend(c):i.append(c),3==c[0].nodeType}}function l(e,t,n,a){if(!e.contents(":last").find(o("columnbreak",!0)).length&&!e.contents(":last").hasClass(o("columnbreak"))&&t.contents().length){var d=t.contents(":first");if(1!=d.get(0).nodeType)return;var r=d.clone(!0);d.hasClass(o("columnbreak"))?(e.append(r),d.remove()):u?(e.append(r),d.remove()):1!=r.get(0).nodeType||r.hasClass(o("dontend"))||(e.append(r),r.is("img")&&n.height()<a+20?d.remove():!d.hasClass(o("dontsplit"))&&n.height()<a+20?d.remove():r.is("img")||d.hasClass(o("dontsplit"))?r.remove():(r.empty(),i(r,d,n,a)?d.addClass(o("split")):(d.addClass(o("split")),d.children().length&&l(r,d,n,a)),0===r.get(0).childNodes.length&&r.remove()))}}function a(){if(!s.data("columnized")||1!=s.children().length){if(s.data("columnized",!0),s.data("columnizing",!0),s.empty(),s.append(e("<div class='"+o("first")+" "+o("last")+" "+o("column")+" ' style='width:100%; float: "+t.columnFloat+";'></div>")),$col=s.children().eq(s.children().length-1),$destroyable=h.clone(!0),t.overflow){for(targetHeight=t.overflow.height,i($col,$destroyable,$col,targetHeight),$destroyable.contents().find(":first-child").hasClass(o("dontend"))||l($col,$destroyable,$col,targetHeight);$col.contents(":last").length&&d($col.contents(":last").get(0));){var n=$col.contents(":last");n.remove(),$destroyable.prepend(n)}for(var a="",r=document.createElement("DIV");$destroyable[0].childNodes.length>0;){var c=$destroyable[0].childNodes[0];if(c.attributes)for(var f=0;f<c.attributes.length;f++)0===c.attributes[f].nodeName.indexOf("jQuery")&&c.removeAttribute(c.attributes[f].nodeName);r.innerHTML="",r.appendChild($destroyable[0].childNodes[0]),a+=r.innerHTML}var u=e(t.overflow.id)[0];u.innerHTML=a}else $col.append($destroyable);s.data("columnizing",!1),t.overflow&&t.overflow.doneFunc&&t.overflow.doneFunc()}}function d(t){return 3==t.nodeType?/^\s+$/.test(t.nodeValue)&&t.previousSibling?d(t.previousSibling):!1:1!=t.nodeType?!1:e(t).hasClass(o("dontend"))?!0:0===t.childNodes.length?!1:d(t.childNodes[t.childNodes.length-1])}function r(){if(m=0,f!=s.width()){f=s.width();var n=Math.round(s.width()/t.width),r=t.width,g=t.height;if(t.columns&&(n=t.columns),u&&(n=h.find(o("columnbreak",!0)).length+1,r=!1),1>=n)return a();if(!s.data("columnizing")){s.data("columnized",!0),s.data("columnizing",!0),s.empty(),s.append(e("<div style='width:"+Math.floor(100/n)+"%; float: "+t.columnFloat+";'></div>")),C=s.children(":last"),C.append(h.clone()),c=C.height(),s.empty();var v=c/n,p=3,w=!1;t.overflow?(p=1,v=t.overflow.height):g&&r&&(p=1,v=g,w=!0);for(var b=0;p>b&&20>b;b++){s.empty();var y,N,C,$;try{y=h.clone(!0)}catch(T){y=h.clone()}y.css("visibility","hidden");for(var x=0;n>x;x++)N=0===x?o("first"):"",N+=" "+o("column"),N=x==n-1?o("last")+" "+N:N,s.append(e("<div class='"+N+"' style='width:"+Math.floor(100/n)+"%; float: "+t.columnFloat+";'></div>"));for(x=0;x<n-(t.overflow?0:1)||w&&y.contents().length;){for(s.children().length<=x&&s.append(e("<div class='"+N+"' style='width:"+Math.floor(100/n)+"%; float: "+t.columnFloat+";'></div>")),C=s.children().eq(x),w&&C.width(r+"px"),i(C,y,C,v),l(C,y,C,v);C.contents(":last").length&&d(C.contents(":last").get(0));)$=C.contents(":last"),$.remove(),y.prepend($);x++,0===C.contents().length&&y.contents().length?C.append(y.contents(":first")):x!=n-(t.overflow?0:1)||t.overflow||y.find(o("columnbreak",!0)).length&&n++}if(t.overflow&&!w){var L=!1,M=document.all&&-1!=navigator.appVersion.indexOf("MSIE 7.");if(L||M){for(var z="",k=document.createElement("DIV");y[0].childNodes.length>0;){var F=y[0].childNodes[0];for(x=0;x<F.attributes.length;x++)0===F.attributes[x].nodeName.indexOf("jQuery")&&F.removeAttribute(F.attributes[x].nodeName);k.innerHTML="",k.appendChild(y[0].childNodes[0]),z+=k.innerHTML}var H=e(t.overflow.id)[0];H.innerHTML=z}else e(t.overflow.id).empty().append(y.contents().clone(!0))}else if(w)s.children().each(function(e){C=s.children().eq(e),C.width(r+"px"),0===e?C.addClass(o("first")):e==s.children().length-1?C.addClass(o("last")):(C.removeClass(o("first")),C.removeClass(o("last")))}),s.width(s.children().length*r+"px");else{C=s.children().eq(s.children().length-1),y.contents().each(function(){C.append(e(this))});var I=(C.height(),0),O=1e7,V=0,q=!1,P=0;s.children().each(function(e){return function(t){var n=e.children().eq(t),i=n.children(":last").find(o("columnbreak",!0)).length;if(!i){var l=n.height();q=!1,I+=l,l>V&&(V=l,q=!0),O>l&&(O=l),P++}}}(s));var j=I/P;0===I?b=p:t.lastNeverTallest&&q?(m+=30,v+=30,b==p-1&&p++):V-O>30?v=j+30:Math.abs(j-v)>20?v=j:b=p}s.append(e("<br style='clear:both;'>"))}s.find(o("column",!0)).find(":first"+o("removeiffirst",!0)).remove(),s.find(o("column",!0)).find(":last"+o("removeiflast",!0)).remove(),s.data("columnizing",!1),t.overflow&&t.overflow.doneFunc(),t.doneFunc()}}}var s=e(t.target?t.target:this),c=e(this).height(),h=e("<div></div>"),f=0,u=t.manualBreaks,g=n.cssClassPrefix;"string"==typeof t.cssClassPrefix&&(g=t.cssClassPrefix);var m=0;if(h.append(e(this).contents().clone(!0)),!t.ignoreImageLoading&&!t.target&&!s.data("imageLoaded")&&(s.data("imageLoaded",!0),e(this).find("img").length>0)){var v=function(e,n){return function(){e.data("firstImageLoaded")||(e.data("firstImageLoaded","true"),e.empty().append(n.children().clone(!0)),e.columnize(t))}}(e(this),h);return e(this).find("img").one("load",v),void e(this).find("img").one("abort",v)}s.empty(),r(),t.buildOnce||e(window).resize(function(){t.buildOnce||(s.data("timeout")&&clearTimeout(s.data("timeout")),s.data("timeout",setTimeout(r,200)))})})}}(jQuery);
require=function(){function e(t,i,n){function c(a,o){if(!i[a]){if(!t[a]){var s="function"==typeof require&&require;if(!o&&s)return s(a,!0);if(l)return l(a,!0);var r=new Error("Cannot find module '"+a+"'");throw r.code="MODULE_NOT_FOUND",r}var g=i[a]={exports:{}};t[a][0].call(g.exports,function(e){var i=t[a][1][e];return c(i||e)},g,g.exports,e,t,i,n)}return i[a].exports}for(var l="function"==typeof require&&require,a=0;a<n.length;a++)c(n[a]);return c}return e}()({2199:[function(e,t,i){!function(e){e(function(){var t=e("#heart-beat");if(t.length){var i=function(){var i=t.attr("data-code");e.ajax({url:"/api/property/heart-beat?hotel="+i,type:"GET",dataType:"JSON",success:function(i){i.count>1?t.html(e("#msg-two").html().replace("{number}",i.count)):t.html(e("#msg-one").html().replace("{number}",i.count))},error:function(){t.html(e("#msg-one").html().replace("{number}","1"))}})};i(),setInterval(i,6e5)}})}(jQuery)},{}],2117:[function(e,t,i){var n=e("../../global-booking-widget/prop-page/01-article/03-dates/calendar/locals"),c=e("../../global-booking-widget/prop-page/01-article/03-dates/calendar/view"),l=e("moment"),a=e("../../../../config/host"),o=a.getLanguage(),s="ja"===o||"zh"===o||"zh-tw"===o?"YYYY年 MMM":"MMM YYYY";t.exports=c.extend({initialize:function(){c.prototype.initialize.apply(this,arguments);var e=this,t=!1;e.slick=function(){var i=0,n=!1;e.$el.slick({fade:!1,speed:200,infinite:!1,rtl:"rtl"==jQuery("html").attr("dir"),edgeFriction:0,initialSlide:e.prev?1:0}).off("beforeChange").on("beforeChange",function(e,t,c,l){n=!1,c!==l&&(i=c,n=!0)}).off("afterChange").on("afterChange",function(t,c,l){n&&(l>i?e.goToNextMonth():e.goToPrevMonth())}),t=!0},e.on("render",function(){e.slick()}).on("before:render",function(){t&&e.$el.slick("unslick")})},template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},className:function(){return"x-solar-slick"},serializeData:function(){this.options.swipeMode=!0;var e=n.prevMonth(this.nowMonth),t=this.nowMonth,i=n.nextMonth(this.nowMonth);return this.prev=n.nowMonth()<t,this.prevPrev=n.nowMonth()<e,this.next=this.maxMonth?this.maxMonth>t:!0,this.nextnext=this.maxMonth?this.maxMonth>i:!0,{weeks:n.weeks_short,prevTitle:l(e).format(s),currentTitle:l(t).format(s),nextTitle:l(i).format(s),prevDays:n.getDays(e,n.nowDate()),currentDays:n.getDays(t,n.nowDate()),nextDays:n.getDays(i,n.nowDate()),prevPrev:this.prevPrev,nextNext:this.nextnext,prev:this.prev,next:this.next}}})},{"../../../../config/host":45,"../../global-booking-widget/prop-page/01-article/03-dates/calendar/locals":935,"../../global-booking-widget/prop-page/01-article/03-dates/calendar/view":938,"./template.hbs":2116,moment:16}],2116:[function(e,t,i){t.exports='{{#if prev}}\r\n    <div class="x-solar" >\r\n        <table class="x-solar-tab" border="0" cellpadding="0" cellspacing="0" >\r\n            <thead >\r\n            <tr >\r\n                <th class="x-solar-item" >\r\n                    <div class="x-solar-cell" >\r\n                        {{#if prevPrev}}\r\n                            <span\r\n                                class="x-solar-icon x-solar-icon-prev" ></span >\r\n                        {{/if}}\r\n                    </div >\r\n                </th >\r\n                <th class="x-solar-date" colspan="5" >{{prevTitle}}</th >\r\n                <th class="x-solar-item" >\r\n                    <div class="x-solar-cell" >\r\n                        <span class="x-solar-icon x-solar-icon-next" ></span >\r\n                    </div >\r\n                </th >\r\n            </tr >\r\n            <tr >\r\n                {{#each weeks}}\r\n                    <th class="x-solar-item" >\r\n                        <div class="x-solar-cell" >\r\n                            <span class="x-solar-head" >{{this}}</span >\r\n                        </div >\r\n                    </th >\r\n                {{/each}}\r\n            </tr >\r\n            </thead >\r\n            <tbody >\r\n            {{#each prevDays}}\r\n                <tr >\r\n                    {{#each this}}\r\n                        <td class="x-solar-item {{#if this}}valid-date{{/if}}" >\r\n                            <div class="x-solar-cell"\r\n                                 {{#if this}}data-date="{{this.UTC}}"{{/if}}>\r\n                                {{#if this}}\r\n                                    {{#if this.live}}\r\n                                        <span class="x-solar-mask" >\r\n                                        <svg width="100%" height="100%"\r\n                                             xmlns="http://www.w3.org/2000/svg"\r\n                                             viewBox="0 0 20 16" >\r\n                                            <path\r\n                                                d="M 0 0 V 0 16 H 15 L 20 8 L 15 0 Z"\r\n                                                class="prev" />\r\n                                            <path\r\n                                                d="M 5 0 L 0 8 L 5 16 H 20 V 0 Z"\r\n                                                class="next" />\r\n                                        </svg >\r\n                                    </span >\r\n                                        <span\r\n                                            class="x-solar-text" >{{this.text}}</span >\r\n                                    {{else}}\r\n                                        <span\r\n                                            class="x-solar-none" >{{this.text}}</span >\r\n                                    {{/if}}\r\n                                {{/if}}\r\n                            </div >\r\n                        </td >\r\n                    {{/each}}\r\n                </tr >\r\n            {{/each}}\r\n            {{#ifCond prevDays.length "==" 5}}\r\n                <tr >\r\n                    <td >\r\n                        <div style=" padding-top: 80%;" ></div >\r\n                    </td >\r\n                </tr >\r\n            {{/ifCond}}\r\n            </tbody >\r\n        </table >\r\n    </div >\r\n{{/if}}\r\n<div class="x-solar" >\r\n    <table class="x-solar-tab" border="0" cellpadding="0" cellspacing="0" >\r\n        <thead >\r\n        <tr >\r\n            <th class="x-solar-item" >\r\n                <div class="x-solar-cell" >\r\n                    {{#if prev}}\r\n                        <span class="x-solar-icon x-solar-icon-prev" ></span >\r\n                    {{/if}}\r\n                </div >\r\n            </th >\r\n            <th class="x-solar-date" colspan="5" >{{currentTitle}}</th >\r\n            <th class="x-solar-item" >\r\n                <div class="x-solar-cell" >\r\n                    {{#if next}}\r\n                        <span class="x-solar-icon x-solar-icon-next" ></span >\r\n                    {{/if}}\r\n                </div >\r\n            </th >\r\n        </tr >\r\n        <tr >\r\n            {{#each weeks}}\r\n                <th class="x-solar-item" >\r\n                    <div class="x-solar-cell" >\r\n                        <span class="x-solar-head" >{{this}}</span >\r\n                    </div >\r\n                </th >\r\n            {{/each}}\r\n        </tr >\r\n        </thead >\r\n        <tbody >\r\n        {{#each currentDays}}\r\n            <tr >\r\n                {{#each this}}\r\n                    <td class="x-solar-item {{#if this}}valid-date{{/if}}" >\r\n                        <div class="x-solar-cell"\r\n                             {{#if this}}data-date="{{this.UTC}}"{{/if}}>\r\n                            {{#if this}}\r\n                                {{#if this.live}}\r\n                                    <span class="x-solar-mask" >\r\n                                        <svg width="100%" height="100%"\r\n                                             xmlns="http://www.w3.org/2000/svg"\r\n                                             viewBox="0 0 20 16" >\r\n                                            <path\r\n                                                d="M 0 0 V 0 16 H 15 L 20 8 L 15 0 Z"\r\n                                                class="prev" />\r\n                                            <path\r\n                                                d="M 5 0 L 0 8 L 5 16 H 20 V 0 Z"\r\n                                                class="next" />\r\n                                        </svg >\r\n                                    </span >\r\n                                    <span\r\n                                        class="x-solar-text" >{{this.text}}</span >\r\n                                {{else}}\r\n                                    <span\r\n                                        class="x-solar-none" >{{this.text}}</span >\r\n                                {{/if}}\r\n                            {{/if}}\r\n                        </div >\r\n                    </td >\r\n                {{/each}}\r\n            </tr >\r\n        {{/each}}\r\n        {{#ifCond currentDays.length "==" 5}}\r\n            <tr >\r\n                <td >\r\n                    <div style=" padding-top: 80%;" ></div >\r\n                </td >\r\n            </tr >\r\n        {{/ifCond}}\r\n        </tbody >\r\n    </table >\r\n</div >\r\n{{#if next}}\r\n    <div class="x-solar" >\r\n        <table class="x-solar-tab" border="0" cellpadding="0" cellspacing="0" >\r\n            <thead >\r\n            <tr >\r\n                <th class="x-solar-item" >\r\n                    <div class="x-solar-cell" >\r\n                        <span class="x-solar-icon x-solar-icon-prev" ></span >\r\n                    </div >\r\n                </th >\r\n                <th class="x-solar-date" colspan="5" >{{nextTitle}}</th >\r\n                <th class="x-solar-item" >\r\n                    <div class="x-solar-cell" >\r\n                        {{#if nextNext}}\r\n                            <span class="x-solar-icon x-solar-icon-next" ></span >\r\n                        {{/if}}\r\n                    </div >\r\n                </th >\r\n            </tr >\r\n            <tr >\r\n                {{#each weeks}}\r\n                    <th class="x-solar-item" >\r\n                        <div class="x-solar-cell" >\r\n                            <span class="x-solar-head" >{{this}}</span >\r\n                        </div >\r\n                    </th >\r\n                {{/each}}\r\n            </tr >\r\n            </thead >\r\n            <tbody >\r\n            {{#each nextDays}}\r\n                <tr >\r\n                    {{#each this}}\r\n                        <td class="x-solar-item {{#if this}}valid-date{{/if}}" >\r\n                            <div class="x-solar-cell"\r\n                                 {{#if this}}data-date="{{this.UTC}}"{{/if}}>\r\n                                {{#if this}}\r\n                                    {{#if this.live}}\r\n                                        <span class="x-solar-mask" >\r\n                                            <svg width="100%" height="100%"\r\n                                                 xmlns="http://www.w3.org/2000/svg"\r\n                                                 viewBox="0 0 20 16" >\r\n                                                <path\r\n                                                    d="M 0 0 V 0 16 H 15 L 20 8 L 15 0 Z"\r\n                                                    class="prev" />\r\n                                                <path\r\n                                                    d="M 5 0 L 0 8 L 5 16 H 20 V 0 Z"\r\n                                                    class="next" />\r\n                                            </svg >\r\n                                        </span >\r\n                                        <span\r\n                                            class="x-solar-text" >{{this.text}}</span >\r\n                                    {{else}}\r\n                                        <span\r\n                                            class="x-solar-none" >{{this.text}}</span >\r\n                                    {{/if}}\r\n                                {{/if}}\r\n                            </div >\r\n                        </td >\r\n                    {{/each}}\r\n                </tr >\r\n            {{/each}}\r\n            {{#ifCond nextDays.length "==" 5}}\r\n                <tr >\r\n                    <td >\r\n                        <div style=" padding-top: 80%;" ></div >\r\n                    </td >\r\n                </tr >\r\n            {{/ifCond}}\r\n            </tbody >\r\n        </table >\r\n    </div >\r\n{{/if}}\r\n'},{}],2092:[function(e,t,i){var n=function(e){var t=this,i=function(){if("undefined"!=document.msHidden){var e=document.createElement("div"),t="grayscale(100%)";return e.style.filter=t,window.getComputedStyle(e).filter!==t}}();if(e&&1==i){if(e.length>0)e.each?e.each(function(){t.grayscale(this)}):e.forEach&&e.forEach(function(e){t.grayscale(e)});else if(/img/i.test(e.tagName)){e.parentNode.parentNode.grayscale||(e.parentNode.parentNode.insertAdjacentHTML("afterBegin",'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" class="grayscalesvg">                <filter id="grayscale">                    <feColorMatrix type="matrix" values="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"/>                </filter>            </svg>'),e.parentNode.parentNode.grayscale=!0),e.style.display="inline-block",e.style.width="auto",e.style.height="auto";var n=e.className,c=e.src,l=e.clientWidth,a=e.clientHeight;e.grayscale||(e.style.display="none",e.parentNode.grayscale?(e.parentNode.childNodes[0].setAttribute("width",l),e.parentNode.childNodes[0].setAttribute("height",a),e.parentNode.childNodes[0].childNodes[0].setAttribute("width",l),e.parentNode.childNodes[0].childNodes[0].setAttribute("height",a)):(e.insertAdjacentHTML("beforeBegin",'<svg class="'+n+'" width="'+l+'" height="'+a+'" ><image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+c+'" x="0" y="0" width="'+l+'" height="'+a+'" filter="url(\'#grayscale\')"></image></svg>'),e.parentNode.grayscale=!0),e.style.height=a+"px",e.style.width=l+"px")}return this}};t.exports={grayscale:n}},{}],2045:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette"),Handlebars.compile(e("./template-minimize.hbs"))),l=e("../autocreator"),a=e("../util");t=t.exports=l.extend({blocks:function(){return this.$el.children().filter(".block")},initialize:function(){var e=this;l.prototype.initialize.apply(this,arguments),e.$el.addClass("wgt-accordion"),e.switchState(),window.onresize=n.throttle(function(){e.switchState()},300)},switchState:function(){var e=this;e.blocks().each(function(){a.locationhash()&&a.locationhash()==jQuery(this).attr("id")||(e.$el.data("is-desktop")&&!a.ismobile()?jQuery(this).removeClass("state-fold"):jQuery(this).addClass("state-fold")),e.$el.data("no-minimize")||jQuery(this).append(c({text:e.$el.data("minimize-section")||i18n.t("general.minimize_section")}))})},events:{"click .accordion-trigger":function(e){var t=jQuery(e.target).closest(".block"),i=t.hasClass("state-fold");this.blocks().addClass("state-fold"),i&&t.removeClass("state-fold")}}},{selector:".wgt-accordion"})},{"../autocreator":2052,"../util":2122,"./template-minimize.hbs":2044,backbone:8,"backbone.marionette":6,underscore:42}],2044:[function(e,t,i){t.exports='<div class="splitline-bottom">\r\n	<div class="tpl-splitline"></div>\r\n	<h3 class="accordion-trigger">{{text}}</h3>\r\n</div>'},{}],2034:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../abmb/stateful.js"),a=e("./model/DAO"),o=e("./search2.0/view"),s=e("./review/view"),r=e("./model/model"),g=e("../../ui/scratchpad-item/view"),d=e("../../share-item/view"),I=e("./top-item/view"),b=e("./populate-hotels/view"),C=e("./blogs/view"),u=e("./filter/view"),m=e("./filter-mobile/view"),p=e("./filter-mobile/model");t.exports=c.ItemView.extend(n.extend({},l,{el:".tours",template:!1,ui:{searchInput:".search-bar input",category:".category-filter",sortby:".sortby-dropdown-container",products:".products-list",blogs:".blogs",destinations:".top-destinations",hotels:".popular-hotels",loadmore:".wgt-readmore",destinationPopup:".destination-popup",filterDesktop:".tpl-tours-filter .desktop",filterMobile:".tpl-tours-filter .mobile"},events:{"click .wgt-readmore":"onLoadMoreClick"},onLoadMoreClick:function(){this.model.set({perpage:this.model.get("perpage")+this.perpage})},switchDestination:function(e,t){var i=this;a.locations.findWhere({destinationid:e,level:"city"});i.model.set("location",a.locations.findWhere({destinationid:e,level:"city"}))},onRender:function(){var t=this;t.ReviewView=new s,t.ReviewView.render(),t.SearchView=new o({el:t.$el.find(".hero-search")}),t.SearchView.render(),t.model=new r({categoryid:t.$el.attr("data-categoryid"),products:[],itemsAttribute:"products",DAO:a},{view:this}),t.topItemView=new I({DAO:a,el:t.ui.destinations}),t.topItemView.on("change:destination",n.bind(t.switchDestination,t)),t.popularHotelsView=new b({DAO:a,el:t.ui.hotels}),t.blogsView=new C({DAO:a,el:t.ui.blogs}),t.filterView=new u({DAO:a,el:t.ui.filterDesktop,model:t.model}),t.filterView.on("change:destination",n.bind(t.switchDestination,t)),t.filterMobile=new m({DAO:a,el:t.ui.filterMobile,model:new p({DAO:a}),pageModel:t.model}),t.filterMobile.on("change:destination",n.bind(t.switchDestination,t)),t.model.on("change:location render:location",function(){var e=t.model.get("location");t.popularHotelsView.renderForCity(e),t.blogsView.renderForLocation(e),t.topItemView.renderForCity(e),t.filterMobile.setDestinationBasedOnName(e&&e.get("name"))});var i=Handlebars.compile(e("./template.hbs"));t.model.on("render:items",function(){t.ui.products.html(i(t.model.attributes)),g.autoCreate(),d.autoCreate()});var c=t.ui.filterDesktop.offset().top,l=jQuery(".global-wrapper");jQuery(window).on("scroll resize",function(){l[jQuery(window).scrollTop()>c&&jQuery(window).width()>768?"addClass":"removeClass"]("filter-fixed-at-top")})}}))},{"../../abmb/stateful.js":72,"../../share-item/view":1940,"../../ui/scratchpad-item/view":2113,"./blogs/view":2004,"./filter-mobile/model":2005,"./filter-mobile/view":2007,"./filter/view":2009,"./model/DAO":2010,"./model/model":2017,"./populate-hotels/view":2025,"./review/view":2026,"./search2.0/view":2030,"./template.hbs":2031,"./top-item/view":2033,"backbone.marionette":6,underscore:42}],2033:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../../abmb/stateful.js");e("../../../ui/util");t.exports=l.ItemView.extend(n.extend({},a,{template:Handlebars.compile(e("./template.hbs")),events:{"click .destination-item":"switchDestination"},switchDestination:function(e){var t=jQuery(e.target).closest(".destination-item");return this.trigger("change:destination",t.data("destinationid")),!1},initialize:function(e){var t=this;t.model=new c.Model({notTourItem:e&&e.notTourItem}),t.DAO=e.DAO,t.render(),e.DAO.promise.then(function(){t.model.set("topLocations",t.DAO.top10Locations.get("items")),t.render()})},renderForCity:function(e){var t=this;e?(t.switchState("loading:show"),e.getDefaultProducts().then(function(){t.model.set("cityName",e.get("name")),t.model.set("topProducts",n.sortBy(e.defaultProducts,"bestSellerIndex").slice(0,10)),t.render(),t.switchState("loading:hide")})):(t.model.set("cityName",!1),t.render())}}))},{"../../../abmb/stateful.js":72,"../../../ui/util":2122,"./template.hbs":2032,backbone:8,"backbone.marionette":6,underscore:42}],2032:[function(e,t,i){t.exports='<!--<span class="loading-container"><div class="loading-block"><p class="loading-gif"></p></div>-->\r\n<!--<div class="loading-error-block"><p></p></div></span>-->\r\n\r\n\r\n<h5 class="sidebar-item-name">{{#if cityName}}{{local \'tours.top_tours\' cityName}}{{else}}{{local \'maps.top_10_destinations\'}}{{/if}}</h5>\r\n\r\n\r\n<ul class="{{#if cityName}}sidebar-attractions{{else}}sidebar-destination{{/if}}">\r\n\r\n    {{#if cityName}}\r\n        {{#each topProducts}}\r\n            <li><a class="item" href="{{attributes.url}}">{{attributes.title}}</a>\r\n            </li>\r\n        {{/each}}\r\n    {{else}}\r\n        {{#each topLocations}}\r\n            <li><a class="item destination-item" data-name="{{attributes.name}}"\r\n                   data-destinationid="{{#if ../notTourItem}}{{attributes.id}}{{else}}{{attributes.destinationid}}{{/if}}">{{attributes.name}}</a>\r\n            </li>\r\n        {{/each}}\r\n    {{/if}}\r\n</ul>'},{}],2031:[function(e,t,i){t.exports='{{#if products.length}}\r\n    {{#each products}}{{#display this}}{{#with attributes}}\r\n        <div style="background-image: url(\'{{image_big}}\')" class="tpl-half-tour clearfix always-show-image {{image_anchor}}">\r\n            {{#if tagName}}<label class="wgt-corner-label-red">{{ tagName }}</label>{{/if}}\r\n            <div class="tpl-content">\r\n                <div class="tpl-text">\r\n                    <h3>\r\n                        <span>{{{title}}}</span>\r\n                        <a class="wgt-scratchpad-on" data-component="scratchpad" data-id="{{id}}"\r\n                           data-type="{{type}}" data-content="{{content}}" data-title="{{title}}"\r\n                           data-url="{{url}}">\r\n                            <span class="icon-icon_B013"></span>\r\n                            <div class="scratchpad-tip"><span class="label-popup"><div\r\n                                    class="content"><p>{{local "scratchpad.item_added"}}</p></div></span></div>\r\n                        </a>\r\n                            <span class="icon-icon_M001 tpl-half-favorite" data-title="{{title}}" data-url="{{url}}"\r\n                                  data-component="share">\r\n\r\n                            </span>\r\n                    </h3>\r\n                    <div class="content-progress">\r\n                        {{local "tours.rating"}}: {{rating}}\r\n                        {{#from 1 rating 5}}<span class="icon-icon_E006"></span>\r\n                        {{else}}        <span class="icon-icon_E007"></span>{{/from}}\r\n                    </div>\r\n                    <p>{{#if ../../../location}}{{../../../../location.attributes.name}}\r\n                        , {{../../../../location.parent.attributes.name}}{{else}}{{destination}}{{/if}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="tpl-cta-left">\r\n                {{#if price}}\r\n                <p>{{local "tours.starting_at"}}</p>\r\n                <em><span class="currency">{{currency_code}}</span>{{#price-format price}}{{/price-format}}</em>\r\n                {{/if}}\r\n            </div>\r\n            <div class="tpl-cta-right">\r\n                <a class="wgt-sqbutton wgt-sqdesktop" href="{{url}}">{{local "tours.learn_more"}}</a>\r\n                <a class="wgt-sqbutton wgt-sqmobile" href="{{url}}">{{local "tours.learn_more"}}</a>\r\n            </div>\r\n            <div class="tpl-holder"></div>\r\n            <!--div.tpl-shop-mask-->\r\n        </div>\r\n    {{/with}}{{/display}}{{/each}}\r\n{{else}}\r\n    {{#if location}}\r\n        <h3 class="no-results-found">{{local "tours.sorry_no_tours_available"}}</h3>\r\n    {{/if}}\r\n{{/if}}\r\n'},{}],2030:[function(e,t,i){var n=e("underscore");Backbone=e("backbone"),Marionette=e("backbone.marionette"),Util=e("../../../ui/util"),TourSearchModel=e("./model"),SearchResultView=e("../../../offers/main/search/result"),t.exports=Marionette.ItemView.extend({template:!1,ui:{mask:".hero-search__mask",input:".hero-search-form input[type='text']",minput:".hero-mobile-search-input input[type='text']",props:".hero-search-prop",mprops:".hero-mobile-search-tip",form:".hero-search-form",mobile:".hero-mobile-search",close:".hero-mobile-search-bar span",tag:".hero-search-tag a"},events:{"click @ui.form":"__listenMobile","click @ui.tag":"__tagClick","focus @ui.input":"__focus","keyup @ui.input":n.debounce(function(e){this.__search(e)},500),"keyup @ui.minput":n.debounce(function(e){this.__search(e)},500),"arrowup    @ui.input":function(){this.__prevSearchItem(this.ui.props.find("li"))},"arrowdown  @ui.input":function(){this.__nextSearchItem(this.ui.props.find("li"))},"enter      @ui.input":function(){this.__enterSearchItem(this.ui.props.find("li"))},"click @ui.close":"__close"},onRender:function(){var e=this;e.SearchResultView=new SearchResultView({el:e.ui.props}),document.addEventListener("click",function(t){!jQuery(t.target).parents(".hero-search-form").length>0&&(e.ui.props.hide(),e.ui.mask.removeClass("hero-search__mask--show"))}),window.onresize=function(){e.ui.mobile.hide()}},__focus:function(){this.ui.mask.addClass("hero-search__mask--show"),jQuery.trim(this.ui.input.val())&&(this.ui.props.find("li").length>0||this.ui.props.find(".error").length>0)&&this.ui.props.show()},__prevSearchItem:function(e){if(e.length){var t,i,n=this.ui.props.find("li.active");n.length?(i=n.index(),t=i?e.eq(i-1):e.last()):t=e.last(),e.removeClass("active"),t.addClass("active")}},__nextSearchItem:function(e){if(e.length){var t,i,n=this.ui.props.find("li.active");n.length?(i=n.index(),t=i==e.length-1?e.first():e.eq(i+1)):t=e.first(),e.removeClass("active"),t.addClass("active")}},__enterSearchItem:function(e){if(e.length){var t=this.ui.props.find("li.active");t.length&&(location.href=t.find("a").attr("href"))}},__search:function(e){if(13!=e.keyCode&&37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode){var t=this,i=jQuery.trim(t.ui.input.val()),c=t.ui.props,l={};if(Util.ismobile()&&(c=t.ui.mprops,i=jQuery.trim(t.ui.minput.val()),t.SearchResultView=new SearchResultView({el:t.ui.mprops})),""==i)return void c.hide();t.SearchModel=new TourSearchModel(i),t.ui.props.removeClass("hero-search-prop__auto");var a=t.SearchModel.fetch().then(function(e){var e=n.filter(e[0].products,function(e,t){return 5>t});l.result=e,l.keywords=i,t.SearchResultView.model=new Backbone.Model(l),t.SearchResultView.render(),t.__keybold(i),t.__checkResultStyle()},function(){l.result={},l.keywords=i,t.SearchResultView.model=new Backbone.Model(l),t.SearchResultView.render(),t.__checkResultStyle()});c.show(),Util.loading({container:c,promise:a})}},__keybold:function(e){var t=this,i=Util.ismobile()?this.ui.mprops:this.ui.props,c=i.find("a"),l=new RegExp(e,"gim"),a=c.length>0,o=i18n.t("tours.suggested_tours");n.each(c,function(t){var i=jQuery(t).html().replace(l,"<span class='keyword'>"+e+"</span>");jQuery(t).html(i)}),a&&t.ui.props.prepend("<div class='hero-search-prop-title'>"+o+"</div>")},__listenMobile:function(){Util.ismobile()&&this.ui.mobile.show()&&this.ui.minput.focus()},__close:function(){this.ui.mobile.hide()},__checkResultStyle:function(){var e=this,t=e.ui.props.find(".error");e.ui.props.removeClass("hero-search-prop__auto"),t.length&&e.ui.props.addClass("hero-search-prop__auto")}})},{"../../../offers/main/search/result":1608,"../../../ui/util":2122,"./model":2029,backbone:8,"backbone.marionette":6,underscore:42}],2029:[function(e,t,i){var n=e("backbone"),c=e("../../../../../config/host.js").host;t.exports=n.Model.extend({initialize:function(e){this.url=c+"/api/shops/product/search?keywords="+e}})},{"../../../../../config/host.js":45,backbone:8}],2026:[function(e,t,i){var n=e("backbone.marionette"),c=e("../../../ui/readmore/view");t.exports=n.ItemView.extend({el:".tpl-booking",template:!1,ui:{reviewContent:".booking-review__content",slider:".booking-review__slider",prev:".reviewer-control .prev",next:".reviewer-control .next"},initialize:function(){},onRender:function(){var e=this;e.ui.slider.on("afterChange setPosition init",function(t,i){e.ui.reviewContent.nanoScroller({destroy:!0}),e.ui.reviewContent.nanoScroller({alwaysVisible:!0}),jQuery(i.$slides[i.currentSlide]).find('[data-component="readmore"]').each(function(e,t){c.getInstance(t).collapseContent()})}).slick({prevArrow:e.ui.prev.get(0),nextArrow:e.ui.next.get(0),fade:!0,speed:200,infinite:!1,rtl:"rtl"==jQuery("html").attr("dir")})}})},{"../../../ui/readmore/view":2110,"backbone.marionette":6}],2025:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../../abmb/stateful.js"),a=e("./model");e("../../../ui/util");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("./template.hbs")),initialize:function(e){var t=this;t.model=new a,t.DAO=e.DAO,t.render(),e.DAO.promise.then(function(){t.DAO.top10Destinations.top10(),t.model.set("topHotels",t.DAO.top10Destinations.get("items").slice(0,3)),t.render()})},renderForCity:function(e){var t=this;e?e.get("topHotels")?(t.model=e.get("topHotels").clone(),t.render()):(t.switchState("loading:show"),t.model.fetchByCity(e.get("name")).then(function(){t.model.set("cityName",e.get("name")),e.set("topHotels",t.model.clone()),t.render(),t.switchState("loading:hide")})):(t.model.set("cityName",!1),t.model.set("topHotels",t.DAO.top10Destinations.get("items").slice(0,3)),t.render())}}))},{"../../../abmb/stateful.js":72,"../../../ui/util":2122,"./model":2023,"./template.hbs":2024,backbone:8,"backbone.marionette":6,underscore:42}],2024:[function(e,t,i){t.exports='<!--<span class="loading-container"><div class="loading-block"><p class="loading-gif"></p></div>-->\r\n<!--<div class="loading-error-block"><p></p></div></span>-->\r\n\r\n\r\n<h5 class="sidebar-item-name">{{#if cityName}}{{local \'tours.hotels_in\'}} {{cityName}}{{else}}{{local \'tours.popular_hotels\'}}{{/if}}</h5>\r\n<div class="sidebar-hotel">\r\n    {{#each topHotels}}\r\n        <div style="background-image: url(\'{{attributes.carouselimage}}\')"\r\n             class="tpl-tourside-hotel clearfix {{attributes.image_anchor}}">\r\n            <div class="tpl-content">\r\n                <h6 class="name">{{attributes.name}}</h6>\r\n                <div><a class="wgt-sqbutton-white" href="{{attributes.url}}">{{local \'maps.hotel_details\'}}</a></div>\r\n            </div>\r\n            <div class="tpl-holder"></div>\r\n        </div>\r\n    {{/each}}\r\n</div>'},{}],2023:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../../../config/host.js");t.exports=c.Model.extend({parse:function(e){var t=n.map(e,function(e){return new c.Model({name:e.hotelname,carouselimage:e.image_small,url:e.url})});return{topHotels:t}},fetchByCity:function(e){return this.url=l.getURL("api","hotels/randombycity?top=3&city="+encodeURIComponent(e)),this.fetch()}})},{"../../../../../config/host.js":45,backbone:8,underscore:42}],2017:[function(e,t,i){var n=(e("backbone"),e("underscore")),c=e("./category-model"),l=e("../../../../../config/host.js"),a=e("./product-collection"),o=e("../../../ui/paginator/view-model");i=t.exports=o.extend({defaults:{location:null,categories:null,category:void 0,products:null,sortby:"",itemsAttribute:"products",promiseCount:0},setPromise:function(e){return this.set({promise:e},{silent:!0}),this.trigger("change:promise"),e},applyFilter:function(e){this.set("location",e.location,{silent:!0}),this.trigger("render:location"),this.set("category",e.category,{silent:!0}),this.trigger("change:category")},initialize:function(e){var t=this;t.on("change:location",function(){t.set({categories:void 0}),t.get("location")&&"city"==t.get("location").get("level")&&t.setPromise(t.get("location").getCategories().promise).then(function(){t.set({categories:t.get("location").getCategories().models})})}),t.on("change:categories",function(){t.set({category:void 0})}),t.on("change:category",function(){t.get("location")||t.set("products",t.defaultCollection.models);var i=t.get("category");if(i instanceof c)e.DAO.productsPromise=i.getProducts().promise,t.setPromise(e.DAO.productsPromise).then(function(){t.get("category")==i&&t.set({products:i.getProducts().models})});else{var n=jQuery.Deferred();t.setPromise(n.promise()),n.resolve()}}),t.on("change:sortby",function(){t.set({sort_field:t.get("sortby")[0],sort_direction:"asc"==t.get("sortby")[1]?1:-1,
page:1,perpage:t.get("perpage")})});t.on("change:products change:sort_field change:sort_direction",function(){if(t.get("products")){var e=t.get("sort_direction")||1,i=t.get("sort_field")||"besrSellerIndex",c=n.sortBy(t.get("products"),function(t){return e*t.get(i)});if(c=n.map(c,function(e){return e.set({topSeller:!1,lowestPrice:!1},{silent:!0}),e}),1==e)switch(i){case"bestSellerIndex":c=n.map(c,function(e,t){return 10>t&&e.set("topSeller",!0,{silent:!0}),e});break;case"price":c=n.map(c,function(e,t){return 1>t&&e.set("lowestPrice",!0,{silent:!0}),e})}t.set("products",c,{silent:!0}),t.trigger("render:items")}}),t.defaultCollection=new a({recommendedUrl:l.getURL("api","shops/product/recommend")}),t.defaultCollection.promise.then(function(){t.set("products",t.defaultCollection.models)}),o.prototype.initialize.apply(this,arguments)}})},{"../../../../../config/host.js":45,"../../../ui/paginator/view-model":2103,"./category-model":2012,"./product-collection":2018,backbone:8,underscore:42}],2010:[function(e,t,i){var n=e("underscore"),c=e("./location-collection"),l=e("./destination-collection.js"),a=e("../model/top10-model"),o=e("./top-blogs"),s=i=t.exports={locations:new c,destinations:new l,top10Locations:new a,top10Destinations:new a,topBlogs:new o};s.promise=jQuery.when(s.locations.fetch(),s.destinations.fetch(),s.top10Locations.fetchLocations(),s.top10Destinations.fetchHotels(),s.topBlogs.fetchAllowError()).then(function(){s.locations.createRelationalLinks(s),s.top10Locations.setValue(s.locations,s.destinations),s.top10Destinations.setValue(s.locations,s.destinations),s.top10Locations.top10(),s.top10Destinations.top10();for(var e=function(){return s.locations.filter(function(e){return!e.children.length&&!e.get("destinationid")&&e.parent&&n.contains(e.parent.children,e)})};e().length;)n.each(e(),function(e){return e.parent.children=n.without(e.parent.children,e)});s.locations.remove(s.locations.filter(function(e){return!e.parent&&!e.children.length}))})},{"../model/top10-model":2022,"./destination-collection.js":2013,"./location-collection":2015,"./top-blogs":2021,underscore:42}],2021:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../../../config/host.js");t.exports=c.Collection.extend(n.extend({},{url:l.getURL("api","blog/top10Blogs"),parse:function(e){return n.map(e,function(e){return{category:e.categoryName,url:e.imageurl,title:e.title,imageUrl:e.itemurl}})},fetchAllowError:function(){var e=new jQuery.Deferred;return this.fetch().always(function(){e.resolve()}),e.promise()}}))},{"../../../../../config/host.js":45,backbone:8,underscore:42}],2015:[function(e,t,i){var n=e("../../../../../config/host.js"),c=e("../../../destination/models/location-collection"),l=e("underscore");i=t.exports=c.extend({url:n.getURL("api","shops/locations"),model:e("./location-model"),parse:function(e){var t=l.clone(l.find(e,function(e){return 18==e.destinationid}));return e.push(l.extend(t,{destinationid:18,id:"id-singapore-city",level:"city",parentid:t.id,key:"singapore"})),l.sortBy(l.filter(e,function(e){return"region"!=e.level}),"name")},createRelationalLinks:function(){this.each(function(e){e.setParent(this.get(e.get("parentid"))),e._name=e.get("name")},this)}})},{"../../../../../config/host.js":45,"../../../destination/models/location-collection":822,"./location-model":2016,underscore:42}],2016:[function(e,t,i){var n=e("underscore"),c=e("../../../destination/models/location-model"),l=e("./category-collection");i=t.exports=c.extend({hasCategories:function(){return this.get("destinationid")},getCategories:function(){return this.categories=this.categories||new l({location:this})},getDefaultProducts:function(){var e=this,t=jQuery.Deferred();return jQuery.when(e.getCategories().promise.then(function(){e.defaultCategory=n.find(e.categories.models,function(e){return/^all$/i.test(e.get("subname"))})||e.categories.models[0],e.defaultCategory.getProducts().promise.then(function(){e.defaultProducts=e.defaultCategory.products.models,t.resolve()})}),t.promise())}})},{"../../../destination/models/location-model":823,"./category-collection":2011,underscore:42}],2011:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../../config/host.js"),l=e("./category-model.js");t.exports=n.Collection.extend({model:l,comparator:"subname",initialize:function(e){var t=this,i="";"undefined"!=typeof itemId&&null!=itemId&&(i="&itemid="+itemId),t.url=c.getURL("api","shops/product/categories?destid="+e.location.get("destinationid"))+"&countrycode="+e.location.get("countrycode")+"&city="+e.location.get("name")+i,t.promise=t.fetch().then(function(){t.each(function(t){t.location=e.location})})}})},{"../../../../../config/host.js":45,"./category-model.js":2012,backbone:8,underscore:42}],2013:[function(e,t,i){var n=e("../../../../../config/host.js"),c=e("../../../destination/models/destination-collection");e("../../../ui/util");t.exports=c.extend({url:n.getURL("api","data/destinations"),model:e("./destination-model"),createRelationalLinks:function(e){this.each(function(t){t.location=e.locations.get(t.get("locationid"))},this),this.each(function(e){e.location.addDestination(e)})}})},{"../../../../../config/host.js":45,"../../../destination/models/destination-collection":815,"../../../ui/util":2122,"./destination-model":2014}],2014:[function(e,t,i){var n=e("../../../destination/models/location-model");t.exports=n.extend({})},{"../../../destination/models/location-model":823}],2009:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../../abmb/stateful.js"),a=e("../../../../component/ui/destination-list/view"),o=e("../../../ui/dropdown-v2/view"),s=e("../../../ui/dropdown-v2/item-model"),r=e("../../../ui/util");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("./template.hbs")),ui:{destinationPopup:".destination-popup",destinationFilter:".destination-filter",destinationText:".destination-text",categoryFilter:".category-filter",categoryTip:".category-tip",sortFilter:".sortby-filter",clear:".clear-all"},events:{"click @ui.destinationFilter":function(){this.listView.$el.show(),this.listView.render(),this.isCookies=!1},"click @ui.clear":function(){this.model.set("location",void 0),jQuery.cookie("tour-location",null),jQuery.cookie("tour-category",null),jQuery.cookie("tour-sortby",null),this.ddSortby.model.setItem(void 0)}},initialize:function(e){var t=this;t.DAO=e.DAO,t.isCookies=!0;var i=jQuery.cookie("tour-category")||0,c=jQuery.cookie("tour-sortby");t.model.on("change:location",function(){var e=t.model.get("location");e?(t.ui.destinationText.text(e.get("name")),jQuery.cookie("tour-location",e.get("destinationid"),{path:"/"})):t.ui.destinationText.text(i18n.t("general.select"))}),e.DAO.promise.then(function(){t.model.set("topLocations",t.DAO.top10Locations.get("items")),t.render(),t.ddCategory=o.createFromDOM(t.ui.categoryFilter),t.ddSortby=o.createFromDOM(t.ui.sortFilter),t.ddCategory.model.on("change:selected",function(){var e=t.ddCategory.getSelectedItemItem();t.model.set({category:t.ddCategory.getSelectedItemItem()}),e&&jQuery.cookie("tour-category",e.get("id"),{path:"/"})}),t.ddSortby.model.on("change:selected",function(){t.ddSortby.getSelectedItemItem(),t.model.set({sortby:t.ddSortby.getSelectedItemValue().split("-")}),jQuery.cookie("tour-sortby",t.ddSortby.getSelectedItemValue(),{path:"/"})}),t.ddCategory.$el.hide(),t.ui.categoryTip.hide(),t.ddSortby.$el.css("display","inline-block"),t.ddSortby.model.setItem(void 0),t.model.on("change:promise",function(){t.switchState("loading:show"),t.model.get("promise").then(function(){t.switchState("loading:hide")})}),t.model.on("change:categories",function(){var e=t.model.get("categories")&&t.model.get("categories").length,c=e&&(n.find(t.model.get("categories"),function(e){return/^all$/i.test(e.get("subname"))})||t.model.get("categories")[0]);t.ddCategory.setItems(n.map(t.model.get("categories"),function(e){return r.getInstanceModel(s,{item:e,text:e.get("subname")})})),t.ddCategory.model.set({disabled:!e}),t.ddCategory.setItem(c),t.ui.categoryFilter.find('li.item[data-id="'+i+'"]').click(),e?(t.ui.categoryTip.css("display","inline-block"),t.ddCategory.$el.css("display","inline-block")):(t.ui.categoryTip.hide(),t.ddCategory.$el.hide())}),t.model.on("change:category change:location",function(){t.switchState("category:"+!!t.model.get("category")),t.switchState("location:"+!(!t.model.get("location")||!t.model.get("location").get("destinationid"))),t.$el.attr("data-has-filter-criteria",!!t.model.get("location"))}),t.model.setPromise(t.DAO.promise).then(function(){t.listView.model.setValue(t.DAO.locations,t.DAO.destinations),r.queryparam("city")&&t.listView.$el.find('.destination-item[data-name="'+r.queryparam("city")+'"]').click()}),t.listView=new a({el:t.ui.destinationPopup,filter:t.ui.destinationFilter}),t.listView.on("read:cookies",function(){jQuery.cookie("tour-location")&&t.isCookies&&t.listView.$el.find('a.destination-item[data-destinationid="'+jQuery.cookie("tour-location")+'"]').click()}),c&&t.ddSortby.$el.find('li[data-value="'+c+'"]').click(),t.listView.on("change:destination",function(e,i){t.listView.$el.hide(),t.countrycode=i,t.trigger("change:destination",e,i)})})},onRender:function(){}}))},{"../../../../component/ui/destination-list/view":2075,"../../../abmb/stateful.js":72,"../../../ui/dropdown-v2/item-model":2078,"../../../ui/dropdown-v2/view":2084,"../../../ui/util":2122,"./template.hbs":2008,backbone:8,"backbone.marionette":6,underscore:42}],2008:[function(e,t,i){t.exports='<span class="loading-container">\r\n              <div class="loading-block">\r\n                <p class="loading-gif"></p>\r\n              </div>\r\n              <div class="loading-error-block"></div></span>\r\n\r\n    <!--operation-->\r\n    <div class="filter-operation"><a class="clear-all item">{{local \'tours.clear_all\'}}</a></div>\r\n    <!--destination popup-->\r\n    <div class="destination-popup"></div>\r\n    <!--filter main-->\r\n    <div class="filter-main"><span class="filter-tip">{{local \'tours.show_experiences_from\'}}</span>\r\n        <div class="filter-select destination-filter">\r\n            <div class="select">\r\n                <p class="text destination-text">{{local \'general.select\'}}</p>\r\n            </div>\r\n        </div>\r\n        <span class="filter-tip category-tip">{{local \'general.and\'}}</span>\r\n        <div class="filter-select category-filter select-root" data-allownull="false">\r\n        </div>\r\n        <span class="filter-tip sorting-tip">{{local \'general.and\'}}</span>\r\n        <div data-allownull="false" class="filter-select select-root sortby-filter" data-item="IFNAR">\r\n            <!--<ul style="display:none" data-label="{{local "general.sortby"}}" data-allownull="false" class="page-filter-component sortby-dropdown-container">-->\r\n            <div data-value="bestSellerIndex-asc">{{local "general.top_sellers"}}</div>\r\n            <div data-value="rating-asc">{{local "general.rating_low_to_high"}}</div>\r\n            <div data-value="rating-desc">{{local "general.rating_high_to_low"}}</div>\r\n            <div data-value="price-asc">{{local "general.price_low_to_high"}}</div>\r\n            <div data-value="price-desc">{{local "general.price_high_to_low"}}</div>\r\n            <!--</ul>-->\r\n        </div>\r\n\r\n\r\n    </div>\r\n\r\n'},{}],2007:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../../abmb/stateful.js"),a=e("../../../ui/dropdown-v2/view"),o=e("../../../ui/dropdown-v2/item-model"),s=e("../../../ui/util");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("./template.hbs")),ddTemplate:Handlebars.compile(e("../../../ui/dropdown-v2/template-mobile.hbs")),className:"select-root",ui:{destinationPopup:".destination-popup",select:".select",destinationText:".destination-text",categoryText:".category-text",destinationFilter:".destination-filter",categoryFilter:".category-filter",categoryTip:".category-tip",categorySelect:".category-select",filterButton:".mobile-filter-button",fullScreen:".mobile-fullscreen",close:".wgt-mobile-close",clear:".clear-all",apply:".apply-filters"},events:{"click @ui.close":function(){this.$el.hasClass("expanded")?this.activeFilter===this.ddLocation?this.model.get("location")?this.ddLocation.model.back():this.$el.removeClass("expanded"):this.activeFilter===this.ddCategory?this.$el.removeClass("expanded"):this.exitFullScreenFilter():this.exitFullScreenFilter()},"click @ui.clear":function(){this.model.set("location",void 0),this.model.set("category",void 0),this.ddLocation.setItems(o.createFromLocations(this.DAO.locations),!0)},"click @ui.filterButton":function(){this.ui.fullScreen.show()},"click @ui.apply":"applyFilters","click @ui.select":function(e){var t=this,i=jQuery(e.target).closest(".mobile-select");switch(i.data("filter")){case"destination":t.activeFilter=t.ddLocation,t.ui.destinationFilter.show(),t.ui.categoryFilter.hide();break;case"category":t.activeFilter=t.ddCategory,t.ui.categoryFilter.show(),t.ui.destinationFilter.hide()}t.$el.addClass("expanded"),t.ddLocation.refreshScroll(),t.ddCategory.refreshScroll()},"click .destination-item":"switchDestination"},switchDestination:function(e){var t=jQuery(e.target).closest(".destination-item");this.ddLocation.setItems(o.createFromLocations(this.DAO.locations),!0);var i=this.DAO.locations.findWhere({destinationid:t.data("destinationid"),level:"city"});return i&&(this.ddLocation.setItem(i.parent),this.ddLocation.setItem(i)),!1},setDestinationBasedOnName:function(e){var t=e||s.queryparam("city");if(t){this.ddLocation.setItems(o.createFromLocations(this.DAO.locations),!0);for(var i=null,n=0;n<this.DAO.locations.models.length;n++){var c=this.DAO.locations.models[n],e=c.get("name")||"";if("city"===c.get("level")&&e.toLowerCase()==t.toLowerCase()){i=c;break}}i&&(this.ddLocation.setItem(i.parent),this.ddLocation.setItem(i))}},exitFullScreenFilter:function(){this.$el.removeClass("expanded"),this.ui.fullScreen.is(":visible")&&(this.ui.fullScreen.hide(),jQuery(window).scrollTop(0))},applyFilters:function(){this.options.pageModel.applyFilter({location:this.model.get("location"),category:this.model.get("category")})},initialize:function(e){var t=this;t.DAO=e.DAO,e.DAO.promise.then(function(){t.model.set("topLocations",t.DAO.top10Locations.get("items")),t.render(),t.ui.fullScreen.hide(),t.ddLocation=a.createFromDOM(t.ui.destinationFilter,t.ddTemplate),t.ddCategory=a.createFromDOM(t.ui.categoryFilter,t.ddTemplate),t.ddLocation.setItems(o.createFromLocations(t.DAO.locations)),t.ddLocation.model.on("change:selected",function(){t.model.set({location:t.ddLocation.getSelectedItemItem()})}),t.ddCategory.model.on("change:selected",function(){t.model.set({category:t.ddCategory.getSelectedItemItem()})}),t.ui.categorySelect.hide(),t.ui.categoryTip.hide(),t.options.pageModel.on("change:promise",function(){t.switchState("loading:show"),t.options.pageModel.get("promise").then(function(){t.switchState("loading:hide"),t.exitFullScreenFilter()})}),t.model.on("change:promise",function(){t.switchState("loading:show"),t.model.get("promise").then(function(){t.switchState("loading:hide")})}),t.model.on("change:categories",function(){var e=t.model.get("categories")&&t.model.get("categories").length,i=e&&(n.find(t.model.get("categories"),function(e){return/^all$/i.test(e.get("subname"))})||t.model.get("categories")[0]);t.ddCategory.setItems(n.map(t.model.get("categories"),function(e){return s.getInstanceModel(o,{item:e,text:e.get("subname")})})),t.ddCategory.model.set({disabled:!e}),t.ddCategory.setItem(i),e?(t.ui.categorySelect.show(),t.ui.categoryTip.show()):(t.ui.categorySelect.hide(),t.ui.categoryTip.hide())}),t.model.on("change:category change:location",function(){t.switchState("category:"+!!t.model.get("category")),t.switchState("location:"+!(!t.model.get("location")||!t.model.get("location").get("destinationid"))),t.$el.attr("data-has-filter-criteria",!!t.model.get("location"))}),t.model.on("change:location",function(){var e=t.model.get("location");e&&"city"==e.get("level")?t.ui.destinationText.text(e.get("name")):t.ui.destinationText.text(i18n.t("general.select"))}),t.model.on("change:category",function(){var e=t.model.get("category");e&&t.ui.categoryText.text(e.get("subname"))}),t.switchState("loading:hide"),t.setDestinationBasedOnName()})}}))},{"../../../abmb/stateful.js":72,"../../../ui/dropdown-v2/item-model":2078,"../../../ui/dropdown-v2/template-mobile.hbs":2080,"../../../ui/dropdown-v2/view":2084,"../../../ui/util":2122,"./template.hbs":2006,backbone:8,"backbone.marionette":6,underscore:42}],2006:[function(e,t,i){t.exports='\r\n\r\n\r\n<div class="mobile-filter-button"> <span class="loading-container">\r\n              <div class="loading-block">\r\n                <p class="loading-gif"></p>\r\n              </div>\r\n              <div class="loading-error-block"></div></span>\r\n    <a class="wgt-iconbutton-widthinitial"><span class="icon-icon_J006"></span>\r\n    <label>{{local \'tours.filter_experiences\'}}</label></a>\r\n</div>\r\n\r\n<div class="mobile-fullscreen">\r\n    <span class="loading-container">\r\n              <div class="loading-block">\r\n                <p class="loading-gif"></p>\r\n              </div>\r\n              <div class="loading-error-block"></div></span>\r\n    <div class="title-block">\r\n        <h4 class="title">{{local \'tours.filter_experiences\'}}</h4><a class="wgt-mobile-close"><span class="icon-icon_B017"></span></a>\r\n    </div>\r\n    <!--mobile filter default-->\r\n    <div class="default">\r\n        <div class="main-content">\r\n            <h5 class="title">{{local \'tours.show_experiences_from\'}}</h5>\r\n            <div class="mobile-destination">\r\n                <ul class="list">\r\n                    {{#each topLocations}}\r\n                        <li><a class="item destination-item" data-name="{{attributes.name}}"\r\n                               data-destinationid="{{attributes.destinationid}}">{{attributes.name}}</a>\r\n                        </li>\r\n                    {{/each}}\r\n                </ul>\r\n                <div class="select mobile-select" data-filter="destination">\r\n                    <p class="text destination-text">{{local \'general.select\'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="mobile-otherselect"><span class="tip category-tip">{{local \'general.and\'}}</span>\r\n                <div class="select mobile-select category-select" data-filter="category">\r\n                    <p class="text category-text">{{local \'general.select\'}}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="cta-button">\r\n            <a class="wgt-sqbutton-dark clear-all">{{local \'tours.clear_all\'}}</a>\r\n            <a class="wgt-sqbutton-blue apply-filters">{{local \'tours.apply_filters\'}}</a>\r\n        </div>\r\n    </div>\r\n    <!--mobile filter selection-->\r\n    <div class="destination-filter" data-allownull="false">\r\n\r\n    </div>\r\n\r\n    <div class="category-filter" data-allownull="false">\r\n\r\n    </div>\r\n</div>'},{}],2005:[function(e,t,i){var n=e("backbone");e("underscore"),e("./../model/category-model"),e("../../../../../config/host.js"),i=t.exports=n.Model.extend({defaults:{location:null,categories:null,category:void 0},setPromise:function(e){return this.set({promise:e},{silent:!0}),this.trigger("change:promise"),e},initialize:function(e){var t=this;t.on("change:location",function(){t.set({categories:void 0}),t.get("location")&&"city"==t.get("location").get("level")&&t.setPromise(t.get("location").getCategories().promise).then(function(){t.set({categories:t.get("location").getCategories().models})})}),t.on("change:categories",function(){t.set({category:void 0})})}})},{"../../../../../config/host.js":45,"./../model/category-model":2012,backbone:8,underscore:42}],2012:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=(e("../../../../../config/host.js"),e("./product-collection"));t.exports=n.Model.extend({getProducts:function(){return this.products=this.products||new c({category:this})},defaults:{id:null,subid:null,name:null,subname:""}})},{"../../../../../config/host.js":45,"./product-collection":2018,backbone:8,underscore:42}],2018:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../../../config/host.js"),a=e("./product-model.js"),o=e("underscore.string/sprintf");t.exports=c.Collection.extend({model:a,parse:function(e){return n.map(e,function(e,t){return e.bestSellerIndex=t,e})},initialize:function(e){e.recommendedUrl?"undefined"!=typeof itemId&&null!=itemId?this.url=l.getURL("api",o("shops/subproduct/all?destid=0&cateid=0&subcateid=0&city=&countrycode=&itemid=%s",itemId)):this.url=e.recommendedUrl:"undefined"!=typeof itemId&&null!=itemId?this.url=l.getURL("api",o("shops/subproduct/all?destid=%d&cateid=%s&subcateid=%s&city=%s&countrycode=%s&itemid=%s",e.category.location.get("destinationid"),e.category.id,e.category.get("subid"),e.category.location.get("name"),e.category.location.get("countrycode"),itemId)):this.url=l.getURL("api",o("shops/product/all?destid=%d&cateid=%s&subcateid=%s&city=%s&countrycode=%s",e.category.location.get("destinationid"),e.category.id,e.category.get("subid"),e.category.location.get("name"),e.category.location.get("countrycode"))),this.promise=this.fetch()}})},{"../../../../../config/host.js":45,"./product-model.js":2019,backbone:8,underscore:42,"underscore.string/sprintf":41}],2019:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=(e("../../../../../config/host.js"),e("./product-price-model"));t.exports=c.Model.extend({getPrices:function(){return this.prices=this.prices||new l({product:this})},parse:function(e){return n.extend({id:e.code},e)},defaults:{id:"",content:"",type:"Shop",code:"",title:"",image_small:"",image_big:"",currency_code:"",price:"",price_formatted:"",rating:0,review_count:0,url:""}})},{"../../../../../config/host.js":45,"./product-price-model":2020,backbone:8,underscore:42}],2020:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../../config/host.js");t.exports=n.Model.extend({defaults:{currency:"",price:0},initialize:function(e){this.url=c.getURL("api","shops/product/prices?code="+e.product.get("code")),this.promise=this.fetch()}})},{"../../../../../config/host.js":45,backbone:8,underscore:42}],2004:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../../abmb/stateful.js"),a=e("./model");e("../../../ui/util");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("./template.hbs")),events:{"click .tpl-tourside-blog":function(e){var t=jQuery(e.target).closest(".tpl-tourside-blog"),i=t.data("url");i&&(window.location.href=i)}},initialize:function(e){var t=this;t.model=new a,t.DAO=e.DAO,t.render(),e.DAO.promise.then(function(){t.model.set("blogs",t.DAO.topBlogs.models.slice(0,3)),t.render()})},renderForLocation:function(e){var t=this;e?e.get("blogs")?(t.model=e.get("blogs").clone(),t.render()):(t.switchState("loading:show"),t.model.fetchByLocation(e).then(function(){t.model.set("locationName",e.get("name")),e.set("blogs",t.model.clone()),t.render(),t.switchState("loading:hide")},function(){t.model.set("locationName",e.get("name")),e.set("blogs",new a),t.render(),t.switchState("loading:hide")})):(t.model.set("locationName",!1),t.model.set("blogs",t.DAO.topBlogs.models.slice(0,3)),t.render())},onRender:function(){var e=this.model.get("blogs");e&&e.length?this.$el.show():this.$el.hide()}}))},{"../../../abmb/stateful.js":72,"../../../ui/util":2122,"./model":2002,"./template.hbs":2003,backbone:8,"backbone.marionette":6,underscore:42}],2003:[function(e,t,i){t.exports='<!--<span class="loading-container"><div class="loading-block"><p class="loading-gif"></p></div>-->\r\n<!--<div class="loading-error-block"><p></p></div></span>-->\r\n<h5 class="sidebar-item-name">{{local \'tours.blogs\'}}</h5>\r\n<div class="sidebar-hotel">\r\n    {{#each blogs}}\r\n        <div class="tpl-tourside-blog" data-url="{{attributes.url}}">\r\n            <img class="blog-image" src="{{attributes.imageUrl}}">\r\n            <div class="blog-detail">\r\n                <h6 class="name">{{attributes.category}}</h6>\r\n                <p class="description">{{attributes.title}}</p>\r\n            </div>\r\n        </div>\r\n    {{/each}}\r\n</div>'},{}],2002:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../../../config/host.js");t.exports=c.Model.extend({parse:function(e){return{blogs:n.map(e,function(e){return new c.Model({category:e.categoryName,url:e.item_url,title:e.title,imageUrl:e.image_url})})}},fetchByLocation:function(e){return this.url=l.getURL("api","blog/randomBlogs?count=3&locationID="+e.get("id")),this.fetch()}})},{"../../../../../config/host.js":45,backbone:8,underscore:42}],1937:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("./type-collection")),l=e("./search-collection"),a=e("./search-model"),o=e("../ui/paginator/view-model"),s=e("../ui/util"),r=s.getUser();t.exports=o.extend({defaults:{tab:"",perpage:8,type:"",searches:null,types:null,favorites:null,items:null,itemsAttribute:"items"},initialize:function(){o.prototype.initialize.apply(this,arguments);var e=this,t=new c,i=new l;e.set({types:t,searches:i,promise:jQuery.when(t.fetch(),i.fetch(),r.fetchPromise).then(function(){e.listenTo(i,"reset",function(){new a({id:"all"}).destroy()}),e.listenTo(i,"remove reset",function(){e.trigger("change:searches")}),e.listenTo(t,"remove",function(){e.trigger("change:types")}),e.listenTo(r.get("scratchpad"),"change remove reset",function(){e.trigger("change:scratchpad")}),e.on("change:tab change:searches change:favorites",function(){e.set({items:"searches"==this.get("tab")?n.clone(this.get("searches").models):this.get("favorites")})}),e.on("change:tab",function(){e.set({page:1})}),e.on("change:favorites",function(){e.set({tab:"favorites"})}),e.on("change:type change:types change:scratchpad",function(){e.set({favorites:r.get("scratchpad").where(n.extend({favourite:!0},"all"==e.get("type")?{}:{type:e.get("type")}))})})})})},removeSearchAll:function(){this.get("searches").reset()},removeSearch:function(e){this.get("searches").get(e).destroy()},removeType:function(){var e=this,t=e.get("type"),i=e.get("types").findWhere({type:t});items="all"==t?r.get("scratchpad").models:r.get("scratchpad").where({type:t}),i.clone().destroy(),r.get("scratchpad").remove(items)}})},{"../ui/paginator/view-model":2103,"../ui/util":2122,"./search-collection":1933,"./search-model":1934,"./type-collection":1935,backbone:8,underscore:42}],1935:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../config/host.js"),a=e("./type-model");t.exports=c.Collection.extend({model:a,url:l.getURL("api","scratchpad/types"),parse:function(e){var t=n.findWhere(e,{type:"all"})||{type:"all",name:local&&local.all||"All"};return[t].concat(n.sortBy(n.without(e,t),"name"))}})},{"../../../config/host.js":45,"./type-model":1936,backbone:8,underscore:42}],1936:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../config/host.js");t.exports=n.Model.extend({urlRoot:c.getURL("api","scratchpad/type"),defaults:{type:"",name:"",icon:""},parse:function(e){return{id:e.type,type:e.type,name:e.name,icon:e.iconindex}}})},{"../../../config/host.js":45,backbone:8,underscore:42}],1933:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../config/host.js"),a=e("./search-model");t.exports=c.Collection.extend({model:a,url:l.getURL("api","user/searches"),parse:function(e){return n.sortBy(e.terms.concat(e.hotels),"timestamp").reverse()}})},{"../../../config/host.js":45,"./search-model":1934,backbone:8,underscore:42}],1934:[function(e,t,i){var n=(e("underscore"),e("../../../config/host.js")),c=e("backbone");t.exports=c.Model.extend({urlRoot:function(){return n.getURL("api","user/searches/"+("all"==this.id?"":this.get("hotel")?"hotel":"term"))},parse:function(e){return"string"==typeof e.bookurl&&(e.bookurl=e.bookurl+"#rooms"),n.adjustURLs(e,"url")},defaults:{id:"",timestamp:"",datediff:"",url:"",term:"",hotel:null,bookurl:"",agebands:null,checkin:"",checkout:""}})},{"../../../config/host.js":45,backbone:8,underscore:42}],1923:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette");e("../ui/util");t.exports=ReviewBubbleView=l.ItemView.extend({model:new c.Model,template:Handlebars.compile(e("./template.hbs")),modelEvents:{change:"blockControl"},initialize:function(){var e,t,i=this;window.screen.width>768?(e=169,t=242):(e=128,t=60),i.reviews=window.dataReviews,i.initializeBlock(e,t);var c=i.getCurrentBlock(e,t),l=null,a=0;c&&(l=c.name,a=c.dissapear),i.inviewkey=l,i.dissapear=a,i.blockControl(),i.bodyHeight=document.body.clientHeight,jQuery(window).on("scroll",n.debounce(function(){i.bodyHeight!=document.body.clientHeight&&(i.bodyHeight=document.body.clientHeight,i.initializeBlock(e,t)),i.modelToShow(e,t)},50))},onRender:function(){var e=this;jQuery(".review-bubble").hide().fadeIn(260),jQuery(".review-bubble .icon-icon_B017").on("click",function(){var t=e.inviewkey;if(!t)return null;var i=e.reviews[t],c=n.contains(i,"");return i.isdestroy=!0,c?void 0:(e.updateModel(i),e.hideBlockControl(),!0)}),clearTimeout(e.intervalAuto),e.intervalAuto=null,e.dissapear>0&&(e.intervalAuto=setTimeout(e.hideBlockControl,e.dissapear))},hideBlockControl:function(){var e=jQuery(".review-bubble");e.fadeOut(260)},initializeBlock:function(e,t){var i=this;i.blocks=n.sortBy(n.keys(i.reviews).map(function(e){var t=jQuery("[data-review="+e+"]");return 0!=t.length?n.map(t,function(t){var i=parseInt(jQuery(t).attr("data-review-dissapear"))||0,n=jQuery(t).offset().top+(jQuery(t).attr("data-review-offset")?Number(jQuery(t).attr("data-review-offset")):0)+jQuery(t).find(".data-review-offset-element").innerHeight();return{name:e,obj:t,start:n,end:jQuery(t).offset().top+jQuery(t).height(),dissapear:i}}):void 0}),"start")},modelToShow:function(e,t){var i=this,n=i.getCurrentBlock(e,t),c=null;n?i.inviewkey!=n.name&&(c=n.name,i.inviewkey=c,i.dissapear=n.dissapear,i.blockControl()):null!=i.inviewkey&&(i.inviewkey=c,i.blockControl())},getCurrentBlock:function(e,t){var i=this,c=jQuery(document).scrollTop(),l=n.map(i.blocks,function(i){return i?n.find(i,function(i){return i&&i.start<c+t&&i.end>c+e+t?i:void 0}):void 0});return n.find(l,function(e){return e?e:void 0})},blockControl:function(){var e=this,t=jQuery(".review-bubble");e.getReview()?e.render():t.fadeOut(260)},getReview:function(){var e=this,t=e.inviewkey;if(!t)return null;var i=e.reviews[t],c=n.contains(i,"");return c||i.isdestroy?!1:(e.updateModel(i),!0)},updateModel:function(e){this.model.set(e)}})},{"../ui/util":2122,"./template.hbs":1922,backbone:8,"backbone.marionette":6,underscore:42}],1922:[function(e,t,i){t.exports='<div class="review-bubble" dat>\r\n    <div class="review-bubble__reviewers-info"><img src="{{reviewavatar}}" alt="">\r\n        <p class="reviewers-text">{{reviewname}}</p><span class="icon-icon_B017"></span>\r\n    </div>\r\n    <div class="review-bubble__review">\r\n        <p class="review-text">"{{review}}"</p>\r\n    </div>\r\n</div>'},{}],1906:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("./listView/view.js");e("../model/collection.js");t.exports=n.CollectionView.extend({childView:c,initialize:function(e){var t=this;t.collection=e.DAO.myCollection},onRender:function(){}})},{"../model/collection.js":1896,"./listView/view.js":1905,"backbone.marionette":6,underscore:42}],1905:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("./template.hbs"),l=(e("../../../../../ui/util"),e("../../../../../../../config/host.js"));t.exports=n.ItemView.extend({template:Handlebars.compile(c),ui:{},events:{"click #hotelslist .h-det .r-background":"jumpWhere","click #hotelslist .choose":"jumpOther","click #hotelslist .nextUrl":"nextWhere"},initialize:function(){},
jumpWhere:function(e){var t=jQuery(e.target).closest(".h-det .r-background");window.location.href=l.getURL(t.data("jumpid"))},jumpOther:function(e){var t=jQuery(e.target).closest(".h-det .choose");t&&t.data("otherurl")&&(window.location.href=t.data("otherurl"))},nextWhere:function(e){var t=jQuery(e.target).closest(".h-det .nextUrl");window.location.href=l.getURL(t.data("jumpid"))},onRender:function(){}})},{"../../../../../../../config/host.js":45,"../../../../../ui/util":2122,"./template.hbs":1904,"backbone.marionette":6,underscore:42}],1904:[function(e,t,i){t.exports='<!--<div class="container-quick-book">-->\r\n\r\n<ul id="hotelslist" class="pure-compatible">\r\n    <li class="hotels pure-u-1">\r\n        <div class="pure-compatible h-wrp">\r\n            <div class="h-img pure-u-1-3 pure-u-md-1-4 pure-u-lg-1-4">\r\n                {{#if badgetitle}}\r\n                <div class="tag pure-u-1 bl"><span>{{badgetitle}}</span></div>\r\n                {{/if}}\r\n                <div style="background: url(\'{{infoimages.[0]}}\') no-repeat center center; background-size: cover" class="cities the_chelsea_harbour_hotel"></div><span data-spanid=\'{{id}}\'  class="mag">\r\n\r\n                              <svg width="100px" height="100px" viewbox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\r\n                                  <title>iconOri</title>\r\n                                  <desc>Created with Sketch.</desc>\r\n                                  <defs></defs>\r\n                                  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\r\n                                      <g id="Artboard-1" transform="translate(-26.000000, -13.000000)" fill="#FFFFFF">\r\n                                          <g id="Page-1" transform="translate(26.000000, 13.000000)">\r\n                                              <path id="Fill-1" d="M100,50 C100,22.386 77.614,0 50,0 C22.386,0 0,22.386 0,50 C0,77.614 22.386,100 50,100 C62.215,100 73.401,95.614 82.085,88.339 L66.497,72.223 C61.825,75.631 56.364,77.425 50.617,77.425 C35.94,77.425 24,65.554 24,50.962 C24,36.371 35.94,24.5 50.617,24.5 C65.295,24.5 77.235,36.371 77.235,50.962 C77.235,57.537 74.859,63.727 70.515,68.55 L86.006,84.673 C94.665,75.683 100,63.468 100,50"></path>\r\n                                              <path id="Fill-3" d="M61.6945,53 L53.0005,53 L53.0005,61.694 C53.0005,62.876 52.1815,63.833 51.0005,63.833 C49.8185,63.833 49.0005,62.876 49.0005,61.694 L49.0005,53 L40.3055,53 C39.1245,53 38.1665,52.181 38.1665,51 C38.1665,49.819 39.1245,49 40.3055,49 L49.0005,49 L49.0005,40.306 C49.0005,39.124 49.8185,38.167 51.0005,38.167 C52.1815,38.167 53.0005,39.124 53.0005,40.306 L53.0005,49 L61.6945,49 C62.8755,49 63.8335,49.819 63.8335,51 C63.8335,52.181 62.8755,53 61.6945,53 M50.6175,29.877 C38.9135,29.877 29.3925,39.336 29.3925,50.962 C29.3925,62.589 38.9135,72.047 50.6175,72.047 C62.3215,72.047 71.8425,62.589 71.8425,50.962 C71.8425,39.336 62.3215,29.877 50.6175,29.877"></path>\r\n                                          </g>\r\n                                      </g>\r\n                                  </g>\r\n                              </svg></span>\r\n            </div>\r\n            <div class="h-det pure-u-2-3 pure-u-md-3-4 pure-u-lg-3-4">\r\n                <h1>{{name}}</h1>\r\n                {{#ifCond reevoo.ReviewFlag \'==\' 1}}\r\n                    <p class="r-d choose" data-otherurl="{{reevoo.ReviewUrl}}">\r\n                        {{reevoo.ReviewScore}} {{reevoo.ReviewMessage}}\r\n                    </p>\r\n                {{/ifCond}}\r\n                {{#ifCond reevoo.ReviewFlag \'==\' 2}}\r\n                    <p class="r-d choose" data-otherurl="{{reevoo.ReviewUrl}}">\r\n                        {{reevoo.ReviewScore}}/10 {{reevoo.ReviewMessage}}\r\n                    </p>\r\n                {{/ifCond}}\r\n                {{#ifCond reevoo.ReviewFlag \'==\' 3}}\r\n                    <p class="r-d choose">\r\n                        {{reevoo.ReviewMessage}}\r\n                    </p>\r\n                {{/ifCond}}\r\n\r\n                {{#if address}}\r\n                <p class="r-d"><span class="icon-icon_H001"></span> {{address}}</p>\r\n                {{/if}}\r\n                {{#if nearbytransport.[0].Value}}\r\n                <p class="r-d"><span class="icon-icon_F032"></span> {{nearbytransport.[0].Value}}</p>\r\n                {{/if}}\r\n                <p class="r-price"><sup>{{price.currency}}</sup> {{price.rate}}<span>{{local "Property.night"}}</span></p>\r\n                <p class="r-background"  data-jumpid="{{url}}">{{local "general.next"}}&gt</p>\r\n                <p class="nextUrl" data-jumpid="{{url}}"></p>\r\n            </div>\r\n        </div>\r\n    </li>\r\n</ul>\r\n<!--</div>-->\r\n'},{}],1880:[function(e,t,i){var n=(e("underscore"),e("./destinationslist-collection")),c=e("./top10-model.js"),l=e("../view/quickbook-collectionView/model/collection.js"),a=i=t.exports={locations:new n,top10City:new c,myCollection:new l};a.promise=jQuery.when(a.locations.fetch(),a.top10City.fetchCity(),a.myCollection.fetch()).then(function(){a.locations.createRelationalLinks(a)})},{"../view/quickbook-collectionView/model/collection.js":1896,"./destinationslist-collection":1881,"./top10-model.js":1883,underscore:42}],1896:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=(e("../../../../../../config/host.js").host,e("../../../../../../config/host.js")),l=e("../view/listView/model.js");t.exports=n.Collection.extend({model:l,url:c.getURL("api","quickbook/previousstay"),parse:function(e){return e.data}})},{"../../../../../../config/host.js":45,"../view/listView/model.js":1903,backbone:8,underscore:42}],1903:[function(e,t,i){function n(){for(var e=[],t="0123456789abcdef",i=0;36>i;i++)e[i]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}var c=(e("underscore"),e("../../../../../../../config/host.js"),e("backbone"));t.exports=c.Model.extend({initialize:function(){},parse:function(e){return e.id=e.id||n(),e}})},{"../../../../../../../config/host.js":45,backbone:8,underscore:42}],1881:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../../config/host.js"),a=e("../../destination/models/location-model");t.exports=c.Collection.extend({url:l.getURL("api","quickbook/destinations"),model:a,parse:function(e){var t=n.find(e.data,function(e){return"singapore"==e.key});return t.allowNoChildren=!0,t.destinationid=t.id,n.sortBy(n.filter(e.data,function(e){return"region"!=e.level}),"name")},createRelationalLinks:function(){this.each(function(e){e.setParent(this.get(e.get("parentid"))),e._name=e.get("name")},this)}})},{"../../../../config/host.js":45,"../../destination/models/location-model":823,backbone:8,underscore:42}],1873:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../../../../ui/util"),a=e("./model"),o=e("../../../../../quick-book-hotel/cookie-object"),s=e("../../../../../ui/validator");t.exports=c.ItemView.extend(n.extend({},{template:Handlebars.compile(e("./template.hbs")),ui:{registerBtn:"#signon",errorMessage:".error-msg",passwordError:".password-error",yob:"#yob",rHotel:"#rHotel",communications:".communications"},events:{"click @ui.registerBtn":"register"},register:function(){var e=this,t="undefined"==typeof quickbookformena?0:quickbookformena,i="undefined"==typeof pc?"":pc;e.model.set("quickbookformena",t),e.model.set("pc",i),e.trigger("save:form"),e.ui.errorMessage.hide(),e.model.isValid(!0)&&l.loading({showerror:!1,container:e.el,loading:"",promise:e.model.save({},{emulateJSON:!0,emulateForm:!0,success:function(e,t){o.save();var i="undefined"==typeof returnUrl?"":returnUrl,n=i?i:window.location.href,c=jQuery(".tippopupRegion");"undefined"!=typeof c&&null!=c&&c&&c.length&&c.length>0?(c.removeClass("popup-hide"),c.addClass("popup-show"),c.find("#membershipNO").html(t.profile.MembershipNo),c.find("#tipOkButton").attr("href",n)):(window.location.href=n,l.reload(),jQuery.cookie("registered",!0,{path:"/"}))},error:function(t,i){e.ui.errorMessage.text(i.responseJSON&&i.responseJSON[0]&&i.responseJSON[0].msg||i18n.t("general.network_error")),e.ui.errorMessage.show()}})})},initialize:function(){var e=this;this.model=(new a).on("password:error",function(){e.ui.passwordError.html(i18n.t("form_error.error_password_"+e.model.get("passwordError")))}),s.bind(this)},onRender:function(){var e=this,t=i18n.t("form.communications_statement4").replace("{0}",window.policyurl).replace("{1}",window.termsurl);e.ui.communications.html(t);var i=Handlebars.compile('<option value="{{value}}"{{#if selected}} selected{{/if}}>{{text}}</option>');if(e.ui.yob.html([i({value:"",text:i18n.t("form.year_of_birth")})].concat(n.range((new Date).getFullYear()-18,1900,-1).map(function(e){return i({value:"01/01/"+e,text:e})})).join("")),"undefined"!=typeof recommendedHotel&&null!=recommendedHotel&&recommendedHotel&&recommendedHotel.hotels.length>0){var c=Handlebars.compile('<option value="{{value}}"{{#if selected}} selected{{/if}}>{{text}}</option>');e.ui.rHotel.html([c({value:"",text:i18n.t("form.recommended_hotel")})].concat(recommendedHotel.hotels.map(function(e){return i({value:e.Id,text:e.Name})})).join(""))}}}))},{"../../../../../quick-book-hotel/cookie-object":1822,"../../../../../ui/util":2122,"../../../../../ui/validator":2123,"./model":1871,"./template.hbs":1872,"backbone.marionette":6,underscore:42}],1872:[function(e,t,i){t.exports='<form class="pure-form pure-form-stacked form" style="" autocomplete="off">\r\n    <fieldset>\r\n        <input style="display:none">\r\n        <input type="password" style="display:none">\r\n\r\n        <label for="firstName">{{local \'form.first_name\'}}</label>\r\n        <div class="field">\r\n            <div class="input-box">\r\n                <input id="firstName" type="text" data-bind="first_name"\r\n                       placeholder="{{local \'signup.first_name_placeholder\'}}">\r\n                <span class="error-tip null"> {{local "form_error.cannot_be_empty"}} </span>\r\n                <span class="error-tip not-null"> {{local "form_error.only_accepts_latin"}} </span>\r\n            </div>\r\n        </div>\r\n\r\n        <label for="lastName">{{local \'form.last_name\'}}</label>\r\n        <div class="field">\r\n            <div class="input-box">\r\n                <input id="lastName" type="text" data-bind="last_name"\r\n                       placeholder="{{local \'signup.last_name_placeholder\'}}">\r\n                <span class="error-tip null"> {{local "form_error.cannot_be_empty"}} </span>\r\n                <span class="error-tip not-null"> {{local "form_error.only_accepts_latin"}} </span>\r\n            </div>\r\n        </div>\r\n\r\n        <label for="email">{{local \'form.email\'}}</label>\r\n        <div class="field">\r\n            <div class="input-box">\r\n                <input id="email" type="email" data-bind="email" placeholder="{{local \'signup.email_placeholder\'}}">\r\n                <span class="error-tip null"> {{local "form_error.email_empty"}} </span>\r\n                <span class="error-tip not-null"> {{local "form_error.email_invalid"}} </span>\r\n            </div>\r\n        </div>\r\n\r\n\r\n\r\n        <label for="password">{{local \'form.password\'}}</label>\r\n        <div class="field">\r\n            <div class="input-box">\r\n                <input id="password" type="password" data-bind="password"\r\n                       placeholder="{{local "signup.pwd_enter_placeholder"}}" maxlength="20">\r\n                <span class="error-tip null">{{local "form_error.password_empty"}}</span>\r\n                <span class="error-tip not-null password-error"></span>\r\n            </div>\r\n        </div>\r\n\r\n        <label for="yob">{{local \'form.year_of_birth\'}}</label>\r\n        <div class="field">\r\n            <div class="input-box">\r\n                <div class="select">\r\n                    <select id="yob" type="text" data-bind="birthday">\r\n                        <option value="">{{local \'form.year_of_birth\'}}</option>\r\n                    </select></div>\r\n                <span class="error-tip null">{{local "form_error.cannot_be_empty"}}</span>\r\n            </div>\r\n        </div>\r\n        <p class="birth-des des">{{local "form.birth_description"}}</p>\r\n        <p class="des">{{local "form.send_email_statement"}}</p>\r\n        <h2>{{local "form.communications_title"}}</h2>\r\n        <p class="des">{{local "form.communications_statement1"}}</p>\r\n        <p class="des">{{local "form.communications_statement2"}}</p>\r\n        <div class="checkboxs field"><i data-bind="group" class="checkbox"></i>\r\n            <div class="content">{{local "form.the_mhr_group"}}</div>\r\n        </div>\r\n        <div class="checkboxs field"><i data-bind="affiliates" class="checkbox"></i>\r\n            <div class="content">{{local "form.the_mhr_group_third"}}</div>\r\n        </div>\r\n        <p>{{local "form.communications_statement3"}}</p>\r\n        <div class="checkboxs field"><i data-bind="tick" class="checkbox"></i>\r\n            <div class="content communications"></div><span class="error-tip null">{{local "form_error.confirm_policy_empty"}}</span>\r\n        </div>\r\n        <!---->\r\n    </fieldset>\r\n</form>\r\n\r\n<!--TODO update the js code for error text-->\r\n<p class="error-msg pure-u-1"></p>\r\n\r\n<button id="signon" class="pure-button pure-button-primary bl">{{local \'quickbook.register\'}}</button>'},{}],1871:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../../../../config/host.js"),l=e("../../../../../ui/validator"),a=l.latinRegex3;t.exports=n.Model.extend({url:c.getURL("api","account/signup"),defaults:{},initialize:function(){},validation:{email:{required:!0,pattern:"email"},first_name:{required:!0,pattern:a,maxLength:254},last_name:{required:!0,pattern:a,maxLength:254},birthday:{required:!0},tick:{required:!0},password:function(e){var t=!e&&"null"||e.length<8&&"length"||!/[0-9]/.test(e)&&"number"||!(/[a-z]/i.test(e)&&/[0-9]/.test(e))&&"letters_numbers"||!l.patterns.keyboard.test(e)&&"must_contain";return t&&(this.set("passwordError",t),this.trigger("password:error")),t}}})},{"../../../../../../../config/host.js":45,"../../../../../ui/validator":2123,backbone:8,underscore:42}],2115:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("underscore.string/sprintf"),a=(e("../../ui/util"),e("./model")),o=e("../../destination/map/map-styles"),s=e("../../maps/api/google/google.maps.api");t.exports=c.ItemView.extend(n.extend({},{template:!1,initialize:function(e){this.model=new a({markers:e.markers,markerObjs:[]})},onRender:function(){var e=this;s.then(n.bind(e.renderMap,e))},renderMap:function(){var t=this,i=t.googleMap=new google.maps.Map(t.$el.get(0),{mapTypeId:"labels-on",disableDefaultUI:!1,scrollwheel:!1,draggable:t.options.draggable,center:{lat:t.options.lat,lng:t.options.lng},zoom:t.options.zoom?t.options.zoom:13});t.MarkerWithLabelOriginal=e("../../destination/map/markerwithlabel"),i.addListener("idle",function(){n.each(t.model.get("markers"),t.addMarker,t)}),n.each(["on","off"],function(e){i.mapTypes.set("labels-"+e,new google.maps.StyledMapType(o.concat([{featureType:"all",elementType:"labels",stylers:[{visibility:e}]},{featureType:"poi.business",elementType:"labels",stylers:[{visibility:"off"}]}])))})},customZIndex:300,addMarker:function(e){var t=e.icon||"/assets/img/blank.png",i=(e.iconClass?l('<div class="map-marker-png %s"></div>',e.iconClass):"")+(e.name?l('<div class="map-marker-name-label">%s</div>',e.name):""),n=this;!e.icon&&(e.iconindex||e.collection&&e.collection.get("iconindex"));new n.MarkerWithLabelOriginal({zIndex:e.zIndex||n.customZIndex,position:{lat:e.lat,lng:e.lng},map:n.googleMap,icon:t,labelAnchor:new google.maps.Point(50,60),labelClass:"map-marker",labelContent:i})}}))},{"../../destination/map/map-styles":802,"../../destination/map/markerwithlabel":803,"../../maps/api/google/google.maps.api":1120,"../../ui/util":2122,"./model":2114,"backbone.marionette":6,underscore:42,"underscore.string/sprintf":41}],2114:[function(e,t,i){var n=e("underscore"),c=(e("../../ui/util"),e("backbone"));t.exports=c.Model.extend({initialize:function(){},getCenter:function(e){var t=this,i=e||t.get("markers")&&[t.get("markers").attributes];return latMin=n.min(n.pluck(i,"lat")),latMax=n.max(n.pluck(i,"lat")),lngMin=n.min(n.pluck(i,"lng")),lngMax=n.max(n.pluck(i,"lng")),{lat:latMin+(latMax-latMin)/2,lng:lngMin+(lngMax-lngMin)/2}}})},{"../../ui/util":2122,backbone:8,underscore:42}],1915:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../../../abmb/stateful.js"),a=(e("../../../../ui/util"),e("../../../../../../config/host.js"),e("../assets/template.hbs"));t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(a),ui:{search:"#search-input-wrapper"},events:{"click #search-list li a":"switchSearch","click #ten_top a ":"switchTop10"},initialize:function(e){var t=this;t.DAO=e.DAO,e.searchInputs.on("keyup",n.debounce(function(e){13!=e.keyCode&&(t.$el.show(),t.model.set("sing",jQuery(e.target).val()))},600)),e.searchInputs.on("keyup",function(e){if(t.$("#search-list").length){var i=t.$(".item.selected"),n=t.$(".item"),c=Math.min(void 0===i.data("sortindex")?-1:i.data("sortindex"),n.length-1),l=jQuery("#search-list").offset().top;switch(e.keyCode){case 38:if(-1!=c)if(i.removeClass("selected"),c--,t.$('.item[data-sortindex="'+c+'"]').addClass("selected"),c>0){var a=t.$('.item[data-sortindex="'+c+'"]').offset().top;jQuery("#search-list").scrollTop(a-l)}else jQuery("#search-list").scrollTop(0);return!1;case 40:if(c!=n.length-1){i.removeClass("selected"),c++,t.$('.item[data-sortindex="'+c+'"]').addClass("selected");var a=t.$('.item[data-sortindex="'+c+'"]').offset().top+10;t.$('.item[data-sortindex="'+c+'"]').offset().top>500&&jQuery("#search-list").scrollTop(a-l)}return!1;case 13:i.length&&(i.hasClass("destination-item")?i.click():window.location.href=i.attr("href"))}}}),t.model.on("change:sing",function(){jQuery.when(t.model.search()).then(function(){t.render()})}),e.DAO.promise.then(function(){t.model.set("top10City",t.DAO.top10City.attributes.top10city),t.render()})},switchSearch:function(e){e.stopPropagation()},switchTop10:function(e){e.stopPropagation()},onRender:function(){var e=this;e.$(".item").each(function(e,t){jQuery(t).attr("data-sortindex",e)})}}))},{"../../../../../../config/host.js":45,"../../../../abmb/stateful.js":72,"../../../../ui/util":2122,"../assets/template.hbs":1913,"backbone.marionette":6,underscore:42}],1913:[function(e,t,i){t.exports='\r\n<ul id="search-list" class="sw">\r\n    {{#if sing}}\r\n\r\n        {{#if hasData}}\r\n                {{#each history}}\r\n                    <li class="recent-search">\r\n                        <a href="{{url}}" class="item" data-searchid="{{url}}"><span class="icon-icon_B002"></span>{{name}}</a>\r\n                    </li>\r\n                {{/each}}\r\n\r\n                <li class="list-item-location">\r\n                    {{#each city}}\r\n                         <div>\r\n                             <a href="{{url}}" data-searchid="{{url}}" class="item">\r\n                                 <span class="icon-icon_A002"></span> {{name}} <span class="num">{{hotelcount}}</span>\r\n                             </a>\r\n                         </div>\r\n\r\n                         <ul id="querylist" >\r\n                             {{#each hotels}}\r\n                                 <li class="" data-searchid=""><a href="{{url}}" class="item"><span class="icon-icon_B002"></span>{{name}}</a></li>\r\n                             {{/each}}\r\n                         </ul>\r\n                    {{/each}}\r\n                </li>\r\n        {{else}}\r\n            <div id="top-destinations" style="display: block">\r\n                <div>\r\n                    <p class="noResults">{{local "quickbook.search_noresults"}}</p>\r\n                    <h3 style="font-size: 0.6em;color: #ba0c2f;text-transform: uppercase;padding-top: .6em">{{local "quickbook.search_destinations"}}</h3>\r\n                    <div class="pure-compatible" id="ten_top">\r\n                        {{#each top10City}}\r\n                            <a href="{{url}}" data-top10id="{{url}}" class="pure-u-1-2">{{name}}</a>\r\n                        {{/each}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        {{/if}}\r\n\r\n        {{else}}\r\n            <div id="top-destinations" style="display: block">\r\n                <div>\r\n                    <h3 style="font-size: 0.6em;color: #ba0c2f;text-transform: uppercase">{{local "quickbook.search_destinations"}}</h3>\r\n                    <div class="pure-compatible" id="ten_top">\r\n                        {{#each top10City}}\r\n                            <a href="{{url}}" data-top10id="{{url}}" class="pure-u-1-2">{{name}}</a>\r\n                        {{/each}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    {{/if}}\r\n\r\n</ul>\r\n\r\n\r\n'},{}],1914:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../../../config/host.js");t.exports=n.Model.extend({searchUrl:c.getURL("api","quickbook/search?keyword="),parse:function(e){var t=e.data.history,i=e.data.city;return{history:t,city:i,hasData:(t.length||i.length)&&"200"==e.status,topCity:this.get("top10City")}},initialize:function(){},search:function(){var e=this.get("sing");return!e||e.length<2?!0:(this.url=this.searchUrl+encodeURIComponent(e),this.fetch())}})},{"../../../../../../config/host.js":45,backbone:8,underscore:42}],1895:[function(e,t,i){var n=e("underscore"),c=e("moment"),l=(e("backbone"),e("backbone.marionette")),a=e("../../../../abmb/stateful.js"),o=e("../../../../booking/model"),s=e("../../../../global-booking-widget/home-page/search-widget/dates-widget/calendar/view"),r=e("../../../../global-booking-widget/prop-page/01-article/03-dates/calendar/locals"),g=e("./occupancy/view"),d=e("./promocode/view"),I=e("../../../../quick-book-hotel/cookie-object"),b=e("../../../../ui/util"),C=e("../../../../quick-book-hotel/view-event"),u=e("./../template.hbs");t.exports=l.LayoutView.extend(n.extend({},a,{template:function(e){return Handlebars.compile(u)(e)},ui:{updateBtn:"#u-w-btn",cancelBtn:"#date-wrapper .cancel-btn",updateBar:"#u-w-default",calendars:"#calendar-wrp",occupancy:"#occupancy-wrapper",datesInput:"#dates-left",checkBtn:"#check-btn",codeBtn:"#code_opt, .code-close-btn",promoCode:"#promo-code",checkIn:".checkin",checkOut:".checkout"},regions:{calendar:"#calendar-wrp"},events:{"click @ui.updateBar":"toggleEdit","click @ui.cancelBtn":"toggleEdit","click @ui.codeBtn":"toggleCode","click @ui.checkBtn":"clickCheckbtn","click #dates-left p":function(e){e.stopPropagation(),this.__showPrevDate()},"click #dates-right p":function(e){e.stopPropagation(),this.__showNextDate()}},initialize:function(e){var t=this;t.firstLoad=!0,t.model=new o({persist:!1,promocodeValid:{discountcode:!0,groupcode:!0,promo:!0,packageurl:""}}),b.ismobile()&&(t.model.get("dates").checkin=c(c(t.model.get("dates").checkin)-6048e5).format("YYYY-MM-DD"),t.model.get("dates").checkout=c(c(t.model.get("dates").checkout)-6048e5).format("YYYY-MM-DD")),t.model.set({hotel:{code:e&&e.hotelInfo&&e.hotelInfo.hotelcode},cityid:e&&e.hotelInfo&&e.hotelInfo.cityid}),t.occupancyView=new g(e),t.occupancyView.model.on("change:adult",function(){t.ui.checkBtn.removeClass("disabled"),t.model.get("occupancy").findWhere({key:"adults"}).set("value",this.get("adult"))}).on("change:child",function(){t.ui.checkBtn.removeClass("disabled"),t.model.get("occupancy").findWhere({key:"children"}).set("value",this.get("child"))}),e.widgetmodel=t.model.toJSON(),t.promoCodeView=new d(e).on("code:applied",n.bind(this.checkAvailability,this)),t.promoCodeView.model.set("checkin",t.model.get("dates").checkin),t.promoCodeView.model.set("checkout",t.model.get("dates").checkout),t.promoCodeView.model.on("change:promocode",function(){t.model.set2("promocode","promo",this.get("promocode"))}).on("change:groupcode",function(){t.model.set2("promocode","groupcode",this.get("groupcode"))}).on("change:discountcode",function(){t.model.set2("promocode","discountcode",this.get("discountcode"))}),t.promoCodeView.on("change:specialRates",function(){var e=t.promoCodeView.ui.rateSelect.val(),i=n.clone(t.model.get("promocode"));i.AAA=!1,i.AARP=!1,i.GOV=!1,i.Accessible=!1,e&&(i[e]=!0),t.model.set("promocode",i)}),C.on("update",function(){t.$el.addClass("expanded"),jQuery("html, body").animate({scrollTop:t.$el.offset().top-50},500)})},toggleEdit:function(){this.$el.toggleClass("expanded")},__setOptions:function(e){this.prevDate=e.prevDate,this.nextDate=e.nextDate,this.__rendered&&(this.ui.checkIn.html(this.__formatDate(this.prevDate)),this.ui.checkOut.html(this.__formatDate(this.nextDate)),this.flagsDate=e)},__formatDate:function(e){var t=b.getDateFormat();return e?c(e).format("MMM DD"):t},__showPrevDate:function(e){var t=this;t.ui.calendars.show(),this.$el.hasClass("code-expanded")&&this.toggleCode(),t.$el.addClass("calendar-expanded");var i=new s({model:t.model});t.getRegion("calendar").empty(),i.on("date:been:select",function(e){var n=e,l=t.nextDate,a=!l;(null==l||n>=l)&&(l=r.nextDate(n)),t.model.set({dates:{checkin:c(n).format("YYYY-MM-DD"),checkout:c(l).format("YYYY-MM-DD")}}),t.promoCodeView.model.set("checkin",t.model.get("dates").checkin),t.promoCodeView.model.set("checkout",t.model.get("dates").checkout),t.__setOptions({prevDate:n,nextDate:l}),a?t.__showNextDate({nowMonth:i.nowMonth,prevDate:n,nextDate:l}):(t.getRegion("calendar").empty(),t.ui.checkBtn.removeClass("disabled"),t.collapseCalendar())}),i.on("date:will:select",function(e){var n=e,c=t.nextDate;(null==c||n>=c)&&(c=r.nextDate(n)),i.showDateCSS({prevDate:n,nextDate:c})}),i.on("date:cancel",function(){e||(t.getRegion("calendar").empty(),t.$el.removeClass("calendar-expanded"),t.ui.checkBtn.removeClass("disabled")),e=!1}),i.initOptions({nowMonth:this.prevDate?new Date(this.prevDate.getFullYear(),this.prevDate.getMonth(),1):void 0,prevDate:this.prevDate,nextDate:this.nextDate}),t.getRegion("calendar").show(i)},__showNextDate:function(e){var t=this;t.ui.calendars.show(),t.$el.addClass("calendar-expanded"),this.$el.hasClass("code-expanded")&&this.toggleCode();var i=new s({model:t.model});t.getRegion("calendar").empty(),i.on("date:been:select",function(e){if(e>r.nowDate()){var i=t.prevDate,n=e;(null==i||i>=n)&&(i=r.prevDate(n)),t.__setOptions({prevDate:i,nextDate:n}),t.model.set({dates:{checkin:c(i).format("YYYY-MM-DD"),checkout:c(n).format("YYYY-MM-DD")}}),t.promoCodeView.model.set("checkin",t.model.get("dates").checkin),t.promoCodeView.model.set("checkout",t.model.get("dates").checkout),t.getRegion("calendar").empty(),t.ui.checkBtn.removeClass("disabled"),t.collapseCalendar()}}),i.on("date:will:select",function(e){if(e>r.nowDate()){var n=t.prevDate,c=e;(null==n||n>=c)&&(n=r.prevDate(c)),i.showDateCSS({prevDate:n,nextDate:c})}}),i.on("date:cancel",function(){t.getRegion("calendar").empty(),t.$el.removeClass("calendar-expanded"),t.ui.checkBtn.removeClass("disabled")}),i.initOptions(e||{nowMonth:t.prevDate?new Date(t.prevDate.getFullYear(),t.prevDate.getMonth(),1):void 0,prevDate:t.prevDate,nextDate:t.nextDate}),t.getRegion("calendar").show(i)},openCalendar:function(){},toggleCode:function(){!this.$el.hasClass("code-expanded")&&this.$el.hasClass("calendar-expanded")&&this.collapseCalendar(),this.$el.toggleClass("code-expanded"),this.ui.codeBtn.toggleClass("active")},collapseCalendar:function(e){e=e&&"boolean"==typeof e;var t=n.clone(this.model.get("dates")),i=!1;if(t.checkin)t.checkout||(t.checkout=t.defaultCheckout,i=!0);else{var c=this.calendarView.originalDatesModel;t.checkin=c.get("checkin"),t.checkout=c.get("checkout"),i=!0}i&&this.model.set({dates:t},{silent:e}),e||(this.ui.calendars.hide(),this.$el.removeClass("calendar-expanded"))},clickCheckbtn:function(){this.ui.checkBtn.hasClass("disabled")||this.checkAvailability()},checkAvailability:function(e,t){e=e&&"boolean"==typeof e,this.collapseCalendar(e),e||(this.$el.removeClass("code-expanded"),this.ui.codeBtn.removeClass("active"),this.render());var i=this.model.get("promocode");I.content.checkin=this.model.get("dates").checkin,I.content.checkout=this.model.get("dates").checkout,I.content.adult=this.model.get("adultCount"),I.content.child=this.model.get("childCount"),I.content.promocode=i.promo,I.content.groupcode=i.groupcode,I.content.AAA=i.AAA,I.content.AARP=i.AARP,I.content.GOV=i.GOV,I.content.Accessible=i.Accessible,I.content.discountcode=i.discountcode,t||I.save(!0),this.trigger("check:rates"),e||this.$el.removeClass("expanded")},onRender:function(){var e=this;if(e.__rendered=!0,e.occupancyView.setElement(e.ui.occupancy).render(),e.promoCodeView.setElement(e.ui.promoCode).render(),I.resuming&&!I.bookingWidgetResumed){e.model.set("dates",{checkin:I.content.checkin,checkout:I.content.checkout});var t=Math.max(1,Math.min(e.options.hotelInfo.adultocc||9,parseInt(I.content.adult))),i=Math.max(0,Math.min(e.options.hotelInfo.childocc||9,e.options.hotelInfo.maxocc||18-t,parseInt(I.content.child)));e.occupancyView.ui.adultSelect.val(t).trigger("change"),e.occupancyView.ui.childSelect.val(i).trigger("change"),e.promoCodeView.ui.promoCodeInput.val(I.content.promocode),e.promoCodeView.ui.groupCodeInput.val(I.content.groupcode),e.promoCodeView.ui.discountCodeInput.val(I.content.discountcode);var n="";switch(n){case I.content.AAA:n="AAA";break;case I.content.AARP:n="AARP";break;case I.content.GOV:n="GOV";break;case I.content.Accessible:n="Accessible"}e.promoCodeView.ui.rateSelect.val(n),e.promoCodeView.model.set("promocode",I.content.promocode),e.promoCodeView.model.set("groupcode",I.content.groupcode),e.promoCodeView.model.set("discountcode",I.content.discountcode),e.promoCodeView.model.set("AAA",I.content.AAA),e.promoCodeView.model.set("AARP",I.content.AARP),e.promoCodeView.model.set("GOV",I.content.GOV),e.promoCodeView.model.set("Accessible",I.content.Accessible),I.bookingWidgetResumed=!0,e.checkAvailability(!1,!0)}else e.firstLoad&&(e.firstLoad=!1,e.checkAvailability(!0,!0))}}))},{"../../../../abmb/stateful.js":72,"../../../../booking/model":406,"../../../../global-booking-widget/home-page/search-widget/dates-widget/calendar/view":909,"../../../../global-booking-widget/prop-page/01-article/03-dates/calendar/locals":935,"../../../../quick-book-hotel/cookie-object":1822,"../../../../quick-book-hotel/view-event":1843,"../../../../ui/util":2122,"./../template.hbs":1885,"./occupancy/view":1888,"./promocode/view":1894,backbone:8,"backbone.marionette":6,moment:16,underscore:42}],1894:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("backbone.marionette")),c=e("./model"),l=e("./promo-code-check-promise"),a=e("./group-code-check-promise"),o=e("./discount-code-check-promise"),s=e("../../../../../ui/util"),r=e("./template.hbs");PromoCodeView=t.exports=n.ItemView.extend({template:Handlebars.compile(r),ui:{apply:"#apply-code-btn",promoCodeInput:"#promo-code-input",promoCodeField:"#promo-code-field",groupCodeInput:"#group-code-input",groupCodeField:"#group-code-field",discountCodeInput:"#discount-code-input",discountCodeField:"#discount-code-field",discountCodeError:"#discount-code-error",rateSelect:".special-rates-select"},events:{"click @ui.apply":"applyCodes","change @ui.promoCodeInput":function(){this.ui.promoCodeField.removeClass("input-error not-null null valid"),this.model.set("promocode","")},"change @ui.groupCodeInput":function(){this.ui.groupCodeField.removeClass("input-error not-null null valid"),this.model.set("groupcode","")},"change @ui.discountCodeInput":function(){this.ui.discountCodeField.removeClass("input-error not-null null valid"),this.model.set("discountcode","");
},"change @ui.rateSelect":function(){var e=this.ui.rateSelect.val(),t={AAA:!1,AARP:!1,GOV:!1,Accessible:!1};e&&(t[e]=!0),this.model.set(t),this.trigger("change:specialRates")}},applyCodes:function(){var e=this;e.ui.promoCodeField.removeClass("input-error not-null null valid"),e.ui.groupCodeField.removeClass("input-error not-null null valid"),e.ui.discountCodeField.removeClass("input-error not-null null valid");var t=jQuery.Deferred(),i=jQuery.Deferred(),n=jQuery.Deferred(),c=e.ui.promoCodeInput.val(),r=e.ui.groupCodeInput.val(),g=e.ui.discountCodeInput.val();g?o({hotelcode:e.options.hotelInfo.hotelcode,discountcode:g,cityid:e.options.hotelInfo.cityid,checkin:e.model.get("checkin"),checkout:e.model.get("checkout"),adults:e.options.widgetmodel.adultCount,children:e.options.widgetmodel.childCount}).then(function(t){t.valid?(e.model.set("discountcode",g),n.resolve(),e.ui.discountCodeField.addClass("input-error null valid"),t.url&&s.redirect(t.url)):(n.reject(),e.ui.discountCodeField.addClass("input-error not-null"),t.message&&e.ui.discountCodeError.text(t.message))},function(){n.reject(),e.ui.discountCodeField.addClass("input-error not-null")}):n.resolve(),c?l({hotelcode:e.options.hotelInfo.hotelcode,promocode:c,cityid:e.options.hotelInfo.cityid}).then(function(i){i.valid?(e.model.set("promocode",c),t.resolve(),e.ui.promoCodeField.addClass("input-error null valid"),i.url&&s.redirect(i.url)):(t.reject(),e.ui.promoCodeField.addClass("input-error not-null"))},function(){t.reject(),e.ui.promoCodeField.addClass("input-error not-null")}):t.resolve(),r?a({hotelcode:e.options.hotelInfo.hotelcode,groupcode:r,cityid:e.options.hotelInfo.cityid}).then(function(t){t.valid?(e.model.set("groupcode",r),i.resolve(),e.ui.groupCodeField.addClass("input-error null valid")):(i.reject(),e.ui.groupCodeField.addClass("input-error not-null"))},function(){i.reject(),e.ui.groupCodeField.addClass("input-error not-null")}):i.resolve(),s.loading({loading:"",showerror:!1,container:e.$el,promise:jQuery.when(t.promise(),i.promise(),n.promise()).then(function(){e.trigger("code:applied")})})},initialize:function(e){this.model=new c({isAmerican:e&&e.hotelInfo&&"False"!=e.hotelInfo.isamerican,accessibleRoom:e&&e.hotelInfo&&"False"!=e.hotelInfo.accessibleroom})}})},{"../../../../../ui/util":2122,"./discount-code-check-promise":1889,"./group-code-check-promise":1890,"./model":1891,"./promo-code-check-promise":1892,"./template.hbs":1893,backbone:8,"backbone.marionette":6,underscore:42}],1893:[function(e,t,i){t.exports='<div class="container" >\r\n    <div class="head-btn blue" >\r\n        <p >{{local \'quickbook.codes_options\'}}</p >\r\n        <a ><span class="icon-icon_B017 code-close-btn" ></span ></a >\r\n    </div >\r\n\r\n    <div class="pure-compatible" >\r\n        <form >\r\n            <label class="pure-u-1 special-codes" style="" >{{local\r\n                \'quickbook.special_codes\'}}</label >\r\n            <div class="form" >\r\n                <div class="pure-u-1-4 left" >\r\n                    <label class="code-label" >{{local\r\n                        \'quickbook.promo_code\'}}</label >\r\n                    <div id="promo-code-field" class="field" >\r\n                        <div class="input-box" >\r\n                            <input id="promo-code-input" type="text"\r\n                                   name="spPromoCode"\r\n                                   placeholder="{{local\r\n                                       \'quickbook.promo_code\'}}"\r\n                                   value="{{promocode}}" >\r\n                            <span class="error-tip not-null" >{{local\r\n                                \'booking.promocode_invalid\'}}</span >\r\n                            <span class="error-tip null" >{{local\r\n                                \'booking.promocode_valid\'}}</span >\r\n                        </div >\r\n                    </div >\r\n                </div >\r\n                <div class="pure-u-1-4 right" >\r\n                    <label class="code-label" >{{local\r\n                        \'quickbook.group_code\'}}</label >\r\n                    <div id="group-code-field" class="field" >\r\n                        <div class="input-box" >\r\n                            <input id="group-code-input" name="spGroupCode"\r\n                                   placeholder="{{local \'quickbook.group_code\'}}"\r\n                                   value="{{groupcode}}" >\r\n                            <span class="error-tip not-null" >{{local\r\n                                \'booking.groupcode_invalid\'}}</span >\r\n                            <span class="error-tip null" >{{local\r\n                                \'booking.groupcode_valid\'}}</span >\r\n                        </div >\r\n                    </div >\r\n                </div >\r\n                <div class="pure-u-1-4 right"  style="padding-left: .5rem">\r\n                    <label class="code-label" >Discount Code</label >\r\n                    <div id="discount-code-field" class="field" >\r\n                        <div class="input-box" >\r\n                            <input id="discount-code-input" name="spDiscountCode"\r\n                                   placeholder="Discount Code"\r\n                                   value="{{discountcode}}" >\r\n                            <span class="error-tip not-null" id="discount-code-error">{{local\r\n                                    \'booking.discount_code_invalid\'}}</span >\r\n                            <span class="error-tip null" >{{local\r\n                                    \'booking.discount_code_valid\'}}</span >\r\n                        </div >\r\n                    </div >\r\n                </div >\r\n            </div >\r\n\r\n            {{#or true isAmerican accessibleRoom}}\r\n                <label class="pure-u-1" >{{local\r\n                    \'quickbook.special_rates\'}}</label >\r\n                <div class="select pure-u-3-4"\r\n                     style="   border-radius: 0 !important; border-color: black;" >\r\n                    <select class="pure-u-1 special-rates-select" id="rate" >\r\n                        <option value="" >{{local \'general.select\'}}</option >\r\n                        {{#if isAmerican}}\r\n                        <option value="AAA" {{#if AAA}}selected{{/if}}>{{local\r\n                            "booking.AAA_CAA"}}</option >\r\n                        <option value="AARP" {{#if AARP}}selected{{/if}}>{{local\r\n                            "booking.Senior_AARP"}}</option >\r\n                        <option value="GOV" {{#if GOV}}selected{{/if}}>{{local\r\n                            "booking.Government"}}</option >\r\n                        {{/if}}\r\n                        {{#if accessibleRoom}}\r\n                            <option value="Accessible"\r\n                                    {{#if Accessible}}selected{{/if}}>{{local\r\n                                "booking.accessible_room"}}</option >\r\n                        {{/if}}\r\n                    </select >\r\n                </div >\r\n            {{/or}}\r\n\r\n            <button id="apply-code-btn" type="button"\r\n                    class="pure-u-5-24 pure-button pure-button-primary desktop {{#ifCond\r\n                        isAmerican \'||\'\r\n                        accessibleRoom}}{{else}}no-special-code-btn{{/ifCond}}" >\r\n                {{local \'general.apply\'}}\r\n            </button >\r\n        </form >\r\n    </div >\r\n</div >'},{}],1892:[function(e,t,i){var n=(e("underscore"),e("../../../../../ui/util"));t.exports=function(e){return jQuery.ajax({url:n.getURL("api",e.cityid?"promocheckbycity":"promocheck"),data:jQuery.param({promocode:e.promocode,hotelcode:e.hotelcode,cityid:e.cityid})})}},{"../../../../../ui/util":2122,underscore:42}],1891:[function(e,t,i){var n=(e("underscore"),e("backbone"));t.exports=n.Model.extend({initialize:function(){},defaults:{groupcode:"",promocode:"",discountcode:""}})},{backbone:8,underscore:42}],1890:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("../../../../../ui/util"));t.exports=function(e){return jQuery.ajax({url:n.getURL("api",e.cityid?"groupcodecheckbycity":"groupcodecheck"),data:jQuery.param({groupcode:e.groupcode,hotelcode:e.hotelcode,cityid:e.cityid})})}},{"../../../../../ui/util":2122,backbone:8,underscore:42}],1889:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("../../../../../ui/util"));t.exports=function(e){return jQuery.ajax({url:n.getURL("api",e.cityid?"discountcodecheckbycity":"discountcodecheck"),data:jQuery.param({discountcode:e.discountcode,hotelcode:e.hotelcode,cityid:e.cityid,checkin:e.checkin,checkout:e.checkout,adults:e.adults,children:e.children})})}},{"../../../../../ui/util":2122,backbone:8,underscore:42}],1888:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("backbone.marionette")),c=e("./model");t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),ui:{adultSelect:"#adult-num",childSelect:"#child-num"},events:{"change @ui.adultSelect":function(e){var t=parseInt(jQuery(e.target).val());this.model.set("adult",t),this.model.set("childocc",Math.min(this.model.get("maxocc")-t,this.model.get("childoccDefault"))),this.render()},"change @ui.childSelect":function(e){var t=parseInt(jQuery(e.target).val());this.model.set("child",t),this.model.set("adultocc",Math.min(this.model.get("maxocc")-t,this.model.get("adultoccDefault"))),this.render()}},initialize:function(e){this.model=new c({maxocc:e&&e.hotelInfo&&e.hotelInfo.maxocc||18,adultocc:e&&e.hotelInfo&&e.hotelInfo.adultocc||9,adultoccDefault:e&&e.hotelInfo&&e.hotelInfo.adultocc||9,childocc:e&&e.hotelInfo&&e.hotelInfo.childocc||9,childoccDefault:e&&e.hotelInfo&&e.hotelInfo.childocc||9})},onRender:function(){}})},{"./model":1886,"./template.hbs":1887,backbone:8,"backbone.marionette":6,underscore:42}],1887:[function(e,t,i){t.exports='<span class="icon-icon_I008 desktop-icon"></span>\r\n<div class="occupancy-desk">\r\n    <div class="padding-wrapper">\r\n        <span class="dates">{{local \'booking.adults\'}}</span>\r\n        <div class="select white pure-u-1-2 short">\r\n            <select class="pure-u-1" id="adult-num">\r\n                {{#for 1 adultocc 1}}\r\n                    <option {{#ifCond ../adult \'==\' this}}selected{{/ifCond}} value="{{this}}">{{this}}</option>\r\n                {{/for}}\r\n            </select>\r\n        </div>\r\n    </div>\r\n</div><div class="occupancy-desk">\r\n    <div class="padding-wrapper">\r\n        <span class="dates">{{local \'booking.children\'}}<span class="age-below">({{local-replace \'booking.below_12\' \'12\'}})</span></span>\r\n        <div class="select white pure-u-1-2 short">\r\n            <select class="pure-u-1" id="child-num">\r\n                {{#for 0 childocc 1}}\r\n                    <option {{#ifCond ../child \'==\' this}}selected{{/ifCond}} value="{{this}}">{{this}}</option>\r\n                {{/for}}\r\n            </select>\r\n        </div>\r\n    </div>\r\n</div>'},{}],1886:[function(e,t,i){var n=(e("underscore"),e("backbone"));t.exports=n.Model.extend({defaults:{maxocc:18,adultocc:9,adultoccDefault:9,childocc:9,childoccDefault:9,adult:1,child:0}})},{backbone:8,underscore:42}],1885:[function(e,t,i){t.exports='<div class="pure-compatible" id="u-w-default">\r\n    <div class="pure-u-1">\r\n        <div id="dates-summary" class="pure-u-13-24 pure-u-md-1-4 pure-u-lg-1-4 pure-u-xl-1-4">\r\n            <span class="icon-icon_D002 desktop-icon"></span>\r\n            <h5>{{local "booking.dates"}}</h5>\r\n            <p>\r\n                <span>{{date-with-format dates.checkin \'MMM DD\'}} - {{date-with-format dates.checkout \'MMM DD\'}}</span>\r\n            </p>\r\n        </div>\r\n        <div class="pure-u-9-24 pure-u-md-1-4 pure-u-lg-1-4 pure-u-xl-1-4" id="occupancy-summary">\r\n            <span class="icon-icon_I008 desktop-icon"></span>\r\n            <h5>{{local "booking.occupancy"}}</h5>\r\n            <p>\r\n                <span>{{occupancySummary}}</span>\r\n            </p>\r\n        </div>\r\n        <div class="pure-u-2-24 pure-u-md-1-2 pure-u-lg-1-2 pure-u-xl-1-2">\r\n            <a id="u-w-btn"><span class="icon-icon_J006"></span><span class="udpate-content">{{local "general.update"}}</span></a>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<div id="u-w-expand">\r\n    <form name="bookDetailForm">\r\n        <!-- DESKTOP HOHOHO -->\r\n        <div class="u-w-exp pure-compatible form-wrapper">\r\n            <div id="date-wrapper" class="pure-u-12-24 u-w-e-wrp desktop">\r\n                <div class="date-select">{{local "booking.select_dates"}}</div>\r\n                <div class="cancel-btn"><span class="icon-icon_B017"></span><span class="cancel-content">{{local "general.cancel"}}</span></div>\r\n                <span class="icon-icon_D002 desktop-icon"></span>\r\n                <div id="dates-left" class="dates-input">\r\n                    <span class="dates dates-label">{{local "form.check_in_date"}}</span>\r\n                    <p><span class="icon-icon_D002 mobile-icon"></span>\r\n                            <span id="sel1text"\r\n                                  class="change checkin">{{date-with-format dates.checkin \'MMM DD\'}}</span>\r\n                    </p>\r\n                </div>\r\n                <div id="dates-right" class="dates-input">\r\n                    <span class="dates dates-label">{{local "form.check_out_date"}}</span>\r\n                    <p><span class="icon-icon_D002 mobile-icon"></span>\r\n                            <span id="sel2text"\r\n                                  class="change checkout">{{date-with-format dates.checkout \'MMM DD\'}}</span>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            <div id="calendar-wrp" class="pure-u-1 desktop">\r\n            </div>\r\n\r\n            <div id="occupancy-wrapper" class="pure-u-6-24 u-w-e-wrp desktop">\r\n\r\n            </div>\r\n\r\n            <div id="code-option-wrapper" class="pure-u-6-24 u-w-e-wrp desktop">\r\n                <span class="icon-icon_I008 desktop-icon"></span>\r\n                <div  class="dates-input">\r\n                    <span class="dates dates-label">{{local "quickbook.codes_options"}}</span>\r\n                    <p>\r\n                        <span id="code_opt" class="change">Select Codes & Options</span>\r\n                    </p>\r\n                </div>\r\n\r\n                <!--<div id="submit-wrapper">-->\r\n                    <!--<div id="check-btn" type="submit" class="pure-button pure-button-primary wh" style="padding: .9rem 1rem !important">{{local "booking.check_availability"}}</div>-->\r\n                <!--</div>-->\r\n                <!--<a id="code_opt" class="" style="">{{local "quickbook.codes_options"}}<span-->\r\n                        <!--class="icon-icon_B021"></span></a>-->\r\n            </div>\r\n        </div>\r\n        <div class="checkbnt">\r\n            <span class="disabled" id="check-btn">{{local "booking.check_availability"}}</span>\r\n        </div>\r\n    </form>\r\n</div>\r\n<!-- </div> -->\r\n\r\n<!-- codes and options popup -->\r\n<div id="promo-code">\r\n\r\n</div>'},{}],1884:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l={};n.extend(l,c.Events),t.exports=l},{backbone:8,underscore:42}],1809:[function(e,t,i){var n=(e("underscore"),e("../quick-book/model/top10-model.js")),c=i=t.exports={top10City:new n};c.promise=jQuery.when(c.top10City.fetchCity()).then(function(){})},{"../quick-book/model/top10-model.js":1883,underscore:42}],1883:[function(e,t,i){var n=(e("underscore"),e("../../destination/list/model")),c=e("../../../../config/host.js");t.exports=n.extend({top10Url:c.getURL("api","quickbook/destinations/top10"),parse:function(e){return{top10city:e.data}},fetchCity:function(){return this.url=this.top10Url,this.fetch()}})},{"../../../../config/host.js":45,"../../destination/list/model":790,underscore:42}],1859:[function(e,t,i){t.exports='<li class="promotions pure-u-1" style="background: #f5f5f5;border-top: 1px solid #ddd;padding: 6em 1.5em;text-align: center; min-height: 50vh">\r\n    <p>\r\n        {{local "Property.no_room_avaliable"}}\r\n    </p>\r\n</li>'},{}],1902:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("./template.hbs"),l=e("./model"),a=(e("hammerjs"),e("../../../../../../../assets/lib/jquery.hammer.js"),e("../imgcarouselView/view.js"));t.exports=n.ItemView.extend({template:Handlebars.compile(c),ui:{imgCarouselView:"#img-carousel-box"},events:{"click .swiper-button-prev":"prev","click .swiper-button-next":"next","click #img-carousel-box>div>div.swiper-pagination>span":function(e){var t=jQuery(e.target).closest("#img-carousel-box>div>div.swiper-pagination>span"),i=t.data("index");this.index=i,this.imgCaroueseRender(this.index,this.DAO.infoimages,this.DAO.infoimages[this.index],this.ui.imgCarouselView,this.DAO.badgetitle)},"click #g-amenities-tab>a":function(e){var t=jQuery(e.target).closest("#g-amenities-tab>a");"pure-u-1-2"==t.prevObject.context.className&&(jQuery("#g-amenities-tab>a").removeAttr("class"),jQuery("#g-amenities-tab>a").attr("class","pure-u-1-2"),"amenitiesclick"==t.prevObject.context.id?(jQuery("#amenitiesclick").attr("class","pure-u-1-2 active"),jQuery("#g-contact").hide(),jQuery("#g-amenities").show()):(jQuery("#contactusclick").attr("class","pure-u-1-2 active"),jQuery("#g-amenities").hide(),jQuery("#g-contact").show()))}},prev:function(){this.index=this.index-1,this.index<0&&(this.index=this.allindex),this.imgCaroueseRender(this.index,this.DAO.infoimages,this.DAO.infoimages[this.index],this.ui.imgCarouselView,this.DAO.badgetitle)},next:function(){this.index=this.index+1,this.index>this.allindex&&(this.index=0),this.imgCaroueseRender(this.index,this.DAO.infoimages,this.DAO.infoimages[this.index],this.ui.imgCarouselView,this.DAO.badgetitle)},initialize:function(e){var t=this;t.DAO=e.DAO,t.ListMark=e.ListMark,t.model=new l,t.model.setValue(t.DAO,t.ListMark),t.allindex=parseInt(t.DAO.infoimages.length)-1,parseInt(t.allindex)<-1&&(t.allindex=0),t.index=0},onRender:function(){var e=this;e.imgCaroueseRender(e.index,this.DAO.infoimages,e.DAO.infoimages[e.index],this.ui.imgCarouselView,e.DAO.badgetitle),this.setupSwipe()},imgCaroueseRender:function(e,t,i,n,c){this.imgcarouselView=new a({DAO:t,Img:i,el:n,badgetitle:c}).render(),jQuery("#img-carousel-box>div>div.swiper-pagination>span").removeClass("swiper-pagination-bullet-active"),jQuery("#img-carousel-box>div>div.swiper-pagination>span#index-"+e).addClass("swiper-pagination-bullet-active")},setupSwipe:function(){var e=this;e.ui.imgCarouselView.hammer({touchAction:"pan-y"}).on("swipeleft swiperight",function(t){switch(t.type){case"swipeleft":e.next();break;case"swiperight":e.prev()}})}})},{"../../../../../../../assets/lib/jquery.hammer.js":44,"../imgcarouselView/view.js":1899,"./model":1900,"./template.hbs":1901,"backbone.marionette":6,hammerjs:12,underscore:42}],1901:[function(e,t,i){t.exports='{{#if mark}}\r\n    <div id="big-box-btn">\r\n        <div id="head-btn-show" class="white gallery" style="">\r\n            <p>{{datas.name}}</p><a><span class="icon-icon_B017 gallery-close"></span></a>\r\n        </div>\r\n        <div id="img-carousel-box" style="">\r\n\r\n        </div>\r\n        <div id="quickamenities" style="">\r\n            <ul id="g-amenities" class="pure-g">\r\n                {{#each amenities}}\r\n                    <li class="pure-u-1-2"><span class="{{fonticon}}"></span>\r\n                    <!--<li class="pure-u-1-2"><img src="{{icon}}" style="height: 1.6em; width: 1.6em" />-->\r\n                        <p>{{name}}</p>\r\n                    </li>\r\n                {{/each}}\r\n            </ul>\r\n        </div>\r\n    </div>\r\n{{else}}\r\n    <div id="big-box-btn">\r\n        <div id="head-btn-show" class="white gallery" style="">\r\n            <p>{{datas.name}}</p><a><span class="icon-icon_B017 gallery-close"></span></a>\r\n        </div>\r\n        <div id="img-carousel-box" style="">\r\n\r\n        </div>\r\n        <div id="quickamenities" style="">\r\n            <div id="g-amenities-tab" class="pure-g" style="">\r\n                <a id="amenitiesclick" class="pure-u-1-2 active">{{local "Dining.amenities"}}</a>\r\n                <a id="contactusclick" class="pure-u-1-2">{{local "Dining.contact_us"}}</a></div>\r\n            <ul id="g-amenities" class="pure-g">\r\n                {{#each amenities}}\r\n                    <li class="pure-u-1-2"><span class="{{fonticon}}"></span>\r\n                    <!--<li class="pure-u-1-2"><img src="{{icon}}" style="height: 1.6em; width: 1.6em" />-->\r\n                        <p>{{name}}</p>\r\n                    </li>\r\n                    <!--<li class="pure-u-1-2"><img src="{{icon}}" style="height: 8%; width: 8%" />-->\r\n                    <!--<p>{{name}}</p>-->\r\n                    <!--</li>-->\r\n                {{/each}}\r\n            </ul>\r\n        </div>\r\n        <div id="g-contact" class="pure-g desktop">\r\n            <a href="tel:{{datas.telphone}}" class="pure-u-1">\r\n                <span class="icon-icon_H002"></span>\r\n                <p style="line-height: 3em;">{{datas.telphone}}<span></span></p></a>\r\n            <a href="mailto:{{datas.email}}?Subject={{local "quickbook.booking_request"}}" target="_top" class="pure-u-1">\r\n                <span class="icon-icon_H003"></span>\r\n                <p style="line-height: 3em;">{{local "signup.email_label"}}<span></span></p></a>\r\n            <a id="pagelink" href="{{datas.url}}" class="pure-u-1">\r\n                <span class="icon-icon_B002"></span>\r\n                <p style="line-height: 3em;">{{local "quickbook.vist_hotel_page"}}<span class="icon-icon_B021" style="padding-top: 0px;"></span></p></a></div>\r\n    </div>\r\n{{/if}}'},{}],1900:[function(e,t,i){var n=(e("underscore"),e("backbone"));t.exports=n.Model.extend({setValue:function(e,t){for(var i=[],n=0;8>n;n++)i.push(e.amenities[n]);this.set({datas:e,amenities:i,mark:t})}})},{backbone:8,underscore:42}],1899:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("./template.hbs"),l=e("./model");t.exports=n.ItemView.extend({template:Handlebars.compile(c),initialize:function(e){var t=this;t.Img=e.Img,t.DAO=e.DAO,t.badgetitle=e.badgetitle,t.Imglength=!0,t.DAO.length<=1&&(t.Imglength=!1),t.model=new l,t.model.setValue(t.Img,t.DAO,t.badgetitle,t.Imglength),t.render()}})},{"./model":1897,"./template.hbs":1898,"backbone.marionette":6,underscore:42}],1898:[function(e,t,i){t.exports='<div class="swiper-container swiper-container-horizontal" style="background: url(\'{{img}}\');background-position: center center;background-repeat: no-repeat;background-color:#000;background-size: auto 100%">\r\n    {{#if badgetitle}}\r\n        <span id="g-tag">{{badgetitle}}</span>\r\n        {{else}}\r\n        <span></span>\r\n    {{/if}}\r\n    <div class="swiper-pagination swiper-pagination-clickable swiper-pagination-bullets">\r\n        {{#if Imglength}}\r\n            {{#each num}}\r\n                <span id="index-{{@index}}" data-index="{{@index}}" class="swiper-pagination-bullet swiper-pagination-bullet-active" style="border-radius:50%;opacity:0.7"></span>\r\n            {{/each}}\r\n        {{else}}\r\n            <span></span>\r\n        {{/if}}\r\n        <!--<span class="swiper-pagination-bullet swiper-pagination-bullet-active"  style="border-radius:50%;"></span>-->\r\n    </div>\r\n    {{#if Imglength}}\r\n        <div class="swiper-button-next"><span class="icon-icon_B021"></span></div>\r\n        <div class="swiper-button-prev"><span class="icon-icon_B021"></span></div>\r\n    {{/if}}\r\n</div>'},{}],1897:[function(e,t,i){var n=(e("underscore"),e("backbone"));t.exports=n.Model.extend({setValue:function(e,t,i,n){this.set({img:e,num:t,badgetitle:i,Imglength:n})}})},{backbone:8,underscore:42}],1862:[function(e,t,i){t.exports={}},{}],1843:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l={};n.extend(l,c.Events),t.exports=l},{backbone:8,underscore:42}],1824:[function(e,t,i){var n=jQuery(".quick-book-layout-hotel");t.exports=n.length?n.data():{}},{}],1644:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("./model");WeatherView=t.exports=c.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),initialize:function(){this.model=new l({location:this.$el.data("location")}),this.model.get("location")&&this.model.fetch().then(n.bind(this.render,this))}})},{"./model":1642,"./template.hbs":1643,"backbone.marionette":6,underscore:42}],1643:[function(e,t,i){t.exports="{{#ifCond centigrade '!=' ''}}\r\n    <div class=\"tpl-weather\">\r\n        <span class=\"icon-icon_{{icon}}\"></span>\r\n        <div>\r\n            <p>{{centigrade}}°C / {{fahrenheit}}°F</p>\r\n            <!--<p>{{datetime}}</p>-->\r\n        </div>\r\n    </div>\r\n{{/ifCond}}"},{}],1642:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js");WeatherModel=t.exports=n.Model.extend({url:function(){return c.getURL("weather",this.get("location"))},defaults:{icon:"35",centigrade:"",fahrenheit:"",datetime:""}})},{"../../../../config/host.js":45,backbone:8,underscore:42}],1641:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("./model");FacebookFriendsView=t.exports=c.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),initialize:function(){this.model=new l({hotelcode:this.$el.data("hotelcode")}),this.model.get("hotelcode")&&this.model.fetch().then(n.bind(this.render,this))}})},{"./model":1639,"./template.hbs":1640,"backbone.marionette":6,underscore:42}],1640:[function(e,t,i){t.exports='<div>{{#each friends}}<i><img src="{{avatar}}" alt=""></i>{{/each}}</div>\r\n<p class="tpl-friend-desktop">{{message}}</p>\r\n<p class="tpl-friend-mobile">{{messagemobile}}</p>'},{}],1639:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js");i=t.exports=n.Model.extend({url:function(){return c.getURL("api","fbfriends/"+this.get("hotelcode"))},defaults:{hotelcode:"",friends:"",message:"",messagemobile:""}})},{"../../../../config/host.js":45,backbone:8,underscore:42}],1608:[function(e,t,i){var n=(e("backbone"),e("backbone.marionette"));t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs"))})},{"./template.hbs":1609,backbone:8,"backbone.marionette":6}],1609:[function(e,t,i){t.exports='{{#if result.length}}\r\n<ul>\r\n    {{#each result}}\r\n    <li><a href="{{url}}">{{title}}</a></li>\r\n    {{/each}}\r\n</ul>\r\n{{else}}\r\n<div class="error">{{local \'tours.no_results\'}} <strong>{{keywords}}</strong>.</div>\r\n{{/if}}'},{}],1578:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("./roomview/view"),o=e("./addon/view"),s=e("../../../../../ui/util"),r=e("moment"),g=e("./price/view"),d=e("../../../../../../../config/host");t.exports=l.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),ui:{roomview:".view-section",price:".price-section",addon:".addon-section",bedTypeSelect:".bed-type"},events:{"click .bed-type":"selectBedType"},setBedType:function(e){this.model.set({currentBedTypeRate:e,currentRate:e},{silent:!0}),this.model.trigger("change:currentRate")},setViewType:function(e){this.model.set("currentRate",e?e:this.model.get("currentBedTypeRate"))},selectBedType:function(e){var t=jQuery(e.target).closest(".bed-type"),i=t.siblings(".bed-type"),c=t.hasClass("grey");if(!c){i.removeClass("grey"),i.addClass("white");var l=n.find(this.model.get("roomrates"),function(e){return e.bedtype==t.data("bedtype")});l.viewrates&&l.viewrates.length?(this.roomviewView.model.set("viewrates",n.clone(l.viewrates)),this.ui.roomview.append(this.roomviewView.render().el),this.ui.roomview.show(),l.roomview&&this.roomviewView.selectBedType({target:this.roomviewView.$(".view-type").get(0)})):this.ui.roomview.hide(),this.setBedType(l),t.toggleClass("white grey")}this.priceView.render()},initialize:function(){var e=this;e.roomviewView=new a({model:new c.Model}),e.roomviewView.on("select:view",n.bind(e.setViewType,this)),e.priceView=new g,e.addOnView=new o({paramModel:e.model}),e.model.on("change:currentRate",function(){var t=e.model.get("currentRate"),i=e.model.get("checkin"),n=e.model.get("checkout");r(n).diff(r(i),"days");e.priceView.model.set({rateprice:t.displaymemberrate,roomid:t.roomid,hotelcode:e.model.get("hotelcode"),adults:e.model.get("adults"),children:e.model.get("children"),rooms:e.model.get("rooms"),checkin:i,checkout:n,currency:t.categoryCurrency,roomtype:t.roomtypecode,ratecode:t.ratecode,discountcode:""}),e.priceView.model.set({price:Math.round(100*(t.displaymemberrate+(e.priceView.model.get("addonprice")||0)))/100}),e.ui.price.append(e.priceView.render().el);var c=e.addOnView.model.fetch();s.loading({loading:"",container:e.el,promise:c.then(function(){e.ui.addon.append(e.addOnView.render().el)})}),s.loading({loading:"",container:jQuery(".mobile-stickybar"),promise:c})}),e.addOnView.on("req:select-add-on",function(){var t=e.addOnView.model.get("services"),i=0;e.priceView.model.set("servicedata",t),n.each(t,function(e){i+=e.displayrate*e.quantity}),e.priceView.model.set("addonprice",i),e.priceView.model.set({price:Math.round(100*(i+(e.priceView.model.get("rateprice")||0)))/100}),e.ui.price.append(e.priceView.render().el)}),e.priceView.on("req:checkout",function(t){var i=jQuery.Deferred(),n=i.promise();t.then(function(){window.location.href="/"+d.getLanguage()+"/checkout"},function(){n.reject()}),s.loading({loading:"",container:e.el,promise:n}),s.loading({loading:"",container:jQuery(".mobile-stickybar"),promise:n})})}})},{"../../../../../../../config/host":45,"../../../../../ui/util":2122,"./addon/view":1571,"./price/view":1574,"./roomview/view":1576,"./template.hbs":1577,backbone:8,"backbone.marionette":6,moment:16,underscore:42}],1577:[function(e,t,i){t.exports='<div class="type-section">\r\n    <p class="type-title">{{local \'checkout.bed_type\'}}</p>\r\n    <div class="type-selection">\r\n\r\n        {{#each roomrates}}\r\n            <a class="wgt-iconbutton bed-type white" data-ratecode="{{ratecode}}" data-roomtypecode="{{roomtypecode}}"\r\n               data-bedtype="{{bedtype}}">\r\n                <span class="{{bedtypeicon}}"></span><label>{{bedtype}}</label>\r\n            </a>\r\n        {{/each}}\r\n\r\n    </div>\r\n</div>\r\n\r\n<div class="view-section type-section" style="margin-top:2rem; display: none;">\r\n</div>\r\n\r\n<div class="price-section">\r\n\r\n</div>\r\n<div class="addon-section">\r\n\r\n</div>'},{}],1576:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette"));t.exports=c.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),ui:{roomview:".view-selection"},events:{"click .view-type":"selectBedType"},selectBedType:function(e){var t,i=jQuery(e.target).closest(".view-type"),c=i.siblings(".view-type"),l=i.hasClass("grey"),a=n.find(this.model.get("viewrates"),function(e){return e.roomview==i.data("roomview")});if(l){if(a.cloned)return;c.filter('[data-cloned="true"]').length&&c.filter('[data-cloned="true"]').addClass("grey")}else c.removeClass("grey"),c.addClass("white"),t=a;i.toggleClass("white grey"),this.trigger("select:view",t)},initialize:function(){}})},{"./template.hbs":1575,backbone:8,"backbone.marionette":6,underscore:42}],1575:[function(e,t,i){t.exports='<p class="type-title view-title">{{local \'checkout.view_type\'}}</p>\r\n<div class="type-selection">\r\n    {{#each viewrates}}\r\n        <a class="wgt-iconbutton view-type white" data-cloned="{{cloned}}" data-ratecode="{{ratecode}}" data-roomtypecode="{{roomtypecode}}"\r\n           data-bedtype="{{bedtype}}" data-roomview="{{roomview}}">\r\n            <span class="{{roomviewicon}}"></span><label>{{roomview}}</label>\r\n        </a>\r\n    {{/each}}\r\n</div>\r\n\r\n\r\n\r\n';
},{}],1574:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("./add-cart-model")),c=e("backbone.marionette");t.exports=c.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),ui:{checkout:".wgt-sqbutton-blue"},events:{"click @ui.checkout":"checkout"},initialize:function(){this.model=new n},checkout:function(){this.trigger("req:checkout",this.model.save())},priceFormat:function(e){try{return accounting.formatNumber(e,2)}catch(t){return e}},onRender:function(){var e=jQuery(".mobile-stickybar p.text"),t=jQuery(".mobile-stickybar div.cost"),i=jQuery(".mobile-stickybar a.sticky-check-availability");e.text(i18n.t("booking.total")),t.html('<i class="currency">'+this.model.get("currency")+"</i><span>"+this.priceFormat(this.model.get("price"))+"</span>"),i.text(i18n.t("booking.checkout"));var n=this;i.off("click"),i.on("click",function(){return n.checkout(),!1})}})},{"./add-cart-model":1572,"./template.hbs":1573,backbone:8,"backbone.marionette":6,underscore:42}],1573:[function(e,t,i){t.exports='<p class="total">{{local \'booking.total\'}}</p>\r\n<div><i class="currency">{{currency}}</i><span>{{#price-format price }}{{/price-format}}</span></div>\r\n<a class="wgt-sqbutton-blue">{{local \'booking.checkout\'}}</a>'},{}],1572:[function(e,t,i){var n=(e("underscore"),e("../../../../../../../../config/host.js").host),c=e("backbone"),l=c.Model.extend({hotelcode:"",checkin:"",checkout:"",rooms:"",adults:"",children:"",roomtype:"",roomid:"",ratecode:"",currency:"",price:"",tax:"",discountcode:"",url:function(){return n+"/api/roombooking/add"}});t.exports=l},{"../../../../../../../../config/host.js":45,backbone:8,underscore:42}],1571:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("./model"),a=e("../../../../../../../component/ui/counter/view/counter");Marionette=e("backbone.marionette"),t.exports=Marionette.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),ui:{roomview:".view-selection",content:".addon-management",toggle:".toggle",addonTip:".label-popup",tipToggle:".icon-icon_I011"},events:{"click .close":function(){this.ui.addonTip.hide()},"click @ui.toggle":function(){this.ui.toggle.toggleClass("arrow-down arrow-up"),this.ui.content.toggle()},"click @ui.tipToggle":function(e){var t=jQuery(e.target).closest(".addon-tooltip").find(".label-popup");t.show()}},initialize:function(e){this.model=new l(e)},newCheckBox:function(e){var t=jQuery('<span class="checkbox-tip">'+i18n.t("offers.add_to_order")+'</span><i class="checkbox"><span style="font-size: 2.8rem;color:#fff;opacity:0" class="icon-icon_B023"></span></i>');return e&&t.addClass("checked"),t.on("click",function(){var e=t.hasClass("checked");e?t.removeClass("checked"):t.addClass("checked"),t.trigger("change",!e)}),t},onRender:function(){var e=this;n.each(this.model.get("services"),function(t){var i=-1==t.maxquantity?99:t.maxquantity||0,n=t.quantity||0;if(1==i){var l=e.newCheckBox(t.quantity>0);l.on("change",function(i,n){t.quantity=n?1:0,e.trigger("req:select-add-on")}),e.$el.find("#"+t.key).append(l)}else{var l=new a({model:new c.Model({label:"",minValue:0,maxValue:i,value:n,hideLabel:!0})});l.model.on("change:value",function(i){t.quantity=i.get("value"),e.trigger("req:select-add-on")}),e.$el.find("#"+t.key).append(l.render().el),l.$el.find("label").hide()}})}})},{"../../../../../../../component/ui/counter/view/counter":2064,"./model":1569,"./template.hbs":1570,backbone:8,"backbone.marionette":6,underscore:42}],1570:[function(e,t,i){t.exports='<a class="wgt-link-triangle arrow-down toggle"><span>{{local \'offers.manage_addons\'}}</span></a>\r\n<div class="addon-management" style="display: none">\r\n\r\n    {{#if this.services.length}}\r\n        <ul>\r\n            {{#each this.services}}\r\n                <li>\r\n                    <div data-key="{{ this.key }}" class="item-name">\r\n                        <span>{{ this.inventorycode }}</span>\r\n                        <div class="addon-tooltip"><span class="icon-icon_I011"></span>\r\n                            <div class="label-popup"><a class="close"><span class="icon-icon_B017"></span></a>\r\n                                <div class="content">\r\n                                    {{ desc }}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="addon-price">\r\n                        <em><sup>+ {{ ratecurrencymark }}</sup>{{#price-format displayrate }}{{/price-format}}\r\n                        </em><span> {{ pricingtype }}</span></div>\r\n                    <div class="count" id="{{ this.key }}">\r\n                    </div>\r\n\r\n                </li>\r\n\r\n            {{/each}}\r\n        </ul>\r\n    {{else}}\r\n        <p style="margin-top: 5rem;">{{local "booking.no_stay_option"}}</p>\r\n    {{/if}}\r\n</div>\r\n\r\n\r\n'},{}],1569:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../../../../../config/host.js").host;t.exports=n.Model.extend({initialize:function(e){e&&e.paramModel&&(this.paramModel=e.paramModel)},url:function(){var e=c+"/api/room/getroomservicelist?";return e+=this.paramModel.getQueryParams()}})},{"../../../../../../../../config/host.js":45,backbone:8,underscore:42}],1568:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),initialize:function(){var e=this;e.model.on("change",function(){e.render()})}})},{"./template.hbs":1567,"backbone.marionette":6}],1567:[function(e,t,i){t.exports='{{#if price.diffMark}}\r\n    <div><span>{{price.diffMark}}<i class="currency">{{price.currency}}</i>{{#price-format price.priceDiff}}{{/price-format}}</span></div>\r\n{{else}}\r\n    <div><i class="currency">{{price.currency}}</i><span>{{#price-format price.memberrate}}{{/price-format}}</span></div>\r\n{{/if}}\r\n{{#if isTotal}}\r\n<p>{{local \'booking.total\'}}</p>\r\n{{else}}\r\n<p>{{local "Property.room_section_night"}}</p>\r\n{{/if}}'},{}],1566:[function(e,t,i){var n=e("underscore"),c=e("backbone");e("backbone.marionette");t.exports=c.Model.extend({parse:function(e){var t=[],i=n.uniq(n.pluck(e.roomrates,"bedtype"));return n.each(e.roomrates,function(t){t.categoryCurrency=e.price.currency}),n.each(i,function(i){var c=n.find(e.roomrates,function(e){return e.bedtype==i&&!e.roomview});c&&t.push(c)}),n.each(i,function(i){var c=n.find(t,function(e){return e.bedtype==i&&!e.roomview});if(!c){var l=n.find(e.roomrates,function(e){return e.bedtype==i});if(l){var a=n.clone(l);a.cloned=!0,l.viewrates=[a],t.push(l)}}}),n.each(i,function(i){var c=n.find(t,function(e){return e.bedtype==i});n.each(e.roomrates,function(e){c.roomtypecode!=e.roomtypecode&&e.bedtype==i&&e.roomview&&(c.viewrates||(c.viewrates=[]),c.viewrates.push(e))})}),e.roomrates=t,e},getQueryParams:function(){return jQuery.param({hotelcode:this.get("hotelcode"),adults:this.get("adults"),children:this.get("children"),rooms:this.get("rooms"),checkin:this.get("checkin"),checkout:this.get("checkout"),currency:this.get("currency"),roomtypecode:this.get("currentRate").roomtypecode,rateplancode:this.get("currentRate").ratecode})}})},{backbone:8,"backbone.marionette":6,underscore:42}],1563:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../../abmb/stateful.js"),a=e("../../../ui/scratchpad-item/view"),o=e("../../../share-item/view");e("../../../ui/util");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("./template.hbs")),events:{"click .previous":"previous","click .next":"next"},initialize:function(e){var t=this;t.model.on("change:imageinfo",t.render),t.reset()},reset:function(){var e=jQuery('.operation [data-component="scratchpad"]'),t=this;t.model.set("shareData",{dataId:e.data("id"),dataContent:e.data("content"),dataType:e.data("type"),dataTitle:e.data("title"),dataUrl:e.data("url")});var i=t.model.get("detailimage");t.model.set("imageinfo",{currentImageUrl:i.length?i[0]:"",currentIndex:1,total:i.length})},previous:function(){var e=n.clone(this.model.get("imageinfo"));e.currentIndex=1==e.currentIndex?e.total:--e.currentIndex,e.currentImageUrl=this.model.get("detailimage")[e.currentIndex-1],this.model.set("imageinfo",e)},next:function(){var e=n.clone(this.model.get("imageinfo"));e.currentIndex=e.currentIndex==e.total?1:++e.currentIndex,e.currentImageUrl=this.model.get("detailimage")[e.currentIndex-1],this.model.set("imageinfo",e)},onRender:function(){a.autoCreate(),o.autoCreate()}}))},{"../../../abmb/stateful.js":72,"../../../share-item/view":1940,"../../../ui/scratchpad-item/view":2113,"../../../ui/util":2122,"./template.hbs":1562,backbone:8,"backbone.marionette":6,underscore:42}],1562:[function(e,t,i){t.exports='<div class="tpl-offer-gallery-lightbox">\r\n    <div class="head-block">\r\n        <div>\r\n            <h3 class="name"><span>{{type}}</span>\r\n                <a data-component="scratchpad" data-id="{{shareData.dataId}}"\r\n                   data-content="{{shareData.dataContent}}" data-type="{{shareData.dataType}}"\r\n                   data-title="{{shareData.dataTitle}}"\r\n                   class="wgt-scratchpad-off"><span class="icon-icon_B013"></span>\r\n                    <div class="scratchpad-tip"><span class="label-popup">\r\n                                <div class="content">\r\n                                  <p>{{local "scratchpad.item_added"}}</p>\r\n                                </div></span></div>\r\n                    <a class="share-button">\r\n                    <span data-component="share" data-title="{{shareData.dataTitle}}" data-url="{{shareData.dataUrl}}"\r\n                          class="favorite-share icon-icon_M001 tpl-half-favorite"\r\n                          style="color: #383838;width: 3.5rem;text-align: center;"></span>\r\n                    </a>\r\n            </h3>\r\n        </div>\r\n        <a class="close"><span class="icon-icon_B017"></span></a>\r\n    </div>\r\n    <div class="main-content">\r\n        <div style="background-image: url(\'{{imageinfo.currentImageUrl}}\')" class="image-slider clearfix">\r\n            <div class="corner-block">\r\n                {{#if badgetitle}}<label>{{badgetitle}}</label>{{/if}}<p style="display:none"></p>\r\n            </div>\r\n            <div class="tpl-holder"></div>\r\n        </div>\r\n\r\n        {{#more-than imageinfo.total 1}}\r\n            <div class="image-controller clearfix"><a class="next wgt-gallerybtn wgt-gallerybtn-next">\r\n                <div>\r\n                    <p></p>\r\n                    <p></p>\r\n                </div>\r\n                <div class="wgt-gallerybtn-icon"><span></span></div>\r\n            </a>\r\n                <p class="mobile-tip">{{imageinfo.currentIndex}} / {{imageinfo.total}}</p><a\r\n                        class="previous wgt-gallerybtn wgt-gallerybtn-previous">\r\n                    <div class="wgt-gallerybtn-icon"><span></span></div>\r\n                    <div>\r\n                        <p></p>\r\n                        <p></p>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n        {{/more-than}}\r\n    </div>\r\n    <div class="lightobx-amenities">\r\n        <div class="tpl-award">\r\n            <h5>{{local \'Property.amenities\'}}</h5>\r\n            <ul class="clearfix">\r\n                {{#each amenities}}\r\n                    <li><img src="{{icon}}" class="icon-svg"><span>{{name}}</span></li>\r\n                {{/each}}\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>'},{}],1592:[function(e,t,i){var n=e("../../../../../config/host.js"),c=(e("underscore"),e("../../../destination/models/destination-collection")),l=e("../../../destination/models/location-model");e("../../../ui/util");t.exports=c.extend({url:n.getURL("api","data/destinations"),model:l,createRelationalLinks:function(e){this.each(function(t){t.location=e.locations.get(t.get("locationid"))},this),this.each(function(e){try{e.location.addDestination(e)}catch(t){}})}})},{"../../../../../config/host.js":45,"../../../destination/models/destination-collection":815,"../../../destination/models/location-model":823,"../../../ui/util":2122,underscore:42}],1598:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../../../config/host.js"),a=e("./product-destination-collection");t.exports=c.Model.extend({defaults:{id:"",type:"Offer",contentid:"",producttype:"",title:"",description_short:"",description_long:"",url:"",thumbnail:"",images:null,featured:!1,destinationids:null,disabled:!1},parse:function(e){return l.adjustURLs(e,"thumbnail images url".split(" "))},getDestinationsInfo:function(){return this.destinationsInfo||(this.destinationsInfo=new a({productid:this.id}),this.destinationsInfo.promise=this.destinationsInfo.fetch()),this.destinationsInfo},matches:function(e){this.DAO;return(!e.tags||n.contains(this.attributes.tagids,e.tags.id))&&(!e.location||n.intersection(this.destinations,e.location.alldestinations).length>0)&&(!e.destination||n.contains(this.destinations,e.destination))&&(!e.product||e.product==this)}})},{"../../../../../config/host.js":45,"./product-destination-collection":1596,backbone:8,underscore:42}],1596:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../../config/host.js"),l=e("./product-destination-model");t.exports=n.Collection.extend({model:l,initialize:function(e){this.url=c.getURL("api","offers/prices/"+e.productid)},getInfo:function(e){return this.findWhere({destinationid:e.id})}})},{"../../../../../config/host.js":45,"./product-destination-model":1597,backbone:8,underscore:42}],1597:[function(e,t,i){var n=e("underscore"),c=e("backbone");t.exports=c.Model.extend({product:null,defaults:{destinationid:"",url:"",currency:"",price:"",exchange:null},parse:function(e){return e.exchange||(e.exchange=[]),n.findWhere(e.exchange,{currency:e.currency})||e.exchange.push({currency:e.currency,price:e.price}),e},getPrice:function(e){return n.findWhere(this.get("exchange"),{currency:e}).price}})},{backbone:8,underscore:42}],1593:[function(e,t,i){var n=(e("../../../../../config/host.js"),e("../../../destination/models/location-collection")),c=e("underscore");i=t.exports=n.extend({model:e("../../../destination/models/location-model"),parse:function(e){var t=c.find(e,function(e){return"singapore"==e.key}),i=t.id;t.id="singapore-country",t.originalId=i,e.push({id:i,level:"city",name:t.name,parentid:"singapore-country",key:"singapore"}),this.regions=[];for(var n=0;n<e.length;n++)"region"===e[n].level&&this.regions.push(e[n]);return c.sortBy(c.filter(e,function(e){return"region"!=e.level}),"name")},createRelationalLinks:function(){this.each(function(e){e.setParent(this.get(e.get("parentid"))),e._name=e.get("name")},this)},findRegionKey:function(e){if("region"===e.get("level"))return e.get("key");var t=e.parent;if(t)return this.findRegionKey(t);var i=e.get("parentid")||e.get("oldParentId"),t=c.find(this.regions,function(e){return e.id==i});return t?t.key:void 0},findLocationsByRegionKey:function(e){var t=c.find(this.regions,function(t){return t.key==e});return t?this.filter(function(e){return e.get("parentid")==t.id||e.get("oldParentId")==t.id}):void 0}})},{"../../../../../config/host.js":45,"../../../destination/models/location-collection":822,"../../../destination/models/location-model":823,underscore:42}],1520:[function(e,t,i){var n=e("backbone.marionette"),c=e("./01-pc/view"),l=e("./02-mb/view"),a=e("../../ui/util"),o=!!a.ismobile();t.exports=n.LayoutView.extend({template:Handlebars.compile(e("./template.hbs")),regions:{main:".new-look"},onRender:function(){this.__initialEventHwd(),this.options.rootState.trigger("getFeatureOffers")},__initialEventHwd:function(){var e=this,t=e.options.rootState;e.stopListening(t),e.listenTo(t,"showBottomPanel",e.__showBottomPanel),e.listenTo(a.tracker,"change:mobile",e.__rectifyMobileChange)},__rectifyMobileChange:function(){var e=!!a.ismobile();o!==e&&(o=e,this.options.rootState.trigger("getFeatureOffers"))},__showBottomPanel:function(e){e&&e.length&&(a.ismobile()?this.getRegion("main").show(new l({models:e})):this.getRegion("main").show(new c({models:e})))}})},{"../../ui/util":2122,"./01-pc/view":1515,"./02-mb/view":1518,"./template.hbs":1519,"backbone.marionette":6}],1519:[function(e,t,i){t.exports='<div class="new-look"></div>'},{}],1518:[function(e,t,i){var n=(e("backbone"),e("backbone.marionette")),c=e("../../../ui/util");t.exports=n.LayoutView.extend({getTemplate:function(){return c.isM4B()&&c.ismobile()?Handlebars.compile(e("./M4BTemplate.hbs")):Handlebars.compile(e("./template.hbs"))},ui:{prev:"[data-item='prev']",next:"[data-item='next']",text:"[data-item='text']",container:".swiper-container"},serializeData:function(){var e=this.options.models||[];return{models:e,feature_offers_title:e[0]&&e[0].feature_offers_title,oneItem:!(1!=e.length)}},initialize:function(){this._shownDeferred=jQuery.Deferred()},onRender:function(){!this.options.models.length||c.isM4B()&&c.ismobile()||(this.__makeSlider(),this.__fixedIndex())},onShow:function(){this._shownDeferred.resolve()},__makeSlider:function(){var e=this;e._shownDeferred.then(function(){e.ui.container.slick({prevArrow:".icon-icon_chervonLeft",nextArrow:".icon-icon_chervonRight",dots:!1,infinite:!0,speed:300,slidesToShow:1,adaptiveHeight:!0,rtl:"rtl"==jQuery("html").attr("dir")})})},__fixedIndex:function(){var e=this,t=this.options.models.length;e.ui.container.on("afterChange",function(i,n){var c=e.ui.container.slick("slickCurrentSlide");e.ui.text.html(c+1+" / "+t)})}})},{"../../../ui/util":2122,"./M4BTemplate.hbs":1516,"./template.hbs":1517,backbone:8,"backbone.marionette":6}],1517:[function(e,t,i){t.exports='<div class="offers2__feature-header">{{ feature_offers_title }}</div>\r\n<div class="offers2__feature-slider" style="height: auto;">\r\n    <div class="swiper-container">\r\n        {{#each models}}\r\n            <div class="swiper-wrapper">\r\n                <div class="swiper-slide" style="background-image: url(\'{{ imageUrl }}\'); width: 100%; height: 40vh;"></div>\r\n                <div class="offers2__feature-content">\r\n                    <div class="offers2__feature-fixed-height">\r\n                        <div class="offers2__feature-content-region offers2-mobile">{{ region}}</div>\r\n                        <h3  class="offers2__feature-content-title">{{ title }}</h3>\r\n                        <div class="offers2__feature-content-desc">{{{ description_short }}}\r\n                        </div>\r\n                    </div>\r\n                    <div class="offers2__feature-content-bottom">\r\n                        <div class="offers2__feature-content-item">\r\n                            {{#if price}}\r\n                                <div class="offers2__feature-content-from">{{ local "offers.from" }}</div>\r\n                                <div class="offers2__feature-content-numb">{{currency}} {{num-format price}}</div>\r\n                            {{/if}}\r\n                        </div>\r\n                        <div class="offers2__feature-content-item">\r\n                            <a class="offers2__feature-content-expl" href="{{ url }}">{{local "booking.book_now" }}</a>\r\n                            {{#if ctabuttonurl}}\r\n                                {{#if ctabuttontext}}\r\n                                    <a class="offers2__feature-content-link" href="{{ ctabuttonurl }}">\r\n                                        <span>{{ ctabuttontext }}</span><span class="icon-icon_chervonRight"></span>\r\n                                    </a>\r\n                                {{/if}}\r\n                            {{/if}}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        {{/each}}\r\n    </div>\r\n    <div class="offers2__feature-paging">\r\n        <span data-item="prev" class="offers2__feature-paging-icon icon-icon_chervonLeft"></span>\r\n        <span data-item="text" class="offers2__feature-paging-text">1/{{models.length}}</span>\r\n        <span data-item="next" class="offers2__feature-paging-icon icon-icon_chervonRight"></span>\r\n    </div>\r\n</div>\r\n\r\n'},{}],1516:[function(e,t,i){t.exports='<div class="m4b-homepage-lump-bar m4b-guest-think-mobile-container m4b-featured-offer-container bg-grey">\r\n    <p class="m4b-guest-think-mobile-header">{{ feature_offers_title }}</p>\r\n    <div class="m4b-guest-think-mobile-scroll-wrapper">\r\n        {{#each models}}\r\n            <div class="m4b-mobile-scroll-item">\r\n                {{#if isforbusiness}}\r\n                    <div class="offers2__listing-offer-m4b">\r\n                        <div class="offers2__listing-offer-m4b-text">\r\n                            <div class="text">{{local "offers.for_business"}}</div>\r\n                        </div>\r\n                    </div>\r\n                {{/if}}\r\n                <div ></div>\r\n                <div class="m4b-homepage-lump-item-media">\r\n                    <div style="background-image:url(\'{{ imageUrl }}\')" class="m4b-homepage-lump-item-value {{imageAnchor}}"></div>\r\n                </div>\r\n                <div class="m4b-featured-offer-region">{{ region }}</div>\r\n                <div class="m4b-guest-think-mobile-content">\r\n                    <div class="m4b-featured-offer-header">{{ title }}</div>\r\n                    <div class="m4b-featured-offer-content">{{{ description_short }}}</div>\r\n                </div>\r\n                <div class="m4b-featured-offer-price-block">\r\n                    {{#if price}}\r\n                        <div class="m4b-featured-offer-price-from">{{ local "offers.from" }}</div>\r\n                        <div class="m4b-featured-offer-price">{{currency}} {{num-format price}}</div>\r\n                    {{/if}}\r\n                </div>\r\n                <a href="{{ url }}" class="m4b-homepage-lump-item-trunk-link">{{local "booking.book_now" }}</a>\r\n            </div>\r\n        {{/each}}\r\n    </div>\r\n</div>'},{}],1515:[function(e,t,i){var n=e("backbone"),c=e("./offer/view"),l=e("../../../new-look-text/view");t.exports=l.extend({__contentRender:function(e){this.getRegion("hotel").show(new c({model:new n.Model(e)}))}})},{"../../../new-look-text/view":1431,"./offer/view":1514,backbone:8}],1514:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"offers2__feature-content"})},{"./template.hbs":1513,"backbone.marionette":6}],1513:[function(e,t,i){t.exports='<div class="offers2__feature-content-header">{{ feature_offers_title }}</div>\r\n<div class="offers2__feature-fixed-height">\r\n    <div class="offers2__feature-content-region offers2-mobile">{{ region }}</div>\r\n    <h3  class="offers2__feature-content-title">{{ title }}</h3>\r\n    <div class="offers2__feature-content-region">{{ region }}</div>\r\n    <div class="offers2__feature-content-desc">{{{ description_short }}}</div>\r\n</div>\r\n<div class="offers2__feature-content-bottom">\r\n    <div class="offers2__feature-content-item">\r\n        {{#if price}}\r\n            <div class="offers2__feature-content-from">{{ local "offers.from" }}</div>\r\n            <div class="offers2__feature-content-numb">{{currency}} {{num-format price}}</div>\r\n        {{/if}}\r\n    </div>\r\n    <div class="offers2__feature-content-item">\r\n        <a class="offers2__feature-content-expl" href="{{ url }}">{{ local "booking.book_now" }}</a>\r\n        {{#if ctabuttonurl}}\r\n            {{#if ctabuttontext}}\r\n                <a class="offers2__feature-content-link" href="{{ ctabuttonurl }}">\r\n                    <span>{{ ctabuttontext }}</span><span class="icon-icon_chervonRight"></span>\r\n                </a>\r\n            {{/if}}\r\n        {{/if}}\r\n    </div>\r\n</div>'},{}],1484:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("backbone"),l=(e("../model/model"),e("../../ui/util")),a=e("../assets/template.hbs"),o=(e("../../ui/slick/slick"),e("object-fit-images")),s=e("../gallery-choose-popup/view"),r=e("./template-foot");t.exports=GalleryView=n.LayoutView.extend({template:Handlebars.compile(a),ui:{mobileHero:".mobile-hotel__hero .slick-container",heroFoot:".mobile-hotel__hero-foot",galleryType1:".newlook-gallery-type1",galleryType2:".newlook-gallery-type2",slideItem:".newlook-gallery-type1 .slide-item",galleryFoot:".newlook-gallery-type2-foot",choose:".choose",play:".play",galleryChoose:".gallery-choose",openGallery:".js-open-gallery-popup"},events:{"click @ui.choose":function(e){var t=jQuery(e.target).data("index")||jQuery(e.target).parents(".choose").data("index")||0;l.ismobile()?this.galleryChoosePopupView.open(t):(this.model.set("index",t),this.model.set("chooseData",this.model.get("categories")[t]),this.render())},"click @ui.play":function(e){jQuery(e.target).parents(".videoItem").find("video").removeClass("opacity-zero").addClass("playVideo").get(0).play()},"click @ui.slideItem":function(e){this.trigger("click:item",e)},"click @ui.openGallery":function(e){this.trigger("open:gallery",e)}},initialize:function(e){var t=this;window.hotelcode||(window.hotelcode=l.queryparam("hotelcode")),window.vscapeimageData&&(t.model=window.vscapeimageData,t.model.set({hotelcode:window.hotelcode,type:e.type,ismobile:l.ismobile()}),t.init())},init:function(){var e=this,t=e.model.get("type");switch(t){case"hero":e.model.get("categories").length||e.model.set("bannerUrl",jQuery(".hotel-banner__image").attr("src")),e.render(),e.ui.heroFoot.length&&(e.FooterView=new r({el:e.ui.heroFoot}),e.FooterView.model=new c.Model,e.setModel(0));break;case"one":e.model.get("categories").length?e.render():jQuery(".new-look-hotel__gallery").hide();break;case"two":e.model.get("categories").length?(e.model.set("chooseData",e.model.get("categories")[0]),e.model.set("index",0),e.render()):jQuery(".new-look-hotel__gallery").hide()}},setModel:function(e){var t=this;if(e!=t.FooterView.model.get("index")){var i=t.ui.mobileHero.find("[data-slick-index="+e+"]"),n=i.find("img");n.attr("src",n.attr("data-src"));var c=i.attr("data-total"),l=i.attr("data-name");t.FooterView.model.get("name")&&t.FooterView.model.get("name")==l&&e?e>t.FooterView.model.get("index")?e-t.FooterView.model.get("index")>1?t.FooterView.model.set("number",c):t.FooterView.model.set("number",t.FooterView.model.get("number")+1):t.FooterView.model.set("number",t.FooterView.model.get("number")-1):(t.FooterView.model.set("name",l),t.FooterView.model.set("total",c),e>t.FooterView.model.get("index")||!t.FooterView.model.get("index")||!e?e-t.FooterView.model.get("index")>1?t.FooterView.model.set("number",c):t.FooterView.model.set("number",1):t.FooterView.model.set("number",c)),t.FooterView.model.set("index",e),t.FooterView.render()}},initHeroSlide:function(){var e=this;e.model.get("categories").length&&(e.currentSlide||(e.currentSlide=e.ui.mobileHero.slick({speed:800,infinite:!0,swipe:!0,cssEase:"cubic-bezier(0,.96,.54,1.01)",rtl:"rtl"==jQuery("html").attr("dir"),arrows:!0}),e.currentSlide.on("beforeChange",function(t,i,n,c){e.setModel(c)})))},initTypeOneSlide:function(){var e=this;e.currentSlide||(e.currentSlide=e.ui.galleryType1.slick({speed:800,infinite:!0,swipe:!0,slidesToShow:3,variableWidth:!0,cssEase:"cubic-bezier(0,.96,.54,1.01)",rtl:"rtl"==jQuery("html").attr("dir"),arrows:!0}))},initTypeTwoSlide:function(){var e=this;e.type2Slide=e.ui.galleryType2.slick({speed:800,infinite:!0,swipe:!0,cssEase:"cubic-bezier(0,.96,.54,1.01)",rtl:"rtl"==jQuery("html").attr("dir"),arrows:!0}),e.galleryChoosePopupView=new s({el:e.ui.galleryChoose,model:e.model}),e.galleryChoosePopupView.on("choose:type",function(t){e.model.set("index",t),e.model.set("chooseData",this.model.get("categories")[t]),e.render()}),e.ui.galleryFoot.find(".des").text(e.ui.galleryType2.find(".slick-current").attr("data-title")),e.type2Slide.on("beforeChange",function(t,i,n,c){e.ui.galleryFoot.find(".num").text(c+1),e.ui.galleryFoot.find(".des").text(e.ui.galleryType2.find(".slick-current").attr("data-title")),e.ui.galleryType2.find("video.playVideo").length&&e.ui.galleryType2.find("video.playVideo").addClass("opacity-zero").removeClass("playVideo").get(0).pause()})},onRender:function(){var e=this,t=e.model.get("type");switch(o("img.compatibility-img"),t){case"hero":e.initHeroSlide();break;case"one":e.initTypeOneSlide();break;case"two":e.initTypeTwoSlide()}}})},{"../../ui/slick/slick":2118,"../../ui/util":2122,"../assets/template.hbs":1479,"../gallery-choose-popup/view":1481,"../model/model":1482,"./template-foot":1483,backbone:8,"backbone.marionette":6,"object-fit-images":18,underscore:42}],1483:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("../assets/template-foot.hbs");t.exports=GalleryView=n.LayoutView.extend({template:Handlebars.compile(c),initialize:function(e){},onRender:function(){}})},{"../assets/template-foot.hbs":1478,"backbone.marionette":6,underscore:42}],1482:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../../config/host.js");GalleryModel=t.exports=c.Model.extend({initialize:function(e){this.url=l.getURL("api","data/vscapeimage?propertyid="+e.hotelcode)},parse:function(e){var t={};if(t.categories=e?e.arc:[],e&&e.arc){var i=-1;n.each(e.arc,function(e){e.index=++i;var t=0;e.categoryUpper=i18n.t(e.categoryKey).toUpperCase(),n.each(e.video,function(e,i){e.index=++t,e.type="video"}),n.each(e.image360,function(e,i){e.index=++t,e.type="image360"}),n.each(e.images,function(e,i){e.index=++t,e.type="image"})})}return t},testIE9:function(){var e=jQuery.Deferred(),t={disableVscape:!1,arc:[{categoryName:"HOTEL",categoryKey:"Property.Hotel",video:[{title:"Gallery Video 1",url:"http://www.mullenloweprofero.com/media/404259/wu syh long.mp4",placeholder:"http://10.148.60.55/mhb-media/images/13596 millennium hotel chengdu/hero/chengdu-millennium-740.jpg"},{title:"	Gallery Video 3",url:"http://www.mullenloweprofero.com/media/428352/video .mp4",placeholder:"http://10.148.60.55/mhb-media/images/13596 millennium hotel chengdu/hero/chengdu-millennium-740.jpg"}],image360:[{title:"Gallery Panorama Image 1",url:"http://10.148.60.55/mhb-media/images/module/360 image/demo_image2.jpg",placeholder:"http://10.148.60.55/mhb-media/images/module/360 image/demo_image2.jpg"}],images:[{title:"Lobby",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/977/__1_S.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/977/__1_S.jpg"},{title:"Lobby",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/985/__2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/985/__2_S.jpg"},{title:"Exterior",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/209/_________P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/209/_________S.jpg"},{title:"Exterior",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/441/____________P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/441/____________S.jpg"},{title:"Exterior",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/449/______1_S.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/449/______1_S.jpg"},{title:"Exterior",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/457/_______S.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/457/_______S.jpg"},{title:"Mahjong room",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/465/____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/465/____S.jpg"},{title:"Exterior",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/473/____2_S.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/473/____2_S.jpg"},{title:"Atrium",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/709/___S.jpg",
desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/709/___S.jpg"}]},{categoryName:"GUEST ROOMS",categoryKey:"Property.Guest_Rooms",video:[{title:"Gallery Video 2",url:"http://www.mullenloweprofero.com/media/428352/video .mp4",placeholder:"http://10.148.60.55/mhb-media/images/13596 millennium hotel chengdu/hero/chengdu-millennium-hero.jpg"}],image360:[],images:[{title:"Millennium Knightsbridge Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/9/____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/9/____S.jpg"},{title:"Millennium Knightsbridge Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/17/______P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/17/______S.jpg"},{title:"Millennium Knightsbridge Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/25/______P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/25/______S.jpg"},{title:"Superior King",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/33/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/33/_____S.jpg"},{title:"Superior Twin",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/41/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/41/_____S.jpg"},{title:"Gloucester King",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/49/________P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/49/________S.jpg"},{title:"Gloucester Twin",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/57/_________P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/57/_________S.jpg"},{title:"Club Deluxe King",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/65/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/65/_____S.jpg"},{title:"Club Deluxe Twin",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/121/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/121/_____S.jpg"},{title:"Executive Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/129/_______P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/129/_______S.jpg"},{title:"Executive Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/137/_______P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/137/_______S.jpg"},{title:"Standard King",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/145/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/145/_____S.jpg"},{title:"Standard Twin",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/153/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/153/_____S.jpg"},{title:"M-Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/193/____1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/193/____1_S.jpg"},{title:"M-Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/201/____2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/201/____2_S.jpg"},{title:"Millennium Kinghtsbridge Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/481/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/481/_____S.jpg"},{title:"Millennium Kinghtsbridge Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/489/_______P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/489/_______S.jpg"}]},{categoryName:"DINING",categoryKey:"Property.Dining",video:[],image360:[],images:[{title:"YiPin Chinese Restaurant",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/933/__1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/933/__1_S.jpg"},{title:"YiPin Chinese Restaurant",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/949/__2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/949/__2_S.jpg"},{title:"YiPin Chinese Restaurant",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/969/__3_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/969/__3_S.jpg"},{title:"SH1930 Bar",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/993/___1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/993/___1_S.jpg"},{title:"SH1930 Bar",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/1/___2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/1/___2_S.jpg"},{title:"Executive Lounge",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/73/____1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/73/____1_S.jpg"},{title:"Executive Lounge",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/81/_________P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/81/_________S.jpg"},{title:"Executive Lounge",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/113/____2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/113/____2_S.jpg"},{title:"Amber Cafe",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/177/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/177/_____S.jpg"},{title:"Amber Cafe",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/585/____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/585/____S.jpg"},{title:"YiPin Chinese Restaurant",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/693/___1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/693/___1_S.jpg"},{title:"YiPin Chinese Restaurant",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/701/___2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/701/___2_S.jpg"}]},{categoryName:"EVENTS",categoryKey:"Property.Events",video:[],image360:[{title:"Gallery Panorama Image 2",url:"http://10.148.60.55/mhb-media/images/module/360 image/demo_photo4.jpg",placeholder:"http://10.148.60.55/mhb-media/images/module/360 image/demo_photo4.jpg"}],images:[{title:"Meeting Room",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/925/1_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/925/1_____S.jpg"},{title:"Ballroom",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/941/9_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/941/9_____S.jpg"},{title:"Meeting",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/161/____1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/161/____1_S.jpg"},{title:"Meeting",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/169/____2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/169/____2_S.jpg"},{title:"Banquet Room",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/605/____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/605/____S.jpg"}]},{categoryName:"LEISURE",categoryKey:"Property.Leisure",video:[],image360:[],images:[{title:"Oxygen Club",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/185/____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/185/____S.jpg"},{title:"Swimming Pool",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/625/__1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/625/__1_S.jpg"},{title:"Swimming Pool",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/667/__2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/667/__2_S.jpg"},{title:"Swimming Pool",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/685/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/685/_____S.jpg"}]}]},i=this.parse(t);return this.set(i),setTimeout(e.resolve,100),e.promise()}})},{"../../../../config/host.js":45,backbone:8,underscore:42}],1481:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("./template.hbs");t.exports=GalleryView=n.LayoutView.extend({template:Handlebars.compile(c),ui:{choose:".gallery-choose-popup__item",close:".gallery-choose-popup__back",main:".gallery-choose-popup",confirm:".gallery-choose-popup__button"},events:{"click @ui.choose":function(e){var t=jQuery(e.target).data("index")||jQuery(e.target).parents(".gallery-choose-popup__item").data("index")||0;this.model.set("index",t),this.render()},"click @ui.close":function(){this.ui.main.hide()},"click @ui.confirm":function(){this.ui.main.hide(),this.trigger("choose:type",this.model.get("index"))}},initialize:function(e){},onRender:function(){this.ui.main.show()},open:function(e){this.model.set("index",e),this.render()}})},{"./template.hbs":1480,"backbone.marionette":6,underscore:42}],1480:[function(e,t,i){t.exports='<div class="gallery-choose-popup">\r\n    <span class="gallery-choose-popup__back icon-icon_I015"></span>\r\n    <h2 class="gallery-choose-popup__title">{{local "Property.gallery"}}</h2>\r\n    <ul class="gallery-choose-popup__list">\r\n        {{#each categories}}\r\n            <li class="gallery-choose-popup__item" data-index="{{index}}">\r\n                <span class="gallery-choose-popup__item-name">\r\n                    {{local categoryKey}}<span>({{count}})</span>\r\n                </span>\r\n                <span class="gallery-choose-popup__item-radio-wrapper">\r\n                        <span class="gallery-choose-popup__item-radio {{#equal index ../index}}gallery-choose-popup__item-radio--selected{{/equal}}"></span>\r\n                </span>\r\n            </li>\r\n        {{/each}}\r\n    </ul>\r\n    <div class="gallery-choose-popup__button">{{local "general.confirm"}}</div>\r\n</div>'},{}],1479:[function(e,t,i){t.exports='{{#equal type \'hero\'}}\r\n    <div class="mobile-hotel__hero">\r\n        {{#if categories.length}}\r\n            <div class="slick-container">\r\n            {{#each categories}}\r\n                {{#not-equal categoryKey \'Property.gallery_all\'}}\r\n                    {{#each images}}\r\n                        <div class="imageItem slide-item" data-name={{ ../categoryKey}} data-number={{../index}} data-total={{../count}}>\r\n                            <img data-src=\'{{encode mobileUrl}}\' class="compatibility-img center-center"\r\n                                  alt="">\r\n                        </div>\r\n                    {{/each}}\r\n                    {{#each image360}}\r\n                        <div class="imageItem slide-item" data-name={{ ../categoryKey}} data-number={{../index}} data-total={{../count}}>\r\n                            <img data-src=\'{{encode placeholder}}\' class="compatibility-img center-center"\r\n                                 alt="">\r\n                        </div>\r\n                    {{/each}}\r\n                    {{#each video}}\r\n                        <div class="imageItem slide-item" data-name={{ ../categoryKey}} data-number={{../index}} data-total={{../count}}>\r\n                            <img data-src=\'{{encode placeholder}}\' class="compatibility-img center-center"\r\n                                 alt="">\r\n                        </div>\r\n                    {{/each}}\r\n                {{/not-equal}}\r\n            {{/each}}\r\n            </div>\r\n            <div class="mobile-hotel__hero-foot">\r\n\r\n            </div>\r\n        {{else}}\r\n            <div class="slick-container">\r\n                <div class="imageItem slide-item">\r\n                    <img src=\'{{encode bannerUrl}}\' class="compatibility-img center-center"\r\n                         alt="">\r\n                </div>\r\n            </div>\r\n        {{/if}}\r\n    </div>\r\n{{/equal}}\r\n{{#equal type \'one\'}}\r\n    <div class="newlook-hotel-configuration-title">\r\n        <h2>{{local \'Property.gallery\'}}</h2>\r\n        <a class="photo">\r\n            <span class="icon icon-icon_A013"></span>\r\n            <span data-property="undefined" class="text gallary-popup-link js-open-gallery-popup">{{categories.[0].count}} {{local \'general.photos\'}}</span>\r\n        </a>\r\n    </div>\r\n    <div class="newlook-gallery-type1">\r\n        {{#each categories}}\r\n            {{#equal categoryKey \'Property.gallery_all\'}}\r\n                {{#each video}}\r\n                    <div class="imageItem slide-item">\r\n                        <img src=\'{{encode placeholder}}\' class="compatibility-img center-center"\r\n                             alt="">\r\n                    </div>\r\n                {{/each}}\r\n                {{#each image360}}\r\n                    <div class="imageItem slide-item">\r\n                        <img src=\'{{encode placeholder}}\' class="compatibility-img center-center"\r\n                             alt="">\r\n                        <span class="panoimageICON icon"></span>\r\n                    </div>\r\n                {{/each}}\r\n                {{#each images}}\r\n                    <div class="imageItem slide-item">\r\n                        <img src=\'{{encode mobileUrl}}\' class="compatibility-img center-center"\r\n                             alt="">\r\n                    </div>\r\n                {{/each}}\r\n            {{/equal}}\r\n        {{/each}}\r\n    </div>\r\n{{/equal}}\r\n{{#equal type \'two\'}}\r\n    <div class="newlook-hotel-configuration-title">\r\n        <h2>{{local \'Property.gallery\'}}</h2>\r\n        <ul>\r\n            {{#each categories}}\r\n                <li class="choose {{#equal index ../index}}active{{/equal}}" data-index="{{index}}">{{local categoryKey}}{{#if ../ismobile}}\r\n                    <span class="icon-icon_B021"></span>{{else}}<span>({{count}})</span>{{/if}}</li>\r\n            {{/each}}\r\n        </ul>\r\n    </div>\r\n    <div class="newlook-gallery-type2">\r\n        {{#each chooseData.video}}\r\n            <div class="imageItem slide-item videoItem" data-title="{{title}}">\r\n                <img src=\'{{encode placeholder}}\' class="compatibility-img center-center"\r\n                     alt="">\r\n                {{#if ../ismobile}}\r\n                {{else}}\r\n                    <div class="play"></div>\r\n                    <video src="{{encode url}}" class="opacity-zero" controls="controls"\r\n                           width="100%" height="100%">\r\n                    </video>\r\n                {{/if}}\r\n            </div>\r\n        {{/each}}\r\n        {{#each chooseData.image360}}\r\n            <div class="imageItem slide-item" data-title="{{title}}">\r\n                {{#if resourseurl}}\r\n                    {{#if ../../ismobile}}\r\n                        <img src=\'{{encode placeholder}}\' class="compatibility-img center-center"\r\n                             alt="">\r\n                    {{else}}\r\n                        <iframe src="{{encode resourseurl}}" scrolling="auto" style=" width: 100%;height: 100%;"></iframe>\r\n                    {{/if}}\r\n                {{else}}\r\n                    <div class="dragItem" style="background-image: url(\'{{encode url}}\')"></div>\r\n                {{/if}}\r\n                <span class="panoimageICON icon"></span>\r\n            </div>\r\n        {{/each}}\r\n        {{#each chooseData.images}}\r\n            <div class="imageItem slide-item" data-title="{{title}}">\r\n                <img src=\'{{encode mobileUrl}}\' class="compatibility-img center-center"\r\n                     alt="">\r\n            </div>\r\n        {{/each}}\r\n    </div>\r\n    <div class="newlook-gallery-type2-foot">\r\n        <span class="num">1</span>/\r\n        <span class="total">{{chooseData.count}}</span>\r\n        <span class="des"></span>\r\n    </div>\r\n    <div class="gallery-choose"></div>\r\n{{/equal}}'},{}],1478:[function(e,t,i){t.exports='<span class="mobile-hotel__hero-foot-name">{{local name}}</span>\r\n<span class="mobile-hotel__hero-foot-num">{{number}}/{{total}}</span>\r\n'},{}],1477:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../assets/template.hbs"),a=e("../../../ui/util"),o=(e("../model/model"),e("../../gallery/view/view"));e("../assets/style.sass"),t.exports=c.LayoutView.extend({template:function(e){return Handlebars.compile(l)(e)},ui:{gallerypopup:".gallery_popup",gallerynav:".gallery-nav ul",gallerycontent:".gallery-wrapper",gallerycontrol:".gallery-control"},events:{"click .header .close":"closePopup","click .gallery_popup .gallery_shade":"closePopup","click .header li":"setCurrentCategory","click .gallery-control .btn-left":"doPrev","click .gallery-control .btn-right":"doNext"},initialize:function(){var e=this;window.hotelcode||(window.hotelcode=a.queryparam("hotelcode")),window.vscapeimageData&&(e.model=window.vscapeimageData,e.model.set({hotelcode:window.hotelcode,ismobile:a.ismobile(),index:0,silent:!0}),e.render())},setCateGoryKey:function(){var e=this,t=e.model.get("categories");if(t&&0!=t.length){var i,c=a.queryParamFromHash("galleryCategory"),l=n.any(t,function(e){return e.categoryKey==c});i=l?n.findWhere(t,{categoryKey:c}):e.model.get("categories")[0],e.model.set("currentCategory",i);var o=e.ui.gallerynav.find("li[data-index="+i.index+"]");o.addClass("checked"),e.ui.gallerynav.find("li").not(o).removeClass("checked")}},onRender:function(){var e=this;jQuery(window).on("keyup",function(t){return 37==t.keyCode||39==t.keyCode||27==t.keyCode?(37==t.keyCode?e.doPrev():39==t.keyCode?e.doNext():27==t.keyCode&&e.closePopup(),t.preventDefault(),!1):void 0})},closePopup:function(){var e=this;e.ui.gallerypopup.fadeOut(),e.ui.gallerycontent.empty()},openPopup:function(e){var t=this;t.setCateGoryKey(),e=e?e:0,t.model.set("showIndex",e),t.ui.gallerypopup.fadeIn(),t.galleryView=new o({model:t.model}),t.$(".opacity1").html(t.galleryView.render().el)},doPrev:function(){this.galleryView&&this.galleryView.doPrev()},doNext:function(){this.galleryView&&this.galleryView.doNext()},setCurrentCategory:function(e){this.doShowControl();var t,i,n=jQuery(e.currentTarget);n.parent().find("li").not(n).removeClass("checked"),n.addClass("checked"),t=n&&n.data("value"),window.location.hash="galleryCategory="+t,i=n.data("index");var c=this.model.get("currentCategory");if(c.index!=i){var l=this.model.get("categories")[i];this.model.set({currentCategory:l}),e.stopPropagation(),l.count<=1&&this.doHideControl(),this.galleryView=new o({model:this.model}),this.listenToOnce(this.galleryView,"first-image-load-success",this.doCrossFade),this.$(".opacity0").html(this.galleryView.render().el)}},doCrossFade:function(){this.$(".opacity0").removeClass("opacity0").addClass("opacity1").siblings(".gallery-wrapper").removeClass("opacity1").addClass("opacity0")},doHideControl:function(){this.ui.gallerycontrol.hide()},doShowControl:function(){this.ui.gallerycontrol.show()}})},{"../../../ui/util":2122,"../../gallery/view/view":1473,"../assets/style.sass":1474,"../assets/template.hbs":1475,"../model/model":1476,"backbone.marionette":6,underscore:42}],1475:[function(e,t,i){t.exports='\r\n<div class="gallery_popup">\r\n    <div class="gallery_center">\r\n        <div class="gallery_shade"></div>\r\n        <div class="content">\r\n        <div class="gallery-overlay">\r\n        <div class="header">\r\n              <div class="gallery-nav">\r\n                  <ul>\r\n                  {{#each categories}}\r\n                      <li data-value="{{categoryKey}}" {{#equal index ../currentCategory.index}} class="checked"{{/equal}}data-index="{{index}}">\r\n                          <a data-index="{{index}}" data-value="{{categoryKey}}">\r\n                              {{local categoryKey}}\r\n                              {{#ifCond count \'>\' 0 }}\r\n                                  <span>({{count}})</span>\r\n                              {{/ifCond}}\r\n                          </a>\r\n                      </li>\r\n                  {{/each}}\r\n                  </ul>\r\n              </div>\r\n              <span class="close icon-icon_B017"></span>\r\n        </div>\r\n        <div class="body">\r\n            <div class="gallery-wrapper opacity1">\r\n            </div>\r\n            <div class="gallery-wrapper opacity0">\r\n            </div>\r\n        </div>\r\n        </div>\r\n        <div class="gallery-control">\r\n            <div class="btn-left">\r\n                <i class="icon-icon_chervonLeft"></i>\r\n            </div>\r\n            <div class="btn-right">\r\n                <i class="icon-icon_chervonRight"></i>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n</div>'},{}],1474:[function(e,t,i){t.exports=e("sassify")("/**  *  * @param { 300 | bold } $font-weight  * @param { normal     } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal           } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { 300 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { normal } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ .gallery_popup {   position: fixed;   top: 0;   left: 0;   height: 100vh;   width: 100%;   z-index: 9999;   background-color: rgba(255, 255, 255, 0.8);   display: none; }   .gallery_popup .gallery_center {     display: flex;     justify-content: center;     align-items: center;     height: 100%; }     .gallery_popup .gallery_center .gallery_shade {       width: 100%;       height: 100%;       position: fixed; }   .gallery_popup .content {     width: 80vw;     position: relative;     z-index: 1001;     background-color: transparent; }     .gallery_popup .content .gallery-control {       color: #000000;       width: 100%;       height: auto;       position: absolute;       top: 45%;       left: 0;       transform: translate(0, -45%);       -webkit-transform: translate(0, -45%);       -moz-transform: translate(0, -45%);       -ms-transform: translate(0, -45%);       -moz-transform: translate(0, -45%);       font-size: 50px;       z-index: -1; }       .gallery_popup .content .gallery-control .btn-left, .gallery_popup .content .gallery-control .btn-right {         float: left;         cursor: pointer; }       .gallery_popup .content .gallery-control .btn-right {         float: right; }     .gallery_popup .content .gallery-overlay {       margin: 0 50px;       width: calc(100% - 100px); }     .gallery_popup .content .header {       overflow: hidden;       box-sizing: border-box;       position: relative;       background-color: transparent;       color: white; }       .gallery_popup .content .header .gallery-nav {         line-height: 34px; }         .gallery_popup .content .header .gallery-nav ul {           max-width: calc(100% - 40px);           display: block; }           .gallery_popup .content .header .gallery-nav ul li {             vertical-align: middle;             display: inline-block;             font-size: 1.4rem;             font-family: 'Whitney', Helvetica, sans-serif;             font-weight: 500;             margin-left: 20px;             color: #4E4E4E; }             .gallery_popup .content .header .gallery-nav ul li a {               text-transform: capitalize;               cursor: pointer;               -webkit-transition: all 0.5s ease-in-out;               -moz-transition: all 0.5s ease-in-out;               -o-transition: all 0.5s ease-in-out;               transition: all 0.5s ease-in-out; }               .gallery_popup .content .header .gallery-nav ul li a:hover {                 color: #000000;                 text-decoration: underline; }               .gallery_popup .content .header .gallery-nav ul li a span {                 float: right;                 margin-left: 4px; }             .gallery_popup .content .header .gallery-nav ul li.checked a {               color: #000000;               text-decoration: underline; }       .gallery_popup .content .header .close {         font-size: 4.5rem;         position: absolute;         top: 0px;         right: 5px;         cursor: pointer;         line-height: 34px;         color: #000000; }     .gallery_popup .content .body {       position: relative;       overflow: hidden;       height: 40vw;       width: calc(80vw - 100px); }       .gallery_popup .content .body .gallery-wrapper {         position: absolute;         left: 0;         top: 0;         width: 100%;         height: 100%;         -webkit-transition: opacity 1s ease-in-out;         -moz-transition: opacity 1s ease-in-out;         -o-transition: opacity 1s ease-in-out;         transition: opacity 1s ease-in-out;         background-color: rgba(0, 0, 0, 0.6);         background-color: #ffffff; }         .gallery_popup .content .body .gallery-wrapper.opacity0 {           opacity: 0; }         .gallery_popup .content .body .gallery-wrapper.opacity1 {           opacity: 1;           z-index: 100; }       .gallery_popup .content .body .slick-container {         width: calc(80vw - 100px);         height: 32vw;         overflow: hidden;         position: relative; }         .gallery_popup .content .body .slick-container .panoimage {           width: calc(80vw - 100px);           height: 100%;           overflow: hidden;           position: relative; }           .gallery_popup .content .body .slick-container .panoimage .dragItem {             width: 100%;             background-size: auto 100%;             background-repeat: repeat;             height: 100%; }           .gallery_popup .content .body .slick-container .panoimage .icon {             position: absolute;             right: 5.5em;             top: 50%;             width: 30px;             height: 30px;             margin-top: -20px;             background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAAEH5aXCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMzgwMTE3NDA3MjA2ODExODhDNjg2NjFGNjk2MjdGRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBN0MzOTNGQTg1NEMxMUU2OTdERkU1RjdCRUQwQkYzNSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBN0MzOTNGOTg1NEMxMUU2OTdERkU1RjdCRUQwQkYzNSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDY4MDExNzQwNzIwNjgxMTg4QzY4NjYxRjY5NjI3RkUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDM4MDExNzQwNzIwNjgxMTg4QzY4NjYxRjY5NjI3RkUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz42tcyaAAAkM0lEQVR42mJsaGhgAIGbN2+C6U+fPjH8+fNHcO/evdGSkpK3rK2td7GwsDD8//+fQV1dneHfv38MLAxIYPny5aXI/MePH+uvWLFCH8SOjo7uhokzoWsAmtiFrBFoczWIXrp0aWltbS1E0+fPnxmATgRryMjIUGRkZCxD1sTHx9cKYwPlSkHqWUBuhdmArgEGkOUWLFiQynTv3j1BqClYNUycOFE5MzNzOoz/9u1bAUZWVtac379/cyKb6uDgUL9q1ao4cXHxmcgGgJw/Y8aM+0xycnI30U0PCgqSQtcAAiAN4IAICAjYDWK8fPmyGObM/Pz8uwx4ABMvLy+YATS5F5/Ca9euJYLoxsbGbiZmZmaGjo6ObmwhhszX0tKaD7aFiYmB6e/fvww/fvwAKULR2NLSshiLQd0g9YzoaW/Pnj0Jr1+/FkVWDEtCsLQHEEBgTU+ePGEAxTQXFxc4wZ45cyYIGB8SPj4+0z98+PBfVlaW4fLlywweHh6IxCokJMQwffp0lMQKTKglMLaFhUU3PKH++vVLHKZ41qxZlsiagM70A9EnTpwAyzMWFRUx9PX1leILYlh6A4buP0YgH69ijIgEEc3NzbqwhIhLITDdOYOdBLIBV/KHRSSyHNiGf6AARgPA1N2IzSai/QBzBdOUKVO6saUjDJOhzmJ6//49XICQpqampm5wIoQlQGTPKSkpcaInQIy0JCIiwjB16lQUP5mZmR3W19c/AUtLAAEET7EgANL49etXcKoE5QGgqRLA9BRLTKDk5uZ2g7LLt2/fGO7evcvg5eXFAAt8lNJ19uzZDCEhIZJr166NQTcEmDVk5s2bl8bGxsYB4p89e/aCiYnJMpj85MmTS5G9DM3hkDBtb28HM6SkpBji4+NRvP3w4cNseXn5qaREL7IY0GxITvry5QvD06dPhZEtuH//fhaIJtYC5MhETgWVlZWloKKKCRQHwLSVBJNoa2vTV1RUnEZKBoMZDHSoHHpyKysrK2XaunVrMLLiqqqqiyA2sKKSQncZelpF5y9cuPARtpqG6fnz5+LYXAfM+c+Q+cA6IB1bkOACsbGxsnBLEhMT4UEDTC0tyBkdZFhdXd0EaJ0xEyYGswxUtcGqOGQLrl69mrB48eLHMD4LsPiESwKT5ad9+/b5Ozk5bQTWl/XorkMXO3jw4Hf0oCkuLlbT1tZeAOMDHXCYsaQEUnb39PSUEkqSpAKgY/cYGRmdZ+Lh4WEAYWDO70au3JAtAFkILJVNkPnANhMjgRTXbWdndx5kNtZiBdgIY9i1a1f+x48f2Uhxuaur614xMbFz6MUKQABSrC80qSiMX26C7kltOCSJIlB60Z5iDyrrwSZjL1HIfFricAthJNTAKBKiGNOMKJDqoT+yhxyuiT6shx4Cl4QvYhEISgQ+zYYwKoYPRb/vsiPn3l2d2w4c7jnnnvN9557zfb/v992uEsKqXC4nWK1WgRwI8CG0220yAGlyq9U6j8XnEFh1JpNpGyzwMwTWiUzQ3K2tLQFjAvUJGD0eT1e5pteuKFJnMpkbOzs7ovIdQv4Q6iXWB+J+HR4eft9LlqqScrnsbzQaJwc9pmq1StHUPj09/ZLYXF8lMGGJXaoJKhaLV1wu1yi1gXe/wXhWlpaWavycdDodNBgMHUS0JwyBZZyYGKtSwcTExAjzbrfbvUoWRxXnfo8UkFcrvR/kR4s7WmAMWFKi1WoFqrFYbI+frK+vt/r5Cnk1vY9Go2cR3C5waCFUKhUHky2SVeDzdEdxRLDOmt/v/7i2tnaRjeXzeS+MRrI6UafTCfF4fJ69RNy+e1hPR+T8omAQCyR/j3mGw+FXBxUOJrIIjDpeKBQ2lXdE2ChjT/D0RcDFrYMqQTZyJpVKXVM7ARzja1Gxo798f2xsbEgtxVGOYXP/eAXEDVg7m80GZEq8Xu8jvg+AM87MzEh5FT2x+CqftCDJdJNSsJwf/DpkSKe4DfQnm7C6iNFofMwsDphUBL/6QHGEf8e31axT0++sgU+yEOxwOApMADz7BBvn2z2ZPCtzc3On+b7NZluhI1JbuLy8/EatvS835z9TjfnTGAkEnHzrNWcX5y4Dht7tplK/NIgJ24gVehoolUpltcjYa0xtztTUlIUp2D2dZ2IoFHrBBpxOZxbO8+AocR0Ydp3vI2sURDAQ2SQg6G1YiuYwCsjz+a9DlvydOLbEhUFNZdlxMpkcBZwfUwoZHx839VOCsC1DC8T5VZIv6vV62oFgt9u7ASgYDH6yWCw69ueAFZCLn7i/m4N8FVKJBMmmKqVZVH0+X4HIBCu1Wu0P/WloNpvznU6nyyxhKA+B1Hf6KcDdvqW7YLKV2JUwm82b/BhS/KcIPJLQycnJEeTgVhzl/V4KIpHI842NjabMCtUokVoeOEiZnZ1NEJ0aiBJRahsIBBL0EwkxIrRP8kO+kKjX61K+yH7q8OW/AMxaX0hTURy+rkjJMk0k5x4MjDIjkxSnQkGI+JIkWIJ/mASCoWYZ7UGfwhDDURiYDyFCD3voz4tRgialgShtSIZzGQQyUvTBSagVRX++b+zK3TzHzc2sA5e5e+/OOb9zfn++7zv6IMi1XAOrXC6XMj4+viafeL3HAzhYt9k5FRR+Yv/OOJ3OLL9KEVTDvi9mZmYOAM5+8oaQAjpD6q2wfHO8mJgYYgaFciI8XBGoDcqmYo6TxkB7AVIuhTJpUUOUxPf19ZVp78Et3oEM9HP1g20BDaH1mHwEJn9d2aYGF0q3WCzp/Bu7NQWW8zxkQyhNYFUOAtZfCNRJWVmZobu7uxo0IJrfbTbbOAy3DQ0NLcDlVqOjo3eA3+0BKtGDwBxBOjipyhpWq/VZZWXla1nfAOdpvOhWgKU+MoePtwD/rtsBpn4w3g2jfX5+/hr8OxGdPkCcOcLdBeZCxEmM0WhsBW35LHsPyXYR4/UA1PvuiDbpMtCQrkygjULtAJhi9/T09A0AxSfIoXe20p20+ZawYXR01JaXl/fY/z1Q2PjGxkYz5mkhjl9LUNwyXsy51HNkRrDz6urqIyysdXV1b/5mjHAMGsExkcfjRe9gDmZw9DhmUs4/AtZ5KC54mZmA1b+VlJTogZYbw5UlQm10YUCn7wDWnaLn9fX19xAKX3TM1f39/fkiI0g4t8sI4G0zMcTg4GCRlkDRheFCS7Ozsw2i33V2dtYhmSg6Brfdbj8pegl0/PJ27YTb7V5CjO7Kz88/hUX9oX2G7GkFNjQ0NDQckoDVcxHZ2dlGZInT/g9nZmZqcf99aWnpy43URgz6VSS7kY8hJTfJIDm5GepDkaZ22ElQZIYyfU9OTkr5+E7Ai+OiB8nJyQfRugJxBhpGuVWrhvIeMOxH2aCqEf6EZ2xsbCknJ+eF6DcOh2PFqzHuR31yr4NVFMY26wYclBcVVU5GawQmU+BlVUlkw5R3VWM1emSRqF/UkIJAY+fm5gqzqg5p93Mo6ZEXXYqT1PJVvV6fpCq6pPmUkLk7LS0tV9V3+F3Ur+y+tvX29rqEhoDujIkeoCC9QRIoF4C8GlUAoSzAT5PJ9Ejjkg+0z7grYDEpqjau6uPad9RP0Smu2jCGR6CcmppaFS4uCouUfHC1AaGbAB9+Kv+4cS5w12YYva5OoHi+0hGaV1RUWGUuhBhq+x+MAOroERnhTQB2HbALJzyXmprqlBnDjjo6OjL/lREZGRk3qZ2KngOZWEDIFR1FCIPBoBQXFz9LS0tzyIxBZV0O5lBpqxoPSkZGRs5z7ImJiWXRO+3t7RYCXY+QQhrJizy4vLy8z2w23xf9CETnAzttbW1N9x5sHQtmNefm5q6EYggK7W9KVDKmCgRuoWyuzl/I2b1HTVdWVlY2PPVBkbqIXTxK4U02qGoQ+IM7Li7uVrg71dzc3IXUvkpjAjJEcmVkqrtejnIdlkdIYIOPut7W1naitrb2LFZon3oPi7EM8PotNjZ2Pw0aGBgYLiwsfL5ZA5CZHsLVXFKGGIyKQsyPgMoYHh4u2M5Aj4qK+lVTU3Ob/zaAOAlfRaEvAk6/RQy9JQ3G9wNAnCZRh+E2FOjplJSUpyR6NIAskDEQtori33i4EhkZuVBVVUVxzbM6jCnA8ESn02kEzDgMXhGwH0IjnqJmZWXZuVA8IIX7efQC6loJCQmbmtcfAZi5GpiqqjiOb2U+NiD3hrpCUEOBLBiC+MZwhksTUAQ/5heCI1TmB9NE27LN1TJlwlRy8Nx0fBgaYPKWJHM2NeeaBIrix1olUmLAMC2/Yrhpv9+Vy27Xc+59IB+d7crznXPvPf9z/h+//8d5UtYCLyspjtDQ0K5AnNVqdWtoaFCyrHw5bRC/Y8COK4fJDQKE8IfhGo3VHA6nzQMyorjT8ELbIex3YJ1vgoBfiUy4AJRHvo/sa7PZlIAcF4LvU2Nn7GctFvwSpmBePECn00TKlmOiPtBa0xloM1ClXAwrLuaMmJR6R41cBgUF1cIYn9KmOHtkd3pCAFbW7cyZMzM6s8c9blxxOEvhvLCzT2bPnl2CHWtxhTV7TAgJIA9De7138uTJ4N4Wcub2WQDFXVq6dKkDrHu/O/dbXB2IF9hg3TcynNmXKpe7VFhYmF5dXb2Q1YO9RggFEu5wHOsC+tOGsECCVY2MO7ui5oVaSxtGhTxksObAlZeDzy25ubmTYmJiwgFEn6vUaGpqugmH7QrA3gU4bS57pnPnzv3y8OHDzfwMt7r7Wgs6XRi00zfITHx0dHRUp7vaevz48R/x4rJTp07dhuA+hboebLfbbYAmozHu7ZqamhiVsPj4+KK6urp7Rs9njR9UbzmQRqPLwq6qQVZ9mBGBBy+BnQkBxL8J3PWJzA2Fym3Hdau0tPQW/ntW/b6qqioWz/i4E7dJ72cDsfNhhIth9VuFMsKJay9qJlypNHiytnz58lEEgPADhhPa+/j4fGE0CVkDCx7j/fv27asAkt5CNG00HnKarBpK/by7Kik1QYdgVq3IHgbeXhQWFhYKlshhfUhvCriaWjCLbhYVFe2An/PfHSF2Ui9aaiMiwP8bSARf1NtEqKkFyNUPZp7o5s2bk1Xcp14vEUexMRCckZGxQXYzPT0AueF9HQueOnWq88iRIw+M6qGY+mD9FGS4XXWwLDQ6hBwAeUPBe0K74nQ6p0PzvN5fAe05c+Z8d/ny5atGO8MaLQi+UnLPy0L0SQceHWky2wAM9G5/50eCg4OVQF9lZWWMbAzcBhvnryBo/gNv0F02GP3b9+zZUz4QoSAuXlxcXLSs3+FwpKquueIrHDp0aIlo4Nq1a9/o/FvT15MGwniLrHTjxo107fdgsSttbW2ZMvdAjaoo1Y0soxANBNxYOX/+/J39sfqARcm7d+8uHTVq1BgggzgNixXDYRsmu4/ZNmVHAM6EPqWfn5+SblAxTl+27OxsJWO2bt268/AEf8Lkx2r7iRxOnz6dILFrE5QCSnyIFA2Aq5ukLRTry5aZmXlBjX8FBAQELlq0qFiHAAqmTJkSaSDHbpbGxsZxos5xaDNnznSK+pi0MTqho29qeaTRcyjY+/fvd/KvPiMFOXlg9HwY6qHS8kmRQdLnBdmY99AfQugEiim+vr5KWBVO0gl9Sk1vI8zUO6B71ooVK/Lw/t/0fREREWeEhCQmJo6Adf3A7OGywkam5KANrWlpaduwynf19zGxw7JObREl2OMu0IU0hQG/PgUarWXWrFnH9X1jx45tEFpysNQYCFiTGcuIUmVkFRLRySp3RfeRCBbHavyZo+7u7kON3gV0fTMwMNBP1Nfa2jpUSAhYwtbc3NxmxvdMqelrWYHXVsLAXj1w4MB4pumYwRXdX15efl79fPDgwStmi4Zn3sUCeEoCF0OEhGCLrfDsOoxYirLClVTrZ3ULMT4kJGQMNN9ZZnBFmEkrV7Kd02mmx4BSr8hCukJXFwbyHuzIMCPooBL08OHDKD1vk21Y8szP0EDb9AqiJw3A1vpIUlIHH+aJRQLGWkaOHPma2cPJViLehk9xTb/aenWt/b8rqhxI1xsy+ackan9fSEhhYeEvzGeYPRyurnBMQkJClP47/Xlg7RjReEGU/o1Lly7dEPV5eXm1WCQaQuh/U3ApxOoqkv+pNrVj4GGWUUbUSgfRYVPaFXUMlQY/8zsjQnx8fEYChddLlFPjIDgl6Xfu3PEQCfSqVasc+fn5Dep39fX1s7Ayk7XqV5Tk1xbMyIputAbTrKBGZqA1KH3HoMjIyHBgqucwf15e3qTU1NRY8N8WtwFuO3fuDMOiJqrl2vq2evXqHRaAsVpRJ26sxo1Wt/9BAypesGzZsnxRH09DKOhXnx3VqdGrt2/f3jiQRMyYMUNxM+D83RL1T5s2rZJpCOVEF89Zyvxmm83mDVU8ZKAIqaqq2pieni495wtH7A8aRKWmMTQ09JxsINBtIeDBpwNBBE/VUM737t0rjPmy7ARK45k/wpAKw6Q8UyIaDChxjcl+XB/1JxGsbo2KirKD9T+UjVmzZk2lv78/jeWzHSFFEKavDeDBdhidV3m2uL8I8fT0fJnqX9bPuhmez+X8eXUdhYFNUI4MG+Er3PwmfOo0VycD4nucbC0oKPhda8P0LSkp6RijKF3HbRhlVK958+bVGWkxEkMXuL293VRmHA6HHez4OQzm4N7eLRb+MNmjnbtS96te1GC5ubk7zIJm169fb6Cl3bRpU4BsHDTNuYqKihMtLS2fsaa+t4jgSS1o0r+ZStDOvYu1eKnEsALH6GE8Ih8bG5udlZX1PglavHixjySGe6KkpORbHgwIDw/3elEiANc7UlJSjrK0Qzvv505yqVG7rVu3PuSRLxP9rhxNzsnJ+QqTzSBBdXV1SyBnNh0vf8/oSE1NzWZ9X3caqx9YsSQ75WOYDAUxvsBhC1x5EQyTtaysbPbEiRMnaEKaj6FRHnl4eHi5Gi0RNYDOpx0dHdmd5qD7yVDWR61fv37vrl27Vpq9rLGx8Z+IiAjuorKT0O/ugA8jgHA9ANFbnU5nS092gmf9mpubi00D3mZFNfC96YG5wbpuAG9a3PqxAdCeADy6SBkwK6qxuMKbVADJyck5/IGH/iAA9qeD0BzI9qJRUtZl1tLHV/38/C7ALeUvVcQDGQf0NgFctIULFxZDJlp54FJ7bKrXCFE1Gn9CCKj4GygC5tnt0EaTX7REydvbu81utzvBNn/xJ0HUeq3utB5BCL6EKwaLeg4reI5Vb7W1teGAORPAhqb2gjkZsM3PQUFB1Sxr4tlkPrM7Byj17V8B2rsSoKquMyxKghStUDFBhVRBFAwaGonUIBEa0EoMLkQqJi5kLFHBNTbaurQ6MujEZQZlcSPCGIexUVRQcVDQBI0lkjDEoICiyAugoMYkKNio/b7be5jn4y33PhYV88+84b3Hu+ee+//n/Ms55/9+vZPdkNjlFT8esukg9h779u0rec88ysfdLyoIPhgnJHeK2Un6cQQPE//jtXT0yHl+5pljSpXtwRNwgDPoCMn3xm9exN9u5pzfMsRA3Ou2tbX1Nfz93tHRUQOtWC1hR8ijjXOSv+PJQOaeSYt/eC6e9gbzpUNGHDXkh/gfn4sbskwpvHz5srRdzmsRZkjKSV6Eb72RZS6R6ewoHxhCscXodMMDuGE09mjuNFNCFCxeHPl89S8qKnpkttjb29dggF2An3sBs+YHnoHTzdtsbbJsbQFw1HMGEBwPCtsbodmA1jgt3BJ9JY6gjCXoK7QC3ONi+Nv/wTNc47O09sBpcYGQ2ZwFVEUlJSWv5uXl+arFh3pSiM9Cqy8sP90N4u0huPqa6kqg/z1xAhFp4zxFXVBQ4Jmenv5mWzuXbUEcWFlZWW/yxeQDb2/v456engXiWH2bC0SAwuoSwpXfHjhwYBwM8outzRTGbgxzevfubQN10p3ZS9yRg6H9BQxrgANxF6FLPRyPn8Go/7ZWPzjgmIHCF8MleGn7ExMTfzSwLNg2M4RBMPzeUEO5PuYQV5jnzJnj5u/v7+bq6toXasLOgM5/wDwheDj3YZAtIJhORJBg7rURO/GwvLz8Sn5+fsm+ffuKd+/erWmJPnMgMn6Oi4t7iCB/j8g5ajOVNXz4cKcvv/xyUktMU4JUIQwcAcPZmD5HKAEY//PJyclZR44cKc/MzKxp7n14zCk4OLj3yJEj+w0bNswjJCRk1Kef/j+BFAPqXm5u7ldr1qw5Tdgic+/BgclVGnpnuEeqLiBQi8Uh9CzoKSHWsImNjZ1hKp3PRDxjAfU2asyYMX8S3yFkvrhjx44vYmJizre1XUBU+tzq1auHjB8/3oenZ/kdl65SUlIyuUra3IXEuXPnbkeMUscYR0m0a2FMvwm3lQHe1q1b34a34WZu56AeRoSFhb0l1E1qauqRyZMnn3zSDDdnEmbmn8X5NsQt9Zg5ezBwz5nbJpepIyIi0hlQiiDUoECio6MNCoPRJwK3buvWrYswx/9mkgWm8AxCRvBzTk4Oj9YcfFq8KjoPGRkZYQOYS9rM/lMIixYt2orA8zZXNQwJpREpV5cojGPHjv0hOzs7QO3N4QFZwf2di8hX2k/+6KOPtjPl+ml2eeEEBEKtSXm9sA1ntOEI1RC3AgMCAr6hUPQKZPHixU0kSWHs3LkzqKio6GW1Nzx37tx0uKMD+X7evHlbYXMutqdYBEZ/TGBgoASCs3bt2t1LliwpUNsGN2+nT59+mELR1TyPGHUKg8FdfHx8CIThrOYmLPKQkJAwi+8PHTqUA6N9pEM7JkTpS3iMrba2tgbOwMdmCKVs9uzZexlUagvFYsqUKY02g8nWcDPHIKhyV9O4gGYm9u0rr7wSLZB92jvt2rVrxLvvvis5KuZkmfHQyejRozNqamoabUon+MvSEjIxOPLy8v549uxZVYAnxKsaPHiwR2Vl5fcYMdFo/F57YDb3z8PDw52trKwelpWV3TVgV8pLS0vPI6bxhgf5OqL3CgSFtUrvwVVuLsHAC9PQ+6JHa8k1KKbpgbG9Tpw44aum0xqNZg5zcItBkPaO9iAI1kdZtmxZk/obiE3qMHg36ILLMNpH9B8DQ/93uMfvQ4DJq1atUgzvSJ6Dh1fhblcy41DKRKK6ysrKGqOm40wIpTCuXr1a3l6EsWDBAlchjKSkpP0CNoyBq7W1tc3hw4fD9Z1Oway4JTK2Vq5cOY2g0GruS94LbNuOPI5y8uRJL4FSrYQ2bdr0GhNbGTTBOCW2F5sAA1sv3uP5XGAPux44cGCki4uLhD0I9VSRlpZWqe9aZp4heJZc4U8++WQG1I/i1W7ynjKgLDpyEwZG3EtNsBQZGSlVXlm+fPkuRJ/324tAUlJSKhwdHZdDfV+BMAYhlloOYx3AA5ww3rF+fn5pUF0PjKzLnUEgXcbZBEGOVnNvyoCysETc4KrvHLwhSkxMZI5uR7jFRUqCPR78hycxBBHqy0xP0hkZlzZv3pyuL7HMFDEZAGpiCEavh0jz0JeApo+YlDBhwoRg7fQQntfPz8/P5fVqawfpaI/jGzZscEasMrxPnz7ZPCGl5DrKgLKwwAMFQkd6Kl2IgyFfwWwg4tgZgoDT8dfn4/fWZ86cycUNJcajo3ZBQUFvCwEZSnDQJ4QVK1Z8oC1Ypm5dvHixjG0XFhbeNJbRxMHBdC/xmQLEq0y3P8wSGTt27FlzhcI0YmbgxsXFfRYVFaU4/xSyKLC8ffu2g4rgz5XCuHPnTh0eTtFSiHZFCl2/QGQeMk+OzDJW74+5cvydrMtNZpboE6YQhoHsxsb+QE2Foj+3TNUfNETffvttib+//wtDhw517tmzZ0FVVZWiUICyoFFXrK6gV3vJo7LCmC5VQsQLFdU9yCClwmBaqVphyNcFasUPBw3YkHTxftKkSQHmPhsGzHX+RWzXw8fHR/ERWsrCkshjSi/ADexkffej2k4KmFyizIocKuptuJLpxtQD9b0QBvMY161bN2379u1NUghNtSXuSdKX7CmvvV3CLJLei3uaQ1DBUlJdly5dujo7OzNrVVHuP2XRpJyJMUI0KWEpdOKWmJkEV/kumcf31NkBAQGB2tjFuvTGG280eoDu7u5eMJh7RHwgXrQjbIuqxlBJnLYk9EWUyLwPnin2QimLjnDR6lVE5tKaMQzw79R2kt4LX1Q3zD4UjKSnQwxmuIl6Xe/OPCMtU3x8fIo+j4yQyHBNK8VM0JcYq53eqa++lO73uumgasjJyambbBN+Ki4uVqxNKIuOYK7iG2dnZ1+RGdBn0KBBXZo7kvbv35+rJTC9a2j068V7Dw+PXkZm712tNaImriY8ycYdP3hqeoWv/T3Uo9lelpubW2+575qjR48q3qOnLJh+pPjkRVJSUjkMbDVPecyfP79ZCIAcjTC0oVo2Jt/QzBKjlTm++tQbZ5e2B6ZvFjGHXqhKfe3ws3YOsZJ4xgBTn+diK99nZmYWQ20p3mqlLCzGjRtnl5GRMUMJLh6J8Ncwfn+h68sChcZuKNxIY+3x4aGytpgKDktKSkJdXV0bR7BQUdrtK4kfTPWJ7Rpx1ZUMWp/w8PCxiEWusx6WCrtDXJDtFhEREVRFYxFc9Vd6MabiLARTfT///PMzGOkmtzKp06lu4Pt3lt3YW2DeJSWwFIba8/b2dq6rq6tnQGhOvMAZ4efn58I+sR1ifZjbH0E8Q1BRUfEv+DyWy5Yt2xkdHV2kYkmqhJVsqXp40KtHamrqdKUXc88c3sw/eeONGzemLly48OsOvxJTFqIcHR1fMlRAyBix0qWDg0NNJ09PTwI/EFLEurKysqeSi1lLATq/EP68Dw+dwZWtyM3NrX2WhVFYWDgNKtWVUES66OymyMvL62tE9eek/RCeVGfexKhRo453795dcTIET/j5+/tLePUxMTHvJyQkeD+rwoC6/4AnL6FpqjC4Y9VcS56T95QBZSFBrgqDHhYW9imNi1Ii7hgrfnBfZObMmSEYJVOfNWEQXdUFdB4EG6IKVpC8Js9l50baKJRmCF9yUHUHjE1S0ygrlyB2W5GXl5ePUSIBKQp8j/ZMLOXBZyXULQvbDRw4UHWJZvKaPOd7IYdHTi4KvHcYbDtDuKXGiMXjoMr+xv0StFEOTyyuvQmCxWvLysoW8hAgi587OzvHwMVVnfbAw4MIsG8x6Uf7FKPFhx8+it5LoTCxsb6+vvP69esjDaHiGiNu8UZFRU2UI97vBAjsryStAz4Az+OgVepF1q42NVbfES9WBObaIWZKfWxs7HoYKdVg0MSZ5VrVtm3b0mjsOLWrqqrm+/r62rXEQy1dutQdba7VaDRzza3r/DiIvCRPyVvymLzW5X8T+HFd4nmtvXv3GoUkN0XTpk17afPmzVOpb/n52LFjX/CAGEseNWMdbCQhn+VAsxqBYjyB559UYQQHBx8NCQkp1IVN16UmZWZ1iUk5POvL/AaosPdZHbU5HUtJSfF977333qKd4ef8/PxvVq9enWMu+saePXv8J06cKB0ouHnzZi2i73hTKLNtSSyLCxWVJOfXmIR1kBDZjL1ErjZtC/4mTZ06NUXNHoou4fov0Kklcp3HFLiKL6SlpS0UNSBLS0v/imntBa/FRkl7oaGhOWwrOTn5IAaOPVzvFRg0/0CkbPs4BUEekVfkmcw7iZem+K0KyUE76ZPVpjESJypdlFRCs2bNcsbsQdOvesDoPYLrxKOqCMAqSkpKqsD06xcuXLh96dKlOiZ2coHT1tb2OTc3ty6LFy8exvquvAYOyS9btmxJi4yM/KqtBMHYAnbzkcIhhsB/9F5v7o3lG378zjvv9Dx+/PhEpaVgjBFhy2Toss+03UyoJEeoot+7u7v3CgoKeg026QWMQL1pdffu3WuA8DTW1ta/gSNxLScnR9MWgsCAaMBA+HdzodqbjXUCX1rC86iurmalsCDWR3+W3FgWt4d6Pezg4PCQvCGE4mPFOqGg6E+jEw/RgUNDhw49VFdX1/306dOBrMrUHoXQr1+/CtioLBsbmxtcEKQAyAM1OEytJhBdklGBbsANTR0/fjwPjXU9derU64huB4v6eE9hMNcBEXmhj4/P6R49evxE15XPIhCQWtQGtcYD0FvgFKVn0dDQ8JOTk9PRwMDAo3wwCIgVHT1hnF9m5bknUQAs7de/f//vYLMKIIBqMp9qmiuywuNsidnQZgLRJyDaHHpkeNjqAQMGZGLaZ1JAFBz+5wj96wph9a2tre3eVjOJ97e3t78Bpl+Gri+F3teQ0bw//0fMLK41cRaoRVR7ogWiT0BE02HeNh/cyspKg1mk8fDwyBGlReXlGwswxBbekj0+20JYdmBYFwjQBqPVCsJ8npgjwvUm45iRhN/cQ5sNYHAdfvMzmH4LTP4BMU8tcbDQ5kMynUsXjBd4P+ZmEFSN30uZTJaPZ0Xmf+6jNDGM/WslAAAAAElFTkSuQmCC);             background-size: contain; }         .gallery_popup .content .body .slick-container .videoSlide {           width: calc(80vw - 100px);           cursor: pointer;           position: relative; }           .gallery_popup .content .body .slick-container .videoSlide video {             position: relative;             z-index: 1;             width: 100%;             height: 100%;             background: black; }           .gallery_popup .content .body .slick-container .videoSlide .video-placeholder {             width: 100%;             height: 100%;             background-size: cover;             position: absolute;             left: 0;             top: 0;             background-color: black; }           .gallery_popup .content .body .slick-container .videoSlide .opacity-zero {             opacity: 0; }           .gallery_popup .content .body .slick-container .videoSlide .play {             width: 68px;             height: 68px;             border-radius: 100px;             border: 4px solid white;             position: absolute;             left: 50%;             top: 50%;             margin-top: -34px;             margin-left: -34px;             z-index: 1; }             .gallery_popup .content .body .slick-container .videoSlide .play:after {               content: \"\";               width: 0;               border-left: 30px solid white;               display: block;               border-top: 20px solid transparent;               border-bottom: 20px solid transparent;               position: absolute;               left: 50%;               margin-left: -12.5px;               margin-top: 13px; }         .gallery_popup .content .body .slick-container .slide-item {           height: 32vw; }           .gallery_popup .content .body .slick-container .slide-item img {             outline: none;             border: none;             height: 100%;             width: 100%; }             .gallery_popup .content .body .slick-container .slide-item img.compatibility-img {               object-fit: contain;               font-family: 'object-fit: contain;'; }         .gallery_popup .content .body .slick-container .swiper-slide {           height: 100%;           position: relative;           overflow: hidden; }           .gallery_popup .content .body .slick-container .swiper-slide.minWidth {             min-width: calc(80vw - 100px); }           .gallery_popup .content .body .slick-container .swiper-slide .dim-block-inner {             display: none;             background: black;             width: 100%;             height: 100%;             position: absolute;             opacity: 0.75;             top: 0;             right: 0;             z-index: 10;             cursor: pointer; }           .gallery_popup .content .body .slick-container .swiper-slide.slick-center .dim-block-inner {             display: none; }         .gallery_popup .content .body .slick-container .unvisibleIMG {           visibility: hidden;           width: 0;           height: 0;           overflow: hidden; }         .gallery_popup .content .body .slick-container .hotel-gallery-mobile {           display: none; }         .gallery_popup .content .body .slick-container .tpl-gallery-controller {           bottom: 3%; }           .gallery_popup .content .body .slick-container .tpl-gallery-controller .text-intro {             font-family: 'Museo Sans', Helvetica, sans-serif;             font-weight: 500;             display: block;             color: white;             font-size: 1.2rem;             text-transform: uppercase;             letter-spacing: 1px;             line-height: 14px;             text-align: center;             text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5); }       .gallery_popup .content .body .slick-container-area {         width: 100%;         height: 120px;         position: relative;         margin-top: 1rem; }         .gallery_popup .content .body .slick-container-area .slick-container-item {           width: 100%;           font-size: 0px;           padding: 0;           background-color: #ffffff; }           .gallery_popup .content .body .slick-container-area .slick-container-item .slick-list {             margin-left: -1rem; }           .gallery_popup .content .body .slick-container-area .slick-container-item .panoimage .icon {             position: absolute;             left: 50%;             top: 50%;             transform: translate(-50%, -50%);             -webkit-transform: translate(-50%, -50%);             -moz-transform: translate(-50%, -50%);             -ms-transform: translate(-50%, -50%);             -moz-transform: translate(-50%, -50%);             width: 30px;             height: 30px;             background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAAEH5aXCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMzgwMTE3NDA3MjA2ODExODhDNjg2NjFGNjk2MjdGRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBN0MzOTNGQTg1NEMxMUU2OTdERkU1RjdCRUQwQkYzNSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBN0MzOTNGOTg1NEMxMUU2OTdERkU1RjdCRUQwQkYzNSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDY4MDExNzQwNzIwNjgxMTg4QzY4NjYxRjY5NjI3RkUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDM4MDExNzQwNzIwNjgxMTg4QzY4NjYxRjY5NjI3RkUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz42tcyaAAAkM0lEQVR42mJsaGhgAIGbN2+C6U+fPjH8+fNHcO/evdGSkpK3rK2td7GwsDD8//+fQV1dneHfv38MLAxIYPny5aXI/MePH+uvWLFCH8SOjo7uhokzoWsAmtiFrBFoczWIXrp0aWltbS1E0+fPnxmATgRryMjIUGRkZCxD1sTHx9cKYwPlSkHqWUBuhdmArgEGkOUWLFiQynTv3j1BqClYNUycOFE5MzNzOoz/9u1bAUZWVtac379/cyKb6uDgUL9q1ao4cXHxmcgGgJw/Y8aM+0xycnI30U0PCgqSQtcAAiAN4IAICAjYDWK8fPmyGObM/Pz8uwx4ABMvLy+YATS5F5/Ca9euJYLoxsbGbiZmZmaGjo6ObmwhhszX0tKaD7aFiYmB6e/fvww/fvwAKULR2NLSshiLQd0g9YzoaW/Pnj0Jr1+/FkVWDEtCsLQHEEBgTU+ePGEAxTQXFxc4wZ45cyYIGB8SPj4+0z98+PBfVlaW4fLlywweHh6IxCokJMQwffp0lMQKTKglMLaFhUU3PKH++vVLHKZ41qxZlsiagM70A9EnTpwAyzMWFRUx9PX1leILYlh6A4buP0YgH69ijIgEEc3NzbqwhIhLITDdOYOdBLIBV/KHRSSyHNiGf6AARgPA1N2IzSai/QBzBdOUKVO6saUjDJOhzmJ6//49XICQpqampm5wIoQlQGTPKSkpcaInQIy0JCIiwjB16lQUP5mZmR3W19c/AUtLAAEET7EgANL49etXcKoE5QGgqRLA9BRLTKDk5uZ2g7LLt2/fGO7evcvg5eXFAAt8lNJ19uzZDCEhIZJr166NQTcEmDVk5s2bl8bGxsYB4p89e/aCiYnJMpj85MmTS5G9DM3hkDBtb28HM6SkpBji4+NRvP3w4cNseXn5qaREL7IY0GxITvry5QvD06dPhZEtuH//fhaIJtYC5MhETgWVlZWloKKKCRQHwLSVBJNoa2vTV1RUnEZKBoMZDHSoHHpyKysrK2XaunVrMLLiqqqqiyA2sKKSQncZelpF5y9cuPARtpqG6fnz5+LYXAfM+c+Q+cA6IB1bkOACsbGxsnBLEhMT4UEDTC0tyBkdZFhdXd0EaJ0xEyYGswxUtcGqOGQLrl69mrB48eLHMD4LsPiESwKT5ad9+/b5Ozk5bQTWl/XorkMXO3jw4Hf0oCkuLlbT1tZeAOMDHXCYsaQEUnb39PSUEkqSpAKgY/cYGRmdZ+Lh4WEAYWDO70au3JAtAFkILJVNkPnANhMjgRTXbWdndx5kNtZiBdgIY9i1a1f+x48f2Uhxuaur614xMbFz6MUKQABSrC80qSiMX26C7kltOCSJIlB60Z5iDyrrwSZjL1HIfFricAthJNTAKBKiGNOMKJDqoT+yhxyuiT6shx4Cl4QvYhEISgQ+zYYwKoYPRb/vsiPn3l2d2w4c7jnnnvN9557zfb/v992uEsKqXC4nWK1WgRwI8CG0220yAGlyq9U6j8XnEFh1JpNpGyzwMwTWiUzQ3K2tLQFjAvUJGD0eT1e5pteuKFJnMpkbOzs7ovIdQv4Q6iXWB+J+HR4eft9LlqqScrnsbzQaJwc9pmq1StHUPj09/ZLYXF8lMGGJXaoJKhaLV1wu1yi1gXe/wXhWlpaWavycdDodNBgMHUS0JwyBZZyYGKtSwcTExAjzbrfbvUoWRxXnfo8UkFcrvR/kR4s7WmAMWFKi1WoFqrFYbI+frK+vt/r5Cnk1vY9Go2cR3C5waCFUKhUHky2SVeDzdEdxRLDOmt/v/7i2tnaRjeXzeS+MRrI6UafTCfF4fJ69RNy+e1hPR+T8omAQCyR/j3mGw+FXBxUOJrIIjDpeKBQ2lXdE2ChjT/D0RcDFrYMqQTZyJpVKXVM7ARzja1Gxo798f2xsbEgtxVGOYXP/eAXEDVg7m80GZEq8Xu8jvg+AM87MzEh5FT2x+CqftCDJdJNSsJwf/DpkSKe4DfQnm7C6iNFofMwsDphUBL/6QHGEf8e31axT0++sgU+yEOxwOApMADz7BBvn2z2ZPCtzc3On+b7NZluhI1JbuLy8/EatvS835z9TjfnTGAkEnHzrNWcX5y4Dht7tplK/NIgJ24gVehoolUpltcjYa0xtztTUlIUp2D2dZ2IoFHrBBpxOZxbO8+AocR0Ydp3vI2sURDAQ2SQg6G1YiuYwCsjz+a9DlvydOLbEhUFNZdlxMpkcBZwfUwoZHx839VOCsC1DC8T5VZIv6vV62oFgt9u7ASgYDH6yWCw69ueAFZCLn7i/m4N8FVKJBMmmKqVZVH0+X4HIBCu1Wu0P/WloNpvznU6nyyxhKA+B1Hf6KcDdvqW7YLKV2JUwm82b/BhS/KcIPJLQycnJEeTgVhzl/V4KIpHI842NjabMCtUokVoeOEiZnZ1NEJ0aiBJRahsIBBL0EwkxIrRP8kO+kKjX61K+yH7q8OW/AMxaX0hTURy+rkjJMk0k5x4MjDIjkxSnQkGI+JIkWIJ/mASCoWYZ7UGfwhDDURiYDyFCD3voz4tRgialgShtSIZzGQQyUvTBSagVRX++b+zK3TzHzc2sA5e5e+/OOb9zfn++7zv6IMi1XAOrXC6XMj4+viafeL3HAzhYt9k5FRR+Yv/OOJ3OLL9KEVTDvi9mZmYOAM5+8oaQAjpD6q2wfHO8mJgYYgaFciI8XBGoDcqmYo6TxkB7AVIuhTJpUUOUxPf19ZVp78Et3oEM9HP1g20BDaH1mHwEJn9d2aYGF0q3WCzp/Bu7NQWW8zxkQyhNYFUOAtZfCNRJWVmZobu7uxo0IJrfbTbbOAy3DQ0NLcDlVqOjo3eA3+0BKtGDwBxBOjipyhpWq/VZZWXla1nfAOdpvOhWgKU+MoePtwD/rtsBpn4w3g2jfX5+/hr8OxGdPkCcOcLdBeZCxEmM0WhsBW35LHsPyXYR4/UA1PvuiDbpMtCQrkygjULtAJhi9/T09A0AxSfIoXe20p20+ZawYXR01JaXl/fY/z1Q2PjGxkYz5mkhjl9LUNwyXsy51HNkRrDz6urqIyysdXV1b/5mjHAMGsExkcfjRe9gDmZw9DhmUs4/AtZ5KC54mZmA1b+VlJTogZYbw5UlQm10YUCn7wDWnaLn9fX19xAKX3TM1f39/fkiI0g4t8sI4G0zMcTg4GCRlkDRheFCS7Ozsw2i33V2dtYhmSg6Brfdbj8pegl0/PJ27YTb7V5CjO7Kz88/hUX9oX2G7GkFNjQ0NDQckoDVcxHZ2dlGZInT/g9nZmZqcf99aWnpy43URgz6VSS7kY8hJTfJIDm5GepDkaZ22ElQZIYyfU9OTkr5+E7Ai+OiB8nJyQfRugJxBhpGuVWrhvIeMOxH2aCqEf6EZ2xsbCknJ+eF6DcOh2PFqzHuR31yr4NVFMY26wYclBcVVU5GawQmU+BlVUlkw5R3VWM1emSRqF/UkIJAY+fm5gqzqg5p93Mo6ZEXXYqT1PJVvV6fpCq6pPmUkLk7LS0tV9V3+F3Ur+y+tvX29rqEhoDujIkeoCC9QRIoF4C8GlUAoSzAT5PJ9Ejjkg+0z7grYDEpqjau6uPad9RP0Smu2jCGR6CcmppaFS4uCouUfHC1AaGbAB9+Kv+4cS5w12YYva5OoHi+0hGaV1RUWGUuhBhq+x+MAOroERnhTQB2HbALJzyXmprqlBnDjjo6OjL/lREZGRk3qZ2KngOZWEDIFR1FCIPBoBQXFz9LS0tzyIxBZV0O5lBpqxoPSkZGRs5z7ImJiWXRO+3t7RYCXY+QQhrJizy4vLy8z2w23xf9CETnAzttbW1N9x5sHQtmNefm5q6EYggK7W9KVDKmCgRuoWyuzl/I2b1HTVdWVlY2PPVBkbqIXTxK4U02qGoQ+IM7Li7uVrg71dzc3IXUvkpjAjJEcmVkqrtejnIdlkdIYIOPut7W1naitrb2LFZon3oPi7EM8PotNjZ2Pw0aGBgYLiwsfL5ZA5CZHsLVXFKGGIyKQsyPgMoYHh4u2M5Aj4qK+lVTU3Ob/zaAOAlfRaEvAk6/RQy9JQ3G9wNAnCZRh+E2FOjplJSUpyR6NIAskDEQtori33i4EhkZuVBVVUVxzbM6jCnA8ESn02kEzDgMXhGwH0IjnqJmZWXZuVA8IIX7efQC6loJCQmbmtcfAZi5GpiqqjiOb2U+NiD3hrpCUEOBLBiC+MZwhksTUAQ/5heCI1TmB9NE27LN1TJlwlRy8Nx0fBgaYPKWJHM2NeeaBIrix1olUmLAMC2/Yrhpv9+Vy27Xc+59IB+d7crznXPvPf9z/h+//8d5UtYCLyspjtDQ0K5AnNVqdWtoaFCyrHw5bRC/Y8COK4fJDQKE8IfhGo3VHA6nzQMyorjT8ELbIex3YJ1vgoBfiUy4AJRHvo/sa7PZlIAcF4LvU2Nn7GctFvwSpmBePECn00TKlmOiPtBa0xloM1ClXAwrLuaMmJR6R41cBgUF1cIYn9KmOHtkd3pCAFbW7cyZMzM6s8c9blxxOEvhvLCzT2bPnl2CHWtxhTV7TAgJIA9De7138uTJ4N4Wcub2WQDFXVq6dKkDrHu/O/dbXB2IF9hg3TcynNmXKpe7VFhYmF5dXb2Q1YO9RggFEu5wHOsC+tOGsECCVY2MO7ui5oVaSxtGhTxksObAlZeDzy25ubmTYmJiwgFEn6vUaGpqugmH7QrA3gU4bS57pnPnzv3y8OHDzfwMt7r7Wgs6XRi00zfITHx0dHRUp7vaevz48R/x4rJTp07dhuA+hboebLfbbYAmozHu7ZqamhiVsPj4+KK6urp7Rs9njR9UbzmQRqPLwq6qQVZ9mBGBBy+BnQkBxL8J3PWJzA2Fym3Hdau0tPQW/ntW/b6qqioWz/i4E7dJ72cDsfNhhIth9VuFMsKJay9qJlypNHiytnz58lEEgPADhhPa+/j4fGE0CVkDCx7j/fv27asAkt5CNG00HnKarBpK/by7Kik1QYdgVq3IHgbeXhQWFhYKlshhfUhvCriaWjCLbhYVFe2An/PfHSF2Ui9aaiMiwP8bSARf1NtEqKkFyNUPZp7o5s2bk1Xcp14vEUexMRCckZGxQXYzPT0AueF9HQueOnWq88iRIw+M6qGY+mD9FGS4XXWwLDQ6hBwAeUPBe0K74nQ6p0PzvN5fAe05c+Z8d/ny5atGO8MaLQi+UnLPy0L0SQceHWky2wAM9G5/50eCg4OVQF9lZWWMbAzcBhvnryBo/gNv0F02GP3b9+zZUz4QoSAuXlxcXLSs3+FwpKquueIrHDp0aIlo4Nq1a9/o/FvT15MGwniLrHTjxo107fdgsSttbW2ZMvdAjaoo1Y0soxANBNxYOX/+/J39sfqARcm7d+8uHTVq1BgggzgNixXDYRsmu4/ZNmVHAM6EPqWfn5+SblAxTl+27OxsJWO2bt268/AEf8Lkx2r7iRxOnz6dILFrE5QCSnyIFA2Aq5ukLRTry5aZmXlBjX8FBAQELlq0qFiHAAqmTJkSaSDHbpbGxsZxos5xaDNnznSK+pi0MTqho29qeaTRcyjY+/fvd/KvPiMFOXlg9HwY6qHS8kmRQdLnBdmY99AfQugEiim+vr5KWBVO0gl9Sk1vI8zUO6B71ooVK/Lw/t/0fREREWeEhCQmJo6Adf3A7OGywkam5KANrWlpaduwynf19zGxw7JObREl2OMu0IU0hQG/PgUarWXWrFnH9X1jx45tEFpysNQYCFiTGcuIUmVkFRLRySp3RfeRCBbHavyZo+7u7kON3gV0fTMwMNBP1Nfa2jpUSAhYwtbc3NxmxvdMqelrWYHXVsLAXj1w4MB4pumYwRXdX15efl79fPDgwStmi4Zn3sUCeEoCF0OEhGCLrfDsOoxYirLClVTrZ3ULMT4kJGQMNN9ZZnBFmEkrV7Kd02mmx4BSr8hCukJXFwbyHuzIMCPooBL08OHDKD1vk21Y8szP0EDb9AqiJw3A1vpIUlIHH+aJRQLGWkaOHPma2cPJViLehk9xTb/aenWt/b8rqhxI1xsy+ackan9fSEhhYeEvzGeYPRyurnBMQkJClP47/Xlg7RjReEGU/o1Lly7dEPV5eXm1WCQaQuh/U3ApxOoqkv+pNrVj4GGWUUbUSgfRYVPaFXUMlQY/8zsjQnx8fEYChddLlFPjIDgl6Xfu3PEQCfSqVasc+fn5Dep39fX1s7Ayk7XqV5Tk1xbMyIputAbTrKBGZqA1KH3HoMjIyHBgqucwf15e3qTU1NRY8N8WtwFuO3fuDMOiJqrl2vq2evXqHRaAsVpRJ26sxo1Wt/9BAypesGzZsnxRH09DKOhXnx3VqdGrt2/f3jiQRMyYMUNxM+D83RL1T5s2rZJpCOVEF89Zyvxmm83mDVU8ZKAIqaqq2pieni495wtH7A8aRKWmMTQ09JxsINBtIeDBpwNBBE/VUM737t0rjPmy7ARK45k/wpAKw6Q8UyIaDChxjcl+XB/1JxGsbo2KirKD9T+UjVmzZk2lv78/jeWzHSFFEKavDeDBdhidV3m2uL8I8fT0fJnqX9bPuhmez+X8eXUdhYFNUI4MG+Er3PwmfOo0VycD4nucbC0oKPhda8P0LSkp6RijKF3HbRhlVK958+bVGWkxEkMXuL293VRmHA6HHez4OQzm4N7eLRb+MNmjnbtS96te1GC5ubk7zIJm169fb6Cl3bRpU4BsHDTNuYqKihMtLS2fsaa+t4jgSS1o0r+ZStDOvYu1eKnEsALH6GE8Ih8bG5udlZX1PglavHixjySGe6KkpORbHgwIDw/3elEiANc7UlJSjrK0Qzvv505yqVG7rVu3PuSRLxP9rhxNzsnJ+QqTzSBBdXV1SyBnNh0vf8/oSE1NzWZ9X3caqx9YsSQ75WOYDAUxvsBhC1x5EQyTtaysbPbEiRMnaEKaj6FRHnl4eHi5Gi0RNYDOpx0dHdmd5qD7yVDWR61fv37vrl27Vpq9rLGx8Z+IiAjuorKT0O/ugA8jgHA9ANFbnU5nS092gmf9mpubi00D3mZFNfC96YG5wbpuAG9a3PqxAdCeADy6SBkwK6qxuMKbVADJyck5/IGH/iAA9qeD0BzI9qJRUtZl1tLHV/38/C7ALeUvVcQDGQf0NgFctIULFxZDJlp54FJ7bKrXCFE1Gn9CCKj4GygC5tnt0EaTX7REydvbu81utzvBNn/xJ0HUeq3utB5BCL6EKwaLeg4reI5Vb7W1teGAORPAhqb2gjkZsM3PQUFB1Sxr4tlkPrM7Byj17V8B2rsSoKquMyxKghStUDFBhVRBFAwaGonUIBEa0EoMLkQqJi5kLFHBNTbaurQ6MujEZQZlcSPCGIexUVRQcVDQBI0lkjDEoICiyAugoMYkKNio/b7be5jn4y33PhYV88+84b3Hu+ee+//n/Ms55/9+vZPdkNjlFT8esukg9h779u0rec88ysfdLyoIPhgnJHeK2Un6cQQPE//jtXT0yHl+5pljSpXtwRNwgDPoCMn3xm9exN9u5pzfMsRA3Ou2tbX1Nfz93tHRUQOtWC1hR8ijjXOSv+PJQOaeSYt/eC6e9gbzpUNGHDXkh/gfn4sbskwpvHz5srRdzmsRZkjKSV6Eb72RZS6R6ewoHxhCscXodMMDuGE09mjuNFNCFCxeHPl89S8qKnpkttjb29dggF2An3sBs+YHnoHTzdtsbbJsbQFw1HMGEBwPCtsbodmA1jgt3BJ9JY6gjCXoK7QC3ONi+Nv/wTNc47O09sBpcYGQ2ZwFVEUlJSWv5uXl+arFh3pSiM9Cqy8sP90N4u0huPqa6kqg/z1xAhFp4zxFXVBQ4Jmenv5mWzuXbUEcWFlZWW/yxeQDb2/v456engXiWH2bC0SAwuoSwpXfHjhwYBwM8outzRTGbgxzevfubQN10p3ZS9yRg6H9BQxrgANxF6FLPRyPn8Go/7ZWPzjgmIHCF8MleGn7ExMTfzSwLNg2M4RBMPzeUEO5PuYQV5jnzJnj5u/v7+bq6toXasLOgM5/wDwheDj3YZAtIJhORJBg7rURO/GwvLz8Sn5+fsm+ffuKd+/erWmJPnMgMn6Oi4t7iCB/j8g5ajOVNXz4cKcvv/xyUktMU4JUIQwcAcPZmD5HKAEY//PJyclZR44cKc/MzKxp7n14zCk4OLj3yJEj+w0bNswjJCRk1Kef/j+BFAPqXm5u7ldr1qw5Tdgic+/BgclVGnpnuEeqLiBQi8Uh9CzoKSHWsImNjZ1hKp3PRDxjAfU2asyYMX8S3yFkvrhjx44vYmJizre1XUBU+tzq1auHjB8/3oenZ/kdl65SUlIyuUra3IXEuXPnbkeMUscYR0m0a2FMvwm3lQHe1q1b34a34WZu56AeRoSFhb0l1E1qauqRyZMnn3zSDDdnEmbmn8X5NsQt9Zg5ezBwz5nbJpepIyIi0hlQiiDUoECio6MNCoPRJwK3buvWrYswx/9mkgWm8AxCRvBzTk4Oj9YcfFq8KjoPGRkZYQOYS9rM/lMIixYt2orA8zZXNQwJpREpV5cojGPHjv0hOzs7QO3N4QFZwf2di8hX2k/+6KOPtjPl+ml2eeEEBEKtSXm9sA1ntOEI1RC3AgMCAr6hUPQKZPHixU0kSWHs3LkzqKio6GW1Nzx37tx0uKMD+X7evHlbYXMutqdYBEZ/TGBgoASCs3bt2t1LliwpUNsGN2+nT59+mELR1TyPGHUKg8FdfHx8CIThrOYmLPKQkJAwi+8PHTqUA6N9pEM7JkTpS3iMrba2tgbOwMdmCKVs9uzZexlUagvFYsqUKY02g8nWcDPHIKhyV9O4gGYm9u0rr7wSLZB92jvt2rVrxLvvvis5KuZkmfHQyejRozNqamoabUon+MvSEjIxOPLy8v549uxZVYAnxKsaPHiwR2Vl5fcYMdFo/F57YDb3z8PDw52trKwelpWV3TVgV8pLS0vPI6bxhgf5OqL3CgSFtUrvwVVuLsHAC9PQ+6JHa8k1KKbpgbG9Tpw44aum0xqNZg5zcItBkPaO9iAI1kdZtmxZk/obiE3qMHg36ILLMNpH9B8DQ/93uMfvQ4DJq1atUgzvSJ6Dh1fhblcy41DKRKK6ysrKGqOm40wIpTCuXr1a3l6EsWDBAlchjKSkpP0CNoyBq7W1tc3hw4fD9Z1Oway4JTK2Vq5cOY2g0GruS94LbNuOPI5y8uRJL4FSrYQ2bdr0GhNbGTTBOCW2F5sAA1sv3uP5XGAPux44cGCki4uLhD0I9VSRlpZWqe9aZp4heJZc4U8++WQG1I/i1W7ynjKgLDpyEwZG3EtNsBQZGSlVXlm+fPkuRJ/324tAUlJSKhwdHZdDfV+BMAYhlloOYx3AA5ww3rF+fn5pUF0PjKzLnUEgXcbZBEGOVnNvyoCysETc4KrvHLwhSkxMZI5uR7jFRUqCPR78hycxBBHqy0xP0hkZlzZv3pyuL7HMFDEZAGpiCEavh0jz0JeApo+YlDBhwoRg7fQQntfPz8/P5fVqawfpaI/jGzZscEasMrxPnz7ZPCGl5DrKgLKwwAMFQkd6Kl2IgyFfwWwg4tgZgoDT8dfn4/fWZ86cycUNJcajo3ZBQUFvCwEZSnDQJ4QVK1Z8oC1Ypm5dvHixjG0XFhbeNJbRxMHBdC/xmQLEq0y3P8wSGTt27FlzhcI0YmbgxsXFfRYVFaU4/xSyKLC8ffu2g4rgz5XCuHPnTh0eTtFSiHZFCl2/QGQeMk+OzDJW74+5cvydrMtNZpboE6YQhoHsxsb+QE2Foj+3TNUfNETffvttib+//wtDhw517tmzZ0FVVZWiUICyoFFXrK6gV3vJo7LCmC5VQsQLFdU9yCClwmBaqVphyNcFasUPBw3YkHTxftKkSQHmPhsGzHX+RWzXw8fHR/ERWsrCkshjSi/ADexkffej2k4KmFyizIocKuptuJLpxtQD9b0QBvMY161bN2379u1NUghNtSXuSdKX7CmvvV3CLJLei3uaQ1DBUlJdly5dujo7OzNrVVHuP2XRpJyJMUI0KWEpdOKWmJkEV/kumcf31NkBAQGB2tjFuvTGG280eoDu7u5eMJh7RHwgXrQjbIuqxlBJnLYk9EWUyLwPnin2QimLjnDR6lVE5tKaMQzw79R2kt4LX1Q3zD4UjKSnQwxmuIl6Xe/OPCMtU3x8fIo+j4yQyHBNK8VM0JcYq53eqa++lO73uumgasjJyambbBN+Ki4uVqxNKIuOYK7iG2dnZ1+RGdBn0KBBXZo7kvbv35+rJTC9a2j068V7Dw+PXkZm712tNaImriY8ycYdP3hqeoWv/T3Uo9lelpubW2+575qjR48q3qOnLJh+pPjkRVJSUjkMbDVPecyfP79ZCIAcjTC0oVo2Jt/QzBKjlTm++tQbZ5e2B6ZvFjGHXqhKfe3ws3YOsZJ4xgBTn+diK99nZmYWQ20p3mqlLCzGjRtnl5GRMUMJLh6J8Ncwfn+h68sChcZuKNxIY+3x4aGytpgKDktKSkJdXV0bR7BQUdrtK4kfTPWJ7Rpx1ZUMWp/w8PCxiEWusx6WCrtDXJDtFhEREVRFYxFc9Vd6MabiLARTfT///PMzGOkmtzKp06lu4Pt3lt3YW2DeJSWwFIba8/b2dq6rq6tnQGhOvMAZ4efn58I+sR1ifZjbH0E8Q1BRUfEv+DyWy5Yt2xkdHV2kYkmqhJVsqXp40KtHamrqdKUXc88c3sw/eeONGzemLly48OsOvxJTFqIcHR1fMlRAyBix0qWDg0NNJ09PTwI/EFLEurKysqeSi1lLATq/EP68Dw+dwZWtyM3NrX2WhVFYWDgNKtWVUES66OymyMvL62tE9eek/RCeVGfexKhRo453795dcTIET/j5+/tLePUxMTHvJyQkeD+rwoC6/4AnL6FpqjC4Y9VcS56T95QBZSFBrgqDHhYW9imNi1Ii7hgrfnBfZObMmSEYJVOfNWEQXdUFdB4EG6IKVpC8Js9l50baKJRmCF9yUHUHjE1S0ygrlyB2W5GXl5ePUSIBKQp8j/ZMLOXBZyXULQvbDRw4UHWJZvKaPOd7IYdHTi4KvHcYbDtDuKXGiMXjoMr+xv0StFEOTyyuvQmCxWvLysoW8hAgi587OzvHwMVVnfbAw4MIsG8x6Uf7FKPFhx8+it5LoTCxsb6+vvP69esjDaHiGiNu8UZFRU2UI97vBAjsryStAz4Az+OgVepF1q42NVbfES9WBObaIWZKfWxs7HoYKdVg0MSZ5VrVtm3b0mjsOLWrqqrm+/r62rXEQy1dutQdba7VaDRzza3r/DiIvCRPyVvymLzW5X8T+HFd4nmtvXv3GoUkN0XTpk17afPmzVOpb/n52LFjX/CAGEseNWMdbCQhn+VAsxqBYjyB559UYQQHBx8NCQkp1IVN16UmZWZ1iUk5POvL/AaosPdZHbU5HUtJSfF977333qKd4ef8/PxvVq9enWMu+saePXv8J06cKB0ouHnzZi2i73hTKLNtSSyLCxWVJOfXmIR1kBDZjL1ErjZtC/4mTZ06NUXNHoou4fov0Kklcp3HFLiKL6SlpS0UNSBLS0v/imntBa/FRkl7oaGhOWwrOTn5IAaOPVzvFRg0/0CkbPs4BUEekVfkmcw7iZem+K0KyUE76ZPVpjESJypdlFRCs2bNcsbsQdOvesDoPYLrxKOqCMAqSkpKqsD06xcuXLh96dKlOiZ2coHT1tb2OTc3ty6LFy8exvquvAYOyS9btmxJi4yM/KqtBMHYAnbzkcIhhsB/9F5v7o3lG378zjvv9Dx+/PhEpaVgjBFhy2Toss+03UyoJEeoot+7u7v3CgoKeg026QWMQL1pdffu3WuA8DTW1ta/gSNxLScnR9MWgsCAaMBA+HdzodqbjXUCX1rC86iurmalsCDWR3+W3FgWt4d6Pezg4PCQvCGE4mPFOqGg6E+jEw/RgUNDhw49VFdX1/306dOBrMrUHoXQr1+/CtioLBsbmxtcEKQAyAM1OEytJhBdklGBbsANTR0/fjwPjXU9derU64huB4v6eE9hMNcBEXmhj4/P6R49evxE15XPIhCQWtQGtcYD0FvgFKVn0dDQ8JOTk9PRwMDAo3wwCIgVHT1hnF9m5bknUQAs7de/f//vYLMKIIBqMp9qmiuywuNsidnQZgLRJyDaHHpkeNjqAQMGZGLaZ1JAFBz+5wj96wph9a2tre3eVjOJ97e3t78Bpl+Gri+F3teQ0bw//0fMLK41cRaoRVR7ogWiT0BE02HeNh/cyspKg1mk8fDwyBGlReXlGwswxBbekj0+20JYdmBYFwjQBqPVCsJ8npgjwvUm45iRhN/cQ5sNYHAdfvMzmH4LTP4BMU8tcbDQ5kMynUsXjBd4P+ZmEFSN30uZTJaPZ0Xmf+6jNDGM/WslAAAAAElFTkSuQmCC);             background-size: contain; }           .gallery_popup .content .body .slick-container-area .slick-container-item .slide-item {             width: calc((80vw - 100px + 1rem)/7);             height: 8vw;             display: inline-block;             position: relative;             cursor: pointer;             padding-left: 1rem;             box-sizing: border-box; }             .gallery_popup .content .body .slick-container-area .slick-container-item .slide-item .slide-img {               background-size: cover;               background-repeat: no-repeat;               background-position: center center;               position: relative;               z-index: 1;               width: 100%;               height: 100%;               background-color: #000000; }             .gallery_popup .content .body .slick-container-area .slick-container-item .slide-item .slide-placeholder {               width: calc(100% - 1rem);               height: 100%;               background-color: rgba(0, 0, 0, 0.6);               position: absolute;               top: 0;               left: 1rem;               z-index: 1; }             .gallery_popup .content .body .slick-container-area .slick-container-item .slide-item:hover .slide-placeholder, .gallery_popup .content .body .slick-container-area .slick-container-item .slide-item.checked .slide-placeholder {               display: none; }         .gallery_popup .content .body .slick-container-area .gallery-control {           color: #000000;           width: 100%;           height: auto;           position: absolute;           top: 0;           left: 0;           font-size: 30px;           z-index: 1;           transform: translate(0, 0);           -webkit-transform: translate(0, 0);           -moz-transform: translate(0, 0);           -ms-transform: translate(0, 0);           -moz-transform: translate(0, 0); }           .gallery_popup .content .body .slick-container-area .gallery-control .btn-area-left, .gallery_popup .content .body .slick-container-area .gallery-control .btn-area-right {             background-color: rgba(0, 0, 0, 0.6);             height: 8vw;             line-height: 8vw;             position: absolute;             cursor: pointer;             color: #ffffff;             width: 4rem;             text-align: center; }           .gallery_popup .content .body .slick-container-area .gallery-control .btn-area-left {             left: 0; }           .gallery_popup .content .body .slick-container-area .gallery-control .btn-area-right {             position: absolute;             right: 0; }  html[dir=rtl] .gallery_popup .content .header {   overflow: hidden;   box-sizing: border-box;   position: relative;   background-color: transparent;   color: white;   float: inherit !important; }   html[dir=rtl] .gallery_popup .content .header .gallery-nav ul li {     margin-left: inherit;     margin-right: 20px; }     html[dir=rtl] .gallery_popup .content .header .gallery-nav ul li a span {       float: left;       margin-right: 4px;       margin-left: inherit; }   html[dir=rtl] .gallery_popup .content .header .close {     right: inherit;     left: -5px; }  html[dir=rtl] .gallery_popup .content .body .gallery-wrapper {   left: inherit;   right: 0; }  html[dir=rtl] .gallery_popup .content .body .slick-container-area .gallery-control {   left: inherit;   right: 0; }  ");
},{sassify:36}],1473:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=(e("../../popup/model/model"),e("../../../ui/util"),e("../assets/template.hbs")),l=(e("../../../ui/slick/slick"),e("../view/view-text")),a=e("object-fit-images");t.exports=GalleryView=n.ItemView.extend({template:Handlebars.compile(c),ui:{slick:".slick-container-wrapper",slickItem:".slick-container-wrapper .swiper-slide",slickArea:".slick-container-item",slickAreaItem:".slick-container-item .slide-item",galleryText:".slick-container .tpl-gallery-controller",gallerycontrol:".slick-container-area .gallery-control"},events:{"click .gallery-control .btn-area-left":"doPrev","click .gallery-control .btn-area-right":"doNext","click .slick-container-item .slide-item":"doParentGo","click video":"playVideo"},onRender:function(){var e=this;this.$(".dragItem").length&&this.$(".dragItem").drag(),setTimeout(jQuery.proxy(this.waitForLoad,this),80),this.doShowControl();var t=this.model.toJSON(),i=t.currentCategory;e.centerMode=!0,i.count<=4&&this.doHideControl(),i.count<=5&&(e.centerMode=!1),this.currentSlide=null,this.currentSlide=e.ui.slick.slick({speed:800,infinite:!0,draggable:!1,arrows:!1,swipe:!0,cssEase:"cubic-bezier(0,.96,.54,1.01)",rtl:"rtl"==jQuery("html").attr("dir"),slidesToShow:1,slidesToScroll:1}),this.currentSlide.slick("slickGoTo",1,!0),this.currentSlide.on("afterChange",function(t,i,n,c){var l=e.currentSlide.find(".slick-current").data("index");e.setSubText(l)}),this.currentAreaSlide=null,this.currentAreaSlide=e.ui.slickArea.slick({speed:800,infinite:!0,variableWidth:!0,draggable:!1,arrows:!1,swipe:!0,slidesToShow:i.count>7?7:i.count,slidesToScroll:1,lazyLoad:"ondemand",cssEase:"cubic-bezier(0,.96,.54,1.01)",rtl:"rtl"==jQuery("html").attr("dir")&&i.count>7}),this.currentSlide.on("beforeChange",function(t,i,n,c){var l=e.ui.slickItem.eq(c),a=l.data("index"),o=e.ui.slickArea.find("*[data-index="+a+"]").not(".slick-cloned");parseInt(o.attr("data-slick-index"));o.addClass("checked"),e.$(".slick-container-item .slide-item").not(o).removeClass("checked")});var n=(e.currentSlide.find(".slick-current").data("index"),e.ui.slickArea.find("*[data-slick-index="+t.showIndex+"]").not(".slick-cloned")),c=parseInt(n.attr("data-slick-index"));n.addClass("checked"),e.currentAreaSlide.slick("slickGoTo",c),n.click(),e.textView=new l({el:e.ui.galleryText,model:e.model}),a("img.compatibility-img")},doHideControl:function(){this.ui.gallerycontrol.hide()},doShowControl:function(){this.ui.gallerycontrol.show()},playVideo:function(e){this.$(e.target).removeClass("opacity-zero"),this.$(e.target).parent().find(".play").hide(),this.ui.galleryText.hide();var t=this.$(e.target)[0];t.play(),this.monitorPlayEnd(t)},monitorPlayEnd:function(e){var t=this,i=jQuery(e);i.on("ended",function(){i.addClass("opacity-zero"),i.parent().find(".play").show(),t.ui.galleryText.show()})},doPrev:function(){this.currentSlide.slick("slickPrev"),this.currentAreaSlide.slick("slickPrev")},doNext:function(){this.currentSlide.slick("slickNext"),this.currentAreaSlide.slick("slickNext")},setSubText:function(e){var t=this.model.toJSON().currentAllMedia,i=t.length;this.model.set({switchInfo:{title:t[e-1].title,totalLength:i,currentIndex:t[e-1].index}})},doAreaPrev:function(){},doAreaNext:function(){},doParentGo:function(e){var t,i=this,n=jQuery(e.currentTarget);if(t=n.data("index")){var c=parseInt(i.ui.slick.find("*[data-index="+t+"]").not(".slick-cloned").attr("data-slick-index"));i.$(".slick-container-item .slide-item").not(n).removeClass("checked"),n.addClass("checked"),i.currentSlide.slick("slickGoTo",c),i.currentAreaSlide.slick("slickGoTo",c,!0)}},waitForLoad:function(){var e=this;e.trigger("first-image-load-success")},serializeData:function(){var e=this.model.toJSON(),t=e.currentCategory;if(t){var i=e.allResource=(t.video?t.video:[]).concat(t.image360?t.image360:[]).concat(t.images?t.images:[]);this.model.set({currentAllMedia:i},{silent:!0});var n={title:i[0].title,totalLength:i.length,currentIndex:1};this.model.set("switchInfo",n),e.currentAllMedia=i}return e=this.model.toJSON()}})},{"../../../ui/slick/slick":2118,"../../../ui/util":2122,"../../popup/model/model":1476,"../assets/template.hbs":1471,"../view/view-text":1472,"backbone.marionette":6,"object-fit-images":18,underscore:42}],1472:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=(e("../../popup/model/model"),e("../assets/template-text.hbs"));e("../../../ui/slick/slick");t.exports=GalleryView=n.ItemView.extend({template:Handlebars.compile(c),onRender:function(){},initialize:function(){this.render(),this.listenTo(this.model,"change:switchInfo",this.render)}})},{"../../../ui/slick/slick":2118,"../../popup/model/model":1476,"../assets/template-text.hbs":1470,"backbone.marionette":6,underscore:42}],1476:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../../../config/host.js");GalleryModel=t.exports=c.Model.extend({initialize:function(e){this.url=l.getURL("api","data/vscapeimage?propertyid="+e.hotelcode)},parse:function(e){var t={};if(t.categories=e?e.arc:[],e&&e.arc){var i=-1;n.each(e.arc,function(e){e.index=++i;var t=0;e.categoryUpper=i18n.t(e.categoryKey).toUpperCase(),n.each(e.video,function(e,i){e.index=++t,e.type="video"}),n.each(e.image360,function(e,i){e.index=++t,e.type="image360"}),n.each(e.images,function(e,i){e.index=++t,e.type="image"})})}return t},testIE9:function(){var e=jQuery.Deferred(),t={disableVscape:!1,arc:[{categoryName:"HOTEL",categoryKey:"Property.Hotel",count:5,images:[{title:"Lobby",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/977/__1_S.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/977/__1_S.jpg"},{title:"Lobby",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/985/__2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/985/__2_S.jpg"},{title:"Exterior",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/209/_________P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/209/_________S.jpg"},{title:"Exterior",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/441/____________P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/441/____________S.jpg"},{title:"Exterior",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/449/______1_S.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/449/______1_S.jpg"}]},{categoryName:"GUEST ROOMS",categoryKey:"Property.Guest_Rooms",video:[{title:"Gallery Video 2",url:"http://www.mullenloweprofero.com/media/428352/video .mp4",placeholder:"http://10.148.60.55/mhb-media/images/13596 millennium hotel chengdu/hero/chengdu-millennium-hero.jpg"}],image360:[],images:[{title:"Millennium Knightsbridge Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/9/____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/9/____S.jpg"},{title:"Millennium Knightsbridge Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/17/______P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/17/______S.jpg"},{title:"Millennium Knightsbridge Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/25/______P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/25/______S.jpg"},{title:"Superior King",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/33/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/33/_____S.jpg"},{title:"Superior Twin",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/41/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/41/_____S.jpg"},{title:"Gloucester King",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/49/________P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/49/________S.jpg"},{title:"Gloucester Twin",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/57/_________P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/57/_________S.jpg"},{title:"Club Deluxe King",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/65/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/65/_____S.jpg"},{title:"Club Deluxe Twin",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/121/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/121/_____S.jpg"},{title:"Executive Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/129/_______P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/129/_______S.jpg"},{title:"Executive Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/137/_______P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/137/_______S.jpg"},{title:"Standard King",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/145/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/145/_____S.jpg"},{title:"Standard Twin",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/153/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/153/_____S.jpg"},{title:"M-Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/193/____1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/193/____1_S.jpg"},{title:"M-Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/201/____2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/201/____2_S.jpg"},{title:"Millennium Kinghtsbridge Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/481/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/481/_____S.jpg"},{title:"Millennium Kinghtsbridge Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/489/_______P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/489/_______S.jpg"}]},{categoryName:"DINING",categoryKey:"Property.Dining",video:[],image360:[],images:[{title:"YiPin Chinese Restaurant",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/933/__1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/933/__1_S.jpg"},{title:"YiPin Chinese Restaurant",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/949/__2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/949/__2_S.jpg"},{title:"YiPin Chinese Restaurant",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/969/__3_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/969/__3_S.jpg"},{title:"SH1930 Bar",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/993/___1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/993/___1_S.jpg"},{title:"SH1930 Bar",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/1/___2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/1/___2_S.jpg"},{title:"Executive Lounge",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/73/____1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/73/____1_S.jpg"},{title:"Executive Lounge",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/81/_________P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/81/_________S.jpg"},{title:"Executive Lounge",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/113/____2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/113/____2_S.jpg"},{title:"Amber Cafe",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/177/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/177/_____S.jpg"},{title:"Amber Cafe",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/585/____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/585/____S.jpg"},{title:"YiPin Chinese Restaurant",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/693/___1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/693/___1_S.jpg"},{title:"YiPin Chinese Restaurant",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/701/___2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/701/___2_S.jpg"}]},{categoryName:"EVENTS",categoryKey:"Property.Events",video:[],image360:[{title:"Gallery Panorama Image 2",url:"http://10.148.60.55/mhb-media/images/module/360 image/demo_photo4.jpg",placeholder:"http://10.148.60.55/mhb-media/images/module/360 image/demo_photo4.jpg"}],images:[{title:"Meeting Room",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/925/1_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/925/1_____S.jpg"},{title:"Ballroom",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/941/9_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/941/9_____S.jpg"},{title:"Meeting",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/161/____1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/161/____1_S.jpg"},{title:"Meeting",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/169/____2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/169/____2_S.jpg"},{title:"Banquet Room",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/605/____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/605/____S.jpg"}]},{categoryName:"LEISURE",categoryKey:"Property.Leisure",video:[],image360:[],images:[{title:"Oxygen Club",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/185/____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/185/____S.jpg"},{title:"Swimming Pool",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/625/__1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/625/__1_S.jpg"},{title:"Swimming Pool",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/667/__2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/667/__2_S.jpg"},{title:"Swimming Pool",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/685/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/685/_____S.jpg"}]}]},i=this.parse(t);return this.set(i),setTimeout(e.resolve,100),e.promise()}})},{"../../../../../config/host.js":45,backbone:8,underscore:42}],1471:[function(e,t,i){t.exports='<div class="slick-container">\r\n    <div class="slick-container-wrapper">\r\n    {{#each currentAllMedia}}\r\n        <div class="swiper-slide {{#equal ../currentCategory.count \'1\'}}minWidth{{/equal}}" data-index="{{index}}">\r\n            {{#equal type "video"}}\r\n                <div class="videoSlide slide-item">\r\n                    <div class="play"></div>\r\n                    <video src="{{encode url}}" class="opacity-zero" controls="controls"\r\n                           width="100%" height="100%">\r\n                    </video>\r\n                    <div class="video-placeholder" style="background-image: url(\'{{encode placeholder}}\')"></div>\r\n                </div>\r\n            {{/equal}}\r\n            {{#equal type "image360"}}\r\n                <div class="panoimage slide-item">\r\n                    {{#if resourseurl}}\r\n                        <iframe src="{{encode resourseurl}}" scrolling="auto" style=" width: 100%;height: 100%;"></iframe>\r\n                    {{else}}\r\n                        <div class="dragItem" style="background-image: url(\'{{encode url}}\')">\r\n                        </div>\r\n                    {{/if}}\r\n                    <span class="panoimageICON icon"></span>\r\n                </div>\r\n            {{/equal}}\r\n            {{#equal type "image"}}\r\n                <div class="imageItem slide-item">\r\n                    <img  data-width={{width}} data-height={{height}}\r\n                          src=\'{{#if ../../mobile}}{{encode mobileUrl}}{{else}}{{encode desktopUrl}}{{/if}}\'\r\n                          class="compatibility-img"\r\n                          alt="">\r\n                </div>\r\n            {{/equal}}\r\n            <div class="dim-block-inner"></div>\r\n        </div>\r\n    {{/each}}\r\n    </div>\r\n    <div class="tpl-gallery-controller">\r\n    </div>\r\n</div>\r\n<div class="slick-container-area">\r\n    <div class="slick-container-item">\r\n    {{#each currentAllMedia}}\r\n        {{#equal type "video"}}\r\n            <div class="videoSlide slide-item" data-index="{{index}}" >\r\n                <div class="slide-img" style="background-image: url(\'{{encode placeholder}}\')"></div>\r\n                <div class="slide-placeholder"></div>\r\n            </div>\r\n        {{/equal}}\r\n        {{#equal type "image360"}}\r\n            <div class="panoimage slide-item" data-index="{{index}}" >\r\n                <div class="slide-img" style="background-image: url(\'{{encode thumbnail}}\')">\r\n                    <span class="icon"></span>\r\n                </div>\r\n                <div class="slide-placeholder"></div>\r\n            </div>\r\n        {{/equal}}\r\n        {{#equal type "image"}}\r\n            <div class="imageItem slide-item" data-index="{{index}}" >\r\n                <div class="slide-img" style="background-image: url(\'{{encode desktopUrl}}\')">\r\n                </div>\r\n                <div class="slide-placeholder"></div>\r\n            </div>\r\n        {{/equal}}\r\n    {{/each}}\r\n    </div>\r\n    <div class="gallery-control">\r\n        <div class="btn-area-left">\r\n            <i class="icon-icon_chervonLeft"></i>\r\n        </div>\r\n        <div class="btn-area-right">\r\n            <i class="icon-icon_chervonRight"></i>\r\n        </div>\r\n    </div>\r\n</div>'},{}],1470:[function(e,t,i){t.exports='\r\n<div class="text-intro">\r\n    {{#with switchInfo}}\r\n        <span>{{currentIndex}}/{{totalLength}}</span>\r\n        <span>\r\n            {{#if title}}\r\n                -  {{title}}\r\n            {{/if}}\r\n           </span>\r\n    {{/with}}\r\n</div>\r\n\r\n'},{}],1511:[function(e,t,i){var n=e("backbone"),c=e("backbone.marionette"),l=e("./01-drop-down-menu/view"),a=e("./02-drop-down-type/view"),o=e("./03-menu-screening/view"),s=e("../../ui/util"),r=jQuery("[data-component='navbar']").find(".tpl-static-banner").addClass("active-venus");t.exports=c.LayoutView.extend({template:!1,ui:{full:".offers2-full",menu:".offers2-menu",type:".offers2-type",exit:".offers2__toolbar-exit",wipe:".offers2__toolbar-wipe",list:".offers2-destinations",menuTip:".offers2-menu .offers2__toolbar-drop .offers2__toolbar-text",typeTip:".offers2-type .offers2__toolbar-drop .offers2__toolbar-text"},regions:{destinations:".offers2-destinations",menuDropDown:".offers2-menu .offers2__toolbar-list",typeDropDown:".offers2-type .offers2__toolbar-list"},events:{"click @ui.menu .offers2__toolbar-drop":function(e){e.stopPropagation(),this.ui.menu.hasClass("drop-down")?this.options.rootState.trigger("hideToolbarMenu"):(this.options.rootState.trigger("hideToolbarType"),this.options.rootState.trigger("showToolbarMenu"))},"click @ui.type .offers2__toolbar-drop":function(e){e.stopPropagation(),this.ui.type.hasClass("drop-down")?this.options.rootState.trigger("hideToolbarType"):(this.options.rootState.trigger("hideToolbarMenu"),this.options.rootState.trigger("showToolbarType"))},"click @ui.full":function(e){e.stopPropagation(),this.$el.addClass("offers2-filter-full-screen"),this.scrollTop=s.tracker.get("scrolltop"),jQuery("html,body").css({"overflow-y":"hidden",height:"100vh",position:"relative"}),this.__fixedListHeight()},"click @ui.exit":function(e){e.stopPropagation(),this.$el.removeClass("offers2-filter-full-screen"),this.options.rootState.trigger("hideToolbarMenu"),this.options.rootState.trigger("hideToolbarType"),this.options.rootState.trigger("hideToolbarAttendees"),jQuery("html,body").css({"overflow-y":"auto",height:"auto",position:"initial"}),jQuery("html, body").animate({scrollTop:this.scrollTop},0),this.getRegion("destinations").empty()},"click @ui.wipe":function(e){e.stopPropagation(),this.options.rootState.trigger("clearConditions")}},initialize:function(){this._resizeHandler=jQuery.proxy(this.__resizeEventHandler,this),this._scrollHandler=jQuery.proxy(this.__scrollEventHandler,this)},onRender:function(){this._viewRendered=!0,this.__initialEventHwd(),this.__delGlobalListener(),this.__addGlobalListener(),this.__scrollEventHandler();var e=this.ui.menu,t=this.ui.list;e.append(t)},onDestroy:function(){this.__delGlobalListener()},__resizeEventHandler:function(){this._viewRendered&&this.__fixedListHeight()},__scrollTopReset:function(){jQuery("body").attr("data-scrolltop")},__scrollEventHandler:function(){if(this._viewRendered){var e=this.$el.prev();e.length||(e=this.$el.parent());var t=e.offset(),i=(t&&t.top)+e.height()||0,n=jQuery("[data-component='navbar']").height()||0,c=jQuery(window).scrollTop();i-n>c?this.$el.removeClass("offers2-fixed"):this.$el.addClass("offers2-fixed")}},__delGlobalListener:function(){jQuery(window).off("resize",this._resizeHandler),jQuery(window).off("scroll",this._scrollHandler)},__addGlobalListener:function(){jQuery(window).on("resize",this._resizeHandler),jQuery(window).on("scroll",this._scrollHandler)},__initialEventHwd:function(){var e=this,t=e.options.rootState;e.stopListening(t),e.listenTo(t,"closeFullScreen",e.__closeFullScreen),e.listenTo(t,"sliceOffersMenu",e.__sliceOffersMenu),e.listenTo(t,"sliceOffersName",e.__sliceOffersName),e.listenTo(t,"sliceOffersList",e.__sliceOffersList),e.listenTo(t,"wholeOffersList",e.__wholeOffersList),e.listenTo(t,"showToolbarMenu",e.__showToolbarMenu),e.listenTo(t,"showToolbarType",e.__showToolbarType),e.listenTo(t,"hideToolbarMenu",e.__hideToolbarMenu),e.listenTo(t,"hideToolbarType",e.__hideToolbarType),e.listenTo(t,"fixedListHeight",e.__fixedListHeight)},__closeFullScreen:function(){this.ui.exit.trigger("click")},__sliceOffersMenu:function(e){this.options.rootState.trigger("hideToolbarMenu"),this.options.rootState.trigger("hideToolbarType"),this.getRegion("destinations").show(new o({collection:new n.Collection(e),rootState:this.options.rootState}))},__sliceOffersList:function(e){this.ui.typeTip.html(e.displayname)},__wholeOffersList:function(){this.ui.typeTip.html(i18n.t("offers.offer_type"))},__sliceOffersName:function(e){this.ui.menuTip.html(e.name)},__showToolbarMenu:function(){this.getRegion("menuDropDown").hasView()===!1&&(this.getRegion("menuDropDown").show(new l({rootState:this.options.rootState})),this.ui.menu.addClass("drop-down"),this.__fixedListHeight(),this.$el.hasClass("offers2-fixed")&&!r.hasClass("active-venus")&&r.addClass("active-venus"))},__showToolbarType:function(){this.getRegion("typeDropDown").hasView()===!1&&(this.getRegion("typeDropDown").show(new a({rootState:this.options.rootState})),this.ui.type.addClass("drop-down"),this.__fixedListHeight())},__hideToolbarMenu:function(e){e&&(this.ui.menu.is(e)||this.ui.menu.has(e).length)||(this.getRegion("menuDropDown").empty(),this.ui.menu.removeClass("drop-down"),this.__fixedListHeight(),r.hasClass("active-venus")&&r.removeClass("active-venus"))},__hideToolbarType:function(e){e&&(this.ui.type.is(e)||this.ui.type.has(e).length)||(this.getRegion("typeDropDown").empty(),this.ui.type.removeClass("drop-down"),this.__fixedListHeight())},__fixedListHeight:function(){var e=this,t=this.ui.list,i=this.ui.list.html();t.empty(),""==i?setTimeout(function(){var t=jQuery(".offers2-destinations-inner").length>0||jQuery(".offers2-destinations-leafs").length>0;t&&e.__eachListHeight()},0):e.__eachListHeight()},__eachListHeight:function(){if(this.ui.list.is(":visible")){var e=this.ui.list.parent(),t=e.height();e.children().not(this.ui.list).has(":visible").each(function(){t-=jQuery(this).height()}),this.ui.list.css({height:"auto","min-height":0,"max-height":"55vh"})}}})},{"../../ui/util":2122,"./01-drop-down-menu/view":1504,"./02-drop-down-type/view":1509,"./03-menu-screening/view":1510,backbone:8,"backbone.marionette":6}],1510:[function(e,t,i){var n=e("backbone.marionette"),c=e("../01-drop-down-menu/02-nation/children/view");t.exports=n.CollectionView.extend({childView:c.extend({className:function(){return"country"===this.model.get("level")?"offers2-destinations-inner":"city"===this.model.get("level")?"offers2-destinations-leafs":void 0}})})},{"../01-drop-down-menu/02-nation/children/view":1499,"backbone.marionette":6}],1522:[function(e,t,i){function n(e){for(var t,i,n,c,l,o,s,r=[],g=e.length,d=0;g>d;)t=a.indexOf(e.charAt(d++)),i=a.indexOf(e.charAt(d++)),n=a.indexOf(e.charAt(d++)),c=a.indexOf(e.charAt(d++)),l=t<<2|i>>4,o=(15&i)<<4|n>>2,s=(3&n)<<6|c,r.push(l),64!==n&&r.push(o),64!==c&&r.push(s);return r}function c(e){for(var t,i,n,c,l,o,s,r="",g=e.length,d=0;g>d;)l=e[d++],o=e[d++],s=e[d++],t=l>>2,i=(3&l)<<4|o>>4,n=(15&o)<<2|s>>6,c=63&s,isNaN(o)&&(n=64),isNaN(s)&&(c=64),r+=a.charAt(t)+a.charAt(i)+a.charAt(n)+a.charAt(c);return r}var l=e("pako"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.exports={inflateRaw:function(e){return JSON.parse(l.inflateRaw(n(e),{to:"string"}))},deflateRaw:function(e){return c(l.deflateRaw(JSON.stringify(e)))}}},{pako:19}],1512:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:!1,ui:{list:".offers2__listing-entry",more:".offers2__listing-added-more"},events:{"click @ui.more":function(){this.__showMoreOffers()}},__loadBackgroundImage:function(e){e.find("[data-offer-img]").each(function(){var e=jQuery(this),t=e.attr("data-offer-img");t&&e.css("background-image","url('"+e.attr("data-offer-img")+"')")})},onRender:function(){this.__initialEventHwd()},__initialEventHwd:function(){var e=this,t=e.options.rootState;e.stopListening(t),e.listenTo(t,"sliceOffersList",e.__sliceOffersList),e.listenTo(t,"wholeOffersList",e.__wholeOffersList)},__sliceOffersList:function(e){this.trigger("wipe:show");var t=this.ui.list.children();t.addClass("offers2-hidden"),t.each(function(){var t=jQuery(this),i=t.attr("data-offer-type");i&&i.split(",").indexOf(e.id)>=0?t.removeClass("offers2-filter"):t.addClass("offers2-filter")}),t=t.not(".offers2-filter"),this.__loadBackgroundImage(t.slice(0,6).removeClass("offers2-hidden")),t.length>6?this.ui.more.removeClass("offers2-hide"):this.ui.more.addClass("offers2-hide")},__wholeOffersList:function(){this.trigger("wipe:hide");var e=this.ui.list.children();e.addClass("offers2-hidden"),e.removeClass("offers2-filter"),this.__loadBackgroundImage(e.slice(0,6).removeClass("offers2-hidden")),e.length>6?this.ui.more.removeClass("offers2-hide"):this.ui.more.addClass("offers2-hide")},__showMoreOffers:function(){var e=this.ui.list.children(".offers2-hidden").not(".offers2-filter");this.__loadBackgroundImage(e.slice(0,6).removeClass("offers2-hidden")),0===this.ui.list.children(".offers2-hidden").not(".offers2-filter").length&&this.ui.more.addClass("offers2-hide")}})},{"backbone.marionette":6}],1504:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("backbone.marionette"),l=e("./01-region/view"),a=e("./02-nation/view"),o=e("../../../ui/util");t.exports=c.LayoutView.extend({template:Handlebars.compile(e("./template.hbs")),ui:{header:".offers2__toolbar-popup-header .offers2__toolbar-popup-menu-text",scrollContainer:".offers2__toolbar-popup",scrollNation:".offers2__toolbar-popup-nation"},regions:{region:".offers2__toolbar-popup-region",nation:".offers2__toolbar-popup-nation"},className:"offers2__toolbar-menu-popup-wrapper",initialize:function(){this._closeHandler=jQuery.proxy(this.__closeEventHandler,this),this._regionCollection=new n.Collection([]),this._nationCollection=new n.Collection([])},onRender:function(){var e=this;this.__initialChildren(),this.__initialEventHwd(),this.__delGlobalListener(),this.__addGlobalListener(),this.options.rootState.trigger("getAllOffersMenu"),this.listenTo(o.tracker,"change:size",function(){e.__scrollFunction()})},onDestroy:function(){this.__delGlobalListener()},__initialChildren:function(){this.getRegion("region").show(new l({collection:this._regionCollection,rootState:this.options.rootState})),this.getRegion("nation").show(new a({collection:this._nationCollection,rootState:this.options.rootState}))},__initialEventHwd:function(){var e=this,t=e.options.rootState;e.stopListening(t),e.listenTo(t,"popupOffersMenu",e.__popupOffersMenu)},__popupOffersMenu:function(e){var t=this;t.ui.header.show(),t._regionCollection.reset(e.region),t._nationCollection.reset(e.nation),t.options.rootState.trigger("fixedListHeight"),t.__scrollFunction()},__closeEventHandler:function(e){this.options.rootState.trigger("hideToolbarMenu",e.target)},__delGlobalListener:function(){jQuery(document).off("click",this._closeHandler)},__addGlobalListener:function(){jQuery(document).on("click",this._closeHandler)},__scrollFunction:function(){var e=this,t=document.documentElement.clientWidth||document.body.clientWidth;return o.ismobile()?!1:(1366>t?e.ui.scrollContainer.css({height:400,"max-height":"inherit"}):e.ui.scrollContainer.css({height:"auto","max-height":"calc(100vh - 134px)"}),e.ui.scrollNation.css("padding-top","65px"),e.ui.scrollContainer.addClass("nano"),e.ui.scrollNation.addClass("nano-content"),e.ui.scrollContainer.nanoScroller({destroy:!0}),e.ui.scrollContainer.nanoScroller({alwaysVisible:!0}),void 0)}})},{"../../../ui/util":2122,"./01-region/view":1497,"./02-nation/view":1501,"./template.hbs":1503,backbone:8,"backbone.marionette":6,underscore:42}],1503:[function(e,t,i){t.exports='<div class="offers2__toolbar-arrow"></div>\r\n<div class="offers2__toolbar-popup">\r\n    <div class="offers2__toolbar-popup-header">\r\n        <div class="offers2__toolbar-popup-menu-text">{{ local "general.Countries_and_Regions" }}</div>\r\n    </div>\r\n    <div class="offers2__toolbar-popup-region"></div>\r\n    <div class="offers2__toolbar-popup-nation"></div>\r\n</div>'},{}],1497:[function(e,t,i){var n=e("backbone.marionette"),c=e("./children/view"),l=e("./empty/view");t.exports=n.CollectionView.extend({childView:c,emptyView:l,childViewOptions:function(e){return{model:e,rootState:this.options.rootState}}})},{"./children/view":1494,"./empty/view":1496,"backbone.marionette":6}],1494:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),events:{click:function(){this.options.rootState.trigger("menuItemSelected",this.model.toJSON())}}})},{"./template.hbs":1493,"backbone.marionette":6}],1493:[function(e,t,i){t.exports='<div class="offers2__toolbar-popup-item">{{ name }}</div>'},{}],1501:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("./children/view"),a=e("./empty/view"),o=e("./waterfall");t.exports=c.CollectionView.extend({childView:l,emptyView:a,childViewOptions:function(e){return{model:e,rootState:this.options.rootState}},initialize:function(){this.$el.addClass("destination-venus-position"),this._waterfallHandler=jQuery.proxy(n.debounce(this.__WaterfallEventHandler,50),this)},onRender:function(){this._viewRendered=!0,this.__delGlobalListener(),this.__addGlobalListener()},onDestroy:function(){this.__delGlobalListener()},onRenderCollection:function(){this.__WaterfallEventHandler()},__WaterfallEventHandler:function(){this._viewRendered&&this.$el.is(":visible")&&new o({container:this.el,colCount:7})},__delGlobalListener:function(){jQuery(window).off("resize",this._waterfallHandler)},__addGlobalListener:function(){jQuery(window).on("resize",this._waterfallHandler)}})},{"./children/view":1499,"./empty/view":1500,"./waterfall":1502,"backbone.marionette":6,underscore:42}],1500:[function(e,t,i){t.exports=e("../../01-region/empty/view");
},{"../../01-region/empty/view":1496}],1499:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"offers2__toolbar-popup-menu-city",onRender:function(){"taiwan"===this.model.get("key")&&this.$el.attr("data-follow","yes")}})},{"./template.hbs":1498,"backbone.marionette":6}],1498:[function(e,t,i){t.exports='{{#equal level "country"}}\r\n    {{#if children.length}}\r\n        <div class="offers2__toolbar-popup-menu-county">\r\n            <a href="{{ url }}">{{ name }}</a>\r\n        </div>\r\n        {{#each children}}\r\n            <div class="offers2__toolbar-popup-menu-cities">\r\n                <a href="{{ url }}">{{ name }}</a>\r\n            </div>\r\n        {{/each}}\r\n    {{/if}}\r\n{{/equal}}\r\n{{#equal level "city"}}\r\n    <div class="offers2__toolbar-popup-menu-cities">\r\n        <a href="{{ url }}">{{ name }}</a>\r\n    </div>\r\n{{/equal}}'},{}],1509:[function(e,t,i){var n=e("backbone"),c=e("backbone.marionette"),l=e("./children/view"),a=e("./empty/view");t.exports=c.CompositeView.extend({template:Handlebars.compile(e("./template.hbs")),childView:l,emptyView:a,className:"offers2__toolbar-type-popup-wrapper",childViewContainer:".offers2__toolbar-popup",childViewOptions:function(e){return{model:e,rootState:this.options.rootState}},initialize:function(){this._closeHandler=jQuery.proxy(this.__closeEventHandler,this),this.collection=new n.Collection([])},onRender:function(){this.__initialEventHwd(),this.__delGlobalListener(),this.__addGlobalListener(),this.options.rootState.trigger("getAllOffersType")},onDestroy:function(){this.__delGlobalListener()},__initialEventHwd:function(){var e=this,t=e.options.rootState;e.stopListening(t),e.listenTo(t,"popupOffersType",e.__popupOffersType)},__popupOffersType:function(e){this.collection.reset(e||[]),this.options.rootState.trigger("fixedListHeight")},__closeEventHandler:function(e){this.options.rootState.trigger("hideToolbarType",e.target)},__delGlobalListener:function(){jQuery(document).off("click",this._closeHandler)},__addGlobalListener:function(){jQuery(document).on("click",this._closeHandler)}})},{"./children/view":1506,"./empty/view":1507,"./template.hbs":1508,backbone:8,"backbone.marionette":6}],1508:[function(e,t,i){t.exports='<div class="offers2__toolbar-arrow"></div>\r\n<div class="offers2__toolbar-popup"></div>'},{}],1507:[function(e,t,i){t.exports=e("../../01-drop-down-menu/01-region/empty/view")},{"../../01-drop-down-menu/01-region/empty/view":1496}],1496:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"offers2__loading"})},{"./template.hbs":1495,"backbone.marionette":6}],1495:[function(e,t,i){t.exports='<div class="offers2__loading-item"></div>\r\n<div class="offers2__loading-item"></div>\r\n<div class="offers2__loading-item"></div>\r\n<div class="offers2__loading-item"></div>\r\n<div class="offers2__loading-item"></div>\r\n<div class="offers2__loading-item"></div>\r\n<div class="offers2__loading-item"></div>\r\n<div class="offers2__loading-item"></div>'},{}],1506:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),events:{click:function(){this.options.rootState.trigger("typeItemSelected",this.model.toJSON())}}})},{"./template.hbs":1505,"backbone.marionette":6}],1505:[function(e,t,i){t.exports='<div class="offers2__toolbar-popup-item">{{ displayname }}</div>'},{}],1431:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../abmb/stateful.js"),a=e("./template.hbs"),o=e("./items/view"),s=e("./hotel/view");e("hammerjs"),e("../../../assets/lib/jquery.hammer.js");e("./style.sass"),t.exports=c.LayoutView.extend(n.extend({},l,{template:Handlebars.compile(a),regions:{items:"[data-item='items']",content:"[data-item='content']",hotel:"[data-item='hotel']"},className:"new-look-content",ui:{left:"[data-click='left']",right:"[data-click='right']",items:"[data-item='items']"},events:{"click @ui.left":function(){this.ifClick&&this.selectLeft()},"click @ui.right":function(){this.ifClick&&this.selectRight()}},initialize:function(){var e=this;e.options.models&&e.options.models.length&&(1==e.options.models.length?e.options.models=e.options.models.concat([n.assign({},e.options.models[0]),n.assign({},e.options.models[0]),n.assign({},e.options.models[0])]):e.options.models.length<=3&&(e.options.models=e.options.models.concat(n.map(e.options.models,function(e){return n.assign({},e)})))),e.datas=e.__setArry(e.options.models),e.data=e.datas[1],e.ifClick=!1,e.on("render:items:right",function(){e.selectRight()}),e.on("if:items:click",function(){e.ifClick=!0})},selectRight:function(){var e=this;this.ifClick=!1;var t=e.datas[0];e.datas.shift(),e.datas.push(t),e.__itemRender(e.datas,!0),e.__contentRender(e.datas[1])},selectLeft:function(){var e=this.datas;this.ifClick=!1,this.datas=this.__setArry(e),this.__itemRender(this.datas,!1),this.__contentRender(this.datas[1])},onRender:function(){this.__itemRender(this.datas,!0),this.__contentRender(this.data),this.setupSwipe()},__setArry:function(e){var t=e[e.length-1];return e.pop(),e.unshift(t),e},serializeData:function(){return{data:this.data,allHotelLink:this.options.allHotelLink}},__itemRender:function(e,t){var i=this;i.getRegion("items").empty(),i.getRegion("items").show(new o({datas:e,view:i,direction:t}))},__contentRender:function(e){var t=this;t.getRegion("hotel").show(new s({data:e}))},setupSwipe:function(){var e=this;e.ui.items.hammer({touchAction:"pan-y"}).on("swipeleft swiperight",function(t){switch(t.type){case"swipeleft":e.selectRight();break;case"swiperight":e.selectLeft()}})}}))},{"../../../assets/lib/jquery.hammer.js":44,"../abmb/stateful.js":72,"./hotel/view":1426,"./items/view":1428,"./style.sass":1429,"./template.hbs":1430,"backbone.marionette":6,hammerjs:12,underscore:42}],1430:[function(e,t,i){t.exports='<!--burgess-->\r\n<div class="new-look-bg">\r\n</div>\r\n<div class="new-look-hotel">\r\n    <div data-item="hotel" class="new-look-hotel-content">\r\n\r\n    </div>\r\n</div>\r\n<div class="new-look-imgs">\r\n    <div class="imgs-smalls">\r\n        <div data-item ="items" class="samlls-item">\r\n\r\n        </div>\r\n        <div class="samlls-click">\r\n            <div class="samlls-click-icons">\r\n                <span data-click="left" class="icon-icon_chervonLeft click-icon"></span>\r\n                <span class="click-mid"></span>\r\n                <span data-click="right" class="icon-icon_chervonRight click-icon"></span>\r\n            </div>\r\n            {{#if allHotelLink}}\r\n                <a href="{{allHotelLink}}" class="samlls-click-url">\r\n                    <span class="url-title">{{local "hotels.view_all_hotels"}}</span>\r\n                    <span class="icon-icon_chervonRight url-icon"></span>\r\n                </a>\r\n            {{/if}}\r\n        </div>\r\n    </div>\r\n</div>'},{}],1429:[function(e,t,i){t.exports=e("sassify")('/**  *  * @param { 300 | bold } $font-weight  * @param { normal     } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal           } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { 300 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { normal } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ html[dir="rtl"] .new-look .samlls-click-url {   margin-left: 0;   margin-right: 2rem; }  html[dir="rtl"] .new-look .imgs-smalls .samlls-item .item-box {   margin-left: inherit !important;   margin-right: 1.6rem; }   html[dir="rtl"] .new-look .imgs-smalls .samlls-item .item-box.item-box-hide {     margin-left: inherit !important;     margin-right: -25%; }  html[dir="rtl"] .new-look .samlls-click-icons .click-icon {   transform: rotate(180deg); }  html[dir="rtl"] .new-look .samlls-click {   left: 0 !important;   right: calc(50% + 3.2rem); }  html[dir="rtl"] .new-look .bom-left {   display: none !important; }  .new-look {   display: block;   font-size: 0;   background-color: #FFF;   position: relative; }   @media screen and (max-width: 768px) {     .new-look {       display: none; } }   .new-look .new-look-bg {     position: absolute;     left: 0;     top: 0;     bottom: 0;     right: 0;     opacity: .03;     background-color: #9F7D23; }   .new-look .new-look-hotel {     width: 40%;     display: inline-block;     height: 100%;     vertical-align: top;     position: relative; }     .new-look .new-look-hotel .new-look-hotel-content {       padding: 9rem 17.5% 8rem 20%;       vertical-align: top; }       .new-look .new-look-hotel .new-look-hotel-content .hotel-title {         color: #636363;         font-family: \'PlayfairDisplay\', Helvetica, sans-serif;         font-weight: 300;         font-size: 1.4rem;         line-height: 1.9rem;         text-transform: uppercase;         display: block; }       .new-look .new-look-hotel .new-look-hotel-content .hotel-name {         color: #3D3D3D;         font-family: \'PlayfairDisplay\', Helvetica, sans-serif;         font-weight: bold;         font-size: 2.4rem;         display: block;         line-height: 3.2rem;         padding-top: .8rem; }       .new-look .new-look-hotel .new-look-hotel-content .hotel-dsc {         color: #292929;         font-family: Whitney;         font-size: 1.6rem;         font-weight: 300;         line-height: 2.6rem;         padding-top: 2rem;         min-height: 13.2rem; }         .new-look .new-look-hotel .new-look-hotel-content .hotel-dsc .read-more {           color: #063763; }       .new-look .new-look-hotel .new-look-hotel-content .hotel-bom {         padding-top: 4rem; }         .new-look .new-look-hotel .new-look-hotel-content .hotel-bom .bom-left {           display: inline-block;           width: 50%;           vertical-align: top;           text-align: left; }           .new-look .new-look-hotel .new-look-hotel-content .hotel-bom .bom-left .left-title {             color: #292929;             font-family: Whitney;             font-size: 1.4rem;             font-weight: 300;             line-height: 1.7rem;             text-transform: uppercase;             display: block; }           .new-look .new-look-hotel .new-look-hotel-content .hotel-bom .bom-left .left-m {             color: #3D3D3D;             font-family: Whitney;             font-size: 2rem;             font-weight: bold;             display: block;             line-height: 2.4rem; }           .new-look .new-look-hotel .new-look-hotel-content .hotel-bom .bom-left .left-n {             color: #292929;             font-family: Whitney;             font-size: 1.4rem;             font-weight: 300;             line-height: 1.7rem; }         .new-look .new-look-hotel .new-look-hotel-content .hotel-bom .bom-right {           display: inline-block;           width: 50%;           vertical-align: top;           text-align: right; }           .new-look .new-look-hotel .new-look-hotel-content .hotel-bom .bom-right .right-but {             padding: 1.2em 3em;             line-height: inherit;             color: #fff; }           .new-look .new-look-hotel .new-look-hotel-content .hotel-bom .bom-right .right-url {             display: block;             padding-top: .6rem;             padding-right: 1.5rem;             color: #063763; }             .new-look .new-look-hotel .new-look-hotel-content .hotel-bom .bom-right .right-url:hover .url-t {               text-decoration: underline;               text-decoration-color: #063763; }             .new-look .new-look-hotel .new-look-hotel-content .hotel-bom .bom-right .right-url .url-t {               font-family: Whitney;               font-size: 1.4rem;               font-weight: 500;               line-height: 1.7rem;               display: inline-block;               vertical-align: middle; }             .new-look .new-look-hotel .new-look-hotel-content .hotel-bom .bom-right .right-url .url-icon {               display: inline-block;               font-size: 1.2rem;               padding-left: .65rem;               vertical-align: middle; }   .new-look .new-look-imgs {     width: 60%;     display: inline-block;     height: 100%;     vertical-align: top;     position: relative;     padding-bottom: 8rem; }     .new-look .new-look-imgs .imgs-bg-box {       width: 57.1%;       padding-top: 55%;       display: inline-block;       vertical-align: top;       position: relative; }       .new-look .new-look-imgs .imgs-bg-box .imgs-bg {         background-repeat: no-repeat;         background-size: 100% 100%;         position: absolute;         top: 0;         bottom: 0;         left: 0;         right: 0;         box-shadow: 0 0 15px 0 rgba(0, 0, 0, 0.82); }         .new-look .new-look-imgs .imgs-bg-box .imgs-bg.bg-style {           top: 25%;           bottom: 25%;           left: 25%;           right: 25%; }     .new-look .new-look-imgs .imgs-smalls {       display: inline-block;       vertical-align: top;       width: 100%;       position: relative; }       .new-look .new-look-imgs .imgs-smalls .samlls-item {         padding-top: 15px;         padding-bottom: 15px;         white-space: nowrap;         overflow: hidden; }         .new-look .new-look-imgs .imgs-smalls .samlls-item .samlls-item-before {           display: inline; }         .new-look .new-look-imgs .imgs-smalls .samlls-item:before {           content: "";           padding-top: 50%;           width: 0;           height: 100%;           display: inline-block;           vertical-align: middle; }         .new-look .new-look-imgs .imgs-smalls .samlls-item .item-box {           position: relative;           width: 25%;           padding-top: 25%;           display: inline-block;           vertical-align: middle;           margin-left: 1.6rem;           opacity: .5; }           .new-look .new-look-imgs .imgs-smalls .samlls-item .item-box.item-box-shadow {             box-shadow: 0 0 15px 0 rgba(0, 0, 0, 0.79); }             .new-look .new-look-imgs .imgs-smalls .samlls-item .item-box.item-box-shadow .offers2__listing-offer-m4b {               display: block; }           .new-look .new-look-imgs .imgs-smalls .samlls-item .item-box.item-box-hide {             margin-left: -25%; }           .new-look .new-look-imgs .imgs-smalls .samlls-item .item-box.item-box-content {             width: 50%;             padding-top: 50%;             box-shadow: 0 0 15px 0 rgba(0, 0, 0, 0.79);             opacity: 1; }             .new-look .new-look-imgs .imgs-smalls .samlls-item .item-box.item-box-content.item-box-shadow-none {               box-shadow: none; }           .new-look .new-look-imgs .imgs-smalls .samlls-item .item-box .item {             position: absolute;             top: 0;             bottom: 0;             left: 0;             right: 0;             background-color: #676767;             background-repeat: no-repeat;             background-size: cover;             width: 100%; }             .new-look .new-look-imgs .imgs-smalls .samlls-item .item-box .item.left {               margin-left: 100px; }             .new-look .new-look-imgs .imgs-smalls .samlls-item .item-box .item.right {               margin-right: 100px; }           .new-look .new-look-imgs .imgs-smalls .samlls-item .item-box .item_title {             position: absolute;             bottom: 0;             left: 0;             right: 0;             background-color: #fff;             height: 35px;             font-size: 1.3rem;             color: black;             font-family: \'PlayfairDisplay\', Helvetica, sans-serif;             font-weight: 700;             letter-spacing: 0;             padding: 5px 10px;             line-height: 18px;             overflow: hidden;             white-space: initial; }           .new-look .new-look-imgs .imgs-smalls .samlls-item .item-box .offers2__listing-offer-m4b {             display: none; }       .new-look .new-look-imgs .imgs-smalls .samlls-click {         left: calc(50% + 3.2rem);         position: absolute;         bottom: 0;         margin-bottom: calc(12.5% - 5rem); }         .new-look .new-look-imgs .imgs-smalls .samlls-click .samlls-click-icons {           display: inline-block;           vertical-align: middle; }           .new-look .new-look-imgs .imgs-smalls .samlls-click .samlls-click-icons .click-icon {             display: inline-block;             font-size: 2.5rem;             color: #9F7D23;             padding: .7rem 1.2rem;             cursor: pointer; }           .new-look .new-look-imgs .imgs-smalls .samlls-click .samlls-click-icons .click-mid {             display: inline-block;             width: 1px;             background-color: #CFCFCF;             padding: 10% 0; }         .new-look .new-look-imgs .imgs-smalls .samlls-click .samlls-click-url {           display: inline-block;           vertical-align: middle;           margin-left: 2rem; }           .new-look .new-look-imgs .imgs-smalls .samlls-click .samlls-click-url:hover .url-title {             text-decoration: underline;             text-decoration-color: #063763; }           .new-look .new-look-imgs .imgs-smalls .samlls-click .samlls-click-url .url-title {             color: #063763;             font-family: Whitney;             font-size: 1.4rem;             font-weight: 500;             line-height: 1.7rem;             display: inline-block;             vertical-align: middle; }           .new-look .new-look-imgs .imgs-smalls .samlls-click .samlls-click-url .url-icon {             display: inline-block;             font-size: 1.2rem;             padding-left: .65rem;             vertical-align: middle; }  .bottom-left {   background-position: bottom left !important; }  .bottom-right {   background-position: bottom right !important; }  .bottom-center {   background-position: bottom center !important; }  .center-center {   background-position: center center !important; }  .center-right {   background-position: center right !important; }  .center-left {   background-position: center left !important; }  .top-left {   background-position: top left !important; }  .top-right {   background-position: top right !important; }  .top-center {   background-position: top center !important; }  ');
},{sassify:36}],1428:[function(e,t,i){var n=e("backbone.marionette"),c=e("underscore"),l=e("../../ui/util");t.exports=n.ItemView.extend({template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},ui:{item_img:"[data-animate='item-img']",item_title:"[data-animate='item-img'] .item_title"},events:{"click @ui.item_img":function(e){2==jQuery(e.target).data("index")&&this.options.view.trigger("render:items:right")}},className:"samlls-item-before",initialize:function(){this.IF_FIRST=!0,this.datas=this.options.datas,this.rtldata={left:function(){return l.isRTL()?{width:"25%","padding-top":"25%",opacity:".6","margin-right":"-25%"}:{width:"25%","padding-top":"25%",opacity:".6","margin-left":"-25%"}},right:function(){return l.isRTL()?{width:"50%","padding-top":"50%",opacity:"1","margin-right":"0"}:{width:"50%","padding-top":"50%",opacity:"1","margin-left":"0"}}}},serializeData:function(){var e=this;return{datas:c.each(e.datas,function(e,t){e.item_index=t})}},onRender:function(){var e=this;e.ui.item_img.length&&e.ui.item_img.length>0&&(e.dom0=jQuery(this.ui.item_img[0]),e.dom1=jQuery(this.ui.item_img[1]),e.dom2=jQuery(this.ui.item_img[2]))},__itemRightAnimate:function(){var e=this;e.ui.item_img.length&&e.ui.item_img.length>0&&(e.dom0.addClass("item-box-content item-box-shadow-none"),e.dom0.animate(this.rtldata.left(),800),e.dom0.find(".item_title").hide(),e.dom1.find(".item_title").hide(),e.dom1.animate({width:"50%","padding-top":"50%",opacity:"1"},800,function(){e.dom1.addClass("item-box-shadow "),e.options.view.trigger("if:items:click")}))},__itemLeftAnimate:function(){var e=this;e.ui.item_img.length&&e.ui.item_img.length>0&&(e.dom0.addClass("item-box-hide"),e.dom1.addClass("item-box-hide"),e.dom2.addClass("item-box-content  item-box-shadow-none"),e.dom1.find(".item_title").hide(),e.dom2.find(".item_title").hide(),e.dom2.animate({width:"25%","padding-top":"25%",opacity:".6"},800,function(){e.dom2.removeClass("item-box-content")}),e.dom0.find(".item_title").hide(),e.dom1.animate(this.rtldata.right(),800,function(){e.dom1.addClass("item-box-shadow"),e.options.view.trigger("if:items:click")}),setTimeout(function(){e.dom2.find(".item_title").show()},400))},onShow:function(){this.options.direction?this.__itemRightAnimate():this.__itemLeftAnimate()}})},{"../../ui/util":2122,"./template.hbs":1427,"backbone.marionette":6,underscore:42}],1427:[function(e,t,i){t.exports='<!--burgess.li-->\r\n{{#each datas}}\r\n    <div data-animate="item-img"  class="item-box">\r\n        {{#if isforbusiness}}\r\n            <div class="offers2__listing-offer-m4b">\r\n                <div class="offers2__listing-offer-m4b-text">\r\n                    <div class="text">{{local "offers.for_business"}}</div>\r\n                </div>\r\n            </div>\r\n        {{/if}}\r\n        {{#if url}}\r\n            {{!-- MHRUAT-1619 --}}\r\n            {{!-- <a href="{{url}}"> --}}\r\n                <div data-index="{{item_index}}" class="item {{imageAnchor}}" style="background-image: url(\'{{imageUrl}}\')">\r\n                </div>\r\n                {{#if title}}\r\n                    {{#unless hiddenTitle}}\r\n                        <div class="item_title">{{title}}</div>\r\n                    {{/unless}}\r\n                {{/if}}\r\n            {{!-- </a> --}}\r\n        {{else}}\r\n            <div data-index="{{item_index}}" class="item {{imageAnchor}}" style="background-image: url(\'{{imageUrl}}\')">\r\n            </div>\r\n            {{#if title}}\r\n                {{#unless hiddenTitle}}\r\n                    <div class="item_title">{{title}}</div>\r\n                {{/unless}}\r\n            {{/if}}\r\n        {{/if}}\r\n    </div>\r\n{{/each}}'},{}],1426:[function(e,t,i){var n=e("backbone.marionette"),c=e("../../ui/readmore/view");t.exports=n.ItemView.extend({template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},ui:{readmore:"[data-component='readmore']"},initialize:function(){this.data=this.options.data},serializeData:function(){return{data:this.options.data}},onShow:function(){var e=this;c.getInstance(e.ui.readmore).collapseContent()}})},{"../../ui/readmore/view":2110,"./template.hbs":1425,"backbone.marionette":6}],1425:[function(e,t,i){t.exports='<!--burgess-->\r\n<span class="hotel-title">{{local "hotels.featured_locations"}}</span>\r\n<span class="hotel-name">{{data.cityName}}</span>\r\n<div data-component="readmore" class="hotel-dsc" data-maxline="5" data-respondtoresize="false" data-removehandlerwhendestoryed="true" >\r\n    <span class="readmore__content">{{data.cityDescirption}}</span>\r\n</div>\r\n<div class="hotel-bom">\r\n    <div class="bom-left">\r\n    </div>\r\n    <div class="bom-right">\r\n        <a href="{{data.bookingUrl}}" class="wgt-sqbutton-golden right-but">{{local "general.book_now"}}</a>\r\n        <a href="{{data.cityUrl}}" class="right-url">\r\n            <span class="url-t">{{local "hotels.discover_now"}}</span>\r\n            <span class="icon-icon_chervonRight url-icon"></span>\r\n        </a>\r\n    </div>\r\n</div>'},{}],1406:[function(e,t,i){var n=e("backbone.marionette"),c=e("iscroll"),l=e("../maps/helpers/requestAnimationFrame"),a=n.ItemView.extend({template:!1,ui:{items:".nk2-footer-dropdown-popup-item",label:".nk2-footer-dropdown-input-label",popup:".nk2-footer-dropdown-input-popup",close:".nk2-footer-dropdown-popup-arrow .icon-icon_B017",list:".nk2-footer-dropdown-popup-container",text:".nk2-footer-dropdown-input-label-text"},events:{"click @ui.close":function(e){e.stopPropagation(),this.__hideDropDownPopup()},"click @ui.label":function(e){e.stopPropagation(),this.$el.hasClass("selected")?this.__hideDropDownPopup():this.__showDropDownPopup()},"click @ui.items":function(e){var t=jQuery(e.currentTarget);e.stopPropagation(),this.ui.items.removeClass("selected"),t.addClass("selected"),this.ui.text.html(t.text()),this.trigger("item:selected",t.data()),this.__hideDropDownPopup()}},onRender:function(){var e=this;e.onDestroy()},onDestroy:function(){var e=this;e._iscroll&&(e._iscroll.destroy(),e._iscroll=null),e.__delGlobalEventListener()},__showDropDownPopup:function(){var e=this;e.onDestroy(),e.__addGlobalEventListener(),e.$el.addClass("selected"),e.ui.list.length&&l(function(){e._iscroll=new c(e.ui.list.get(0),{bounce:!1,mouseWheel:!0,scrollbars:!0,fadeScrollbars:!1,resizeScrollbars:!0,interactiveScrollbars:!0})})},__hideDropDownPopup:function(){var e=this;e.onDestroy(),e.$el.removeClass("selected")},__addGlobalEventListener:function(){var e=this;e._globalListener=function(t){0===e.$el.has(t.target).length&&e.__hideDropDownPopup()},jQuery(document).on("click",e._globalListener)},__delGlobalEventListener:function(){var e=this;e._globalListener&&(jQuery(document).off("click",e._globalListener),this._globalListener=null)}});a.autoCreate=function(e){var t=jQuery(e||".nk2-footer-dropdown");return t.length>0?new a({el:t.get(0)}).render():void 0},t.exports=a},{"../maps/helpers/requestAnimationFrame":1148,"backbone.marionette":6,iscroll:14}],1405:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:function(t){return Handlebars.compile(e("./template.hbs"))(t)}})},{"./template.hbs":1404,"backbone.marionette":6}],1404:[function(e,t,i){t.exports='{{#if __ONE}}\r\n    <div class="tpl-hero-scratchpad {{__ONE.attributes.image_anchor}}" style="display: block; background-image: url(\'{{__ONE.attributes.carouselimage}}\');">\r\n        <div class="tpl-content">\r\n            <div class="wgt-breadcrumb-icon"><span class="icon-icon_B002"></span><a>{{local "scratchpad.hotels"}}</a></div>\r\n            <div class="tpl-text">\r\n                <h3><span>{{__ONE.attributes.name}}</span><a data-component="scratchpad" data-id="{{__ONE.attributes.id}}" data-content="{{__ONE.attributes.id}}" data-type="Hotels" data-title="{{__ONE.attributes.name}}" class="wgt-scratchpad-off" data-favourite="false"><span class="icon-icon_B013"></span></a></h3>\r\n                <p>{{__ONE.attributes.description}}</p>\r\n            </div><a class="wgt-sqbutton" href="{{__ONE.attributes.url}}#room">{{local "Property.book_now"}}</a>\r\n        </div>\r\n    </div>\r\n{{/if}}\r\n{{#each __SIM}}\r\n    <div class="tpl-half-line">\r\n        {{#each this}}\r\n            <div style="display: inline-block; background-image: url(\'{{attributes.carouselimage}}\');" class="tpl-half-scratchpad clearfix {{attributes.image_anchor}}">\r\n                <div class="tpl-content">\r\n                    <div class="wgt-icon"><span class="icon-icon_B002"></span>\r\n                        <label>{{local "scratchpad.hotels"}}</label>\r\n                    </div>\r\n                    <div class="tpl-text">\r\n                        <h3><span>{{attributes.name}}</span></h3>\r\n                    </div>\r\n                    <div class="tpl-cta"><a class="wgt-sqbutton" href="{{attributes.url}}">{{local "scratchpad.read_more"}}</a></div>\r\n                </div>\r\n                <div class="tpl-holder"></div>\r\n            </div>\r\n        {{/each}}\r\n    </div>\r\n{{/each}}'},{}],2139:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../abmb/stateful.js"),a=e("../currency-language/view.js"),o=e("../ui/util"),s=e("./model"),r=e("./loggedin/view"),g=e("./loggedout/view"),d=e("./signin/view"),I=e("./info/view"),b=e("./notification/view");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("./template.hbs")),className:"user-module-wrapper",triggers:{"click .search":"expand:top:search"},toggleShowHide:function(){var e=this;e.toggleState("expand","on","off"),e.$el.hasClass("expand-on")?(e.notificationView.__showMessage(!1),e.navbar_el.finish().fadeOut("slow",function(){e.navbar_el.addClass("user-module-none")})):e.navbar_el.removeClass("user-module-none")},ui:{tips:".collect-tips",nav:".nav",content:".content",notification:".notification-content",otherInfo:".user-others"},events:{"click .availability":function(e){jQuery(e.currentTarget).toggleClass("expanded");var t=jQuery(".widget-booking-home"),i=jQuery(".global-wrapper");i.toggleClass("expanded-top"),i.hasClass("expanded-top")?(i.hasClass("docked")||(i.addClass("docked"),t.data("interim-docked","yes")),t.hide().slideToggle(500,function(){t.removeAttr("style").find(".booking-widget-content-text").focus()})):"yes"===t.data("interim-docked")&&(t.data("interim-docked","no"),i.removeClass("docked"))}},initialize:function(){var e=this;e.navbar_el=jQuery("[data-component='navbar']").find(".tpl-static-banner"),e.loginInView=new r,e.loginOutView=new g,e.notificationView=new b,e.loginInView.on("toggle:detail",function(){e.toggleShowHide()}),e.loginOutView.on("toggle:detail",function(){e.toggleShowHide()}),e.loginInView.on("toggle:out:shopping-cart",function(){e.$el.hasClass("expand-on")&&e.$el.removeClass("expand-on").addClass("expand-off"),e.notificationView.__showMessage(!1)}),e.loginOutView.on("toggle:out:shopping-cart",function(){e.$el.hasClass("expand-on")&&e.$el.removeClass("expand-on").addClass("expand-off")}),e.loginInView.on("toggle:notification",function(){e.$el.removeClass("expand-on").addClass("expand-off"),e.notificationView.__showMessage(),e.clv.model.set({view:null})}),e.notificationView.on("add:icon:notification",function(){var t=e.loginInView.ui.login;t.hasClass("have")||(t.addClass("have"),e.navbar_el.finish().fadeOut("slow",function(){e.navbar_el.addClass("user-module-none")}))}),e.notificationView.on("remove:icon:notification",function(){var t=e.loginInView.ui.login;t.hasClass("have")&&(t.removeClass("have"),e.navbar_el.removeClass("user-module-none"))}),o.tracker.on("click",function(t){e.$el.has(jQuery(t.target)).length||(o.getUser().get("moduleExpanded")?o.getUser().set("moduleExpanded",!1):(e.switchState("expand:off"),e.notificationView.__showMessage(!1),jQuery("[data-item='IFNAR']").hasClass("expanded")||e.navbar_el.removeClass("user-module-none")))})},onRender:function(){jQuery("[data-component=widget-booking]").length||this.$(".availability").hide();var e=this,t=s.getInstance();e.clv=o.getInstance(a).on("cl-expanded",function(){e.switchState("expand:off"),e.ui.notification.hasClass("active")&&e.notificationView.__showMessage(!1)}),e.clv.on("remove:nar:class",function(t){t?e.navbar_el.finish().fadeOut("slow",function(){e.navbar_el.addClass("user-module-none")}):e.$el.hasClass("expand-on")||e.navbar_el.removeClass("user-module-none")}),jQuery.cookie("login_default_open")?(jQuery.cookie("login_default_open","",{path:"/",expires:-1}),e.switchState("expand:on")):e.switchState("expand:off"),t.on("notification",function(t,i){o.ismobile()||(i?i.trigger("notification",t):e.ui.tips.find("p").html(t).end().finish().show().delay(3500).fadeOut(2e3).hide(1))}),t.on("req:login",function(){e.switchState("expand:on"),t.set("moduleExpanded",!0)}),t.deferredPromise.then(function(){e.ui.nav.append((t.isLoggedIn()?e.loginInView:e.loginOutView).render().el),o.tracker.on("mobile:false",function(){t.isLoggedIn()&&(e.ui.notification.append(e.notificationView.el),jQuery.cookie("login_default_open_notification")?(jQuery.cookie("login_default_open_notification","",{path:"/",expires:-1}),e.switchState("expand:off"),e.notificationView.__showMessage(!0)):e.notificationView.__showMessage(!1)),e.ui.content.append(o.getInstance(t.isLoggedIn()?I:d).el),e.ui.otherInfo.append(e.clv.el)}).on("mobile:true",function(){e.ui.tips.hide()}).trigger("change:mobile"),jQuery.cookie("firstEnterUserPopup")?jQuery(".logged-out-popup").removeClass("active"):jQuery.cookie("firstEnterUserPopup",1,{path:"/"})})}}))},{"../abmb/stateful.js":72,"../currency-language/view.js":777,"../ui/util":2122,"./info/view":2125,"./loggedin/view":2127,"./loggedout/view":2129,"./model":2132,"./notification/view":2134,"./signin/view":2137,"./template.hbs":2138,"backbone.marionette":6,underscore:42}],2138:[function(e,t,i){t.exports='<div>\r\n    <div class="user-module">\r\n        <div class="user-others"></div>\r\n        <div class="collect-tips"><p></p></div>\r\n        <div class="nav">\r\n            <div class="content"></div>\r\n        </div>\r\n        <a class="wgt-sqbutton-golden availability">{{local "booking.book_now"}}<span class="close-icon icon-icon_B017"></span></a>\r\n        <div class="search"><span class="search-icon icon-icon_D001"></span><span class="search-text">{{local "booking.search"}}</span></div>\r\n        <div class="notification-content"></div>\r\n    </div>\r\n</div>\r\n'},{}],2134:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../abmb/stateful.js"),a=e("../../ui/util"),o=e("../../../../config/host.js");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("./template.hbs")),ui:{nano:".nano",ul:".nano ul"},initialize:function(){var e=this;e.model=a.getUser(),e.notificationList=[],e.listLoaded=!1},serializeData:function(){var e=this;return{notificationList:e.notificationList}},events:{"click .notification-close":function(){this.__showMessage(!1)}},onRender:function(){var e=this;a.ismobile()||e.ui.nano.on("mousewheel DOMMouseScroll",function(t){t.stopPropagation();var i=this.clientHeight,n=jQuery(this).find(".nano-slider"),c=n.height(),l=parseFloat(n.css("transform").split(",")[5].replace(")","")||0),a=0,o=t.originalEvent.wheelDelta?t.originalEvent.wheelDelta:-(t.originalEvent.detail||0);if(l>=i-c-a){if(0>o)return t.preventDefault(),e.ui.ul.height()>.7*window.innerHeight-1&&e.disable_scroll(),!1}else o>0&&0>=l&&t.preventDefault()}),jQuery(window).resize(function(){e.$el.parent().hasClass("active")||setTimeout(function(){e.ui.nano.height(0)},0)})},__showMessage:n.debounce(function(e){var t=this;t.notificationList&&t.notificationList.length>0||t.listLoaded?t.__formatList(e):t.model.get("id")&&(a.isM4B()?jQuery.getJSON(o.getURL("api","business/Account/Notification")).then(function(i){i.success&&(t.notificationList=i.data,t.listLoaded=!0,t.render(),t.__formatList(e))}):jQuery.getJSON(o.getURL("mapi","Account/Notification")).then(function(i){i.success&&(t.notificationList=i.data,t.listLoaded=!0,t.render(),t.__formatList(e))}))},500),__formatList:function(e){var t=this;t.ui.ul.height&&t.notificationList&&t.notificationList.length>0&&(t.ui.nano.height(t.ui.ul.height()),t.ui.nano.nanoScroller({destroy:!0}),a.ismobile()||t.ui.nano.nanoScroller({alwaysVisible:!0}),t.$el.parent().hasClass("active")||0==e?(t.$el.parent().removeClass("active"),t.ui.nano.height(0),t.enable_scroll(),t.trigger("remove:icon:notification")):(t.$el.parent().addClass("active"),t.trigger("add:icon:notification")))},wheel:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1},disable_scroll:function(){var e=this;window.addEventListener&&window.addEventListener("mousewheel DOMMouseScroll",e.wheel,!1),window.onmousewheel=document.onmousewheel=e.wheel},enable_scroll:function(){var e=this;window.removeEventListener&&window.removeEventListener("mousewheel DOMMouseScroll",e.wheel,!1),window.onmousewheel=document.onmousewheel=null}}))},{"../../../../config/host.js":45,"../../abmb/stateful.js":72,"../../ui/util":2122,"./template.hbs":2133,"backbone.marionette":6,underscore:42}],2133:[function(e,t,i){t.exports='{{#if notificationList}}\r\n<div class="user-notification">\r\n    <div class="item">{{local "general.notifications"}}</div>\r\n    <div class="item notification-close">\r\n        <i class="icon-icon_B017"></i>\r\n    </div>\r\n</div>\r\n\r\n<div class="user-notification-list">\r\n    <div class="nano">\r\n        <div class="nano-content">\r\n            <ul>\r\n                {{#each notificationList}}\r\n                    <li>\r\n                        <a class="line" {{#if url}} href="{{url}}" {{/if}}>\r\n                            <div class="icon-div">\r\n                                <span class="icon-add {{icon}}"></span>\r\n                            </div>\r\n                            <div class="nt-content">\r\n                                <section>\r\n                                    <span>{{ content }}</span>\r\n                                    <span class="specialcontent" >{{ specialcontent }}</span>\r\n                                </section>\r\n                                <section class="notification-date">\r\n                                    {{#if startdate}}\r\n                                        <span> {{date startdate}} </span>\r\n                                    {{/if}}\r\n                                    {{#if enddate}}\r\n                                        <span> - {{date enddate}} </span>\r\n                                        <!--{{date-with-format enddate \'DD MMM YYYY\'}}-->\r\n                                    {{/if}}\r\n                                </section>\r\n                            </div>\r\n\r\n                        </a>\r\n                    </li>\r\n                {{/each}}\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n{{/if}}'},{}],2129:[function(e,t,i){var n=e("backbone.marionette"),c=e("../../shopping-cart/shopping-cart-view.js"),l=e("../../ui/util");e("../../user/model"),t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),events:{"click .logged-out":function(){if(window.maintenanceNotice&&2===window.maintenanceNotice.tag){var e=document.getElementsByClassName("tpl-full-screen-mask")[0];return e.querySelector(".tip-title").textContent=maintenanceNotice.title,e.querySelector(".tip-copy").textContent=maintenanceNotice.copy,e.querySelector(".tip-button").textContent=maintenanceNotice.button,e.querySelector(".content-error-tips").style.backgroundImage=maintenanceNotice.background?"url("+maintenanceNotice.background+")":"",e.style.display="block",jQuery(".tpl-full-screen-mask").on("click",".wgt-sqbutton-black.tip-button",function(t){return t.preventDefault(),e.style.display="none",!1}),jQuery(".tpl-full-screen-mask").show(),!1}this.trigger("toggle:detail"),this.shoppingcartView.render()},"click .logged-out-logo":function(){jQuery(".logged-out-popup").toggleClass("active")},"click .logged-out-popup":function(){return!1},"click .sign-in-now":function(){var e=jQuery(".user-module-wrapper").hasClass("expand-off");return e&&this.trigger("toggle:detail"),jQuery(".logged-out-popup").removeClass("active"),!1}},onBeforeRender:function(){this.stopListening(l.getUser())},onRender:function(){this.shoppingcartView=l.getInstance(c),this.shoppingcartView.view=this,this.$el.append(this.shoppingcartView.render().el),this.on("close:user",function(){this.trigger("toggle:out:shopping-cart")})},initialize:function(){l.tracker.on("click",function(e){jQuery(e.target).hasClass("logged-out-logo")||jQuery(e.target).hasClass("logged-out-img")||jQuery(e.target).hasClass("red-point")?jQuery(".logged-out-popup").toggleClass("active"):jQuery(".logged-out-popup").removeClass("active")})}})},{"../../shopping-cart/shopping-cart-view.js":1941,"../../ui/util":2122,"../../user/model":2132,"./template.hbs":2128,"backbone.marionette":6}],2128:[function(e,t,i){t.exports='<div class="logged-out show-user">\r\n    <span class="logged-out-wrapper" dir="ltr">\r\n        <span id="opt-login" class="icon-icon_K006"></span>\r\n        <span class="chervon-icon icon-icon_chervonUp"></span>\r\n        <span class="chervon-icon icon-icon_chervonDown"></span>\r\n    </span>\r\n</div>'},{}],2127:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../shopping-cart/shopping-cart-view.js"),a=e("../../ui/util");t.exports=c.ItemView.extend({className:"logged-in",ui:{userinfo:"[data-login='user-info']",notification:".user-notification",login:".login-in"},template:Handlebars.compile(e("./template.hbs")),model:a.getUser(),modelEvents:{"change:id":"render"},onRender:function(){var e=a.isM4B();this.model.set("isM4B",e),this.model.set("businessNotification",this.model.attributes.notification.business||0),this.model.set("personalNotification",this.model.attributes.notification.personal||0),this.shoppingcartView=a.getInstance(l),this.shoppingcartView.view=this,this.$el.append(this.shoppingcartView.setNum(this.model.get("shopping_cart")).render().el),this.on("close:user",function(){this.trigger("toggle:out:shopping-cart")})},events:{"click .user-hello":function(){return a.ismobile()?!1:(this.trigger("toggle:detail"),void this.shoppingcartView.render())},"click @ui.notification":function(e){e.stopPropagation(),this.trigger("toggle:notification"),this.shoppingcartView.render()},"click #opt-logout":n.once(function(){return!jQuery.post(a.getURL("mapi","account/logout"),function(){jQuery("body").is(".member-page")?a.redirect("/"):a.reload()})})}})},{"../../shopping-cart/shopping-cart-view.js":1941,"../../ui/util":2122,"./template.hbs":2126,"backbone.marionette":6,underscore:42}],2126:[function(e,t,i){t.exports='<div class="login-in show-user">\r\n\r\n    <div class="user-hello" dir="ltr">\r\n\r\n        <a data-login="user-info" class="user-info always-show-image" style="background-image: url(\'{{avatar}}\');">\r\n            {{#if isM4B}}\r\n                {{#if businessNotification}}\r\n                    <div class="user-notification red-point">{{ businessNotification }}</div>\r\n                {{/if}}\r\n            {{else}}\r\n                {{#if personalNotification}}\r\n                    <div class="user-notification red-point">{{ personalNotification }}</div>\r\n                {{/if}}\r\n            {{/if}}\r\n            <span class="loggedin-login-text">{{local "login.post_login"}}</span>\r\n        </a>\r\n        <span class="chervon-icon icon-icon_chervonUp"></span>\r\n        <span class="chervon-icon icon-icon_chervonDown"></span>\r\n        <a class="logout-link" id="opt-logout">{{local "login.logout"}}</a>\r\n    </div>\r\n</div>\r\n'},{}],2125:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../abmb/stateful.js"),a=e("../../ui/util"),o=e("../../../../config/host.js");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("./template.hbs")),initialize:function(){var e=this;e.model=a.getUser().on("change:scratchpad",e.render,e),e.model.get("business")?e.model.set("enableM4B",e.model.get("business").activated):e.model.set("enableM4B",!1),e.model.set("isM4B",a.isM4B()),Handlebars.registerHelper("profile_url",function(){return o.getURL("my","scratchpad")}),Handlebars.registerHelper("m4b_url",function(){return e.model.get("business")?e.model.get("business").home_url:""}),Handlebars.registerHelper("isNthMostRecent",function(t,i,c){return c[n.contains(e.model.get("scratchpad").where({favourite:!0}).slice(0,i),t)?"fn":"inverse"](this)})},events:{"click #opt-logout":n.once(function(){return!jQuery.post(a.getURL("mapi","account/logout"),function(){jQuery("body").is(".member-page")?a.redirect("/"):a.reload()})})}}))},{"../../../../config/host.js":45,"../../abmb/stateful.js":72,"../../ui/util":2122,"./template.hbs":2124,"backbone.marionette":6,underscore:42}],2124:[function(e,t,i){t.exports='<div class="user-scrib">\r\n    <section>\r\n        <img class="pc-img-icon"  src="{{points.icon}}" alt="">\r\n        <img class="mobile-img-icon"  src="{{points.profile_icon}}" alt="">\r\n    </section>\r\n    {{#if loginWithDifferentAccountType}}\r\n        <section style="margin-bottom: 1.5rem;">\r\n            <p>{{#if flag }}{{local "login.login_with_mena"}}{{else}}{{local "login.login_with_mym"}}{{/if}}</p>\r\n        </section>\r\n    {{/if}}\r\n    <section class="user-module-row">\r\n        <div class="info-left">\r\n            <label>{{num-format points.balance }}</label>\r\n            <p>{{local "login.available_points"}}</p>\r\n        </div>\r\n        <!--<div class="info-min-border">-->\r\n            <!--<div class="min-border"></div>-->\r\n        <!--</div>-->\r\n        <div class="info-right">\r\n            <!--<span>{{#if flag }} {{local "login.room_nights_mena" points.upgrade}}{{else}}{{local "login.room_nights" points.upgrade (num-format points.upgradepoints)}} {{/if}}</span>-->\r\n            <label>{{nightsNotice.left}}</label>\r\n            {{#ifCond nightsNotice.left \'<=\' 1 }}\r\n                <p>{{local \'profile.night_to_double_user\'}}</p>\r\n            {{/ifCond}}\r\n            {{#ifCond nightsNotice.left \'>\' 1 }}\r\n                <p>{{local \'profile.nights_to_double_user\'}}</p>\r\n            {{/ifCond}}\r\n        </div>\r\n    </section>\r\n    <section>\r\n        {{#if enableM4B}}\r\n            <div class="pc-new-user">\r\n                <span class="icon-icon_A006 pc-icon"></span>\r\n                <span class="pc-title"><a class="pc-url" id="opt-business" href="{{m4b_url}}" {{#unless isM4B}}target="_blank"{{/unless}}>{{local "login.business_portal"}}</a></span>\r\n            </div>\r\n        {{/if}}\r\n        <div class="pc-new-user">\r\n            <span class="icon-icon_K006 pc-icon"></span>\r\n            <span class="pc-title"><a class="pc-url" id="opt-view-profile" href="{{profile_url}}">{{local "login.view_profile"}}</a></span>\r\n        </div>\r\n        <div class="pc-new-user">\r\n            <span class="icon-icon_D011 pc-icon sign-out-icon"></span>\r\n            <span class="pc-title"><a class="pc-url" id="opt-logout">{{local "login.logout"}}</a></span>\r\n        </div>\r\n    </section>\r\n    {{#ifCond points.balance \'>\' 0}}\r\n        <section>\r\n            <p class="use-points-p">{{local "login.use_your_points"}}</p>\r\n        </section>\r\n    {{/ifCond}}\r\n    <a class="wgt-sqbutton-black newlook-but" id="opt-view-profile" href="{{profile_url}}">{{local "login.view_profile"}}</a>\r\n</div>\r\n\r\n<!--<div class="user-info-list">-->\r\n    <!--<a class="userLogin"  href="{{profile_url}}">{{local "login.my_scratchpad"}}</a>-->\r\n    <!--<a class="userLogin logout-link" id="opt-logout">{{local "login.logout"}}</a>-->\r\n    <!--<ul>-->\r\n        <!--{{#each scratchpad.models}}-->\r\n            <!--{{#isNthMostRecent this 2}}-->\r\n                <!--<li>-->\r\n                    <!--<a href="{{this.attributes.url}}">-->\r\n                        <!--<span class="icon-add  icon-icon_{{this.attributes.icon}}"></span>-->\r\n                        <!--<section>-->\r\n                            <!--<p>{{ this.attributes.title }}</p>-->\r\n                        <!--</section>-->\r\n                    <!--</a>-->\r\n                <!--</li>-->\r\n            <!--{{/isNthMostRecent}}-->\r\n        <!--{{/each}}-->\r\n    <!--</ul>-->\r\n<!--</div>-->'},{}],1941:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("backbone"),l=e("../../../config/host.js"),a=e("../ui/util");t.exports=n.ItemView.extend({className:"shopping-cart-wrapper",template:Handlebars.compile(e("./shopping-cart.hbs")),setNum:function(e){return this.model.set({num:e}),this},initialize:function(e){var t=this;this.model=new c.Model({num:0,url:l.urls.checkout}).on("change:num",this.render,this),a.isM4B()?(t.model.set("M4B",!0),a.getUser().deferredPromise.then(function(){a.getUser().get("business")&&a.getUser().get("business").shopping_cart?t.model.set({num:a.getUser().get("business").shopping_cart}):t.model.set({num:0})})):a.getUser().deferredPromise.then(function(){t.model.set({num:a.getUser().get("shopping_cart")})})},onRender:function(){var e=this;e.$el.find(".tooltip").hide(),e.$el.find("#shopping-cart").unbind("click").bind("click",function(){e.model.get("num")>0?a.isM4B()?window.location.href="/"+l.getLanguage()+"/business/bookings/review-details/":window.location.href=e.model.get("url"):(e.$el.find(".tooltip").attr("style","display:block").delay(3e3).fadeOut("slow"),e.view.trigger("close:user"))})}})},{"../../../config/host.js":45,"../ui/util":2122,"./shopping-cart.hbs":1942,backbone:8,"backbone.marionette":6,underscore:42}],1942:[function(e,t,i){t.exports='<a id="shopping-cart" class="smart" href="javascript:void(0);">\r\n    <!--<img src="/assets/img/navbar/icon_C004.svg" class="icon-smart">-->\r\n    {{#if M4B}}\r\n        <span class="icon-icon_P015 cart-icon"> <i class="smart-num" id="num" data-num="{{num}}">{{num}}</i></span>\r\n    {{else}}\r\n        <span class="icon-icon_A011 cart-icon"> <i class="smart-num" id="num" data-num="{{num}}">{{num}}</i></span>\r\n    {{/if}}\r\n    <span class="tooltip show">{{local "checkout.shopping_bag_empty"}}</span>\r\n</a>'},{}],1360:[function(e,t,i){function n(e){return g.object(g.filter(g.map(e.replace(/^[?#]+/,"").split("&"),function(e){return g.map(e.split("="),function(e){return decodeURIComponent(e.replace("+","%20"))})}),function(e){return 2===e.length}))}function c(e,t){return e.indexOf("?")>0?e+"&"+jQuery.param(t):e+"?"+jQuery.param(t)}function l(e){return"string"==typeof e?e:d(e).format(B)}function a(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)}function o(e,t){function i(e){return g.findIndex(l,{roomcategoryid:e.roomcategoryid})<0}function n(e){return g.findIndex(a,{roomtypecode:e.roomtypecode,roomcategoryid:e.roomcategoryid})<0}function c(e){return g.findIndex(o,{rateCode:e.rateCode,roomtypecode:e.roomtypecode,roomcategoryid:e.roomcategoryid})<0}var l=[],a=[],o=[];return g.forEach(e,function(e){e.heroimage=e.imagelist&&e.imagelist[0]||{},g.forEach(e.roomtypelist,function(i){i.roomcategoryid=e.roomcategoryid,g.forEach(i.rateplanlist,function(n){n.roomprice&&n.roomprice.finalprice.rategainresult&&("2"==n.roomprice.finalprice.rategainresult.status||"3"==n.roomprice.finalprice.rategainresult.status||"4"==n.roomprice.finalprice.rategainresult.status?n.roomprice.finalprice.rategainresult={title:n.roomprice.finalprice.rategainresult.title,status:n.roomprice.finalprice.rategainresult.status,list:g.map(n.roomprice.finalprice.currentrategainprice,function(e){return{website:e.website,currency:e.origincurrency,price:n.roomprice.showwithtax?e.originpricewithtax:e.originprice}}),rategainDisclaimer:n.roomprice.finalprice.rategainresult.rategainDisclaimer}:n.roomprice.finalprice.rategainresult=null),n.hotelcode=parseInt(t.code),n.roomcategoryid=e.roomcategoryid,n.roomtypecode=i.roomtypecode,
n.specialrequests=[],n.rooms=0})})}),g.forEach(e,function(e){i(e)&&l.push(g.omit(e,"roomtypelist")),g.forEach(e.roomtypelist,function(e){n(e)&&a.push(g.omit(e,"rateplanlist")),g.forEach(e.rateplanlist,function(e){c(e)&&o.push(e)})})}),{rooms:l,types:a,rates:o}}function s(e){var t=e.rooms,i=e.types,n=e.rates;return g.sortBy(g.map(t,function(e){var t=g.filter(g.map(g.where(i,{roomcategoryid:e.roomcategoryid}),function(e){return g.assign({rateplanlist:g.where(n,{roomcategoryid:e.roomcategoryid,roomtypecode:e.roomtypecode})},e)}),function(e){return e.rateplanlist.length>0});return g.assign({roomtypelist:t,heroroomtype:t[0]},e)}),function(e){return!e.heroroomtype})}function r(e){var t=e.rooms,i=e.types,n=e.rates;return g.map(g.uniq(n,function(e){return e.rateCode}),function(e){return g.assign({categorylist:g.sortBy(g.filter(g.map(t,function(t){var c=g.filter(g.map(i,function(i){return g.assign({rateplan:g.find(n,{rateCode:e.rateCode,roomtypecode:i.roomtypecode,roomcategoryid:t.roomcategoryid})},i)}),function(e){return!!e.rateplan});return g.assign({roomtypelist:c,heroroomtype:c[0]},t)}),function(e){return e.roomtypelist.length>0}),function(e){return e.heroroomtype.rateplan.roomprice&&e.heroroomtype.rateplan.roomprice.finalprice.total.aftertax})},e)})}var g=e("underscore"),d=e("moment"),I=e("elfjs"),b=e("../../../config/host"),C=I.Promise,u=!b.host||b.host===location.protocol+"//"+location.host;u||(I.$xhrFields={withCredentials:!0});var m="undefined"!=typeof sessionStorage,p="M4B_BOOKING_TEMPORARY_STORAGE",h=[],G=[],A=[],y={PROMO:null,GROUP:null,DISCO:null,QUERY:null,MATCH:null,MONEY:null},Z={HOTEL:"hotel",VILLE:"destination",GROUP:"group"},B="YYYY-MM-DD",x={loadProfile:function(){return C.ajax({url:b.getURL("api","account/profile")}).then(function(e){return e.json()})},withInvoice:function(){return C.ajax({method:"POST",url:b.getURL("api","business/ShoppingCart/InvoiceCheckout")}).then(function(e){var t=e.json();return t.success?t.data:C.reject(t)})},verifyPromo:function(e){if(e=e||J,y.PROMO&&y.PROMO.dispose(),Z.HOTEL===e.type&&e.code){var t=e.promocode,i=(t||"").trim();if(i)return(y.PROMO=C.ajax({url:c(b.getURL("api","promocheck"),{hotelcode:e.code,promocode:i})})).then(function(e){var t=e.json();return{valid:t.valid,message:t.message||i18n.t(t.valid?"booking.promocode_valid":"booking.promocode_invalid")}},function(){return{valid:!1,message:i18n.t("general.network_error")}}).then(function(i){return t===e.promocode?U.promocode=i:void 0})}return C.resolve({})},verifyGroup:function(e){if(e=e||J,y.GROUP&&y.GROUP.dispose(),Z.HOTEL===e.type&&e.code){var t=e.groupcode,i=(t||"").trim();if(i)return(y.GROUP=C.ajax({url:c(b.getURL("api","groupcodecheck"),{hotelcode:e.code,groupcode:i})})).then(function(e){var t=e.json();return{valid:t.valid,message:t.message||i18n.t(t.valid?"booking.groupcode_valid":"booking.groupcode_invalid")}},function(){return{valid:!1,message:i18n.t("general.network_error")}}).then(function(i){return t===e.groupcode?U.groupcode=i:void 0})}return C.resolve({})},verifyDisco:function(e){if(e=e||J,y.DISCO&&y.DISCO.dispose(),Z.HOTEL===e.type&&e.code){var t=e.discountcode,i=(t||"").trim();if(i)return(y.DISCO=C.ajax({url:c(b.getURL("api","discountcodecheck"),{hotelcode:e.code,discountcode:i,localdate:l(new Date),checkin:l(e.checkin),checkout:l(e.checkout),adults:e.adults,children:e.children,rooms:e.rooms})})).then(function(e){var t=e.json();return{valid:t.valid,message:t.message||i18n.t(t.valid?"booking.discount_code_valid":"booking.discount_code_invalid")}},function(){return{valid:!1,message:i18n.t("general.network_error")}}).then(function(i){return t===e.discountcode?U.discountcode=i:void 0})}return C.resolve({})},searchByKey:function(e){return y.QUERY&&y.QUERY.dispose(),(y.QUERY=C.ajax({url:c(b.getURL("api","book2/search"),{keyword:e.trim()})})).then(function(e){var t=e.json();return t.success?t.data:C.reject(t)},function(){return C.reject({success:!1,message:i18n.t("general.network_error")})})},getCityData:function(e){return e=e||J,Z.VILLE===e.type?C.ajax({url:c(b.getURL("api","business/City/GetCity"),{city:e.code||e.key,checkin:l(e.checkin),checkout:l(e.checkout),promo:e.promocode||"",promocode:e.promocode||"",groupcode:e.groupcode||"",discountcode:e.discountcode||"",adults:e.adults,children:e.children,rooms:e.rooms,AAA:e.AAA,AARP:e.AARP,GOV:e.GOV,Accessible:e.Accessible})}).then(function(e){var t=e.json();return t.success?(t.data.cityinfo.code=t.data.cityinfo.key,t.data.cityinfo.name=t.data.cityinfo.cityname,t.data.cityinfo.type=Z.VILLE,g.forEach(t.data.hotellist,function(e){e.hotelinfo.setting.loyaltydiscount=Math.max(0,100-100*e.hotelinfo.setting.loyaltydiscount)||0}),t.data):C.reject(t)},function(){return C.reject({success:!1,message:i18n.t("general.network_error")})}):Z.GROUP===e.type?C.ajax({url:c(b.getURL("api","business/City/GetCity"),{group:e.code,checkin:l(e.checkin),checkout:l(e.checkout),promo:e.promocode||"",promocode:e.promocode||"",groupcode:e.groupcode||"",discountcode:e.discountcode||"",adults:e.adults,children:e.children,rooms:e.rooms,AAA:e.AAA,AARP:e.AARP,GOV:e.GOV,Accessible:e.Accessible})}).then(function(e){var t=e.json();return t.success?(t.data.cityinfo.code=t.data.cityinfo.key,t.data.cityinfo.name=t.data.cityinfo.cityname,t.data.cityinfo.type=Z.GROUP,g.forEach(t.data.hotellist,function(e){e.hotelinfo.setting.loyaltydiscount=Math.max(0,100-100*e.hotelinfo.setting.loyaltydiscount)||0}),t.data):C.reject(t)},function(){return C.reject({success:!1,message:i18n.t("general.network_error")})}):C.reject({success:!1,message:"parameters error"})},getRoomData:function(e){function t(){return C.all([x.verifyPromo(e),x.verifyGroup(e),x.verifyDisco(e)]).then(function(t){var i=e.promocode,n=e.groupcode,a=e.discountcode;return t[0]&&!t[0].valid&&(i=""),t[1]&&!t[1].valid&&(n=""),t[2]&&!t[2].valid&&(a=""),C.ajax({url:c(b.getURL("api","business/room/gethotel"),{hotelcode:e.code,checkin:l(e.checkin),checkout:l(e.checkout),promo:i||"",promocode:i||"",groupcode:n||"",discountcode:a||"",adults:e.adults,children:e.children,rooms:e.rooms,AAA:e.AAA,AARP:e.AARP,GOV:e.GOV,Accessible:e.Accessible,ischeckroomupgrade:!0})}).then(function(t){var c=t.json();if(c.success){c.data.hoteldetail.loyaltydiscount=Math.max(0,100-100*c.data.hoteldetail.loyaltydiscount)||0,c.data.hoteldetail.code=c.data.hoteldetail.hotelid,c.data.hoteldetail.type=Z.HOTEL;var g={code:e.code,type:Z.HOTEL,checkin:l(e.checkin),checkout:l(e.checkout),promo:i||"",promocode:i||"",groupcode:n||"",discountcode:a||"",adults:e.adults,children:e.children,rooms:e.rooms,AAA:e.AAA,AARP:e.AARP,GOV:e.GOV,Accessible:e.Accessible},d=o(c.data.roomcategorylist,g);return{queryparams:g,allrateplan:d.rates,listbyrooms:s(d),listbyrates:r(d),hoteldetail:c.data.hoteldetail,promomsg:{code:c.data.promocode,mode:c.data.promomsg}}}return C.reject(c)},function(){return C.reject({success:!1,message:i18n.t("general.network_error")})})})}if(e=e||J,Z.HOTEL===e.type){var i={hotelcode:e.code,checkin:l(e.checkin),checkout:l(e.checkout),promo:e.promocode||"",promocode:e.promocode||"",groupcode:e.groupcode||"",discountcode:e.discountcode||"",adults:e.adults,children:e.children,rooms:e.rooms,AAA:e.AAA,AARP:e.AARP,GOV:e.GOV,Accessible:e.Accessible},n=g.find(h,i);return n?"rejected"===n.roomspecieslist.status&&(n.roomspecieslist=t()):(n=g.assign({roomspecieslist:t()},i),h.push(n)),n.roomspecieslist}return C.reject({success:!1,message:"parameters error"})},redirectURL:function(e){e=e||J;var t=location.protocol+"//"+location.host+"/"+b.getLanguage()+"/",i={};Z.HOTEL===e.type&&(t+="business/bookings/select-rooms/",i.hotelcode=e.code),Z.VILLE===e.type&&(t+="business/bookings/select-hotel/",i.city=e.code),Z.GROUP===e.type&&(t+="business/bookings/select-hotel/",i.groupHotel=e.code),i.checkin=l(e.checkin),i.checkout=l(e.checkout),i.promocode=e.promocode,i.groupcode=e.groupcode,i.discountcode=e.discountcode,i.adults=e.adults,i.children=e.children,i.rooms=e.rooms,i.AAA=e.AAA,i.AARP=e.AARP,i.GOV=e.GOV,i.Accessible=e.Accessible,location.href=c(t,i)},extractTemp:function(){return m?C.resolve(JSON.parse(sessionStorage.getItem(p))):void 0},reserveTemp:function(e){return m?(sessionStorage.setItem(p,JSON.stringify(e)),C.resolve({})):void 0},updateParam:function(e){g.has(e,"checkin")&&(J.checkin=d(e.checkin,B).toDate()),g.has(e,"checkout")&&(J.checkout=d(e.checkout,B).toDate()),g.has(e,"adults")&&(J.adults=e.adults),g.has(e,"children")&&(J.children=e.children),g.has(e,"rooms")&&(J.rooms=e.rooms),g.has(e,"promocode")&&(J.promocode=e.promocode),g.has(e,"groupcode")&&(J.groupcode=e.groupcode),g.has(e,"discountcode")&&(J.discountcode=e.discountcode),g.has(e,"AAA")&&(J.AAA=e.AAA),g.has(e,"AARP")&&(J.AARP=e.AARP),g.has(e,"GOV")&&(J.GOV=e.GOV),g.has(e,"discountcode")&&(J.Accessible=e.Accessible)},loadVscapes:function(e){return C.ajax({url:c(b.getURL("api","data/vscapeimage"),{propertyid:e})}).then(function(e){return e.json()})},loadService:function(e,t){function i(){return C.ajax({url:c(b.getURL("api","business/room/getroomservicelist"),n)}).then(function(e){var t=e.json();return t.success?t.services:[]},function(){return C.reject({success:!1,message:i18n.t("general.network_error")})})}if(t.roomservicelist)return C.resolve(t.roomservicelist);var n={hotelcode:t.hotelcode,rateplancode:t.rateCode,roomtypecode:t.roomtypecode,checkin:e.checkin,checkout:e.checkout,promo:e.promocode,promocode:e.promocode,groupcode:e.groupcode,discountcode:e.discountcode,adults:e.adults,children:e.children,rooms:1,AAA:e.AAA,AARP:e.AARP,GOV:e.GOV,Accessible:e.Accessible},l=g.find(G,n);return l?"rejected"===l.roomservicelist.status&&(l.roomservicelist=i()):(l=g.assign({roomservicelist:i()},n),G.push(l)),l.roomservicelist.then(function(e){return t.roomservicelist=e})},loadUpgrade:function(e,t){function i(){return C.ajax({url:c(b.getURL("api","business/Room/Upgrade"),n)}).then(function(t){var i=t.json();return i.success?(g.forEach(i.data.roomcategory.roomtypelist,function(t){t.roomcategoryid=i.data.roomcategory.roomcategoryid,g.forEach(t.rateplanlist,function(n){n.hotelcode=parseInt(e.code),n.roomcategoryid=i.data.roomcategory.roomcategoryid,n.roomtypecode=t.roomtypecode})}),i.data):C.reject(i)},function(){return C.reject({success:!1,message:i18n.t("general.network_error")})})}if(t.roomupgradedata)return C.resolve(t.roomupgradedata);var n={hotelcode:t.hotelcode,rateplancode:t.rateCode,roomtypecode:t.roomtypecode,checkin:e.checkin,checkout:e.checkout,promo:e.promocode,promocode:e.promocode,groupcode:e.groupcode,discountcode:e.discountcode,adults:e.adults,children:e.children,rooms:1,AAA:e.AAA,AARP:e.AARP,GOV:e.GOV,Accessible:e.Accessible,isroomupgrade:!0},l=g.find(A,n);return l?"rejected"===l.roomupgradedata.status&&(l.roomupgradedata=i()):(l=g.assign({roomupgradedata:i()},n),A.push(l)),l.roomupgradedata.then(function(e){return t.roomupgradedata=e})},newlyMember:function(e){return C.ajax({method:"POST",url:b.getURL("api","business/PrimaryGuest/Add"),body:jQuery.param(e)}).then(function(e){var t=e.json();return t.success?t.data:C.reject(t)},function(e){var t={},i=e&&e.responseText;if(i)try{t=JSON.parse(i)||{}}catch(n){}return C.reject({success:!1,message:t.message||t.msg||i18n.t("general.network_error")})})},addShopping:function(e){return C.ajax({method:"POST",url:b.getURL("api","business/RoomBooking/Add"),headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e)}).then(function(e){var t=e.json();return t.success?t:C.reject(t)})},modShopping:function(e){return C.ajax({method:"POST",url:b.getURL("api","business/RoomBooking/Update"),headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e)}).then(function(e){var t=e.json();return t.success?t:C.reject(t)})},getCartInfo:function(){return C.ajax({url:b.getURL("api","business/ShoppingCart/GetCartInfo")}).then(function(e){var t=e.json();return t.success?(g.forEach(t.data.roomlist,function(e){e.hoteldetail.code=e.hotelid,e.hoteldetail.type=Z.HOTEL,e.hoteldetail.loyaltydiscount=Math.min(100,Math.round(e.hoteldetail.loyaltydiscount)),e.rateplandetail.hotelcode=e.hotelid,e.rateplandetail.roomcategoryid=e.roomdetail.roomcategoryid,e.rateplandetail.roomtypecode=e.roomtypecode,e.rateplandetail.originaldesc=e.rateplandetail.desc,e.rateplandetail.desc=e.rateplandetail.shortdesc,e.roomdetail.roomtypecode=e.roomtypecode,g.forEach(e.servicedata,function(e){var t=e.pricingtype||"";e.servicepricingtype=t,e.pricingtype=i18n.t("windsurfer."+t.toLowerCase())})}),t.data):C.reject(t)})},getPayToken:function(){return C.ajax({url:b.getURL("api","booking/checkout/getcards")}).then(function(e){var t=e.json();return g.isArray(t)?t:[]},function(){return[]})},delPayToken:function(e){return C.ajax({url:b.getURL("api","booking/checkout/deletecards"),method:"POST",body:"TokenID="+encodeURIComponent(e)}).then(function(e){var t=e.json();return t.success?t:C.reject(t)},function(){return C.reject({success:!1,message:i18n.t("general.network_error")})})},getCurrency:function(){function e(){return C.ajax({url:b.getURL("api","account/preferences/currency")}).then(function(e){return e.json()||[]},function(){return C.reject({success:!1,message:i18n.t("general.network_error")})})}return y.MONEY?"rejected"===y.MONEY.status&&(y.MONEY=e()):y.MONEY=e(),y.MONEY},setCurrency:function(e){return C.ajax({url:b.getURL("api","account/preferences/currency"),method:"POST",body:"code="+encodeURIComponent(e)}).then(function(e){var t=e.json();return t.success?(h=[],G=[],t):C.reject(t)},function(){return C.reject({success:!1,message:i18n.t("general.network_error")})})},creditMatch:function(e){return y.MATCH&&y.MATCH.dispose(),(y.MATCH=C.ajax({url:c(b.getURL("api","booking/checkout/checkcardtype"),{num:e})})).then(function(e){return e.json()},function(){return C.reject({success:!1,message:i18n.t("general.network_error")})})},paymentLink:function(e){return C.ajax({url:b.getURL("api","business/ShoppingCart/CreatePaymentLink"),method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e)}).then(function(t){var i=t.json();return i.success?{orderid:i.data.orderid,payUrl:i.data.payurl||i.data.payUrl,paymentType:e.paymentType}:C.reject(i)},function(){return C.reject({success:!1,message:i18n.t("general.network_error")})})},removeEntry:function(e){return C.ajax({url:b.getURL("api","business/RoomBooking/Remove"),method:"POST",body:"bookingId="+encodeURIComponent(e)}).then(function(e){var t=e.json();return t.success?t:C.reject(t)},function(){return C.reject({success:!1,message:i18n.t("general.network_error")})})},orderPaying:function(e){return C.ajax({url:b.getURL("api","business/ShoppingCart/Checkout"),method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e)}).then(function(e){var t=e.json();return t.success||3===t.status?t.data:C.reject(t)},function(){return C.reject({success:!1,message:i18n.t("general.network_error")})})},orderStatus:function(e){return function t(){return C.ajax({url:c(b.getURL("mapi","Checkout/CheckOrder"),{orderid:e})}).then(function(e){var i=e.json();return i.success?i:0===i.status||-3===i.status?new C(function(e,i){setTimeout(function(){t().then(e,i)},5e3)}):C.reject(i)},function(){return C.reject({success:!1,message:i18n.t("general.network_error")})})}()},useDiscount:function(e){return("apply"===e.action&&""==e.discountcode?C.resolve({valid:!1,message:""}):C.ajax({url:b.getURL("api","business/ShoppingCart/SettingDiscountCode"),method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e)}).then(function(e){var t=e.json();return{valid:t.success,message:t.message||i18n.t(t.success?"booking.discount_code_valid":"booking.discount_code_invalid")}},function(){return{valid:!1,message:i18n.t("general.network_error")}})).then(function(e){return U.discountcode=e})},loadVisitor:function(){return C.ajax({url:b.getURL("api","business/PrimaryGuest/list")}).then(function(e){var t=e.json();return t.success?t.data.list:C.reject(t)})},toGuestBeds:function(){location.href="/"+b.getLanguage()+"/business/bookings/guest-beds/"},toM4BReview:function(){location.href="/"+b.getLanguage()+"/business/bookings/review-details/"},toM4BPaying:function(){location.href="/"+b.getLanguage()+"/business/bookings/payment/"},toM4BTicket:function(e){location.href="/"+b.getLanguage()+"/business/bookings/confirmation/?orderid="+encodeURIComponent(e)},toM4BSearch:function(){location.href="/"+b.getLanguage()+"/business/bookings/search/"}},v=g.debounce(function(){x.verifyPromo()},500),W=g.debounce(function(){x.verifyGroup()},500),X=g.debounce(function(){x.verifyDisco()},500),F=n(location.search),Q=d(F.checkin,B).toDate(),R=d(F.checkout,B).toDate(),L=a(new Date,0);(isNaN(+Q)||L>Q)&&(Q=a(L,0)),(isNaN(+R)||Q>=R)&&(R=a(Q,1));var H=F.hotelcode,k=F.city,f=F.groupHotel,V=null;H&&(V=Z.HOTEL),k&&(V=Z.VILLE),f&&(V=Z.GROUP);var J={code:H||k||f||null,type:V,checkin:Q,checkout:R,promocode:(F.promocode||F.promo||"").trim(),groupcode:(F.groupcode||F.group||"").trim(),discountcode:(F.discountcode||F.discount||"").trim(),adults:Math.min(9,Math.max(1,parseInt(F.adults)||1)),children:Math.min(9,Math.max(0,parseInt(F.children)||0)),rooms:Math.min(9,Math.max(1,parseInt(F.rooms)||1)),AAA:"true"===(F.AAA||"").trim().toLowerCase(),AARP:"true"===(F.AARP||"").trim().toLowerCase(),GOV:"true"===(F.GOV||"").trim().toLowerCase(),Accessible:"true"===(F.Accessible||"").trim().toLowerCase(),selection:null},w={editable:!1,get maxocc(){return this.selection?parseInt(this.selection.maxocc||18):18},get adultocc(){return Math.min(this.selection?parseInt(this.selection.adultocc||9):9,this.maxocc-this.children)},get childocc(){return Math.min(this.selection?parseInt(this.selection.childocc||9):9,this.maxocc-this.adults)},get roomocc(){return this.selection?parseInt(this.selection.maxselectroomscount_m4b||9):9},get maxchildage(){return this.selection?this.selection.maxchildage||this.selection.maxchildaage||11:11},get isAmerican(){return this.selection?this.selection.isAmerican:!1},get accessibleroom(){return this.selection?this.selection.accessibleroom:!1},get checkin(){return J.checkin},get checkout(){return J.checkout},get promocode(){return J.promocode},get groupcode(){return J.groupcode},get discountcode(){return J.discountcode},get adults(){return J.adults},get children(){return J.children},get rooms(){return J.rooms},get AAA(){return this.isAmerican&&J.AAA},get AARP(){return this.isAmerican&&J.AARP},get GOV(){return this.isAmerican&&J.GOV},get Accessible(){return this.accessibleroom&&J.Accessible},get selection(){return J.selection},set checkin(e){J.checkin.getTime()!==e.getTime()&&(J.checkin=e,this.selection&&X())},set checkout(e){J.checkout.getTime()!==e.getTime()&&(J.checkout=e,this.selection&&X())},set adults(e){e=Math.max(1,Math.min(e,Math.min(this.adultocc,this.maxocc-this.children))),J.adults!==e&&(J.adults=e,this.selection&&X())},set children(e){e=Math.max(0,Math.min(e,Math.min(this.childocc,this.maxocc-this.adults))),J.children!==e&&(J.children=e,this.selection&&X())},set rooms(e){e=Math.max(1,Math.min(e,this.roomocc)),J.rooms!==e&&(J.rooms=e,this.selection&&X())},set promocode(e){J.promocode!==e&&(J.promocode=e,U.promocode=null,this.selection&&v())},set groupcode(e){J.groupcode!==e&&(J.groupcode=e,U.groupcode=null,this.selection&&W())},set discountcode(e){J.discountcode!==e&&(J.discountcode=e,U.discountcode=null,this.selection&&X())},set AAA(e){J.AAA=e},set AARP(e){J.AARP=e},set GOV(e){J.GOV=e},set Accessible(e){J.Accessible=e},set selection(e){if(e&&(this.editable=this.editable||"destination"===e.type||"group"===e.type||!!e.showdestinationeditbuttonfornewbookingflow),J.selection!==e)if(J.selection=e,U.promocode=null,U.groupcode=null,U.discountcode=null,e){J.code=e.code,J.type=e.type;var t={code:e.code,type:e.type,checkin:this.checkin,checkout:this.checkout,promocode:this.promocode,groupcode:this.groupcode,discountcode:this.discountcode,adults:this.adults,children:this.children,rooms:this.rooms,AAA:this.AAA,AARP:this.AARP,GOV:this.GOV,Accessible:this.Accessible},i=this.children;this.children=i,this.adults=this.adults,this.children=i,this.rooms=this.rooms,x.verifyPromo(t),x.verifyGroup(t),x.verifyDisco(t)}else y.PROMO&&y.PROMO.dispose(),y.GROUP&&y.GROUP.dispose(),y.DISCO&&y.DISCO.dispose()}},U={};t.exports={host:x,data:w,mode:U,lang:b.getLanguage()}},{"../../../config/host":45,elfjs:10,moment:16,underscore:42}],2102:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("backbone.marionette")),c=e("./template.hbs"),l=1,a=5,o=1;t.exports=n.LayoutView.extend({template:Handlebars.compile(c),initialize:function(){this.options.activePage&&(l=this.options.activePage),this.options.startPage&&(o=this.options.startPage)},serializeData:function(){for(var e=this,t=[],i=Math.min(a,e.options.totalPage)+(o-1),n=o;i>=n;n++)t.push({page:n,active:n===l});return{list:t,activePage:l,totalPage:e.options.totalPage,prevDisable:1===l,nextDisable:l===e.options.totalPage}},ui:{prev:".newlook-footer-pager-prev",next:".newlook-footer-pager-next",pager:".newlook-footer-pager-item span"},events:{"click @ui.prev":function(){1!==l&&(this.minusPage(),this.trigger("movetoprev",l,o))},"click @ui.next":function(){l!==this.options.totalPage&&(this.addPage(),this.trigger("movetonext",l,o))},"click @ui.pager":function(e){var t=jQuery(e.target).closest(".newlook-footer-pager-item").attr("data-page");t&&(l=1*t,this.render(),this.trigger("movetoitem",l,o))}},minusPage:function(){l--,o>l&&o--,this.render()},addPage:function(){l++,l>o+a-1&&o++,this.render()}})},{"./template.hbs":2101,backbone:8,"backbone.marionette":6,underscore:42}],2101:[function(e,t,i){t.exports='<ul class="newlook-footer-pager-container">\r\n    <li class="newlook-footer-pager-prev{{#if prevDisable}} disabled{{/if}}">\r\n        <span class="icon-icon_chervonLeft"></span>\r\n    </li>\r\n    {{#each list}}\r\n        <li class="newlook-footer-pager-item{{#if this.active}} active{{/if}}" data-page={{this.page}}>\r\n            <span>{{this.page}}</span>\r\n        </li>\r\n    {{/each}}\r\n    <li class="newlook-footer-pager-next{{#if nextDisable}} disabled{{/if}}">\r\n        <span class="icon-icon_chervonRight"></span>\r\n    </li>\r\n</ul>'},{}],2100:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("./template.hbs"),a=e("../util");t.exports=c.ItemView.extend({template:Handlebars.compile(l),initialize:function(){var e=this;e.optionlist=[],e.selectValue="",e.selectText="",e.refreshSelect(),a.ismobile()?(e.$el.closest(".field").addClass("hide-icon"),jQuery("html body").on("click",jQuery.proxy(this.__closeDropDownByOther,this))):jQuery("html body").on("mousedown",jQuery.proxy(this.__closeDropDownByOther,this)),e.options.page.on("refreshAllSelect",function(){e.refreshSelect(),e.render()})},serializeData:function(){var e=this;return{optionlist:e.optionlist,selectValue:e.selectValue,selectText:e.selectText,showPlaceholder:!(""!=e.selectValue)}},ui:{container:".newlook-dropdown",contentContainer:".newlook-dropdown-content-container",list:".newlook-dropdown-list-container",nano:".nano",item:".newlook-dropdown-list li"},events:{"click @ui.contentContainer":function(e){e.stopPropagation();var t=this;this.ui.list.hasClass("open")?(this.ui.list.removeClass("open"),this.ui.container.removeClass("open")):(jQuery(".newlook-dropdown-list-container").removeClass("open"),jQuery(".newlook-dropdown").removeClass("open"),this.ui.list.addClass("open"),this.ui.container.addClass("open"),this.ui.nano.nanoScroller({destroy:!0}),this.ui.nano.nanoScroller({alwaysVisible:!0}),setTimeout(function(){t.ui.nano.find(".nano-pane").on("click",function(e){e.stopPropagation()})}),this.$el.find(".newlook-dropdown-list .active").length&&this.ui.nano.nanoScroller({scrollTo:t.$el.find(".newlook-dropdown-list .active")}),t.getBottomDistance()<10&&jQuery("html,body").animate({scrollTop:jQuery(document).scrollTop()+Math.abs(t.getBottomDistance())+80},500))},"click @ui.item":function(e){var t=this;if(jQuery(e.target).hasClass("active"))t.__closeDropDown(e);else{var i=t.$el.siblings("select");t.__closeDropDown(e),i.val(jQuery(e.target).attr("val")).trigger("change"),setTimeout(function(){t.options.page.trigger("refreshAllSelect")})}}},onRender:function(){var e=this,t=e.$el.siblings("select");t.attr("disabled")?e.$el.hide():t.hide()},onDestroy:function(){a.ismobile()?jQuery("html body").off("click",jQuery.proxy(this.__closeDropDownByOther,this)):jQuery("html body").off("mousedown",jQuery.proxy(this.__closeDropDownByOther,this))},adaptNativeSelect:function(){var e=this,t=e.$el.siblings("select");e.optionlist=[];t.find("option").each(function(){var i={};i.value=jQuery(this).val(),i.text=jQuery(this).text(),i.selected=!(jQuery(this).val()!==t.val()),e.optionlist.push(i)})},refreshSelectValue:function(){var e=this,t=e.$el.siblings("select");e.selectValue=t.val(),n.each(e.optionlist,function(t){t.value==e.selectValue&&(e.selectText=t.text)}),""==e.selectText&&n.each(e.optionlist,function(t){""==t.value&&(e.selectText=t.text)})},refreshSelect:function(){this.adaptNativeSelect(),this.refreshSelectValue()},getBottomDistance:function(){var e=this,t=e.$el.find(".newlook-dropdown-list-container"),i=t.height(),n=t.offset().top,c=jQuery(window).height(),l=jQuery(document).scrollTop();return c-(i+n-l)},__closeDropDownByOther:function(e){var t=this;setTimeout(function(){jQuery(".nano-pane.active").length||jQuery(e.target).hasClass("newlook-dropdown-content-container")||jQuery(e.target).parent().hasClass("newlook-dropdown-content-container")||jQuery(e.target).hasClass("newlook-dropdown-list")||jQuery(e.target).parent().hasClass("newlook-dropdown-list")||(t.ui.list.removeClass("open"),t.ui.container.removeClass("open"))},200)},__closeDropDown:function(e){e&&(this.ui.list.removeClass("open"),this.ui.container.removeClass("open"))}})},{"../util":2122,"./template.hbs":2099,backbone:8,"backbone.marionette":6,underscore:42}],2099:[function(e,t,i){t.exports='<div class="newlook-dropdown">\r\n    <div class="newlook-dropdown-content-container {{#if showPlaceholder}}newlook-dropdown-show-placeholder{{/if}}" >\r\n        <span value="{{selectValue}}">{{selectText}}</span>\r\n        <i class="icon-icon_chervonDown"></i>\r\n    </div>\r\n    <div class="newlook-dropdown-list-container">\r\n        <div class="nano">\r\n            <div class="nano-content">\r\n                <ul class="newlook-dropdown-list">\r\n                    {{#each optionlist}}\r\n                        <li {{#if selected}}class="active"{{/if}} val="{{value}}">{{text}}</li>\r\n                    {{/each}}\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],1401:[function(e,t,i){var n=e("elfjs"),c=e("../vertical-container/view");t.exports=n.Component("write-combo",{render:n.redactElement(e("./temp.html"),c),constructor:function(){this.preventValid=!1,this.dropdownView=!1},onInputBlur:function(e){e.stopImmediatePropagation(),this.preventValid||n.dispatchEvent(this,n.createEvent("blur",!1))},onDeltaMouse:function(){var e=this;e.preventValid=!0,setTimeout(function(){e.preventValid=!1})},onDeltaClick:function(e){this.dropdownView=!0,this.refs.input.focus()},onOptionClick:function(e){this.dropdownView=!1,n.dispatchEvent(this,n.createEvent("change",!0,e)),this.refs.input.value=e.text||"",this.refs.input.blur()},get options(){return this.props.options||[]},get placeholder(){return this.props.placeholder||""},get maxlength(){return this.props.maxlength},get valid(){return this.props.valid},get value(){return this.props.value},get name(){return this.props.name}})},{"../vertical-container/view":1399,"./temp.html":1400,elfjs:10}],1400:[function(e,t,i){t.exports='<div class="m4b-b1-field-value {{ valid || \'normal\' }}" onclose="dropdownView = false">\r\n    <label class="m4b-b1-field-shape">\r\n        <span e-if="!value">{{ placeholder }}</span>\r\n    </label>\r\n    <input class="m4b-b1-field-input" ref="input" type="text" onblur="onInputBlur(event);" maxlength="{{ maxlength }}" name="{{ name }}" cmd="keyboard-selection">\r\n    <label class="m4b-b1-field-delta" onmousedown="onDeltaMouse(event);" onclick="onDeltaClick(event);">\r\n        <span class="icon-icon_chervonDown"></span>\r\n    </label>\r\n    <div class="m4b-position-relative m4b-z-index-5">\r\n        <div class="m4b-b1-search-panel">\r\n            <div class="m4b-b1-search-panel-list" e-if="dropdownView" cmd="popupbox-attention">\r\n                <vertical-container ref="keyboard-selection">\r\n                    <div class="m4b-b1-search-panel-list-item" e-for="item in options" onclick="onOptionClick(item);">\r\n                        <span class="text">{{ item.text }}</span>\r\n                    </div>\r\n                </vertical-container>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],1383:[function(e,t,i){var n=e("elfjs");t.exports=n.Component("message-box-status",{render:n.redactElement(e("./temp.html"))})},{"./temp.html":1382,elfjs:10}],1382:[function(e,t,i){t.exports='<div class="m4b-message-box-status">\r\n    <div class="m4b-message-box-status-load">\r\n        <img width="150" src="/assets/img/card/Preloader3.2_RedIcon_300px.gif" alt="{{ \'form.loading\' | local }}">\r\n    </div>\r\n    <div class="m4b-message-box-status-text" innerHTML="{{ \'checkout.waiting_info\' | local }}"></div>\r\n</div>'},{}],1381:[function(e,t,i){var n=e("elfjs");t.exports=n.Component("message-box-secure",{render:n.redactElement(e("./temp.html")),onAffirmClick:function(){window.open(this.props.value.redirecturl,"_blank"),n.dispatchEvent(this,n.createEvent("close",!0,this.props.value))}})},{"./temp.html":1380,elfjs:10}],1380:[function(e,t,i){t.exports='<div class="m4b-message-box-remove">\r\n    <div class="m4b-message-box-remove-head">\r\n        {{ "booking.auth_title" | local }}\r\n    </div>\r\n    <div class="m4b-message-box-remove-body">\r\n        <div class="m4b-message-box-remove-text">\r\n            {{ "booking.auth_creditcard" | local }}\r\n        </div>\r\n        <div class="m4b-message-box-remove-tool">\r\n            <button class="m4b-message-box-remove-btn2" type="button" onclick="onAffirmClick(event);">\r\n                {{ "booking.continue_payment" | local }}\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'},{}],1377:[function(e,t,i){function n(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1).toUpperCase()}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var c=e("underscore"),l=e("elfjs"),a=e("../../../../checkout-2.0/02-main/02-pay/06-policy/view");Handlebars.registerHelper("local",function(e){var t=Array.prototype.slice.call(arguments);return new Handlebars.SafeString(i18n.t(e).replace(/\{(\d+)\}/g,function(e,i){return t[1+parseInt(i)]}))});var o=l.createClass({render:function(){return l.createElement("div",{ref:"container"})},constructor:function(){var e=this.props.roomlist;this.props.isModify?this.roomlist=e:this.roomlist=c.map(e,function(e){return{hotel:{name:e.hoteldetail.name},customize:{category:e.roomdetail.roomcategoryname},ratename:e.rateplandetail.name,pack:[{name:e.rateplandetail.name}],guaranteedesc:e.rateplandetail.guaranteeDesc,cancelpenalty:{PenaltyDescription:e.cancelpenalty.penaltydescription}}})},onInitial:function(){var e=this,t=e.roomlist;e.policyView=new a({el:e.refs.container,rootState:{getCartInfo:function(){return{entries:t}}}}).on("destroy",function(){l.dispatchEvent(e,l.createEvent("close",!0))}).render()},onDispose:function(){this.policyView&&(this.policyView.destroy(),this.policyView=null)}});t.exports=l.Component("lightbox-policy",{constructor:function(){this.viewKey=n()},render:function(){var e=this;return l.createElement(o,{onClose:function(){e.viewKey=n()},roomlist:this.props.roomlist,isModify:this.props.isModify,key:this.viewKey})}})},{"../../../../checkout-2.0/02-main/02-pay/06-policy/view":517,elfjs:10,underscore:42}],1286:[function(e,t,i){var n=e("elfjs"),c=e("../../m4b-booking-step4-guests/booking-member/form");t.exports=n.Component("booking-token",{
render:n.redactElement(e("./temp.html"),c),constructor:function(){this.attributes={securitycode:""},this.validation={securitycode:{required:!0}}},onDispose:function(){n.dispatchEvent(this,n.createEvent("dispose",!0,this.props.value))},onPayTokensClick:function(){n.dispatchEvent(this,n.createEvent("click",!0,this.props.value))},onPayTokensRemove:function(){n.dispatchEvent(this,n.createEvent("remove",!0,this.props.value))},validate:function(e){return this.refs.form.validate(e)},get value(){return this.props.value},get selected(){return this.props.selected},get validValue(){return this.refs.form?this.refs.form.validValue:{}}})},{"../../m4b-booking-step4-guests/booking-member/form":1250,"./temp.html":1285,elfjs:10}],1285:[function(e,t,i){t.exports='<div class="m4b-b6-section-lump{{ selected ? \' selected\' : \'\' }}">\r\n    <valid-form attributes="{{ attributes }}" validation="{{ validation }}" ref="form">\r\n        <div class="m4b-b6-section-lump-icon m4b-not-select" onclick="onPayTokensClick(event);">\r\n            <span class="icon m4b-b6-dropdown"></span>\r\n        </div>\r\n        <div class="m4b-b6-section-lump-head m4b-not-select" onclick="onPayTokensClick(event);">\r\n            <span class="icon icon-tokens" style="background-image:url(\'{{ value.CardIcon }}\');"></span>\r\n            <span class="text">{{ "checkout.pay_with_ending_with" | local value.CardTypes value.CardNum }}</span>\r\n        </div>\r\n        <div class="m4b-b6-section-lump-body">\r\n            <div class="m4b-b6-section-lump-remove">\r\n                <span class="m4b-not-select m4b-pointer" onclick="onPayTokensRemove(event);">\r\n                    {{ "scratchpad.remove" | local }}\r\n                </span>\r\n            </div>\r\n            <div class="m4b-b6-section-lump-void"></div>\r\n            <div class="m4b-b6-section-lump-name">\r\n                {{ "m4b.security_no" | local }}\r\n                <span class="code-prompt icon-icon_B008">\r\n                    <div class="m4b-b6-section-lump-prompt">\r\n                        <div class="m4b-b6-section-lump-prompt-container">\r\n                            <div class="m4b-b6-section-lump-prompt-head">\r\n                                {{ "checkout.security_code_tooltip_header" | local }}\r\n                            </div>\r\n                            <div class="m4b-b6-section-lump-prompt-item">\r\n                                <div class="m4b-b6-section-lump-prompt-text" innerHTML="{{ \'checkout.security_code_tooltip_visa\' | local }}"></div>\r\n                                <div class="m4b-b6-section-lump-prompt-card">\r\n                                    <img src="/assets/img/checkout/visa_card.svg" alt="">\r\n                                </div>\r\n                            </div>\r\n                            <div class="m4b-b6-section-lump-prompt-item">\r\n                                <div class="m4b-b6-section-lump-prompt-text">\r\n                                    {{ "checkout.security_code_tooltip_amex" | local }}\r\n                                </div>\r\n                                <div class="m4b-b6-section-lump-prompt-card">\r\n                                    <img src="/assets/img/checkout/amex_card.svg" alt="">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </span>\r\n            </div>\r\n            <div class="m4b-b6-section-lump-text">\r\n                <div class="m4b-b6-section-lump-tab1">\r\n                    <div class="m4b-b1-field-value {{ validValue.securitycode || \'normal\' }}">\r\n                        <label class="m4b-b1-field-shape">\r\n                            <span e-if="!attributes.securitycode">xxxx</span>\r\n                        </label>\r\n                        <input class="m4b-b1-field-input" type="text" maxlength="4" name="securitycode">\r\n                        <label class="m4b-b1-field-wrong"></label>\r\n                    </div>\r\n                    <div class="m4b-b1-field-missing m4b-normal">\r\n                        <span class="text">{{ "form_error.security_code_empty" | local }}</span>\r\n                    </div>\r\n                    <div class="m4b-b1-field-invalid m4b-normal">\r\n                        <span class="text">{{ "form_error.security_code_invalid" | local }}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </valid-form>\r\n</div>'},{}],1379:[function(e,t,i){var n=e("elfjs");t.exports=n.Component("message-box-remove",{render:n.redactElement(e("./temp.html")),onCancelClick:function(){n.dispatchEvent(this,n.createEvent("close",!0))},onAffirmClick:function(){n.dispatchEvent(this,n.createEvent("close",!0,this.props.value))},get hotelname(){return this.props.value.hoteldetail.name},get total(){return this.props.total}})},{"./temp.html":1378,elfjs:10}],1378:[function(e,t,i){t.exports='<div class="m4b-booking-addons" onclick="event.stopPropagation();" style="max-width: 650px;">\r\n    <div class="m4b-booking-addons-head" style="font-size: 18px; color: #363636;">{{ "checkout.remove_item_cart" | local }}</div>\r\n    <div class="m4b-message-box-remove-body" style="padding: 16px 26px;">\r\n        <div class="m4b-message-box-remove-text" style="font-size: 14px; line-height: 22px; color: #000;" innerHTML="{{ \'m4b.about_to_remove\' | local hotelname }} {{ \'m4b.undo_tip\' | local }} {{ total == 1 ? \'m4b.redirected_back\' : \'\' | local }}"></div>\r\n    </div>\r\n    <div class="m4b-booking-addons-bottom">\r\n        <hr class="m4b-line">\r\n        <div class="m4b-b1-block-justify-layer-3">\r\n            <button class="m4b-b1-btn-reset" type="button" onclick="onCancelClick();">{{ "checkout.close_and_return" | local }}</button>\r\n            <button class="m4b-b1-btn-query" type="button" onclick="onAffirmClick();">{{ "checkout.remove_item" | local }}</button>\r\n        </div>\r\n    </div>\r\n</div>'},{}],1269:[function(e,t,i){var n=e("elfjs");t.exports=n.Component("upgrade-cancel",{render:n.redactElement(e("../../m4b-booking-step4-guests/upgrade-cancel/temp.html")),onCancel:function(){n.dispatchEvent(this,n.createEvent("close",!0))},onChange:function(){n.dispatchEvent(this,n.createEvent("close",!0,this.props.value))}})},{"../../m4b-booking-step4-guests/upgrade-cancel/temp.html":1256,elfjs:10}],1274:[function(e,t,i){var n=e("underscore"),c=e("elfjs"),l=e("../../../widget/ui/rate-peoples-popup/view");t.exports=c.Component("room-item",{render:c.redactElement(e("./temp.html"),l),constructor:function(){if(this.viewInPoints=!1,this.ownroomtype=null,this.selected){for(var e=0;e<this.room.roomtypelist.length;e++)if(this.room.roomtypelist[e].bedtype===this.props.roomtypename&&this.hasMatchRate(this.room.roomtypelist[e])){this.ownroomtype=this.room.roomtypelist[e];break}}else for(var e=0;e<this.room.roomtypelist.length;e++)if(this.hasMatchRate(this.room.roomtypelist[e])){this.ownroomtype=this.room.roomtypelist[e];break}},onRoomTypeChanged:function(e){this.selected&&(this.ownroomtype=e,c.dispatchEvent(this,c.createEvent("change",!0,this.selection)))},onRoomRateChanged:function(){this.selected||c.dispatchEvent(this,c.createEvent("change",!0,this.selection))},hasMatchRate:function(e){for(var t=0;t<e.rateplanlist.length;t++)if(e.rateplanlist[t].rateCode===this.props.rateplancode)return!0;return!1},hasMaxocc:function(){return this.maxchildage&&this.ownroomtype?this.ownroomtype.totaloccupancy>0:void 0},hasAdultocc:function(){return this.maxchildage&&this.ownroomtype?this.ownroomtype.adultoccupancy>0:!1},hasChildocc:function(){return this.maxchildage&&this.ownroomtype?this.ownroomtype.childrenoccupancy>0:!1},getMaxocc:function(){return this.hasAdultocc()?this.ownroomtype.totaloccupancy:0},getAdultocc:function(){return this.hasAdultocc()?this.ownroomtype.adultoccupancy:0},getChildocc:function(){return this.hasChildocc()?this.ownroomtype.childrenoccupancy:0},getAdultRange:function(){return n.range(this.getAdultocc())},getChildRange:function(){return n.range(this.getChildocc())},getSpreadContent:function(e){var t=null,i=this.selection.roomprice;if(e.bedtype!=this.ownroomtype.bedtype)for(var n=0;n<e.rateplanlist.length;n++)if(e.rateplanlist[n].rateCode===this.props.rateplancode){t=e.rateplanlist[n].roomprice;break}if(t&&i)if(this.viewInPoints){if(itemprice=t.showwithtax?t.finalprice.costpoints.avgaftertax:t.finalprice.costpoints.avgbeforetax,heroprice=i.showwithtax?i.finalprice.costpoints.avgaftertax:i.finalprice.costpoints.avgbeforetax,itemprice>0&&heroprice>0&&itemprice!=heroprice)return" ("+(itemprice>heroprice?"+":"-")+accounting.formatNumber(Math.abs(itemprice-heroprice))+")"}else if(itemprice=t.showwithtax?t.finalprice.avgprice.aftertax:t.finalprice.avgprice.beforetax,heroprice=i.showwithtax?i.finalprice.avgprice.aftertax:i.finalprice.avgprice.beforetax,itemprice>0&&heroprice>0&&itemprice!=heroprice)return" ("+(itemprice>heroprice?"+":"-")+t.finalprice.total.currencycode+" "+accounting.formatNumber(Math.abs(itemprice-heroprice),2)+")";return""},get room(){return this.props.room},get selected(){return this.props.selected},get maxchildage(){return this.props.maxchildage},get selection(){for(var e=0;e<this.ownroomtype.rateplanlist.length;e++)if(this.ownroomtype.rateplanlist[e].rateCode===this.props.rateplancode)return this.ownroomtype.rateplanlist[e]},get mediaurl(){return this.room.imagelist&&this.room.imagelist[0]&&this.room.imagelist[0].mediaurl}})},{"../../../widget/ui/rate-peoples-popup/view":1395,"./temp.html":1273,elfjs:10,underscore:42}],1273:[function(e,t,i){t.exports='<div class="m4b-modify-room-container{{ selected ? \' active\' : \'\' }}">\r\n    <div class="m4b-modify-shadow"></div>\r\n    <div class="m4b-modify-room-image" style="background-image: url(\'{{ mediaurl }}\')"></div>\r\n    <div class="m4b-modify-room-content">\r\n        <h3 class="m4b-modify-room-header">{{ room.roomcategoryname }}</h3>\r\n        <div class="m4b-modify-room-limit" e-if="room.badgetitle">{{ room.badgetitle }}</div>\r\n        <div class="m4b-modify-room-size">\r\n            <span class="icon-icon_I016"></span>\r\n            <span innerHTML="{{ room.roomsize }}"></span>\r\n        </div>\r\n        <div class="m4b-b3-section-body-item-entry-item" e-if="hasAdultocc()">\r\n            <span class="icon icon-icon_J013" e-for="i in getAdultRange()"></span>\r\n            <span class="text">\r\n                {{ getAdultocc() == 1 ? "booking.adult" : "booking.adults" | local }}\r\n            </span>\r\n            <rate-peoples-popup\r\n                maxocc="{{ getMaxocc() }}"\r\n                adultocc="{{ getAdultocc() }}"\r\n                childocc="{{ getChildocc() }}"\r\n                maxchildage="{{ maxchildage }}"></rate-peoples-popup>\r\n        </div>\r\n        <div class="m4b-b3-section-body-item-entry-item" e-if="hasChildocc()">\r\n            <span class="icon icon-icon_J012" e-for="i in getChildRange()"></span>\r\n            <span class="text">\r\n                {{ getChildocc() == 1 ? "booking.child" : "booking.children" | local }}\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class="m4b-modify-room-bed-type">\r\n        <div class="m4b-modify-room-bed-type-header">\r\n            <span class="icon icon-icon_R018"></span>\r\n            <span>{{ "m4b.bed_type" | local }}</span>\r\n        </div>\r\n        <div class="m4b-modify-room-bed-type-choose-container">\r\n            <div class="m4b-modify-room-bed-type-choose" e-for="item in room.roomtypelist" e-if="hasMatchRate(item)" onclick="onRoomTypeChanged(item);">\r\n                <div class="m4b-check-radio">\r\n                    <span class="m4b-check-radio-item{{ ownroomtype.bedtype == item.bedtype ? \' checked\' : \'\' }}{{ selected ? \'\' : \' disabled\' }}"></span>\r\n                </div>\r\n                <span>{{ item.bedtype + getSpreadContent(item) }}</span>\r\n            </div>\r\n        </div>\r\n        <div class="m4b-b3-section-body-item-entry-item">\r\n            <span class="icon amenitie {{ k.fonticon }}" e-for="k in room.amenitielist.slice(0, 6)">\r\n                <div class="m4b-b3-amenitie-tip">\r\n                    <div class="m4b-b3-amenitie-tip-text">{{ k.name }}</div>\r\n                </div>\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class="m4b-modify-price-block" e-if="selection.roomprice">\r\n        <p class="m4b-modify-price-num">\r\n            {{ selection.roomprice.finalprice.total.currencycode }}\r\n            {{ selection.roomprice.showwithtax ? selection.roomprice.finalprice.avgprice.aftertax : selection.roomprice.finalprice.avgprice.beforetax | price-format }}\r\n        </p>\r\n        <p class="m4b-modify-price-caption2">/{{ "general.avg_night" | local }}</p>\r\n        <div class="m4b-check-radio" onclick="onRoomRateChanged(event);">\r\n            <span class="m4b-check-radio-item{{ selected ? \' checked\' : \'\' }}"></span>\r\n        </div>\r\n    </div>\r\n</div>'},{}],1256:[function(e,t,i){t.exports='<div class="m4b-b3-modify-rooms">\r\n    <div class="m4b-b3-modify-rooms-head">{{ "m4b.loss_of_preferences" | local }}</div>\r\n    <div class="m4b-b3-modify-rooms-text">\r\n        {{ "m4b.loss_of_preferences_desc" | local }}\r\n    </div>\r\n    <div class="m4b-booking-addons-bottom">\r\n        <hr class="m4b-line">\r\n        <div class="m4b-b1-block-justify-layer-3">\r\n            <button class="m4b-b1-btn-reset" type="button" onclick="onCancel();">{{ "Property.cancel" | local }}</button>\r\n            <button class="m4b-b1-btn-query" type="button" onclick="onChange();">{{ "m4b.proceed" | local }}</button>\r\n        </div>\r\n    </div>\r\n</div>'},{}],1254:[function(e,t,i){t.exports='<div class="m4b-booking-addons" onclick="event.stopPropagation();">\r\n    <div class="m4b-booking-addons-head" style="font-size: 18px; line-height: 22px; color: #363636;">{{ "m4b.room_upgrade_voucher_applied" | local }}</div>\r\n    <vertical-container class="m4b-booking-member-scroll">\r\n        <div class="m4b-upgrade-head">\r\n            <span e-if="!isgeneralupgrade" innerHTML="{{ \'m4b.upgrade_different_types_of_rooms\' | local origintype.bedtype targettype.bedtype }}"></span>\r\n            <span e-if="rebuildpriceinfo == 3" innerHTML="{{ \'m4b.upgrade_number_of_rooms_3\' | local rebuildpricedays targetroom.roomcategoryname }}"></span>\r\n            <span e-if="rebuildpriceinfo == 2" innerHTML="{{ \'m4b.upgrade_number_of_rooms_2\' | local }}"></span>\r\n            <span e-if="rebuildpriceinfo == 1" innerHTML="{{ \'m4b.upgrade_number_of_rooms_1\' | local }}"></span>\r\n        </div>\r\n        <div class="m4b-upgrade-body">\r\n            <div class="m4b-upgrade-body-image {{ image.image_anchor }}" style="background-image: url(\'{{ image.mediaurl }}\');">\r\n                <div class="m4b-upgrade-body-tips">\r\n                    <span class="icon icon-icon_J015"></span>\r\n                    <span class="text">{{ "booking.upgraded" | local }}</span>\r\n                </div>\r\n            </div>\r\n            <div class="m4b-upgrade-body-value">\r\n                <div class="m4b-upgrade-body-name">{{ targetroom.roomcategoryname }}</div>\r\n                <div class="m4b-upgrade-body-type">\r\n                    <span class="icon {{ targettype.bedtypeicon }}"></span>\r\n                    <span class="text">{{ targettype.bedtype }}</span>\r\n                    <span class="tail" e-if="!isgeneralupgrade">({{ "m4b.upgrade_bedtype_is_unavailable" | local origintype.bedtype }})</span>\r\n                </div>\r\n                <div class="m4b-upgrade-body-text">\r\n                    {{ "m4b.upgrade_take_advantage" | local }}\r\n                </div>\r\n                <div class="m4b-upgrade-body-rate" e-if="rebuildpriceinfo != 3">\r\n                    <div class="m4b-upgrade-body-rate-item">\r\n                        <div class="m4b-upgrade-body-numb" e-if="rebuildpriceinfo == 2">\r\n                            {{ "m4b.upgrade_nights_2" | local days }}\r\n                        </div>\r\n                        <div class="m4b-upgrade-body-numb" e-if="rebuildpriceinfo == 1">\r\n                            {{ "m4b.upgrade_nights_1" | local days }}\r\n                        </div>\r\n                    </div>\r\n                    <div class="m4b-upgrade-body-rate-item">\r\n                        <div class="m4b-upgrade-body-rate-item-deuce">\r\n                            <div class="m4b-upgrade-body-cash old">{{ currency }} {{ originprice | price-format }}</div>\r\n                            <div class="m4b-upgrade-body-unit old">{{ rebuildpriceinfo != 1 ? "m4b.avg_per_night_big" : "general.avg_night_big" | local }}</div>\r\n                        </div>\r\n                        <div class="m4b-upgrade-body-rate-item-deuce">\r\n                            <div class="m4b-upgrade-body-cash red">{{ currency }} {{ targetprice | price-format }}</div>\r\n                            <div class="m4b-upgrade-body-unit raw">{{ rebuildpriceinfo != 1 ? "m4b.avg_per_night_big" : "general.avg_night_big" | local }}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="m4b-upgrade-body-rate separate" e-if="rebuildpriceinfo == 3">\r\n                    <div class="m4b-upgrade-body-rate-item">\r\n                        <div class="m4b-upgrade-body-rate-item-deuce">\r\n                            <div class="m4b-upgrade-body-numb">\r\n                                {{ "m4b.upgrade_nights_3" | local rebuildpricedays }}\r\n                            </div>\r\n                        </div>\r\n                        <div class="m4b-upgrade-body-rate-item-deuce">\r\n                            <div class="m4b-upgrade-body-numb">\r\n                                {{ surplusone ? "m4b.upgrade_remaining_night" : "m4b.upgrade_remaining_nights" | local }}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="m4b-upgrade-body-rate-item">\r\n                        <div class="m4b-upgrade-body-rate-item-deuce">\r\n                            <div class="m4b-upgrade-body-cash old">{{ currency }} {{ originprice | price-format }}</div>\r\n                            <div class="m4b-upgrade-body-unit old">{{ "m4b.avg_per_night_big" | local }}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="m4b-upgrade-body-rate-item">\r\n                        <div class="m4b-upgrade-body-rate-item-deuce">\r\n                            <div class="m4b-upgrade-body-cash red">{{ currency }} {{ targetprice | price-format }}</div>\r\n                            <div class="m4b-upgrade-body-unit raw">{{ "m4b.avg_per_night_big" | local }}</div>\r\n                        </div>\r\n                        <div class="m4b-upgrade-body-rate-item-deuce">\r\n                            <div class="m4b-upgrade-body-cash raw">{{ currency }} {{ leavedprice | price-format }}</div>\r\n                            <div class="m4b-upgrade-body-unit raw">{{ "m4b.avg_per_night_big" | local }}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </vertical-container>\r\n    <div class="m4b-booking-addons-bottom">\r\n        <hr class="m4b-line">\r\n        <div class="m4b-b1-block-justify-layer-3">\r\n            <button class="m4b-b1-btn-reset" type="button" onclick="onCancelClick();">{{ "Property.cancel" | local }}</button>\r\n            <button class="m4b-b1-btn-query" type="button" onclick="onChangeClick();">{{ "general.confirm" | local }}</button>\r\n        </div>\r\n    </div>\r\n</div>'},{}],1250:[function(e,t,i){var n=e("elfjs"),c=e("backbone-validation");t.exports=n.Component("valid-form",{constructor:function(){this.validValue={};for(var e in this.props.attributes)this.validValue[e]=null},render:function(){return n.createElement("form",{ref:"form"},this.props.children)},onInitial:function(){var e=this.props.attributes;for(var t in e){var i=this.refs.form.elements[t];i&&(n.attachEvent(i,"input",this),n.attachEvent(i,"blur",this),i.value=e[t])}},onDispose:function(){var e=this.props.attributes;for(var t in e){var i=this.refs.form.elements[t];i&&(n.detachEvent(i,"input",this),n.detachEvent(i,"blur",this))}},handleEvent:function(e){var t=e.target,i=t.name;"input"===e.type&&(this.props.attributes[i]=t.value,this.validValue[i]=null),"blur"===e.type&&this.validate(i)},validate:function(e){var t=c.mixin.validate.call({attributes:this.props.attributes,validation:this.props.validation,trigger:function(){}})||{};if(e&&("string"==typeof e&&(e=[e]),Array.isArray(e))){for(var i=0;i<e.length;i++){var n=e[i],l=this.refs.form.elements[n];l&&(this.validValue[n]=t[n]?l.value?"invalid":"missing":"passing")}return this.validValue}var a=this.props.attributes;for(var n in a){var l=this.refs.form.elements[n];l&&(this.validValue[n]=t[n]?l.value?"invalid":"missing":"passing")}return this.validValue}})},{"backbone-validation":3,elfjs:10}],1244:[function(e,t,i){t.exports='<div class="m4b-booking-addons" onclick="event.stopPropagation();">\r\n    <div class="m4b-booking-addons-head">{{ "m4b.view_all_available_rates" | local }}</div>\r\n    <vertical-container class="m4b-booking-member-scroll">\r\n        <div class="m4b-booking-addons-body">\r\n            <div class="m4b-booking-addons-item{{ rateEquals(item, selection) ? \' selected\' : \'\' }}" e-for="item in allrate" key="{{ item.rateCode }}">\r\n                <div class="m4b-b4-modify-wrapper m4b-nowrap">\r\n                    <div class="m4b-b3-section-body-item-lists-desc m4b-normal">\r\n                        <h3 class="m4b-b3-section-body-item-lists-desc-name">{{ item.name }}</h3>\r\n                        <div class="m4b-b3-section-body-item-lists-desc-save">\r\n                            <span class="text blue">\r\n                                {{ item.paymenttype ? "m4b.pay_now_and_save" : "m4b.book_now_and_pay_later" | local }}\r\n                            </span>\r\n                        </div>\r\n                        <div class="m4b-b3-section-body-item-lists-desc-best">\r\n                            {{ item.desc }}\r\n                        </div>\r\n                        <div class="m4b-b3-section-body-item-lists-desc-html" innerHTML="{{ item.tipshort }}"></div>\r\n                        <div class="m4b-b3-section-body-item-lists-desc-view">\r\n                            <rate-details-popup\r\n                                navheight="120"\r\n                                desc="{{ item.desc }}"\r\n                                shortpolicydesc="{{ item.tipshort }}"\r\n                                penaltydescription="{{ item.cancelpenalty.penaltydescription }}"\r\n                                guaranteeDesc="{{ item.guaranteeDesc }}"\r\n                                modifypolicy="{{ item.modifypolicy }}">\r\n                                {{ "m4b.view_rate_details" | local }}\r\n                            </rate-details-popup>\r\n                        </div>\r\n                    </div>\r\n                    <div class="m4b-b3-section-body-item-lists-rate m4b-normal">\r\n                        <div class="m4b-b2-section-body-item-value-rate-save" e-if="item.roomprice">\r\n                            <rate-loyalty-popup\r\n                                navheight="70"\r\n                                direction="bottom"\r\n                                loyalty="{{ loyalty }}">\r\n                                <span class="text" e-if="viewInPoints == !1">\r\n                                    {{ "booking.you_ve_saved" | local }}\r\n                                    {{ item.roomprice.finalprice.total.currencycode }}\r\n                                    {{ item.roomprice.showwithtax ? item.roomprice.savedprice.avgaftertax : item.roomprice.savedprice.avgbeforetax | price-format }}\r\n                                </span>\r\n                                <span class="text" e-if="viewInPoints == !0">\r\n                                    {{ "booking.you_ve_saved" | local }}\r\n                                    {{ item.roomprice.showwithtax ? item.roomprice.savedpoints.avgaftertax : item.roomprice.savedpoints.avgbeforetax | num-format }}\r\n                                    {{ "checkout.points" | local }}\r\n                                </span>\r\n                            </rate-loyalty-popup>\r\n                        </div>\r\n                        <div class="m4b-b3-section-body-item-value-rate-rate">\r\n                            <span class="price" e-if="viewInPoints == !1">\r\n                                {{ item.roomprice.finalprice.total.currencycode }}\r\n                                {{ item.roomprice.showwithtax ? item.roomprice.finalprice.avgprice.aftertax : item.roomprice.finalprice.avgprice.beforetax | price-format }}\r\n                            </span>\r\n                            <span class="price" e-if="viewInPoints == !0">\r\n                                {{ item.roomprice.showwithtax ? item.roomprice.finalprice.costpoints.avgaftertax : item.roomprice.finalprice.costpoints.avgbeforetax | num-format }}\r\n                            </span>\r\n                            <span class="radio">\r\n                                <div class="m4b-b4-section-rate-item-text-type m4b-not-select{{ rateEquals(item, selection) ? \' selected\' : \'\' }}" onclick="onRatePlanChanged(item);">\r\n                                    <span class="icon"></span>\r\n                                </div>\r\n                            </span>\r\n                        </div>\r\n                        <div class="m4b-b3-section-body-item-value-rate-unit">\r\n                            {{ "general.avg_night" | local }}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </vertical-container>\r\n    <div class="m4b-booking-addons-bottom">\r\n        <hr class="m4b-line">\r\n        <div class="m4b-b1-block-justify-layer-3">\r\n            <button class="m4b-b1-btn-reset" type="button" onclick="onCancelClick();">{{ "general.cancel" | local }}</button>\r\n            <button class="m4b-b1-btn-query" type="button" onclick="onChangeClick();">{{ "checkout.save" | local }}</button>\r\n        </div>\r\n    </div>\r\n</div>'},{}],1242:[function(e,t,i){t.exports='<div class="m4b-booking-addons" onclick="event.stopPropagation();">\r\n    <div class="m4b-booking-addons-head">{{ "m4b.add_more_value" | local }}</div>\r\n    <vertical-container class="m4b-booking-member-scroll" onresize="event.currentTarget.refresh();">\r\n        <div class="m4b-booking-addons-body">\r\n            <div class="m4b-booking-addons-item" e-for="item in roomservicelist">\r\n                <div class="m4b-booking-addons-body-item">\r\n                    <div class="m4b-booking-addons-body-item-image" style="background-image: url(\'{{ item.img }}\')"></div>\r\n                    <div class="m4b-booking-addons-body-item-value">\r\n                        <div class="m4b-booking-addons-body-item-title">\r\n                            <div class="m4b-booking-addons-body-item-name">{{ item.inventorycode }}</div>\r\n                            <div class="m4b-booking-addons-body-item-desc">\r\n                                <read-more value="{{ item.desc }}"></read-more>\r\n                            </div>\r\n                        </div>\r\n                        <div class="m4b-booking-addons-body-item-price">\r\n                            <div class="m4b-b4-section-rate-item-text-cash">+{{ item.ratecurrency }} {{ item.avgdisplayrate | price-format }}</div>\r\n                            <div class="m4b-b4-section-rate-item-text-unit" style="font-size: 12px;">{{ item.pricingtype }}</div>\r\n                            <div class="m4b-b4-section-rate-item-text-numb">\r\n                                <counter-selector min="{{ 0 }}" max="{{ item.maxquantity > 0 ? item.maxquantity : 99 }}" value="{{ roomservicenums[item.key] || 0 }}"\r\n                                    single="{{ item.maxquantity == 1 }}" onchange="onQuantityChanged(event, item);">\r\n                                    {{ item.maxquantity == 1 ? "booking.add_to_booking" : "" | local }}\r\n                                </counter-selector>\r\n                            </div>\r\n                            <div class="m4b-booking-addons-body-item-tips" e-if="roomservicetips[item.key]">\r\n                                <span class="icon icon-icon_I009"></span>\r\n                                <span class="text">{{ "booking.updated" | local }}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="m4b-booking-addons-body-item-empty" e-if="roomservicelist.length == 0">{{ "booking.no_stay_option" | local }}</div>\r\n        </div>\r\n    </vertical-container>\r\n    <div class="m4b-booking-addons-bottom">\r\n        <hr class="m4b-line">\r\n        <div class="m4b-b1-block-justify-layer-3">\r\n            <button class="m4b-b1-btn-reset" type="button" onclick="onCancelClick();">{{ "general.cancel" | local }}</button>\r\n            <button class="m4b-b1-btn-query" type="button" onclick="onChangeClick();" e-if="roomservicelist.length > 0">{{ "m4b.add" | local }}</button>\r\n        </div>\r\n    </div>\r\n</div>'},{}],1398:[function(e,t,i){function n(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1).toUpperCase()}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var c=e("elfjs"),l=e("../hotel-gallery/dynamic-swiper/view"),a=e("../vertical-container/view"),o=e("../read-more/view");t.exports=c.Component("room-gallery",{render:c.redactElement(e("./temp.html"),l,a,o),constructor:function(){this.list=this.props.list||[],this.hero=this.props.hero||this.list[0],this.occupancy=this.props.occupancy||!1,this.heroIndex=Math.max(0,this.list.indexOf(this.hero)),this.maxLength=this.list.length,this.bodyWhell=null,this.selection=null,this.swiperKey=n(),this.folderKey=n()},onInitial:function(){var e=document.body;this.bodyWhell="auto",e.style.overflow="hidden"},onDispose:function(){document.body.style.overflow=this.bodyWhell},onSwipeNext:function(){this.refs.swiper.swipeNext()},onSwipePrev:function(){this.refs.swiper.swipePrev()},onPrevButtonClick:function(){this.heroIndex>0?this.heroIndex--:this.heroIndex=this.maxLength-1,this.hero=this.list[this.heroIndex],this.swiperKey=n(),this.folderKey=n()},onNextButtonClick:function(){this.heroIndex<this.maxLength-1?this.heroIndex++:this.heroIndex=0,this.hero=this.list[this.heroIndex],this.swiperKey=n(),this.folderKey=n()},onRoomGallerySelected:function(){c.dispatchEvent(this,c.createEvent("check",!0,this.hero))},onCloseButtonClick:function(){c.dispatchEvent(this,c.createEvent("close",!0))},get activeIndex(){return this.refs.swiper&&this.refs.swiper.props.filter==this.hero?this.refs.swiper.activeIndex:0},get viewInPoints(){return this.props.viewInPoints},get roomprice(){if(this.hero&&this.hero.heroroomtype){if(this.hero.heroroomtype.rateplan)return this.hero.heroroomtype.rateplan.roomprice;if(this.hero.heroroomtype.rateplanlist&&this.hero.heroroomtype.rateplanlist[0])return this.hero.heroroomtype.rateplanlist[0].roomprice}return null},get hidebutton(){return!!this.props.hidebutton},get disabled(){return this.maxLength<=1},get currentImageTitle(){var e=this.activeIndex;return this.hero&&this.hero.imagelist&&this.hero.imagelist[e]?this.hero.imagelist[e].alt:""}})},{"../hotel-gallery/dynamic-swiper/view":1374,"../read-more/view":1396,
"../vertical-container/view":1399,"./temp.html":1397,elfjs:10}],1397:[function(e,t,i){t.exports='<div class="m4b-hotel-gallery" onclick="event.stopPropagation();">\r\n    <div class="m4b-hotel-gallery-close" onclick="onCloseButtonClick(event);">\r\n        <span class="icon-icon_B017"></span>\r\n    </div>\r\n    <div class="m4b-hotel-gallery-image m4b-not-select">\r\n        <div class="m4b-hotel-gallery-image-switch">\r\n            <div class="m4b-hotel-gallery-image-switch-prev icon-icon_chervonLeft" onclick="onSwipePrev();"></div>\r\n            <div class="m4b-hotel-gallery-image-switch-next icon-icon_chervonRight" onclick="onSwipeNext();"></div>\r\n        </div>\r\n        <div class="m4b-hotel-gallery-image-paging">\r\n            {{ activeIndex + 1 }}/{{ hero.imagelist.length }} - {{ currentImageTitle }}\r\n        </div>\r\n        <div class="m4b-hotel-gallery-image-swiper">\r\n            <dynamic-swiper ref="swiper" key="{{ swiperKey }}" e-if="hero.imagelist.length > 0" filter="{{ hero }}">\r\n                <div class="swiper-slide" e-for="item in hero.imagelist">\r\n                    <div class="m4b-hotel-gallery-image-images" style="background-image: url(\'{{ item.mediaurl }}\');"></div>\r\n                </div>\r\n            </dynamic-swiper>\r\n        </div>\r\n    </div>\r\n    <div class="m4b-hotel-gallery-value">\r\n        <div class="m4b-room-gallery-value-detail{{ hidebutton ? \' fullscreen\' : \'\' }}">\r\n            <vertical-container onresize="event.currentTarget.refresh();">\r\n                <h3 class="m4b-hotel-gallery-value-detail-name">{{ hero.roomcategoryname }}</h3>\r\n                <div class="m4b-hotel-gallery-value-detail-item">\r\n                    <span class="icon icon-icon_I016"></span>\r\n                    <span class="text" innerHTML="{{ hero.roomsize }}"></span>\r\n                </div>\r\n                <div class="m4b-hotel-gallery-value-detail-item" e-if="occupancy && (occupancy.hasAdultocc || occupancy.hasChildocc)">\r\n                    <div class="m4b-hotel-gallery-value-detail-roomtype"  e-if="occupancy.hasAdultocc">\r\n                        <span class="icon icon-icon_J013" e-for="i in occupancy.adultRange"></span>\r\n                        <span class="text">{{ occupancy.adultocc == 1 ? "booking.adult" : "booking.adults" | local }}</span>\r\n                    </div>\r\n                    <div class="m4b-hotel-gallery-value-detail-roomtype"  e-if="occupancy.hasChildocc">\r\n                        <span class="icon icon-icon_J012" e-for="i in occupancy.childRange"></span>\r\n                        <span class="text">{{ occupancy.childocc == 1 ? "booking.child" : "booking.children" | local }}</span>\r\n                    </div>\r\n                </div>\r\n                <div class="m4b-hotel-gallery-value-detail-item">\r\n                    <div class="m4b-hotel-gallery-value-detail-roomtype" e-for="item in hero.roomtypelist">\r\n                        <span class="icon {{ item.bedtypeicon }}"></span>\r\n                        <span class="text">{{ item.bedtype }}</span>\r\n                    </div>\r\n                </div>\r\n                <div class="m4b-hotel-gallery-value-detail-more">\r\n                    <read-more key="{{ folderKey }}" value="{{ hero.longdecription }}"></read-more>\r\n                </div>\r\n                <hr class="m4b-hotel-gallery-value-detail-line">\r\n                <div class="m4b-hotel-gallery-value-detail-text">\r\n                    {{ "Property.amenities" }}\r\n                </div>\r\n                <div class="m4b-hotel-gallery-value-detail-list">\r\n                    <div class="m4b-hotel-gallery-value-detail-list-item" e-for="item in hero.amenitielist" e-if="item.fonticon">\r\n                        <span class="icon {{ item.fonticon }}"></span>\r\n                        <span class="text">{{ item.name }}</span>\r\n                    </div>\r\n                </div>\r\n            </vertical-container>\r\n        </div>\r\n        <div class="m4b-room-gallery-value-bottom" e-if="roomprice">\r\n            <div class="m4b-room-gallery-value-bottom-item">\r\n                <div class="m4b-room-gallery-value-bottom-save">\r\n                    <span e-if="viewInPoints == !1">\r\n                        {{ "booking.you_ve_saved" | local }}\r\n                        {{ roomprice.finalprice.total.currencycode }}\r\n                        {{ roomprice.showwithtax ? roomprice.savedprice.avgaftertax : roomprice.savedprice.avgbeforetax | price-format }}\r\n                    </span>\r\n                    <span e-if="viewInPoints == !0">\r\n                        {{ "booking.you_ve_saved" | local }}\r\n                        {{ roomprice.showwithtax ? roomprice.savedpoints.avgaftertax : roomprice.savedpoints.avgbeforetax | num-format }}\r\n                        {{ "checkout.points" | local }}\r\n                    </span>\r\n                </div>\r\n                <div class="m4b-room-gallery-value-bottom-rate">\r\n                    <span e-if="viewInPoints == !1">\r\n                        {{ roomprice.finalprice.total.currencycode }}\r\n                        {{ roomprice.showwithtax ? roomprice.finalprice.avgprice.aftertax : roomprice.finalprice.avgprice.beforetax | price-format }}\r\n                    </span>\r\n                    <span e-if="viewInPoints == !0">\r\n                        {{ roomprice.showwithtax ? roomprice.finalprice.costpoints.avgaftertax : roomprice.finalprice.costpoints.avgbeforetax | num-format }}\r\n                    </span>\r\n                </div>\r\n                <div class="m4b-room-gallery-value-bottom-unit">{{ "Property.night" | local }}</div>\r\n            </div>\r\n            <div class="m4b-room-gallery-value-bottom-item">\r\n                <button class="m4b-hotel-gallery-value-bottom-btn" type="button" onclick="onRoomGallerySelected();">{{ "m4b.select_room" | local }}</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="m4b-hotel-gallery-tools">\r\n        <button class="m4b-hotel-gallery-tools-prev" type="button" disabled="{{ disabled }}" onclick="onPrevButtonClick(event);">\r\n            <span class="icon-icon_chervonLeft"></span>\r\n        </button>\r\n        <button class="m4b-hotel-gallery-tools-next" type="button" disabled="{{ disabled }}" onclick="onNextButtonClick(event);">\r\n            <span class="icon-icon_chervonRight"></span>\r\n        </button>\r\n        <div class="m4b-hotel-gallery-tools-text">\r\n            <div class="m4b-hotel-gallery-tools-text-prev">{{ "Property.previous_room" | local }}</div>\r\n            <div class="m4b-hotel-gallery-tools-text-next">{{ "Property.next_room" | local }}</div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],1395:[function(e,t,i){function n(){return"ontouchend"in window}function c(e){return"touchend"===e.type&&e.currentTarget!==document?(e.stopPropagation(),!0):!n()}var l=e("elfjs"),a=e("./peoples-popup/view");t.exports=l.Component("rate-peoples-popup",{render:l.redactElement(e("./temp.html")),constructor:function(){this.carrier=document.createElement("div"),this.element=l.createElement(a),this.example=null,this.timeout=null},onInitial:function(){document.body.appendChild(this.carrier),n()?(l.attachEvent(this.refs.wrapper,"touchend",this),l.attachEvent(this.carrier,"touchend",this),l.attachEvent(document,"touchend",this)):(l.attachEvent(this.carrier,"mouseenter",this),l.attachEvent(this.carrier,"mouseleave",this),l.attachEvent(this.refs.wrapper,"mouseenter",this),l.attachEvent(this.refs.wrapper,"mouseleave",this))},onDispose:function(){n()?(l.detachEvent(this.refs.wrapper,"touchend",this),l.detachEvent(this.carrier,"touchend",this),l.detachEvent(document,"touchend",this)):(l.detachEvent(this.refs.wrapper,"mouseenter",this),l.detachEvent(this.refs.wrapper,"mouseleave",this),l.detachEvent(this.carrier,"mouseenter",this),l.detachEvent(this.carrier,"mouseleave",this)),clearTimeout(this.timeout),this.example&&(this.example.dispose(),this.example=null),this.carrier.parentNode&&this.carrier.parentNode.removeChild(this.carrier)},handleEvent:function(e){var t=this;if(clearTimeout(t.timeout),"mouseenter"===e.type||c(e)){var i=jQuery(t.refs.wrapper),n=i.offset();t.element.props={maxocc:t.props.maxocc||0,adultocc:t.props.adultocc||0,childocc:t.props.childocc||0,maxchildage:t.props.maxchildage||11,direction:t.props.direction||"right",navheight:parseInt(t.props.navheight)||0,rectangle:{top:n.top,left:n.left,width:i.prop("clientWidth"),height:i.prop("clientHeight")}},t.example?t.example.forceUpdate():t.example=l.render(t.element,t.carrier,!1)}"mouseleave"!==e.type&&c(e)||(t.timeout=setTimeout(function(){t.example&&(t.example.dispose(),t.example=null)},100))}})},{"./peoples-popup/view":1393,"./temp.html":1394,elfjs:10}],1394:[function(e,t,i){t.exports='<span class="icon icon-icon_I011" ref="wrapper"></span>'},{}],1393:[function(e,t,i){function n(){return"rtl"===document.documentElement.dir}var c=e("underscore"),l=e("elfjs");t.exports=l.createClass({render:l.redactElement(e("./temp.html")),onInitial:function(){var e=0,t=0,i=0,c=0,l=0,a=jQuery(window),o=jQuery(this.refs.popup),s=this.rectangle,r=a.width(),g=a.height(),d=a.scrollTop(),I=a.scrollLeft(),b=o.prop("clientWidth"),C=o.prop("clientHeight"),u=s.width,m=s.height,p=s.top,h=s.left,G="top"===this.direction,A="left"===this.direction,y="right"===this.direction,Z="bottom"===this.direction;G&&(t=p-C,t<d+this.navheight&&(i=p+m,d+g-C>=i&&(o.removeClass("top"),o.addClass("bottom"),t=i))),Z&&(t=p+m,t+C>d+g&&(i=p-C,i>=d+this.navheight&&(o.removeClass("bottom"),o.addClass("top"),t=i))),(G||Z)&&(e=h+(u-b)/2,e+b>I+r&&(c=I+r-b-e),I>e&&(c=I-e)),(A||y)&&(e=0===(A^n())?h+u:h-b,t=p-(C-m)/2,t+C>d+g&&(l=Math.max(d+g-C-t,7-C/2)),t<d+this.navheight&&(l=Math.min(d+this.navheight-t,C/2-7))),this.refs.popup.style.cssText=["left: "+e+"px;","top: "+t+"px;"].join(" "),this.refs.inner.style.cssText=["-webkit-transform: translate("+c+"px, "+l+"px);","-moz-transform: translate("+c+"px, "+l+"px);","-ms-transform: translate("+c+"px, "+l+"px);","-o-transform: translate("+c+"px, "+l+"px);","transform: translate("+c+"px, "+l+"px);"].join(" ")},get adultRange(){return c.range(this.adultocc)},get childRange(){return c.range(this.childocc)},get maxchildage(){return this.props.maxchildage},get adultocc(){return this.props.adultocc},get childocc(){return this.props.childocc},get maxocc(){return this.props.maxocc},get direction(){return this.props.direction},get rectangle(){return this.props.rectangle},get navheight(){return this.props.navheight}})},{"./temp.html":1392,elfjs:10,underscore:42}],1392:[function(e,t,i){t.exports='<div class="m4b-rate-details-popup peoples {{ direction }}" ref="popup">\r\n    <div class="m4b-rate-details-popup-container" ref="inner">\r\n        <div class="m4b-rate-details-popup-name">\r\n            {{ "booking.room_occupancy" | local }}\r\n        </div>\r\n        <div class="m4b-rate-details-popup-desc" style="margin-top: 8px;">\r\n            {{ "booking.room_accommodates" | local }}\r\n        </div>\r\n        <div class="m4b-rate-details-popup-desc" style="margin-top: 6px;" e-if="adultocc">\r\n            <span class="icon-icon_J013" e-for="item in adultRange"></span>\r\n            <span>{{ "booking.adults" | local }}</span>\r\n        </div>\r\n        <div class="m4b-rate-details-popup-desc" style="margin-top: 6px;" e-if="childocc">\r\n            <span class="icon-icon_J012" e-for="item in childRange"></span>\r\n            <span>{{ "booking.children" | local }} ({{ "booking.below_12" | local maxchildage }})</span>\r\n        </div>\r\n        <div class="m4b-rate-details-popup-desc" style="margin-top: 8px;">\r\n            {{ "booking.total_occupancy" | local maxocc }}\r\n        </div>\r\n    </div>\r\n</div>'},{}],1387:[function(e,t,i){function n(){return"ontouchend"in window}function c(e){return"touchend"===e.type&&e.currentTarget!==document?(e.stopPropagation(),!0):!n()}var l=e("elfjs"),a=e("./details-popup/view");t.exports=l.Component("rate-details-popup",{render:l.redactElement(e("./temp.html")),constructor:function(){this.carrier=document.createElement("div"),this.element=l.createElement(a),this.example=null,this.timeout=null},onInitial:function(){this.props.isClick?(l.attachEvent(this.carrier,"click",this),l.attachEvent(this.refs.wrapper,"click",this),this.carrier.className="rate-details-click-container"):n()?(l.attachEvent(this.refs.wrapper,"touchend",this),l.attachEvent(this.carrier,"touchend",this),l.attachEvent(document,"touchend",this)):(l.attachEvent(this.carrier,"mouseenter",this),l.attachEvent(this.carrier,"mouseleave",this),l.attachEvent(this.refs.wrapper,"mouseenter",this),l.attachEvent(this.refs.wrapper,"mouseleave",this)),document.body.appendChild(this.carrier)},onDispose:function(){this.props.isClick?(l.detachEvent(this.refs.wrapper,"click",this),l.detachEvent(this.carrier,"click",this)):n()?(l.detachEvent(this.refs.wrapper,"touchend",this),l.detachEvent(this.carrier,"touchend",this),l.detachEvent(document,"touchend",this)):(l.detachEvent(this.refs.wrapper,"mouseenter",this),l.detachEvent(this.refs.wrapper,"mouseleave",this),l.detachEvent(this.carrier,"mouseenter",this),l.detachEvent(this.carrier,"mouseleave",this)),clearTimeout(this.timeout),this.example&&(this.example.dispose(),this.example=null),this.carrier.parentNode&&this.carrier.parentNode.removeChild(this.carrier)},handleEvent:function(e){var t=this;if(clearTimeout(t.timeout),this.props.isClick){if("click"===e.type){var i=jQuery(t.refs.wrapper),n=i.offset();t.element.props={desc:t.props.desc||"",shortpolicydesc:t.props.shortpolicydesc||"",penaltydescription:t.props.penaltydescription||"",guaranteeDesc:t.props.guaranteeDesc||"",modifypolicy:t.props.modifypolicy||0,direction:t.props.direction||"right",navheight:parseInt(t.props.navheight)||0,rectangle:{top:n.top,left:n.left,width:i.prop("clientWidth"),height:i.prop("clientHeight")}},t.example=l.render(t.element,t.carrier,!1)}}else{if("mouseenter"===e.type||c(e)){var i=jQuery(t.refs.wrapper),n=i.offset();t.element.props={desc:t.props.desc||"",shortpolicydesc:t.props.shortpolicydesc||"",penaltydescription:t.props.penaltydescription||"",guaranteeDesc:t.props.guaranteeDesc||"",modifypolicy:t.props.modifypolicy||0,direction:t.props.direction||"right",navheight:parseInt(t.props.navheight)||0,rectangle:{top:n.top,left:n.left,width:i.prop("clientWidth"),height:i.prop("clientHeight")}},t.example?t.example.forceUpdate():t.example=l.render(t.element,t.carrier,!1)}"mouseleave"!==e.type&&c(e)||(t.timeout=setTimeout(function(){t.example&&(t.example.dispose(),t.example=null)},100))}}})},{"./details-popup/view":1385,"./temp.html":1386,elfjs:10}],1386:[function(e,t,i){t.exports='<span class="m4b-b3-section-details-wrapper" ref="wrapper" onclick="event.stopPropagation();">\r\n    <span class="text">{{ props.children }}</span>\r\n    <span class="icon icon-icon_I011"></span>\r\n</span>'},{}],1385:[function(e,t,i){function n(){return"rtl"===document.documentElement.dir}var c=e("elfjs");t.exports=c.createClass({render:c.redactElement(e("./temp.html")),onInitial:function(){var e=0,t=0,i=0,c=0,l=0,a=jQuery(window),o=jQuery(this.refs.popup),s=this.rectangle,r=a.width(),g=a.height(),d=a.scrollTop(),I=a.scrollLeft(),b=o.prop("clientWidth"),C=o.prop("clientHeight"),u=s.width,m=s.height,p=s.top,h=s.left,G="top"===this.direction,A="left"===this.direction,y="right"===this.direction,Z="bottom"===this.direction;G&&(t=p-C,t<d+this.navheight&&(i=p+m,d+g-C>=i&&(o.removeClass("top"),o.addClass("bottom"),t=i))),Z&&(t=p+m,t+C>d+g&&(i=p-C,i>=d+this.navheight&&(o.removeClass("bottom"),o.addClass("top"),t=i))),(G||Z)&&(e=h+(u-b)/2,e+b>I+r&&(c=I+r-b-e),I>e&&(c=I-e)),(A||y)&&(e=0===(A^n())?h+u:h-b,t=p-(C-m)/2,t+C>d+g&&(l=Math.max(d+g-C-t,7-C/2)),t<d+this.navheight&&(l=Math.min(d+this.navheight-t,C/2-7))),this.refs.popup.style.cssText=["left: "+e+"px;","top: "+t+"px;"].join(" "),this.refs.inner.style.cssText=["-webkit-transform: translate("+c+"px, "+l+"px);","-moz-transform: translate("+c+"px, "+l+"px);","-ms-transform: translate("+c+"px, "+l+"px);","-o-transform: translate("+c+"px, "+l+"px);","transform: translate("+c+"px, "+l+"px);"].join(" ")},get desc(){return this.props.desc},get shortpolicydesc(){return this.props.shortpolicydesc},get penaltydescription(){return this.props.penaltydescription},get guaranteeDesc(){return this.props.guaranteeDesc},get modifypolicy(){return this.props.modifypolicy},get direction(){return this.props.direction},get rectangle(){return this.props.rectangle},get navheight(){return this.props.navheight}})},{"./temp.html":1384,elfjs:10}],1384:[function(e,t,i){t.exports='<div class="m4b-rate-details-popup {{ direction }}" ref="popup">\r\n    <div class="m4b-rate-details-popup-container" ref="inner">\r\n        <div class="m4b-rate-details-popup-desc" e-if="desc" innerHTML="{{ desc }}"></div>\r\n        <div class="m4b-rate-details-popup-desc" e-if="shortpolicydesc" innerHTML="{{ shortpolicydesc }}"></div>\r\n        <div class="m4b-rate-details-popup-name" e-if="penaltydescription">{{ "policy.Guarantee_Policy" | local }}:</div>\r\n        <div class="m4b-rate-details-popup-desc" e-if="penaltydescription" innerHTML="{{ guaranteeDesc }}"></div>\r\n        <div class="m4b-rate-details-popup-name" e-if="guaranteeDesc">{{ "policy.Cancellation_Policy" | local }}:</div>\r\n        <div class="m4b-rate-details-popup-desc" e-if="guaranteeDesc" innerHTML="{{ penaltydescription }}"></div>\r\n        <div class="m4b-rate-details-popup-name" e-if="modifypolicy">{{ "policy.Modify_Policy" | local }}:</div>\r\n        <div class="m4b-rate-details-popup-desc" e-if="modifypolicy" innerHTML="{{ \'policy.Modify_Policy_desc\' | local modifypolicy }}"></div>\r\n    </div>\r\n</div>'},{}],1391:[function(e,t,i){function n(){return"ontouchend"in window}function c(e){return"touchend"===e.type&&e.currentTarget!==document?(e.stopPropagation(),!0):!n()}var l=e("elfjs"),a=e("./loyalty-popup/view");t.exports=l.Component("rate-loyalty-popup",{render:l.redactElement(e("./temp.html")),constructor:function(){this.carrier=document.createElement("div"),this.element=l.createElement(a),this.example=null,this.timeout=null},onInitial:function(){document.body.appendChild(this.carrier),n()?(l.attachEvent(this.refs.wrapper,"touchend",this),l.attachEvent(this.carrier,"touchend",this),l.attachEvent(document,"touchend",this)):(l.attachEvent(this.carrier,"mouseenter",this),l.attachEvent(this.carrier,"mouseleave",this),l.attachEvent(this.refs.wrapper,"mouseenter",this),l.attachEvent(this.refs.wrapper,"mouseleave",this))},onDispose:function(){n()?(l.detachEvent(this.refs.wrapper,"touchend",this),l.detachEvent(this.carrier,"touchend",this),l.detachEvent(document,"touchend",this)):(l.detachEvent(this.refs.wrapper,"mouseenter",this),l.detachEvent(this.refs.wrapper,"mouseleave",this),l.detachEvent(this.carrier,"mouseenter",this),l.detachEvent(this.carrier,"mouseleave",this)),clearTimeout(this.timeout),this.example&&(this.example.dispose(),this.example=null),this.carrier.parentNode&&this.carrier.parentNode.removeChild(this.carrier)},handleEvent:function(e){var t=this;if(clearTimeout(t.timeout),"mouseenter"===e.type||c(e)){var i=jQuery(t.refs.target),n=i.offset();t.element.props={loyalty:t.props.loyalty||0,direction:t.props.direction||"right",navheight:parseInt(t.props.navheight)||0,rectangle:{top:n.top,left:n.left,width:i.prop("clientWidth"),height:i.prop("clientHeight")}},t.example?t.example.forceUpdate():t.example=l.render(t.element,t.carrier,!1)}"mouseleave"!==e.type&&c(e)||(t.timeout=setTimeout(function(){t.example&&(t.example.dispose(),t.example=null)},100))}})},{"./loyalty-popup/view":1389,"./temp.html":1390,elfjs:10}],1390:[function(e,t,i){t.exports='<span class="m4b-inline-block" ref="target">\r\n    <span class="text">{{ props.children }}</span>\r\n    <span class="icon icon-icon_I011" ref="wrapper"></span>\r\n</span>'},{}],1389:[function(e,t,i){function n(){return"rtl"===document.documentElement.dir}var c=e("elfjs");t.exports=c.createClass({render:c.redactElement(e("./temp.html")),onInitial:function(){var e=0,t=0,i=0,c=0,l=0,a=jQuery(window),o=jQuery(this.refs.popup),s=this.rectangle,r=a.width(),g=a.height(),d=a.scrollTop(),I=a.scrollLeft(),b=o.prop("clientWidth"),C=o.prop("clientHeight"),u=s.width,m=s.height,p=s.top,h=s.left,G="top"===this.direction,A="left"===this.direction,y="right"===this.direction,Z="bottom"===this.direction;G&&(t=p-C,t<d+this.navheight&&(i=p+m,d+g-C>=i&&(o.removeClass("top"),o.addClass("bottom"),t=i))),Z&&(t=p+m,t+C>d+g&&(i=p-C,i>=d+this.navheight&&(o.removeClass("bottom"),o.addClass("top"),t=i))),(G||Z)&&(e=h+(u-b)/2,e+b>I+r&&(c=I+r-b-e),I>e&&(c=I-e)),(A||y)&&(e=0===(A^n())?h+u:h-b,t=p-(C-m)/2,t+C>d+g&&(l=Math.max(d+g-C-t,7-C/2)),t<d+this.navheight&&(l=Math.min(d+this.navheight-t,C/2-7))),this.refs.popup.style.cssText=["left: "+e+"px;","top: "+t+"px;"].join(" "),this.refs.inner.style.cssText=["-webkit-transform: translate("+c+"px, "+l+"px);","-moz-transform: translate("+c+"px, "+l+"px);","-ms-transform: translate("+c+"px, "+l+"px);","-o-transform: translate("+c+"px, "+l+"px);","transform: translate("+c+"px, "+l+"px);"].join(" ")},get loyalty(){return this.props.loyalty},get direction(){return this.props.direction},get rectangle(){return this.props.rectangle},get navheight(){return this.props.navheight}})},{"./temp.html":1388,elfjs:10}],1388:[function(e,t,i){t.exports='<div class="m4b-rate-details-popup loyalty {{ direction }}" ref="popup">\r\n    <div class="m4b-rate-details-popup-container" ref="inner">\r\n        <div class="m4b-rate-details-popup-desc">\r\n            {{ "booking.enjoying_loyalty_discount" | local }} {{ loyalty }}%\r\n        </div>\r\n    </div>\r\n</div>'},{}],1376:[function(e,t,i){function n(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1).toUpperCase()}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var c=e("elfjs"),l=e("./dynamic-swiper/view"),a=e("../vertical-container/view"),o=e("../read-more/view");t.exports=c.Component("hotel-gallery",{render:c.redactElement(e("./temp.html"),l,a,o),constructor:function(){this.list=this.props.list||[],this.hero=this.props.hero||this.list[0],this.heroIndex=Math.max(0,this.list.indexOf(this.hero)),this.maxLength=this.list.length,this.bodyWhell=null,this.selection=null,this.swiperKey=n(),this.folderKey=n(),this.loadVscapes()},onInitial:function(){var e=document.body;this.bodyWhell="auto",e.style.overflow="hidden"},onDispose:function(){document.body.style.overflow=this.bodyWhell},onSwipeNext:function(){this.refs.swiper.swipeNext()},onSwipePrev:function(){this.refs.swiper.swipePrev()},onVscapeMenuClick:function(e){this.selection=e,this.swiperKey=n()},onPrevButtonClick:function(){this.heroIndex>0?this.heroIndex--:this.heroIndex=this.maxLength-1,this.hero=this.list[this.heroIndex],this.swiperKey=n(),this.folderKey=n(),this.selection=null,this.loadVscapes()},onNextButtonClick:function(){this.heroIndex<this.maxLength-1?this.heroIndex++:this.heroIndex=0,this.hero=this.list[this.heroIndex],this.swiperKey=n(),this.folderKey=n(),this.selection=null,this.loadVscapes()},onCloseButtonClick:function(){c.dispatchEvent(this,c.createEvent("close",!0))},onBookingClick:function(){c.dispatchEvent(this,c.createEvent("booking",!0,this.hero))},loadVscapes:function(){var e=this.hero;e&&(e.vscapeimage||this.props.host.loadVscapes(e.hotelinfo.hotelid).then(function(t){e.vscapeimage=t}))},get menus(){return this.hero&&this.hero.vscapeimage&&this.hero.vscapeimage.arc||[]},get vscape(){return this.selection||this.hero&&this.hero.vscapeimage&&this.hero.vscapeimage.arc&&this.hero.vscapeimage.arc[0]},get vscapeCount(){return this.vscape&&this.vscape.count||0},get activeIndex(){return this.refs.swiper&&this.refs.swiper.props.filter==this.vscape?this.refs.swiper.activeIndex:0},get currentImageTitle(){var e=this.vscape,t=this.activeIndex;if(e){var i=[].concat(e.video||[]).concat(e.image360||[]).concat(e.images||[]);if(i[t])return i[t].title||""}return""},get disabled(){return this.maxLength<=1}})},{"../read-more/view":1396,"../vertical-container/view":1399,"./dynamic-swiper/view":1374,"./temp.html":1375,elfjs:10}],1396:[function(e,t,i){function n(e){return e.replace(/((\s)*([a-zA-Z0-9\-&;]+|\W))(?=(<[^>]*>)*$)/,"")}function c(e){return e=e.replace(/<([a-z]+?)(?:\s+?[^>]*?)?>\s*?<\/\1>/gi,""),e=e.replace(/<a(?:\s+?[^>]*?)?>\s*?<\/a>/gi,""),e=e.replace(/<img([^>]*)?>/gi,"")}var l=e("elfjs"),a="<span>...</span>&nbsp;<a class='read-more' href='javascript:void(0);'>"+i18n.t("general.read_more")+"</a>",o="&nbsp;<a class='read-more' href='javascript:void(0);'>"+i18n.t("general.read_less")+"</a>";t.exports=l.Component("read-more",{render:function(){return l.createElement("div",{ref:"container",onClick:this},this.trimValue)},constructor:function(){this.line=parseInt(this.props.line)||3,this.value=c(this.props.value||""),this.trimValue=this.value,this.collapsed=!0},onInitial:function(){this.trimContainerValue(),this.dispatchResizeEvent()},handleEvent:function(e){"A"==e.target.tagName&&(this.collapsed?(this.collapsed=!1,this.refs.container.innerHTML=this.value+o):(this.collapsed=!0,this.trimContainerValue()),this.dispatchResizeEvent())},dispatchResizeEvent:function(){var e=this;setTimeout(function(){l.dispatchEvent(e,l.createEvent("resize",!0))})},trimContainerValue:function(){for(var e=this.refs.container,t=e.clientHeight,i=parseInt(window.getComputedStyle(e).lineHeight),c=!1,l=this.value,o=Math.round(t/i);l&&o>this.line&&(this.trimValue=n(l),this.trimValue!=l);)e.innerHTML=l,l=this.trimValue,o=Math.round(e.clientHeight/i),c=!0;if(c){for(var s=l.length-20;s>0&&l.length>s&&(this.trimValue=n(l),this.trimValue!=l);)l=this.trimValue;e.innerHTML=l+a}}})},{elfjs:10}],1375:[function(e,t,i){t.exports='<div class="m4b-hotel-gallery" onclick="event.stopPropagation();">\r\n    <div class="m4b-hotel-gallery-close" onclick="onCloseButtonClick(event);">\r\n        <span class="icon-icon_B017"></span>\r\n    </div>\r\n    <div class="m4b-hotel-gallery-image m4b-not-select">\r\n        <div class="m4b-hotel-gallery-image-switch" e-if="vscapeCount > 0">\r\n            <div class="m4b-hotel-gallery-image-switch-prev icon-icon_chervonLeft" onclick="onSwipePrev(event);"></div>\r\n            <div class="m4b-hotel-gallery-image-switch-next icon-icon_chervonRight" onclick="onSwipeNext(event);"></div>\r\n        </div>\r\n        <div class="m4b-hotel-gallery-image-paging" e-if="vscapeCount > 0">\r\n            {{ activeIndex + 1 }}/{{ vscapeCount }} - {{ currentImageTitle }}\r\n        </div>\r\n        <div class="m4b-hotel-gallery-image-filter">\r\n            <div class="m4b-hotel-gallery-image-filter-wrapper">\r\n                <div e-for="item in menus" class="m4b-hotel-gallery-image-filter-item {{ item == vscape ? \'hover\' : \'right\' }}" onclick="onVscapeMenuClick(item);">\r\n                    {{ item.categoryName }}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="m4b-hotel-gallery-image-swiper">\r\n            <dynamic-swiper ref="swiper" key="{{ swiperKey }}" e-if="vscapeCount > 0" filter="{{ vscape }}">\r\n                <div class="swiper-slide" e-for="item in vscape.video">\r\n                    <video class="m4b-hotel-gallery-image-video" e-if="item.url" src="{{ encodeURI(item.url) }}" width="100%" height="100%" controls></video>\r\n                </div>\r\n                <div class="swiper-slide" e-for="item in vscape.image360">\r\n                    <iframe class="m4b-hotel-gallery-image-image360" e-if="item.resourseurl" src="{{ encodeURI(item.resourseurl) }}"></iframe>\r\n                    <div class="m4b-hotel-gallery-image-images" e-if="!item.resourseurl && item.url" style="background-image: url(\'{{ item.url }}\')"></div>\r\n                </div>\r\n                <div class="swiper-slide" e-for="item in vscape.images">\r\n                    <div class="m4b-hotel-gallery-image-images" style="background-image: url(\'{{ item.desktopUrl }}\')"></div>\r\n                </div>\r\n            </dynamic-swiper>\r\n        </div>\r\n    </div>\r\n    <div class="m4b-hotel-gallery-value">\r\n        <div class="m4b-hotel-gallery-value-detail">\r\n            <vertical-container e-if="hero" onresize="event.currentTarget.refresh();">\r\n                <h3 class="m4b-hotel-gallery-value-detail-name">{{ hero.hotelinfo.name }}</h3>\r\n                <div class="m4b-hotel-gallery-value-detail-item">\r\n                    <span class="icon icon-icon_P002"></span>\r\n                    <span class="text">{{ hero.hotelinfo.close2locations }}</span>\r\n                </div>\r\n                <div class="m4b-hotel-gallery-value-detail-item">\r\n                    <span class="icon icon-icon_H001"></span>\r\n                    <span class="text">\r\n                        {{ hero.hotelinfo.contact.address1 || hero.hotelinfo.contact.address2 }}\r\n                    </span>\r\n                </div>\r\n                <div class="m4b-hotel-gallery-value-detail-item">\r\n                    <span class="icon icon-icon_H002"></span>\r\n                    <span class="text">{{ hero.hotelinfo.contact.telphone }}</span>\r\n                </div>\r\n                <div class="m4b-hotel-gallery-value-detail-item">\r\n                    <span class="icon icon-icon_H003"></span>\r\n                    <span class="text">\r\n                        <a href="mailto:{{ hero.hotelinfo.contact.email }}">{{ hero.hotelinfo.contact.email }}</a>\r\n                    </span>\r\n                </div>\r\n                <div class="m4b-hotel-gallery-value-detail-item" e-if="hero.hotelinfo.reevoo">\r\n                    <span class="icon icon-icon_E009"></span>\r\n                    <span class="text" e-if="hero.hotelinfo.reevoo.ReviewFlag == 1">\r\n                        {{ hero.hotelinfo.reevoo.ReviewScore }} {{ hero.hotelinfo.reevoo.ReviewMessage }}\r\n                    </span>\r\n                    <span class="text" e-if="hero.hotelinfo.reevoo.ReviewFlag == 2">\r\n                        {{ hero.hotelinfo.reevoo.ReviewScore }}/10 {{ hero.hotelinfo.reevoo.ReviewMessage }}\r\n                    </span>\r\n                    <span class="text" e-if="hero.hotelinfo.reevoo.ReviewFlag == 3">\r\n                        {{ hero.hotelinfo.reevoo.ReviewMessage }}\r\n                    </span>\r\n                </div>\r\n                <hr class="m4b-hotel-gallery-value-detail-line">\r\n                <div class="m4b-hotel-gallery-value-detail-more">\r\n                    <read-more key="{{ folderKey }}" value="{{ hero.hotelinfo.shortdescription }}"></read-more>\r\n                </div>\r\n                <hr class="m4b-hotel-gallery-value-detail-line">\r\n                <div class="m4b-hotel-gallery-value-detail-text">\r\n                    {{ "Property.amenities" }}\r\n                </div>\r\n                <div class="m4b-hotel-gallery-value-detail-list">\r\n                    <div class="m4b-hotel-gallery-value-detail-list-item" e-for="item in hero.hotelinfo.amenitielist">\r\n                        <span class="icon {{ item.fonticon }}"></span>\r\n                        <span class="text">{{ item.name }}</span>\r\n                    </div>\r\n                </div>\r\n                <div class="m4b-hotel-gallery-value-detail-text"></div>\r\n            </vertical-container>\r\n        </div>\r\n        <div class="m4b-hotel-gallery-value-bottom">\r\n            <a class="m4b-hotel-gallery-value-bottom-lnk" e-if="hero" href="{{ hero.hotelinfo.url }}">{{ "m4b.view_hotel_page" | local }}</a>\r\n            <a class="m4b-hotel-gallery-value-bottom-btn" e-if="hero" href="{{ hero.hotelinfo.bookingurl }}" onclick="onBookingClick(event);">SELECT HOTEL</a>\r\n        </div>\r\n    </div>\r\n    <div class="m4b-hotel-gallery-tools">\r\n        <button class="m4b-hotel-gallery-tools-prev" type="button" disabled="{{ disabled }}" onclick="onPrevButtonClick(event);">\r\n            <span class="icon-icon_chervonLeft"></span>\r\n        </button>\r\n        <button class="m4b-hotel-gallery-tools-next" type="button" disabled="{{ disabled }}" onclick="onNextButtonClick(event);">\r\n            <span class="icon-icon_chervonRight"></span>\r\n        </button>\r\n        <div class="m4b-hotel-gallery-tools-text">\r\n            <div class="m4b-hotel-gallery-tools-text-prev">{{ "booking.previous_hotel" | local }}</div>\r\n            <div class="m4b-hotel-gallery-tools-text-next">{{ "booking.next_hotel" | local }}</div>\r\n        </div>\r\n    </div>\r\n</div>';
},{}],1369:[function(e,t,i){t.exports=[{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#e0efef"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{hue:"#1900ff"},{color:"#c0e8e8"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"simplified"},{lightness:100}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"on"},{lightness:700}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#7dcdcd"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#7dcdcd"}]},{featureType:"poi.business",elementType:"labels",stylers:[{visibility:"off"}]}]},{}],1365:[function(e,t,i){var n=e("./cdn"),c=e("elfjs").Promise,l=null;t.exports={then:function(e,t){return(l=l||c.resolve(n).then(function(e){function t(){}function i(t){this.pixelOffset=t.pixelOffset,this.position=t.position,this.content=t.content,this.detail=t.detail,this.el=document.createElement("div"),this.el.style.cssText="position: absolute; left: 0; top: 0; z-index: 0;",this.el.addEventListener("click",function(t){return function(i){i.stopPropagation(),e.maps.event.trigger(t,"click",i)}}(this)),t.zIndex&&(this.el.style.zIndex=t.zIndex),this.el.appendChild(this.content),t.map&&this.setMap(t.map)}function n(t){this.pixelOffset=t.pixelOffset,this.position=t.position,this.content=t.content,this.detail=t.detail,this.el=document.createElement("div"),this.el.style.cssText="position: absolute; left: 0; top: 0; z-index: 0;",this.el.addEventListener("click",function(t){return function(i){i.stopPropagation(),e.maps.event.trigger(t,"click",i)}}(this)),t.zIndex&&(this.el.style.zIndex=t.zIndex),this.el.appendChild(function(){var e=document.createElement("div");return e.style.cssText="position: absolute; left: 50%; top: -9px; z-index: 1; margin-left: -6px; border-bottom: 9px solid #fff; border-right: 6px solid transparent; border-left: 6px solid transparent;",e}()),this.el.appendChild(this.content),t.map&&this.setMap(t.map)}return t.prototype=new e.maps.OverlayView,t.prototype.getPosition=function(){return this.position},t.prototype.getContent=function(){return this.content},t.prototype.getDetail=function(){return this.detail},t.prototype.getZIndex=function(){return this.el.style.zIndex},t.prototype.setZIndex=function(e){this.el.style.zIndex=e},t.prototype.remove=function(){this.el.parentNode&&this.el.parentNode.removeChild(this.el)},i.prototype=new t,i.prototype.draw=function(){var e=this.getProjection().fromLatLngToDivPixel(this.position);this.el.style.left=e.x+(this.pixelOffset?this.pixelOffset.width:0)+"px",this.el.style.top=e.y+(this.pixelOffset?this.pixelOffset.height:0)+"px",this.getPanes().overlayMouseTarget.appendChild(this.el)},n.prototype=new t,n.prototype.draw=function(){var e=this.getProjection().fromLatLngToDivPixel(this.position);this.el.style.left=e.x+(this.pixelOffset?this.pixelOffset.width:0)+"px",this.el.style.top=e.y+(this.pixelOffset?this.pixelOffset.height:0)+"px",this.getPanes().floatPane.appendChild(this.el)},e.maps.HTMLMarker=i,e.maps.HTMLWindow=n,e})).then(e,t)}}},{"./cdn":1366,elfjs:10}],1362:[function(e,t,i){function n(e,t){for(var i=new RegExp(t.replace(/[^\w\s]/g,""),"ig"),n=0;n<e.length;n++)e[n].displayName=(e[n].name||"").replace(i,function(e){return"<strong>"+e+"</strong>"});return e}var c=e("underscore"),l=e("elfjs"),a=e("../../../../offers-details-2.0/01-sidebar/02-calendar/swiper-calendar/calendar"),o=e("../vertical-container/view"),s=e("../counter-selector/view");t.exports=l.Component("booking-searcher",{render:l.redactElement(e("./temp.html"),a,o,s),constructor:function(){this.calendarView=0,this.calendarMode=0,this.formatString="DD/MMM/YYYY",this.roomsView=!1,this.guestsView=!1,this.optionsMode=!1,this.optionsInit=!1,this.paramUpdated=!1,this.searchName="",this.searchItem=null,this.searchView=!1,this.responseEMsg=null,this.responseView=!1},onEditDateClick:function(e){e.stopPropagation(),this.responseView=!1,this.calendarView=!0,this.calendarMode=0},onPrevDateClick:function(e){e.stopPropagation(),this.responseView=!1,this.calendarView=1,this.calendarMode=1},onNextDateClick:function(e){e.stopPropagation(),this.responseView=!1,this.calendarView=2,this.calendarMode=2},onCalendarChanged:function(e){this.checkin=e.detail.prev,this.checkout=e.detail.next,this.calendarView=e.detail.completed?0:2,this.paramUpdated=!0},onRoomsChanged:function(e){this.rooms=e.detail,this.paramUpdated=!0},onAdultsChanged:function(e){this.adults=e.detail,this.paramUpdated=!0},onChildrenChanged:function(e){this.children=e.detail,this.paramUpdated=!0},onAccessibleChanged:function(e){this.Accessible=e.target.checked,this.paramUpdated=!0},onPromoCodeChanged:function(e){this.promocode=e.target.value,this.paramUpdated=!0},onGroupCodeChanged:function(e){this.groupcode=e.target.value,this.paramUpdated=!0},onDiscountCodeChanged:function(e){this.discountcode=e.target.value,this.paramUpdated=!0},onAAAChanged:function(e){this.AAA=e.target.checked,this.paramUpdated=!0},onAARPChanged:function(e){this.AARP=e.target.checked,this.paramUpdated=!0},onGOVChanged:function(e){this.GOV=e.target.checked,this.paramUpdated=!0},onQueryClick:function(e){this.props.host.redirectURL()},onSearchClick:function(e){var t=this;t.responseView=!1,t.responseEMsg=null,t.responseList=[],t.searchName="",(t.searchView=!t.searchView)&&setTimeout(function(){t.refs.querybox&&t.refs.querybox.focus()},50)},onSearchInput:function(e){this.searchName=e.target.value,this.responseView=!1,this.responseEMsg=null,this.responseList=[],this.searchByKey()},onResultClick:function(e,t){e.stopPropagation(),this.refs.querybox.blur(),this.responseView=!1,this.paramUpdated=!0,this.searchView=!1,this.searchName="",this.selection=t},searchByKey:c.debounce(function(){var e=this,t=e.searchName.trim();t&&e.props.host.searchByKey(t).then(function(i){t===e.searchName.trim()&&(e.responseView=!0,e.responseList=[].concat(n(i.hotel||[],t)).concat(n(i.city||[],t)))},function(i){t===e.searchName.trim()&&(e.responseView=!0,e.responseEMsg=i)})},500),get promoVerify(){return this.props.mode.promocode},get groupVerify(){return this.props.mode.groupcode},get discoVerify(){return this.props.mode.discountcode},get roomsText(){return this.rooms+" "+i18n.t(1===this.rooms?"booking.room":"booking.rooms")},get guestsText(){return this.adults+" "+i18n.t(this.adults>1?"booking.adults":"booking.adult")+", "+this.children+" "+i18n.t(this.children>1?"booking.children":"booking.child")},get optionsText(){var e=[];return this.promocode&&e.push(this.promocode),this.groupcode&&e.push(this.groupcode),this.discountcode&&e.push(this.discountcode),e.join(", ")},get type(){return"DESTINATION"==this.props.type?i18n.t("booking.destination"):i18n.t("general.hotel")},get icon(){return"DESTINATION"==this.props.type?"icon-icon_F0272":"icon-icon_N010"},get promosuccess(){return this.props.promomsg&&this.props.promomsg.code&&this.props.promomsg.mode},get promofailure(){return this.props.promomsg&&this.props.promomsg.code&&!this.props.promomsg.mode},get maxocc(){return this.props.data.maxocc},get adultocc(){return this.props.data.adultocc},get childocc(){return this.props.data.childocc},get roomocc(){return this.props.data.roomocc},get maxchildage(){return this.props.data.maxchildage},get isAmerican(){return this.props.data.isAmerican},get accessibleroom(){return this.props.data.accessibleroom},get checkin(){return this.props.data.checkin},get checkout(){return this.props.data.checkout},get promocode(){return this.props.data.promocode},get groupcode(){return this.props.data.groupcode},get discountcode(){return this.props.data.discountcode},get adults(){return this.props.data.adults},get children(){return this.props.data.children},get rooms(){return this.props.data.rooms},get AAA(){return this.props.data.AAA},get AARP(){return this.props.data.AARP},get GOV(){return this.props.data.GOV},get Accessible(){return this.props.data.Accessible},get selection(){return this.props.data.selection},get editable(){return this.props.data.editable},set checkin(e){this.props.data.checkin=e},set checkout(e){this.props.data.checkout=e},set promocode(e){this.props.data.promocode=e},set groupcode(e){this.props.data.groupcode=e},set discountcode(e){this.props.data.discountcode=e},set adults(e){this.props.data.adults=e},set children(e){this.props.data.children=e},set rooms(e){this.props.data.rooms=e},set AAA(e){this.props.data.AAA=e},set AARP(e){this.props.data.AARP=e},set GOV(e){this.props.data.GOV=e},set Accessible(e){this.props.data.Accessible=e},set selection(e){this.props.data.selection=e},get name(){return this.searchView?this.searchName:this.selection?"destination"===this.selection.type||"group"===this.selection.type?i18n.t("booking.hotelsincity").replace("{0}",this.selection.name):this.selection.name:void 0},get optionsView(){return 0==this.optionsInit&&(this.optionsMode=this.promoVerify&&!this.promoVerify.valid||this.groupVerify&&!this.groupVerify.valid||this.discoVerify&&!this.discoVerify.valid,this.optionsMode&&(this.optionsInit=!0)),this.optionsMode},set optionsView(e){this.optionsInit=!0,this.optionsMode=e}})},{"../../../../offers-details-2.0/01-sidebar/02-calendar/swiper-calendar/calendar":1534,"../counter-selector/view":1364,"../vertical-container/view":1399,"./temp.html":1361,elfjs:10,underscore:42}],1364:[function(e,t,i){var n=e("elfjs");t.exports=n.Component("counter-selector",{render:n.redactElement(e("./temp.html")),onChange:function(e){n.dispatchEvent(this,n.createEvent("change",!0,e.target.checked?1:0))},onPrevClick:function(){n.dispatchEvent(this,n.createEvent("change",!0,this.value-1))},onNextClick:function(){n.dispatchEvent(this,n.createEvent("change",!0,this.value+1))},get min(){var e=parseInt(this.props.min);return isNaN(e)?0:e},get max(){var e=parseInt(this.props.max);return isNaN(e)?99:e},get label(){return this.props.label||""},get value(){return parseInt(this.props.value)||0},get single(){return this.props.single||!1}})},{"./temp.html":1363,elfjs:10}],1363:[function(e,t,i){t.exports='<div class="m4b-counter">\r\n    <label class="m4b-b1-field-radio" e-if="single">\r\n        <span class="text">{{ props.children }}</span>\r\n        <input type="checkbox" checked="{{ value == 1 }}" onchange="onChange(event);">\r\n        <span class="icon"></span>\r\n    </label>\r\n    <div class="m4b-counter-label" e-if="!single">\r\n        {{ props.children }}\r\n    </div>\r\n    <div class="m4b-counter-keyer" e-if="!single">\r\n        <button class="m4b-counter-selector" type="button" disabled="{{ value &lt;= min }}" onclick="onPrevClick(event);">\r\n            <span class="icon-icon_B024"></span>\r\n        </button>\r\n        <span class="m4b-counter-number m4b-not-select">{{ value }}</span>\r\n        <button class="m4b-counter-selector" type="button" disabled="{{ value &gt;= max }}" onclick="onNextClick(event);">\r\n            <span class="icon-icon_B023"></span>\r\n        </button>\r\n    </div>\r\n</div>'},{}],1361:[function(e,t,i){t.exports='<div class="m4b-b2-article-summary">\r\n    <div class="m4b-b2-article-head">{{ "booking.your_booking_summary" | local }}</div>\r\n    <div class="m4b-b2-article-item">\r\n            <div class="m4b-b2-article-item-edit m4b-not-select" e-if="editable" onclick="onSearchClick(event);">{{ "booking.edit" | local }}</div>\r\n        <div class="m4b-b2-article-item-head">\r\n            <span class="icon {{ icon }}"></span>\r\n            <span class="text">{{ type }}</span>\r\n        </div>\r\n        <div class="m4b-b2-article-item-text black">\r\n            <div class="m4b-b2-article-name-edit" e-if="searchView">\r\n                <div class="m4b-b1-field">\r\n                    <div class="m4b-b1-field-value" onclick="event.stopPropagation();">\r\n                        <label class="m4b-b1-field-shape">\r\n                            <span e-if="!name">{{ "m4b.destination_placeholder" | local }}</span>\r\n                        </label>\r\n                        <input class="m4b-b1-field-input"\r\n                            ref="querybox"\r\n                            type="text"\r\n                            value="{{ name }}"\r\n                            oninput="onSearchInput(event);"\r\n                            cmd="keyboard-selection"\r\n                            autofocus>\r\n                    </div>\r\n                </div>\r\n                <div class="m4b-position-relative m4b-z-index-5">\r\n                    <div class="m4b-b1-search-panel" e-if="responseView" cmd="popupbox-attention">\r\n                        <div class="m4b-b1-search-panel-fail" e-if="responseEMsg">\r\n                            {{ "booking.please_enter_a_location_hotel" | local }}\r\n                        </div>\r\n                        <div class="m4b-b1-search-panel-list" e-if="responseList.length">\r\n                            <vertical-container ref="keyboard-selection">\r\n                                <div class="m4b-b1-search-panel-list-item{{ selection == item ? \' hover\' : \'\' }}" e-for="item in responseList" onclick="onResultClick(event, item);">\r\n                                    <div e-if="item.type == \'hotel\'">\r\n                                        <span class="icon icon-icon_I002"></span>\r\n                                        <span class="text" innerHTML="{{ item.displayName }}"></span>\r\n                                    </div>\r\n                                    <div e-if="item.type == \'destination\' || item.type == \'group\'">\r\n                                        <span class="icon icon-icon_B002"></span>\r\n                                        <span class="text" innerHTML="{{ \'booking.hotelsincity\' | local item.displayName }} ({{ item.number }} {{ item.number > 1 ? \'scratchpad.hotels\' : \'general.hotel\' | local }})"></span>\r\n                                    </div>\r\n                                </div>\r\n                            </vertical-container>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div e-if="!searchView">{{ name }}</div>\r\n        </div>\r\n        <div class="m4b-b2-article-item-text light" e-if="!selection">\r\n            {{ "booking.where_go_to" | local }}\r\n        </div>\r\n    </div>\r\n    <div class="m4b-b2-article-item">\r\n        <div class="m4b-b2-article-item-edit m4b-not-select" onclick="onEditDateClick(event);">{{ "booking.edit" | local }}</div>\r\n        <div class="m4b-b2-article-item-body m4b-not-select m4b-pointer" onclick="onPrevDateClick(event);">\r\n            <div class="m4b-b2-article-item-head">\r\n                <span class="icon icon-icon_D007"></span>\r\n                <span class="text">{{ "booking.check_in" | local }}</span>\r\n            </div>\r\n            <div class="m4b-b2-article-item-text {{ calendarView == 1 ? \'hover\' : \'right\' }}">\r\n                <span class="text" e-if="checkin">{{ checkin | date formatString }}</span>\r\n            </div>\r\n        </div>\r\n        <div class="m4b-b2-article-item-body splitter">\r\n            <div class="m4b-b2-article-item-head">\r\n                <span class="text">-</span>\r\n            </div>\r\n            <div class="m4b-b2-article-item-text">\r\n                -\r\n            </div>\r\n        </div>\r\n        <div class="m4b-b2-article-item-body m4b-pointer m4b-not-select" onclick="onNextDateClick(event);">\r\n            <div class="m4b-b2-article-item-head">\r\n                <span class="icon icon-icon_D007"></span>\r\n                <span class="text">{{ "booking.check_out" | local }}</span>\r\n            </div>\r\n            <div class="m4b-b2-article-item-text {{ calendarView == 2 ? \'hover\' : \'right\' }}">\r\n                <span class="text" e-if="checkout">{{ checkout | date formatString }}</span>\r\n            </div>\r\n        </div>\r\n        <div class="m4b-b2-calendar-panel" e-if="calendarView" cmd="popupbox-attention" onclick="event.stopPropagation();"\r\n            onclose="calendarView = 0">\r\n            <swiper-calendar prev="{{ checkin }}" next="{{ checkout }}" month="{{ checkin }}" displayStyle="{{ calendarMode }}"\r\n                onchange="onCalendarChanged(event);"></swiper-calendar>\r\n        </div>\r\n    </div>\r\n    <div class="m4b-b2-article-item">\r\n        <div class="m4b-b2-article-item-edit m4b-not-select" onclick="guestsView = !guestsView">{{ "booking.edit" | local }}</div>\r\n        <div class="m4b-b2-article-item-body m4b-pointer" onclick="guestsView = !guestsView">\r\n            <div class="m4b-b2-article-item-head m4b-pointer m4b-not-select">\r\n                <span class="icon icon-icon_J007"></span>\r\n                <span class="text">{{ "booking.guests_per_room" | local }}</span>\r\n            </div>\r\n            <div class="m4b-b2-article-item-text">{{ guestsText }}</div>\r\n        </div>\r\n        <div class="m4b-b2-guests-panel" e-if="guestsView">\r\n            <counter-selector min="{{ 1 }}" max="{{ adultocc }}" value="{{ adults }}" onchange="onAdultsChanged(event);">\r\n                {{ "booking.adults" | local }}\r\n            </counter-selector>\r\n        </div>\r\n        <div class="m4b-b2-guests-panel" e-if="guestsView">\r\n            <counter-selector min="{{ 0 }}" max="{{ childocc }}" value="{{ children }}" onchange="onChildrenChanged(event);">\r\n                <div>{{ "booking.children" | local }}</div>\r\n                <div class="m4b-b2-guests-children-age">{{ "booking.below_12" | local maxchildage }}</div>\r\n            </counter-selector>\r\n        </div>\r\n    </div>\r\n    <div class="m4b-b2-article-item">\r\n        <div class="m4b-b2-article-item-edit m4b-not-select" onclick="roomsView = !roomsView">{{ "booking.edit" | local }}</div>\r\n        <div class="m4b-b2-article-item-body m4b-pointer" onclick="roomsView = !roomsView">\r\n            <div class="m4b-b2-article-item-head m4b-pointer m4b-not-select">\r\n                <span class="icon icon-icon_J010"></span>\r\n                <span class="text">{{ "booking.multiple" | local }}</span>\r\n            </div>\r\n            <div class="m4b-b2-article-item-text">{{ roomsText }}</div>\r\n        </div>\r\n        <div class="m4b-b2-rooms-panel" e-if="roomsView">\r\n            <counter-selector min="{{ 1 }}" max="{{ roomocc }}" value="{{ rooms }}" onchange="onRoomsChanged(event);">\r\n                {{ "booking.rooms" | local }}\r\n            </counter-selector>\r\n        </div>\r\n    </div>\r\n    <div class="m4b-b2-article-item">\r\n        <div class="m4b-b2-article-item-edit m4b-not-select" onclick="optionsView = !optionsView">{{ "booking.edit" | local }}</div>\r\n        <div class="m4b-b2-article-item-body m4b-pointer" onclick="optionsView = !optionsView">\r\n            <div class="m4b-b2-article-item-head m4b-pointer m4b-not-select">\r\n                <span class="icon icon-icon_P006"></span>\r\n                <span class="text">{{ "quickbook.codes_options" | local }}</span>\r\n            </div>\r\n            <div class="m4b-b2-article-item-text upper">\r\n                {{ optionsText }}\r\n            </div>\r\n        </div>\r\n        <div class="m4b-b2-article-item-desc right" e-if="promofailure">\r\n            <span class="icon icon-icon_I009"></span>\r\n            <span class="text">{{ "m4b.promo_apply_success" | local }}</span>\r\n        </div>\r\n        <div class="m4b-b2-article-item-desc error" e-if="promosuccess">\r\n            <span class="icon">i</span>\r\n            <span class="text">{{ "m4b.promo_apply_failure" | local }}</span>\r\n        </div>\r\n        <div class="m4b-b2-options-panel" e-if="optionsView">\r\n            <div class="m4b-b1-field-value {{ promoVerify ? promoVerify.valid ? \'passing\' : \'invalid\' : \'normal\' }}">\r\n                <label class="m4b-b1-field-shape">\r\n                    <span e-if="!promocode">{{ "booking.add_a_promo_code" | local }}</span>\r\n                </label>\r\n                <input class="m4b-b1-field-input m4b-uppercase" type="text" maxlength="20" disabled="{{ !selection }}"\r\n                    value="{{ promocode }}" oninput="onPromoCodeChanged(event);">\r\n                <label class="m4b-b1-field-wrong"><span class="icon-icon_I010"></span></label>\r\n                <label class="m4b-b1-field-right"><span class="icon-icon_I009"></span></label>\r\n            </div>\r\n            <div class="m4b-b1-field-invalid"><span class="text">{{ promoVerify && promoVerify.message }}</span></div>\r\n            <div class="m4b-b1-field-passing"><span class="text">{{ promoVerify && promoVerify.message }}</span></div>\r\n        </div>\r\n        <div class="m4b-b2-options-panel" e-if="optionsView">\r\n            <div class="m4b-b1-field-value {{ groupVerify ? groupVerify.valid ? \'passing\' : \'invalid\' : \'normal\' }}">\r\n                <label class="m4b-b1-field-shape">\r\n                    <span e-if="!groupcode">{{ "booking.enter_a_group_code" | local }}</span>\r\n                </label>\r\n                <input class="m4b-b1-field-input m4b-uppercase" type="text" maxlength="20" disabled="{{ !selection }}"\r\n                    value="{{ groupcode }}" oninput="onGroupCodeChanged(event);">\r\n                <label class="m4b-b1-field-wrong"><span class="icon-icon_I010"></span></label>\r\n                <label class="m4b-b1-field-right"><span class="icon-icon_I009"></span></label>\r\n            </div>\r\n            <div class="m4b-b1-field-invalid"><span class="text">{{ groupVerify && groupVerify.message }}</span></div>\r\n            <div class="m4b-b1-field-passing"><span class="text">{{ groupVerify && groupVerify.message }}</span></div>\r\n        </div>\r\n        <div class="m4b-b2-options-panel" e-if="optionsView">\r\n            <div class="m4b-b1-field-value {{ discoVerify ? discoVerify.valid ? \'passing\' : \'invalid\' : \'normal\' }}">\r\n                <label class="m4b-b1-field-shape">\r\n                    <span e-if="!discountcode">{{ "booking.add_a_discount_code" | local }}</span>\r\n                </label>\r\n                <input class="m4b-b1-field-input m4b-uppercase" type="text" maxlength="20" disabled="{{ !selection }}"\r\n                    value="{{ discountcode }}" oninput="onDiscountCodeChanged(event);">\r\n                <label class="m4b-b1-field-wrong"><span class="icon-icon_I010"></span></label>\r\n                <label class="m4b-b1-field-right"><span class="icon-icon_I009"></span></label>\r\n            </div>\r\n            <div class="m4b-b1-field-invalid"><span class="text">{{ discoVerify && discoVerify.message }}</span></div>\r\n            <div class="m4b-b1-field-passing"><span class="text">{{ discoVerify && discoVerify.message }}</span></div>\r\n        </div>\r\n        <div class="m4b-b2-options-panel" e-if="optionsView && isAmerican">\r\n            <div class="m4b-b1-field-value">\r\n                <label class="m4b-b1-field-radio">\r\n                    <input type="checkbox" checked="{{ AAA }}" onchange="onAAAChanged(event);">\r\n                    <span class="icon"></span>\r\n                    <span class="text">{{ "booking.AAA_CAA" | local }}</span>\r\n                </label>\r\n                <label class="m4b-b1-field-radio">\r\n                    <input type="checkbox" checked="{{ AARP }}" onchange="onAARPChanged(event);">\r\n                    <span class="icon"></span>\r\n                    <span class="text">{{ "booking.Senior_AARP" | local }}</span>\r\n                </label>\r\n            </div>\r\n            <div class="m4b-b1-field-value">\r\n                <label class="m4b-b1-field-radio">\r\n                    <input type="checkbox" checked="{{ GOV }}" onchange="onGOVChanged(event);">\r\n                    <span class="icon"></span>\r\n                    <span class="text">{{ "booking.Government" | local }}</span>\r\n                </label>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="m4b-b2-article-item" e-if="accessibleroom">\r\n        <label class="m4b-b1-field-radio">\r\n            <input type="checkbox" checked="{{ Accessible }}" onchange="onAccessibleChanged(event);">\r\n            <span class="icon"></span>\r\n            <span class="text">{{ "booking.show_accessible_rooms" | local }}</span>\r\n        </label>\r\n    </div>\r\n    <button class="m4b-b2-btn-query" type="button" e-if="paramUpdated" onclick="onQueryClick(event);">{{ "booking.update_results" | local }}</button>\r\n</div>'},{}],1229:[function(e,t,i){function n(e,t,i){var n="",c=t,l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];e&&(c=Math.round(Math.random()*(i-t))+t);for(var a=0;c>a;a++)pos=Math.round(Math.random()*(l.length-1)),n+=l[pos];return n}var c=(e("underscore"),e("backbone"),e("../../../ui/util")),l=e("../../../../../config/host"),a=e("backbone.marionette"),o=e("underscore.string/sprintf"),s=e("../m4b-tip-bar/view"),g=e("../../../../../config/host"),d=!1,I=!1,b=!1,C=0,u=0,m=0,p=0,h=!1;t.exports=a.ItemView.extend({getTemplate:function(){return this.options.failedPage?Handlebars.compile(e("./failTemplate.hbs")):Handlebars.compile(e("./template.hbs"))},ui:{file:'input[type="file"]',selector:".m4b-um-upload-selector",uploadButton:".m4b-um-upload-button",circledraw:".circle-content",circle:"circle",svg:"svg",circlesize:".circlesize",svgdraw:"path#svg-draw"},events:{"change @ui.file":"changeFile","click @ui.uploadButton":"uploadFile"},initialize:function(){var e=this;if(e.options.progress&&!e.options.failedPage){var t=c.queryparam();if(t.key){var i=new FormData;i.append("key",t.key),e.loadingSpeedInfo(i,e)}}},onRender:function(){this.drawSVG(C)},serializeData:function(){var e=this;return{progress:e.options.progress,uploadedName:e.options.progress||e.options.failedPage?c.queryparam().filename:"-",header:e.options.header,bottom:e.options.bottom,failedEmailUrl:e.options.failedEmailUrl||"/excel/Member.xlsx",failed:b,success:d,successFinal:I,successedItem:u,failedItem:m,total:p,percentage:p?(100*(u/p).toFixed(2)).toFixed(0)+"%":"0%",templateUrl:window.M4BMemberTemplateUrl?window.M4BMemberTemplateUrl.url:"/excel/Member.xlsx",failedUrl:location.href.replace("people","")+"&failedMemberList=true",successedUrl:location.href.replace("people","")+"&successMemberList=true"}},loadingSpeedInfo:function(e,t){var i=t;jQuery.ajax({url:l.getURL("api","business/PrimaryGuest/GetSpeedInfo"),type:"POST",data:e,processData:!1,contentType:!1,success:function(n){u=n.data.successed.length,m=n.data.failed.length,p=n.data.total,C=(u/p).toFixed(2),u+m==p?m>0?(b=!0,i.render()):(d=!0,i.render(),setTimeout(function(){I=!0,i.render()},5e3)):(i.render(),setTimeout(function(){i.loadingSpeedInfo(e,t)},500))},error:function(){}})},changeFile:function(){var e=this,t=e.ui.file.get(0).files[0];e.validateFile(t)?(e.ui.selector.addClass("uploaded").find("span").text(t.name),e.ui.uploadButton.addClass("active")):(e.ui.selector.removeClass("uploaded").find("span").text(i18n.t("m4b.click_select_file")),e.ui.uploadButton.removeClass("active"),e.tipView=new s({el:jQuery(".m4b-tip-bar-container").get(0),renderContent:h?i18n.t("m4b.max_file_size"):i18n.t("m4b.please_upload_a_XLS_file"),isError:!0}).render())},validateFile:function(e){var t=e.name.substring(e.name.lastIndexOf(".")).toLowerCase();if(!/.(xls|xlsx|csv)$/.test(t))return h=!1,!1;var i=e.size;return i=Math.round(i/1024*100)/100,i>5120?(h=!0,!1):(h=!1,!0)},uploadFile:function(){var e=this;if(e.ui.uploadButton.hasClass("active")){var t=e.ui.file.get(0).files[0],i=new FormData,a=n(!1,16);i.append("file",t),i.append("key",a),c.loading({container:e.el,errortimeout:5e3,promise:jQuery.ajax({url:l.getURL("api","business/PrimaryGuest/ImportMembers"),type:"POST",data:i,processData:!1,contentType:!1,success:function(i){i.success||-1!==i.status?location.href="/"+g.getLanguage()+"/business/members/people?key="+a+"&filename="+encodeURIComponent(t.name):(e.ui.selector.removeClass("uploaded").find("span").text(i18n.t("m4b.click_select_file")),e.ui.uploadButton.removeClass("active"),e.tipView=new s({el:jQuery(".m4b-tip-bar-container").get(0),renderContent:i.message,isError:!0}).render())},error:function(){}})})}},drawSVG:function(e){var t=this,e=1*e;du=360*e,temp=Math.max((1024-jQuery(window).width())/80,0),circledata=t.ui.circle.data(),circlesize=t.ui.circlesize.width(),r=circlesize/2,cx=r+4,cy=r+4,x=cy-r*Math.sin(2*Math.PI/360*(du+180)),y=cx+r*Math.cos(2*Math.PI/360*(du+180)),startY=cy-r,result=o("M "+cx+" "+startY+" A "+r+" "+r+" 0 %d 1 "+x+" "+y+" L "+x+" "+y,e-parseInt(e)<.5?0:1),1===e&&(result="M "+cx+" "+startY+" A "+r+" "+r+" 0 1 0 "+(cx+.1)+" "+startY+" L "+cx+" "+startY),t.ui.svg.attr({width:2*cx+4,height:2*cy+4}),t.ui.svgdraw.attr({d:result}),t.ui.circle.attr({r:r,cx:cx,cy:cy}),t.ui.circledraw.show()}})},{"../../../../../config/host":45,"../../../ui/util":2122,"../m4b-tip-bar/view":1226,"./failTemplate.hbs":1227,"./template.hbs":1228,backbone:8,"backbone.marionette":6,underscore:42,"underscore.string/sprintf":41}],1228:[function(e,t,i){t.exports='{{#unless progress}}\r\n<div class="m4b-um-download-container">\r\n    <p class="m4b-um-download-caption">\r\n        {{local \'m4b.download_the_template\'}}\r\n    </p>\r\n    <a href="{{templateUrl}}" class="m4b-um-download-link" target="_blank">\r\n        <span class="icon-icon_H008"></span><span>{{local \'m4b.download_XLS\'}}</span>\r\n    </a>\r\n</div>\r\n{{/unless}}\r\n<div class="m4b-um-upload-container {{#if progress}}m4b-um-upload-container-hide{{/if}}">\r\n    <p class="m4b-um-upload-header">\r\n        {{local \'m4b.upload_file\'}}\r\n    </p>\r\n    <div class="m4b-um-upload-selector {{#if progress}}uploaded progress{{/if}}">\r\n        <input type="file" {{#if progress}}disabled{{/if}}/>\r\n        <span>{{#if progress}}{{uploadedName}}{{else}}{{local \'m4b.click_select_file\'}}{{/if}}</span>\r\n    </div>\r\n    {{#if progress}}\r\n        <span class="m4b-um-uploaded">{{local \'m4b.uploaded\'}}</span>\r\n    {{else}}\r\n        <a href="###" class="m4b-um-upload-button">{{local \'m4b.upload\'}}</a>\r\n    {{/if}}\r\n</div>\r\n{{#if progress}}\r\n    <div class="m4b-um-progress-container">\r\n        <div class="m4b-um-circle-container">\r\n            <div class="circle-item circlesize">\r\n                <svg>\r\n                    <circle data-cx="46" data-cy="45" data-cr="43"></circle>\r\n                    <path id="svg-draw" {{#if successFinal}}class="success"{{/if}}></path>\r\n                </svg>\r\n            </div>\r\n            <div class="circle-item circle-item-content">\r\n\r\n                {{#if successFinal}}\r\n                    <span class="icon-icon_I009"></span>\r\n                {{else}}\r\n                    <p class="m4b-um-now-num">{{successedItem}}</p>\r\n                    <p class="m4b-um-total-num">{{local \'m4b.of\'}} {{total}}</p>\r\n                    <p class="m4b-um-num-caption">{{local \'m4b.processed\'}}</p>\r\n                {{/if}}\r\n\r\n            </div>\r\n        </div>\r\n\r\n        {{#if success}}\r\n                <p class="m4b-um-progress-num success">{{successedItem}} {{local \'m4b.successfully_processed\'}}</p>\r\n                <div>\r\n                    <p class="m4b-um-progress-caption success">{{local \'m4b.view_and_manage_members\'}}</p>\r\n                </div>\r\n                <a href={{successedUrl}} class="m4b-um-view-list-button">{{local \'m4b.view_member_lists\'}}</a>\r\n        {{else}}\r\n            {{#if failed}}\r\n                <p class="m4b-um-progress-num failed-success">{{successedItem}} {{local \'m4b.successfully_processed\'}}</p>\r\n                <p class="m4b-um-progress-num failed">{{failedItem}} {{local \'m4b.failed_due_to\'}}</p>\r\n                <div>\r\n                    <p class="m4b-um-progress-caption">{{local \'m4b.proceed_to_review\'}}</p>\r\n                </div>\r\n                <a href={{failedUrl}} class="m4b-um-view-list-button">{{local \'Review member lists\'}}</a>\r\n                {{else}}\r\n                <p class="m4b-um-progress-num">{{percentage}} {{local \'m4b.processed\'}}</p>\r\n                <p class="m4b-um-progress-caption">{{local \'m4b.leave_browser_open\'}}</p>\r\n            {{/if}}\r\n        {{/if}}\r\n    </div>\r\n{{/if}}';
},{}],1227:[function(e,t,i){t.exports='{{#if header}}\r\n    <div class="m4b-um-download-container m4b-um-download-container-hide">\r\n        <p class="m4b-um-download-caption">\r\n            {{local \'m4b.download_the_template\'}}\r\n        </p>\r\n        <a href="{{templateUrl}}" class="m4b-um-download-link">\r\n            <span class="icon-icon_H008"></span><span>{{local \'m4b.download_XLS\'}}</span>\r\n        </a>\r\n    </div>\r\n    <div class="m4b-um-upload-container m4b-um-upload-container-hide">\r\n        <p class="m4b-um-upload-header">\r\n            {{local \'m4b.upload_file\'}}\r\n        </p>\r\n        <div class="m4b-um-upload-selector uploaded progress">\r\n            <input type="file" disabled/>\r\n            <span>{{uploadedName}}</span>\r\n        </div>\r\n        <span class="m4b-um-uploaded">{{local \'m4b.uploaded\'}}</span>\r\n    </div>\r\n    <div class="m4b-um-review-container">\r\n        <h3 class="m4b-um-review-header">{{local \'m4b.review_member_list\'}}</h3>\r\n        <p class="m4b-um-review-caption">{{local \'m4b.review_all_details\'}}</p>\r\n    </div>\r\n{{/if}}\r\n{{#if bottom}}\r\n    <div class="m4b-um-download-container-bottom">\r\n        <h3 class="m4b-um-download-header">\r\n            {{local \'m4b.how_to_fix\'}}\r\n        </h3>\r\n        <p class="m4b-um-download-caption">\r\n            {{local \'m4b.download_failed_list\'}}\r\n        </p>\r\n        <a href="{{failedEmailUrl}}" class="m4b-um-download-link" target="_blank">\r\n            <span class="icon-icon_H008"></span><span>{{local \'m4b.download_XLS\'}}</span>\r\n        </a>\r\n    </div>\r\n    <div class="m4b-um-upload-container">\r\n        <p class="m4b-um-upload-header">\r\n            {{local \'m4b.upload_file\'}}\r\n        </p>\r\n        <div class="m4b-um-upload-selector">\r\n            <input type="file" />\r\n            <span>{{local \'m4b.click_select_file\'}}</span>\r\n        </div>\r\n        <a href="###" class="m4b-um-upload-button">{{local \'m4b.upload\'}}</a>\r\n    </div>\r\n{{/if}}\r\n'},{}],1212:[function(e,t,i){var n=e("elfjs"),c=e("moment");n.depend([n.Transform("local",{transform:function(e){var t=Array.prototype.slice.call(arguments,1);return i18n.t(e).replace(/\{(\d+)\}/g,function(e,i){return t[parseInt(i)]})}}),n.Transform("date",{transform:function(e,t){return"number"==typeof e?c.unix(e).format(t):c(e).format(t)}}),n.Transform("price-format",{transform:function(e){try{return accounting.formatNumber(e,2)}catch(t){return e}}}),n.Transform("num-format",{transform:function(e){try{return accounting.formatNumber(e)}catch(t){return e}}}),n.Directive("popupbox-attention",{constructor:function(){this.elements=[]},onInitial:function(e){this.intrude(e)&&n.attachEvent(document,"click",this)},onDispose:function(e){this.extrude(e)&&n.detachEvent(document,"click",this)},handleEvent:function(){for(var e=this.elements.slice(0),t=0;t<e.length;t++)n.dispatchEvent(e[t],n.createEvent("close",!0))},intrude:function(e){return this.elements.indexOf(e)<0?1===this.elements.push(e):!1},extrude:function(e){var t=this.elements.indexOf(e);return t>=0?(this.elements.splice(t,1),!this.elements.length):!1}}),n.Directive("keyboard-selection",{onInitial:function(e,t){n.attachEvent(e,"keydown",this)},onDispose:function(e,t){n.detachEvent(e,"keydown",this)},handleEvent:function(e){var t=e.target,i=t[n._GLOBAL_SYMBOL_RENDERER_];if(i){var c=i.element.owner;if(c){var l=c.refs["keyboard-selection"];if(l){var a=l.refs.content,o=38===e.keyCode?-1:40===e.keyCode?1:0;if(a&&o){e.preventDefault();var s=a.children;if(s.length>0){for(var r=o>0?-1:s.length,g=0;g<s.length;g++){var d=s[g].className.split(/\s/g),I=d.indexOf("hover");if(I>=0){r=g,d.splice(I,1),s[g].className=d.join(" ");break}}r+=o,0>r&&(r=s.length-1),r>=s.length&&(r=0),s[r].className+=" hover",l.scrollbar.scrollToElement(s[r],200)}}if(a&&13===e.keyCode){e.preventDefault();var s=a.children;if(s.length>0)for(var g=0;g<s.length;g++){var d=s[g].className.split(/\s/g),I=d.indexOf("hover");if(I>=0){n.dispatchEvent(s[g],n.createEvent("click",!0));break}}}}}}}}),n.Directive("hotel-detail-popup",{onInitial:function(e,t){},onDispose:function(e,t){}}),n.Directive("hotel-policy-popup",{onInitial:function(e,t){},onDispose:function(e,t){}})]),t.exports=n},{elfjs:10,moment:16}],2153:[function(e,t,i){function n(e){return e=e||new Date,new Date(e.getFullYear(),e.getMonth(),1)}var c=e("underscore"),l=e("backbone"),a=(e("backbone-validation"),e("backbone.marionette")),o=e("../../abmb/stateful.js"),s=e("../../weddings/calendar/view"),r=(e("underscore.string/sprintf"),e("../../ui/charsleft"),e("../../ui/util")),g=e("../../meetings/models/industry-collection"),d=(e("../../user/model"),e("../../../../config/host")),I=e("moment");ValidatorHelper=e("../../ui/validator");t.exports=a.LayoutView.extend(c.extend({},o,{max_dates:3,template:!1,regions:{"from-calendar-popup":".form-data-calendar-popup","to-calendar-popup":".to-data-calendar-popup"},events:{"click .placeholder":"onInputFocused","click input,select,textarea":"onInputFocused","focusin input,select,textarea":"onInputFocused","keypress input.date":"onDateFieldKeyPress","click a.modify":"onModifyRequestClick","click @ui.submit":"onSaveClick","click .toggles-furtherinfo i.checkbox":"onFurtherInfoClick","click @ui.img":function(){this.ui.item_img.attr("src",d.getURL("api","captcha/image?r="+Math.random()))},"click @ui.voice":function(){this.IF_CLICK_AUDIO&&this.autoPlay()},"change @ui.venue_country":function(e){var t=this,i=c.findWhere(window.Regions,{id:jQuery(e.currentTarget).val()});t.populateSelect(t.ui.venue_hotel,[],i18n.t("Wedding_Meeting.select_hotel")),t.ui.venue_hotel.prop("disabled",!0),t.populateSelect(t.ui.preferred_venue,[],i18n.t("Wedding_Meeting.please_select_your_prferred_venue")),t.ui.preferred_venue.prop("disabled",!0),t.citymodel=i,i&&i.city.length&&(t.populateSelect(t.ui.venue_city,t.setPublicData(i.city),i18n.t("Wedding_Meeting.select_city")),t.ui.venue_city.prop("disabled",!1))},"change @ui.venue_city":function(e){var t=this;t.populateSelect(t.ui.preferred_venue,[],i18n.t("Wedding_Meeting.please_select_your_prferred_venue")),t.ui.preferred_venue.prop("disabled",!0);var i=c.findWhere(t.citymodel.city,{id:jQuery(e.currentTarget).val()});t.hotelmodel=i,i&&i.hotel.length&&(t.populateSelect(t.ui.venue_hotel,t.setPublicData(i.hotel),i18n.t("Wedding_Meeting.select_hotel")),t.ui.venue_hotel.prop("disabled",!1))},"change @ui.venue_hotel":function(e){var t=this,i=c.findWhere(t.hotelmodel.hotel,{id:jQuery(e.currentTarget).val()});t.roommodel=i,i&&i.room.length&&(t.populateSelect(t.ui.preferred_venue,t.setPublicData(i.room),i18n.t("Wedding_Meeting.please_select_your_prferred_venue")),t.ui.preferred_venue.prop("disabled",!1))},"click @ui.require_rooms_from_date":function(e){this.__FromCalendarPopup()},"click @ui.require_rooms_to_date":function(e){this.__ToCalendarPopup()},"change @ui.start_time":function(e){this.__dellEndTime(jQuery(e.currentTarget).val())}},ui:{submit:"a.submit",form:"div.form",industry:"select[data-bind=industry]",attendees:"select[data-bind=attendees]",number_of_rooms:"select[data-bind=number_of_rooms]",country:"select[data-bind=country]",title:"select[data-bind=title]",img:"[data-feedback='img']",venue_country:"select[data-bind=venue_country]",voice:"[data-feedback='voice']",item_img:"[data-item='img']",venue_city:"select[data-bind=venue_city]",venue_hotel:"select[data-bind=venue_hotel]",preferred_venue:"select[data-bind=preferred_venue]",require_rooms_from_date:"[data-calendar='form']",require_rooms_to_date:"[data-calendar='to']",start_time:"select[data-bind=start_time]",end_time:"select[data-bind=end_time]"},onInitialize:function(){var e=this;e.isRFP=e.$el.hasClass("request-proposal")&&!e.$el.hasClass("request-brochure"),e.maxnumberofrooms=parseInt(e.$el.attr("data-maxnumberofrooms"))||15,e.user=r.getUser(),e.industries=new g},onFurtherInfoClick:function(e){jQuery(e.target).closest(".toggles-furtherinfo").addBack().toggleClass("checked")},__dellEndTime:function(e){var t=this,i=parseInt(e),n=t.__timeArry;n=n.slice(i),t.populateSelect(t.ui.end_time,n,"Please select time"),t.ui.end_time.prop("disabled",!1)},populateSelect:function(e,t,i){var n=Handlebars.compile("{{#each this}}<option value='{{id}}'>{{attributes.name}}{{/each}}");e.html(n([{id:"",attributes:{name:i}}].concat(t)))},__FromCalendarPopup:function(){var e=this,t=new s({min:null,max:null,prev:e.checkin,month:n(e.checkout||e.checkin)});t.on("date:changed",function(t){e.checkin=t,e.ui.require_rooms_from_date.find(".calendar-popup-text").html(I(e.checkin).format("DD MMM")),e.model.set("require_rooms_from_date",I(e.checkin).format("YYYY/MM/DD"))}),e.getRegion("to-calendar-popup").empty(),e.getRegion("from-calendar-popup").show(t)},__ToCalendarPopup:function(){var e=this,t=new s({min:null,max:null,prev:e.checkout,month:n(e.checkout||e.checkin)});t.on("date:changed",function(t){e.checkout=t,e.ui.require_rooms_to_date.find(".calendar-popup-text").html(I(e.checkout).format("DD MMM")),e.model.set("require_rooms_to_date",I(e.checkout).format("YYYY/MM/DD"))}),e.getRegion("from-calendar-popup").empty(),e.getRegion("to-calendar-popup").show(t)},onRender:function(){var e=this;e.IF_CLICK_AUDIO=!0,e.audio=new Audio,e.__timeArry=[],e.ui.start_time.find("option").each(function(){var t=jQuery(this);e.__timeArry.push(new l.Model({id:t.val(),name:t.text()}))}),e.dataPromise=jQuery.when(e.user.deferredPromise,e.ui.industry.length&&e.industries.fetch()),e.switchState("progress:incomplete"),e.dataPromise.then(function(){e.ui.industry.length&&e.populateSelect(e.ui.industry,e.industries.models,i18n.t("Wedding_Meeting.please_select_one")),e.ui.venue_country.length&&e.selectVenueCountry(),e.ui.number_of_rooms.length&&e.populateSelect(e.ui.number_of_rooms,c.range(1,e.maxnumberofrooms).map(function(e){return{id:e,attributes:{name:e}}}),i18n.t("Wedding_Meeting.please_select_number_of_rooms"))}),r.country_x(e.ui.country,"form.please_select_your_country"),r.titlegender(e.ui.title),ValidatorHelper.bind(e,{populateuserinfo:!0})},selectVenueCountry:function(){var e=this;e.populateSelect(e.ui.venue_country,e.setPublicData(window.Regions),i18n.t("Wedding_Meeting.select_country"));var t=r.getUrlParamQuestion();if(t&&t.id){var i=[],n=[],l=[],a=[],o=window.Regions;c.forEach(o,function(e){i.push(c.omit(e,"city")),c.forEach(e.city,function(t){n.push(c.assign({parentid:e.id},c.omit(t,"hotel"))),c.forEach(t.hotel,function(e){l.push(c.assign({parentid:t.id},c.omit(e,"room"))),c.forEach(e.room,function(t){a.push(c.assign({parentid:e.id},t))})})})});var s=c.find(i,{id:t.id}),g=c.find(n,{id:t.id}),d=c.find(l,{id:t.id}),I=c.find(a,{id:t.id});I&&(d=c.find(l,{id:I.parentid})),d&&(g=c.find(n,{id:d.parentid})),g&&(s=c.find(i,{id:g.parentid})),s&&(e.ui.venue_country.val(s.id).trigger("change"),g&&(e.ui.venue_city.val(g.id).trigger("change"),d&&(e.ui.venue_hotel.val(d.id).trigger("change"),I&&e.ui.preferred_venue.val(I.id))))}},autoPlay:function(){var e=this;e.IF_CLICK_AUDIO=!1,e.audio.setAttribute("src",d.getURL("api","captcha/voice?r="+Math.random())),e.audio.load(),e.audio.play(),e.audio.oncanplay=function(){e.audio.play()},e.audio.onended=function(){e.IF_CLICK_AUDIO=!0}},getPopupContainer:function(e){return e.parents("div.field").first().find(".datepopup")},onModifyRequestClick:function(){this.switchState("progress:incomplete")},hideDatePopups:function(){this.$(".datepopup").hide()},onInputFocused:function(e){var t=jQuery(e.target).siblings("input");return t.length?(t=jQuery(t[0]),this.hideDatePopups(),void this.getPopupContainer(t).show()):!1},onSaveClick:function(e){var t=this;return t.trigger("save:form"),t.model.isValid(!0)?r.loading({screenCenter:!0,errortimeout:5e3,container:document.body,promise:t.model.save({},{emulateForm:!0,emulateJSON:!0,headers:{"Content-Type":"application/json; charset=utf-8"},success:function(){var i=jQuery(e.target).prop("href");i&&(window.location.href=i),t.switchState("progress:complete"),t.$(".request-success").show(),r.scroll(0)},error:function(e,t){}})}):this.$("div.field.input-error").find("input,select").first().focus(),!1},setPublicData:function(e){return new l.Collection(e).models}}))},{"../../../../config/host":45,"../../abmb/stateful.js":72,"../../meetings/models/industry-collection":1202,"../../ui/charsleft":2058,"../../ui/util":2122,"../../ui/validator":2123,"../../user/model":2132,"../../weddings/calendar/view":2148,backbone:8,"backbone-validation":3,"backbone.marionette":6,moment:16,underscore:42,"underscore.string/sprintf":41}],2148:[function(e,t,i){var n=e("../../offers-details-2.0/01-sidebar/02-calendar/swiper-calendar/calendar-creator"),c=e("backbone.marionette");t.exports=c.ItemView.extend({template:!1,className:"form-data-calendar-popup-inner",onShow:function(){var e=this;e.onDestroy(),e._calendar=n(e.el,{style:1,displayStyle:1,min:e.options.min||new Date,max:e.options.max,prev:e.options.prev,month:e.options.month,onChange:function(t){e.trigger("date:changed",t.detail.prev),e.destroy()}})},initialize:function(){var e=this;e.cancelFN=jQuery.proxy(e.__undo,e)},__undo:function(e){var t=this;this.$el.parent().parent().has(e.target).length||(t.onDestroy(),jQuery(document).off("click",this.cancelFN))},onRender:function(){jQuery(document).off("click",this.cancelFN).on("click",this.cancelFN)},onDestroy:function(){this._calendar&&(this._calendar.dispose(),this._calendar=null)}})},{"../../offers-details-2.0/01-sidebar/02-calendar/swiper-calendar/calendar-creator":1530,"backbone.marionette":6}],1530:[function(e,t,i){var n=e("elfjs"),c=e("./calendar");t.exports=function(e,t){return n.render(n.createElement(c,t),e,!0)}},{"./calendar":1534,elfjs:10}],1534:[function(e,t,i){function n(e,t){var i=e.getFullYear(),n=e.getMonth(),c=e.getDate();return new Date(i,n,c+t).getTime()}function c(e,t){var i=e.getFullYear(),n=e.getMonth();return new Date(i,n+t,1)}var l=e("elfjs"),a=e("./calendar-container/calendar-container");t.exports=l.Component("swiper-calendar",{render:l.redactElement(e("./calendar.html"),a),constructor:function(){var e=new Date;this.min="min"in this.props?this.props.min:new Date(e.getFullYear(),e.getMonth(),e.getDate()),this.max=this.props.max,this.prev=this.props.prev,this.next=this.props.next,this.month=c(this.props.month||e,0),this._phase=this.style<2,this.tPrev=this.prev,this.tNext=this.next},get spans(){return Math.max(1,this.props.spans||1)},get style(){return this.props.displayStyle||0},get phase(){return 1==this.style?!0:2==this.style?!1:this._phase},set phase(e){this._phase=e},emitChanged:function(e){l.dispatchEvent(this,l.createEvent("change",!0,{min:this.min,max:this.max,prev:this.prev,next:this.next,month:this.month,spans:this.spans,phase:this.phase,completed:e}))},onSlidePrev:function(e){this.month=c(this.month,-1)},onSlideNext:function(e){this.month=c(this.month,1)},onItemClick:function(e){switch(this.style){case 0:this.phase?n(e.detail,this.spans)>this.max||(this.prev=e.detail,n(this.prev,this.spans)<this.next||(this.next=new Date(n(this.prev,this.spans))),this.phase=!1,this.emitChanged(!1)):n(e.detail,0-this.spans)<this.min||(this.next=e.detail,n(this.next,0-this.spans)>this.prev||(this.prev=new Date(n(this.next,0-this.spans))),this.emitChanged(!0));break;case 1:n(e.detail,this.spans)>this.max||(this.prev=e.detail,n(this.prev,this.spans)<this.next||(this.next=new Date(n(this.prev,this.spans))),this.emitChanged(!0));break;case 2:n(e.detail,0-this.spans)<this.min||(this.next=e.detail,n(this.next,0-this.spans)>this.prev||(this.prev=new Date(n(this.next,0-this.spans))),this.emitChanged(!0))}this.tPrev=this.prev,this.tNext=this.next},onItemEnter:function(e){this.phase?n(e.detail,this.spans)>this.max||(this.tPrev=e.detail,n(this.tPrev,this.spans)<this.tNext||(this.tNext=new Date(n(this.tPrev,this.spans)))):n(e.detail,0-this.spans)<this.min||(this.tNext=e.detail,n(this.tNext,0-this.spans)>this.tPrev||(this.tPrev=new Date(n(this.tNext,0-this.spans))))},onItemLeave:function(e){this.tPrev=this.prev,this.tNext=this.next}})},{"./calendar-container/calendar-container":1529,"./calendar.html":1533,elfjs:10}],1533:[function(e,t,i){t.exports='<calendar-container\r\n    min="{{ min }}"\r\n    max="{{ max }}"\r\n    prev="{{ tPrev }}"\r\n    next="{{ tNext }}"\r\n    month="{{ month }}"\r\n    onSlidePrev="onSlidePrev(event);"\r\n    onSlideNext="onSlideNext(event);"\r\n    onItemClick="onItemClick(event);"\r\n    onItemEnter="onItemEnter(event);"\r\n    onItemLeave="onItemLeave(event);"\r\n></calendar-container>'},{}],1529:[function(e,t,i){function n(e){return e?new Date(e.getFullYear(),e.getMonth(),1):void 0}function c(e,t){return new Date(e.getFullYear(),e.getMonth()+t,1)}var l=e("swiper"),a=e("elfjs"),o=e("../libs/elfjs/depends/date"),s=e("../libs/elfjs/depends/week"),r=e("../calendar-slider/calendar-slider");t.exports=a.Component("calendar-container",{render:a.redactElement(e("./calendar-container.html"),o,s,r),get minMonth(){return n(this.props.min)},get maxMonth(){return n(this.props.max)},get nowMonth(){return n(this.props.month)},get oweMonth(){return c(this.nowMonth,1)},get prevMonth(){return c(this.nowMonth,-this.initialSlide)},get leadMonth(){return c(this.prevMonth,1)},get nextMonth(){return c(this.leadMonth,1)},get through(){return this.minMonth<=this.maxMonth?Math.min(3,12*this.maxMonth.getFullYear()+this.maxMonth.getMonth()-(12*this.minMonth.getFullYear()+this.minMonth.getMonth())+1):3},get initialSlide(){return this.swiper?this.swiper.activeIndex:+this.nowMonth===+this.minMonth?0:+this.nowMonth===+this.maxMonth?this.through-1:1},onInitial:function(){this.swiper=new l(this.refs.swiper,{initialSlide:this.initialSlide,onTouchStart:this.onFlushView.bind(this),onSlidePrevEnd:this.onFlushView.bind(this),onSlideNextEnd:this.onFlushView.bind(this),onSlidePrevStart:this.onSlidePrev.bind(this),onSlideNextStart:this.onSlideNext.bind(this),onSlideChangeEnd:this.onFlushView.bind(this),onSlidePrev:this.onSlidePrev.bind(this),onSlideNext:this.onSlideNext.bind(this),runCallbacksOnInit:!1,cssWidthAndHeight:!0,calculateHeight:!0})},onDispose:function(){this.swiper.destroy(!0)},onClickPrev:function(){this.onFlushView(),this.swiper.swipePrev?this.swiper.swipePrev(!0):this.swiper.slidePrev&&this.swiper.slidePrev(!0)},onClickNext:function(){this.onFlushView(),this.swiper.swipeNext?this.swiper.swipeNext(!0):this.swiper.slideNext&&this.swiper.slideNext(!0)},onSlidePrev:function(){a.dispatchEvent(this,a.createEvent("SlidePrev",!0))},onSlideNext:function(){a.dispatchEvent(this,a.createEvent("SlideNext",!0))},onFlushView:function(){this.nowMonth<=this.minMonth||this.nowMonth>=this.maxMonth||(this.swiper.swipeTo?this.swiper.swipeTo(1,0,!1):this.swiper.slideTo&&this.swiper.slideTo(1,0,!1)),a.forceUpdate()}})},{"../calendar-slider/calendar-slider":1532,"../libs/elfjs/depends/date":1535,"../libs/elfjs/depends/week":1536,"./calendar-container.html":1528,elfjs:10,swiper:40}],1536:[function(e,t,i){var n=e("elfjs"),c=e("../../../../../../../global-booking-widget/prop-page/01-article/03-dates/calendar/locals"),l=e("../../../../../../../../../config/host").getLanguage(),a=["S","M","T","W","T","F","S"];t.exports=n.Transform("week",{transform:function(e){return"en"===l?a[e]:c.weeks_short[e]}})},{"../../../../../../../../../config/host":45,"../../../../../../../global-booking-widget/prop-page/01-article/03-dates/calendar/locals":935,elfjs:10}],1535:[function(e,t,i){var n=e("moment"),c=e("elfjs"),l=e("../../../../../../../../../config/host").getLanguage(),a="ja"===l||"zh"===l||"zh-tw"===l?"YYYY年 MM":"MMMM YYYY";t.exports=c.Transform("date",{transform:function(e){return n(e).format(a)}})},{"../../../../../../../../../config/host":45,elfjs:10,moment:16}],1532:[function(e,t,i){function n(e,t,i,n,c,l){for(var a=new Date(c.getFullYear(),c.getMonth()+l,c.getDate()),o=a.getFullYear(),s=a.getMonth(),r=new Date(o,s,1).getDay(),g=new Date(o,s+1,0).getDay(),d=new Date(o,s,0===r?1:1-r),I=new Date(o,s+1,6===g?0:6-g),b=[];d.getTime()<=I.getTime();d.setDate(d.getDate()+7))b.push([0,1,2,3,4,5,6].map(function(e){return new Date(d.getFullYear(),d.getMonth(),d.getDate()+e)}).map(function(c){return{value:c,state:c.getMonth()!=s?"none":e>c||c>t?"gray":c>i&&n>c?"over":c.getTime()===+i?"prev":c.getTime()===+n?"next":"hand"}}));return b}var c=e("elfjs"),l=!("ontouchstart"in window);t.exports=c.Component("calendar-slider",{render:c.redactElement(e("./calendar-slider.html")),get prevDate(){return n(this.props.min,this.props.max,this.props.prev,this.props.next,this.props.value,0)},get nextDate(){return n(this.props.min,this.props.max,this.props.prev,this.props.next,this.props.value,1)},onMouseClick:function(e){"none"!==e.state&&"gray"!==e.state&&c.dispatchEvent(this,c.createEvent("ItemClick",!0,e.value))},onMouseEnter:function(e){"none"!==e.state&&"gray"!==e.state&&l&&c.dispatchEvent(this,c.createEvent("ItemEnter",!0,e.value))},onMouseLeave:function(e){"none"!==e.state&&"gray"!==e.state&&l&&c.dispatchEvent(this,c.createEvent("ItemLeave",!0,e.value))}})},{"./calendar-slider.html":1531,elfjs:10}],1531:[function(e,t,i){t.exports='<div class="swiper-abreast-container">\r\n    <div class="swiper-abreast-prev">\r\n        <div e-for="week in prevDate" class="swiper-calendar-lump">\r\n            <div\r\n                    e-for="item in week"\r\n                    class="swiper-calendar-item {{ item.state }}"\r\n                    onclick="onMouseClick(item);"\r\n                    onmouseenter="onMouseEnter(item);"\r\n                    onmouseleave="onMouseLeave(item);"\r\n            >\r\n                <div class="swiper-calendar-mask"></div>\r\n                <div class="swiper-calendar-text">{{ item.value.getDate() }}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="swiper-abreast-next">\r\n        <div e-for="week in nextDate" class="swiper-calendar-lump">\r\n            <div\r\n                    e-for="item in week"\r\n                    class="swiper-calendar-item {{ item.state }}"\r\n                    onclick="onMouseClick(item);"\r\n                    onmouseenter="onMouseEnter(item);"\r\n                    onmouseleave="onMouseLeave(item);"\r\n            >\r\n                <div class="swiper-calendar-mask"></div>\r\n                <div class="swiper-calendar-text">{{ item.value.getDate() }}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],1528:[function(e,t,i){t.exports='<div class="swiper-calendar">\r\n    <div class="swiper-abreast-container">\r\n        <div class="swiper-abreast-prev">\r\n            <div class="swiper-calendar-lump head">\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">\r\n                        <span class="swiper-calendar-prev icon-icon_chervonLeft" e-if="!(nowMonth <= minMonth)" onclick="onClickPrev();"></span>\r\n                    </div>\r\n                </div>\r\n                <div class="swiper-calendar-name">\r\n                    <div class="swiper-calendar-text">\r\n                        {{ nowMonth | date }}\r\n                    </div>\r\n                </div>\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">\r\n                        <span class="swiper-calendar-next icon-icon_chervonRight" e-if="!(nowMonth >= maxMonth)" onclick="onClickNext();"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="swiper-abreast-next">\r\n            <div class="swiper-calendar-lump head">\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">\r\n                        <span class="swiper-calendar-prev icon-icon_chervonLeft" e-if="!(oweMonth <= minMonth)" onclick="onClickPrev();"></span>\r\n                    </div>\r\n                </div>\r\n                <div class="swiper-calendar-name">\r\n                    <div class="swiper-calendar-text">\r\n                        {{ oweMonth | date }}\r\n                    </div>\r\n                </div>\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">\r\n                        <span class="swiper-calendar-next icon-icon_chervonRight" e-if="!(oweMonth >= maxMonth)" onclick="onClickNext();"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="swiper-abreast-container">\r\n        <div class="swiper-abreast-prev">\r\n            <div class="swiper-calendar-lump week">\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">{{ 0 | week }}</div>\r\n                </div>\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">{{ 1 | week }}</div>\r\n                </div>\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">{{ 2 | week }}</div>\r\n                </div>\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">{{ 3 | week }}</div>\r\n                </div>\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">{{ 4 | week }}</div>\r\n                </div>\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">{{ 5 | week }}</div>\r\n                </div>\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">{{ 6 | week }}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="swiper-abreast-next">\r\n            <div class="swiper-calendar-lump week">\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">{{ 0 | week }}</div>\r\n                </div>\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">{{ 1 | week }}</div>\r\n                </div>\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">{{ 2 | week }}</div>\r\n                </div>\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">{{ 3 | week }}</div>\r\n                </div>\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">{{ 4 | week }}</div>\r\n                </div>\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">{{ 5 | week }}</div>\r\n                </div>\r\n                <div class="swiper-calendar-item">\r\n                    <div class="swiper-calendar-text">{{ 6 | week }}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="swiper-container" ref="swiper">\r\n        <div class="swiper-wrapper">\r\n            <div e-if="through >= 1" class="swiper-slide">\r\n                <calendar-slider min="{{props.min}}" max="{{props.max}}" prev="{{props.prev}}" next="{{props.next}}" value="{{prevMonth}}"></calendar-slider>\r\n            </div>\r\n            <div e-if="through >= 2" class="swiper-slide">\r\n                <calendar-slider min="{{props.min}}" max="{{props.max}}" prev="{{props.prev}}" next="{{props.next}}" value="{{leadMonth}}"></calendar-slider>\r\n            </div>\r\n            <div e-if="through >= 3" class="swiper-slide">\r\n                <calendar-slider min="{{props.min}}" max="{{props.max}}" prev="{{props.prev}}" next="{{props.next}}" value="{{nextMonth}}"></calendar-slider>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],2058:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("underscore.string/sprintf")),c=e("./autocreator");i=t.exports=c.extend({template:!1,initialize:function(){c.prototype.initialize.apply(this,arguments);var e=this,t=jQuery(n("[data-bind=%s]",e.$el.data("bind-to"))),i=parseInt(t.attr("mexlength"))||e.$el.data("limit");t.attr("maxlength",i).on("change keyup",function(){e.$el.text(i-t.val().length)})}},{selector:"[data-component=charsleft]"})},{"./autocreator":2052,backbone:8,underscore:42,"underscore.string/sprintf":41}],1202:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js"),l=e("./industry-model.js"),l=t.exports=n.Collection.extend({url:c.getURL("data","industries"),model:l})},{"../../../../config/host.js":45,"./industry-model.js":1203,backbone:8,underscore:42}],1203:[function(e,t,i){var n=(e("underscore"),e("backbone"));t.exports=n.Model.extend({defaults:{id:"",name:""}})},{backbone:8,underscore:42}],1194:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js"),l=e("./amenity-model.js");t.exports=n.Collection.extend({url:c.getURL("data","amenities"),model:l})},{"../../../../config/host.js":45,"./amenity-model.js":1195,backbone:8,underscore:42}],1195:[function(e,t,i){var n=(e("underscore"),e("backbone"));t.exports=n.Model.extend({defaults:{id:"",name:""},matches:function(t){var i=e("./DAO");return(!t.meetingss||i.matches(t.meetingss,{amenity:this}))&&(!t.meetings||t.meetings.matches({amenity:this}))}})},{"./DAO":1193,backbone:8,underscore:42}],1169:[function(e,t,i){var n=e("backbone.marionette"),c=e("./views/view-map"),l=e("./views/view-nav"),a=e("./views/view-card"),o=e("./views/view-list"),s=e("./views/view-attr"),r=e("./views/view-zoom"),g=e("./views/view-exit"),d=e("./views/view-full"),I=e("./views/view-mask"),b=e("../ui/util");t.exports=n.LayoutView.extend({regions:{map:"[data-maps-view='map']",nav:"[data-maps-view='nav']",card:"[data-maps-view='card']",list:"[data-maps-view='list']",attr:"[data-maps-view='attr']",zoom:"[data-maps-view='zoom']",exit:"[data-maps-view='exit']",full:"[data-maps-view='full']"},getTemplate:function(t){return Handlebars.compile(e("./template.hbs"))},serializeData:function(e){return{attrFirst:this.options.attrFirst}},onRender:function(){var e=this;e.mapView&&e.getRegion("map").show(e.mapView),e.navView&&e.getRegion("nav").show(e.navView),e.cardView&&e.getRegion("card").show(e.cardView),e.listView&&e.getRegion("list").show(e.listView),e.attrView&&e.getRegion("attr").show(e.attrView),e.zoomView&&e.getRegion("zoom").show(e.zoomView),e.exitView&&e.getRegion("exit").show(e.exitView),e.fullView&&e.getRegion("full").show(e.fullView),e.maskView&&e.getRegion("map").show(e.maskView),"ar-SA"===b.getCookie("website#lang")&&jQuery(e.$el).find(".mh-maps-attr-wrapper").addClass("rightAlign")},initialize:function(e){var t=this,i=jQuery(window).width()<769;if(e.map){var n=-1,C=!1;t.mapView=new c,t.mapView.on("marker:click",function(e){b.ismobile()&&(t.__setActive(e),t.__showPopup(e))}),t.mapView.on("marker:mouseenter",function(e){clearTimeout(n),t.__openWindow(e)}),t.mapView.on("marker:mouseleave",function(e){clearTimeout(n),C||(n=setTimeout(function(){t.__shutWindow(e)},1e3))}),t.mapView.on("window:mouseenter",function(e){C=!0,clearTimeout(n)}),t.mapView.on("window:mouseleave",function(e){C=!1,clearTimeout(n),t.__shutWindow(e)})}e.nav&&(t.navView=new l),e.card&&e.blog?t.cardView=new a({blog:!0}):e.card&&(t.cardView=new a),e.list&&(t.listView=new o),e.attr&&e.map&&(t.attrView=new s({isNewLook:e.isNewLook}),t.attrView.on("info:close",function(e){t.trigger("info:close",e)}),t.attrView.on("area:change",function(e){t.__fadeMarker(e)}),t.attrView.on("area:remove",function(e){t.__wellMarker(e)}),b.ismobile()||t.mapView&&t.mapView.on("marker:mouseenter",function(e){if(!e.content.$el.hasClass("disabled")){var i=jQuery(".mh-maps-attr-position"),n=jQuery(".maps-shown-wrapper"),c=e.content.$el,l=i.offset().left+i.width(),a=i.offset().top+i.height(),o=n.offset().top+n.height(),s=c.offset().left,r=c.offset().top;if(220>s-l&&180>r-a&&"#b71233"===e.content.model.get("rgba")&&!e.content.$el.hasClass("selected")&&(235>=o-a||s>=l)){
var g=220-(s-l);t.mapView.panBy({x:-g})}else if(175>s-l&&180>r-a&&(235>=o-a||s>=l)){var g=175-(s-l);t.mapView.panBy({x:-g})}else if(l>s&&180>r-a&&o-a>235){var d=180-(r-a);t.mapView.panBy({y:-d})}}})),e.zoom&&(t.zoomView=new r,t.zoomView.on("zoom:change",function(e){t.mapView&&t.mapView.addZoom(e)})),e.exit&&(t.exitView=new g,t.exitView.on("exit:click",function(e){t.trigger("exit:click",e),i&&(jQuery(".main-wrapper").removeClass("no-scroll"),jQuery(window).scrollTop(window.scrollTop))})),e.full&&(t.fullView=new d,t.fullView.on("full:click",function(e){t.trigger("full:click",e),i&&(window.scrollTop=jQuery(window).scrollTop(),jQuery(".main-wrapper").addClass("no-scroll"))})),!e.map&&e.mask&&(t.maskView=new I,t.maskView.on("maps:initailize",function(e){t.trigger("full:click",e)}))},__setActive:function(e){e.content.hasClass("disabled")||this.mapView&&this.mapView.setActive(e)},__showPopup:function(e){e.content.hasClass("disabled")||this.trigger("icon:click",e)},__openWindow:function(e){e.content.hasClass("disabled")||b.ismobile()||this.trigger("icon:hover",e)},__shutWindow:function(e){this.mapView&&(this.mapView.setActive({}),this.mapView.shutWindow(e))},__fadeMarker:function(e){this.mapView&&this.mapView.fadeMarker(e)},__wellMarker:function(e){this.mapView&&this.mapView.wellMarker(e)}})},{"../ui/util":2122,"./template.hbs":1168,"./views/view-attr":1183,"./views/view-card":1184,"./views/view-exit":1185,"./views/view-full":1186,"./views/view-list":1187,"./views/view-map":1188,"./views/view-mask":1189,"./views/view-nav":1190,"./views/view-zoom":1191,"backbone.marionette":6}],1190:[function(e,t,i){var n=(e("backbone"),e("backbone.marionette")),c=e("../helpers/requestAnimationProxy"),l=e("./nav/view-walking"),a=e("./nav/view-driving"),o=e("./nav/view-opening");t.exports=n.LayoutView.extend({ui:{addr:"[data-text='addr']",href:"[data-text='href']"},regions:{walking:"[data-nav-view='walking']",driving:"[data-nav-view='driving']",opening:"[data-nav-view='opening']"},template:function(t){return Handlebars.compile(e("../assets/template-nav.hbs"))(t)},className:function(){return"mh-maps-nav-view"},initialize:function(){this._defer=jQuery.Deferred()},onRender:function(){this._defer.resolve()},onDestroy:function(){this.__destory=!0},business:function(e){return jQuery.when(e,this._defer).then(c(this.__business,this))},navigation:function(e){return jQuery.when(e,this._defer).then(c(this.__navigation,this))},__business:function(e){this.getRegion("opening").empty();var t=e.get("openhours");t&&t.length&&this.getRegion("opening").show(new o({model:e})),e.get("url_href")?this.ui.href.html('<a target="_blank" href="'+e.get("url_href")+'">'+e.get("url_text")+"</a>"):this.ui.href.closest(".mh-maps-nav-link").hide(),jQuery.when(e.getAddress()).then(c(this.__address,this))},__navigation:function(e){this.__walking(e.walking),this.__driving(e.driving)},__address:function(e){this.__destory||this.ui.addr.html(e)},__walking:function(e){var t=this,i=new l({model:e});i.on("head:select",function(){t.getRegion("driving").currentView&&t.getRegion("driving").currentView.shrink(),t.trigger("nav:change",e)}),i.on("walking:print",function(){t.trigger("print","walking")}),t.getRegion("walking").empty(),t.getRegion("walking").show(i)},__driving:function(e){var t=this,i=new a({model:e});i.on("head:select",function(){t.getRegion("walking").currentView&&t.getRegion("walking").currentView.shrink(),t.trigger("nav:change",e)}),i.on("driving:print",function(){t.trigger("print","driving")}),t.getRegion("driving").empty(),t.getRegion("driving").show(i)}})},{"../assets/template-nav.hbs":1146,"../helpers/requestAnimationProxy":1149,"./nav/view-driving":1179,"./nav/view-opening":1180,"./nav/view-walking":1181,backbone:8,"backbone.marionette":6}],1181:[function(e,t,i){var n=e("backbone.marionette"),c=e("../../helpers/requestAnimationProxy");t.exports=n.ItemView.extend({ui:{head:".mh-maps-direction-head"},events:{"click .text-item a":function(e){this.ui.head.hasClass("selected")?this.ui.head.removeClass("selected"):(this.ui.head.addClass("selected"),this.trigger("head:select"))},"click [data-print='walking']":function(){this.trigger("walking:print")}},template:function(t){return Handlebars.compile(e("../../assets/nav/template-walking.hbs"))(t)},className:function(){return"mh-maps-walking mh-maps-direction"},initialize:function(){this._defer=jQuery.Deferred()},onRender:function(){this._defer.resolve()},shrink:function(){return jQuery.when(this._defer).then(c(this.__shrink,this))},__shrink:function(){this.ui.head.removeClass("selected")}})},{"../../assets/nav/template-walking.hbs":1139,"../../helpers/requestAnimationProxy":1149,"backbone.marionette":6}],1179:[function(e,t,i){var n=e("backbone.marionette"),c=e("../../helpers/requestAnimationProxy");t.exports=n.ItemView.extend({ui:{head:".mh-maps-direction-head"},events:{"click .text-item a":function(e){this.ui.head.hasClass("selected")?this.ui.head.removeClass("selected"):(this.ui.head.addClass("selected"),this.trigger("head:select"))},"click [data-print='driving']":function(){this.trigger("driving:print")}},template:function(t){return Handlebars.compile(e("../../assets/nav/template-driving.hbs"))(t)},className:function(){return"mh-maps-driving mh-maps-direction"},initialize:function(){this._defer=jQuery.Deferred()},onRender:function(){this._defer.resolve()},shrink:function(){return jQuery.when(this._defer).then(c(this.__shrink,this))},__shrink:function(){this.ui.head.removeClass("selected")}})},{"../../assets/nav/template-driving.hbs":1137,"../../helpers/requestAnimationProxy":1149,"backbone.marionette":6}],1189:[function(e,t,i){t.exports=e("../../city-map/maps/maps-mask/view")},{"../../city-map/maps/maps-mask/view":757}],1187:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:function(t){return Handlebars.compile(e("../assets/template-list.hbs"))(t)},className:function(){return"mh-maps-list-view"}})},{"../assets/template-list.hbs":1145,"backbone.marionette":6}],1186:[function(e,t,i){var n=e("backbone.marionette"),c=e("../helpers/requestAnimationProxy");t.exports=n.ItemView.extend({ui:{lbl:"label"},events:{"click a":function(){this.trigger("full:click")}},template:function(t){return Handlebars.compile(e("../assets/template-full.hbs"))(t)},className:function(){return"mh-maps-full-view"},initialize:function(){this._defer=jQuery.Deferred()},onRender:function(){this._defer.resolve()},setLabel:function(e){return jQuery.when(e,this._defer).then(c(this.__setLabel,this))},__setLabel:function(e){this.ui.lbl.html(e)}})},{"../assets/template-full.hbs":1144,"../helpers/requestAnimationProxy":1149,"backbone.marionette":6}],1185:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({events:{"click a":function(){this.trigger("exit:click")}},template:function(t){return Handlebars.compile(e("../assets/template-exit.hbs"))(t)},className:function(){return"mh-maps-exit-view"}})},{"../assets/template-exit.hbs":1143,"backbone.marionette":6}],1184:[function(e,t,i){var n=e("backbone"),c=e("backbone.marionette"),l=e("./card/view-scenic"),a=e("./card/view-beside"),o=e("../models/attraction"),s=e("../models/destination"),r=e("../helpers/requestAnimationProxy");t.exports=c.LayoutView.extend({ui:{added:"[data-card='added']",minus:"[data-card='minus']"},events:{"click @ui.added":function(){this._index<this._count-1&&(this.trigger("card:change",++this._index),this.model.set("index",this._index+1)),this.__setState()},"click @ui.minus":function(){this._index>0&&(this.trigger("card:change",--this._index),this.model.set("index",this._index+1)),this.__setState()}},regions:{info:"[data-card-view='info']"},template:function(t){return Handlebars.compile(e("../assets/template-card.hbs"))(t)},className:function(){return"mh-maps-card-view"},initialize:function(e){var t=this;this._index=0,this._count=0,this.blog=e.blog,this._defer=jQuery.Deferred(),this.model=new n.Model({blog:t.blog,index:t._index+1}),this.listenTo(this.model,"change",this.render)},onRender:function(){this.__setState(),this._defer.resolve()},setCount:function(e){this._count=e,this.model.set("count",e)},business:function(e){return jQuery.when(e,this._defer).then(r(this.__business,this))},__business:function(e){var t,i=this;i.getRegion("info").empty(),e instanceof o&&i.getRegion("info").show(t=new l({model:e})),e instanceof s&&i.getRegion("info").show(t=new a({model:e})),t&&t.on("ui:completed",function(){i.trigger("ui:completed")})},__setState:function(){0==this._index?this.ui.minus.addClass("disabled"):this.ui.minus.removeClass("disabled"),this._index==this._count-1?this.ui.added.addClass("disabled"):this.ui.added.removeClass("disabled")}})},{"../assets/template-card.hbs":1142,"../helpers/requestAnimationProxy":1149,"../models/attraction":1150,"../models/destination":1156,"./card/view-beside":1172,"./card/view-scenic":1173,backbone:8,"backbone.marionette":6}],1173:[function(e,t,i){var n=e("backbone.marionette"),c=e("../nav/view-opening"),l=e("../../helpers/requestAnimationProxy");t.exports=n.LayoutView.extend({ui:{addr:"[data-text='addr']",href:"[data-text='href']"},regions:{opening:"[data-card-view='opening']"},template:function(t){return Handlebars.compile(e("../../assets/card/template-scenic.hbs"))(t)},initialize:function(){jQuery.when(this._defer=jQuery.Deferred()).then(l(this.__information,this))},onRender:function(){var e=this;jQuery.when(e.model.getOpenday()).then(function(t){e._defer.resolve(t)})},onDestroy:function(){this.__destory=!0,this._defer.reject()},__information:function(e){this.getRegion("opening").empty(),this.getRegion("opening").show(new c({model:e})),e.get("url_href")?this.ui.href.html('<a href="'+e.get("url_href")+'">'+e.get("url_text")+"</a>"):this.ui.href.closest(".mh-maps-card-item").hide(),jQuery.when(e.getAddress()).then(l(this.__address,this))},__address:function(e){this.__destory||(this.ui.addr.html(e),this.trigger("ui:completed"))}})},{"../../assets/card/template-scenic.hbs":1130,"../../helpers/requestAnimationProxy":1149,"../nav/view-opening":1180,"backbone.marionette":6}],1180:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({ui:{head:".mh-maps-opening-head"},events:{"click .mh-maps-opening-head a":function(){this.ui.head.hasClass("selected")?this.ui.head.removeClass("selected"):this.ui.head.addClass("selected")}},template:function(t){return Handlebars.compile(e("../../assets/nav/template-opening.hbs"))(t)},className:function(){return"mh-maps-opening"}})},{"../../assets/nav/template-opening.hbs":1138,"backbone.marionette":6}],1172:[function(e,t,i){var n=e("backbone.marionette"),c=e("../../helpers/requestAnimationProxy");t.exports=n.ItemView.extend({ui:{info:"[data-panel='info']",price:"[data-text='price']",score:"[data-text='score']",ie18n:"[data-text='ie18n']"},template:function(t){return Handlebars.compile(e("../../assets/card/template-beside.hbs"))(t)},initialize:function(){jQuery.when(this._defer=jQuery.Deferred()).then(c(this.__information,this))},onRender:function(){var e=this;e.ui.info.hide(),jQuery.when(e.model.getOtherinfo()).then(function(t){e._defer.resolve(t)})},onDestroy:function(){this.__destory=!0,this._defer.reject()},__information:function(e){this.__destory||(e.get("startprice")&&(this.ui.price.html(e.get("startprice")),this.ui.ie18n.html(e.get("score_i18n")),this.ui.score.html(e.get("score")),this.ui.info.show()),this.trigger("ui:completed"))}})},{"../../assets/card/template-beside.hbs":1129,"../../helpers/requestAnimationProxy":1149,"backbone.marionette":6}],1183:[function(e,t,i){var n=e("backbone.marionette"),c=e("backbone"),l=e("../helpers/requestAnimationProxy");t.exports=n.LayoutView.extend({regions:{info:"[data-attr-view='info']",optionDom:"[data-attr-view='options']",area:"[data-attr-view='area']"},ui:{nano:".newlook-nano"},template:function(t){return Handlebars.compile(e("../assets/template-attr.hbs"))(t)},className:function(){return"mh-maps-attr-view"},initialize:function(e){this._defer=jQuery.Deferred(),this.model=new c.Model({isNewLook:e.isNewLook})},onRender:function(){var e=this;e.getRegion("info").on("show",function(t){t.on("info:close",function(t){e.trigger("info:close",t)})}),e.getRegion("optionDom").on("show",function(t){e.ui.nano.nanoScroller({destroy:!0}),e.ui.nano.nanoScroller({alwaysVisible:!0}),t.on("click:show",function(){e.ui.nano.nanoScroller({destroy:!0}),e.ui.nano.nanoScroller({alwaysVisible:!0})})}),e.getRegion("area").on("show",function(t){e.ui.nano.nanoScroller({destroy:!0}),e.ui.nano.nanoScroller({alwaysVisible:!0}),t.on("area:change",function(t){e.trigger("area:change",t)}),t.on("area:remove",function(t){e.trigger("area:remove",t)})}),e._defer.resolve()},showInfo:function(e){return jQuery.when(e,this._defer).then(l(this.__showInfo,this))},showArea:function(e){return jQuery.when(e,this._defer).then(l(this.__showArea,this))},showOptions:function(e){return jQuery.when(e,this._defer).then(l(this.__showOptions,this))},__showInfo:function(e){this.getRegion("info").empty(),this.getRegion("info").show(e)},__showArea:function(e){this.getRegion("area").empty(),this.getRegion("area").show(e)},__showOptions:function(e){this.getRegion("optionDom").empty(),this.getRegion("optionDom").show(e)}})},{"../assets/template-attr.hbs":1141,"../helpers/requestAnimationProxy":1149,backbone:8,"backbone.marionette":6}],1168:[function(e,t,i){t.exports='{{#if attrFirst}}\r\n    <!--fix the attr dom position-->\r\n    <div class="mh-maps-attr-wrapper">\r\n        <div class="mh-maps-attr-position" data-maps-view="attr"></div>\r\n    </div>\r\n    <div class="mh-maps-map-wrapper">\r\n        <div class="mh-maps-map-position"  data-maps-view="map" id="map"></div>\r\n    </div>\r\n    <div class="mh-maps-nav-wrapper">\r\n        <div class="mh-maps-nav-position"  data-maps-view="nav"></div>\r\n    </div>\r\n    <div class="mh-maps-card-wrapper">\r\n        <div class="mh-maps-card-position" data-maps-view="card"></div>\r\n    </div>\r\n    <div class="mh-maps-list-wrapper">\r\n        <div class="mh-maps-list-position" data-maps-view="list"></div>\r\n    </div>\r\n    <!--<div class="mh-maps-attr-wrapper">-->\r\n    <!--<div class="mh-maps-attr-position" data-maps-view="attr"></div>-->\r\n    <!--</div>-->\r\n    <div class="mh-maps-zoom-wrapper">\r\n        <div class="mh-maps-zoom-position" data-maps-view="zoom"></div>\r\n    </div>\r\n    <div class="mh-maps-exit-wrapper">\r\n        <div class="mh-maps-exit-position" data-maps-view="exit"></div>\r\n    </div>\r\n    <div class="mh-maps-full-wrapper">\r\n        <div class="mh-maps-full-position" data-maps-view="full"></div>\r\n    </div>\r\n{{else}}\r\n    <div class="mh-maps-map-wrapper">\r\n        <div class="mh-maps-map-position"  data-maps-view="map" id="map"></div>\r\n    </div>\r\n    <div class="mh-maps-nav-wrapper">\r\n        <div class="mh-maps-nav-position"  data-maps-view="nav"></div>\r\n    </div>\r\n    <div class="mh-maps-card-wrapper">\r\n        <div class="mh-maps-card-position" data-maps-view="card"></div>\r\n    </div>\r\n    <div class="mh-maps-list-wrapper">\r\n        <div class="mh-maps-list-position" data-maps-view="list"></div>\r\n    </div>\r\n    <div class="mh-maps-attr-wrapper">\r\n        <div class="mh-maps-attr-position" data-maps-view="attr"></div>\r\n    </div>\r\n    <div class="mh-maps-zoom-wrapper">\r\n        <div class="mh-maps-zoom-position" data-maps-view="zoom"></div>\r\n    </div>\r\n    <div class="mh-maps-exit-wrapper">\r\n        <div class="mh-maps-exit-position" data-maps-view="exit"></div>\r\n    </div>\r\n    <div class="mh-maps-full-wrapper">\r\n        <div class="mh-maps-full-position" data-maps-view="full"></div>\r\n    </div>\r\n{{/if}}\r\n'},{}],1188:[function(e,t,i){t.exports=e("../api/google/google.maps.view")},{"../api/google/google.maps.view":1127}],1163:[function(e,t,i){function n(e,t,i){return Z.route({origin:e,target:t,travel:i})}function c(e,t){return"boolean"==typeof t&&t?new A({model:e}):new b({model:e})}function l(e){return new C({model:e})}function a(e){return new u({model:e})}function o(e){return new m({model:e})}function s(e){return new p({model:e})}function r(e){return new h({model:e})}function g(e){return new G({model:e})}function d(e){return new I.Model(e)}var I=e("backbone"),b=e("./views/icon/view"),C=e("./views/area/view"),u=e("./views/options/view"),m=e("./views/info/view-active"),p=e("./views/info/view-beside"),h=e("./views/info/view-nearby"),G=e("./views/info/view-scenic"),A=e("./print/icon/view"),y=e("../../component/ui/util"),Z=e("./api/direction"),B=1,x=2,v=3,W=4;t.exports=function(e,t,i){return{createGroupsMarkerOptions:function(e,t){var i=e.sorts.get("color"),n=e.sorts.get("icon");return{model:e.model,sorts:e.sorts,token:W,position:{lat:e.model.get("lat"),lng:e.model.get("lng")},content:c(d({rgba:i,icon:n,count:e.count>1?e.count:void 0}),t)}},createScenicMarkerOptions:function(t,i){var n=e.categories.get(t.get("parent")),l=n?n.get("color"):"#0088ff",a=e.categories.get(t.get("category")),o=a?a.get("icon"):n?n.get("icon"):"icon-icon_A001";return{model:t,sorts:n,token:B,position:{lat:t.get("lat"),lng:t.get("lng")},content:c(d({rgba:l,icon:o,event:t.get("isevent")}),i)}},createTavernMarkerOptions:function(e,t){var i="#b71233",n="icon-icon_N010";return{model:e,token:x,position:{lat:e.get("lat"),lng:e.get("lng")},content:c(d({rgba:i,icon:n}),t)}},createLocateMarkerOptions:function(e,t){var i="#b71233",n="icon-icon_A001";return{model:e,token:v,position:{lat:e.get("lat"),lng:e.get("lng")},content:c(d({rgba:i,icon:n}),t)}},createTavernWindowOptions:function(e){return e.token!=v?{position:e.position||{lat:e.model.get("lat"),lng:e.model.get("lng")},content:this.createTavernView(e)}:void 0},createNearbyView:function(e,t,i){return"ar-SA"===y.getCookie("website#lang")&&e.set("rightAlign",!0),e.set("__LINK",!t),e.set("__CITYLINK",!i),r(e)},createTavernView:function(e){var c=this;if(e.token==B){e.model.set("__OS_ID",t.id),e.model.set("__COLOR",e.sorts?e.sorts.get("color"):"#fff"),e.model.set("__OTHER",e.model!=i);var l=t,a=e.model,r=g(e.model),d=jQuery.Deferred(),I=n(a,l,"WALKING"),b=n(a,l,"DRIVING");return r.on("before:destroy",function(){d.reject()}),jQuery.when(I,b).then(function(e,t){d.resolve({walking:e,driving:t})}),jQuery.when(d).then(function(i){r.information({walking:c.navigation(i.walking,"Walking",e.model,t),driving:c.navigation(i.driving,"Driving",e.model,t)})}),r}return e.token==x&&e.model==i?o(e.model):e.token==x&&e.model!=i?s(e.model):void 0},createBesideView:function(e){return s(e)},createIconView:function(e,t){return c(e,t)},createAreaView:function(e){return l(e)},createOptionsView:function(e){return a(e)},direction:function(e){return n(e.origin,e.target,e.travel)},navigation:function(e,t,i,n){var c=e.routes[0].legs[0];return new I.Model({steps:this.__steps(c.steps),distance:this.__distance(c.distance),duration:this.__duration(c.duration),start_address:c.start_address,reach_address:c.end_address,travel:t,origin:i,target:n,status:e})},__steps:function(e){return e.map(function(e){return{distance:this.__distance(e.distance),duration:this.__duration(e.duration),maneuver:this.__maneuver(e.maneuver),instructions:e.instructions}},this)},__maneuver:function(e){return"string"==typeof e?e?"icon-"+e:"":void 0},__distance:function(e){var t=e.value;return t=t>=1e3?(t/1e3).toFixed(1).replace(/0+$/,"").replace(/\.+$/,"")+" "+i18n.t("maps.direction_km"):t+" "+i18n.t("maps.direction_m"),{value:t,text:e.text}},__duration:function(e){var t=e.value;return t=t>=3600?Math.round(t/3600)+" "+i18n.t("maps.direction_hour"):t>=60?Math.round(t/60)+" "+i18n.t("maps.direction_mins"):t+" "+i18n.t("maps.direction_secs"),{value:t,text:e.text}}}}},{"../../component/ui/util":2122,"./api/direction":1115,"./print/icon/view":1165,"./views/area/view":1171,"./views/icon/view":1174,"./views/info/view-active":1175,"./views/info/view-beside":1176,"./views/info/view-nearby":1177,"./views/info/view-scenic":1178,"./views/options/view":1182,backbone:8}],1182:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:function(t){return Handlebars.compile(e("../../assets/options/template.hbs"))(t)},ui:{scrollBar:".mh-maps-option-list .nano",changeButton:".changeButton"},events:{"click @ui.changeButton":function(){this.model.set("showMore",!this.model.get("showMore")),this.render()}},className:function(){return"mh-maps-options"},initialize:function(){this.model.get("list").length>1&&this.model.set("more",!0),this.model.set("showMore",!0)},onRender:function(){this.trigger("click:show")}})},{"../../assets/options/template.hbs":1140,"backbone.marionette":6}],1177:[function(e,t,i){var n=e("backbone.marionette"),c=e("../../../ui/readmore/view");t.exports=n.ItemView.extend({template:function(t){return Handlebars.compile(e("../../assets/info/template-nearby.hbs"))(t)},ui:{scrollBar:".content-longdesc",readmore:"[data-component='readmore']"},className:function(){return"mh-maps-nearby"},onRender:function(){var e=this;setTimeout(function(){e.ui.scrollBar.nanoScroller({alwaysVisible:!0}),e.ui.readmore.length&&c.getInstance(e.ui.readmore).collapseContent()})}})},{"../../../ui/readmore/view":2110,"../../assets/info/template-nearby.hbs":1135,"backbone.marionette":6}],1176:[function(e,t,i){var n=e("backbone.marionette"),c=e("../../helpers/requestAnimationProxy");t.exports=n.ItemView.extend({ui:{info:"[data-panel='info']",price:"[data-text='price']",score:"[data-text='score']"},events:{"click .content-exit a":function(){this.trigger("info:close")}},template:function(t){return Handlebars.compile(e("../../assets/info/template-beside.hbs"))(t)},className:function(){return"mh-maps-beside"},initialize:function(){jQuery.when(this._defer=jQuery.Deferred()).then(c(this.__information,this))},onRender:function(){var e=this;e.ui.info.hide(),jQuery.when(e.model.getOtherinfo()).then(function(t){e._defer.resolve(t)})},onDestroy:function(){this.__destory=!0,this._defer.reject()},__information:function(e){this.__destory||e.get("startprice")&&(this.ui.price.html(e.get("startprice")),this.ui.score.html(e.get("score")),this.ui.info.show())}})},{"../../assets/info/template-beside.hbs":1134,"../../helpers/requestAnimationProxy":1149,"backbone.marionette":6}],1171:[function(e,t,i){var n=e("backbone.marionette"),c=e("../../../ui/util");t.exports=n.ItemView.extend({ui:{list:"ul.mh-maps-area-list li",nano:".nano"},events:{"click ul.mh-maps-area-list li .clazz":function(e){var t=jQuery(e.currentTarget).closest("li");t.hasClass("disabled")||t.hasClass("selected")||(this.setActive(this.__find(t.data("area"))),jQuery(".marker-cluster").parent().addClass("pins-container"),this.clusterSetActive(t),jQuery(".pins-container").bind("DOMNodeInserted",function(){jQuery(".marker-cluster").each(function(){jQuery(this).data("id")==t.data("area")||jQuery(this).data("parent")==t.data("area")||jQuery(this).hasClass("disabled")||jQuery(this).addClass("disabled")})}))},"click ul.mh-maps-area-list li .cross":function(e){this.removeAll(),jQuery(".pins-container").unbind("DOMNodeInserted")},"click ul.mh-maps-area-list li":function(e){var t=jQuery(e.currentTarget);t.hasClass("disabled")&&(this.removeAll(),jQuery(".pins-container").unbind("DOMNodeInserted"))},"click h6.mh-maps-area-name":function(e){var t=jQuery(e.currentTarget);t.hasClass("selected")?(t.removeClass("selected"),this.removeAll()):t.addClass("selected")}},template:function(t){return Handlebars.compile(e("../../assets/area/template.hbs"))(t)},className:function(){return"mh-maps-area"},initialize:function(){var e=this;this.__setNanoHeight=jQuery.proxy(this.__setHeight,this),this.model.on("change",function(){e.render()})},removeAll:function(){this.ui.list.removeClass(),jQuery(".marker-cluster").each(function(){jQuery(this).removeClass("disabled")}),this.trigger("area:remove")},setActive:function(e){this.ui.list.removeClass().filter("[data-area='"+e.id+"']").addClass("selected").siblings().addClass("disabled"),this.trigger("area:change",e)},clusterSetActive:function(e){jQuery(".marker-cluster").each(function(){jQuery(this).data("id")==e.data("area")||jQuery(this).data("parent")==e.data("area")||jQuery(this).hasClass("disabled")||jQuery(this).addClass("disabled")})},__find:function(e){var t=this.model.get("area");if(Array.isArray(t))for(var i=0;i<t.length;i++)if(t[i].model.id==e)return t[i].model},onRender:function(){"ar-SA"===c.getCookie("website#lang")&&this.model.set("rightAlign",!0)}})},{"../../../ui/util":2122,"../../assets/area/template.hbs":1128,"backbone.marionette":6}],1165:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},className:function(){return"mh-maps-icon-view"},addClass:function(e){this.$el&&this.$el.addClass(e)},hasClass:function(e){return this.$el?this.$el.hasClass(e):!1},removeClass:function(e){this.$el&&this.$el.removeClass(e)},closest:function(e){return this.$el?this.$el.closest(e):void 0}})},{"./template.hbs":1164,"backbone.marionette":6}],1164:[function(e,t,i){t.exports='<div style="color: {{rgba}}">\r\n    {{#if event}}\r\n        <div class="mh-maps-icon-sign event">\r\n            <img width="50" height="50" src="/assets/img/maps/event.gif" alt="">\r\n        </div>\r\n    {{else}}\r\n        <div class="mh-maps-icon-sign"></div>\r\n    {{/if}}\r\n    <div class="mh-maps-icon-back">\r\n        <svg xmlns="http://www.w3.org/2000/svg" width="38" height="46" viewBox="0 0 39 47">\r\n            <path d="M 18,45 L 6,32 A 18,18 0 1 1 32,32 Z" stroke-width="3"></path>\r\n            <path d="M 18,45 L 6,32 A 18,18 0 0 0 32,32 Z" stroke-width="3"></path>\r\n        </svg>\r\n    </div>\r\n    <div class="mh-maps-icon-fore">\r\n        <span class="{{icon}}"></span>\r\n    </div>\r\n    {{#if count}}\r\n        <div class="mh-maps-icon-numb">{{count}}</div>\r\n    {{/if}}\r\n</div>'},{}],1146:[function(e,t,i){t.exports='<div class="mh-maps-nav-info">{{local "maps.information"}}</div>\r\n<div class="mh-maps-nav-addr">\r\n    <span class="icon-item icon-icon_F0272"></span><span class="text-item" data-text="addr"></span>\r\n</div>\r\n<div data-nav-view="walking"></div>\r\n<div data-nav-view="driving"></div>\r\n<div class="mh-maps-nav-link">\r\n    <span class="icon-item icon-icon_F0262"></span><span class="text-item" data-text="href"></span>\r\n</div>\r\n<div data-nav-view="opening"></div>'},{}],1145:[function(e,t,i){arguments[4][296][0].apply(i,arguments)},{dup:296}],1144:[function(e,t,i){t.exports='<a href="javascript:void(0);"><span class="icon-icon_D0052"></span><label class="desktop">{{local "maps.view_map"}}</label><label class="mobile">{{local "maps.explore_on_map"}}</label></a>'},{}],1143:[function(e,t,i){t.exports='<a href="javascript:void(0);"><span class="icon-icon_B017"></span></a>'},{}],1142:[function(e,t,i){t.exports='<div data-card-view="info" class="mh-maps-card-cont"></div>\r\n<div class="mh-maps-card-button">\r\n    <a href="javascript:void(0);" data-card="minus" class="button-prev"><span class="icon-icon_chervonLeft"></span></a>\r\n    {{#if blog}}\r\n        <div class="index-container">{{index}}/{{count}}</div>\r\n    {{/if}}\r\n    <a href="javascript:void(0);" data-card="added" class="button-next"><span class="icon-icon_chervonRight"></span></a>\r\n</div>'},{}],1141:[function(e,t,i){t.exports='{{#if isNewLook}}\r\n    <div data-attr-view="info"></div>\r\n    <div class="newlook-nano nano" style="">\r\n        <div class="nano-content">\r\n            <div data-attr-view="options"></div>\r\n            <div data-attr-view="area"></div>\r\n        </div>\r\n    </div>\r\n{{else}}\r\n    <div data-attr-view="info"></div>\r\n    <div data-attr-view="area"></div>\r\n{{/if}}\r\n'},{}],1140:[function(e,t,i){t.exports='<div class="mh-maps-option-list">\r\n    <div class="{{#if showMore}}less{{else}}more{{/if}}">\r\n        <h3>{{local "maps.local_travel_options"}}</h3>\r\n        {{#each list}}\r\n            <div class="list">\r\n                <span class="{{icon}}"></span>\r\n                <div class="content">\r\n                    <p>{{name}}</p>\r\n                    <p>{{content}}</p>\r\n                </div>\r\n            </div>\r\n        {{/each}}\r\n    </div>\r\n    {{#if more}}\r\n        {{#if showMore}}\r\n            <div class="showMore changeButton">{{local "form.show"}} {{local "general.more"}} <span class="icon-icon_chervonDown"></span></div>\r\n        {{else}}\r\n            <div class="showLess changeButton">{{local "form.show"}} {{local "general.less"}} <span class="icon-icon_chervonUp"></span></div>\r\n        {{/if}}\r\n    {{/if}}\r\n</div>'},{}],1139:[function(e,t,i){t.exports='<div class="mh-maps-direction-head">\r\n    <span class="icon-item icon-icon_F035"></span><span class="text-item"><a href="javascript:void(0)">{{local "maps.walk"}} {{lower duration.value}} ({{lower distance.value}})</a></span>\r\n</div>\r\n<ul class="mh-maps-direction-list">\r\n    <li class="address">\r\n        <div class="distance-text">\r\n            <span class="icon-item icon-icon_H005"></span>\r\n            <a href="javascript: void(0);" data-print="walking">{{local "maps.print"}}</a>\r\n        </div>\r\n        <div class="instructions">{{start_address}}</div>\r\n    </li>\r\n    {{#each steps}}\r\n        <li>\r\n            <div class="maneuver-icon">\r\n                <span class="{{maneuver}}"><span class="path1"></span><span class="path2"></span><span class="path3"></span></span>\r\n            </div>\r\n            <div class="distance-text">{{distance.text}}</div>\r\n            <div class="instructions">{{{instructions}}}</div>\r\n        </li>\r\n    {{/each}}\r\n    <li class="address">\r\n        <div class="instructions">{{reach_address}}</div>\r\n    </li>\r\n</ul>'},{}],1138:[function(e,t,i){t.exports='<div class="mh-maps-opening-head">\r\n    <span class="icon-item icon-icon_E010"></span><span class="name-item">{{local "maps.open_today"}}:</span>\r\n    {{#if openhours.length}}\r\n        <span class="text-item"><a href="javascript:void(0);">{{#if opentoday}}{{opentoday}}{{else}}{{local "maps.closed"}}{{/if}}</a></span>\r\n    {{else}}\r\n        <span class="text-item-disabled">{{local "maps.closed"}}</span>\r\n    {{/if}}\r\n</div>\r\n<ul class="mh-maps-opening-list">\r\n    {{#each openhours}}\r\n        <li>\r\n            <div class="instructions">\r\n                <span class="name-item">{{{name}}}</span><span class="text-item">{{{text}}}</span>\r\n            </div>\r\n        </li>\r\n    {{/each}}\r\n</ul>'},{}],1137:[function(e,t,i){t.exports='<div class="mh-maps-direction-head">\r\n    <span class="icon-item icon-icon_F0232"></span><span class="text-item"><a href="javascript:void(0)">{{local "maps.drive"}} {{lower duration.value}} ({{lower distance.value}})</a></span>\r\n</div>\r\n<ul class="mh-maps-direction-list">\r\n    <li class="address">\r\n        <div class="distance-text">\r\n            <span class="icon-item icon-icon_H005"></span>\r\n            <a href="javascript: void(0);" data-print="driving">{{local "maps.print"}}</a>\r\n        </div>\r\n        <div class="instructions">{{start_address}}</div>\r\n    </li>\r\n    {{#each steps}}\r\n        <li>\r\n            <div class="maneuver-icon">\r\n                <span class="{{maneuver}}"><span class="path1"></span><span class="path2"></span><span class="path3"></span></span>\r\n            </div>\r\n            <div class="distance-text">{{distance.text}}</div>\r\n            <div class="instructions">{{{instructions}}}</div>\r\n        </li>\r\n    {{/each}}\r\n    <li class="address">\r\n        <div class="instructions">{{reach_address}}</div>\r\n    </li>\r\n</ul>'},{}],1135:[function(e,t,i){t.exports='<div class="mh-maps-nearby-back" style="background-image: url(\'{{heroimage}}\')"></div>\r\n<div class="mh-maps-nearby-text">\r\n    <div class="raise">\r\n        <h3>{{name}}</h3>\r\n        <!--MHS-1925 to burgess.li-->\r\n        <!--<h6 class="desktop">{{shortdesc}}</h6>-->\r\n        <!--<h6 class="mobile">-->\r\n            <!--<span data-component="readmore" data-maxline="2">-->\r\n                <!--<span class="readmore__content">-->\r\n                    <!--{{shortdesc}}-->\r\n                <!--</span>-->\r\n            <!--</span>-->\r\n        <!--</h6>-->\r\n    </div>\r\n</div>\r\n{{#if __LINK}}\r\n    <div class="mh-maps-nearby-link">\r\n        <a class="desktop" href="{{url}}"><span>{{local "maps.explore_neighborhood"}}</span></a>\r\n        <!--<a class="mobile" href="{{url}}"><span>{{local "maps.explore_neighborhood"}}</span></a>-->\r\n\r\n    </div>\r\n{{/if}}\r\n{{#if cityexplore}}\r\n    <div class="mh-maps-nearby-link">\r\n        <a class="desktop" href="{{cityurl}}"><span>{{cityexplore}}</span></a>\r\n        <!--<a class="mobile" href="{{cityurl}}"><span>{{cityexplore}}</span></a>-->\r\n    </div>\r\n{{/if}}\r\n';
},{}],1134:[function(e,t,i){t.exports='<div class="mh-maps-horizontal">\r\n    <div class="mh-maps-popup-picture" style="background-image: url(\'{{carouselimage}}\')"></div>\r\n    <div class="mh-maps-popup-content">\r\n        <div class="content-name" style="max-height: 4.7em">{{name}}</div>\r\n        <div class="content-info" data-panel="info">\r\n            <div>{{local "maps.from"}}</div>\r\n            <div class="price" data-text="price"></div>\r\n            <div>{{local "Property.night"}}</div>\r\n            <div><span class="icon-icon_E009"></span><span data-text="score" style="margin-left: 2px"></span></div>\r\n        </div>\r\n        <div class="content-drop">\r\n            <div class="bars">\r\n                <a class="wgt-sqbutton-blue" target="_blank" href="{{url}}">{{local "maps.hotel_details"}}</a>\r\n                <a class="wgt-sqbutton-blue" target="_blank" href="{{url}}#rooms">{{local "Property.book_room"}}</a>\r\n            </div>\r\n        </div>\r\n        <div class="content-exit">\r\n            <a href="javascript:void(0);"><span class="icon-icon_B017"></span></a>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="mh-maps-delta"><div class="mh-maps-delta-mask"></div></div>'},{}],1130:[function(e,t,i){t.exports='<div class="mh-maps-card-info">{{name}}</div>\r\n{{#if isevent}}\r\n    <div class="mh-maps-card-item">\r\n        <span class="icon-item icon-icon_D007"></span><span class="text-item">{{date-with-format st_date "DD MMM"}} - {{date-with-format end_date "DD MMM YYYY"}}</span>\r\n    </div>\r\n{{/if}}\r\n<div class="mh-maps-card-item">\r\n    <span class="icon-item icon-icon_F0272"></span><span class="text-item" data-text="addr"></span>\r\n</div>\r\n<div class="mh-maps-card-item">\r\n    <span class="icon-item icon-icon_F0262"></span><span class="text-item" data-text="href"></span>\r\n</div>\r\n<div data-card-view="opening"></div>'},{}],1129:[function(e,t,i){t.exports='<div class="mh-maps-card-info">{{name}}</div>\r\n<div class="mh-maps-card-item">\r\n    <span class="icon-item icon-icon_F0272"></span><span class="text-item">{{address}}</span>\r\n</div>\r\n<div class="mh-maps-card-item">\r\n    <span class="icon-item icon-icon_F0262"></span><span class="text-item"><a href="{{url}}">{{local "maps.visit_the_hotel"}}</a></span>\r\n</div>\r\n<div class="mh-maps-card-item" data-panel="info">\r\n    <div class="info-item">{{local "maps.from"}}</div>\r\n    <div class="info-item" style="font-size: 3rem;">\r\n        <div class="score">\r\n            <span class="icon-icon_E009"></span>\r\n            <span data-text="score" style="font-weight: bold;"></span>\r\n        </div>\r\n        <div class="price" data-text="price">&nbsp;</div>\r\n    </div>\r\n    <div class="info-item">\r\n        <div class="score" data-text="ie18n"></div>\r\n        <div>{{local "Property.night"}}</div>\r\n    </div>\r\n</div>'},{}],1128:[function(e,t,i){t.exports='{{#if area.length}}\r\n    <h6 class="mh-maps-area-name">{{local "maps.area_summary"}}</h6>\r\n    <ul class="mh-maps-area-list">\r\n    {{#if rightAlign}}\r\n         {{#each area}}\r\n             <li data-area="{{model.id}}">\r\n                 <div class="clazz">\r\n                    <label>{{model.attributes.name}}</label>\r\n                     <span class="{{model.attributes.icon}}"></span>\r\n                 </div>\r\n                 <div class="count" style="background-color: {{model.attributes.color}}">{{count}}</div>\r\n                 <div class="cross">\r\n                     <a href="javascript:void(0);"><span class="icon-icon_B017"></span></a>\r\n                 </div>\r\n             </li>\r\n         {{/each}}\r\n    {{else}}\r\n         {{#each area}}\r\n            <li data-area="{{model.id}}">\r\n                <div class="clazz">\r\n                    <span class="{{model.attributes.icon}}"></span>\r\n                    <label>{{model.attributes.name}}</label>\r\n                </div>\r\n                <div class="count" style="background-color: {{model.attributes.color}}">{{count}}</div>\r\n                <div class="cross">\r\n                    <a href="javascript:void(0);"><span class="icon-icon_B017"></span></a>\r\n                </div>\r\n            </li>\r\n        {{/each}}\r\n    {{/if}}\r\n    </ul>\r\n{{/if}}'},{}],1114:[function(e,t,i){var n=e("./models/attractions"),c=e("./models/collections"),l=e("./models/destinations"),a=e("./models/categories"),o=e("./models/locations"),s=new n,r=new c,g=new l,d=new a,I=new o;t.exports=jQuery.when(s.fetch(),r.fetch(),g.fetch(),d.fetch(),I.fetch()).then(function(){return{attractions:s,collections:r,destinations:g,categories:d,locations:I}})},{"./models/attractions":1151,"./models/categories":1152,"./models/collections":1155,"./models/destinations":1157,"./models/locations":1159}],1159:[function(e,t,i){var n=e("backbone"),c=e("./location"),l=e("../../../../config/host");t.exports=n.Collection.extend({model:c,url:function(){return l.getURL("data","locations")},children:function(e){return this.where({parentid:e})}})},{"../../../../config/host":45,"./location":1158,backbone:8}],1158:[function(e,t,i){arguments[4][1153][0].apply(i,arguments)},{backbone:8,dup:1153}],1157:[function(e,t,i){var n=e("backbone"),c=e("./destination"),l=e("../../../../config/host");t.exports=n.Collection.extend({model:c,url:function(){return l.getURL("data","destinations")},children:function(e){return this.where({locationid:e})}})},{"../../../../config/host":45,"./destination":1156,backbone:8}],1156:[function(e,t,i){var n=e("backbone"),c=e("./neighborhood"),l=e("./otherinfo");t.exports=n.Model.extend({parse:function(e){if(Array.isArray(e.nearbytransport)){e.nearbytransport=e.nearbytransport.slice(0,2);for(var t=0;t<e.nearbytransport.length;t++)/Plane/i.test(e.nearbytransport[t].Key)&&(e.nearbytransport[t].Key="_F0274"),/Transit/i.test(e.nearbytransport[t].Key)&&(e.nearbytransport[t].Key="_F0332")}return e},getNeighborhood:function(){var e=this;if(void 0==e._neighbor){var t=new c;t.destination=e,e._neighbor=jQuery.when(t.fetch()).then(function(){return t})}return e._neighbor},getOtherinfo:function(){var e=this;if(void 0==e._otherinfo){var t=new l;t.destination=e,e._otherinfo=jQuery.when(t.fetch()).then(function(){return t})}return e._otherinfo}})},{"./neighborhood":1160,"./otherinfo":1162,backbone:8}],1162:[function(e,t,i){var n=e("backbone"),c=e("../../../../config/host"),l=e("../../ui/util");t.exports=n.Model.extend({url:function(){return c.getURL("api","data/property/"+this.destination.id+"/otherInfo")},parse:function(e){var t=l.getRatingScoreKey(e);return t?e.score_i18n=t.isKey?i18n.t(t.text):t.text:e.score_i18n="",e.startprice&&(e.startprice=e.startprice.replace(/([a-z]*)(.*)/i,"<sup>$1</sup> <span>$2</span>")),e}})},{"../../../../config/host":45,"../../ui/util":2122,backbone:8}],1160:[function(e,t,i){var n=e("backbone"),c=e("../../../../config/host");t.exports=n.Model.extend({url:function(){return c.getURL("api","neighbor/"+this.destination.id)},getRegion:function(){var e={},t=this.get("shape");if(t){if(t=new Function("return"+t)(),t.center){var i=new Function("return ["+t.center+"]")();e.center={lat:i[0],lng:i[1]}}if(t.circle&&(e.radius=+t.circle),t.polygon){e.paths=[];for(var n=new Function("return ["+t.polygon+"]")(),c=0;c<n.length;c+=2)e.paths.push({lat:n[c],lng:n[c+1]})}t.zoom&&(e.zoom=+t.zoom),e.type=t.type}return e}})},{"../../../../config/host":45,backbone:8}],1155:[function(e,t,i){var n=e("backbone"),c=e("./collection"),l=e("../../../../config/host");t.exports=n.Collection.extend({model:c,url:function(){return l.getURL("data","collections")}})},{"../../../../config/host":45,"./collection":1154,backbone:8}],1154:[function(e,t,i){arguments[4][1153][0].apply(i,arguments)},{backbone:8,dup:1153}],1151:[function(e,t,i){var n=e("backbone"),c=e("./attraction"),l=e("../../../../config/host");t.exports=n.Collection.extend({model:c,url:function(){var e=jQuery('[data-review="explore"] .maps-shown-wrapper').data("locationid");return l.getURL("api","neighbor/attractionall"+(e?"?loc="+e:""))},children:function(e){return this.filter(function(t){return e.contains({lat:t.get("lat"),lng:t.get("lng")})})}})},{"../../../../config/host":45,"./attraction":1150,backbone:8}],1150:[function(e,t,i){var n=e("backbone"),c=e("./openday");t.exports=n.Model.extend({parse:function(e){return e.thumbnailimage&&(e.bigimage=e.thumbnailimage.replace(/\?.*$/,"")),""==e.category&&(e.city=null,e.locationid=null),e},getOpenday:function(){if(void 0==this._openday){var e=new c;e.attraction=this,this._openday=jQuery.when(e.fetch()).then(function(){return e})}return this._openday}})},{"./openday":1161,backbone:8}],1161:[function(e,t,i){var n=e("backbone"),c=e("../api/geocoder"),l=e("../../../../config/host"),a=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],o=(new Date).getDay();t.exports=n.Model.extend({url:function(){return l.getURL("api","neighbor/attraction/"+this.attraction.id)},parse:function(e){if(Array.isArray(e.openhours)){for(var t=new Array(7),i=0;i<e.openhours.length;i++){var n=e.openhours[i].key,c=e.openhours[i].value,l=a.indexOf(n);l>-1&&((l+1&7)==o?(e.opentoday=c,t[l]={name:"<b>"+n+":</b>",text:"<b>"+c+"</b>"}):t[l]={name:n+":",text:c})}e.openhours=t.filter(function(e){return e})}return Array.isArray(e.url)&&e.url.length>0&&(e.url_text=e.url[0].text||e.url[0].href,e.url_href=e.url[0].href),e.address=e.address||this.attraction.get("address"),e},getAddress:function(){var e=this,t=jQuery.Deferred();return e.get("address")?t.resolve(this.get("address")):c.geocode({lat:e.get("lat")||e.attraction.get("lat"),lng:e.get("lng")||e.attraction.get("lng")}).then(function(i){e.set("address",i),t.resolve(i)}),t.promise()}})},{"../../../../config/host":45,"../api/geocoder":1116,backbone:8}],1116:[function(e,t,i){function n(e){var t=jQuery.Deferred();return"function"==typeof e.then?e.then(function(e){t.resolve(e)},function(e){t.reject(e)}):t.resolve(e),t.promise()}var c=e("./google/google.maps.geocoder");t.exports={geocode:function(e){return jQuery.when(n(c)).then(function(t){return t.geocode(e)})}}},{"./google/google.maps.geocoder":1124}],1124:[function(e,t,i){var n=e("./google.maps.api");t.exports={then:function(e,t){return n.then(function(e){var t=new e.maps.Geocoder;return{geocode:function(i){var n=jQuery.Deferred(),c=new e.maps.LatLng(i.lat,i.lng);return t.geocode({location:c},function(t,i){i===e.maps.GeocoderStatus.OK?n.resolve((t[0]||{}).formatted_address):n.reject(i)}),n.promise()}}})}}},{"./google.maps.api":1120}],1082:[function(e,t,i){var n=e("backbone.marionette"),c=e("./popup-region.js");t.exports=n.LayoutView.extend({template:!1,regions:{popup:{selector:".popupRegion",regionClass:c}}})},{"./popup-region.js":1083,"backbone.marionette":6}],1083:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../abmb/stateful.js"),a=(e("../ui/util"),e("./assets/popup.sass"),n.extend({},l,{constructor:function(e){c.Region.call(this,e),this.switchState("popup:hide")},onShow:function(e,t,i){var n=this;this.$el.on("click",function(t){t.target==n.el&&n.triggerMethod("req:close",e)}).on("touchmove",function(e){return jQuery(e.target).closest(".iScroll-wrapper").data("cancel")?void 0:!1}),this.switchState("popup:show")},onEmpty:function(e,t,i){this.$el.off("click").off("touchmove"),this.switchState("popup:hide")},onSwap:function(){this.$el.off("click").off("touchmove")},empty:function(e){var t=this;jQuery.when(t.currentView.beforeEmpty?t.currentView.beforeEmpty():jQuery.Deferred().resolve()).done(function(){c.Region.prototype.empty.call(t,e)})}}));t.exports=c.Region.extend(a)},{"../abmb/stateful.js":72,"../ui/util":2122,"./assets/popup.sass":1081,"backbone.marionette":6,underscore:42}],1081:[function(e,t,i){t.exports=e("sassify")(".popupRegion {   position: fixed;   top: 0;   bottom: 0;   left: 0;   right: 0;   z-index: 9999;   background-color: rgba(0, 0, 0, 0.6); }   .popupRegion.popup-show {     display: block; }   .popupRegion.popup-hide {     display: none; }  ")},{sassify:36}],1068:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("../model/model"),l=(e("../../../ui/util"),e("../assets/template.hbs"));Slick=e("../../../ui/slick/slick"),t.exports=GalleryView=n.LayoutView.extend({events:{"click .carouselbtn-previous":"doSwitchPrev","click .carouselbtn-next":"doSwitchNext","click .ins-imageItem":"showDetail","click .ins-gallery-overlay-container__btn__left":"doOverlaySwitchPrev","click .ins-gallery-overlay-container__btn__right":"doOverlaySwitchNext","click .gallery__container__content__right__top__btn":"setOverlay","click .play":"playVideo"},template:Handlebars.compile(l),ui:{videoSlide:".videoSlide"},initialize:function(e){var t=this;e.HashTag&&e.HashTag.length>0&&(t.model=new c({HashTag:e.HashTag,Layout:e.Layout}),t.model.fetch().then(function(){t.render()}))},onRender:function(){var e=this;this.currentSlide=this.$(".ins-gallery-slick-container"),this.initialSlick(),this.initialOverlaySlick(),jQuery(window).on("keyup",function(t){return 37==t.keyCode||39==t.keyCode||27==t.keyCode?(37==t.keyCode?e.doOverlaySwitchPrev():39==t.keyCode?e.doOverlaySwitchNext():27==t.keyCode&&e.setOverlay(),t.preventDefault(),!1):void 0})},playVideo:function(e){var t=this.$(e.target).parent(),i=t.find("video");this.$(e.target).hide(),t.find(".video-placeholder").hide(),i.removeClass("opacity-zero");var n=i[0];n.play(),this.monitorPlayEnd(n)},monitorPlayEnd:function(e){var t=jQuery(e);t.on("ended",function(){t.addClass("opacity-zero"),t.parent().find(".play").show(),t.parent().find(".video-placeholder").show()})},closeVideo:function(){var e=this.ui.videoSlide,t=e.find("video");t.each(function(){var e=jQuery(this);e[0].currentTime=0,e[0].pause(),e.addClass("opacity-zero"),e.parent().find(".play").show(),e.parent().find(".video-placeholder").show()})},initialSlick:function(e){this.slicked?(this.currentIndex=this.currentSlide.slick("slickCurrentSlide"),this.currentSlide.slick("unslick"),this.slicked=!1):(this.slicked=!1,this.currentIndex=0),this.currentSlide=this.$(".ins-carousel-slick-container").slick({speed:800,infinite:!0,draggable:!1,arrows:!1,swipe:!0,slidesToShow:1,slidesToScroll:1,cssEase:"cubic-bezier(0,.96,.54,1.01)",rtl:"rtl"==jQuery("html").attr("dir")}),this.slicked=!0,"undefined"!=typeof e&&this.currentSlide.slick("slickGoTo",parseInt(e))},doSwitchPrev:function(){this.doSwitch("prev")},doSwitchNext:function(){this.doSwitch("next")},doSwitch:function(e){clearInterval(this.intervalAuto),"prev"==e&&this.currentSlide.slick("slickPrev"),"next"==e&&this.currentSlide.slick("slickNext")},setOverlay:function(e){var t=this;1==e?jQuery(".gallery").fadeIn("500",function(){document.documentElement.scrollTop=jQuery(".gallery").data("scrollTop")}):(t.closeVideo(),jQuery(".gallery").fadeOut("fast",function(){document.documentElement.scrollTop=jQuery(".gallery").data("scrollTop")}))},showDetail:function(e){var t=this,i=jQuery(e.currentTarget),n=jQuery(".gallery__container *[data-id="+i.data("id")+"]").parent().attr("data-slick-index"),c=document.documentElement.scrollTop;jQuery(".gallery").data("scrollTop",c),t.setOverlay(1),t.initialOverlaySlick(n)},doOverlaySwitchPrev:function(){this.closeVideo(),this.currentOverlaySlide.slick("slickPrev")},doOverlaySwitchNext:function(){this.closeVideo(),this.currentOverlaySlide.slick("slickNext")},initialOverlaySlick:function(e){this.slickOverlayed?(this.currentOverlayIndex=this.currentOverlaySlide.slick("slickCurrentSlide"),this.currentOverlaySlide.slick("unslick"),this.slickOverlayed=!1):(this.slickOverlayed=!1,this.currentOverlayIndex=0),this.currentOverlaySlide=this.$(".ins-gallery-overlay-insItems").slick({speed:500,infinite:!0,arrows:!1,fade:!0,cssEase:"linear",rtl:"rtl"==jQuery("html").attr("dir")}),this.slickOverlayed=!0,"undefined"!=typeof e&&this.currentOverlaySlide.slick("slickGoTo",parseInt(e))}})},{"../../../ui/slick/slick":2118,"../../../ui/util":2122,"../assets/template.hbs":1066,"../model/model":1067,"backbone.marionette":6,underscore:42}],1067:[function(e,t,i){var n=e("underscore"),c=e("../../../ui/util"),l=e("moment"),a=e("backbone");GalleryModel=t.exports=a.Model.extend({initialize:function(e){this.url=window.location.protocol+"//api.curalate.com/v1/reels/millenniumhotels.json?filters="+e.HashTag+"&limit=50"},parse:function(e){var t={};return t.items=[],e.items.length>0&&n.each(e.items,function(e){e.url&&e.url.indexOf("instagram.com")>=0&&(e.timestamp=l.unix(e.timestamp).format(c.getDateFormat()),t.items.push(e))}),t}})},{"../../../ui/util":2122,backbone:8,moment:16,underscore:42}],1066:[function(e,t,i){t.exports='{{#if items}}\r\n<div class="ins-carousel ins-carousel-{{Layout}}">\r\n    <div class="ins-carousel-container">\r\n        <!--<div class="ins-carousel-controller">-->\r\n            <a class="carouselbtn carouselbtn-next">\r\n                <div class="carouselbtn-icon">\r\n                    <!--<span></span>-->\r\n                    <i  class="icon icon-icon_chervonRight"></i>\r\n                </div>\r\n            </a>\r\n            <a class="carouselbtn carouselbtn-previous">\r\n                <div class="carouselbtn-icon">\r\n                    <i  class="icon icon-icon_chervonRight"></i>\r\n                    <!--<span></span>-->\r\n                </div>\r\n            </a>\r\n        <!--</div>-->\r\n        <div class="ins-carousel-slick-container">\r\n             {{#each items}}\r\n                <div data-id="{{id}}" class="ins-imageItem {{image_anchor}}" style="background-image: url(\'{{photo.original.url}}\')" data-backgroundurl-desktop="{{photo.original.url}}" data-backgroundurl-pad="{{photo.large_square.url}}" data-backgroundurl-mobile="{{photo.original.url}}">\r\n                    <a href="https://www.instagram.com/millennium/"  target="_blank" class="ins-bottom">\r\n                        <div class="ins-icon">\r\n                            <span class="icon-icon_B039"></span>\r\n                        </div>\r\n                        <div class="ins__info">\r\n                            {{#if product}}\r\n                                <div class="ins_post-user">{{product.name}}</div>\r\n                                <p>{{date-with-format timestamp \'ddd, hh:mm A\'}}</p>\r\n                            {{else}}\r\n                                <div class="ins_post-user">MillenniumHotels</div>\r\n                                <p>{{date-with-format timestamp \'ddd, hh:mm A\'}}</p>\r\n                            {{/if}}\r\n                        </div>\r\n                    </a>\r\n                </div>\r\n             {{/each}}\r\n        </div>\r\n    </div>\r\n    <div class="ins-gallery-overlay-slick-container">\r\n        <div class="gallery">\r\n            <div class="ins-gallery-overlay-container">\r\n                <div class="ins-gallery-overlay-insItems">\r\n                    {{#each items}}\r\n                        <div class="gallery__container">\r\n                            <div class="gallery__container__content" data-id="{{id}}">\r\n                                {{#if video.medium.url}}\r\n                                    <div class="gallery__container__content__left videoSlide">\r\n                                        <div class="play"></div>\r\n                                        <video src="{{encode video.medium.url}}" class="opacity-zero" controls="controls"\r\n                                               width="100%" height="100%">\r\n                                        </video>\r\n                                        <div class="video-placeholder {{image_anchor}}" style="background-image: url(\'{{encode photo.original.url}}\')"></div>\r\n                                    </div>\r\n                                {{else}}\r\n                                    <div class="gallery__container__content__left {{image_anchor}}" style="background-image: url(\'{{photo.original.url}}\')" data-backgroundurl-desktop="{{photo.original.url}}" data-backgroundurl-pad="{{photo.large_square.url}}" data-backgroundurl-mobile="{{photo.original.url}}">\r\n\r\n                                    </div>\r\n                                {{/if}}\r\n                                <div class="gallery__container__content__right">\r\n                                    <div class="gallery__container__content__right__top">\r\n                                        <div class="gallery__container__content__right__top__head">\r\n                                            <span style="background-image: url(\'{{user.small_square.url}}\')"></span>\r\n                                            <div class="gallery__container__content__right__top__head__msg">\r\n                                                <h2>{{user.username}}</h2>\r\n                                                <p>{{#date-with-format timestamp \'DD MMMM YYYY\'}}{{/date-with-format}}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <a class="gallery__container__content__right__top__btn">\r\n                                            <i class="icon-icon_B017"></i>\r\n                                        </a>\r\n                                    </div>\r\n                                    <p class="gallery__container__content__right__text">\r\n                                        {{caption}}\r\n                                    </p>\r\n\r\n                                    <div class="gallery__container__content__right__hotel">\r\n                                        {{#if product}}\r\n                                            <span style="background-image: url(\'{{product.image}}\');"></span>\r\n                                            <div class="gallery__container__content__right__hotel__msg">\r\n                                                <p>{{product.name}}</p>\r\n                                                <a href="{{product.link}}">{{local "maps.hotel_details"}}</a>\r\n                                            </div>\r\n                                        {{/if}}\r\n                                        <div class="gallery__container__content__right__hotel__bottom">\r\n                                            {{local "form.follow_us"}}\r\n                                            <a  href="https://www.instagram.com/millennium/"  target="_blank"  >Instagram</a>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="ins-gallery-overlay-container__btn desktop-hide">\r\n                                <a class="ins-gallery-overlay-container__btn__left">\r\n                                    <i class="icon-icon_chervonLeft"></i>\r\n                                </a>\r\n                                <a class="ins-gallery-overlay-container__btn__right">\r\n                                    <i class="icon-icon_chervonRight"></i>\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    {{/each}}\r\n                </div>\r\n                <div class="ins-gallery-overlay-container__btn mobile-hide">\r\n                    <a class="ins-gallery-overlay-container__btn__left">\r\n                        <i class="icon-icon_chervonLeft"></i>\r\n                    </a>\r\n                    <a class="ins-gallery-overlay-container__btn__right">\r\n                        <i class="icon-icon_chervonRight"></i>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n{{/if}}'},{}],1058:[function(e,t,i){var n=e("backbone"),c=e("backbone.marionette"),l=e("./01-tabs/view"),a=e("./02-group/view"),o=e("./03-views/01-tile/view"),s=e("./03-views/02-list/01-directory/view"),r=e("./03-views/02-list/02-waterfall/view"),g=e("./03-views/03-maps/view"),d=e("./states");t.exports=c.LayoutView.extend({template:!1,ui:{tabs:".nk2-hotels-tabs",group:".nk2-hotels-group"},regions:{views:".nk2-hotels-views"},initialize:function(){this.options.rootState=d},onRender:function(){var e=this,t=e.options.rootState;e.onDestroy(),e.listenTo(t,"showTileView",this.__showTileView),e.listenTo(t,"showListDirectoryView",this.__showListDirectoryView),e.listenTo(t,"showListWaterfallView",this.__showListWaterfallView),e.listenTo(t,"showMapsView",this.__showMapsView),this.ui.group.length&&(this._groupView=new a({el:this.ui.group.get(0),rootState:this.options.rootState}).render()),this.ui.tabs.length&&(this._tabsView=new l({el:this.ui.tabs.get(0),rootState:this.options.rootState}).render())},onDestroy:function(){this.stopListening(this.options.rootState),this._tabsView&&(this._tabsView.destroy(),this._tabsView=null),this._groupView&&(this._groupView.destroy(),this._groupView=null),this._tileView=null,this._listDirectoryView=null,this._listWaterfallView=null,this._mapsView=null},__showTileView:function(e){this.getRegion("views").empty({preventDestroy:!0}),this.getRegion("views").show(this._tileView||(this._tileView=new o({model:new n.Model(e),rootState:this.options.rootState,preventHyperlink:this.options.preventHyperlink})))},__showListDirectoryView:function(e){this.getRegion("views").empty({preventDestroy:!0}),this.getRegion("views").show(this._listDirectoryView||(this._listDirectoryView=new s({model:new n.Model(e),rootState:this.options.rootState,preventHyperlink:this.options.preventHyperlink})))},__showListWaterfallView:function(e){this.getRegion("views").empty({preventDestroy:!0}),this.getRegion("views").show(this._listWaterfallView||(this._listWaterfallView=new r({model:new n.Model(e),rootState:this.options.rootState,preventHyperlink:this.options.preventHyperlink})))},__showMapsView:function(e){this.getRegion("views").empty({preventDestroy:!0}),this.getRegion("views").show(this._mapsView||(this._mapsView=new g({model:new n.Model(e),rootState:this.options.rootState})))}})},{"./01-tabs/view":1034,"./02-group/view":1035,"./03-views/01-tile/view":1039,"./03-views/02-list/01-directory/view":1044,"./03-views/02-list/02-waterfall/view":1046,"./03-views/03-maps/view":1055,"./states":1056,backbone:8,"backbone.marionette":6}],1056:[function(e,t,i){function n(e,t){return String(e).toLowerCase()===t.toLowerCase()}var c=e("underscore"),l=e("backbone"),a=e("./stores"),o={changeViewStyle:function(e){n(e.viewStyle,"tile")?(s.trigger("hideGroupView"),a.getHotels({}).then(function(e){s.trigger("showTileView",e)})):n(e.viewStyle,"list")?(s.trigger("showGroupView"),a.getHotels({}).then(function(t){n(e.listStyle,"waterfall")?s.trigger("showListWaterfallView",t):s.trigger("showListDirectoryView",t)})):(s.trigger("hideGroupView"),a.getHotels({}).then(function(e){s.trigger("showMapsView",e)}))},changeListQuery:function(e){a.getHotels(e).then(function(t){s.trigger("changeListModel",{param:e,value:t})})}},s=c.extend({listenEvent:function(e){return this.on(e,function(){o[e]&&o[e].apply(this,arguments)})},getAttractions:function(e){return a.getAttractions(e)}},l.Events);t.exports=s.listenEvent("changeViewStyle").listenEvent("changeListQuery")},{"./stores":1057,backbone:8,underscore:42}],1057:[function(e,t,i){function n(e){for(var t={},i=[],n=0,l=e.length;l>n;n++){var a=e[n];a.children=[],t[a.id]=a}for(var n=0,l=e.length;l>n;n++){var a=e[n];if(a.parentid){var o=t[a.parentid];if(o){o.children.push(a);continue}}a.parentid="",i.push(a)}return c(i)}function c(e){var t=G.findIndex(e,{key:"china"}),i=G.findIndex(e,{key:"taiwan"}),n=G.findIndex(e,{key:"taichung"}),c=G.findIndex(e,{key:"hualien"}),a=G.findIndex(e,{key:"hong-kong"}),o=e[t];if((o||a>-1)&&l(e,o,"hong-kong"),(o||c>-1||n>-1)&&(l(e,o,"hualien"),l(e,o,"taichung")),t>=0&&i>=0){var s=e.splice(i,1);i>t?e.splice(t+1,0,s[0]):e.splice(t,0,s[0])}return e}function l(e,t,i){var n=t&&t.children||e,c=G.findIndex(n,function(e){return e.key===i});c>0&&n.push(n.splice(c,1)[0])}function a(e,t){return G.map(e,function(e){return G.assign(e,{collection:G.find(t,{id:e.collectionid})})})}function o(e,t){return String(e).toLowerCase()===t.toLowerCase()}function s(e){return e.then(function(e){return e})}function r(e){var t=jQuery.Deferred();return setTimeout(function(){t.resolve(e)}),t.promise()}var g,d,I,b,C,u,m,p,h,G=e("underscore"),A=e("../../../config/host");t.exports={getHotels:function(e){return e=e||{},e.keywords?this.__getQueryDestinations({keywords:e.keywords}):e.regionName&&!o(e.regionName,"all")?this.__getQueryDestinations({keywords:"",regionName:e.regionName}):this.__getTotalDestinations()},getAttractions:function(e){return e.attractions&&e.otherInfo?r(e):jQuery.when(s(jQuery.getJSON(A.getURL("api","data/destination/"+e.id+"/attractions"))),s(jQuery.getJSON(A.getURL("api","data/property/"+e.id+"/otherInfo")))).then(function(t,i){return e.attractions=t,e.otherInfo=i,e})},__getLocations:function(){if(u)return r(u);var e="undefined"!=typeof lengsflag&&lengsflag;return e?g||(g=jQuery.getJSON(A.getURL("mapi","location/GetLengsCollectionHotelLocation")).then(function(e){return u=e.data})):g||(g=jQuery.getJSON(A.getURL("api","data/locations")).then(function(e){return u=e}))},__getCollections:function(){return m?r(m):d||(d=jQuery.getJSON(A.getURL("api","data/collections")).then(function(e){return m=e}))},__getTotalDestinations:function(){return p?r(p):I||(I=jQuery.when(this.__getHotelDestinations(),this.__getLocations(),this.__getCollections()).then(function(e,t,i){return p={locations:{list:t,tree:n(t)},regions:c(G.sortBy(G.where(t,{level:"region"}),"name")),countries:c(G.sortBy(G.where(t,{level:"country"}),"name")),cities:c(G.sortBy(G.where(t,{level:"city"}),"name")),hotels:a(e,i),collections:i}}))},__getQueryDestinations:function(e){return b&&b.abort(),b=jQuery.getJSON(A.getURL("api","search/destinations"),e),jQuery.when(s(b),this.__getTotalDestinations()).then(function(e,t){if(e.success){var i={collections:t.collections,locations:t.locations,regions:t.regions,countries:[],cities:[],hotels:[]};return e.data.contrys&&(i.countries=c(G.compact(G.map(e.data.contrys,function(e){return G.find(t.locations.list,{id:e.id})})))),e.data.citys&&(i.cities=c(G.compact(G.map(e.data.citys,function(e){return G.find(t.locations.list,{id:e.id})})))),e.data.hotels&&(i.hotels=G.compact(G.map(e.data.hotels,function(e){return G.find(t.hotels,{id:e.id})}))),i}return r({countries:[],cities:[],hotels:[]})},function(){return r({countries:[],cities:[],hotels:[]})})},__getHotelDestinations:function(){var e="undefined"!=typeof lengsflag&&lengsflag;return e?this.__filterLengsHotel():s(jQuery.getJSON(A.getURL("api","data/destinations")))},__filterLengsHotel:function(){return h?r(h):C||(C=jQuery.when(s(jQuery.getJSON(A.getURL("api","data/destinations")))).then(function(e){return h=G.filter(e,function(e){return!!G.find(window.lengsPropertyList,{id:e.id})})}))}}},{"../../../config/host":45,
underscore:42}],1055:[function(e,t,i){function n(e,t){return Math.sqrt(Math.pow(e.lng-t.lng,2)+Math.pow(e.lat-t.lat,2))}function c(e){for(var t=e[0].lat,i=e[0].lat,n=e[0].lng,c=e[0].lng,l=1,a=e.length;a>l;l++)t=Math.min(t,e[l].lat),i=Math.max(i,e[l].lat),n=Math.min(n,e[l].lng),c=Math.max(c,e[l].lng);return{lat:(t+i)/2,lng:(n+c)/2}}var l=e("underscore"),a=e("backbone"),o=e("backbone.marionette"),s=e("./01-filter/view"),r=e("./02-window/view"),g=e("./03-zoomed/view"),d=e("./gmap/maps"),I=e("./gmap/icon");t.exports=o.LayoutView.extend({template:Handlebars.compile(e("./template.hbs")),regions:{filter:".nk2-maps-filter",window:".nk2-maps-window",zoomed:".nk2-maps-zoomed",google:".nk2-maps-google"},initialize:function(){this._selected=null},onRender:function(){var e=this,t=e.options.rootState;e.onDestroy(),e.listenTo(t,"changeMapZoom",e.__changeMapZoom),e.listenTo(t,"changeSelectedValue",e.__changeSelectedValue),e.listenTo(t,"selectedAttractions",e.__selectedAttractions),e.listenTo(t,"unselectAttractions",e.__unselectAttractions),e.listenTo(t,"selectedNearbyHotel",e.__selectedNearbyHotel),e.__renderZoomedView(),e.__renderFilterView(),e.__renderWindowView(),e.__renderGoogleView()},onDestroy:function(){this.stopListening(this.options.rootState)},__renderFilterView:function(){var e=this.__getFilterViewData();e?this.getRegion("filter").show(new s({model:new a.Model(e),rootState:this.options.rootState})):this.getRegion("filter").empty()},__renderWindowView:function(){var e=this.__getWindowViewData();e?this.getRegion("window").show(new r({model:new a.Model(e),rootState:this.options.rootState})):this.getRegion("window").empty()},__renderZoomedView:function(){this.getRegion("zoomed").show(new g({rootState:this.options.rootState}))},__renderGoogleView:function(){var e=this;e._mapsView||(e._mapsView=new d,e._mapsView.on("marker:click",function(t){e._selected!==t.model&&("Attractions"===t.model.type?e.options.rootState.trigger("selectedAttractions",t.model):e.options.rootState.trigger("changeSelectedValue",t.model))})),e.getRegion("google").hasView()||e.getRegion("google").show(this._mapsView),e._mapsView.removeAll();var t=e.__getMarkerIconData(),i=this._selected;if(t)return e._mapsView.setLabelVisible(i&&"hotel"===i.level).then(function(){return e._mapsView.pushMarker(t.list)}).then(function(){return e.__createMarkerClusterer()}).then(function(){return e._mapsView.fitBounds({})}).then(function(){return e._mapsView.getZoom().then(function(t){if(i){var n=e.__getChildrenCount(i);if(1===n)if("city"===i.level){if(t>14)return e._mapsView.setZoom(14)}else if("country"===i.level){if(t>9)return e._mapsView.setZoom(9)}else if("region"===i.level&&t>8)return e._mapsView.setZoom(8)}else if(t>4)return e._mapsView.setZoom(4)})}).then(function(){return e.__correctMapsCenter(t.hero)}).then(function(){t.hero&&e._mapsView.setActive(t.hero)});var n=jQuery.Deferred();return n.resolve(),n.promise()},__createMarkerClusterer:function(){var e=this;return jQuery.when(e._mapsView.createClusterer({maxZoom:17,name:"Attractions",color:"#31a2ac",width:39.7,height:52.2,imagePath:"/assets/img/maps/group-icon/ori-attractions.png",addStyle:"background-repeat:no-repeat;background-position:center center;text-align:right;padding-right:13.2px;line-height:20.6px;z-index:999;font-size:9px;background-repeat:no-repeat;letter-spacing:-2.2px;"}).then(function(t){t.addMarkers(l.map(l.filter(e._mapsView._set.models,function(e){return"Attractions"===e.get("status").model.type}),function(e){return e.get("marker")}))}))},__correctMapsCenter:function(e){var t=this.getRegion("google").$el,i=this.getRegion("filter").$el;if(t.length&&i.length){var n=t.width(),c=i.width(),l=t.offset().left,a=i.offset().left;if(this.getRegion("window").hasView()){var o=this.getRegion("window").currentView.$el;if(o.length){var s,r=(n+l)/2,g=o.offset().left+o.width();return s=a>g&&c>0?(a+g)/2:(l+n+g)/2,this._mapsView.panBy({x:r-s,y:-40})}}if(n>0&&c>0&&a>l)return this._mapsView.panBy({x:(n-Math.min(n,Math.max(a-l,0)))/2-50,y:-40})}},__getFilterViewData:function(){var e=this._selected,t=this.model.toJSON();if(e){if("hotel"===e.level)return{hero:e,list:this.__getNearbyData(e),crumbs:this.__getCrumbsData({parentid:e.locationid}),parent:this.__getParentData({parentid:e.locationid})};var i=e.children||[];return 0===i.length&&(i=l.where(t.hotels,{locationid:e.id})),{hero:e,list:i,crumbs:this.__getCrumbsData(e),parent:this.__getParentData(e)}}return{hero:null,list:t.locations.tree,crumbs:null,parent:null}},__getWindowViewData:function(){var e=this._selected;return e&&"hotel"===e.level?{detail:e,parent:this.__getParentData({parentid:e.locationid})}:void 0},__getMarkerIconData:function(){var e=this._selected,t=this.model.toJSON();return e?"hotel"===e.level?{hero:e,list:this.__getEndMarkerIconData(e)}:{hero:null,list:this.__getMidMarkerIconData(e)}:{hero:null,list:this.__getTopMarkerIconData(t.locations.tree,"region")}},__getTopMarkerIconData:function(e,t){var i=this;return l.compact(l.map(e,function(e){var n=i.__getAllOffspringHotel(e);return n.length?{model:e,position:c(n),content:new I({model:i.__getMarkerIconModel(t||i.__getDefaultCollection(n[0]),n.length,e.name)})}:void 0}))},__getMidMarkerIconData:function(e){var t=e.children||[];return t.length?this.__getTopMarkerIconData(t):this.__getEndMarkerIconData({locationid:e.id})},__getEndMarkerIconData:function(e){var t=this;return l.map(l.where(t.model.get("hotels"),{locationid:e.locationid}),function(e){return{model:e,position:{lat:e.lat,lng:e.lng},content:new I({model:t.__getMarkerIconModel(t.__getDefaultCollection(e),0,e.name)})}}).concat(l.map(e.attractions||[],function(e){return{model:e,position:{lat:e.lat,lng:e.lng},content:new I({model:t.__getMarkerIconModel("attractions",0,null)})}}))},__getAllOffspringHotel:function(e){function t(e,i){i.push(e);var n=e.children;if(n&&n.length)for(var c=0,l=n.length;l>c;c++)t(n[c],i);return i}var i=this.model.get("hotels");return l.flatten(l.map(t(e,[]),function(e){return l.where(i,{locationid:e.id})}))},__getDefaultCollection:function(e){return e.collection&&e.collection.codename||"millennium"},__getMarkerIconModel:function(e,t,i){return new a.Model({collectionType:e,childrenLength:t,detail:i})},__changeSelectedValue:function(e){var t=this,i=t.options.rootState;return t._selected=e,t.__renderFilterView(),t.__renderWindowView(),e&&"hotel"===e.level?e.attractions&&e.otherInfo?void t.__renderGoogleView():void i.getAttractions(e).then(function(){t.__renderWindowView(),t.__renderGoogleView()}):void t.__renderGoogleView()},__selectedAttractions:function(e){this._mapsView&&this._mapsView.setActive(e)},__unselectAttractions:function(){this._mapsView&&(this._selected&&"hotel"==this._selected.level?this._mapsView.setActive(this._selected):this._mapsView.setActive({}))},__selectedNearbyHotel:function(e){for(var t=l.where(this.model.get("hotels"),{locationid:e.detail.locationid}),i=0,c=n(e.nearby,t[0]),a=1;a<t.length;a++){var o=n(e.nearby,t[a]);c>o&&(c=o,i=a)}this.options.rootState.trigger("changeSelectedValue",t[i])},__changeMapZoom:function(e){this._mapsView&&this._mapsView.addZoom(e)},__getNearbyData:function(e){return l.difference(l.where(this.model.get("hotels"),{locationid:e.locationid}),[e])},__getCrumbsData:function(e){for(var t,i=[];t=this.__getParentData(e);)i.unshift(t),e=t;return i},__getParentData:function(e){return l.find(this.model.get("locations").list,{id:e.parentid})},__getChildrenCount:function(e){return e.children&&e.children.length||l.where(this.model.get("hotels"),{locationid:e.id}).length}})},{"./01-filter/view":1048,"./02-window/view":1049,"./03-zoomed/view":1050,"./gmap/icon":1051,"./gmap/maps":1052,"./template.hbs":1054,backbone:8,"backbone.marionette":6,underscore:42}],1054:[function(e,t,i){t.exports='<div class="nk2-maps-container" id="map-wrapper">\r\n    <div class="nk2-maps-filter"></div>\r\n    <div class="nk2-maps-window"></div>\r\n    <div class="nk2-maps-zoomed"></div>\r\n    <div class="nk2-maps-google"></div>\r\n</div>'},{}],1052:[function(e,t,i){t.exports=e("../../../../maps/api/google/google.maps.view")},{"../../../../maps/api/google/google.maps.view":1127}],1051:[function(e,t,i){var n=e("backbone.marionette");e("../../../../maps/views/icon/view");t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),ui:{view:"[data-view='icon']"},serializeData:function(){var e=this.model.toJSON(),t=function(){var t="undefined"!=typeof lengsflag&&lengsflag&&"region"===e.collectionType;return t?e.collectionType="lengs":e.collectionType};return{childrenLength:e.childrenLength>1?e.childrenLength:0,collectionType:t(),detail:e.detail}},addClass:function(e){this.$el&&this.ui.view.addClass(e)},hasClass:function(e){return this.$el?this.ui.view.hasClass(e):!1},removeClass:function(e){this.$el&&this.ui.view.removeClass(e)},closest:function(e){return this.$el?this.ui.view.closest(e):void 0}})},{"../../../../maps/views/icon/view":1174,"./template.hbs":1053,"backbone.marionette":6}],1053:[function(e,t,i){t.exports='<div class="nk2-maps-icon-{{ collectionType }}" data-view="icon">\r\n    {{#if childrenLength}}\r\n        <div class="nk2-maps-icon-bubble">{{ childrenLength }}</div>\r\n    {{/if}}\r\n</div>\r\n{{#if detail}}\r\n    <div class="nk2-maps-text-detail">{{ detail }}</div>\r\n{{/if}}'},{}],1049:[function(e,t,i){var n=e("underscore"),c=e("../../../../destination/info-window/view");t.exports=c.extend({className:"destination-info-window nk2-maps-window-wrapper",events:n.assign(c.prototype.events,{"click li[data-drawer-index] a.wgt-corner-close":function(){switch(+this.displayIndex){case 0:this.options.rootState.trigger("changeSelectedValue",this.model.get("parent"));break;case 1:this.options.rootState.trigger("unselectAttractions")}var e=this.$el.find(".scroll-content");e.bind(function(e){c.prototype.onScrollChildren(jQuery(e.currentTarget))}),c.prototype.onRender()},"click li[data-drawer-index='1'] .image-list-block .image-list li":function(e){this.options.rootState.trigger("selectedAttractions",n.find(this.model.get("detail").attractions,{id:jQuery(e.currentTarget).attr("data-id")}))},"click li[data-drawer-index='1'] a[data-nearest-hotel]":function(){this._selected&&this.options.rootState.trigger("selectedNearbyHotel",{detail:this.model.get("detail"),nearby:this._selected})}}),initialize:function(){this._selected=null},onRender:function(){var e=this,t=e.options.rootState;e.onDestroy(),e.listenTo(t,"selectedAttractions",e.__selectedAttractions),e.listenTo(t,"unselectAttractions",e.__unselectAttractions),c.prototype.onRender.apply(e,arguments)},onDestroy:function(){var e=this;e.stopListening(e.options.rootState),c.prototype.onDestroy.apply(e,arguments)},serializeData:function(){var e=this.model.toJSON().detail;return{model:{id:e.id,attributes:n.assign({},e,{cityname:this.model.get("parent").name,infoimages:e.infoimages&&e.infoimages[0]&&[e.infoimages[0]]})},_attraction:this._selected?{id:this._selected.id,attributes:this._selected}:null,_attractions:e.attractions?{models:n.map(e.attractions,function(e){return{id:e.id,attributes:e}})}:null,_otherinfo:e.otherInfo?{attributes:n.assign({_hasPrice:e.otherInfo.startprice&&/\d/.test(e.otherInfo.startprice)},e.otherInfo)}:null}},__selectedAttractions:function(e){this.displayIndex=1,this._selected=e,this.render()},__unselectAttractions:function(){this._selected=null,this.render()}})},{"../../../../destination/info-window/view":785,underscore:42}],1048:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=(e("iscroll"),e("../../../../ui/util")),a=e("../03-zoomed/view"),o=(e("../../../../maps/helpers/requestAnimationFrame"),!1);t.exports=c.LayoutView.extend({template:Handlebars.compile(e("./template.hbs")),ui:{wrapper:".nk2-maps-filter-wrapper",content:".nk2-maps-filter-wrapper-content",crumbs:".nk2-maps-filter-crumbs-text",items:".nk2-maps-filter-item span[data-id]",back:".nk2-maps-filter-hero-back"},regions:{zoom:".nk2-maps-filter-zoom"},events:{"click @ui.crumbs":function(e){this.options.rootState.trigger("changeSelectedValue",this.__findTriggerData(e,"crumbs"))},"click @ui.items":function(e){this.options.rootState.trigger("changeSelectedValue",this.__findTriggerData(e,"list"))},"click @ui.back":function(e){this.options.rootState.trigger("changeSelectedValue",this.model.get("parent"))},"click .nk2-maps-filter-toolbar-btm":function(){o=!0,this.$el.parent().addClass("nk2-maps-filter-switch")},"click .nk2-maps-filter-toolbar-top .icon-icon_B017":function(){o=!1,this.$el.parent().removeClass("nk2-maps-filter-switch")}},onRender:function(){var e=this;o&&this.$el.parent().addClass("nk2-maps-filter-switch"),this.getRegion("zoom").show(new a({rootState:this.options.rootState})),setTimeout(function(){e.onDestroy()},300),e.listenTo(l.tracker,"change:size",function(){e.onDestroy()})},onDestroy:function(){var e=this;e.ui.wrapper.addClass("nano").css("height",230),e.ui.content.addClass("nano-content"),e.ui.wrapper.nanoScroller({destroy:!0}),e.ui.wrapper.nanoScroller({alwaysVisible:!0})},onShow:function(){var e=this;e.onDestroy()},__findTriggerData:function(e,t){return n.find(this.model.get(t),{id:jQuery(e.currentTarget).attr("data-id")})}})},{"../../../../maps/helpers/requestAnimationFrame":1148,"../../../../ui/util":2122,"../03-zoomed/view":1050,"./template.hbs":1047,"backbone.marionette":6,iscroll:14,underscore:42}],1050:[function(e,t,i){var n=e("../../../../maps/views/view-zoom");t.exports=n.extend({initialize:function(){var e=this;e.on("zoom:change",function(t){e.options.rootState.trigger("changeMapZoom",t)})}})},{"../../../../maps/views/view-zoom":1191}],1191:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({events:{"click [data-zoom='added']":function(){this.trigger("zoom:change",1)},"click [data-zoom='minus']":function(){this.trigger("zoom:change",-1)}},template:function(t){return Handlebars.compile(e("../assets/template-zoom.hbs"))(t)},className:function(){return"mh-maps-zoom-view"}})},{"../assets/template-zoom.hbs":1147,"backbone.marionette":6}],1147:[function(e,t,i){t.exports='<a href="javascript:void(0);" data-zoom="added"><span class="icon-icon_B023"></span></a>\r\n<a href="javascript:void(0);" data-zoom="minus"><span class="icon-icon_B024"></span></a>'},{}],1047:[function(e,t,i){t.exports='<div class="nk2-maps-filter-toolbar nk2-mb-visible">\r\n    <div class="nk2-maps-filter-toolbar-top">\r\n        <span>{{ local "maps.choose_destination" }}:</span>\r\n        <span class="icon-icon_B017"></span>\r\n    </div>\r\n    <div class="nk2-maps-filter-toolbar-btm">\r\n        <span class="icon-icon_burger"></span><span>{{ local "maps.view_destination_list" }}</span>\r\n    </div>\r\n</div>\r\n\r\n<div class="nk2-maps-filter-wrapper">\r\n    <div class="nk2-maps-filter-wrapper-content">\r\n        {{#if hero}}\r\n            {{#if list.length}}\r\n                <div class="nk2-maps-filter-hero">\r\n                    {{#if crumbs.length}}\r\n                        <div class="nk2-maps-filter-crumbs">\r\n                            {{#each crumbs}}\r\n                                <span class="icon-icon_chervonRight"></span><span class="nk2-maps-filter-crumbs-text" data-id="{{ id }}">{{ name }}</span>\r\n                            {{/each}}\r\n                        </div>\r\n                    {{/if}}\r\n                    <div class="nk2-maps-filter-hero-text">{{ hero.name }}</div>\r\n                    <div class="nk2-maps-filter-hero-back">\r\n                        <span class="icon-icon_chervonLeft"></span>\r\n                        <span>{{ local "Collections.Back" }}</span>\r\n                    </div>\r\n                </div>\r\n                {{#equal hero.level "hotel"}}\r\n                    <div class="nk2-maps-filter-nearby">{{ local "maps.nearby_hotel" }}</div>\r\n                {{/equal}}\r\n                {{#each list}}\r\n                    <div class="nk2-maps-filter-item level-2">\r\n                        {{#if collection}}\r\n                            <span class="icon-type icon-icon_{{ collection.icon_index }}"></span>\r\n                        {{/if}}\r\n                        <span data-id="{{ id }}">{{ name }}</span>\r\n                    </div>\r\n                {{/each}}\r\n            {{else}}\r\n                <div class="nk2-maps-filter-hero empty">\r\n                    {{#if crumbs.length}}\r\n                        <div class="nk2-maps-filter-crumbs">\r\n                            {{#each crumbs}}\r\n                                <span class="icon-icon_chervonRight"></span><span class="nk2-maps-filter-crumbs-text" data-id="{{ id }}">{{ name }}</span>\r\n                            {{/each}}\r\n                        </div>\r\n                    {{/if}}\r\n                    <div class="nk2-maps-filter-hero-text">{{ hero.name }}</div>\r\n                    <div class="nk2-maps-filter-hero-back">\r\n                        <span class="icon-icon_chervonLeft"></span>\r\n                        <span>Back</span>\r\n                    </div>\r\n                </div>\r\n            {{/if}}\r\n        {{else}}\r\n            {{#each list}}\r\n                <div class="nk2-maps-filter-item level-1">\r\n                    <span data-id="{{ id }}">{{ name }}</span>\r\n                </div>\r\n            {{/each}}\r\n        {{/if}}\r\n    </div>\r\n</div>\r\n<div class="nk2-maps-filter-zoom"></div>'},{}],1044:[function(e,t,i){var n=e("backbone"),c=e("backbone.marionette"),l=e("./children/view");t.exports=c.CollectionView.extend({childView:l,childViewOptions:function(e){return{model:e,rootState:this.options.rootState,preventHyperlink:this.options.preventHyperlink,entire:this.model.toJSON()}},initialize:function(){var e=this,t=e.model.toJSON();e.collection=new n.Collection(t.locations.tree)},onRender:function(){var e=this,t=e.options.rootState,i=e.model.toJSON();e.onDestroy(),e.listenTo(t,"changeListModel",this.__changeListModel),1==i.locations.tree.length&&setTimeout(function(){e.options.rootState.trigger("expandDirectoryItem",e.collection.models[0].toJSON())},50)},onDestroy:function(){this.stopListening(this.options.rootState)},__changeListModel:function(e){this.model.set(e.value),this.render()}})},{"./children/view":1043,backbone:8,"backbone.marionette":6}],1043:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("./content/view");t.exports=l.LayoutView.extend({template:Handlebars.compile(e("./template.hbs")),regions:{container:".nk2-directory-container"},ui:{title:".nk2-directory-title"},events:{"click @ui.title":function(){var e=this;e.getRegion("container").hasView()?e.getRegion("container").empty():e.options.rootState.trigger("expandDirectoryItem",e.model.toJSON())}},onRender:function(){var e=this,t=e.options.rootState;e.onDestroy(),e.listenTo(t,"expandDirectoryItem",e.__expandDirectoryItem)},onDestroy:function(){this.stopListening(this.options.rootState)},__expandDirectoryItem:function(e){var t=this;t.model.get("id")===e.id?(t.ui.title.addClass("selected"),t.getRegion("container").show(new a({rootState:t.options.rootState,preventHyperlink:t.options.preventHyperlink,model:new c.Model(this.__getContentData())}).on("destroy",function(){t.ui.title.removeClass("selected")}))):t.getRegion("container").empty()},__getContentData:function(){var e=this,t=e.model.toJSON(),i=e.options.entire,c=[];return"region"===t.level?c=n.where(i.countries,{parentid:t.id}):"country"===t.level&&(c=n.where(i.countries,{id:t.id})),{countries:c,collections:i.collections,locations:i.locations,regions:i.regions,cities:i.cities,hotels:i.hotels}}})},{"./content/view":1041,"./template.hbs":1042,backbone:8,"backbone.marionette":6,underscore:42}],1042:[function(e,t,i){t.exports='<div class="nk2-directory-title">\r\n    <span>{{ name }}</span><span class="icon-icon_chervonDown"></span>\r\n</div>\r\n<div class="nk2-directory-container"></div>'},{}],1041:[function(e,t,i){var n=(e("underscore"),e("../../../02-waterfall/view"));t.exports=n.extend({template:Handlebars.compile(e("./template.hbs"))})},{"../../../02-waterfall/view":1046,"./template.hbs":1040,underscore:42}],1046:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../../../offers-2.0/02-toolbar/01-drop-down-menu/02-nation/waterfall");t.exports=c.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),ui:{container:".nk2-waterfall-container",hotels:"a.nk2-waterfall-hotel-name",cities:"a.nk2-waterfall-city-name"},events:{"click @ui.hotels":function(e){var t=this;t.options.preventHyperlink&&(t.options.rootState.trigger("hyperlinkClick",{hero:n.find(t.model.get("hotels"),{id:jQuery(e.currentTarget).attr("data-id")}),data:t.model.toJSON()}),e.preventDefault())},"click @ui.cities":function(e){var t=this;t.options.preventHyperlink&&(t.options.rootState.trigger("hyperlinkClick",{hero:n.find(t.model.get("cities"),{id:jQuery(e.currentTarget).attr("data-id")}),data:t.model.toJSON()}),e.preventDefault())}},serializeData:function(){var e=this.options.preventHyperlink,t=this.model.get("countries"),i=this.model.get("cities"),c=this.model.get("hotels"),l=n.filter(t,{key:"taiwan"});return{countries:n.map(t,function(t){return{id:t.id,key:t.key,url:e?"javascript:void(0)":t.url,name:t.name,level:t.level,cities:n.map(n.where(i,{parentid:t.id}),function(t){return{id:t.id,key:t.key,url:e?null:t.url,name:t.name,level:t.level,hotels:n.map(n.where(c,{locationid:t.id}),function(t){return{id:t.id,url:e?"javascript:void(0)":t.url,name:t.name,level:t.level}})}}),hotels:n.map(n.where(c,{locationid:t.id}),function(t){return{id:t.id,url:e?"javascript:void(0)":t.url,name:t.name,level:t.level}})}}),taiwanName:l.length&&l[0].name}},onShow:function(){var e=this;e.$el.is(":visible")&&e.ui.container.length&&(e.__waterfallContainer(),e.__delGlobalListener(),e.__addGlobalListener())},onRender:function(){var e=this,t=e.options.rootState;e.onDestroy(),e.listenTo(t,"changeListModel",this.__changeListModel)},onDestroy:function(){this.stopListening(this.options.rootState),this.__delGlobalListener()},__changeListModel:function(e){this.model.set(e.value),this.render(),this.onShow()},__waterfallContainer:function(){new l({container:this.ui.container.get(0),colCount:3})},__addGlobalListener:function(){var e=this;e._globalListener=n.debounce(function(){e.__waterfallContainer()},300),jQuery(window).on("resize",e._globalListener)},__delGlobalListener:function(){var e=this;e._globalListener&&(jQuery(window).off("resize",e._globalListener),e._globalListener=null)}})},{"../../../../offers-2.0/02-toolbar/01-drop-down-menu/02-nation/waterfall":1502,"./template.hbs":1045,"backbone.marionette":6,underscore:42}],1045:[function(e,t,i){t.exports='<div class="nk2-waterfall-title">{{ local "general.Countries_and_Regions" }}</div>\r\n\r\n{{#if countries.length}}\r\n    <div class="nk2-waterfall-container">\r\n        {{#each countries}}\r\n            <div class="nk2-waterfall-country"{{#equal key \'taiwan\'}} data-follow="yes"{{/equal}}>\r\n                <!--MHS-3004 (update 20190122)-->\r\n                {{#equal key \'singapore\'}}\r\n                    {{#if url}}\r\n                        <h2 class="nk2-waterfall-country-name">\r\n                            <a class="nk2-waterfall-city-name" href="{{ url }}" data-id="{{ id }}">{{ name }}</a>\r\n                        </h2>\r\n                    {{else}}\r\n                        <h2 class="nk2-waterfall-country-name">{{ name }}</h2>\r\n                    {{/if}}\r\n                {{else}}\r\n                    <h2 class="nk2-waterfall-country-name">{{ name }}</h2>\r\n                {{/equal}}\r\n\r\n                {{#equal key \'china\'}}\r\n                    <h3>\r\n                        <span class="nk2-waterfall-sub-area-name top-area">{{local \'hotels.mainland_china\'}}</span>\r\n                    </h3>\r\n                {{/equal}}\r\n                {{#if cities.length}}\r\n                    {{#each cities}}\r\n                        <div class="nk2-waterfall-city">\r\n                            {{#equal key \'hong-kong\'}}\r\n                                <h3>\r\n                                    <span class="nk2-waterfall-sub-area-name"  style="padding-top: 2px;">{{local \'countries.HK\'}}</span>\r\n                                </h3>\r\n                            {{/equal}}\r\n                            {{#equal key \'hualien\'}}\r\n                                <h3>\r\n                                    <span class="nk2-waterfall-sub-area-name" style="padding-top: 2px">{{local \'countries.TW\'}}</span>\r\n                                </h3>\r\n                            {{/equal}}\r\n                            <h3>\r\n                                {{#if url}}\r\n                                    <a class="nk2-waterfall-city-name" href="{{ url }}" data-id="{{ id }}">{{ name }}</a>\r\n                                {{else}}\r\n                                    <span class="nk2-waterfall-city-name">{{ name }}</span>\r\n                                {{/if}}\r\n                            </h3>\r\n                            {{#if hotels.length}}\r\n                                {{#each hotels}}\r\n                                    <div class="nk2-waterfall-hotel">\r\n                                        <a class="nk2-waterfall-hotel-name" href="{{ url }}" data-id="{{ id }}">{{ name }}</a>\r\n                                    </div>\r\n                                {{/each}}\r\n                            {{/if}}\r\n                        </div>\r\n                    {{/each}}\r\n                {{/if}}\r\n                {{#if hotels.length}}\r\n                    {{#each hotels}}\r\n                        <div class="nk2-waterfall-hotel">\r\n                            <a class="nk2-waterfall-hotel-name" href="{{ url }}" data-id="{{ id }}">{{ name }}</a>\r\n                        </div>\r\n                    {{/each}}\r\n                {{/if}}\r\n            </div>\r\n        {{/each}}\r\n    </div>\r\n{{else}}\r\n    <div class="nk2-waterfall-empty">{{ local "globalsearch.nomatched_title" }}</div>\r\n{{/if}}'},{}],1040:[function(e,t,i){t.exports='{{#if countries.length}}\r\n    <div class="nk2-waterfall-container">\r\n        {{#each countries}}\r\n            <div class="nk2-waterfall-country"{{#equal key \'taiwan\'}} data-follow="yes"{{/equal}}>\r\n                <!--MHS-3004 (update 20190122)-->\r\n                {{#equal key \'singapore\'}}\r\n                    {{#if url}}\r\n                        <h2 class="nk2-waterfall-country-name">\r\n                            <a class="nk2-waterfall-city-name" href="{{ url }}" data-id="{{ id }}">{{ name }}</a>\r\n                        </h2>\r\n                    {{else}}\r\n                        <h2 class="nk2-waterfall-country-name">{{ name }}</h2>\r\n                    {{/if}}\r\n                {{else}}\r\n                    <h2 class="nk2-waterfall-country-name">{{ name }}</h2>\r\n                {{/equal}}\r\n\r\n                {{#if cities.length}}\r\n                    {{#each cities}}\r\n                        <div class="nk2-waterfall-city">\r\n                            <h3>\r\n                                {{#if url}}\r\n                                    <a class="nk2-waterfall-city-name" href="{{ url }}" data-id="{{ id }}">{{ name }}</a>\r\n                                {{else}}\r\n                                    <span class="nk2-waterfall-city-name">{{ name }}</span>\r\n                                {{/if}}\r\n                            </h3>\r\n                            {{#if hotels.length}}\r\n                                {{#each hotels}}\r\n                                    <div class="nk2-waterfall-hotel">\r\n                                        <a class="nk2-waterfall-hotel-name" href="{{ url }}" data-id="{{ id }}">{{ name }}</a>\r\n                                    </div>\r\n                                {{/each}}\r\n                            {{/if}}\r\n                        </div>\r\n                    {{/each}}\r\n                {{/if}}\r\n                {{#if hotels.length}}\r\n                    {{#each hotels}}\r\n                        <div class="nk2-waterfall-hotel">\r\n                            <a class="nk2-waterfall-hotel-name" href="{{ url }}" data-id="{{ id }}">{{ name }}</a>\r\n                        </div>\r\n                    {{/each}}\r\n                {{/if}}\r\n            </div>\r\n        {{/each}}\r\n    </div>\r\n{{/if}}'},{}],1039:[function(e,t,i){function n(){return jQuery(window).width()>=1600?4:3}var c=e("underscore"),l=e("backbone"),a=e("backbone.marionette"),o=e("./children/view");t.exports=a.CompositeView.extend({template:Handlebars.compile(e("./template.hbs")),ui:{more:".nk2-tile-show-more button"},events:{"click @ui.more":function(){this._currentPage++,this.__updateCollection()}},childView:o,childViewContainer:".nk2-tile-container",childViewOptions:function(e){return{model:e,rootState:this.options.rootState,preventHyperlink:this.options.preventHyperlink,entire:this.model.toJSON()}},serializeData:function(){return{hasNext:this.__getHasNext()}},initialize:function(){var e=this;e._currentPage=2,e._currentSize=n(),e.collection=new l.Collection(e.model.get("hotels").slice(0,e._currentPage*e._currentSize)),e.listenTo(e.collection,"reset",e.__updateButtonStyle)},onRender:function(){this.onDestroy(),this.__rendered=!0,this.__addGlobalListener()},onDestroy:function(){this.__delGlobalListener()},__updateCollection:function(){this.collection.reset(this.model.get("hotels").slice(0,this._currentPage*this._currentSize))},__addGlobalListener:function(){var e=this;e.__delGlobalListener(),e._globalListener=c.debounce(function(){var t=n();e._currentSize!==t&&(e._currentSize=t,e.__updateCollection())},500),jQuery(window).on("resize",e._globalListener)},__delGlobalListener:function(){var e=this;e._globalListener&&(jQuery(window).off("resize",e._globalListener),e._globalListener=null)},__updateButtonStyle:function(){this.__rendered&&(this.__getHasNext()?this.ui.more.removeClass("hidden"):this.ui.more.addClass("hidden"))},__getPagingData:function(e){return this.model.get("hotels").slice(0,e*n())},__getHasNext:function(){return this.collection.length<this.model.get("hotels").length}})},{"./children/view":1037,"./template.hbs":1038,backbone:8,"backbone.marionette":6,underscore:42}],1038:[function(e,t,i){t.exports='<div class="nk2-tile-container"></div>\r\n<div class="nk2-tile-show-more">\r\n    <button type="button" class="{{#unless hasNext}}hidden{{/unless}}">{{ local "offers.show_more" }}</button>\r\n</div>'},{}],1037:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette");t.exports=c.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"nk2-tile-item",ui:{link:"[data-item='link']"},events:{"click @ui.link":function(e){var t=this;t.options.preventHyperlink&&(t.options.rootState.trigger("hyperlinkClick",{hero:t.model.toJSON(),data:t.options.entire}),e.preventDefault())}},serializeData:function(){var e=this.model.toJSON(),t=this.options.preventHyperlink;return{url:t?"javascript:void(0);":e.url,image:e.infoimages&&e.infoimages[0],name:e.name,city:n.find(this.options.entire.locations.list,{id:e.locationid})}}})},{"./template.hbs":1036,"backbone.marionette":6,underscore:42}],1036:[function(e,t,i){t.exports='<a href="{{ url }}" data-item="link">\r\n    <div class="nk2-tile-item-img" style="background-image: url(\'{{ image }}\')"></div>\r\n</a>\r\n<div class="nk2-tile-item-ctx">\r\n    <div class="nk2-tile-item-ctx-city">{{ city.name }}</div>\r\n    <div class="nk2-tile-item-ctx-name">{{ name }}</div>\r\n    <div class="nk2-tile-item-ctx-look">\r\n        <a href="{{ url }}" data-item="link">\r\n            <span class="icon-icon_K003"></span>\r\n            <span>{{ local "Collections.View_More" }}</span>\r\n        </a>\r\n    </div>\r\n</div>'},{}],1035:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette");
t.exports=c.ItemView.extend({template:!1,ui:{group:".nk2-hotels-group-menu",items:".nk2-hotels-group-menu-item",query:".nk2-hotels-group-search-query",input:".nk2-hotels-group-search-input"},events:{"click @ui.group":function(e){e.stopPropagation(),this.ui.group.addClass("expanded"),this.__addGlobalListener()},"click @ui.items":function(e){e.stopPropagation();var t=jQuery(e.currentTarget);this.ui.group.removeClass("expanded"),t.hasClass("selected")||this.__changeListQuery(t)},"click @ui.query":function(){this.__triggerListQuery((this.ui.input.val()||"").trim())},"input @ui.input":function(){this.__triggerListQuery((this.ui.input.val()||"").trim())}},onRender:function(){var e=this,t=e.options.rootState;e.onDestroy(),e.listenTo(t,"hideGroupView",this.__hideGroupView),e.listenTo(t,"showGroupView",this.__showGroupView),e.listenTo(t,"changeListModel",this.__changeListModel),setTimeout(function(){if(e.$el.is(":visible")){var t=e.ui.items.filter(".selected");0===t.length&&(t=e.ui.items.eq(0)),t.length&&e.__changeListQuery(t)}},0)},onDestroy:function(){this.stopListening(this.options.rootState),this.__delGlobalListener()},__triggerListQuery:n.debounce(function(e){this.options.rootState.trigger("changeListQuery",{keywords:e})},500),__addGlobalListener:function(){var e=this;e._globalListener=function(){e.ui.group.removeClass("expanded")},jQuery(document).on("click",e._globalListener)},__delGlobalListener:function(){var e=this;e._globalListener&&(jQuery(document).off("click",e._globalListener),e._globalListener=null)},__changeListQuery:function(e){var t=e.children(".nk2-mb-visible-inline");0===t.length&&(t=e.children().eq(-1)),this.options.rootState.trigger("changeListQuery",t.data()),this.ui.group.attr("data-current",t.text()),this.ui.items.removeClass("selected"),this.ui.input.val(""),e.addClass("selected")},__changeListModel:function(e){if(e.param.keywords){var t=this.ui.items.has("[data-region-name='all']");t.length>0&&(this.ui.items.removeClass("selected"),t.addClass("selected"))}},__hideGroupView:function(){this.$el.hide()},__showGroupView:function(){this.$el.show()}})},{"backbone.marionette":6,underscore:42}],1034:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:!1,ui:{items:".nk2-hotels-tabs-item"},events:{"click @ui.items":function(e){var t=jQuery(e.currentTarget);t.hasClass("selected")||this.__changeViewStyle(t)}},onRender:function(){if(this.$el.is(":visible")){var e=this.ui.items.filter(".selected");0===e.length&&(e=this.ui.items.eq(0)),e.length&&this.__changeViewStyle(e)}},__changeViewStyle:function(e){this.options.rootState.trigger("changeViewStyle",e.data()),this.ui.items.removeClass("selected"),e.addClass("selected")}})},{"backbone.marionette":6}],1030:[function(e,t,i){var n=e("backbone.marionette"),c=e("../ui/util"),l=c.tracker.get("mobile"),a=jQuery.Deferred(),o=jQuery.Deferred();setTimeout(function(){o.resolve()},1e4),t.exports=n.ItemView.extend({ui:{video:'[data-hero-view="video"]',image:'[data-hero-view="image"]',imageContainer:".images-container"},template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},serializeData:function(){var e=window.HOTEL_HERO_MODULE||{};return{isPC:!c.ismobile(),isvideo:e.isvideo,video:e.video,videoplacehoder:e.videoplacehoder,current:this.currentImage,images:e.images,playAll:this.playAll,isIndex:this.isIndex}},initialize:function(e){var t=window.HOTEL_HERO_MODULE||{};this.images=t.images||[],this.currentImage=this.images[0],this.video=t.video||{},this.imageIndex=0,this.imageCount=this.images.length,this.randomIndex=0,this.randomArray=this.__random(4),this.playAll=e.playAll,this.imagePlayCount=0,this.videoData=""!=t.video,this.imageData=this.imageCount>0,this.tplHeroWeather=e.tplHeroWeather,this.tplHeroWeatherImage=e.tplHeroWeather.css("background-image"),this.count=0,this.animate=!1,this.presentationTime=2,this.durationTime=1,this.totalTime=(this.presentationTime+this.durationTime)*this.images.length,this.hideDelay=this.presentationTime/this.totalTime,this.hideTime=(this.presentationTime+this.durationTime)/this.totalTime,this.showDelay=1-this.durationTime/this.totalTime,this.imageShow=!1,this.imageHide=!1,this.totalDurationTime=8e3,this.imageCount>4&&(this.totalDurationTime+=1e3*(this.imageCount-4)),this.timer=null,this.imageX=0,this.imageY=1,this.animateRun=!1,this.isIndex=e.isIndex},isVideo:function(){return window.HOTEL_HERO_MODULE&&window.HOTEL_HERO_MODULE.isvideo},onBeforeRender:function(){this.stopListening(c.tracker)},onRender:function(){var e=this;e.playCount=1,(0==e.isVideo()||e.playAll)&&(e.playAll&&e.videoData?e.ui.imageContainer.hide():e.__renderImage());var t=this.tplHeroWeatherImage.match(/"(.*?)"/);t&&e.ui.video.attr("poster",this.tplHeroWeatherImage&&t[1].replace('"',"")),e.ui.video.on("canplaythrough",function(){e.ui.video.off("canplaythrough"),a.resolve()}),e.ui.video.on("ended",function(){e.playAll&&e.imageData?(e.ui.video[0].pause(),e.playCount<4&&(e.playCount++,e.__renderImage())):e.playCount>2?e.ui.video[0].pause():(e.playCount++,e.ui.video[0].play())}),e.listenTo(c.tracker,"change:mobile",this.__change),jQuery.when(a,o).then(jQuery.proxy(e.__videoPlay,e))},__renderImage:function(){var e=this,t=null;try{t=imageAnchor}catch(i){}e.imagePlayCount++,e.imageCount>0&&(e.__hideWeather(),1===e.imageCount?!e.playAll||!e.videoData&&e.playAll?(e.ui.image.addClass("only-one"),t&&c.ismobile()&&e.ui.image.css("background-position",t)):(e.ui.imageContainer.show(),e.imagePlayCount<3&&setTimeout(function(){e.ui.imageContainer.hide(),e.ui.video.show(),e.ui.video[0].play()},3e3)):(this.cancelObj&&(this.cancelObj.cancel=!0,this.ui.image.finish()),1==e.imagePlayCount?(void 0==e.imagesPromises&&(e.imagesPromises=e.__imagesReady()),e.imagesPromises.then(function(){e.animate||(e.animate=!0,e.ui.video.hide(),e.ui.imageContainer.show(),e.ui.image.hide(),e.__animations(e.cancelObj={cancel:!1},0,1))})):(e.ui.video.hide(),e.ui.imageContainer.show(),e.imagePlayCount<4?(e.imageX=0,e.imageY=1,e.animateRun=!1,e.ui.image.hide(),e.__animations(e.cancelObj={cancel:!1},0,1)):e.animateRun=!0)))},__videoPlay:function(){this.ui.video.length&&(this.ui.video.get(0).play(),navigator.userAgent.indexOf("iPad")>-1?parseInt(navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1],10)>=10&&this.__hideWeather():this.__hideWeather())},__getAnimateStyle:function(){var e=[{from:{width:"120%",height:"120%","margin-left":"0%"},to:{width:"120%",height:"120%","margin-left":"-20%"}},{form:{width:"120%",height:"120%","margin-left":"-20%"},to:{width:"120%",height:"120%","margin-left":"0%"}},{form:{width:"100%",height:"100%","margin-left":"0%"},to:{width:"120%",height:"120%","margin-left":"0%"}},{from:{width:"120%",height:"120%","margin-left":"0%"},to:{width:"100%",height:"100%","margin-left":"0%"}}];return e[this.__getRandomNum(0,4)]},__animations:function(e,t,i){var n=this,c=n.__getAnimateStyle();n.ui.image.eq(this.imageX).css({"z-index":1,opacity:1}).show().animate({opacity:0},{duration:3e3,complete:function(){n.imageHide=!0,n.ui.image.eq(n.imageX).css("margin-left","0").hide(),n.__animationsComplete()}}),n.ui.image.eq(this.imageY).css(jQuery.extend({},{"z-index":0,opacity:0},c.from)).show().animate(jQuery.extend({},{opacity:1},c.to),{duration:3e3,complete:function(){n.imageShow=!0,n.__animationsComplete()}})},__animationsComplete:function(){var e=this;this.animateRun||e.imageShow&&e.imageHide&&(this.animateRun=!0,clearTimeout(e.timer),e.timer=null,e.imageX++,e.imageY++,e.imageX>e.images.length-1&&(e.imageX=0),e.imageY>e.images.length-1&&(e.imageY=0),e.timer=setTimeout(function(){e.playAll&&e.videoData&&e.imageCount==e.imageX+1?e.playCount<4&&(e.animateRun=!0,e.ui.imageContainer.hide(),e.__animations(self.cancelObj={cancel:!0},0,1),e.ui.video.show(),e.ui.video[0].play()):(e.__animations(),e.animateRun=!1)},500))},__imageHide:function(e,t){var i=this;i.ui.image.eq(e).delay(t).delay(this.hideDelay*this.totalDurationTime).animate({opacity:0,width:"100%",height:"100%","margin-left":"0"},{duration:(this.hideTime-this.hideDelay)*this.totalDurationTime,easing:"linear",complete:function(){i.__imageShow(e,t)}})},__imageShow:function(e,t){var i=this;i.ui.image.eq(e).delay((this.showDelay-this.hideTime)*this.totalDurationTime).animate({opacity:1,width:"120%",height:"120%","margin-left":"-20%"},{duration:(1-this.showDelay)*this.totalDurationTime,easing:"linear",complete:function(){i.__imageHide(e,0)}})},__change:function(){var e=c.tracker.get("mobile");l!==e&&(l=e,this.render())},__hideWeather:function(){this.tplHeroWeather.css("background-image","none")},__showWeather:function(){this.tplHeroWeather.css("background-image",this.tplHeroWeatherImage),c.ismobile()&&this.tplHeroWeather.css("background-position",imageAnchor)},__imagesReady:function(){for(var e=[],t=0;t<this.imageCount;t++)e.push(this.__imageLoader(this.images[t]));return jQuery.when.apply(jQuery,e)},__imageLoader:function(e){var t=jQuery.Deferred(),i=new Image,n=function(){i.removeEventListener("load",n),i.removeEventListener("error",c),t.resolve()},c=function(){i.removeEventListener("load",n),i.removeEventListener("error",c),t.resolve()};return i.addEventListener("load",n),i.addEventListener("error",c),i.setAttribute("src",e),t.promise()},__doAnimate:function(e){if(!e.cancel){var t=this;t.randomIndex>=t.randomArray.length&&(t.randomArray=this.__random(4),t.randomIndex=0);var i=t.randomArray[t.randomIndex++];t["__animate"+i](this.__getImage()).then(function(){t.__doAnimate(e)})}},__getImage:function(){return this.imageIndex>=this.imageCount&&(this.imageIndex=0),this.currentImage=this.images[this.imageIndex++],"url('"+this.currentImage+"')"},__animate0:function(e){var t=jQuery.Deferred(),i=this;return i.ui.image.css({width:"120%",height:"120%","margin-left":"-20%","background-image":e,opacity:1}).animate({width:"120%",height:"120%","margin-left":"0%",opacity:1},3e3).delay(400).animate({width:"120%",height:"120%","margin-left":"0%",opacity:.6},2e3,function(){t.resolve()}),t.promise()},__animate1:function(e){var t=jQuery.Deferred(),i=this;return i.ui.image.css({width:"120%",height:"120%","margin-left":"0%","background-image":e,opacity:1}).animate({width:"120%",height:"120%","margin-left":"-20%",opacity:1},3e3).delay(400).animate({width:"120%",height:"120%","margin-left":"-20%",opacity:.6},2e3,function(){t.resolve()}),t.promise()},__animate2:function(e){var t=jQuery.Deferred(),i=this;return i.ui.image.css({width:"100%",height:"100%","margin-left":"0%","background-image":e,opacity:1}).animate({width:"120%",height:"120%","margin-left":"0%",opacity:1},3e3).delay(400).animate({width:"120%",height:"120%","margin-left":"0%",opacity:.6},2e3,function(){t.resolve()}),t.promise()},__animate3:function(e){var t=jQuery.Deferred(),i=this;return i.ui.image.css({width:"120%",height:"120%","margin-left":"0%","background-image":e,opacity:1}).animate({width:"100%",height:"100%","margin-left":"0%",opacity:1},3e3).delay(400).animate({width:"100%",height:"100%","margin-left":"0%",opacity:.6},2e3,function(){t.resolve()}),t.promise()},__random:function(e){for(var t=[],i=0;e>i;i++)t.push(i);for(var n=[];t.length;){var c=Math.random()*t.length|0;n.push(t[c]),t.splice(c,1)}return n},__getRandomNum:function(e,t){var i=t-e;return Math.floor(Math.random()*i+e)}})},{"../ui/util":2122,"./template.hbs":1029,"backbone.marionette":6}],1029:[function(e,t,i){t.exports='<div class="hotel-hero-module-view">\r\n    {{#if playAll}}\r\n        {{#if isPC}}\r\n            {{#if video}}\r\n                <video class="hotel-hero-module-view-video" data-hero-view="video" src="{{video}}" autoplay muted></video>\r\n            {{/if}}\r\n        {{/if}}\r\n        {{#if current}}\r\n            <div class="images-container">\r\n                {{#each images}}\r\n                    {{#if ../../isIndex}}\r\n                        {{#if description}}\r\n                            <div class="hotel-hero-module-image-description">{{{description}}}</div>\r\n                        {{/if}}\r\n                    {{/if}}\r\n                    <div class="hotel-hero-module-view-image {{anchor}}" data-hero-view="image" style="background-image: url(\'{{url}}\');"></div>\r\n                {{/each}}\r\n            </div>\r\n        {{/if}}\r\n    {{else}}\r\n        {{#if isvideo}}\r\n            {{#if isPC}}\r\n                {{#if video}}\r\n                    <video class="hotel-hero-module-view-video" data-hero-view="video" src="{{video}}" autoplay muted></video>\r\n                {{/if}}\r\n            {{/if}}\r\n        {{else}}\r\n            {{#if current}}\r\n                <div class="images-container">\r\n                    {{#each images}}\r\n                        {{#if url}}\r\n                            {{#if ../../isIndex}}\r\n                                {{#if description}}\r\n                                    <div class="hotel-hero-module-image-description">{{{description}}}</div>\r\n                                {{/if}}\r\n                            {{/if}}\r\n                            <div class="hotel-hero-module-view-image {{anchor}}" data-hero-view="image" style="background-image: url(\'{{url}}\');"></div>\r\n                        {{else}}\r\n                            {{#if ../../isIndex}}\r\n                                {{#if description}}\r\n                                    <div class="hotel-hero-module-image-description">{{{description}}}</div>\r\n                                {{/if}}\r\n                            {{/if}}\r\n                            <div class="hotel-hero-module-view-image {{imageAnchor}}" data-hero-view="image" style="background-image: url(\'{{this}}\');"></div>\r\n                        {{/if}}\r\n                    {{/each}}\r\n                </div>\r\n            {{/if}}\r\n        {{/if}}\r\n    {{/if}}\r\n</div>'},{}],1024:[function(e,t,i){var n=e("backbone.marionette");t.exports=GoodToKnow=n.LayoutView.extend({el:".hotelinfo-table-shift",ui:{hotelContent:".hotel-property__about-hotel .hotel-brief",buttonRead:".hotel-property__about-hotel .button-read"},events:{"click .hotelinfo-nav li":"doShift","change .select-container select":"doShift"},template:!1,initialize:function(){var e=this;jQuery(e.ui.hotelContent).height()>198&&(jQuery(e.ui.buttonRead).css("display","inline-block").html(i18n.t("general.read_more")),jQuery(e.ui.hotelContent).toggleClass("minimise")),jQuery(e.ui.buttonRead).on("click",function(){var t=jQuery(e.ui.buttonRead);jQuery(e.ui.hotelContent).toggleClass("minimise"),t.html()==i18n.t("general.read_more")?t.html(i18n.t("general.read_less")):t.html(i18n.t("general.read_more"))})},doShift:function(e){this.trigger("clicked");var t,i=e.type;if("click"==i){var n=this.$(e.target);n.hasClass("active")||(t=n.index(),n.addClass("active").siblings().removeClass("active"),this.$(".select-container select").find("option[data-index="+n.data("index")+"]").attr("selected",!0).siblings().attr("selected",!1)),this.$(".tableshift-content-wrapper").eq(t).show().siblings().hide()}"change"==i&&(t=this.$(e.target).find("option:selected").data("index"),--t,this.$(".hotelinfo-nav li").eq(t).addClass("active").siblings().removeClass("active"),jQuery(".hotel-property__about-hotel .tableshift-content-wrapper").eq(t).show().siblings().hide()),setTimeout(function(){jQuery("body").trigger("resize")},200)},onRender:function(){}})},{"backbone.marionette":6}],1540:[function(e,t,i){var n=e("backbone.marionette"),c=e("./counter/counter");t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"offers2__details-occupier",ui:{adult:"[data-item='adult']",child:"[data-item='child']"},serializeData:function(){var e=this.model.get("redirectParams")||{};return{maxchildage:e.hotel&&e.hotel.maxchildage||11}},onRender:function(){var e=this,t=e.__getOccupier();e.__createAdult(t),e.__createChild(t)},__getOccupier:function(){var e=this.model.get("redirectParams")||{},t=e.adultocc||1,i=e.childocc||0,n=e.hotel&&e.hotel.maxocc||18,c=Math.min(e.hotel&&e.hotel.adultocc||9,n),l=Math.min(e.hotel&&e.hotel.childocc||9,n);return t=Math.min(t,c),i=Math.min(i,l),l=Math.min(l,Math.max(n-t,0)),c=Math.min(c,Math.max(n-i,1)),{maxOCC:n,maxAdult:c,maxChild:l,adultOCC:t,childOCC:i}},__createAdult:function(e){var t=this;c.autoCreate(t.ui.adult,{minValue:1,maxValue:e.maxAdult,value:e.adultOCC,change:jQuery.proxy(t.__changeAdult,t)})},__createChild:function(e){var t=this;c.autoCreate(t.ui.child,{minValue:0,maxValue:e.maxChild,value:e.childOCC,change:jQuery.proxy(t.__changeChild,t)})},__changeAdult:function(e){var t=this;t.options.rootState.trigger("changeRedirectParams",{adultocc:e}),t.__createChild(t.__getOccupier())},__changeChild:function(e){var t=this;t.options.rootState.trigger("changeRedirectParams",{childocc:e}),t.__createAdult(t.__getOccupier())}})},{"./counter/counter":1538,"./template.hbs":1539,"backbone.marionette":6}],1539:[function(e,t,i){t.exports='<div class="offers2__details-occupier-level">\r\n    <div class="offers2__details-occupier-level-1">\r\n        <div class="offers2__details-occupier-text">{{local "booking.adults"}}</div>\r\n    </div>\r\n    <div class="offers2__details-occupier-level-2" data-item="adult"></div>\r\n</div>\r\n<div class="offers2__details-occupier-level">\r\n    <div class="offers2__details-occupier-level-1">\r\n        <div class="offers2__details-occupier-text">{{local "booking.children"}}</div>\r\n        <div class="offers2__details-occupier-vice">({{local "booking.below_12" maxchildage}})</div>\r\n    </div>\r\n    <div class="offers2__details-occupier-level-2" data-item="child"></div>\r\n</div>'},{}],1538:[function(e,t,i){var n=Handlebars.compile(['<div class="nk2__count">','<span class="nk2__count-icon icon-icon_B024"></span>','<span class="nk2__count-text">{{value}}</span>','<span class="nk2__count-icon icon-icon_B023"></span>',"</div>"].join(""));t.exports={autoCreate:function(e,t){e.empty(),this.__appendCountTemp(e,t)},__appendCountTemp:function(e,t){function i(){t.value<=t.minValue?l.eq(0).addClass("disabled"):l.eq(0).removeClass("disabled"),t.value>=t.maxValue?l.eq(2).addClass("disabled"):l.eq(2).removeClass("disabled"),l.eq(1).html(t.value)}var c=jQuery(n(t)),l=c.children();l.eq(0).on("click",function(e){e.stopPropagation(),t.value>t.minValue&&(t.value--,i(),t.change&&t.change(t.value))}),l.eq(2).on("click",function(e){e.stopPropagation(),t.value<t.maxValue&&(t.value++,i(),t.change&&t.change(t.value))}),i(),e.append(c)}}},{}],909:[function(e,t,i){var n=e("../../../../prop-page/01-article/03-dates/calendar/locals"),c=e("../../../../prop-page/01-article/03-dates/calendar/view"),l=e("moment"),a=e("../../../../../../../config/host"),o=a.getLanguage(),s="ja"===o||"zh"===o||"zh-tw"===o?"YYYY年 MM":"MMMM YYYY";e("../../../../prop-page/01-article/03-dates/calendar/style.sass"),e("./style.sass"),t.exports=c.extend({template:Handlebars.compile(e("./template.hbs")),className:function(){return"x-solar-twins"},serializeData:function(){var e=this.nowMonth,t=n.nextMonth(this.nowMonth);return{weeks:"en"===o?{Sunday:"S",Monday:"M",Tuesday:"T",Wednesday:"W",Thursday:"T",Friday:"F",Saturday:"S"}:n.weeks_short,prevTitle:l(e).format(s),nextTitle:l(t).format(s),prevDays:n.getDays(e,n.nowDate()),nextDays:n.getDays(t,n.nowDate()),prev:n.nowMonth()<e,next:!0,showRate:this.showRate,newLookStyle:this.options.newLookStyle}},__undo:function(e){var t=this.options.newLookStyle?this.options.parentView.$el:this.$el;0===t.has(e.target).length&&this.trigger("date:cancel")}})},{"../../../../../../../config/host":45,"../../../../prop-page/01-article/03-dates/calendar/locals":935,"../../../../prop-page/01-article/03-dates/calendar/style.sass":936,"../../../../prop-page/01-article/03-dates/calendar/view":938,"./style.sass":907,"./template.hbs":908,moment:16}],936:[function(e,t,i){t.exports=e("sassify")('.x-solar {   padding: 8px 4px;   background-color: #fff;   user-select: none; }   .x-solar .x-solar-tab {     width: 100%;     color: #363636; }     .x-solar .x-solar-tab .x-solar-calendar-tip {       height: 3.4rem;       position: relative; }       .x-solar .x-solar-tab .x-solar-calendar-tip .x-solar-tip-box {         position: absolute;         right: 7px;         bottom: -2px;         cursor: pointer; }         .x-solar .x-solar-tab .x-solar-calendar-tip .x-solar-tip-box .icon-icon_D007 {           color: #363636;           padding-left: .6rem;           padding-right: .6rem;           padding-bottom: .4rem; }         .x-solar .x-solar-tab .x-solar-calendar-tip .x-solar-tip-box a {           color: #31a2ac;           text-decoration: underline; }     .x-solar .x-solar-tab .x-solar-date {       font-size: 1.2em;       text-align: center;       font-weight: bold; }     .x-solar .x-solar-tab .x-solar-item {       width: 14.28%; }     .x-solar .x-solar-tab .x-solar-cell {       position: relative;       overflow: hidden; }       .x-solar .x-solar-tab .x-solar-cell .x-solar-icon {         display: block;         cursor: pointer;         position: absolute;         bottom: 2px;         right: 4px;         left: 4px;         top: 2px; }         .x-solar .x-solar-tab .x-solar-cell .x-solar-icon.x-solar-icon-prev::before {           width: 0;           height: 0;           content: "";           display: block;           position: absolute;           -webkit-transform: translate(-50%, -50%);           -moz-transform: translate(-50%, -50%);           -ms-transform: translate(-50%, -50%);           -o-transform: translate(-50%, -50%);           transform: translate(-50%, -50%);           left: 50%;           top: 50%;           border-top: .5em solid transparent;           border-bottom: .5em solid transparent;           border-right: .67em solid currentColor; }         .x-solar .x-solar-tab .x-solar-cell .x-solar-icon.x-solar-icon-next::before {           width: 0;           height: 0;           content: "";           display: block;           position: absolute;           -webkit-transform: translate(-50%, -50%);           -moz-transform: translate(-50%, -50%);           -ms-transform: translate(-50%, -50%);           -o-transform: translate(-50%, -50%);           transform: translate(-50%, -50%);           left: 50%;           top: 50%;           border-top: .5em solid transparent;           border-bottom: .5em solid transparent;           border-left: .67em solid currentColor; }       .x-solar .x-solar-tab .x-solar-cell .x-solar-head {         display: block;         text-align: center;         position: absolute;         bottom: 0;         right: 0;         left: 0;         top: 0; }         .x-solar .x-solar-tab .x-solar-cell .x-solar-head::after {           content: "";           display: inline-block;           vertical-align: middle;           height: 100%; }       .x-solar .x-solar-tab .x-solar-cell .x-solar-none {         opacity: .4;         display: block;         cursor: default;         background-color: #f5f5f5;         text-align: center;         position: absolute;         bottom: 2px;         right: 2px;         left: 2px;         top: 2px; }         .x-solar .x-solar-tab .x-solar-cell .x-solar-none::after {           content: "";           display: inline-block;           vertical-align: middle;           height: 100%; }       .x-solar .x-solar-tab .x-solar-cell .x-solar-text {         z-index: 1;         display: block;         cursor: pointer;         text-align: center;         position: absolute;         bottom: 2px;         right: 2px;         left: 2px;         top: 2px; }         .x-solar .x-solar-tab .x-solar-cell .x-solar-text::after {           content: "";           display: inline-block;           vertical-align: middle;           height: 100%; }       .x-solar .x-solar-tab .x-solar-cell .x-solar-mask {         background-color: #f3f3f3;         position: absolute;         bottom: 2px;         right: 2px;         left: 2px;         top: 2px; }         .x-solar .x-solar-tab .x-solar-cell .x-solar-mask .prev {           fill: transparent; }         .x-solar .x-solar-tab .x-solar-cell .x-solar-mask .next {           fill: transparent; }       .x-solar .x-solar-tab .x-solar-cell::before {         content: "";         display: block;         margin-top: 80%; }       .x-solar .x-solar-tab .x-solar-cell.prev .x-solar-mask {         background-color: rgba(49, 162, 172, 0.6); }         .x-solar .x-solar-tab .x-solar-cell.prev .x-solar-mask .prev {           fill: #31A2AC; }       .x-solar .x-solar-tab .x-solar-cell.next .x-solar-mask {         background-color: rgba(49, 162, 172, 0.6); }         .x-solar .x-solar-tab .x-solar-cell.next .x-solar-mask .next {           fill: #31A2AC; }       .x-solar .x-solar-tab .x-solar-cell.note .x-solar-mask {         background-color: #31A2AC;         opacity: .6; }       .x-solar .x-solar-tab .x-solar-cell.current .x-solar-mask {         background-color: #31A2AC; }  .x-solar-twins .x-solar.no-padding {   font-size: 1.2rem;   font-weight: 300;   padding: 2.4rem; }   .x-solar-twins .x-solar.no-padding svg {     display: none; }   .x-solar-twins .x-solar.no-padding .x-solar-tab {     color: #292929;     table-layout: fixed;     width: 252px; }     .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-date {       font-size: 1.4rem;       font-weight: 500;       color: black; }     .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-item {       width: 36px; }     .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-cell::before {       margin-top: 83.3%; }     .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-cell .x-solar-icon {       bottom: 2px;       right: 4px;       left: 4px;       top: 2px;       text-align: center;       line-height: 26px;       font-size: 1.6rem;       color: #9F7D23; }     .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-cell .x-solar-none {       bottom: 0px;       right: 0px;       left: 0px;       top: 0px; }     .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-cell .x-solar-text {       bottom: 0px;       right: 0px;       left: 0px;       top: 0px; }     .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-cell .x-solar-mask {       background-color: inherit;       bottom: 0px;       right: 0px;       left: 0px;       top: 0px; }     .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-cell.next, .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-cell.prev {       color: white; }       .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-cell.next .x-solar-mask, .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-cell.prev .x-solar-mask {         background-color: #9F7D23; }     .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-cell.note .x-solar-mask {       background-color: #9F7D23;       opacity: 0.1; }     .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-cell .x-solar-none {       color: #C4C4C4;       opacity: 1; }     .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-cell .x-solar-head {       color: black;       font-weight: 500; }     .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-cell .x-solar-item {       width: 36px; }     .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-calendar-tip .x-solar-tip-box .x-solar-tip a {       text-decoration: none;       color: #003664; }     @media screen and (max-width: 1024px) {       .x-solar-twins .x-solar.no-padding .x-solar-tab {         width: 175px; }         .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-item {           width: 25px; }           .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-item .x-solar-icon {             line-height: 16px; } }     @media screen and (min-width: 1025px) and (max-width: 1280px) {       .x-solar-twins .x-solar.no-padding .x-solar-tab {         width: 210px; }         .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-item {           width: 30px; }           .x-solar-twins .x-solar.no-padding .x-solar-tab .x-solar-item .x-solar-icon {             line-height: 21px; } }  html[dir="rtl"] .x-solar .x-solar-tab .x-solar-tip-box {   left: 7px;   right: auto; }  ');
},{sassify:36}],908:[function(e,t,i){t.exports='<div class="x-solar {{#if newLookStyle}}no-padding{{/if}}">\r\n    <table class="x-solar-tab" border="0" cellpadding="0" cellspacing="0">\r\n        <thead>\r\n        <tr>\r\n            <th class="x-solar-item">\r\n                <div class="x-solar-cell">\r\n                    {{#if prev}}\r\n                        <span class="x-solar-icon icon-icon_chervonLeft"></span>\r\n                    {{/if}}\r\n                </div>\r\n            </th>\r\n            <th class="x-solar-date" colspan="5">{{prevTitle}}</th>\r\n            <th class="x-solar-item">\r\n                <div class="x-solar-cell">\r\n                </div>\r\n            </th>\r\n        </tr>\r\n        <tr>\r\n            {{#each weeks}}\r\n                <th class="x-solar-item">\r\n                    <div class="x-solar-cell">\r\n                        <span class="x-solar-head">{{this}}</span>\r\n                    </div>\r\n                </th>\r\n            {{/each}}\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        {{#each prevDays}}\r\n            <tr>\r\n                {{#each this}}\r\n                    <td class="x-solar-item {{#if this}}valid-date{{/if}}">\r\n                        <div class="x-solar-cell" {{#if this}}data-date="{{this.UTC}}"{{/if}}>\r\n                            {{#if this}}\r\n                                {{#if this.live}}\r\n                                    <span class="x-solar-mask">\r\n                                        <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 16">\r\n                                            <path d="M 0 0 V 0 16 H 15 L 20 8 L 15 0 Z" class="prev"/>\r\n                                            <path d="M 5 0 L 0 8 L 5 16 H 20 V 0 Z" class="next"/>\r\n                                        </svg>\r\n                                    </span>\r\n                                    <span class="x-solar-text">{{this.text}}</span>\r\n                                {{else}}\r\n                                    <span class="x-solar-none">{{this.text}}</span>\r\n                                {{/if}}\r\n                            {{/if}}\r\n                        </div>\r\n                    </td>\r\n                {{/each}}\r\n            </tr>\r\n        {{/each}}\r\n        </tbody>\r\n    </table>\r\n</div>\r\n<div class="x-solar  {{#if newLookStyle}}no-padding{{/if}}">\r\n    <table class="x-solar-tab" border="0" cellpadding="0" cellspacing="0">\r\n        <thead>\r\n        <tr>\r\n            <th class="x-solar-item">\r\n                <div class="x-solar-cell">\r\n                </div>\r\n            </th>\r\n            <th class="x-solar-date" colspan="5">{{nextTitle}}</th>\r\n            <th class="x-solar-item">\r\n                <div class="x-solar-cell">\r\n                    {{#if next}}\r\n                        <span class="x-solar-icon icon-icon_chervonRight"></span>\r\n                    {{/if}}\r\n                </div>\r\n            </th>\r\n        </tr>\r\n        <tr>\r\n            {{#each weeks}}\r\n                <th class="x-solar-item">\r\n                    <div class="x-solar-cell">\r\n                        <span class="x-solar-head">{{this}}</span>\r\n                    </div>\r\n                </th>\r\n            {{/each}}\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        {{#each nextDays}}\r\n            <tr>\r\n                {{#each this}}\r\n                    <td class="x-solar-item {{#if this}}valid-date{{/if}}">\r\n                        <div class="x-solar-cell" {{#if this}}data-date="{{this.UTC}}"{{/if}}>\r\n                            {{#if this}}\r\n                                {{#if this.live}}\r\n                                    <span class="x-solar-mask">\r\n                                        <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 16">\r\n                                            <path d="M 0 0 V 0 16 H 15 L 20 8 L 15 0 Z" class="prev"/>\r\n                                            <path d="M 5 0 L 0 8 L 5 16 H 20 V 0 Z" class="next"/>\r\n                                        </svg>\r\n                                    </span>\r\n                                    <span class="x-solar-text">{{this.text}}</span>\r\n                                {{else}}\r\n                                    <span class="x-solar-none">{{this.text}}</span>\r\n                                {{/if}}\r\n                            {{/if}}\r\n                        </div>\r\n                    </td>\r\n                {{/each}}\r\n            </tr>\r\n        {{/each}}\r\n        {{#if showRate}}\r\n            <tr>\r\n                <td colspan="7" class="x-solar-calendar-tip">\r\n                    <div class="x-solar-tip-box">\r\n                        <span class="icon-icon_D007"></span><span class="x-solar-tip">{{local \'booking.try_rate_calendar\'}}</span>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        {{/if}}\r\n        </tbody>\r\n    </table>\r\n</div>'},{}],907:[function(e,t,i){t.exports=e("sassify")(".x-solar-twins {   width: 100%;   font-size: 0;   white-space: nowrap;   background-color: #fff;   box-shadow: 2px 2px 4px 0px rgba(0, 0, 0, 0.4); }   .x-solar-twins .x-solar {     width: 50%;     font-size: 12px;     background-color: #fff;     display: inline-block;     vertical-align: top; }     .x-solar-twins .x-solar .x-solar-tab {       color: #363636; }       .x-solar-twins .x-solar .x-solar-tab .x-solar-cell .x-solar-none {         background-color: #fff; }       .x-solar-twins .x-solar .x-solar-tab .x-solar-cell .x-solar-mask {         background-color: #f3f3f3; }       .x-solar-twins .x-solar .x-solar-tab .x-solar-cell.prev .x-solar-mask {         background-color: rgba(49, 162, 172, 0.6); }       .x-solar-twins .x-solar .x-solar-tab .x-solar-cell.next .x-solar-mask {         background-color: rgba(49, 162, 172, 0.6); }       .x-solar-twins .x-solar .x-solar-tab .x-solar-cell.note .x-solar-mask {         background-color: #31A2AC;         opacity: .6; }  ")},{sassify:36}],1613:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../../abmb/stateful.js");t.exports=l.ItemView.extend(n.extend({},a,{template:Handlebars.compile(e("./template.hbs")),events:{"click .destination-item":"switchDestination"},switchDestination:function(e){var t=jQuery(e.target).closest(".destination-item");return this.trigger("change:destination",t.data("destinationid")),!1},initialize:function(e){var t=this;t.model=new c.Model,t.DAO=e.DAO,t.render(),e.DAO.promise.then(function(){t.model.set("topLocations",t.DAO.top10Locations.get("items")),t.render()})}}))},{"../../../abmb/stateful.js":72,"./template.hbs":1612,backbone:8,"backbone.marionette":6,underscore:42}],1612:[function(e,t,i){t.exports='<h5 class="sidebar-item-name">{{local \'maps.top_10_destinations\'}}</h5>\r\n\r\n<ul class="sidebar-destination">\r\n    {{#each topLocations}}\r\n        <li><a class="item destination-item" data-name="{{attributes.name}}"\r\n               data-destinationid="{{attributes.id}}">{{attributes.name}}</a>\r\n        </li>\r\n    {{/each}}\r\n</ul>'},{}],1607:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../../abmb/stateful.js"),a=e("./model");e("../../../ui/util");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("./template.hbs")),initialize:function(e){var t=this;t.model=new a,t.DAO=e.DAO,t.render(),e.DAO.promise.then(function(){t.DAO.top10Destinations.top10(),t.model.set("topHotels",t.DAO.top10Destinations.get("items").slice(0,3)),t.render()})},renderForLocation:function(e){var t=this;e?e.get("topHotels")?(t.model=e.get("topHotels").clone(),t.render()):(t.switchState("loading:show"),t.model.fetchByLocation(e).then(function(){t.model.set("locationName",e.get("name")),e.set("topHotels",t.model.clone()),t.render(),t.switchState("loading:hide")})):(t.model.set("locationName",!1),t.model.set("topHotels",t.DAO.top10Destinations.get("items").slice(0,3)),t.render())}}))},{"../../../abmb/stateful.js":72,"../../../ui/util":2122,"./model":1605,"./template.hbs":1606,backbone:8,"backbone.marionette":6,underscore:42}],1606:[function(e,t,i){t.exports='<!--<span class="loading-container"><div class="loading-block"><p class="loading-gif"></p></div>-->\r\n<!--<div class="loading-error-block"><p></p></div></span>-->\r\n\r\n\r\n<h5 class="sidebar-item-name">{{#if locationName}}{{local \'tours.hotels_in\'}} {{locationName}}{{else}}{{local \'tours.popular_hotels\'}}{{/if}}</h5>\r\n<div class="sidebar-hotel">\r\n    {{#each topHotels}}\r\n        <div style="background-image: url(\'{{attributes.carouselimage}}\')"\r\n             class="tpl-tourside-hotel clearfix {{attributes.image_anchor}}">\r\n            <div class="tpl-content">\r\n                <h6 class="name">{{attributes.name}}</h6>\r\n                <div><a class="wgt-sqbutton-white" href="{{attributes.url}}">{{local \'maps.hotel_details\'}}</a></div>\r\n            </div>\r\n            <div class="tpl-holder"></div>\r\n        </div>\r\n    {{/each}}\r\n</div>'},{}],1605:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../../../config/host.js");t.exports=c.Model.extend({parse:function(e){var t=n.map(e,function(e){return new c.Model({name:e.hotelname,carouselimage:e.image_small,url:e.url})});return{topHotels:t}},fetchByLocation:function(e){return this.url=l.getURL("api","hotels/randombycity?top=3&"+e.get("level")+"="+encodeURIComponent(e.get("name"))),this.fetch()}})},{"../../../../../config/host.js":45,backbone:8,underscore:42}],2022:[function(e,t,i){var n=e("../../../destination/list/model"),c=e("../../../../../config/host.js");t.exports=n.extend({fetchLocations:function(){return this.url=c.getURL("api","shops/locations/top10?top=10"),this.isForHotels=!1,this.fetch()},fetchHotels:function(){return this.url=c.getURL("api","shops/destinations/top10"),this.isForHotels=!0,this.fetch()}})},{"../../../../../config/host.js":45,"../../../destination/list/model":790}],2080:[function(e,t,i){t.exports='<div class="selection">\r\n    <div class="select-section">\r\n        <div class="select">\r\n            <p class="text"> {{#if selected}}\r\n                {{selected.attributes.text}}\r\n            {{else}}\r\n                {{ selecttext }}\r\n            {{/if}}</p>\r\n        </div>\r\n    </div>\r\n    <div class="mobile-scroll-wrapper scroll-wrapper">\r\n        <ul class="selection-list">\r\n            {{#if selected.attributes.parent}}{{#unless fulllist}}\r\n                <li class="back"> back</li>\r\n            {{/unless}}{{/if}}\r\n            {{#each collection.models}}\r\n                {{> listitem}}\r\n            {{/each}}\r\n        </ul>\r\n    </div>\r\n</div>\r\n\r\n'},{}],2084:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("backbone"),a=Handlebars.compile(e("./template.hbs")),o=e("./view-model.js"),s=e("./item-model"),r=e("iscroll"),g=e("../../ui/util");Handlebars.registerPartial("sublist",Handlebars.compile(e("./template-sublist.hbs"))),Handlebars.registerPartial("listitem",Handlebars.compile(e("./template-listitem.hbs"))),Handlebars.registerHelper("ifEquals",function(e,t,i){return i[e==t?"fn":"inverse"](this)});var d=t=t.exports=c.ItemView.extend(n.extend({},{template:!1,ui:{div:"div",list:"ul.items-list",items:"li.item",content:"div>i",scroll:".scroll-wrapper",ddMobile:"select"},events:{click:function(e){return this.model.get("disabled")?e.preventDefault():void 0},"click li.back":"onBackClick","click li.item":"onItemClick","click .select-sign,.select":"onDropDownClick"},initialize:function(e){var t=this;t.templateFunc=e.template||a,d.instances.push(t),t.model=t.model||new o(e),t.model.set(n.pick(t.$el.data(),"sign fulllist multiselect label allownull disabled selecttext noneselectedtext disabled".split(" "))),jQuery("body").on("click",function(e){if(!g.ismobile()){var i=jQuery(e.target).parents("body").length,n=t.$el.length>0&&jQuery.contains(t.$el.get(0),e.target)||jQuery(".mobile-fullscreen").has(jQuery(e.target)).length;i&&!n&&t.collapse()}}),t.model.on("change",t.render,t),t.render(),l.on("select-hotel",function(e){var i=t.ui.items;i.filter('[data-id="'+e+'"]').click(),l.trigger("check-hotel")})},render:function(){function e(){var e=window.navigator.userAgent;if(/iPhone|iPad|iPod|Macintosh/i.test(e))return!1;if(/Chrome/i.test(e))return/Android/i.test(e);if(/Silk/i.test(e))return!1;if(/Android/i.test(e)){var t=e.match(/Android [\d+.]{1,5}/)[0].replace("Android ","");return parseFloat(t[0]+t[2]+t[4])<=442&&parseFloat(t[0]+t[2]+t[4])>430}}var t=this;return Handlebars.registerHelper("ifSelected",function(e,i){return i[t.model.isSelected(e)?"fn":"inverse"](this)}),Handlebars.registerHelper("ifFulllist",function(e){return e[t.model.get("fulllist")?"fn":"inverse"](this)}),Handlebars.registerHelper("ifMultiselect",function(e){return e[t.model.get("multiselect")?"fn":"inverse"](this)}),Handlebars.registerHelper("ifFulllistAnd",function(e,i){return i[e&&t.model.get("fulllist")?"fn":"inverse"](this)}),Handlebars.registerHelper("isSelectableItem",function(e,i){return i[t.model.get("fulllist")&&0!=e.get("children").length?"inverse":"fn"](this)}),t.$el.html(t.templateFunc(t.model.attributes)),t.bindUIElements(),t.textOverflow(),jQuery(window).resize(function(){t.textOverflow()}),t.ui.scroll.length&&t.ui.scroll.get(0).children.length&&(t.scroll=new r(t.ui.scroll.get(0),{mouseWheel:!0,scrollbars:!0,interactiveScrollbars:!0,click:e()})),t},textOverflow:function(){var e=this;e.ui.div.hasClass("text_overflow")&&e.ui.div.removeClass("text_overflow"),e.ui.content.width()>.91*e.$el.width()&&e.ui.div.addClass("text_overflow")},setItem:function(e){if(this.model.setItem(e),this.model.get("forOffers")){var t=e&&e.get("item")||e;t?this.ui.ddMobile.val(t.get("id")):this.ui.ddMobile.val("select")}if(this.model.get("forPackage")){var t=e&&e.get("item")||e;t?this.ui.ddMobile.val(t.get("id")):this.ui.ddMobile.val("select")}},setItems:function(e,t){this.model.setItems(e,t)},getSelectedItem:function(){return this.model.getSelectedItem()},getSelectedItemValue:function(){return this.model.getSelectedItemValue()},getSelectedItemItem:function(){return this.model.getSelectedItemItem()},collapse:function(){this.$el.closest(".select-root").removeClass("expanded")},expand:function(){this.$el.closest(".select-root").addClass("expanded"),this.refreshScroll()},toggleExpanded:function(){this.$el.closest(".select-root").toggleClass("expanded"),this.refreshScroll()},refreshScroll:function(){var e=this;e.scroll&&window.setTimeout(function(){e.scroll.refresh()},500)},onDropDownClick:function(e){var t=this;t.toggleExpanded();var i=t.$el.closest(".select-root"),n=jQuery("[data-component='navbar']").find(".tpl-static-banner");i.hasClass("expanded")?n.finish().fadeOut("slow",function(){n.addClass("user-module-none")}):n.removeClass("user-module-none")},onBackClick:function(e){if(!this.clickFlag){if(clickFlag=!0,setTimeout(function(){flag=!1},100),"destination"==this.options.dropdownType){var t=g.getParamsFromHash();delete t[this.getSelectedItemItem().getLevel()],g.updateHash(t)}this.model.back(),this.expand()}},onItemClick:function(e){if(!this.clickFlag){clickFlag=!0,setTimeout(function(){flag=!1},500);var t=jQuery(e.target).closest("[data-instanceindex]").data("instanceindex"),i=s.instances[t];if(!(this.model.get("fulllist")&&i.get("children").length||i.get("disabled"))){if(this.collapse(),"destination"==this.options.dropdownType){var n=g.getParamsFromHash();n[i.get("item").getLevel()]=i.get("item").get("key"),g.updateHash(n)}if(this.model.setItem(i),(this.model.get("multiselect")||this.model.get("selected")&&this.model.get("selected").get("children").length)&&this.expand(),this.model.get("forOffers")){var c=i.get("item");c?this.ui.ddMobile.val(c.get("id")):this.ui.ddMobile.val("select")}if(this.model.get("forPackage")){var c=i.get("item");c?this.ui.ddMobile.val(c.get("id")):this.ui.ddMobile.val("select")}}}}}),{instances:[],getInstance:function(e){return n.find(this.instances,function(t){return t.$el.is(e)})},autoCreate:function(){jQuery("[data-dropdown-autocreate]").each(function(){d.createFromDOM(this)})},createFromLocations:function(e,t){var t=t||{},i=t.el&&this.createFromDOM(t.el)||new d;return i.setItems(s.createFromLocations(e,t)),i.render()},createFromDOM:function(e,t){var i=jQuery(e),e=i.get(0),n=i.is("select"),c=this.getInstance(e);if(!c){var l={template:t,el:n?null:i,items:i.children().map(function(){return s.createFromDOMElement(this,null,!0)}).get()};n&&(l.multiselect=i.prop("multiple")),c=new d(l),i.data("selecttext")&&c.model.set({selecttext:i.data("selecttext")}),c.model.on("change",function(){i.val(c.model.getSelectedItemValue()),i.attr("data-dropdown-value",c.model.getSelectedItemValue()),i.trigger("change")}),n?i.hide().after(c.render().el):c.render()}return c}});d.autoCreate()},{"../../ui/util":2122,"./item-model":2078,"./template-listitem.hbs":2079,"./template-sublist.hbs":2081,"./template.hbs":2082,"./view-model.js":2083,backbone:8,"backbone.marionette":6,iscroll:14,underscore:42}],2083:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("./item-collection"),a=e("./item-model"),o=e("../../ui/util");t.exports=c.Model.extend({defaults:{label:"",collection:null,selected:null,allownull:!0,multiselect:!1,selecttext:i18n.t("general.select"),selectedtext:i18n.t("general.selected"),selecteditems:null,fulllist:!1,disabled:!1},initialize:function(e){var t=this;this.set({collection:new l,selecteditems:[]}),this.listenTo(this.get("collection"),"change reset add remove",function(){t.trigger("change:collection change")}),this.on("change:collection",function(){var e=this.get("selecteditems"),i=this.getItems(),c=n.difference(e,i);c.length&&t.set({selecteditems:n.without.apply(n,[e].concat(c))})}),e&&e.items&&this.setItems(e.items)},getAvailableOptions:function(){return this.get("selected").children.length?this.get("selected").children:this.get("selected").parent.children},filterBy:function(e){this.get("collection").set(n.filter(this.getAvailableOptions(),function(t){return!t.get("item").matches||t.get("item").matches(e)}))},getSelectedItem:function(){return this.get("multiselect")?n.map(this.get("selecteditems"),function(e){return e.get("item")}):this.get("selected")},getSelectedItemItem:function(){return this.get("multiselect")?n.map(this.get("selecteditems"),function(e){return e.get("item")}):this.get("selected")&&this.get("selected").get("item")},getSelectedItemValue:function(){return this.get("multiselect")?n.map(this.get("selecteditems"),function(e){return e.get("value")}):this.get("selected")&&this.get("selected").get("value")},isSelected:function(e){var t=this.get("multiselect")?n.contains(this.get("selecteditems"),e):this.get("selected")==e;return t},setItems:function(e,t){function i(e,t,i){return n.find(e,function(e){return t&&e.get("key").toUpperCase()==t.toUpperCase()&&(!i||(e.get("parentid")||"").toUpperCase()==i.toUpperCase())})}if(t&&this.set({selected:null}),e=n.map(e,function(e){return e instanceof a?e:new a(e)}),n.any(e,function(e){return!e.get("parent")})&&n.any(e,function(e){return e.get("children").length})){var c=new a({className:"adoptedParent",children:e,text:this.get("selecttext")});n.each(e,function(e){e.set({parent:c})})}if(this.set({selecteditems:[]},{silent:!0}),this.get("collection").set(e),!t){var e=this.getItems(!0);0!=e.length&&n.contains(e,this.get("selected"))||this.set({selected:null})}if(!this.getSelectedItem()&&!this.get("allownull")&&this.get("collection").length&&"destination"==this.get("dropdownType")){var l=o.queryParamFromHash("regionallevel"),s=o.queryParamFromHash("countrylevel"),r=o.queryParamFromHash("citylevel"),g=o.queryParamFromHash("hotellevel"),d=!!l,I=!!s,b=!!r,C=!!g,u=n.map(n.filter(this.getItems(!0),function(e){return"location"==e.get("className")}),function(e){return e.get("item")});if((d||I)&&u.length){var m;d&&(m=i(u,l),m&&this.setItem(m.get("id"))),(d&&I&&m||s)&&(m=i(u,s,m&&m.get("id")),m&&this.setItem(m.get("id")),b&&m&&(m=i(u,r,m.get("id")),m&&this.setItem(m.get("id"))),(b&&C&&m||C)&&(m=i(m.destinations,g),m&&this.setItem(m.get("id"))))}m||this.setItem(this.get("collection").at(0))}},getItems:function(e){for(var t=this,i=e&&!this.get("fulllist"),c=this.get("selected");i&&c&&c.get("parent");)c=c.get("parent");for(var l=this.get("fulllist")||!c||t.get("collection").contains(c)?n.clone(this.get("collection").models):[c].concat(c.get("children")),a=[];l.length;){var o=l.shift();a.push(o),l.push.apply(l,o.get("children"))}return a},setItem:function(e,t){if(!(e instanceof a)){var i=this.getItems(t);n.find(i,function(e){}),e=n.find(i,function(t){return t.get("name")==e})||n.find(i,function(t){return t.get("value")==e})||n.find(i,function(t){return t.get("item")==e})||n.find(a.instances,function(t){return t.get("value")==e})}if(e)if(this.get("multiselect")&&0==e.get("children").length){var c=this.get("selecteditems");this.set({selecteditems:n.contains(c,e)?n.without(c,e):[e].concat(c)})}else this.get("selected")==e&&this.get("allownull")?(this.set({selected:null}),e.get("parent")&&this.get("collection").set(e.get("parent").get("children"))):(e.get("children").length>0&&this.get("collection").set(e.get("children")),this.set("selected",e));else this.set({selected:this.get("allownull")||0==this.get("collection").length?e:this.get("collection").at(0),selecteditems:[]})},back:function(){var e=this.get("selected");if(e){var t=e.get("parent");t&&this.setItem(t)}}})},{"../../ui/util":2122,"./item-collection":2077,"./item-model":2078,backbone:8,underscore:42}],2082:[function(e,t,i){t.exports='{{#if forOffers}}\r\n    <div class="select" style="width: 100%; height:100%">\r\n        <span class="icon-icon_B002"></span>\r\n        <i class="customize-hotel-header" style="position: relative; top: -0.3rem;left: -0.3rem;display: inline-block">{{#if selected}}\r\n            {{selected.attributes.text}}\r\n        {{else}}\r\n            {{ selecttext }}\r\n        {{/if}}</i>\r\n        <select class="mobile-select">\r\n            <option value="select">{{local \'offers.select_hotel\'}}</option>\r\n            {{#each collection.models}}\r\n                {{#if this.attributes.item}}\r\n                    <option value="{{this.attributes.item.attributes.id}}">{{this.attributes.item.attributes.name}}</option>\r\n                {{/if}}\r\n            {{/each}}\r\n        </select>\r\n    </div>\r\n{{else}}\r\n    {{#if forPackage}}\r\n        <div class="select" style="width: 100%; height:100%">\r\n            <span class="icon-icon_B002"></span>\r\n            <i class="customize-hotel-header" style="position: relative; top: -0.3rem;left: -0.3rem;display: inline-block">{{#if selected}}\r\n                {{selected.attributes.text}}\r\n            {{else}}\r\n                {{ selecttext }}\r\n            {{/if}}</i>\r\n            <select class="mobile-select">\r\n                <option value="select">{{local \'package.select_hotel\'}}</option>\r\n                {{#each collection.models}}\r\n                    {{#if this.attributes.item}}\r\n                        <option value="{{this.attributes.item.attributes.id}}">{{this.attributes.item.attributes.name}}</option>\r\n                    {{/if}}\r\n                {{/each}}\r\n            </select>\r\n        </div>\r\n    {{else}}\r\n        {{#if sign}}\r\n            <div class="select-button">\r\n                <p class="text select-sign"><span class="icon-icon_B023"></span></p>\r\n            </div>\r\n        {{else}}\r\n            <div class="select">\r\n                <p class="text ">\r\n                    {{#if selected}}\r\n                        {{selected.attributes.text}}\r\n                    {{else}}\r\n                        {{ selecttext }}\r\n                    {{/if}}\r\n                </p>\r\n            </div>\r\n        {{/if}}\r\n    {{/if}}\r\n{{/if}}\r\n\r\n\r\n<div class="popup scroll-wrapper">\r\n    <ul class="items-list">\r\n        {{#if selected.attributes.parent}}{{#unless fulllist}}\r\n            <li class="back"> back</li>\r\n        {{/unless}}{{/if}}\r\n        {{#each collection.models}}\r\n            {{> listitem}}\r\n        {{/each}}\r\n    </ul>\r\n</div>'},{}],2079:[function(e,t,i){t.exports='<li class="{{#if attributes.disabled}}disabled {{/if}}{{#isSelectableItem this}}item{{/isSelectableItem}}{{#ifSelected this}} selected{{/ifSelected}}{{#if attributes.children.length}} has-children{{/if}}{{#if attributes.className}} {{attributes.className}}{{/if}}"\r\n    data-instanceindex="{{instanceindex}}"\r\n    data-value="{{attributes.value}}"\r\n    data-id="{{attributes.item.id}}"\r\n>\r\n	{{#ifFulllistAnd attributes.children.length}}\r\n		{{> sublist}}\r\n	{{else}}\r\n        {{#ifMultiselect}}{{#unless attributes.children.length}}{{#unless attributes.disabled}}\r\n			<i class="checkbox {{#ifSelected this}}checked{{/ifSelected}}"></i>\r\n		{{/unless}}{{/unless}}{{/ifMultiselect}}\r\n		{{attributes.text}}\r\n	{{/ifFulllistAnd}}\r\n</li>'},{}],2075:[function(e,t,i){function n(e,t,i){if(i>=e.length)for(var n=i-e.length;n--+1;)e.push(void 0);return e.splice(i,0,e.splice(t,1)[0]),e}var c=e("underscore"),l=e("backbone.marionette"),a=e("./waterfall-list.js"),o=e("./model.js"),s=e("../util");t.exports=l.ItemView.extend({className:"destination-list",events:{"click .destination-item":"switchDestination"},switchDestination:function(e){var t=jQuery(e.target).closest(".destination-item");return this.ifquickbook&&t.data("url")?(window.location.href=t.data("url"),!1):(this.trigger("change:destination",t.data("destinationid"),t.data("countrycode")),!!this.ifquickbook)},initialize:function(t){var i=this;i.model=new o,i.ifquickbook=t.ifquickbook,i.model.set("countryClickable",t&&t.countryClickable),this.template=t&&t.columnFlow?Handlebars.compile(e("./template-column.hbs")):Handlebars.compile(e("./template.hbs")),Handlebars.registerHelper("eachCity",function(e,t){var i=[];if(e.children){if("china"===e.get("key")||"cn"===e.get("countrycode")){var n=c.findIndex(e.children,function(e){return"taichung"===e.get("key")||4678===e.get("destinationid")});n>0&&e.children.push(e.children.splice(n,1)[0])}e.children.forEach(function(e){i.push(t.fn(e))})}return i.join("")}),Handlebars.registerHelper("hasChildren",function(e,t){return e.children&&e.children.length||e.get("allowNoChildren")?t.fn(e):t.inverse(e)}),i.$el.addClass(this.className),i.model.on("change",function(){i.render()}),jQuery(window).on("resize",c.debounce(function(){i.render()},500)),jQuery("html").click(function(e){var t=jQuery(e.target);if("A"==t.prop("tagName")||"A"==t.parent()[0].nodeName||t.hasClass("force-default")||t.parent().hasClass("force-default"))return!0;if(!i.$el.hasClass("destination-item")&&(i.$el.has(t).length||!i.options.filter||i.options.filter.has(t).length)){var n=jQuery("[data-component='navbar']").find(".tpl-static-banner");return n.finish().fadeOut("slow",function(){n.addClass("user-module-none")}),!1}i.$el.hide()}),i.$el.hide()},serializeData:function(){var e=this.model.toJSON(),t=c.find(e.locations,function(e){var t=e.attributes.countrycode||e.attributes.key;return t&&("tw"===t.toLowerCase()||"taiwan"===t.toLowerCase())}),i=c.indexOf(e.locations,c.find(e.locations,function(e){var t=e.attributes.countrycode||e.attributes.key;return t&&("cn"===t.toLowerCase()||"china"===t.toLowerCase())}));if(t&&i>-1){var l=c.indexOf(e.locations,t);e.locations=n(e.locations,l,i+1)}return e},onRender:function(){if(this.trigger("read:cookies"),this.options.columnFlow){var e=200,t=400,i=s.getViewpointWidth(),n=Math.min(Math.ceil(this.$el.height()/t),Math.floor((i-150)/e));if(this.$el.width(n*e),this.$(".contents").columnize({width:e}),this.options.filter){var c=this.options.filter.position().left;c+this.$el.width()<i&&this.$el.css("left",c)}}else new a({container:this.$el.find(".contents").get(0),colCount:8,colWidth:12})}})},{"../util":2122,"./model.js":2072,"./template-column.hbs":2073,"./template.hbs":2074,"./waterfall-list.js":2076,"backbone.marionette":6,underscore:42}],2076:[function(e,t,i){t.exports=e("../../offers-2.0/02-toolbar/01-drop-down-menu/02-nation/waterfall")},{"../../offers-2.0/02-toolbar/01-drop-down-menu/02-nation/waterfall":1502}],2074:[function(e,t,i){t.exports='<div class="content-title">{{local "general.Countries_and_Regions"}}</div>\r\n{{#if countryClickable}}\r\n    <div class="content">\r\n        <div class="contents">\r\n            {{#each locations}}\r\n                {{#hasChildren this}}\r\n                    <div class="row destination-row">\r\n                        <h4 class="country destination-item" data-locationkey ="{{attributes.key}}" data-name="{{attributes.name}}"\r\n                            data-destinationid="{{#if attributes.originalId}}{{attributes.originalId}}{{else}}{{attributes.id}}{{/if}}">{{attributes.name}}</h4>\r\n                        <ul>\r\n                            {{#eachCity this}}\r\n\r\n                                <li><a href="#" class="item destination-item" data-locationkey ="{{attributes.key}}" data-name="{{attributes.name}}"\r\n                                       data-destinationid="{{attributes.id}}" data-countrycode="{{ attributes.countrycode }} ">{{{attributes.name}}}</a>\r\n                                </li>\r\n                            {{/eachCity}}\r\n                        </ul>\r\n                    </div>\r\n                {{/hasChildren}}\r\n            {{/each}}\r\n        </div>\r\n    </div>\r\n<!--// Default, for tours-->\r\n{{else}}\r\n    <div class="content">\r\n        <div class="contents">\r\n            {{#each locations}}\r\n                {{#hasChildren this}}\r\n                    <div class="row destination-row">\r\n                        {{#if attributes.allowNoChildren}}\r\n                            <h4 class="country destination-item" data-url="{{attributes.url}}" data-locationkey ="{{attributes.key}}" data-name="{{attributes.name}}"\r\n                                data-destinationid="{{attributes.destinationid}}">{{attributes.name}}</h4>\r\n                        {{else}}\r\n                            <h4 class="country">{{attributes.name}}</h4>\r\n                        {{/if}}\r\n                        <ul>\r\n                            {{#eachCity this}}\r\n                                <li><a href="{{attributes.url}}" class="item destination-item" data-name="{{attributes.name}}"\r\n                                       data-destinationid="{{attributes.destinationid}}" data-countrycode="{{ attributes.countrycode }}">{{{attributes.name}}}</a>\r\n                                </li>\r\n                            {{/eachCity}}\r\n                        </ul>\r\n                    </div>\r\n                {{/hasChildren}}\r\n            {{/each}}\r\n        </div>\r\n    </div>\r\n{{/if}}';
},{}],2073:[function(e,t,i){t.exports='<div class="content-title">{{local "general.Countries_and_Regions"}}</div>\r\n{{#if countryClickable}}\r\n    <div class="content">\r\n        <div class="contents">\r\n            {{#each locations}}\r\n                {{#hasChildren this}}\r\n                    <div class="column-item">\r\n                        <h4 class="country destination-item" data-locationkey ="{{attributes.key}}" data-name="{{attributes.name}}"\r\n                            data-destinationid="{{#if attributes.originalId}}{{attributes.originalId}}{{else}}{{attributes.id}}{{/if}}">{{attributes.name}}</h4>\r\n                        <ul>\r\n                            {{#eachCity this}}\r\n\r\n                                <li><a href="#" class="item destination-item" data-locationkey ="{{attributes.key}}" data-name="{{attributes.name}}"\r\n                                       data-destinationid="{{attributes.id}}" data-countrycode="{{ attributes.countrycode }} ">{{{attributes.name}}}</a>\r\n                                </li>\r\n                            {{/eachCity}}\r\n                        </ul>\r\n                    </div>\r\n                {{/hasChildren}}\r\n            {{/each}}\r\n        </div>\r\n    </div>\r\n<!--// Default, for tours-->\r\n{{else}}\r\n    <div class="content">\r\n        <div class="contents">\r\n            {{#each locations}}\r\n                {{#hasChildren this}}\r\n                    <div class="row destination-row">\r\n                        {{#if attributes.allowNoChildren}}\r\n                            <h4 class="country destination-item" data-url="{{attributes.url}}" data-locationkey ="{{attributes.key}}" data-name="{{attributes.name}}"\r\n                                data-destinationid="{{attributes.destinationid}}">{{attributes.name}}</h4>\r\n                        {{else}}\r\n                            <h4 class="country">{{attributes.name}}</h4>\r\n                        {{/if}}\r\n                        <ul>\r\n                            {{#eachCity this}}\r\n                                <li><a href="{{attributes.url}}" class="item destination-item" data-name="{{attributes.name}}"\r\n                                       data-destinationid="{{attributes.destinationid}}" data-countrycode="{{ attributes.countrycode }}">{{{attributes.name}}}</a>\r\n                                </li>\r\n                            {{/eachCity}}\r\n                        </ul>\r\n                    </div>\r\n                {{/hasChildren}}\r\n            {{/each}}\r\n        </div>\r\n    </div>\r\n{{/if}}'},{}],2072:[function(e,t,i){var n=e("underscore"),c=e("backbone");t.exports=c.Model.extend({defaults:{showButton:!0},setValue:function(e,t){this.set({_locations:e,locations:this.getTopLevel(e),destinations:t})},parse:function(e){return{_items:e}},getTopLevel:function(e){var t=e.filter(function(e){return"country"==e.get("level")});return n.sortBy(t,function(e){return e.get("name")})},initialize:function(){var e=this;this.isForHotels?e.on("change:_items change:destinations",function(){e.get("_items")&&e.get("destinations")&&e.top10()}):e.on("change:_items change:_locations",function(){e.get("_items")&&e.get("_locations")&&e.top10()})},top10:function(){for(var e=this.get("_items"),t=this.isForHotels?this.get("destinations"):this.get("_locations"),i=[],n=0,c=e.length;c>n;n++){var l=t.get(e[n]);l&&i.push(l)}this.set("items",i)}})},{backbone:8,underscore:42}],873:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../model/model"),a=e("../../ui/carousel-with-text/view"),o=e("../../ui/util"),s=e("../assets/template.hbs");e("swiper");Helper=e("../../handlebar/helper"),DragPlugin=e("../../ui/panoimage/jquery.drag"),Slick=e("../../ui/slick/slick"),SwiperNext=e("./view-swiper-next"),t.exports=GalleryView=c.LayoutView.extend({events:{"click .desktop li":"setCurrentCategory","click video":"playVideo","change .mobile select":"setCurrentCategory","click .dim-block-left":"doSwitchPrev","click .dim-block-right":"doSwitchNext","click .backTosmall":"backTosmall"},template:Handlebars.compile(s),ui:{nav:".gallery-nav",carousel:'[data-component="carousel-with-nav"]',carouselSwitch:".tpl-gallery-controller-container",mobileTextIntro:".mobile-text-intro",slider_next:".opacity0",slideContainer:".swiper-container"},initialize:function(){var e=this;window.hotelcode||(window.hotelcode=o.queryparam("hotelcode")),e.model=new l({hotelcode:window.hotelcode}),e.model.set({index:0},{silent:!0}),e.model.set("mobile",o.ismobile()),this.listenTo(this.model,"change:switchInfo",function(t,i){setTimeout(function(){e.$(e.ui.mobileTextIntro).html(i.title)},10)}),e.model.fetch().then(function(){function t(){c.offset().top<=l.scrollTop()+l.height()&&!e.lazyLoaded&&(e.lazyLoaded=!0,e.render())}var i=e.model.get("categories"),c=jQuery(".tpl-hero-gallery-caption-withnav"),l=jQuery(window);if(0!=i.length){var a=o.queryParamFromHash("galleryCategory"),s=n.any(i,function(e){return e.categoryKey==a});if(s){var r=n.findWhere(i,{categoryKey:a});e.model.set("currentCategory",r)}else e.model.set("currentCategory",e.model.get("categories")[0]);a&&l.scrollTop(c.offset().top-(o.ismobile()?40:107)),l.on("scroll",n.throttle(t,500)),t()}},function(e){})},shiftExpand:function(e){return!1},setCurrentCategory:function(e){var t,i,n=jQuery(e.target);if(n.parents("li").addClass("checked").siblings().removeClass("checked"),"change"==e.type)t=n.find(":selected").data("value");else{t=n&&n.data("value");var c=n.data("index");this.$(".mobile select option[data-index="+c+"]").attr("selected","selected")}window.location.hash="galleryCategory="+t,i="change"==e.type?n.find(":selected").data("index"):n.data("index");var l=this.model.get("currentCategory");if(l.index!=i){var a=this.model.get("categories")[i];this.model.set({currentCategory:a}),e.stopPropagation(),this.stopListenIMGload();var o=new SwiperNext({model:this.model});this.listenToOnce(o,"first-image-load-success",this.doCrossFade),this.$(".opacity0").html(o.render().el)}},doCrossFade:function(){var e=this;this.currentSlide=null,this.setSize(),this.currentSlide=this.$(".opacity0 .slick-container").slick({speed:800,infinite:!0,variableWidth:!0,centerMode:!0,draggable:!1,arrows:!1,swipe:!0,cssEase:"cubic-bezier(0,.96,.54,1.01)",rtl:"rtl"==jQuery("html").attr("dir")}),o.ismobile()&&this.currentSlide.on("swipe",function(t,i,n){"right"==n?e.doSwitchPrev():e.doSwitchNext()}),this.slicked=!0,this.$(".opacity0").removeClass("opacity0").addClass("opacity1").siblings(".swiper-wrapper").removeClass("opacity1").addClass("opacity0"),this.checkCurrentSlide()},onRender:function(){var e=this;this.setSize();jQuery(window).resize(function(){var t=o.isFullScreen();t||e.setSize()}),this.initialSlick(),this.carouselSwitch=new a({el:this.ui.carouselSwitch,model:this.model}),this.listenFullScreenChange(),this.$(".dragItem").drag(),this.stopListening(this.carouselSwitch,"beginSwitch"),this.listenTo(this.carouselSwitch,"beginSwitch",this.doSwitch)},backTosmall:function(){this.$el.toggleClass("expand"),this.setSize();var e=this.currentSlide.slick("slickCurrentSlide");this.initialSlick(e)},initialSlick:function(e){var t=this;this.slicked?(this.currentIndex=this.currentSlide.slick("slickCurrentSlide"),this.currentSlide.slick("unslick"),this.slicked=!1):(this.slicked=!1,this.currentIndex=0),this.$(".swiper-wrapper").off(),this.$(".swiper-wrapper").on("beforeChange reInit",function(e,i,n,c){t.setDimBlock(c)}),this.$(".swiper-wrapper").on("init",function(i,n){t.slicked||setTimeout(jQuery.proxy(t.setDimBlock,t,"undefined"==typeof e?0:e),150)}),this.$(".swiper-wrapper").on("lazyLoaded",function(e,t,i,n){jQuery(i).parent().css("background-image","url('"+n+"')")}),this.$(".swiper-wrapper").on("lazyLoadError",function(e,t,i,n){}),this.currentSlide=this.$(".swiper-wrapper.opacity1 .slick-container").slick({speed:800,infinite:!0,variableWidth:!0,centerMode:!0,draggable:!1,arrows:!1,swipe:!0,initialSlide:e,cssEase:"cubic-bezier(0,.96,.54,1.01)",rtl:"rtl"==jQuery("html").attr("dir"),lazyLoad:"ondemand"}),o.ismobile()&&this.currentSlide.on("swipe",function(e,i,n){"right"==n?t.doSwitchPrev():t.doSwitchNext()}),this.slicked=!0,"undefined"!=typeof e&&this.currentSlide.slick("slickGoTo",e,!0),this.checkCurrentSlide()},listenIMGload:function(){var e=this;this.$(".swiper-wrapper.opacity1 .unvisibleIMG img").each(function(t,i){jQuery(this).off(),jQuery(this).on("load",function(){e.checkCurrentSlide.t&&clearTimeout(e.checkCurrentSlide.t),e.checkCurrentSlide.t=setTimeout(jQuery.proxy(e.checkCurrentSlide,e),100)})})},stopListenIMGload:function(){this.$(".swiper-wrapper.opacity1 .unvisibleIMG img").each(function(e,t){jQuery(this).off()})},checkCurrentSlide:function(){var e=jQuery("body").width(),t=this.$(".opacity1 .slick-current"),i=this.$(".hotel-gallery-swiper"),n=i.width(),c=t.width(),l=t.offset().left-(e>=768?100:0),a=l-Math.ceil((n-c)/2);Math.abs(a)<10&&this.setDimBlock(this.currentSlide.slick("slickCurrentSlide"))},playVideo:function(e){this.$(e.target).removeClass("opacity-zero");var t=this.$(e.target)[0];t.play(),o.launchFullscreen(t),this.monitorPlayEnd(t)},listenFullScreenChange:function(){var e=this;if(o.fullscreenSupport()){var t=o.fullscreenChangeType();t&&document.addEventListener(t,function(){var t=o.isFullScreen();if(!t){var i=e.$("video");i.addClass("opacity-zero"),i.each(function(e,t){t.pause()}),e.initialSlick(this.currentSlide.slick("slickCurrentSlide"))}})}},monitorPlayEnd:function(e){var t=jQuery(e);t.on("ended",function(){o.exitFullScreen(),t.addClass("opacity-zero")})},doSwitchPrev:function(){this.doSwitch("prev")},doSwitchNext:function(){this.doSwitch("next")},doSwitch:function(e){"prev"==e&&this.currentSlide.slick("slickPrev"),"next"==e&&this.currentSlide.slick("slickNext");var t=this.$(".opacity1 .slick-current").data("index");this.setSubText(t)},setSubText:function(e){var t=this.model.toJSON().currentAllMedia,i=t.length;this.model.set({switchInfo:{title:t[e-1].title,totalLength:i,currentIndex:t[e-1].index}})},setSize:function(){var e=this.$(".hotel-gallery-swiper"),t=e.width(),i=e.find(".slide-item"),n=jQuery("body").width(),c=this.$el.hasClass("expand"),l=this.$(".slide-content").height(),a=768>=n?n:c?.7*t:.333*t,o=Math.round(a);i.css("width",o),768>=n||!c?this.$(".imageItem img").each(function(){jQuery(this).parent().css({"background-image":"url("+this.src+")","background-size":"cover","background-repeat":"no-repeat","background-position":"center center"}),jQuery(this).hide()}):this.$(".imageItem img").each(function(e,t){var i=jQuery(this),n=i.data("width")/i.data("height"),c=n*l;i.css("width",c),i.parent().css({background:"none",width:c}),jQuery(this).show()}),this.currentSlide&&this.setDimBlock(this.currentSlide.slick("slickCurrentSlide"))},setDimBlock:function(e){var t=this.$(".hotel-gallery-swiper"),i=t.width(),n=this.$(".opacity1  div[data-slick-index="+e+"]");if(n.length>0){var c=n.width(),l=Math.ceil((i-c)/2),a=this.$(".dim-block");a.css("width",l)}},serializeData:function(e){var t=this.model.toJSON(),i=t.currentCategory,n=t.allResource=(i.video?i.video:[]).concat(i.image360?i.image360:[]).concat(i.images?i.images:[]);this.model.set({currentAllMedia:n},{silent:!0});var c={title:n[0].title,totalLength:n.length,currentIndex:1};return this.model.set("switchInfo",c),t.currentAllMedia=n,t}})},{"../../handlebar/helper":1025,"../../ui/carousel-with-text/view":2055,"../../ui/panoimage/jquery.drag":2105,"../../ui/slick/slick":2118,"../../ui/util":2122,"../assets/template.hbs":870,"../model/model":871,"./view-swiper-next":872,"backbone.marionette":6,swiper:40,underscore:42}],872:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=(e("../model/model"),e("../../ui/carousel-with-text/view"),e("../../ui/util"),e("../assets/template-next.hbs"));e("swiper"),e("../../handlebar/helper"),e("../../ui/panoimage/jquery.drag"),e("../../ui/slick/slick");t.exports=GalleryView=n.ItemView.extend({className:"slick-container",template:Handlebars.compile(c),onRender:function(){this.$(".dragItem").drag(),setTimeout(jQuery.proxy(this.waitForLoad,this),80)},waitForLoad:function(){var e=this;return void e.trigger("first-image-load-success")},promiseLoading:function(){var e=this,t=jQuery.Deferred(),i=this.$(".unvisibleIMG img"),n=i.eq(0);return n.on("load",function(){e.trigger("first-image-load-success"),t.resolve()}),t.promise()},serializeData:function(){var e=this.model.toJSON(),t=e.currentCategory,i=e.allResource=(t.video?t.video:[]).concat(t.image360?t.image360:[]).concat(t.images?t.images:[]);this.model.set({currentAllMedia:i},{silent:!0});var n={title:i[0].title,totalLength:i.length,currentIndex:1};return this.model.set("switchInfo",n),e.currentAllMedia=i,e}})},{"../../handlebar/helper":1025,"../../ui/carousel-with-text/view":2055,"../../ui/panoimage/jquery.drag":2105,"../../ui/slick/slick":2118,"../../ui/util":2122,"../assets/template-next.hbs":869,"../model/model":871,"backbone.marionette":6,swiper:40,underscore:42}],871:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../../config/host.js");GalleryModel=t.exports=c.Model.extend({initialize:function(e){this.url=l.getURL("api","data/vscapeimage?propertyid="+e.hotelcode)},parse:function(e){var t={};if(t.categories=e?e.arc:[],e&&e.arc){var i=-1;n.each(e.arc,function(e){e.index=++i;var t=0;e.categoryUpper=i18n.t(e.categoryKey).toUpperCase(),n.each(e.video,function(e,i){e.index=++t,e.type="video"}),n.each(e.image360,function(e,i){e.index=++t,e.type="image360"}),n.each(e.images,function(e,i){e.index=++t,e.type="image"})})}return t},testIE9:function(){var e=jQuery.Deferred(),t={disableVscape:!1,arc:[{categoryName:"HOTEL",categoryKey:"Property.Hotel",video:[{title:"Gallery Video 1",url:"http://www.mullenloweprofero.com/media/404259/wu syh long.mp4",placeholder:"http://10.148.60.55/mhb-media/images/13596 millennium hotel chengdu/hero/chengdu-millennium-740.jpg"},{title:"	Gallery Video 3",url:"http://www.mullenloweprofero.com/media/428352/video .mp4",placeholder:"http://10.148.60.55/mhb-media/images/13596 millennium hotel chengdu/hero/chengdu-millennium-740.jpg"}],image360:[{title:"Gallery Panorama Image 1",url:"http://10.148.60.55/mhb-media/images/module/360 image/demo_image2.jpg",placeholder:"http://10.148.60.55/mhb-media/images/module/360 image/demo_image2.jpg"}],images:[{title:"Lobby",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/977/__1_S.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/977/__1_S.jpg"},{title:"Lobby",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/985/__2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/985/__2_S.jpg"},{title:"Exterior",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/209/_________P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/209/_________S.jpg"},{title:"Exterior",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/441/____________P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/441/____________S.jpg"},{title:"Exterior",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/449/______1_S.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/449/______1_S.jpg"},{title:"Exterior",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/457/_______S.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/457/_______S.jpg"},{title:"Mahjong room",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/465/____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/465/____S.jpg"},{title:"Exterior",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/473/____2_S.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/473/____2_S.jpg"},{title:"Atrium",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/709/___S.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/709/___S.jpg"}]},{categoryName:"GUEST ROOMS",categoryKey:"Property.Guest_Rooms",video:[{title:"Gallery Video 2",url:"http://www.mullenloweprofero.com/media/428352/video .mp4",placeholder:"http://10.148.60.55/mhb-media/images/13596 millennium hotel chengdu/hero/chengdu-millennium-hero.jpg"}],image360:[],images:[{title:"Millennium Knightsbridge Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/9/____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/9/____S.jpg"},{title:"Millennium Knightsbridge Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/17/______P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/17/______S.jpg"},{title:"Millennium Knightsbridge Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/25/______P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/25/______S.jpg"},{title:"Superior King",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/33/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/33/_____S.jpg"},{title:"Superior Twin",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/41/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/41/_____S.jpg"},{title:"Gloucester King",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/49/________P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/49/________S.jpg"},{title:"Gloucester Twin",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/57/_________P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/57/_________S.jpg"},{title:"Club Deluxe King",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/65/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/65/_____S.jpg"},{title:"Club Deluxe Twin",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/121/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/121/_____S.jpg"},{title:"Executive Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/129/_______P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/129/_______S.jpg"},{title:"Executive Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/137/_______P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/137/_______S.jpg"},{title:"Standard King",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/145/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/145/_____S.jpg"},{title:"Standard Twin",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/153/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/153/_____S.jpg"},{title:"M-Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/193/____1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/193/____1_S.jpg"},{title:"M-Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/201/____2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/201/____2_S.jpg"},{title:"Millennium Kinghtsbridge Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/481/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/481/_____S.jpg"},{title:"Millennium Kinghtsbridge Suite",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/489/_______P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/489/_______S.jpg"}]},{categoryName:"DINING",categoryKey:"Property.Dining",video:[],image360:[],images:[{title:"YiPin Chinese Restaurant",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/933/__1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/933/__1_S.jpg"},{title:"YiPin Chinese Restaurant",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/949/__2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/949/__2_S.jpg"},{title:"YiPin Chinese Restaurant",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/969/__3_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/969/__3_S.jpg"},{title:"SH1930 Bar",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/993/___1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/993/___1_S.jpg"},{title:"SH1930 Bar",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/1/___2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/1/___2_S.jpg"},{title:"Executive Lounge",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/73/____1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/73/____1_S.jpg"},{title:"Executive Lounge",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/81/_________P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/81/_________S.jpg"},{title:"Executive Lounge",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/113/____2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/113/____2_S.jpg"},{title:"Amber Cafe",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/177/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/177/_____S.jpg"},{title:"Amber Cafe",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/585/____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/585/____S.jpg"},{title:"YiPin Chinese Restaurant",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/693/___1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/693/___1_S.jpg"},{title:"YiPin Chinese Restaurant",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/701/___2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/701/___2_S.jpg"}]},{categoryName:"EVENTS",categoryKey:"Property.Events",video:[],image360:[{title:"Gallery Panorama Image 2",url:"http://10.148.60.55/mhb-media/images/module/360 image/demo_photo4.jpg",placeholder:"http://10.148.60.55/mhb-media/images/module/360 image/demo_photo4.jpg"}],images:[{title:"Meeting Room",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/925/1_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/925/1_____S.jpg"},{title:"Ballroom",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/941/9_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/714/941/9_____S.jpg"},{title:"Meeting",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/161/____1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/161/____1_S.jpg"},{title:"Meeting",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/169/____2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/169/____2_S.jpg"},{title:"Banquet Room",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/605/____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/605/____S.jpg"}]},{categoryName:"LEISURE",categoryKey:"Property.Leisure",video:[],image360:[],images:[{title:"Oxygen Club",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/185/____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/185/____S.jpg"},{title:"Swimming Pool",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/625/__1_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/625/__1_S.jpg"},{title:"Swimming Pool",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/667/__2_P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/667/__2_S.jpg"},{title:"Swimming Pool",mobileUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/685/_____P.jpg",desktopUrl:"http://www.cfmedia.vfmleonardo.com/imageRepo/4/0/61/715/685/_____S.jpg"}]}]},i=this.parse(t);return this.set(i),setTimeout(e.resolve,100),e.promise()}})},{"../../../../config/host.js":45,backbone:8,underscore:42}],870:[function(e,t,i){t.exports='<div id="withnav" class="tpl-hero-gallery-caption-withnav">\r\n    <div data-component="carousel-with-nav" data-hasrlbutton="data-hasrlbutton"\r\n         data-hasindexbutton="data-hasindexbutton" class="tpl-hero-gallery-caption" style="height:auto">\r\n        <div class="gallery-nav">\r\n            <div class="tpl-hotel-configuration-title desktop">\r\n                <div class="title-table">\r\n                    <h1>gallery</h1><a data-property="undefined" class="photo gallary-popup-link"><span class="icon icon-icon_A013"></span><span class="text">{{currentAllMedia.length}} PHOTOS</span></a>\r\n                </div>\r\n            </div>\r\n            <!--<ul class="desktop">-->\r\n                <!--<h6 class="title">{{local \'Property.image_gallery\'}}</h6>-->\r\n                <!--{{#each categories}}-->\r\n                    <!--<li data-value="{{categoryKey}}" {{#equal index ../currentCategory.index}} class="checked"{{/equal}}data-index="{{index}}">-->\r\n                        <!--<a data-index="{{index}}" data-value="{{categoryKey}}">-->\r\n                            <!--{{local categoryKey}}-->\r\n                        <!--</a>-->\r\n                    <!--</li>-->\r\n                <!--{{/each}}-->\r\n            <!--</ul>-->\r\n            <div class="backTosmall">\r\n                <span class="icon-icon_B026 "></span>\r\n                {{local \'general.back\'}}\r\n            </div>\r\n\r\n\r\n            <div class="mobile">\r\n                <h6 class="title">{{local \'Property.image_gallery\'}}</h6>\r\n               <select class="select">\r\n                   {{#each categories}}\r\n                       <option data-index={{index}} data-value="{{categoryKey}}" {{#equal index ../currentCategory.index}} selected class="active"{{/equal}}>{{categoryUpper}}</option>\r\n                   {{/each}}\r\n               </select>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="slide-content">\r\n            <div class="swiper-container hotel-gallery-swiper">\r\n                <!--current-show-->\r\n                <div class="swiper-wrapper opacity1 defaultSwiper">\r\n                    <div class="slick-container">\r\n                    {{#each currentAllMedia}}\r\n\r\n                        <div class="swiper-slide gallary-popup-link" data-index="{{index}}">\r\n                            {{#equal type "video"}}\r\n                                <div class="videoSlide slide-item">\r\n                                    <div class="play"></div>\r\n                                    <video src="{{encode url}}" class="opacity-zero" controls="controls"\r\n                                           width="100%" height="100%">\r\n                                    </video>\r\n                                    <div class="video-placeholder" style="background-image: url(\'{{encode placeholder}}\')"></div>\r\n                                </div>\r\n\r\n                            {{/equal}}\r\n\r\n                            {{#equal type "image360"}}\r\n                                <div class="panoimage slide-item">\r\n                                    {{#if resourseurl}}\r\n                                        <iframe src="{{encode resourseurl}}" scrolling="auto" style=" width: 100%;height: 100%;"></iframe>\r\n                                    {{else}}\r\n                                        <div class="dragItem" style="background-image: url(\'{{encode url}}\')"></div>\r\n                                    {{/if}}\r\n                                    <span class="panoimageICON icon"></span>\r\n\r\n                                </div>\r\n\r\n\r\n                            {{/equal}}\r\n\r\n                            {{#equal type "image"}}\r\n                                <div class="imageItem slide-item">\r\n                                    <img  data-width={{width}} data-height={{height}}\r\n                                          data-lazy=\'{{#if ../../mobile}}{{encode mobileUrl}}{{else}}{{encode desktopUrl}}{{/if}}\'\r\n\r\n                                          alt="">\r\n                                </div>\r\n\r\n\r\n                            {{/equal}}\r\n\r\n                            <div class="dim-block-inner"></div>\r\n\r\n                        </div>\r\n\r\n                    {{/each}}\r\n\r\n\r\n\r\n                    </div>\r\n                </div>\r\n                <div class="swiper-wrapper opacity0"></div>\r\n                <div class="dim-block-left dim-block"></div>\r\n                <div class="dim-block-right dim-block"></div>\r\n\r\n            </div>\r\n\r\n\r\n        </div>\r\n        <div class="tpl-gallery-controller-container">\r\n\r\n        </div>\r\n\r\n\r\n    </div>\r\n    <div class="mobile-text-intro">\r\n\r\n    </div>\r\n</div>'},{}],869:[function(e,t,i){t.exports='\r\n                    {{#each currentAllMedia}}\r\n\r\n                        <div class="swiper-slide" data-index="{{index}}">\r\n                            {{#equal type "video"}}\r\n                                <div class="videoSlide slide-item"">\r\n                                    <div class="play"></div>\r\n                                    <video src="{{encode url}}" class="opacity-zero" controls="controls"\r\n                                           width="100%" height="100%">\r\n                                    </video>\r\n                                    <div class="video-placeholder" style="background-image: url(\'{{encode placeholder}}\')"></div>\r\n                                </div>\r\n\r\n\r\n                            {{/equal}}\r\n\r\n                            {{#equal type "image360"}}\r\n                                <div class="panoimage slide-item">\r\n                                    {{#if resourseurl}}\r\n                                        <iframe src="{{encode resourseurl}}" scrolling="auto" style=" width: 100%;height: 100%;"></iframe>\r\n                                    {{else}}\r\n                                        <div class="dragItem" style="background-image: url(\'{{encode url}}\')"></div>\r\n                                    {{/if}}\r\n                                    <span class="panoimageICON icon"></span>\r\n\r\n                                </div>\r\n\r\n                            {{/equal}}\r\n\r\n                            {{#equal type "image"}}\r\n\r\n                                <div class="imageItem slide-item">\r\n                                    <img data-width={{width}} data-height={{height}}\r\n                                         data-lazy=\'{{#if ../../mobile}}{{encode mobileUrl}}{{else}}{{encode desktopUrl}}{{/if}}\'\r\n                                         alt="">\r\n                                </div>\r\n\r\n                            {{/equal}}\r\n\r\n                            <div class="dim-block-inner"></div>\r\n                        </div>\r\n\r\n                    {{/each}}\r\n\r\n\r\n'},{}],825:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("./template.hbs"),o=e("../abmb/stateful.js"),s=e("./lengs-panel/view"),r=e("./location-intro/view"),g=e("./carousel/view"),d=e("./map/view"),I=e("./maps/view"),b=e("./info-window/view"),C=e("../maps/views/info/view-active");LengsAttrInfoView=e("../maps/views/info/view-scenic"),Direction=e("../maps/api/direction"),FilterView=e("./filter/view"),Util=e("../ui/util"),DAO=e("./models/DAO");var u=e("./models/destination-model");t.exports=l.ItemView.extend(n.extend({},o,{className:"maps",template:Handlebars.compile(a),
isCarouselEnabled:function(){return this.$el.attr("data-collectionid")||this.$el.attr("data-locationid")},isWorldPage:function(){return!(this.$el.attr("data-collectionid")||this.$el.attr("data-locationid")||this.$el.attr("data-destinationid"))},onZoomClick:function(e){this.mapview.adjustZoom(jQuery(e.target).closest("a").hasClass("zoomIn")?1:-1)},ui:{wrapper:"#map-wrapper",Map:"#map",DestinationsFilter:"#DestinationsFilter",DestinationInformation:"#DestinationInformation",Carousel:"#destinations-carousel",LengsPanel:".js-lengs-map-panel",locationintro:"#LocationIntro",DestinationList:"#DestinationList",mapControlButtons:"#MapControlButtons",toggleListView:".js-toggle--list-view",toggleMapView:".js-toggle--map-view"},events:{"click #MapControlButtons a.zoom":"onZoomClick","click #MapControlButtons a.close":"renderSubviews","click @ui.toggleListView":"toggleListView","click @ui.toggleMapView":"toggleMapView"},__openInfoWindow:function(e,t){var i=this;if("Hotels"==e.model.get("type"))i.mapsview.openWindow({model:e.model,position:e.position,content:new C({model:e.model})});else{var n=e.model.set("__OTHER",!0),c=new LengsAttrInfoView({model:n});i.mapsview.openWindow({model:n,position:e.position,content:c});var l=i.__direction(e.model,i.OS,"WALKING"),a=i.__direction(e.model,i.OS,"DRIVING");jQuery.when(l,a).then(function(t,n){c.information({walking:i.navigation(t,"Walking",e.model,i.OS),driving:i.navigation(n,"Driving",e.model,i.OS)})})}this.mapsview.setActive(e.model),t||this.lengspanelview.addHover(e.model)},navigation:function(e,t,i,n){var l=e.routes[0].legs[0];return new c.Model({steps:this.__steps(l.steps),distance:this.__distance(l.distance),duration:this.__duration(l.duration),start_address:l.start_address,reach_address:l.end_address,travel:t,origin:i,target:n,status:e})},__shutInfoWindow:function(e,t){this.mapsview.shutWindow(),this.mapsview.setActive({}),t||this.lengspanelview.removeHover(e.model)},__direction:function(e,t,i){return Direction.route({origin:e,target:t,travel:i})},__steps:function(e){return e.map(function(e){return{distance:this.__distance(e.distance),duration:this.__duration(e.duration),maneuver:this.__maneuver(e.maneuver),instructions:e.instructions}},this)},__maneuver:function(e){return"string"==typeof e?e?"icon-"+e:"":void 0},__distance:function(e){var t=e.value;return t=t>=1e3?(t/1e3).toFixed(1).replace(/0+$/,"").replace(/\.+$/,"")+" "+i18n.t("maps.direction_km"):t+" "+i18n.t("maps.direction_m"),{value:t,text:e.text}},__duration:function(e){var t=e.value;return t=t>=3600?Math.round(t/3600)+" "+i18n.t("maps.direction_hour"):t>=60?Math.round(t/60)+" "+i18n.t("maps.direction_mins"):t+" "+i18n.t("maps.direction_secs"),{value:t,text:e.text}},toggleListView:function(e){e.preventDefault(),this.$el.addClass("is-list-view"),this.ui.toggleListView.addClass("is-active"),this.ui.toggleMapView.removeClass("is-active")},toggleMapView:function(e){e.preventDefault(),this.$el.removeClass("is-list-view"),this.ui.toggleListView.removeClass("is-active"),this.ui.toggleMapView.addClass("is-active")},initialize:function(e){var t=this;t.model=new c.Model({lengs:!1}),t.lengs=e.lengs;var i=t.$el.attr("data-lengs");1!=t.lengs&&"true"!=i||(t.$el.addClass("c-lengs-map"),this.model.set({lengs:!0}))},onRender:function(e){var t=this,i=t.$el.attr("data-lengs");Util.loading({container:this.el,promise:DAO.promise}),t.$el.addClass(t.className),t.filterview=new FilterView({el:t.ui.DestinationsFilter}),t.infoview=new b({el:t.ui.DestinationInformation,lengs:!!i}),i?(t.mapsview=new I({model:new c.Model}),t.mapsview.on("item:mouseenter",function(e,i){t.__openInfoWindow(e,i)}),t.mapsview.on("item:mouseleave",function(e,i){t.__shutInfoWindow(e,i)}),t.lengspanelview=new s({mapsview:t.mapsview,el:t.ui.LengsPanel,model:new c.Model}),t.mapsview.render().$el.appendTo(t.ui.Map)):(t.mapview=new d({el:t.ui.Map,draggable:!Util.ismobileOS()||t.isWorldPage(),lengs:!1,$right:t.filterview.$el,$left:t.infoview.$el}).render(),t.mapview.model.on("change:zoom",function(){t.$el.attr("data-map-zoom",t.mapview.model.get("zoom")<=2?"2-":"3+")}),t.mapview.on("location:click",function(e){t.filterview.model.set({location:e})}),t.infoview.on("attraction:selected",function(e){t.filterview.model.set({attraction:e})}),t.mapview.on("attraction:click",function(e){t.filterview.model.set({attraction:e}),t.infoview.selectAttraction(e)}),t.mapview.on("attraction:hover",function(e){t.mapview.model.set({hovered:e})}),t.mapview.on("destination:click",function(e){t.filterview.model.set({destination:e}),t.infoview.model.get("model")!=e?t.infoview.model.set({model:e}):t.infoview.model.trigger("change:model")}),t.filterview.model.on("change",function(e){t.mapview.model.set({location:e.get("location"),attraction:e.get("attraction"),destination:e.get("destination"),destinations:e.get("results").destinations,locations:e.get("results").locationgroups})}),t.mapview.model.on("change:attractions",function(){t.filterview.setNearby(t.mapview.model.get("attractions"))})),t.locationintro=new r({el:t.ui.locationintro}),t.carousel=new g({el:t.ui.Carousel}),t.carousel.model.on("change:location",function(e,i){t.$el[i&&i.destinations.length?"addClass":"removeClass"]("need-promote-carousel")}),t.locationintro.on("expand",function(e){t.filterview.model.set({location:e}),t.ui.mapControlButtons.find(".wgt-exit-button").show()}),t.carousel.on("click:destination",function(e){t.filterview.model.set({destination:e}),t.infoview.model.set({model:e})}),t.infoview.on("close",function(){t.filterview.model.get("destination")&&t.filterview.model.back()}),t.locationintro.model.on("change:location",function(e,i){t.$el[i?"addClass":"removeClass"]("show-location-intro")}),t.filterview.model.on("change:destination",function(e){t.infoview.model.set({model:e.get("destination")}),i&&(t.OS=e.get("destination"),t.lengspanelview.model.set({model:e.get("destination")}),t.mapsview.model.set({model:e.get("destination")}))}),t.filterview.model.on("change:location",function(e,i){t.isCarouselEnabled()&&t.carousel.model.set({location:i})}),t.filterview.model.on("change:destination",function(e,i){i&&t.locationintro.model.set({location:null})}),t.filterview.model.on("change:destination",function(e,i){t.$el.attr({"data-showing-property":!!i})}),t.filterview.on("show:destination-list",function(){Util.ismobile()&&!i&&t.filterview.model.set("show-map",!1)}),t.infoview.model.on("change:model",function(){var e=t.infoview.model.get("model");e&&e instanceof u&&t.filterview.model.set("destination",e)}),t.renderSubviews()},renderSubviews:function(){var e=this;e.$el.attr("data-lengs");e.ui.mapControlButtons.find(".wgt-exit-button").hide(),DAO.promise.then(function(){var t=DAO.locations.get(e.$el.attr("data-locationid")),i=DAO.destinations.get(e.$el.attr("data-destinationid")),c=DAO.categories,l=DAO.collections.get(e.$el.attr("data-collectionid"));t||e.$el.removeAttr("data-locationid"),i||e.$el.removeAttr("data-destinationid"),l||e.$el.removeAttr("data-collectionid"),e.filterview.model.reset(),t&&e.filterview.model.set({location:t}),l&&e.filterview.model.set({collections:[l]}),i&&c?(i.set("categories",c),e.carousel.$el.hide(),e.infoview.model.set("_isPropertyHotel",!0),e.filterview.$el.hide(),e.filterview.model.set({destination:i,categories:c}),Util.ismobile()&&e.infoview.model.set({model:null})):l?e.ui.wrapper.hide():t?(t&&0==t.children.length&&t.destinations.length>0&&e.filterview.$el.hide(),e.mapview.model.set({bounds:n.pluck(t.alldestinations,"attributes")}),t&&t.destinations.length&&(e.locationintro.model.set({location:t}),e.$el.addClass("has-location-intromessage"))):!Util.ismobile()})}}))},{"../abmb/stateful.js":72,"../maps/api/direction":1115,"../maps/views/info/view-active":1175,"../maps/views/info/view-scenic":1178,"../ui/util":2122,"./carousel/view":779,"./filter/view":782,"./info-window/view":785,"./lengs-panel/view":789,"./location-intro/view":797,"./map/view":805,"./maps/view":808,"./models/DAO":809,"./models/destination-model":817,"./template.hbs":824,backbone:8,"backbone.marionette":6,underscore:42}],1178:[function(e,t,i){var n=e("backbone.marionette"),c=e("../../../../component/ui/readmore/view"),l=e("../../helpers/requestAnimationProxy");t.exports=n.ItemView.extend({ui:{journey:"[data-direction-value='journey']",walking:"[data-direction-value='walking']",driving:"[data-direction-value='driving']",scrollBar:".content-longdesc",readmore:"[data-component='readmore']"},events:{"click .content-exit a":function(){this.trigger("info:close")}},template:function(t){return Handlebars.compile(e("../../assets/info/template-scenic.hbs"))(t)},className:function(){return"mh-maps-scenic"},initialize:function(){this._defer=jQuery.Deferred()},onRender:function(){var e=this;this._defer.resolve(),setTimeout(function(){e.ui.scrollBar.nanoScroller({alwaysVisible:!0}),c.getInstance(e.ui.readmore).collapseContent()})},onDestroy:function(){this.__destory=!0},information:function(e){return jQuery.when(e,this._defer).then(l(this.__information,this))},__information:function(e){this.__destory||(this.ui.journey.html(e.walking.get("distance").value),this.ui.walking.html(e.walking.get("duration").value),this.ui.driving.html(e.driving.get("duration").value))}})},{"../../../../component/ui/readmore/view":2110,"../../assets/info/template-scenic.hbs":1136,"../../helpers/requestAnimationProxy":1149,"backbone.marionette":6}],1136:[function(e,t,i){t.exports='<div class="mh-maps-horizontal">\r\n    <div class="mh-maps-popup-picture" style="background-image: url(\'{{thumbnailimage}}\')">\r\n        {{#if isevent}}\r\n            <div class="date">{{date-with-format st_date "DD MMM"}} - {{date-with-format end_date "DD MMM"}}</div>\r\n        {{/if}}\r\n    </div>\r\n    <div class="mh-maps-popup-content" style="color: {{__COLOR}}">\r\n        <div class="content-name">{{name}}</div>\r\n        <div class="content-desc">\r\n            <div class="content-longdesc nano">\r\n                <div class="nano-content">\r\n                    <div data-component="readmore" data-maxline="2" data-respondtoresize="false" data-removehandlerwhendestoryed="true">\r\n                        <span class="readmore__content hidebar">{{description}}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!--<span class="readmore__content">{{description}}</span>-->\r\n        </div>\r\n        <div class="content-drop">\r\n            <div class="link">\r\n                {{#if __OTHER}}\r\n                    <a  target="_blank" href="{{url}}?destinationid={{__OS_ID}}"><span>{{local "maps.see_details"}}</span></a>\r\n                {{/if}}\r\n            </div>\r\n            <ul class="list">\r\n                <li><span class="icon-icon_F0272"></span><label data-direction-value="journey"></label></li>\r\n                <li><span class="icon-icon_F035"></span><label data-direction-value="walking"></label></li>\r\n                <li><span class="icon-icon_F0232"></span><label data-direction-value="driving"></label></li>\r\n            </ul>\r\n        </div>\r\n        <div class="content-exit">\r\n            <a href="javascript:void(0);"><span class="icon-icon_B017"></span></a>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="mh-maps-delta"><div class="mh-maps-delta-mask"></div></div>'},{}],1175:[function(e,t,i){var n=e("backbone.marionette"),c=e("../../../../component/ui/readmore/view");t.exports=n.ItemView.extend({events:{"click .content-exit a":function(){this.trigger("info:close")}},ui:{scrollBar:".content-longdesc",readmore:"[data-component='readmore']"},template:function(t){return Handlebars.compile(e("../../assets/info/template-active.hbs"))(t)},className:function(){return"mh-maps-active"},onRender:function(){var e=this;setTimeout(function(){e.ui.scrollBar.nanoScroller({alwaysVisible:!0}),c.getInstance(e.ui.readmore).collapseContent()})}})},{"../../../../component/ui/readmore/view":2110,"../../assets/info/template-active.hbs":1133,"backbone.marionette":6}],1133:[function(e,t,i){t.exports='<div class="mh-maps-horizontal">\r\n    <div class="mh-maps-popup-picture" style="background-image: url(\'{{carouselimage}}\')"></div>\r\n    <div class="mh-maps-popup-content">\r\n        <div class="content-name">{{name}}</div>\r\n        <div class="content-desc">\r\n            <div class="content-longdesc nano">\r\n                <div class="nano-content">\r\n                    <div data-component="readmore" data-maxline="2" data-respondtoresize="false" data-removehandlerwhendestoryed="true">\r\n                        <span class="readmore__content hidebar">{{description}}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="content-drop">\r\n            {{#each nearbytransport}}\r\n                <div class="port">\r\n                    <span class="icon-item icon-icon{{Key}}"></span>\r\n                    <span class="text-item">{{Value}}</span>\r\n                </div>\r\n            {{/each}}\r\n            <div class="link"><a href="{{bookingflowurl}}">{{local "Property.book_room"}}</a></div>\r\n        </div>\r\n        <div class="content-exit">\r\n            <a href="javascript:void(0);"><span class="icon-icon_B017"></span></a>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="mh-maps-delta"><div class="mh-maps-delta-mask"></div></div>'},{}],1115:[function(e,t,i){function n(e){var t=jQuery.Deferred();return"function"==typeof e.then?e.then(function(e){t.resolve(e)},function(e){t.reject(e)}):t.resolve(e),t.promise()}var c=e("./google/google.maps.direction"),l=e("../../../../config/host"),a=e("pako");t.exports={route:function(e){var t=this;return t.hasCache(e)?jQuery.when(t.getCache(e)):t.getCacheFromRemote(e).then(function(e){return e.success?JSON.parse(a.inflateRaw(e.message,{to:"string"})):void 0},function(){return jQuery.when()}).then(function(i){return i?i:jQuery.when(n(c)).then(function(t){return t.route({origin:{lat:e.origin.get("lat"),lng:e.origin.get("lng")},target:{lat:e.target.get("lat"),lng:e.target.get("lng")},travel:e.travel})}).then(function(i){return t.setCacheFromRemote(e,i),i})}).then(function(i){return t.setCache(e,i)})},caches:{},hasCache:function(e){var t=this.hashCode(e),i=this.caches[t];if(i)for(var n=0;n<i.length;n++)if(this.equals(i[n].key,e))return!0;return!1},getCache:function(e){var t=this.hashCode(e),i=this.caches[t];if(i)for(var n=0;n<i.length;n++)if(this.equals(i[n].key,e))return i[n].value},setCache:function(e,t){var i=this.hashCode(e),n=this.caches[i];if(n){for(var c=0;c<n.length;c++)if(this.equals(n[c].key,e))return n[c].value=t;n.push({key:e,value:t})}else this.caches[i]=[{key:e,value:t}];return t},hashCode:function(e){for(var t=[e.origin.get("id"),e.target.get("id"),e.travel].join("|"),i=t.length,n=5381,c=0;i>c;c++)n=(n<<5)+n+t.charCodeAt(c);return n},equals:function(e,t){return e.origin.get("id")==t.origin.get("id")&&e.target.get("id")==t.target.get("id")&&e.travel==t.travel},getCacheFromRemote:function(e){return jQuery.getJSON(l.getURL("api","maps/getcache"),{origin:e.origin.get("id"),target:e.target.get("id"),travel:e.travel})},setCacheFromRemote:function(e,t){var i=a.deflateRaw(JSON.stringify(t),{to:"string"});return jQuery.ajax({url:l.getURL("api","maps/setcache"),type:"POST",data:{origin:e.origin.get("id"),target:e.target.get("id"),travel:e.travel,direction:i},contentType:"application/json; charset=utf-8"})}}},{"../../../../config/host":45,"./google/google.maps.direction":1122,pako:19}],1122:[function(e,t,i){var n=e("./google.maps.api");t.exports={then:function(e,t){return n.then(function(e){var t=new e.maps.DirectionsService;return{route:function(i){var n=jQuery.Deferred(),c=new e.maps.LatLng(i.origin.lat,i.origin.lng),l=new e.maps.LatLng(i.target.lat,i.target.lng),a=e.maps.TravelMode[i.travel];return t.route({origin:c,destination:l,travelMode:a},function(t,i){i==e.maps.DirectionsStatus.OK?n.resolve(t):n.reject(i)}),n.promise()}}}).then(e,t)}}},{"./google.maps.api":1120}],824:[function(e,t,i){t.exports='{{#if lengs}}\r\n    <div class="c-lengs-map__toggle">\r\n        <button class="c-lengs-map__toggle__button js-toggle--map-view is-active" type="button">\r\n            <i class="icon-icon_A002 c-icon c-icon--block"></i>\r\n            <span>{{local "maps.map_view"}}</span>\r\n        </button>\r\n        <button class="c-lengs-map__toggle__button js-toggle--list-view" type="button">\r\n            <i class="icon-icon_C006 c-icon c-icon--block"></i>\r\n            <span>{{local "maps.list_view"}}</span>\r\n        </button>\r\n    </div>\r\n    <div id="map-wrapper" class="c-lengs-map__container">\r\n        <div data-item="lengs-map" id="map" class="lengs-map"></div>\r\n{{else}}\r\n    <div id="map-wrapper">\r\n        <div id="map"></div>\r\n        <div id="MapControlButtons" class="mapControlButtons ">\r\n            <!--<a class="wgt-textbtn zoom zoomIn"><span>{{local "maps.zoom_in"}}</span>-->\r\n            <!--<label class="symbol">+</label>-->\r\n            <!--</a>-->\r\n            <!--<a class="wgt-textbtn zoom zoomOut"><span>{{local "maps.zoom_out"}}</span>-->\r\n            <!--<label class="symbol">-</label>-->\r\n            <!--</a>-->\r\n            <div class="wgt-exit-button">\r\n                <a class="wgt-textbtn close"><span>{{local "maps.close"}}</span><label class="symbol">x</label></a>\r\n            </div>\r\n            <div class="wgt-zoom-button">\r\n                <a class="zoom zoomIn"><span class="icon-icon_B023"></span></a>\r\n                <a class="zoom zoomOut"><span class="icon-icon_B024"></span></a>\r\n            </div>\r\n        </div>\r\n{{/if}}\r\n\r\n{{#if lengs}}\r\n        <div class=\'c-lengs-map__panel js-lengs-map-panel\'></div>\r\n{{/if}}\r\n\r\n\r\n    <div id="DestinationInformation"></div>\r\n    <div id="DestinationsFilter"></div>\r\n    <div id="LocationIntro" class="locationIntro"></div>\r\n\r\n</div>\r\n\r\n    <div id="destinations-carousel" class="destination-carousel wgt-carousel"></div>\r\n    <div id="DestinationList"></div>'},{}],808:[function(e,t,i){var n=e("../../city-map/maps/view"),c=e("./maps-view/view"),l=e("../../city-map/maps/maps-mask/view"),a=!window.mapLazyLoadStaticImageUrl;t.exports=n.extend({onRender:function(){var e=this;a?(e._innerMapsView=new c(e.options),e._innerMapsView.on("item:mouseenter",function(t){e.trigger("item:mouseenter",t)}),e._innerMapsView.on("item:mouseleave",function(t){e.trigger("item:mouseleave",t)}),e.getRegion("container").show(e._innerMapsView)):(e._innerMaskView=new l(e.options),e._innerMaskView.on("maps:initailize",function(){a=!0,e.render()}),e.getRegion("container").show(e._innerMaskView))}})},{"../../city-map/maps/maps-mask/view":757,"../../city-map/maps/view":762,"./maps-view/view":807}],807:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("backbone"),a=e("../../../maps/api/google/google.maps.view"),o=e("../../../maps/views/icon/view"),s=e("../../../ui/util"),r=e("../../../city-map/maps/maps-view/template.hbs");e("./style.sass"),t.exports=c.LayoutView.extend({template:function(e){return Handlebars.compile(r)(e)},events:{"click [data-zoom='added']":function(){this.gmapView.addZoom(1)},"click [data-zoom='minus']":function(){this.gmapView.addZoom(-1)}},regions:{maps:".listing_container-maps"},className:function(){return"listing_container"},initialize:function(){var e=this,t=-1,i=!1,n=e.model.get("model");n&&e.__setData(n),e.gmapView=new a({mapOptions:{disableDoubleClickZoom:!0}}),e.model.on("change:model",function(t,i){i&&(e.__setData(i),e.render())}),e.on("item:data:click",function(t){e.updateDataCluster(t)}),e.gmapView.on("marker:mouseenter",function(i){clearTimeout(t),e.__triggerMouseEnter(i)}),e.gmapView.on("marker:mouseleave",function(n){clearTimeout(t),i||(t=setTimeout(function(){e.__triggerMouseLeave(n)},1e3))}),e.gmapView.on("window:mouseenter",function(e){i=!0,clearTimeout(t)}),e.gmapView.on("window:mouseleave",function(n){i=!1,clearTimeout(t),e.__triggerMouseLeave(n)}),e.__winClose=function(){s.ismobile()&&(i=!1,clearTimeout(t),e.__triggerMouseLeave({},!0))},e.__addEvent()},__setData:function(e){var t=this,i=[];t.attractions=e.attractions.models,t.hotel=e,n.each(e.get("categories").models,function(e){i.push(e.toJSON())}),t.categories=i},onDestroy:function(){this.__delEvent()},__addEvent:function(){jQuery(document).on("click",this.__winClose)},__delEvent:function(){jQuery(document).off("click",this.__winClose)},onRender:function(){var e=this;e.attractions&&(e.getRegion("maps").show(e.gmapView),e.__DataCluster(e.hotel))},setActive:function(e){return this.gmapView.setActive(e)},openWindow:function(e){return this.gmapView.openWindow(e)},shutWindow:function(e){return this.gmapView.shutWindow(e)},__triggerMouseEnter:function(e){this.trigger("item:mouseenter",e)},__triggerMouseLeave:function(e,t){this.trigger("item:mouseleave",e,t)},updateDataCluster:function(e){var t=this;t.gmapView.removeAll();var i=jQuery(".c-hotel-m-social").length>0;e?t.gmapView.pushMarker([e].map(t.__markerParam,t)).then(function(){return t.gmapView.pushMarker(t.__markerParam(t.hotel,"hotel")).then(function(){return t.setActive(t.hotel)})}).then(function(){return t.gmapView.fitBounds({center:{lat:e.get("lat"),lng:e.get("lng")}})}).then(function(){i&&t.__MoveOffset()}):t.gmapView.pushMarker(t.attractions.map(t.__markerParam,t)).then(function(){return t.gmapView.pushMarker(t.__markerParam(t.hotel,"hotel")).then(function(){return t.setActive(t.hotel)})}).then(function(){return i?t.gmapView.fitBounds({center:{lat:t.hotel.get("lat"),lng:t.hotel.get("lng")}}):t.gmapView.fitBounds({})}).then(function(){i&&t.__MoveOffset()})},__DataCluster:function(e){var t=this,i=jQuery(".c-hotel-m-social").length>0;t.hotel=e,t.gmapView.removeAll(),t.gmapView.pushMarker(t.attractions.map(t.__markerParam,t)).then(function(){return t.gmapView.pushMarker(t.__markerParam(t.hotel,"hotel"))}).then(function(){return t.setActive(t.hotel)}).then(function(){return i?t.gmapView.fitBounds({center:{lat:t.hotel.get("lat"),lng:t.hotel.get("lng")}}):t.gmapView.fitBounds({})}).then(function(){i&&t.__MoveOffset()})},__MoveOffset:function(){var e=this,t=e.$el,i=jQuery(".c-lengs-map__panel");if(t.length&&i.length){var n=t.width(),c=i.width(),l=t.offset().left,a=i.offset().left;if(n>0&&c>0&&a>l)return e.gmapView.panBy({x:(n-Math.min(n,Math.max(a-l,0)))/2,y:0})}},__markerParam:function(e,t){var i=this,c=jQuery(".c-lengs-page");if("hotel"==t){if(c.hasClass("c-hotel-m-social"))return{model:e,position:{lng:e.get("lng"),lat:e.get("lat")},index:0,content:new o({model:new l.Model({rgba:"#000",icon:"icon-icon_D010",IFHOTEL:!0})})};var a="#9f7d23",s="icon-icon_D005";if(e.collection){s="icon-icon_"+e.collection.get("iconindex");var r=e.collection.get("codename");"millennium"===r&&(a="#ba0c2f"),"copthorne"===r&&(a="#021c6f"),"m collection"===r&&(a="#241f20")}return{model:e,position:{lng:e.get("lng"),lat:e.get("lat")},index:0,content:new o({model:new l.Model({rgba:a,icon:s,IFHOTEL:!0})})}}var g=n.findWhere(i.categories,{name:e.get("type")});return g?{model:e,position:{lng:e.get("lng"),lat:e.get("lat")},index:0,content:new o({model:new l.Model({rgba:g.color,icon:g.icon})})}:void 0}})},{"../../../city-map/maps/maps-view/template.hbs":759,"../../../maps/api/google/google.maps.view":1127,"../../../maps/views/icon/view":1174,"../../../ui/util":2122,"./style.sass":806,backbone:8,"backbone.marionette":6,underscore:42}],806:[function(e,t,i){t.exports=e("sassify")('.gbw-p-s-map-view-tool {   background-color: transparent;   position: absolute;   right: auto;   bottom: auto;   top: 4rem;   left: 3rem; }   @media screen and (max-width: 768px) {     .gbw-p-s-map-view-tool {       top: inherit;       bottom: 4rem; } }   .gbw-p-s-map-view-tool .gbw-p-s-map-tools {     display: block;     cursor: pointer; }     .gbw-p-s-map-view-tool .gbw-p-s-map-tools span {       display: inline-block;       background-color: #95c939;       margin-bottom: 3px;       font-size: 36px;       padding: 0;       color: #fff; }     .gbw-p-s-map-view-tool .gbw-p-s-map-tools:nth-child(2) span {       border-top: 0; }  .content-drop .link a {   color: #31a2ac; }  html[dir="rtl"] .gbw-p-s-map-view-tool {   right: auto;   left: 36px; }  .listing_container {   width: 100%;   height: 100%; }  ')},{sassify:36}],805:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=(e("../../../../config/host.js"),e("underscore.string/sprintf")),a=e("../../ui/util"),o=e("./model"),s=e("../../../component/maps/api/google/google.maps.api"),r=e("../models/DAO"),g=e("./map-styles"),d=(e("../../../component/maps/api/google/google.maps.projection"),e("../../../component/maps/api/google/google.maps.MarkerClusterer"));t.exports=c.ItemView.extend(n.extend({},{template:!1,initialize:function(e){this.model=new o(n.extend({markers:[]},n.pick(e,["$right","$left","lengsPanel"]))),this.model.set({lengs:e.lengs})},adjustZoom:function(e){this.model.set({zoom:this.googleMap.getZoom()+e})},setLabels:function(e){this.googleMap.setMapTypeId("labels-"+(e?"on":"off"))},onRender:function(){var t=this;s.then(function(){MarkerWithLabelOriginal=e("./markerwithlabel");var i=t.googleMap=new google.maps.Map(t.$el.get(0),{mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,scrollwheel:!1,styles:g,draggable:t.options.draggable,maxZoom:18}),c=jQuery.Deferred();google.maps.event.addListener(i,"dragend",function(){var e=i.getCenter().lat();(-85>e||e>85)&&i.setCenter(new google.maps.LatLng(0,153))}),i.addListener("idle",function(){if(c.resolve(),i.getZoom()<=1){var e=t.$el.parent();450<e.height()&&(e.height(450),google.maps.event.trigger(i,"resize"),t.model.trigger("change:bounds"))}}),i.addListener("zoom_changed",function(){t.model.set({zoom:i.getZoom()})}),n.each(["on","off"],function(e){i.mapTypes.set("labels-"+e,new google.maps.StyledMapType(g.concat([{featureType:"all",elementType:"labels",stylers:[{visibility:e}]},{featureType:"poi.business",elementType:"labels",stylers:[{visibility:"off"}]}])))}),t.setLabels(!0),t.model.on("change:zoom",function(){i.setZoom(t.model.get("zoom"))}),t.model.on("change:center",function(){i.panTo(t.model.get("center"))}),t.model.on("change:bounds change:destination change:attraction change:destinations change:locations change:hovered",function(){for(;t.model.get("markers").length;)t.model.get("markers").shift().setMap(null);if(n.each(t.model.get("locations"),t.placeLocation,t),n.each(t.model.get("attractions"),t.placeAttraction,t),n.each(t.model.get("destinations"),t.placeDestination,t),!t.options.lengs){t._clusterers&&(t.removeClusterer("Attractions"),t.removeClusterer("Hotels"));var e=t.createClusterer(t.googleMap,{maxZoom:17,name:"Attractions",color:"#31a2ac",width:39.7,height:52.2,imagePath:"/assets/img/maps/group-icon/ori-attractions.png",addStyle:"background-repeat:no-repeat;background-position:center center;text-align:right;padding-right:13.2px;line-height:20.6px;z-index:999;font-size:9px;background-repeat:no-repeat;letter-spacing:-2.2px;"}),i=t.createClusterer(t.googleMap,{maxZoom:17,name:"Hotels",color:"#ba0c2f",width:39.7,height:52.2,imagePath:"/assets/img/maps/group-icon/ori-hotels.png",addStyle:"background-repeat:no-repeat;background-position:center center;text-align:right;padding-right:13.2px;line-height:20.6px;z-index:999;font-size:9px;background-repeat:no-repeat;letter-spacing:-2.2px;"}),c=[],l=[];n.each(t.model.get("markers"),function(e){"map-marker attraction collection-millennium transparent"===e.labelClass?c.push(e):("map-marker destination collection-millennium transparent"===e.labelClass||"map-marker destination collection-millennium"===e.labelClass&&500!=e.zIndex)&&l.push(e)}),c.length&&e.addMarkers(c),l.length&&i.addMarkers(l)}}),t.model.on("change:destination change:location",function(e){t.setLabels(e.get("destination")||e.get("location")&&e.get("location").destinations.length)}),t.model.on("change:bounds change:attraction change:destination",function(){c.then(function(){function e(e,t){i.panBy(-e,-t)}function c(e,t,n){var c=i.getProjection().fromLatLngToPoint(e instanceof google.maps.LatLng?e:i.getCenter()),l=new google.maps.Point(("number"==typeof t?t:0)/Math.pow(2,i.getZoom())||0,("number"==typeof n?n:0)/Math.pow(2,i.getZoom())||0);i.setCenter(i.getProjection().fromPointToLatLng(new google.maps.Point(c.x-l.x,c.y+l.y)))}var l=new google.maps.LatLngBounds;if(n.each(t.model.get("bounds"),function(e){jQuery.isNumeric(e.lat)&&jQuery.isNumeric(e.lng)&&l.extend(new google.maps.LatLng(e.lat,e.lng))}),i.fitBounds(l),t.options.lengs){var o=t.model.get("attraction")||t.model.get("destination");t.lengsZoom&&i.setZoom(t.lengsZoom),o&&i.setCenter(new google.maps.LatLng(o.get("lat"),o.get("lng")))}i.getZoom()>18&&i.setZoom(18);var s=t.model.get("attraction")||t.model.get("destination");s&&t.model.set({center:{lat:s.get("lat"),lng:s.get("lng")}});var r=(a.inrange(i.getZoom(),1,15),{lat:i.getCenter().lat(),lng:i.getCenter().lng()});if(!a.ismobile()&&t.model.get("lengsPanel"))c(r,t.$el.width()/-4,0);else if(!a.ismobile()&&t.model.get("$right").is(":visible")){var g=jQuery(i.getDiv()).width(),d=jQuery(i.getDiv()).offset(),I=t.model.get("$right").offset();e(-((g-Math.min(g,Math.max(I.left-d.left,0)))/2-80),0)}var b=((a.queryparam("initial")||"").match(/^(-?\d+\.?\d*),(-?\d+\.?\d*),(\d+)$/)||[]).slice(1).map(parseFloat);!t.model.get("initposzoom")&&b.length&&t.model.set({center:{lat:b[0],lng:b[1]},zoom:b[2],initposzoom:!0})})}),c.then(function(){t.model.trigger("change:bounds")})})},customZIndex:300,addMarker:function(e){
var t="",i="",n="#9f7d23",c="#9f7d23";switch(e.type){case"bar":n="purple";break;case"cafe":n="#9f7d23";break;case"place of interest":n="#004976";break;case"restaurant":n="#ec9125";break;default:n="#9f7d23"}var a=jQuery(".c-lengs-page"),o=a.length&&a.attr("class").split(" ");if(o&&o.length)switch(o[o.length-1]){case"t-default":break;case"t-m-hotel-singapore":c="#ec9125";break;case"t-studio-m":break;case"t-baileys-hotel":c="#971b2f";break;case"t-chelsea-harbour":c="#004976";break;case"t-m-social-london":break;case"t-grand-palace-rome":}var s="_selected"==e.iconSuffix||e.hovered&&"_selected"==e.iconSuffix?1:.75;e.lengs&&"attraction"===e.obj_type?(t={anchor:new google.maps.Point(14,20),path:"M12,2C8.1,2,5,5.1,5,9s7,13,7,13s7-9.1,7-13S15.9,2,12,2z M12,12c-1.7,0-3-1.3-3-3c0-1.7,1.3-3,3-3c1.7,0,3,1.3,3,3  C15,10.7,13.7,12,12,12z",fillColor:"_selected"==e.iconSuffix?"#ffffff":c,fillOpacity:s,scale:1,strokeColor:"_selected"==e.iconSuffix?c:"none",strokeWeight:"_selected"==e.iconSuffix?2:0},i=""):e.lengs&&"destination"===e.obj_type?(t={anchor:new google.maps.Point(0,0),path:"",fillColor:"_selected"==e.iconSuffix?"#ffffff":c,fillOpacity:1,scale:20,strokeColor:"_selected"==e.iconSuffix?c:"none",strokeWeight:"_selected"==e.iconSuffix?2:0},e.lengsmarker=!0,i=e.lengsmarkericon?'<img src="'+e.lengsmarkericon+'">':'<i class="icon-icon_D005" style="position: relative;color:'+c+';font-size: 35px;left: 34px;top: 42px;"></i>'):(t=e.icon||"/assets/img/blank.png",i=(e.iconpng?l('<div class="map-marker-png map-marker-png_%s"></div>',e.iconpng):"")+(e.label?l('<div class="map-marker-name-label">%s</div>',e.label):"")+(e.countLabel?l('<div class="map-marker-count-label">%s</div>',e.countLabel):""));var r=this,g=(!e.icon&&(e.iconindex||e.collection&&e.collection.get("iconindex")),new MarkerWithLabelOriginal({crossImage:e.crossImage||"data:image/gif;base64,AAAA",overflowNoHidden:e.lengsmarker,zIndex:e.zIndex||r.customZIndex,position:e.position,map:r.googleMap,icon:t,labelAnchor:new google.maps.Point(50,60),labelClass:"map-marker "+e.obj_type+(e.collection?" collection-"+e.collection.get("codename").trim().replace(/\s+/g,"-"):"")+(e.icon?" uses-iconimage":"")+(e.transparent?" transparent":"")+(e.small?" uses-iconsmall":""),labelContent:i}));g.addListener("click",function(){r.options.lengs&&(r.lengsZoom=r.model.get("zoom")),r.trigger(e.obj_type+":click",e.obj)}),r.model.get("markers").push(g)},placeLocation:function(e){var t=this,i=e.location,c=e.alldestinations,l=n.uniq(n.pluck(c,"collection")),a=1==l.length?l[0]:r.collections.findWhere({codename:"millennium"}),o=i.get("parentid")?"_unselected":"_round",s=!!this.model.get("hovered");this.addMarker({obj:i,obj_type:"location",collection:a,position:t.model.getCenter(n.pluck(c,"attributes")),iconindex:a&&a.get("iconindex"),iconSuffix:o,hovered:s,iconpng:"map_icon_"+a.get("codename").trim().replace(/\s+/g,"-")+o,label:i.get("name"),countLabel:c.length>1?c.length:0,small:!!i.get("parentid")})},placeDestination:function(e){var t=this,i=e.collection,n=e==this.model.get("destination")?"_selected":"_unselected",c=!!this.model.get("hovered");this.addMarker({lengsmarkericon:t.options.lengsmarkericon,obj:e,obj_type:"destination",collection:e.collection,lengs:t.model.get("lengs"),position:{lat:e.get("lat"),lng:e.get("lng")},iconindex:e.collection.get("iconindex"),iconpng:"map_icon_"+i.get("codename").trim().replace(/\s+/g,"-")+n,iconSuffix:n,hovered:c,label:e.get("name"),transparent:this.model.get("attraction")||this.model.get("destination")&&this.model.get("destination")!=e,zIndex:e==this.model.get("destination")?this.customZIndex+200:this.customZIndex})},placeAttraction:function(e){var t=this,i=e==this.model.get("attraction")?"_selected":"_unselected",n=!!this.model.get("hovered");this.addMarker({obj:e,obj_type:"attraction",type:e.get("type"),collection:e.destination&&e.destination.collection,lengs:t.model.get("lengs"),hovered:n,position:{lat:e.get("lat"),lng:e.get("lng")},iconindex:e.get("iconindex"),iconSuffix:i,iconpng:"map_icon_attraction"+i,label:"",transparent:!this.model.get("attraction")||this.model.get("attraction")!=e,zIndex:e==this.model.get("attraction")?this.customZIndex+100:this.customZIndex})},createClusterer:function(e,t){var i=this;if(i._clusterers||(i._clusterers={}),i._clusterers[t.name])return i._clusterers[t.name];var n=new d(e,null,{clusterClass:t.clusterClass,maxZoom:t.maxZoom,dataID:t.dataID,dataParent:t.dataParent,zoomOnClick:!0,hoverUrl:t.hoverImagePath,styles:[{url:t.imagePath,width:t.width,height:t.height,textColor:t.color,addStyle:t.addStyle}]});return i._clusterers[t.name]=n,n},removeClusterer:function(e){var t=this;return t._clusterers&&t._clusterers[e]?(t._clusterers[e].clearMarkers(!0),delete t._clusterers[e],!0):!1}}))},{"../../../../config/host.js":45,"../../../component/maps/api/google/google.maps.MarkerClusterer":1119,"../../../component/maps/api/google/google.maps.api":1120,"../../../component/maps/api/google/google.maps.projection":1125,"../../ui/util":2122,"../models/DAO":809,"./map-styles":802,"./markerwithlabel":803,"./model":804,backbone:8,"backbone.marionette":6,underscore:42,"underscore.string/sprintf":41}],804:[function(e,t,i){var n=e("underscore"),c=e("../../ui/util"),l=e("backbone");t.exports=l.Model.extend({reset:function(){return this.set({zoom:1,locations:[],destinations:[],attractions:[],bounds:[],center:null,attraction:null,destination:null,hovered:null})},initialize:function(){var e=this.reset();e.on("change:zoom",function(){e.set({zoom:c.inrange(e.get("zoom"),1,20)},{silent:!0})}),e.on("change:destination",function(){e.set({attractions:[]});var t=e.get("destination"),i=t&&t.getAttractions();i&&i.promise.then(function(n){e.get("destination")==t&&e.set({attractions:i.models})})}),e.on("change:locations change:destinations change:attractions",function(){e.set({bounds:n.pluck(e.get("destinations"),"attributes").concat(n.pluck(e.get("attractions"),"attributes")).concat(n.flatten(n.map(e.get("locations"),function(e){return n.pluck(e.alldestinations,"attributes")})))})})},getCenter:function(e){var t=this,i=e||t.get("attraction")&&[t.get("attraction").attributes]||t.get("destination")&&[t.get("destination").attributes]||t.get("bounds"),c=n.min(n.pluck(i,"lat")),l=n.max(n.pluck(i,"lat")),a=n.min(n.pluck(i,"lng")),o=n.max(n.pluck(i,"lng"));return{lat:c+(l-c)/2,lng:a+(o-a)/2}}})},{"../../ui/util":2122,backbone:8,underscore:42}],803:[function(e,t,i){function n(e,t){function i(){}i.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new i,e.prototype.constructor=e}function c(e,t,i){this.marker_=e,this.handCursorURL_=e.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=c.getSharedCross(t)}function l(e){e=e||{},e.labelContent=e.labelContent||"",e.labelAnchor=e.labelAnchor||new google.maps.Point(0,0),e.labelClass=e.labelClass||"markerLabels",e.labelStyle=e.labelStyle||{},e.labelInBackground=e.labelInBackground||!1,"undefined"==typeof e.labelVisible&&(e.labelVisible=!0),"undefined"==typeof e.raiseOnDrag&&(e.raiseOnDrag=!0),"undefined"==typeof e.clickable&&(e.clickable=!0),"undefined"==typeof e.draggable&&(e.draggable=!1),"undefined"==typeof e.optimized&&(e.optimized=!1),e.optimized=!1,this.label=new c(this,e.crossImage,e.handCursor),google.maps.Marker.apply(this,arguments)}n(c,google.maps.OverlayView),c.getSharedCross=function(e){var t;return"undefined"==typeof c.getSharedCross.crossDiv&&(t=document.createElement("img"),t.style.cssText="position: absolute; z-index: 1000002; display: none;",t.style.marginLeft="-8px",t.style.marginTop="-9px",t.src=e,c.getSharedCross.crossDiv=t),c.getSharedCross.crossDiv},c.prototype.onAdd=function(){var e,t,i,n,l,a,o,s=this,r=!1,g=!1,d=20,I="url("+this.handCursorURL_+")",b=function(e){e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},C=function(){s.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),"undefined"==typeof c.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),c.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(e){(s.marker_.getDraggable()||s.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(s.marker_,"mouseover",e))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(e){!s.marker_.getDraggable()&&!s.marker_.getClickable()||g||(this.style.cursor=s.marker_.getCursor(),google.maps.event.trigger(s.marker_,"mouseout",e))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(e){g=!1,s.marker_.getDraggable()&&(r=!0,this.style.cursor=I),(s.marker_.getDraggable()||s.marker_.getClickable())&&(google.maps.event.trigger(s.marker_,"mousedown",e),b(e))}),google.maps.event.addDomListener(document,"mouseup",function(t){var i;if(r&&(r=!1,s.eventDiv_.style.cursor="pointer",google.maps.event.trigger(s.marker_,"mouseup",t)),g){if(l){i=s.getProjection().fromLatLngToDivPixel(s.marker_.getPosition()),i.y+=d,s.marker_.setPosition(s.getProjection().fromDivPixelToLatLng(i));try{s.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(C,1406)}catch(c){}}s.crossDiv_.style.display="none",s.marker_.setZIndex(e),n=!0,g=!1,t.latLng=s.marker_.getPosition(),google.maps.event.trigger(s.marker_,"dragend",t)}}),google.maps.event.addListener(s.marker_.getMap(),"mousemove",function(n){var c;r&&(g?(n.latLng=new google.maps.LatLng(n.latLng.lat()-t,n.latLng.lng()-i),c=s.getProjection().fromLatLngToDivPixel(n.latLng),l&&(s.crossDiv_.style.left=c.x+"px",s.crossDiv_.style.top=c.y+"px",s.crossDiv_.style.display="",c.y-=d),s.marker_.setPosition(s.getProjection().fromDivPixelToLatLng(c)),l&&(s.eventDiv_.style.top=c.y+d+"px"),google.maps.event.trigger(s.marker_,"drag",n)):(t=n.latLng.lat()-s.marker_.getPosition().lat(),i=n.latLng.lng()-s.marker_.getPosition().lng(),e=s.marker_.getZIndex(),a=s.marker_.getPosition(),o=s.marker_.getMap().getCenter(),l=s.marker_.get("raiseOnDrag"),g=!0,s.marker_.setZIndex(1e6),n.latLng=s.marker_.getPosition(),google.maps.event.trigger(s.marker_,"dragstart",n)))}),google.maps.event.addDomListener(document,"keydown",function(e){g&&27===e.keyCode&&(l=!1,s.marker_.setPosition(a),s.marker_.getMap().setCenter(o),google.maps.event.trigger(document,"mouseup",e))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(e){(s.marker_.getDraggable()||s.marker_.getClickable())&&(n?n=!1:(google.maps.event.trigger(s.marker_,"click",e),b(e)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(e){(s.marker_.getDraggable()||s.marker_.getClickable())&&(google.maps.event.trigger(s.marker_,"dblclick",e),b(e))}),google.maps.event.addListener(this.marker_,"dragstart",function(e){g||(l=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(e){g||l&&(s.setPosition(d),s.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(e){g||l&&s.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){s.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){s.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){s.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){s.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){s.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){s.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){s.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){s.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){s.setStyles()})]},c.prototype.onRemove=function(){var e;for(this.labelDiv_.parentNode.removeChild(this.labelDiv_),this.eventDiv_.parentNode.removeChild(this.eventDiv_),e=0;e<this.listeners_.length;e++)google.maps.event.removeListener(this.listeners_[e])},c.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},c.prototype.setContent=function(){var e=this.marker_.get("labelContent");"undefined"==typeof e.nodeType?(this.labelDiv_.innerHTML=e,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(e),e=e.cloneNode(!0),this.eventDiv_.innerHTML="",this.eventDiv_.appendChild(e))},c.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},c.prototype.setStyles=function(){var e,t;this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",t=this.marker_.get("labelStyle");for(e in t)t.hasOwnProperty(e)&&(this.labelDiv_.style[e]=t[e],this.eventDiv_.style[e]=t[e]);this.setMandatoryStyles()},c.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute","undefined"!=typeof this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},c.prototype.setAnchor=function(){var e=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-e.x+"px",this.labelDiv_.style.marginTop=-e.y+"px",this.eventDiv_.style.marginLeft=-e.x+"px",this.eventDiv_.style.marginTop=-e.y+"px"},c.prototype.setPosition=function(e){var t=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());"undefined"==typeof e&&(e=0),this.labelDiv_.style.left=Math.round(t.x)+"px",this.labelDiv_.style.top=Math.round(t.y-e)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},c.prototype.setZIndex=function(){var e=this.marker_.get("labelInBackground")?-1:1;"undefined"==typeof this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+e,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+e,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},c.prototype.setVisible=function(){this.marker_.get("labelVisible")?this.labelDiv_.style.display=this.marker_.getVisible()?"block":"none":this.labelDiv_.style.display="none",this.eventDiv_.style.display=this.labelDiv_.style.display},n(l,google.maps.Marker),l.prototype.setMap=function(e){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(e)},i=t.exports=l},{}],802:[function(e,t,i){t.exports=[{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#e0efef"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{hue:"#1900ff"},{color:"#c0e8e8"}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"on"},{lightness:700}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#7dcdcd"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#7dcdcd"}]}]},{}],801:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("backbone.marionette")),c=e("../../ui/util"),l=e("./model");Handlebars.registerHelper("debug",function(e){}),Handlebars.registerHelper("locationBuildScore",function(e,t,i,n,c){var l="";switch(parseInt(t,10)){case 0:l='<span class="reviews-score">'+e+" "+local.offers.score_title+"</span>",l+='<a href="'+i+'" class="reviews-counts" target="_blank" rel="noopener noreferrer">'+c+" "+local.offers.review_title+"</a>";break;case 1:l='<span class="reviews-icon icon-icon_E009"></span> <span class="reviews-score">'+e+" "+n+"</span>",l+='<a href="'+i+'" class="reviews-counts" target="_blank" rel="noopener noreferrer">'+c+" "+local.offers.review_title+"</a>";break;case 2:l='<span class="reviews-icon icon-icon_E009"></span> <span class="reviews-score">'+e+"/10 "+n+"</span>",l+='<a href="'+i+'" class="reviews-counts" target="_blank" rel="noopener noreferrer">'+c+" "+local.offers.review_title+"</a>";break;case 3:l='<span class="reviews-icon icon-icon_E009"></span> <span class="reviews-score">'+n+"</span>"}return l}),Handlebars.registerHelper("contactUrl",function(e){return encodeURI(e[0])});var a=c.ismobile(),o=a?Handlebars.compile(e("./template_mobile.hbs")):Handlebars.compile(e("./template.hbs"));t.exports=n.ItemView.extend({template:o,events:{"click .featured-view-more":"viewMore"},initialize:function(e){var t=this;this.model=new l(e),this.model.on("change",function(){t.render()})},onRender:function(){this.model.get("more")||(jQuery(this.el).css("padding",0),jQuery(this.el).find(".location-list").css("padding",0))},viewMore:function(){this.model.viewMore(),jQuery(this.el).css("padding",0),jQuery(this.el).find(".location-list").css("padding",0)}})},{"../../ui/util":2122,"./model":798,"./template.hbs":799,"./template_mobile.hbs":800,backbone:8,"backbone.marionette":6,underscore:42}],800:[function(e,t,i){t.exports='{{#if list.length}}\r\n  <div class="title-block location-list">\r\n    {{#if featureTitle}}\r\n      <h4 class="name">\r\n        {{featureTitle}}\r\n      </h4>\r\n    {{/if}}\r\n    <ul class="featured-list">\r\n      {{#list}}\r\n        <li class="feature-li clearfix">\r\n          <div class="feature-image-region">\r\n            <img class="feature-image" src={{contactUrl infoimages}} alt="">\r\n            {{#if badgetitle}}\r\n              <span class="feature-icon">{{badgetitle}}</span>\r\n            {{/if}}\r\n          </div>\r\n          <div class="feature-desc-region">\r\n            <div class="feature-desc-left clearfix">\r\n              <div class="reivews-region">\r\n                {{{locationBuildScore score score_flag score_url reviewmessage reviewcount}}}\r\n              </div>\r\n              <h3 class="feature-title">{{name}}</h3>\r\n              <div class="feature-near clearfix">\r\n                <p class="location-region"><span class="location-icon icon-icon_P002"></span>{{location}}</p>\r\n                {{#if nearbytransport.[0].Value}}\r\n                  <p class="r-d nearby-region"><span\r\n                          class="icon-icon_F032 nearby-icon"></span> {{nearbytransport.[0].Value}}</p>\r\n                {{/if}}\r\n              </div>\r\n            </div>\r\n            <div class="feature-desc">{{{tripadvisor}}}</div>\r\n            <div class="price-region clearfix">\r\n              {{#if price}}\r\n              <div class="price-content">\r\n                <p class="price-from">{{local "offers.from"}}</p>\r\n                <p class="price-detail clearfix">\r\n                  <span class="price-count">{{price}}</span>\r\n                  <span class="price-currency">{{../../../currency}}</span>\r\n                </p>\r\n                <p class="price-desc">{{local "offers.price"}}</p>\r\n                </div>\r\n              {{/if}}\r\n              <a class="view-hotel" rel="noopener noreferrer" href="{{quickbookurl}}">\r\n                {{local "offers.view_hotel"}}\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </li>\r\n      {{/list}}\r\n    </ul>\r\n    {{#if more}}\r\n      <a href="javascript:;" class="featured-view-more">{{local "offers.view_more"}}</a>\r\n    {{/if}}\r\n  </div>\r\n{{/if}}'},{}],799:[function(e,t,i){t.exports='{{#if list.length}}\r\n  <div class="title-block location-list">\r\n    {{#if featureTitle}}\r\n      <h4 class="name">\r\n        {{featureTitle}}\r\n      </h4>\r\n    {{/if}}\r\n    <ul class="featured-list">\r\n      {{#list}}\r\n        <li class="feature-li clearfix">\r\n          <div class="feature-image-region">\r\n            <img class="feature-image" src={{contactUrl infoimages}} alt="">\r\n            {{#if badgetitle}}\r\n              <span class="feature-icon">{{badgetitle}}</span>\r\n            {{/if}}\r\n          </div>\r\n          <div class="feature-desc-region">\r\n            <div class="clearfix">\r\n              <div class="feature-desc-left clearfix">\r\n                <div class="reivews-region">\r\n                  {{{locationBuildScore score score_flag score_url reviewmessage reviewcount}}}\r\n                </div>\r\n                <h3 class="feature-title">{{name}}</h3>\r\n                <div class="feature-near clearfix">\r\n                  <p class="location-region"><span class="location-icon icon-icon_P002"></span>{{location}}</p>\r\n                  {{#if nearbytransport.[0].Value}}\r\n                    <p class="r-d nearby-region"><span\r\n                            class="icon-icon_F032 nearby-icon"></span> {{nearbytransport.[0].Value}}</p>\r\n                  {{/if}}\r\n                </div>\r\n              </div>\r\n              <div class="feature-desc">{{{tripadvisor}}}</div>\r\n            </div>\r\n\r\n          </div>\r\n          <div class="price-region">\r\n            <div class="price-desc-region">\r\n              {{#if price}}\r\n                <p class="price-from">{{local "offers.from"}}</p>\r\n                <p class="price-detail clearfix">\r\n                  <span class="price-count">{{price}}</span>\r\n                  <span class="price-currency">{{../../../currency}}</span>\r\n                </p>\r\n                <p class="price-desc">{{local "offers.price"}}</p>\r\n              {{/if}}\r\n            </div>\r\n            <a class="view-hotel" rel="noopener noreferrer" href="{{url}}">\r\n              {{local "offers.view_hotel"}}\r\n            </a>\r\n          </div>\r\n        </li>\r\n      {{/list}}\r\n    </ul>\r\n    {{#if more}}\r\n      <a href="javascript:;" class="featured-view-more">{{local "offers.view_more"}}</a>\r\n    {{/if}}\r\n  </div>\r\n{{/if}}\r\n'},{}],798:[function(e,t,i){var n=(e("underscore"),e("../../../../config/host"),e("../../ui/util")),c=e("backbone");t.exports=c.Model.extend({defaults:{list:[],defaultList:[],locations:[],more:!1,mobile:!1,currency:"USD",featureTitle:""},parse:function(e){this.set("defaultList",e),e.length>6&&this.set("more",!0),this.set("list",e.slice(0,6))},viewMore:function(){this.set("list",this.get("defaultList")),this.get("featureTitle")&&this.set("featureTitle",local.offers.featured_title_more),this.set("more",!1)},initialize:function(e){var t=this;n.ismobile()&&t.set("mobile",!0),e.featureTitle&&this.set("featureTitle",e.featureTitle),this.url=e.url,this.fetch(),c.trigger("getCurrency",function(e){e&&t.set("currency",e)}),c.on("sendCurrency",function(e){e&&t.set("currency",e)})}})},{"../../../../config/host":45,"../../ui/util":2122,backbone:8,underscore:42}],797:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("backbone.marionette"),l=Handlebars.compile(e("./template.hbs"));t.exports=c.ItemView.extend({className:"LocationIntro",events:{"click a.expand":"onExpandClick"},hide:function(){this.$el.hide()},show:function(){this.$el.show()},onExpandClick:function(){this.triggerMethod("expand",this.model.get("location")),this.model.set({location:null})},initialize:function(){var e=this;e.model=new n.Model({location:null}),e.model.on("change:location",e.render,e)},render:function(){var e=this,t=e.model.get("location");return e.$el.addClass(this.className),e[t?"show":"hide"](),t&&e.$el.html(l(t.attributes)),this}})},{"./template.hbs":796,backbone:8,"backbone.marionette":6,underscore:42}],796:[function(e,t,i){t.exports='<h2>{{name}} <span>{{local "maps.map"}}</span></h2>\r\n<div class="introInfo"><p>{{intromessage}}</p></div>\r\n<a class="wgt-sqbutton-dark expand">{{local "maps.expand"}}</a>'},{}],794:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("./waterfall-vertical.js"),a=e("./model.js"),o=e("./searchModel.js"),s=e("../models/location-model.js"),r=e("../../../../config/host.js");t.exports=c.ItemView.extend({className:"destination-list",template:Handlebars.compile(e("./template.hbs")),events:{"click a.to-top":function(){jQuery(window).scrollTop(0)},"click a.to-destination":function(){window.location.href="/destinations"}},initialize:function(e){if(this._waterfallHandler=jQuery.proxy(n.debounce(this.__WaterfallHandler,50),this),Handlebars.registerHelper("eachHotel",function(e,i){var c=[];if(e.children){if("china"===e.get("key")){var l=n.findIndex(e.children,function(e){return"hong-kong"===e.get("key")});l>0&&e.children.push(e.children.splice(l,1)[0])}if("china"===e.get("key")){var a=n.findIndex(e.children,function(e){return"taichung"===e.get("key")});a>0&&e.children.push(e.children.splice(a,1)[0])}if("china"===e.get("key")){var o=n.findIndex(e.children,function(e){return"hualien"===e.get("key")});o>0&&e.children.push(e.children.splice(o,1)[0])}e.children.forEach(function(e){c.push(i.fn(e))})}var s=t.model.get("destinations");return s&&s.forEach(function(t){t.get("locationid")==e.id&&c.push(i.fn(t))}),c.join("")}),Handlebars.registerHelper("isCity",function(e,i){if(e instanceof s){var n=[],c=0;n.push(i.fn(e));var l=t.model.get("destinations");return l&&l.forEach(function(l){(!t.model.get("collection")&&l.get("locationid")==e.id||t.model.get("collection")&&l.get("locationid")==e.id&&l.get("collectionid")==t.model.get("collection").id)&&(n.push(i.inverse(l)),c+=1)}),c>0?n.join(""):""}return i.inverse(e)}),Handlebars.registerHelper("eachCountry",function(e,t){var i,n=i18n.t("hotels.mainland_china");i="singapore"==e.attributes.key?new Handlebars.SafeString("<div class='row'><h4 class='country' style='padding-bottom: 12px'><a class='country' href='"+e.attributes.url+"'>"+e.attributes.name+"</a></h4><ul>"):"taiwan"==e.attributes.key?new Handlebars.SafeString("<div class='row' data-follow='yes'><h4 class='country'>"+e.attributes.name+"</h4><ul>"):"china"==e.attributes.key?new Handlebars.SafeString("<div class='row'><h4 class='country'>"+e.attributes.name+"</h4><h6 class='waterfall-sub-area-name'>"+n+"</h6><ul>"):new Handlebars.SafeString("<div class='row'><h4 class='country'>"+e.attributes.name+"</h4><ul>");var c=t.fn(e);return c?i+c+new Handlebars.SafeString("</ul></div>"):c}),e&&e.search){var t=this;t.model=new o,void 0==e.regionName&&(e.regionName=""),void 0==e.searchMsg&&(e.searchMsg=""),t.model.url=r.getURL("api","search/destinations?keywords="+e.searchMsg+"&regionName="+e.regionName)}else{var t=this;t.model=new a({isTop:e.isTop,isForHotels:e&&e.isForHotels}),t.model.isForHotels=e&&e.isForHotels,e&&e.isForHotels&&(t.model.url=r.getURL("api","data/destinations/top10")),t.$el.hide(),t.$el.addClass(this.className)}},onRender:function(){this.__detachGlobalListener(),this.__attachGlobalListener(),this.__WaterfallHandler()},onShow:function(){this.__WaterfallHandler()},onDestroy:function(){this.__detachGlobalListener()},__attachGlobalListener:function(){jQuery(window).on("resize",this._waterfallHandler)},__detachGlobalListener:function(){jQuery(window).off("resize",this._waterfallHandler)},__WaterfallHandler:function(){new l({container:this.$el.find(".contents").get(0),colWidth:33.33333,colCount:3})}})},{"../../../../config/host.js":45,"../models/location-model.js":823,"./model.js":790,"./searchModel.js":791,"./template.hbs":793,"./waterfall-vertical.js":795,"backbone.marionette":6,underscore:42}],793:[function(e,t,i){t.exports='<div class="content-title">{{local "general.Countries_and_Regions"}}</div>\r\n<div class="content">\r\n    <div class="contents">\r\n        {{#ifCond locations.length \'<\' 1}}<p class="tips">{{local "globalsearch.nomatched_title"}}</p>{{/ifCond}}\r\n        {{#if isForHotels}}\r\n            {{#unless isCollection}}\r\n                <div class="row">\r\n                    <h4 class="country">{{#if isForHotels}}{{local "hotels.top_10_hotels"}}{{else}}{{local "maps.top_10_destinations"}}{{/if}}</h4>\r\n                    <ul>\r\n                        {{#each items}}\r\n                            <li><a href="{{attributes.url}}" class="city">{{attributes.name}}</a></li>\r\n                        {{/each}}\r\n                    </ul>\r\n                </div>\r\n            {{/unless}}\r\n        {{/if}}\r\n        {{#each locations}}\r\n            {{#eachCountry this}}\r\n                {{#eachHotel this}}\r\n                    {{#equal attributes.key \'hong-kong\'}}\r\n                        <li>\r\n                            <a class="waterfall-sub-area-name" style="padding-top: 12px; display: block;">{{local \'countries.HK\'}}</a>\r\n                        </li>\r\n                    {{/equal}}\r\n                    <!--MHS-2706-->\r\n                    {{#equal attributes.key \'taichung\'}}\r\n                        <li>\r\n                            <a class="waterfall-sub-area-name" style="padding-top: 12px; display: block;">{{local \'countries.TW\'}}</a>\r\n                        </li>\r\n                    {{/equal}}\r\n                    {{#isCity this}}\r\n                        <li><a href="{{attributes.url}}" class="city">{{attributes.name}}</a></li>\r\n                    {{else}}\r\n                        <li><a href="{{attributes.url}}">{{attributes.name}}</a></li>\r\n                    {{/isCity}}\r\n                {{/eachHotel}}\r\n            {{/eachCountry}}\r\n        {{/each}}\r\n    </div>\r\n</div>\r\n'},{}],792:[function(e,t,i){t.exports='<div class="content-title">{{local "general.Countries_and_Regions"}}</div>\r\n{{#if country}}\r\n    <div class="content">\r\n        <div class="contents">\r\n            {{#each country}}\r\n                <div class="row"{{#equal this.key \'taiwan\'}} data-follow="yes"{{/equal}}>\r\n                    {{#equal this.key \'singapore\'}}\r\n                        <h4 class="country" style="padding-bottom: 12px"><a href="{{this.url}}" class="country">{{this.name}}</a></h4>\r\n                    {{/equal}}\r\n                    {{#not-equal this.key \'singapore\'}}\r\n                        <h4 class="country">{{this.name}}</h4>\r\n                    {{/not-equal}}\r\n                    {{#equal this.key \'china\'}}\r\n                        <h6 class="waterfall-sub-area-name">{{local \'hotels.mainland_china\'}}</h6>\r\n                    {{/equal}}\r\n                    <ul>\r\n                    {{#each this.city}}\r\n                        {{#equal this.key \'hong-kong\'}}\r\n                            <li>\r\n                                <a class="waterfall-sub-area-name" style="padding-top: 12px; display: block;">{{local \'countries.HK\'}}</a>\r\n                            </li>\r\n                        {{/equal}}\r\n                        <!--MHS-2706-->\r\n                        {{#equal this.key \'taichung\'}}\r\n                            <li>\r\n                                <a class="waterfall-sub-area-name" style="padding-top: 12px; display: block;">{{local \'countries.TW\'}}</a>\r\n                            </li>\r\n                        {{/equal}}\r\n                        {{#if this.name}}\r\n                            {{#if this.url}}\r\n                                <li><a href="{{this.url}}" class="city">{{this.name}}</a></li>\r\n                            {{/if}}\r\n                        {{/if}}\r\n                        {{#each this.hotel}}\r\n                            {{#if this.name}}\r\n                                {{#if this.url}}\r\n                                    <li><a href="{{this.url}}">{{this.name}}</a></li>\r\n                                {{/if}}\r\n                            {{/if}}\r\n                        {{/each}}\r\n                    {{/each}}\r\n                    </ul>\r\n                </div>\r\n            {{/each}}\r\n        </div>\r\n    </div>\r\n    {{else}}\r\n        <div class="content">\r\n            <div class="contents">\r\n                <p class="tips">{{local "globalsearch.nomatched_title"}}</p>\r\n            </div>\r\n        </div>\r\n{{/if}}';
},{}],791:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js");t.exports=n.Model.extend({url:c.getURL("api","search/destinations"),defaults:{country:""}})},{"../../../../config/host.js":45,backbone:8,underscore:42}],790:[function(e,t,i){function n(e){var t=l.sortBy(e,function(e){return e.get("name")}),i=c(t,"china"),n=c(t,"taiwan");if(i>=0&&n>=0){var a=t.splice(n,1);n>i?t.splice(i+1,0,a[0]):t.splice(i,0,a[0])}return t}function c(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i].get("key")===t)return i;return-1}var l=e("underscore"),a=e("backbone"),o=e("../../../../config/host.js");t.exports=a.Model.extend({url:o.getURL("api","data/locations/top10"),defaults:{showButton:!0},setValue:function(e,t,i){this.set({_locations:e,locations:this.getTopLevel(e),destinations:t,collection:i})},parse:function(e){return{_items:e}},getTopLevel:function(e){var t=e.filter(function(e){return"country"==e.get("level")});return n(t)},initialize:function(){var e=this;this.isForHotels?e.on("change:_items change:destinations",function(){e.get("_items")&&e.get("destinations")&&e.top10()}):e.on("change:_items change:_locations",function(){e.get("_items")&&e.get("_locations")&&e.top10()})},top10:function(){for(var e=this.get("_items"),t=this.isForHotels?this.get("destinations"):this.get("_locations"),i=[],n=0,c=e.length;c>n;n++){var l=t.get(e[n].id||e[n]);l&&(e[n].id&&l.set("baynote",e[n]),i.push(l))}this.set("items",i)}})},{"../../../../config/host.js":45,backbone:8,underscore:42}],789:[function(e,t,i){var n=e("underscore"),c=e("./attraction-card"),l=(e("backbone"),e("backbone.marionette")),a=e("../info-window/model"),o=e("../../ui/readmore/view"),s=e("../../ui/scratchpad-item/view");t.exports=l.ItemView.extend({events:{"click @ui.attractions":"selectAttraction","click @ui.scrollDown":"scrollDown","click @ui.scrollUp":"scrollUp","click @ui.icon":function(e){this.selectHotelContent(e)},"mouseenter @ui.hover":function(e){e.stopPropagation();var t=jQuery(e.currentTarget).data("id"),i=n.findWhere(this.model.get("attractions").models,{id:t});i&&this.options.mapsview.trigger("item:mouseenter",this.__mapsDate(i),!0)},"mouseleave @ui.hover":function(e){e.stopPropagation();var t=jQuery(e.currentTarget).data("id"),i=n.findWhere(this.model.get("attractions").models,{id:t});i&&this.options.mapsview.trigger("item:mouseleave",this.__mapsDate(i),!0)},"mouseenter @ui.hotelx":function(){this.options.mapsview.trigger("item:mouseenter",this.__mapsDate(this.model.get("model")),!0)},"mouseleave @ui.hotelx":function(){this.options.mapsview.trigger("item:mouseleave",this.__mapsDate(this.model.get("model")),!0)},"click @ui.details":function(){this.ifoptions?this.__OptionsClickShow():this.__OptionsClickhide()}},template:Handlebars.compile(e("./template.hbs")),ui:{list:".js-attractions-list",attractions:".js-place",scrollDown:".js-scroll-down",scrollUp:".js-scroll-up",icon:"[data-item='icon']",hotelx:"[data-item='hotelx']",readmore:"[data-component='readmore']",hover:"[data-item='hover']",ul:"[data-item='list']",options:"[data-item='options']",optionsBox:"[data-item='optionsBox']",optionsText:"[data-item='optionsText']",details:"[data-item='show-details']",hotelMsg:"[data-item='hotelMsg']"},getListItemHeight:function(){return this.ui.ul.children().first().height()},selectHotelContent:function(e){var t=jQuery(e.target);t.hasClass("icon-icon_B023")?(t.removeClass("icon-icon_B023"),t.addClass("icon-icon_B024")):(t.removeClass("icon-icon_B024"),t.addClass("icon-icon_B023")),this.ui.hotelx.toggleClass("none")},initialize:function(){var e=this;e.model=new a,e.attractionCardView=new c({el:e.ui.click}),e.model.on("change:model",function(t,i){var i=i||e.model.get("model");i&&i.getAttractions().promise.then(function(){i.attractions.models.length&&e.model.set("attractions",i.attractions),window.hotelBasicInfo&&e.model.set("hotelBasicInfo",window.hotelBasicInfo),e.render()})})},serializeData:function(){return n.extend({isCN:window.isCN},this.model.toJSON())},onRender:function(){var e=this,t=this.model.get("attractions");t&&t.length<=4&&(this.ui.scrollDown.remove(),this.ui.scrollUp.remove(),this.ui.list.css({height:"100%"})),this.ui.readmore.each(function(e,t){o.getInstance(t).collapseContent()}),this.ui.options.length>2&&(this.__OptionsClickhide(),this.ui.details.show()),e.ui.options.length&&e.ui.optionsText.length||(e.ui.optionsBox.hide(),e.ui.hotelMsg.css({width:"100%"}))},__OptionsClickhide:function(){this.ui.options.each(function(e){0!=e&&jQuery(this).hide()}),this.ifoptions=!0,this.ui.details.text(i18n.t("maps.show_details"))},__OptionsClickShow:function(){this.ui.options.each(function(e){jQuery(this).show()}),this.ifoptions=!1,this.ui.details.text(i18n.t("maps.hide_details"))},scrollDown:function(e){e.preventDefault(),this.ui.list.scrollTop(this.ui.list.scrollTop()+this.getListItemHeight())},scrollUp:function(e){e.preventDefault(),this.ui.list.scrollTop(this.ui.list.scrollTop()-this.getListItemHeight())},selectAttraction:function(e){var t=this;e.stopPropagation;var i=void 0;if("A"!==e.target.tagName){for(var n=jQuery(e.target);"undefined"==typeof i&&n.length;)i=n.data("id"),n=n.parent();t.openAttractionCard(i)}},openAttractionCard:function(e){var t=this;t.AttractionCardView=new c({model:t.model.get("attractions").get(e),mapsview:this.options.mapsview}),t.options.mapsview.trigger("item:data:click",t.model.get("attractions").get(e)),t.AttractionCardView.on("close:attraction",function(){t.trigger("close:attraction")}),t.$el.append(t.AttractionCardView.render().el),s.autoCreate(),t.model.set("attraction",t.model.get("attractions").get(e)),t.model.trigger("change:attraction")},addHover:function(e){"Hotels"==e.get("type")?this.__hotelSelect(e):this.attractiosSelect(e)},removeHover:function(){var e=this;e.ui.hover&&e.ui.hover.each(function(){jQuery(this).removeClass("hover")}),e.ui.hotelx.removeClass("hover")},attractiosSelect:function(e){var t=this,i=e.get("id");t.ui.hover&&t.ui.hover.each(function(e){jQuery(this).data("id")==i&&(jQuery(this).addClass("hover"),t.getListItemHeight()*(e+1)>=t.ui.list.height()/t.ui.hover.length*4&&t.ui.list.animate({scrollTop:t.getListItemHeight()*(e+1)},500))})},__hotelSelect:function(e){var t=this;t.ui.hotelx.addClass("hover"),t.ui.list.animate({scrollTop:0},500)},__mapsDate:function(e){return{model:e,position:{lng:e.get("lng"),lat:e.get("lat")}}}})},{"../../ui/readmore/view":2110,"../../ui/scratchpad-item/view":2113,"../info-window/model":783,"./attraction-card":787,"./template.hbs":788,backbone:8,"backbone.marionette":6,underscore:42}],788:[function(e,t,i){t.exports='{{!-- The list of attractions --}}\r\n<div class="c-lengs-map__box js-attractions-list">\r\n    {{#if hotelBasicInfo}}\r\n        <div class="c-lengs-map__box__bar">\r\n            <span class="c-lengs-map__box__bar__title">{{local "maps.find_us"}}</span>\r\n            <span data-item="icon" class="c-lengs-map__box__bar__icon icon-icon_B024"></span>\r\n        </div>\r\n        <div data-item="hotelx" class="c-lengs-map__box__hotelx">\r\n            <p class="c-lengs-map__box__hotelx__head">\r\n                <span class="c-lengs-map__box__hotelx__head__title">\r\n                    {{hotelBasicInfo.hotelname}}\r\n                </span>\r\n                {{#if hotelBasicInfo.googlelink}}\r\n                    {{#unless isCN}}\r\n                        <span class="c-lengs-map__box__hotelx__head__link">\r\n                            <a target="_blank" class="c-lengs-map__place__link"  href="{{hotelBasicInfo.googlelink}}">{{local "maps.get_directions"}}</a>\r\n                        </span>\r\n                    {{/unless}}\r\n                {{/if}}\r\n            </p>\r\n            <div  data-item="hotelMsg" class="c-lengs-map__box__hotelx__left">\r\n                {{#if hotelBasicInfo.hoteladdress}}\r\n                    <p class="c-lengs-map__box__hotelx__left__content">\r\n                    <span class="c-lengs-map__box__hotelx__left__content__icon icon-icon_H001"></span>\r\n                    <span class="c-lengs-map__box__hotelx__left__content__title">\r\n                        {{hotelBasicInfo.hoteladdress}}\r\n                    </span>\r\n                </p>\r\n                {{/if}}\r\n                {{#if hotelBasicInfo.hoteltelphone}}\r\n                    <p  class="c-lengs-map__box__hotelx__left__content">\r\n                    <span class="c-lengs-map__box__hotelx__left__content__icon icon-icon_H002"></span>\r\n                    <span class="c-lengs-map__box__hotelx__left__content__title" >\r\n                        <a class="c-lengs-map__box__hotelx__left__content__title__color" href="tel:{{hotelBasicInfo.hoteltelphone}}">{{hotelBasicInfo.hoteltelphone}}</a>\r\n                    </span>\r\n                </p>\r\n                {{/if}}\r\n                {{#if hotelBasicInfo.hotelemail}}\r\n                    <p class="c-lengs-map__box__hotelx__left__content">\r\n                    <span class="c-lengs-map__box__hotelx__left__content__icon icon-icon_H003">\r\n\r\n                    </span>\r\n                    <span class="c-lengs-map__box__hotelx__left__content__title">\r\n                        <a class="c-lengs-map__place__link c-lengs-map__box__hotelx__left__content__title__link" href="mailto:{{hotelBasicInfo.hotelemail}}">{{hotelBasicInfo.hotelemail}}</a>\r\n                    </span>\r\n                </p>\r\n                {{/if}}\r\n            </div>\r\n            <div class="c-lengs-map__box__hotelx__right" data-item="optionsBox">\r\n                <p class="c-lengs-map__box__hotelx__right__content">{{local "maps.local_travel_options"}}</p>\r\n                {{#if hotelBasicInfo.localtraveloptions}}\r\n                    {{#each hotelBasicInfo.localtraveloptions}}\r\n                        <div data-item="options" class="c-lengs-map__box__hotelx__right__box">\r\n                            {{#if stationname}}\r\n                                <p data-item="optionsText" class="c-lengs-map__box__hotelx__right__box__p">\r\n                                    <span class="c-lengs-map__box__hotelx__right__box__p__icon icon-icon_{{iconindex}}"></span>\r\n                                    <span class="c-lengs-map__box__hotelx__right__box__p__title">{{stationname}}</span>\r\n                                </p>\r\n                            {{/if}}\r\n                            {{#if stationdistance}}\r\n                                <span data-item="optionsText" class="c-lengs-map__box__hotelx__right__box__span">{{stationdistance}}</span>\r\n                            {{/if}}\r\n                            {{#if stationdetail}}\r\n                                <span data-item="optionsText" class="c-lengs-map__box__hotelx__right__box__span">{{stationdetail}}</span>\r\n                            {{/if}}\r\n                         </div>\r\n                    {{/each}}\r\n                {{/if}}\r\n                <div data-item="show-details" class="c-lengs-map__place__link c-lengs-map__box__hotelx__right__link">\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    {{/if}}\r\n    <div class="c-lengs-map__box__bar">\r\n        <span class="c-lengs-map__box__bar__title">{{local "maps.area_summary"}}</span>\r\n    </div>\r\n    <ul data-item="list" class="c-lengs-map__list">\r\n        {{#each attractions.models}}\r\n            <li data-item="hover" class="c-lengs-map__place js-place" data-id="{{attributes.id}}">\r\n\r\n                <div class="c-lengs-map__place__contentx">\r\n                    <!--<span class="c-lengs-map__place__type c-lengs-map__place__type--{{attributes.type}}">{{attributes.type}}</span>-->\r\n                    <h3 class="c-lengs-map__place__name">{{attributes.name}}</h3>\r\n                    <p class="c-lengs-map__place__text">\r\n                        <!--<span data-component="readmore">{{{attributes.description}}}</span>-->\r\n                    <span data-component="readmore" data-maxline="2" data-respondtoresize="false" data-removehandlerwhendestoryed="true">\r\n                        <span class="readmore__content">{{attributes.description}}</span>\r\n                    </span>\r\n                    </p>\r\n                    <a class="c-lengs-map__place__link" href="{{attributes.url}}">{{local \'general.more_info\'}} <span class="c-lengs-map__place__link__icon"></span></a>\r\n                </div>\r\n\r\n            </li>\r\n        {{/each}}\r\n\r\n    </ul>\r\n</div>\r\n{{!-- The controls for scrolling the list --}}\r\n<div class="c-lengs-map__panel__controls">\r\n\r\n    <button class="c-lengs-map__control c-lengs-map__panel__control js-scroll-up" type="button">\r\n        <i class="icon-icon_chervonUp c-icon"></i>\r\n    </button>\r\n    <button class="c-lengs-map__control c-lengs-map__panel__control js-scroll-down" type="button">\r\n        <i class="icon-icon_chervonDown c-icon"></i>\r\n    </button>\r\n\r\n</div>\r\n<div data-item="click-attraction"></div>'},{}],787:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("backbone.marionette"),l=(e("../info-window/model"),e("../../ui/scratchpad-item/view"));t.exports=c.ItemView.extend({events:{"click @ui.closeButton":"closeAttractionCard"},template:Handlebars.compile(e("./attraction-card.hbs")),ui:{closeButton:".js-close-button"},closeAttractionCard:function(e){e.stopPropagation,this.trigger("close:attraction"),this.options.mapsview.trigger("item:data:click",null),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),n.View.prototype.remove.call(this)},onRender:function(){l.autoCreate()}})},{"../../ui/scratchpad-item/view":2113,"../info-window/model":783,"./attraction-card.hbs":786,backbone:8,"backbone.marionette":6,underscore:42}],786:[function(e,t,i){t.exports='<div class="c-lengs-attraction-card">\r\n\r\n    {{!-- Attraction image --}}\r\n    <div class="c-lengs-attraction-card__image" style="background-image: url(\'{{infoimages.[1]}}\');"></div>\r\n\r\n    {{!-- Attraction content --}}\r\n    <div class="c-lengs-attraction-card__content">\r\n\r\n        {{!-- Attraction name + add to favourites button --}}\r\n        <h4 class="c-lengs-attraction-card__title">{{name}}\r\n\r\n            <a class="scratchpad wgt-scratchpad-off c-lengs-module__add-to-favourites" data-component="scratchpad"\r\n               data-type="{{type}}" data-id="{{id}}"\r\n               data-content="{{content}}" data-title="{{name}}"\r\n               data-url="{{url}}">\r\n                <span class="icon-icon_B013"></span>\r\n            </a>\r\n\r\n        </h4>\r\n\r\n        {{!-- Attraction description --}}\r\n        <p class="c-lengs-attraction-card__description">\r\n            {{description}}\r\n        </p>\r\n\r\n    </div>\r\n\r\n    {{!-- Close button, for returning to the list of attractions --}}\r\n    <button class="c-lengs-attraction-card__close-button js-close-button" type="button">\r\n        <i class="c-icon icon-icon_B017"></i>\r\n    </button>\r\n\r\n</div>'},{}],785:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("./model"),l=e("../../ui/carousel/view"),a=e("../../ui/carousel-more/view"),o=e("../../ui/scratchpad-item/view"),s=e("../models/destination-model"),r=(e("../models/attraction-model"),e("../../ui/util")),g=e("../../booking-2.1/common/drag");Handlebars.registerHelper("buildScore",function(e){var t="";switch(parseInt(e.score_flag,10)){case 0:t=[e.score,i18n.t("maps.would_book_with_us_again"),'<a target="_blank" href="'+e.score_url+'">'+i18n.t("maps.see_reviews")+"</a>"].join(" ");break;case 1:t=[e.score,e.reviewmessage,'<a target="_blank" href="'+e.score_url+'">'+i18n.t("maps.see_reviews")+"</a>"].join(" ");break;case 2:t=[e.score+"/10",e.reviewmessage,'<a target="_blank" href="'+e.score_url+'">'+i18n.t("maps.see_reviews")+"</a>"].join(" ");break;case 3:t=['<span class="icon-icon_E009"></span>',e.reviewmessage].join(" ")}return t});t.exports=n.ItemView.extend({className:"destination-info-window",template:Handlebars.compile(e("./template.hbs")),events:{"click li[data-drawer-index] a.wgt-corner-close":function(){switch(+this.displayIndex){case 0:this.model.set("_attractions",null),this.model.set("_attraction",null),this.model.set("_tours",null),this.model.set("_tour",null),this.model.set("model",null);break;case 1:this.model.set("_attraction",null);break;case 2:this.model.set("_tour",null)}},"click li[data-drawer-index] div.collapsestrip":function(e){var t=+jQuery(e.currentTarget).closest("li").attr("data-drawer-index");this.displayIndex!=t?this.displayIndex=t:this.displayIndex=0,this.switchDrawer();var i=jQuery(this.content[this.displayIndex]),n=i.closest("li").find(".scroll-toolbar");i.height()&&i.height()<i.children().height()?this.onScrollChildren(i):n.hide()},"click li[data-drawer-index='1'] .image-list-block .image-list li":function(e){var t=this.model.get("_attractions").get(jQuery(e.currentTarget).attr("data-id"));this.model.set("_attraction",t),this.trigger("attraction:selected",t)},"click li[data-drawer-index='2'] .image-list-block .image-list li":function(e){for(var t=jQuery(e.currentTarget).attr("data-id"),i=this.model.get("_tours"),n=0,c=i.length;c>n;n++)if(i[n].code==t){this.model.set("_tour",i[n]);break}},"click li[data-drawer-index='1'] a[data-nearest-hotel]":function(){var e=this.model.get("_attraction");if(e){var t=this.findLately(e,e.destination.location.destinations);t==this.model.get("model")?this.model.trigger("change:model"):this.model.set("model",t)}}},displayIndex:0,ui:{drawer:"li[data-drawer-index]",slider:".scroll-slider",scrollWrap:".scroll-wrap-x",scrollContent:".scroll-content"},initialize:function(e){var t=this;t.model=new c,e.lengs||(t.model.on("change:_attraction",function(){t.render()}),t.model.on("change:_tour",function(){t.render()}),t.model.on("change:model",function(e,i){var i=i||t.model.get("model");t.displayIndex=0,t.model.set("_showMore",!1),t.model.set("_attractions",null),t.model.set("_attraction",null),t.model.set("_tours",null),t.model.set("_tour",null),i instanceof s&&(i.getAttractions().promise.then(function(){i.attractions.models.length&&t.model.set("_attractions",i.attractions),t.render()}),i.getOtherInfo().promise.then(function(){t.model.set("_otherinfo",i.otherinfo),i.otherinfo.get("disablediccount")&&i.getHeart().promise.then(function(){t.model.set("_heart",i.heart),t.render()}),t.render()}),i.getTours().promise.then(function(){var e=i.tours.get("items")||[];e.length&&t.model.set("_tours",e.slice(0,10)),e.length>=10&&t.model.set("_showMore",!0),t.render()})),i?(r.modal.acquire(this),t.$el.show(),t.render()):(r.modal.release(this),t.trigger("close"),t.$el.hide())}),r.tracker.on("change:mobile",function(){t.render()}),t.$el.addClass(this.className),"ar-SA"===r.getCookie("website#lang")&&t.model.set("rightAlign",!0))},selectAttraction:function(e){var t=this;e&&(t.model.set("model",e.destination),t.displayIndex=1,t.model.set("_attraction",e))},onRender:function(){var e=this;this.content=this.$el.find(".scroll-content"),a.autoCreate(),l.autoCreate(),o.autoCreate(),this.switchDrawer(),this.trimDescription(),jQuery('<div class="scroll-toolbar"><div class="scroll-slider"></div></div>').appendTo(jQuery(this.el).find("li").eq(0).children(".scroll-wrap-x"));var t=jQuery(this.content[0]);t.height()&&t.height()<t.children().height()?this.onScrollChildren(t):t.closest("li").find(".scroll-toolbar").hide(),this._resizeHandler&&jQuery(window).off("resize",this._resizeHandler),jQuery(window).on("resize",this._resizeHandler=function(){t.height()&&t.height()<t.children().height()?e.onScrollChildren(t):t.closest("li").find(".scroll-toolbar").hide()}),this.__attachDragEvent(t.closest("li").find(".scroll-toolbar").find(".scroll-slider")),this.__attachDragEvent(this.ui.slider),this.onScroll(this.content)},onDestroy:function(){this._resizeHandler&&jQuery(window).off("resize",this._resizeHandler)},__attachDragEvent:function(e){g(e,{lockX:!0,move:function(){var e=jQuery(this),t=e.parent(),i=t.prev(".scroll-content"),n=parseFloat(e.css("marginTop")),c=e.prop("clientHeight"),l=t.prop("clientHeight");l>c&&i.prop("scrollTop",n/(l-c)*(i.prop("scrollHeight")-i.prop("clientHeight")))}})},onScroll:function(e){var t=this;t.content.bind(function(e){t.onScrollChildren(jQuery(e.currentTarget))})},onScrollChildren:function(e){var t=e.parent(".scroll-wrap-x");t.addClass("nano").css("height",650),e.addClass("nano-content"),t.nanoScroller({destroy:!0}),t.nanoScroller({alwaysVisible:!0})},switchDrawer:function(){var e=this;e.ui.drawer.each(function(){var t=jQuery(this);t.attr("data-drawer-index")==e.displayIndex?t.attr("class","show"):t.attr("class","hide")})},totalHeight:function(e){var t=0;return e.each(function(){t+=this.scrollHeight}),t},trim:function(e){if(e.addClass("trim"),e.length){var t=!1,i=e.get(0),n=e.text(),c=n;if(i.clientHeight>0)for(;i.scrollHeight>i.clientHeight;)e.html(c=c.replace(/(\s)*([a-zA-Z0-9\-]+|\W)$/,"")),t=!0;if(t){for(var l=Math.max(0,c.length-22);c.length>l;)c=c.replace(/(\s)*([a-zA-Z0-9\-]+|\W)$/,"");e.html(c+"...<a class='info-window-detail-more'>"+i18n.t("maps.more_details")+"</a>"),e.on("click",".info-window-detail-more",function(){e.removeClass("trim"),e.html(n+"<a class='info-window-detail-less'>"+i18n.t("maps.less_details")+"</a>")}),e.on("click",".info-window-detail-less",function(){e.addClass("trim"),e.html(c+"...<a class='info-window-detail-more'>"+i18n.t("maps.more_details")+"</a>")})}else e.removeClass("trim"),e.html(n)}},trimDescription:function(){var e=this.$el.find("p[data-trim-description]"),t=this;e.each(function(){var e=jQuery(this);e.is(":visible")&&t.trim(e)})},findLately:function(e,t){if(t.length>0){for(var i=0,n=this.away(e.attributes,t[0].attributes),c=1;c<t.length;c++){var l=this.away(e.attributes,t[c].attributes);n>l&&(n=l,i=c)}return t[i]}return this.model.get("model")},away:function(e,t){return Math.sqrt(Math.pow(e.lng-t.lng,2)+Math.pow(e.lat-t.lat,2))}})},{"../../booking-2.1/common/drag":346,"../../ui/carousel-more/view":2053,"../../ui/carousel/view":2057,"../../ui/scratchpad-item/view":2113,"../../ui/util":2122,"../models/attraction-model":811,"../models/destination-model":817,"./model":783,"./template.hbs":784,"backbone.marionette":6,underscore:42}],2053:[function(e,t,i){var n=e("../autocreator");t.exports=n.extend().extend({template:!1,className:"tpl-map-carousel",ui:{list:"ul"},swipeleft:function(){this.ui.list.append(this.ui.list.children().first())},swiperight:function(){this.ui.list.prepend(this.ui.list.children().last())},onRender:function(){this.$("a.tpl-carousel-button")[this.ui.list.length>3?"show":"hide"]()},events:{"click a.carousel-left":"swipeleft","click a.carousel-right":"swiperight"},initialize:function(){var e=this;n.prototype.initialize.apply(this,arguments),e.$el.addClass(e.className),e.$el.hammer({touchAction:"pan-y"}).on("swipeleft swiperight",function(t){e[t.type]()}),e.$("a.carousel-left").length||e.$el.prepend('<a class="wgt-carousel-buttonleft  tpl-carousel-button carousel-left"></a>'),e.$("a.carousel-right").length||e.$el.append('<a class="wgt-carousel-buttonright tpl-carousel-button carousel-right"></a>')}},{selector:'[data-component="carousel-more"]'})},{"../autocreator":2052}],784:[function(e,t,i){t.exports='<!--<a href="#map" class="wgt-sqbutton-close wgt-textbtn close clearfix">-->\r\n    <!--<span>{{local "maps.close"}}</span>-->\r\n    <!--<label class="symbol">x</label>-->\r\n<!--</a>-->\r\n<div class="info-window-scroll">\r\n    <ul class="{{#if rightAlign}}rightAlign{{/if}}">\r\n        <!--hotel card-->\r\n        <li data-drawer-index="0" class="show">\r\n            <div class="collapsestrip">\r\n                <p class="name">{{model.attributes.name}}</p>\r\n                <!--<a class="wgt-expand-icon" style="display: none"><span class="icon-icon_expand"></span></a>-->\r\n                <a data-drawer-toggle="open" class="back"><span class="icon-icon_expand"></span></a>\r\n            </div>\r\n            <div class="scroll-wrap-x">\r\n                <div class="scroll-content">\r\n                    <div class="scroll-content-inner">\r\n                        <div>\r\n                            <a class="wgt-corner-close"><span class="icon-icon_B017"></span></a>\r\n                        <a target="_blank" rel="noopener noreferrer" class="" href="{{model.attributes.url}}">\r\n                            <div class="infoimages" data-component="carousel" data-hasrlbutton="0" data-hasindexbutton="0">\r\n                              {{#each model.attributes.infoimages}}<img class="tpl-hero-slider" alt="" src="{{this}}"/>{{/each}}\r\n                                    <!--{{#if _otherinfo.attributes.disablediccount}}-->\r\n                                    <!--&lt;!&ndash; look the hotel people number now. &ndash;&gt;-->\r\n                                    <!--<label class="img-label">{{_heart.attributes.count}} {{local "Property.people"}} {{local "Property.currently_view"}}</label>-->\r\n                                <!--{{else}}-->\r\n                                    <!--<label class="img-label">{{local "maps.discount_available"}}</label>-->\r\n                                <!--{{/if}}-->\r\n                                <!--{{#if _otherinfo.attributes.disccount}}-->\r\n                                    <!--<label class="img-label">{{local "maps.discount_available" _otherinfo.attributes.disccount}}</label>-->\r\n                                <!--{{/if}}-->\r\n                                <!--MHRUAT-1189-->\r\n                                {{#if model.attributes.badgetitle}}\r\n                                    <label class="img-label">{{model.attributes.badgetitle}}</label>\r\n                                {{/if}}\r\n                            </div>\r\n                        </a>\r\n                            <div class="info-detail">\r\n                                {{#if _isPropertyHotel}}\r\n                                    <!--property page hotel detail-->\r\n                                    <div class="property-hotel">\r\n                                        <div class="info-content">\r\n                                            <!--<a class="scratchpad wgt-scratchpad-off" data-component="scratchpad" data-type="{{model.attributes.type}}" data-id="{{model.id}}" data-content="{{model.attributes.content}}" data-title="{{model.attributes.name}}" data-url="{{model.attributes.url}}">-->\r\n                                                <!--<span class="icon-icon_B013"></span>-->\r\n                                            <!--</a>-->\r\n                                            <a href="{{model.attributes.url}}" target="_blank" rel="noopener noreferrer" class="hotel-name title"> {{model.attributes.name}} </a>\r\n                                            <div class="property-detail">\r\n                                                <div>\r\n                                                    <h6 class="item-name">{{local "maps.address"}}</h6>\r\n                                                    <p class="item-address">{{model.attributes.address}}</p>\r\n                                                    <p><span class="blue">{{local "maps.tel"}} </span><span style="direction: ltr">{{model.attributes.telphone}}<span></p>\r\n                                                </div>\r\n                                                {{#if model.attributes.nearbytransport.length}}\r\n                                                    <div>\r\n                                                        <h6 class="item-name">{{local "maps.nearby_transportation"}}</h6>\r\n                                                        <ul>\r\n                                                            {{#each model.attributes.nearbytransport}}\r\n                                                                <li>{{Key}} <span class="blue">{{Value}}</span></li>\r\n                                                            {{/each}}\r\n                                                        </ul>\r\n                                                    </div>\r\n                                                {{/if}}\r\n                                                {{#if model.attributes.distancetolocation.length}}\r\n                                                    <div>\r\n                                                        <h6 class="item-name">{{local "maps.distance_to_common_locations"}}</h6>\r\n                                                        <ul>\r\n                                                            {{#each model.attributes.distancetolocation}}\r\n                                                                <li>{{Key}} <span class="blue">{{Value}}</span></li>\r\n                                                            {{/each}}\r\n                                                            \r\n                                                        </ul>\r\n                                                    </div>\r\n                                                {{/if}}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                {{else}}\r\n                                    <!--map hotel detail-->\r\n                                    <div class="map-hotel">\r\n                                        <div class="info-content">\r\n                                            <!--<a class="scratchpad wgt-scratchpad-off" data-component="scratchpad" data-type="{{model.attributes.type}}" data-id="{{model.id}}" data-content="{{model.attributes.content}}" data-title="{{model.attributes.name}}" data-url="{{model.attributes.url}}">-->\r\n                                                <!--<span class="icon-icon_B013"></span>-->\r\n                                            <!--</a>-->\r\n                                            <div class="hotel-name title">{{model.attributes.name}} <a class="wgt-link-triangle" href="{{model.attributes.url}}" target="_blank" rel="noopener noreferrer" ><span>{{ local "Collections.Visit_Hotel" }}</span></a></div>\r\n                                            <!--<p class="description" data-trim-description> {{model.attributes.description}} </p>-->\r\n                                            <!---->\r\n                                            {{#if _otherinfo}}\r\n                                                {{#if _otherinfo.attributes.disableReservation}}\r\n                                                {{else}}\r\n                                                    <div class="middle-content">\r\n                                                        <div class="tpl-hero-price-offer">\r\n                                                            {{#if _otherinfo.attributes._hasPrice}}\r\n                                                                <div class="tpl-price-offer">\r\n                                                                    <p>{{local "maps.from"}}</p>\r\n                                                                    <p class="tpl-price-nosale">\r\n                                                                        <label>{{_otherinfo.attributes.startprice}}</label><span>{{local "maps.per_night"}}</span>\r\n                                                                    </p>\r\n                                                                </div>\r\n                                                            {{/if}}\r\n                                                        </div>\r\n                                                        <div class="clearfix booking-buttons">\r\n                                                            {{#if model.attributes.url}}\r\n                                                                {{#equal model.attributes.type \'Attractions\'}}\r\n                                                                    <!-- <a target="_blank" href="{{model.attributes.url}}" class="attractions book-now wgt-sqbutton-white"> {{local "maps.more_info"}}</a> -->\r\n                                                                {{else}}\r\n                                                                    <!--<a href="{{model.attributes.url}}" class="hotel hotel-detail wgt-sqbutton-white">{{local "maps.hotel_details"}}</a>-->\r\n                                                                    {{#if _otherinfo}}\r\n                                                                        {{#if _otherinfo.attributes.disableReservation}}\r\n                                                                        {{else}}\r\n                                                                            <a href="{{model.attributes.bookingflowurl}}" class="hotel book-now wgt-sqbutton-white">{{local "maps.book_now"}}</a>\r\n                                                                        {{/if}}\r\n                                                                    {{/if}}\r\n                                                                {{/equal}}\r\n                                                            {{/if}}\r\n                                                            {{#if model.attributes.citybookingurl}}\r\n                                                                {{#if model.attributes.cityname}}\r\n                                                                    <div class="nk2-hotels-window-explore-paris">\r\n                                                                        <a href="{{model.attributes.citybookingurl}}">{{ local "general.explore" }} {{ model.attributes.cityname }}</a>\r\n                                                                    </div>\r\n                                                                {{/if}}\r\n                                                            {{/if}}\r\n                                                        </div>\r\n                                                        <div class="rating">{{{buildScore _otherinfo.attributes}}}</div>\r\n                                                    </div>\r\n                                                {{/if}}\r\n                                            {{/if}}\r\n                                        </div>\r\n                                    </div>\r\n                                {{/if}}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </li>\r\n\r\n        <!--Nearby Attraction-->\r\n        <li data-drawer-index="1" class="hide">\r\n            <div class="collapsestrip">\r\n                <p class="name">{{local "maps.nearby_attractions"}}</p>\r\n                <a data-drawer-toggle="open" class="wgt-expand-icon"><span class="icon-icon_expand"></span></a>\r\n                <a data-drawer-toggle="shut" class="wgt-expand-icon"><span class="icon-icon_collapse"></span></a>\r\n            </div>\r\n            <div class="scroll-wrap-x">\r\n                <div class="scroll-content">\r\n                    <div class="scroll-content-inner">\r\n                        {{#if _attraction}}\r\n                            <div>\r\n                                <div class="infoimages" data-component="carousel" data-hasrlbutton="0" data-hasindexbutton="true">\r\n                                    <a class="wgt-corner-close"><span class="icon-icon_B017"></span></a>\r\n                                    {{#each _attraction.attributes.infoimages}} <img class="tpl-hero-slider" alt="" src="{{this}}"/> {{/each}}\r\n                                </div>\r\n                                <div class="info-detail">\r\n                                    <div class="info-content">\r\n                                        <!--<a class="scratchpad wgt-scratchpad-off" data-component="scratchpad" data-type="{{_attraction.attributes.type}}" data-id="{{_attraction.id}}" data-content="{{_attraction.attributes.content}}" data-title="{{_attraction.attributes.name}}" data-url="{{_attraction.attributes.url}}">-->\r\n                                            <!--<span class="icon-icon_B013"></span>-->\r\n                                        <!--</a>-->\r\n                                        <h6 class="title">{{_attraction.attributes.name}}</h6>\r\n                                        <p class="description">{{_attraction.attributes.description}}</p>\r\n                                        <div><a data-nearest-hotel class="link" href="javascript:void(0);">{{local "maps.view_nearest_hotel"}}</a></div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        {{else}}\r\n                            <div class="image-list-block">\r\n                                {{#if _attractions}}\r\n                                    <ul class="image-list">\r\n                                        {{#each _attractions.models}}\r\n                                            <li data-id="{{attributes.id}}">\r\n                                                <div class="img-container" style="background-image: url(\'{{attributes.thumbnailimage}}\')">\r\n                                                    <a class="wgt-expand-icon"><span class="icon-icon_expand"></span></a>\r\n                                                </div>\r\n                                                <p class="description">{{attributes.name}}</p>\r\n                                            </li>\r\n                                        {{/each}}\r\n                                    </ul>\r\n                                {{else}}\r\n                                    <div class="error-tip">\r\n                                        <!--<p>Sorry, we ae unable to load attractions at this moment.</p>-->\r\n                                        <!--<p>Please try again later.</p>-->\r\n                                        <p>{{local "maps.unable_to_load_attractions"}}</p>\r\n                                        <p>{{local "maps.unable_to_load_attractions_try_again"}}</p>\r\n                                    </div>\r\n                                {{/if}}\r\n                            </div>\r\n                        {{/if}}\r\n                    </div>\r\n                </div>\r\n                <!--<div class="scroll-toolbar">-->\r\n                    <!--<div class="scroll-slider"></div>-->\r\n                <!--</div>-->\r\n            </div>\r\n        </li>\r\n\r\n        <!--Tour List-->\r\n        <!--<li data-drawer-index="2" class="hide">-->\r\n            <!--<div class="collapsestrip">-->\r\n                <!--<p class="name">{{local "maps.nearby_tours"}}</p>-->\r\n                <!--<a data-drawer-toggle="open" class="wgt-expand-icon"><span class="icon-icon_expand"></span></a>-->\r\n                <!--<a data-drawer-toggle="shut" class="wgt-expand-icon"><span class="icon-icon_collapse"></span></a>-->\r\n            <!--</div>-->\r\n\r\n            <!--<div class="scroll-wrap-x">-->\r\n                <!--<div class="scroll-content">-->\r\n                    <!--<div class="scroll-content-inner">-->\r\n                        <!--{{#if _tour}}-->\r\n                            <!--&lt;!&ndash;detail&ndash;&gt;-->\r\n                            <!--<div>-->\r\n                                <!--<div class="infoimages" data-component="carousel" data-hasrlbutton="0" data-hasindexbutton="true">-->\r\n                                    <!--<a class="wgt-corner-close"><span class="icon-icon_B017"></span></a>-->\r\n                                    <!--<img class="tpl-hero-slider" src="{{_tour.image_big}}"/>-->\r\n                                <!--</div>-->\r\n                                <!--<div class="info-detail">-->\r\n                                    <!--<div class="info-content">-->\r\n                                        <!--<a class="scratchpad wgt-scratchpad-off" data-component="scratchpad" data-type="Shop" data-id="{{_tour.destination}}-{{_tour.code}}" data-content="{{_tour.code}}" data-title="{{_tour.title}}" data-url="{{_tour.url}}">-->\r\n                                            <!--<span class="icon-icon_B013"></span>-->\r\n                                        <!--</a>-->\r\n                                        <!--<h6 class="title"> {{{_tour.title}}} </h6>-->\r\n                                        <!--<div class="info-win-stars">-->\r\n                                            <!--<div class="info-win-stars-back"><span class="icon-icon_E007"></span><span class="icon-icon_E007"></span><span class="icon-icon_E007"></span><span class="icon-icon_E007"></span><span class="icon-icon_E007"></span></div>-->\r\n                                            <!--<div class="info-win-stars-fore" style="width: {{_tour.rating}}em;"><span class="icon-icon_E006"></span><span class="icon-icon_E006"></span><span class="icon-icon_E006"></span><span class="icon-icon_E006"></span><span class="icon-icon_E006"></span></div>-->\r\n                                            <!--<div class="info-win-stars-href"><a target="_blank" href="{{_tour.url}}">{{local "maps.see_reviews"}}</a></div>-->\r\n                                        <!--</div>-->\r\n                                        <!--&lt;!&ndash;<div class="rating-block">&ndash;&gt;-->\r\n                                            <!--&lt;!&ndash;<div class="stars"><span class="icon-icon_E006"></span><span class="icon-icon_E006"></span><span class="icon-icon_E006"></span><span class="icon-icon_E007"></span><span class="icon-icon_E007"></span></div>&ndash;&gt;-->\r\n                                            <!--&lt;!&ndash;<a href="{{_tour.url}}">See Reviews</a>&ndash;&gt;-->\r\n                                        <!--&lt;!&ndash;</div>&ndash;&gt;-->\r\n                                        <!--<p class="description" data-trim-description>{{_tour.description}}</p>-->\r\n                                        <!--&lt;!&ndash;<a>More Details</a>&ndash;&gt;-->\r\n                                    <!--</div>-->\r\n                                    <!--<div class="tour-bottom">-->\r\n                                        <!--<div class="tpl-hero-price-offer">-->\r\n                                            <!--<div class="tpl-price-offer">-->\r\n                                                <!--<p>{{local "maps.from"}}</p>-->\r\n                                                <!--<p class="tpl-price-nosale">-->\r\n                                                    <!--<label>{{_tour.currency_code}}{{_tour.price_formatted_comma}}</label>-->\r\n                                                    <!--<span>{{local "maps.per_night"}}</span>-->\r\n                                                <!--</p>-->\r\n                                            <!--</div>-->\r\n                                        <!--</div>-->\r\n                                        <!--<a href="{{_tour.url}}" class="hotel book-now wgt-sqbutton-white">{{local "maps.book_now"}}</a>-->\r\n                                    <!--</div>-->\r\n                                <!--</div>-->\r\n                            <!--</div>-->\r\n                        <!--{{else}}-->\r\n                            <!--&lt;!&ndash;list&ndash;&gt;-->\r\n                            <!--<div class="image-list-block">-->\r\n                                <!--{{#if _tours}}-->\r\n                                    <!--<ul class="image-list">-->\r\n                                        <!--{{#each _tours}}-->\r\n                                            <!--<li data-id="{{code}}">-->\r\n                                                <!--<div class="img-container" style="background-image: url(\'{{image_small}}\')">-->\r\n                                                    <!--<a class="wgt-expand-icon"><span class="icon-icon_expand"></span></a>-->\r\n                                                <!--</div>-->\r\n                                                <!--<p class="description">{{title}}</p>-->\r\n                                            <!--</li>-->\r\n                                        <!--{{/each}}-->\r\n                                    <!--</ul>-->\r\n                                    <!--{{#if _showMore}}-->\r\n                                        <!--<div class="view-all">-->\r\n                                        <!--<a class="wgt-sqbutton" href="/tours-plus/">{{local "maps.view_all"}}</a>-->\r\n                                        <!--</div>-->\r\n                                    <!--{{/if}}-->\r\n                                <!--{{else}}-->\r\n                                    <!--<div class="error-tip">-->\r\n                                        <!--&lt;!&ndash;<p>Sorry, we ae unable to load tours at this moment.</p>&ndash;&gt;-->\r\n                                        <!--&lt;!&ndash;<p>Please try again later.</p>&ndash;&gt;-->\r\n                                        <!--<p>{{local "maps.unable_to_load_tours"}}</p>-->\r\n                                        <!--<p>{{local "maps.unable_to_load_tours_try_again"}}</p>-->\r\n                                    <!--</div>-->\r\n                                <!--{{/if}}-->\r\n                            <!--</div>-->\r\n                        <!--{{/if}}-->\r\n                    <!--</div>-->\r\n                <!--</div>-->\r\n                <!--<div class="scroll-toolbar">-->\r\n                    <!--<div class="scroll-slider"></div>-->\r\n                <!--</div>-->\r\n            <!--</div>-->\r\n        <!--</li>-->\r\n    </ul>\r\n</div>';
},{}],783:[function(e,t,i){var n=(e("underscore"),e("backbone"));e("../../../../config/host.js"),t.exports=n.Model.extend({defaults:{model:null}})},{"../../../../config/host.js":45,backbone:8,underscore:42}],782:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../../../config/host.js"),a=(e("../../abmb/stateful.js"),e("./model")),o=e("../models/DAO"),s=e("../../ui/util");e("iscroll"),i=t.exports=c.ItemView.extend({className:"destinationsFilter",template:Handlebars.compile(e("./template.hbs")),ui:{nano:".nano"},initialize:function(){this.model=(new a).on("change",function(){this.model.get("results").locationgroups&&(this.model.get("results").locationgroups=n.sortBy(this.model.get("results").locationgroups,function(e){return e.location._name})),this.render()},this)},serializeData:function(){return this.model.toJSON()},onRender:function(){this.$el.addClass(this.className)[this.model.get("displayCollectionsTab")?"addClass":"removeClass"]("collections")[this.model.get("show-map")?"addClass":"removeClass"]("show-map"),this.options.noScroller||s.ismobile()?this.ui.nano.removeClass("nano"):(this.ui.nano.nanoScroller({destroy:!0}),this.ui.nano.nanoScroller({alwaysVisible:!0}))},events:{"click .collections li a":function(e){this.model.addremove("collections",jQuery(e.target).closest("[data-id]").data("id"))},"click .interests li":function(e){this.model.addremove("interests",jQuery(e.target).closest("[data-id]").data("id"))},"click a.back-icon":function(){this.model.back()},"click .show-map a,a.close-button":function(){this.model.set({"show-map":!0})},"click .interests h3":function(){this.model.set({showInterestFilter:!this.model.get("showInterestFilter")})},"click .topButtons a":function(e){this.model.set({displayCollectionsTab:jQuery(e.target).closest("a").hasClass("collections"),"show-map":!1})},"click li.destination >a[data-id]":"getDestination","click li.location >a[data-id]":function(e){this.model.set({location:o.locations.get(jQuery(e.target).data("id"))})},"click .breadcrumb a[data-id]":function(e){var t=o.locations.get(jQuery(e.target).data("id"));this.model.get("location")==t?this.model.trigger("change:location"):this.model.set("location",t)},"click .list-button-block":function(){this.trigger("show:destination-list")}},getDestination:function(e){if("quick-book"==this.options.hreftype){var t=l.getURL(jQuery(e.target).data("href"));t&&(window.location.href=t)}else this.model.set({destination:o.destinations.get(jQuery(e.target).data("id"))})},setNearby:function(e){var t=this.model.get("destination");t&&(t.nearby=[],this.addDes(t),this.sort(t),t._hasNearby=!!t.nearby.length,this.render())},addDes:function(e){var t=o.locations.get(e.get("locationid"));t&&t.destinations&&Array.prototype.push.apply(e.nearby,t.destinations.filter(function(t){return t!=e}))},addAtt:function(e){e.attractions&&Array.prototype.push.apply(e.nearby,e.attractions.models)},sort:function(e){var t=this;e.nearby=n.sortBy(e.nearby,function(i){return t.away(e.attributes,i.attributes)})},away:function(e,t){return Math.sqrt(Math.pow(e.lng-t.lng,2)+Math.pow(e.lat-t.lat,2))}})},{"../../../../config/host.js":45,"../../abmb/stateful.js":72,"../../ui/util":2122,"../models/DAO":809,"./model":780,"./template.hbs":781,backbone:8,"backbone.marionette":6,iscroll:14,underscore:42}],781:[function(e,t,i){t.exports='<!--<div class="topButtons">-->\r\n    <!--<a class="destinations"><span class="icon-icon_N005"></span>{{local "maps.destination"}}</a>-->\r\n    <!--<a class="collections"><span class="icon-icon_A004"></span>{{local "maps.collection"}}</a>-->\r\n<!--</div>-->\r\n\r\n<div class="filterCriteria">\r\n    <div class="collections">\r\n        <h2 class="mobile-only header"> {{local "maps.choose_collection"}}:\r\n            <a class="close-button"> <span class="icon-icon_B017"></span> </a>\r\n        </h2>\r\n        <ul>\r\n            {{#each results.collections}}\r\n            <li class="{{#contains ../collections this}}selected{{/contains}}">\r\n                <span class="icon-icon_{{attributes.iconindex}}"></span>\r\n                <a data-id="{{id}}">{{attributes.name}}</a>\r\n            </li>\r\n            {{/each}}\r\n        </ul>\r\n        <div class="mobile-only show-map"> <a href="#map" class="wgt-sqbutton-white">{{local "maps.see_map"}}</a> </div>\r\n    </div>\r\n\r\n    <div class="scroll-wrap-y nano">\r\n        <div class="scroll-conten nano-content">\r\n            <div class="scroll-content-inner">\r\n                <div class="destinations">\r\n                    <h2 class="mobile-only header"> {{local "maps.choose_destination"}}:\r\n                        <a class="close-button"> <span class="icon-icon_B017"></span> </a>\r\n                    </h2>\r\n                    <!--<div class="interests {{#if showInterestFilter}}expanded{{/if}}">-->\r\n                    <!--<h3>{{local "maps.filter_title"}}:</h3>-->\r\n                    <!--<ul>-->\r\n                        <!--{{#each results.interests}}-->\r\n                    <!--<li class="{{#contains ../interests this}}selected{{/contains}}" data-id="{{id}}">-->\r\n                    <!--<p class="tagname">{{attributes.name}}</p>-->\r\n                    <!--<i class="checkbox {{#contains ../interests this}}checked{{/contains}}"></i>-->\r\n                    <!--</li>-->\r\n                        <!--{{/each}}-->\r\n                    <!--</ul>-->\r\n                    <!--</div>-->\r\n\r\n                    <!--breadcrumb-->\r\n                    {{#if location.parent}}\r\n                        <div class="breadcrumb">\r\n                            {{#if location.parent}}\r\n                                {{#if location.parent.parent}}\r\n                                    <a data-id="{{location.parent.parent.attributes.id}}">{{location.parent.parent.attributes.name}}</a>\r\n                                {{/if}}\r\n                                <a data-id="{{location.parent.attributes.id}}">{{location.parent.attributes.name}}</a>\r\n                            {{/if}}\r\n                            {{#if destination}}\r\n                                <a data-id="{{location.attributes.id}}">{{location.attributes.name}}</a>\r\n                            {{/if}}\r\n                        </div>\r\n                    {{/if}}\r\n                    {{#if destination}}\r\n                        <div class="destination">\r\n                            <!-- collection icon is a little bigger -->\r\n                            <div style="{{#if destination._hasNearby}}{{else}}border:0{{/if}}">\r\n                                <!--<span class="icon-icon_{{destination.collection.attributes.iconindex}} icon-type"></span>-->\r\n                                <a class="destination" href="javascript:void(0);"> {{destination.attributes.name}} </a>\r\n                                <a data-id="{{destination.attributes.id}}" class="back-icon">\r\n                                    <span class="icon-icon_B026"></span>\r\n                                </a>\r\n                            </div>\r\n                            {{#if destination._hasNearby}}\r\n                                <p class="list-tip">{{local "maps.nearby_hotel"}}</p>\r\n                                <ul>\r\n                                    {{#each destination.nearby}}\r\n                                        <li class="destination">\r\n                                            <span class="icon-icon_{{collection.attributes.iconindex}} icon-type"></span>\r\n                                            <a data-id="{{attributes.id}}" data-href="{{destination.quickbookurl}}">{{attributes.name}}</a>\r\n                                        </li>\r\n                                    {{/each}}\r\n                                </ul>\r\n                            {{/if}}\r\n                        </div>\r\n\r\n                    {{else}}{{#if location}}\r\n                        <!-- sub-location\'s : filteredDestinations and sub-locations [ with their filteredDestinations ] -->\r\n                        <div class="location">\r\n                            <div>\r\n                                <a href="javascript:void(0);"><p> {{location.attributes.name}} </p></a>\r\n                                <a data-id="{{location.attributes.id}}" class="back-icon">\r\n                                    <span class="icon-icon_B026 icon-type-back"></span>\r\n                                </a>\r\n                            </div>\r\n                            <ul>\r\n                                <!-- sublocation\'s filteredDestinations -->\r\n                                {{#each results.destinations}}\r\n                                    <li class="destination">\r\n                                        <span class="icon-icon_{{collection.attributes.iconindex}} icon-type"></span>\r\n                                        <a data-id="{{attributes.id}}" data-href="{{attributes.quickbookurl}}">{{attributes.name}}</a>\r\n                                    </li>\r\n                                {{/each}}\r\n\r\n                                <!-- sublocation\'s sublocations (with their filteredDestinations) -->\r\n                                {{#each results.locationgroups}}\r\n                                    <li class="location" data-destination-count="{{destinations.length}}">\r\n                                        <!-- toggle expanded class -->\r\n                                        <!-- data-destination-count=0 -- don\'t show expand arrow -->\r\n                                        <!--<a class="expand-collapse-arrow"></a>-->\r\n                                        <a data-id="{{location.attributes.id}}">{{location.attributes.name}}</a>\r\n                                        <ul>\r\n                                            {{#each destinations}}\r\n                                                <li class="destination" >\r\n                                                    <span class="icon-icon_{{collection.attributes.iconindex}} icon-type"></span>\r\n                                                    <a data-id="{{attributes.id}}">{{attributes.name}}</a>\r\n                                                </li>\r\n                                            {{/each}}\r\n                                        </ul>\r\n                                    </li>\r\n                                {{/each}}\r\n                            </ul>\r\n                        </div>\r\n\r\n                    {{else}}\r\n                        <! -- high level locations (ie: continents) with no parent location  -->\r\n                        <ul class="locations">\r\n                            {{#each results.locations}}\r\n                                <li class="location"> <a data-id="{{id}}"> {{attributes.name}} </a> </li>\r\n                            {{/each}}\r\n                        </ul>\r\n                    {{/if}}{{/if}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</div>\r\n\r\n<!--destination list button-->\r\n<div class="list-button-block">\r\n    <!--<a class="list-button desktop" href="#DestinationList"><span class="icon-icon_burger"></span><span>{{local "maps.view_destination_list"}}</span></a>-->\r\n    <a class="list-button mobile" href="#map-wrapper"><span class="icon-icon_burger"></span><span>{{local "maps.view_destination_list"}}</span></a>\r\n</div>'},{}],780:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../models/DAO"),l=e("../../ui/util");t.exports=n.Model.extend({back:function(){this.set({destination:null,location:this.get("destination")&&this.get("destination").location||this.get("location")&&this.get("location").parent})},addremove:function(e,t){this.set(e,l.addremove(this.get(e),c[e].get(t)))},reset:function(){this.set({"show-map":l.ismobile(),showInterestFilter:!1,displayCollectionsTab:!1,interests:[],collections:[],location:null,destination:null,attraction:null,results:{locations:[],locationgroups:[],destinations:[],interests:[],collections:[]}})},initialize:function(){var e=this;this.on("change:location",function(){e.set({destination:null})}).on("change:destination",function(){e.set({attraction:null})}).on("change:destination change:location change:collections change:interests",function(){var t=e.get("destination"),i=e.get("location"),n=e.get("collections"),l=e.get("interests"),a=c.filter(c.locations.getApplicable({destination:t,location:i}),{collections:n,interests:l,destination:t,destinations:c.destinations.models});e.set({results:{locations:a,destinations:c.filter(i&&i.destinations||t&&[t]||[],{collections:n,interests:l,location:i,destination:t}),interests:c.filter(c.interests.models,{destination:t,location:i,collections:n,destinations:c.destinations.models}),collections:c.filter(c.collections.models,{destination:t,location:i,interests:l,destinations:c.destinations.models}),locationgroups:a.map(function(e){return{location:e,alldestinations:c.filter(e.alldestinations,{collections:n,interests:l}),destinations:c.filter(e.destinations,{collections:n,interests:l})}})}})})}})},{"../../ui/util":2122,"../models/DAO":809,backbone:8,underscore:42}],779:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("backbone");e("../../../../assets/lib/jquery.hammer.js"),t.exports=n.ItemView.extend({className:"destination-carousel",template:Handlebars.compile(e("./template.hbs")),moveLeft:function(){var e=this.$("li:first-of-type");e.appendTo(e.parent())},moveRight:function(){var e=this.$("li:last-of-type");e.prependTo(e.parent())},events:{"click a.left":"moveLeft","click a.right":"moveRight","click a.view-rooms":function(e){this.trigger("click:destination",this.model.get("location").destinations[jQuery(e.target).closest("li[data-idx]").data("idx")])}},initialize:function(e){var t=this;t.model=(new c.Model).on("change:location",function(e,i){t.$el.attr("data-count",i?i.destinations.length:0),t.render()}),t.$el.hammer({touchAction:"pan-y"}).on("swipeleft",function(e){t.moveLeft()}).on("swiperight",function(e){t.moveRight()})}})},{"../../../../assets/lib/jquery.hammer.js":44,"./template.hbs":778,backbone:8,"backbone.marionette":6,underscore:42}],778:[function(e,t,i){t.exports='{{#if location.destinations.length}}\r\n<a class="left wgt-carousel-buttonleft map-carousel"></a>\r\n<ul data-count="{{location.destinations.length}}">{{#each location.destinations}}\r\n	<li data-idx="{{@index}}" style="background-image: url(\'{{attributes.carouselimage}}\')">\r\n		<div class="roomsInfo">\r\n            {{#if attributes.startingat}}<p class="starting-at"> {{local "maps.starting_at"}} <span>{{startingat}}</span>/night</p>{{/if}}\r\n			<h3 class="name">{{attributes.name}}</h3>\r\n            <!--<a class="view-rooms wgt-sqbutton">{{local "maps.view_rooms"}}</a>-->\r\n            <a class="wgt-sqbutton" href="{{attributes.url}}">{{local "maps.hotel_details"}}</a>\r\n		</div>\r\n	</li>\r\n{{/each}}</ul>\r\n<a class="right wgt-carousel-buttonright map-carousel"></a>\r\n{{/if}}'},{}],768:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("backbone.marionette"),l=(e("../ui/util"),e("./model"));e("../../../config/host");Handlebars.registerHelper("debug",function(e){}),t.exports=c.ItemView.extend({template:Handlebars.compile(e("./count-down-template.hbs")),events:{"click #countDown-close":"countDownClose"},initialize:function(e){var t=this;this.el=e.el,this.model=new l(e),this.model.on("change",function(){t.render()}),this.model.on("destory",function(){t.destroy()}),t.model.get("mobile")&&(jQuery.cookie("cookie-policy-close")?jQuery(t.$el).css("top","40px"):jQuery(t.$el).css("top",40+jQuery(".tpl-global-cookie-policy").height()+"px")),n.on("policy-close",function(){t.model.get("mobile")&&jQuery(t.$el).css("top","40px")})},onRender:function(){this.model.get("mobile")||n.trigger("changePromoPopup","change")},onDestroy:function(){this.model.get("mobile")||n.trigger("changePromoPopup","reset")},setTime:function(){clearTimeout(this.timer),this.timer=null;var e=this,t=this.model.get("time"),i=Math.floor(t/60/60/24),n=Math.floor((t-60*i*60*24)/60/60),c=Math.floor((t-60*i*60*24-60*n*60)/60),l=Math.floor(t-60*i*60*24-60*n*60-60*c);this.model.set({days:i,hours:n,mins:c,sec:l,time:--t}),this.render(),e.timer=setTimeout(function(){e.setTime()},1e3)},countDownClose:function(e){e.stopPropagation(),clearTimeout(this.timer),this.timer=null,this.destroy()},viewMore:function(){}})},{"../../../config/host":45,"../ui/util":2122,"./count-down-template.hbs":767,"./model":769,backbone:8,"backbone.marionette":6,underscore:42}],769:[function(e,t,i){var n=(e("underscore"),e("../../../config/host")),c=e("../ui/util"),l=e("backbone");t.exports=l.Model.extend({defaults:{days:"03",hours:"11",mins:"52",sec:"01",time:0,expired:!1,show:!1,turnRed:0,redClass:"",mobile:c.ismobile()},url:function(){var e=this.get("apiAddress");return e&&"offer"==e?n.getURL("/api/offers/timer/"+(this.get("params")?this.get("params"):"")):n.getURL("/api/hotels/timer/"+(this.get("params")?this.get("params"):""))},parse:function(e){var e=e[0],t=this.get("type");switch(t){case"hotel":case"offer-list":e.showGlobalTimer&&e.showHotelOrOfferlistTimer&&this.setData(e);break;case"offer":e.showGlobalTimer&&e.showoffersTimer&&this.setData(e);break;case"index":e.showGlobalTimer&&this.setData(e)}},setData:function(e){this.set("time",parseInt(e.dateDiffSecond,10)),this.set("link",e.learnMoreLink),this.set("note",e.note),this.set("title",e.title),this.set("show",!0),this.setTime()},initialize:function(e){this.set("type",e.type),this.set("params",e.params),this.fetch(),this.timer=null},setTime:function(){clearTimeout(this.timer),this.timer=null;var e=this,t=this.get("time"),i=(this.get("turnRed"),Math.floor(t/60/60/24)),n=Math.floor((t-60*i*60*24)/60/60),c=Math.floor((t-60*i*60*24-60*n*60)/60),l=Math.floor(t-60*i*60*24-60*n*60-60*c);this.set({days:i,hours:n,mins:c,sec:l,time:--t}),t>0?e.timer=setTimeout(function(){e.setTime(t)},1e3):this.trigger("destory")}})},{"../../../config/host":45,"../ui/util":2122,backbone:8,underscore:42}],767:[function(e,t,i){t.exports='{{#if show}}\r\n  {{#if mobile}}\r\n    <div class="countDown-container-mobile clearfix">\r\n      <div class="mobile-title">\r\n        <span>{{title}}</span>\r\n          <a href="javascript:;" class="icon-icon_B017" id="countDown-close"></a>\r\n      </div>\r\n      <ul class="countDown-box clearfix">\r\n        <li class="countDown-box-li">\r\n          <span class="countDown-num">{{days}}</span>\r\n          <span class="countDown-title">{{local "general.days"}}</span>\r\n        </li>\r\n        <li class="countDown-box-li">\r\n          :\r\n        </li>\r\n        <li class="countDown-box-li">\r\n          <span class="countDown-num">{{hours}}</span>\r\n          <span class="countDown-title">{{local "general.hours"}}</span>\r\n        </li>\r\n        <li class="countDown-box-li">\r\n          :\r\n        </li>\r\n        <li class="countDown-box-li">\r\n          <span class="countDown-num">{{mins}}</span>\r\n          <span class="countDown-title">{{local "general.mins"}}</span>\r\n        </li>\r\n        <li class="countDown-box-li">\r\n          :\r\n        </li>\r\n        <li class="countDown-box-li">\r\n          <span class="countDown-num">{{sec}}</span>\r\n          <span class="countDown-title">{{local "general.sec"}}</span>\r\n        </li>\r\n      </ul>\r\n        <a href="{{link}}" target="_blank" rel="noopener noreferrer" class="countDown-more">{{local "general.learn_more"}}</a>\r\n    </div>\r\n  {{else}}\r\n    <div class="countDown-container">\r\n      <h3 class="countDown-header">\r\n        <span>{{title}}</span>\r\n        <a href="javascript:;" class="icon-icon_B017" id="countDown-close"></a>\r\n      </h3>\r\n      <div class="countDown-content">\r\n        <ul class="countDown-box clearfix">\r\n          <li class="countDown-box-li">\r\n            <span class="countDown-num">{{days}}</span>\r\n            <span class="countDown-title">{{local "general.days"}}</span>\r\n          </li>\r\n          <li class="countDown-box-li">\r\n            :\r\n          </li>\r\n          <li class="countDown-box-li">\r\n            <span class="countDown-num">{{hours}}</span>\r\n            <span class="countDown-title">{{local "general.hours"}}</span>\r\n          </li>\r\n          <li class="countDown-box-li">\r\n            :\r\n          </li>\r\n          <li class="countDown-box-li">\r\n            <span class="countDown-num">{{mins}}</span>\r\n            <span class="countDown-title">{{local "general.mins"}}</span>\r\n          </li>\r\n          <li class="countDown-box-li">\r\n            :\r\n          </li>\r\n          <li class="countDown-box-li">\r\n            <span class="countDown-num">{{sec}}</span>\r\n            <span class="countDown-title">{{local "general.sec"}}</span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div class="countDown-desc">\r\n          <span>{{{note}}}</span>\r\n          {{#unless mobile}}</br>{{/unless}}\r\n          <a href="{{link}}" target="_blank" rel="noopener noreferrer" class="countDown-more">{{local "general.learn_more"}}  </a>\r\n      </div>\r\n    </div>\r\n  {{/if}}\r\n{{/if}}\r\n\r\n'},{}],766:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("./models/city-collection"),a=e("./models/city-model"),o=e("./info/view"),s=e("./maps/view"),r=e("./list/view"),g=e("./template.hbs"),d=e("../ui/util"),I=d.ismobile();t.exports=c.LayoutView.extend({regions:{maps:".section_left",list:".section_right"},ui:{sectionRight:".section_right"},template:function(e){return Handlebars.compile(g)(e)},className:function(){return"venue-listing-content"},initialize:function(){var e=this;e.updateData(window.mapHotels),e.deferred=jQuery.when(),e.showingModel=null,d.tracker.on("change:mobile",function(){I!==d.ismobile()&&(I=d.ismobile(),e.render())})},onRender:function(){var e=this;this.deferred.then(jQuery.proxy(this.__renderChild,this));var t=jQuery("[data-module='unique']").length>0;setTimeout(function(){if(t&&!I){var i=e.ui.sectionRight.find(".section_right_content");i.addClass("nano"),e.ui.sectionRight.find(".venue_list").addClass("nano-content"),i.nanoScroller({destroy:!0}),i.nanoScroller({alwaysVisible:!0})}},1e3)},__renderChild:function(){this.__renderMapsView(),this.__renderCityView()},__renderMapsView:function(){this.mapsView=new s({collection:this.collection}),this.mapsView.on("item:mouseenter",this.__openInfoWindow,this),this.mapsView.on("item:mouseleave",this.__shutInfoWindow,this),this.getRegion("maps").show(this.mapsView)},__renderCityView:function(){this.listView=new r({collection:this.collection}),this.listView.on("item:mouseenter",this.__openInfoWindowByList,this),this.listView.on("item:mouseleave",this.__shutInfoWindow,this),this.getRegion("list").show(this.listView)},__openInfoWindow:function(e){this.showingModelId!=e.model.get("id")&&(this.mapsView.openWindow({model:e.model,position:e.position,content:new o({model:e.model})}),this.mapsView.setActive(e.model),this.showingModelId=e.model&&e.model.id,(e.index||0==e.index)&&this.listView.__setCss(e.index))},__openInfoWindowByList:function(e){var t=this;!d.ismobile()&&this.collection.length>1&&this.mapsView.removeClusterer("Hotels").then(function(e){e&&t.mapsView.updateData(t.collection)}),this.mapsView.openWindow({model:e.model,position:e.position,content:new o({model:e.model})}),this.mapsView.setActive(e.model),(e.index||0==e.index)&&this.listView.__setCss(e.index)},__shutInfoWindow:function(e){this.mapsView.shutWindow(),this.mapsView.setActive({}),this.listView.__setCss(-1),this.showingModelId=null},updateData:function(e){this.collection=new l(n.map(e||[],function(e){return new a(e)}))}})},{"../ui/util":2122,"./info/view":744,"./list/view":748,"./maps/view":762,"./models/city-collection":763,"./models/city-model":764,"./template.hbs":765,"backbone.marionette":6,underscore:42}],765:[function(e,t,i){t.exports='\r\n<div class="venue_listing_section">\r\n    <div class="section_left"></div>\r\n    <div class="section_right"></div>\r\n</div>\r\n'},{}],763:[function(e,t,i){var n=e("backbone"),c=e("./city-model");t.exports=n.Collection.extend({model:c})},{"./city-model":764,backbone:8}],764:[function(e,t,i){var n=e("backbone");t.exports=n.Model.extend({})},{backbone:8}],762:[function(e,t,i){var n=e("backbone.marionette"),c=e("./maps-view/view"),l=e("./maps-mask/view"),a=!window.mapLazyLoadStaticImageUrl;t.exports=n.LayoutView.extend({template:Handlebars.compile(e("./template.hbs")),className:"maps-static-image-wrapper",regions:{container:".maps-static-image-container"},onRender:function(){var e=this;a?(e._innerMapsView=new c(e.options),e._innerMapsView.on("item:mouseenter",function(t){e.trigger("item:mouseenter",t)}),e._innerMapsView.on("item:mouseleave",function(t){e.trigger("item:mouseleave",t)}),e.getRegion("container").show(e._innerMapsView)):(e._innerMaskView=new l(e.options),e._innerMaskView.on("maps:initailize",function(){a=!0,e.render()}),e.getRegion("container").show(e._innerMaskView))},setActive:function(){return this._innerMapsView?this._innerMapsView.setActive.apply(this._innerMapsView,arguments):jQuery.when(0)},openWindow:function(){return this._innerMapsView?this._innerMapsView.openWindow.apply(this._innerMapsView,arguments):jQuery.when(0)},shutWindow:function(){return this._innerMapsView?this._innerMapsView.shutWindow.apply(this._innerMapsView,arguments):jQuery.when(0)},updateData:function(){return this._innerMapsView?this._innerMapsView.updateData.apply(this._innerMapsView,arguments):void 0},updateDataCluster:function(){return this._innerMapsView?this._innerMapsView.updateDataCluster.apply(this._innerMapsView,arguments):jQuery.when(0)},removeClusterer:function(){return this._innerMapsView?this._innerMapsView.removeClusterer.apply(this._innerMapsView,arguments):jQuery.when(0)}})},{"./maps-mask/view":757,"./maps-view/view":760,"./template.hbs":761,"backbone.marionette":6}],761:[function(e,t,i){t.exports='<div class="maps-static-image-container"></div>'},{}],760:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("backbone"),a=e("../../../maps/api/google/google.maps.view"),o=e("../../../maps/views/icon/view"),s=e("../../../ui/util"),r=e("./template.hbs");e("./style.sass"),t.exports=c.LayoutView.extend({template:function(e){return Handlebars.compile(r)(e)},events:{"click [data-zoom='added']":function(){this.gmapView.addZoom(1)},"click [data-zoom='minus']":function(){this.gmapView.addZoom(-1)}},regions:{maps:".listing_container-maps"},className:function(){return"listing_container"},initialize:function(e){var t=this,i=-1,n=!1;t.gmapView=new a({mapOptions:{disableDoubleClickZoom:!0}}),t.gmapView.on("marker:mouseenter",function(e){clearTimeout(i),t.__triggerMouseEnter(e)}),t.gmapView.on("marker:mouseleave",function(e){clearTimeout(i),n||(i=setTimeout(function(){t.__triggerMouseLeave(e)},1e3))}),t.gmapView.on("window:mouseenter",function(e){n=!0,clearTimeout(i)}),t.gmapView.on("window:mouseleave",function(e){n=!1,clearTimeout(i),t.__triggerMouseLeave(e)}),t.gmapView.on("marker:click",function(e){s.ismobile()&&(clearTimeout(i),t.__triggerMouseEnter(e))}),t.__winClose=function(){s.ismobile()&&(n=!1,clearTimeout(i),t.__triggerMouseLeave())},t.__addEvent()},onRender:function(){var e=this;e.getRegion("maps").show(e.gmapView),e.updateDataCluster(e.options.collection);var t=jQuery("[data-module='unique']").length>0;t&&setTimeout(function(){e.__MoveOffset()},1e3)},onDestroy:function(){this.__delEvent()},setActive:function(e){return this.gmapView.setActive(e)},openWindow:function(e){return this.gmapView.openWindow(e)},shutWindow:function(e){return this.gmapView.shutWindow(e)},updateData:function(e){var t=this,i=jQuery("[data-module='unique']").length>0;t.options.collection=e,t.gmapView.removeAll(),t.gmapView.pushMarker(e.map(t.__markerParam,t)).then(function(){i&&t.__MoveOffset()}),t.gmapView.fitBounds({}).then(function(){t.gmapView.once("map:zoom_changed",function(){t.__creatCluster()})})},__MoveOffset:function(){var e=this,t=e.$el,i=jQuery(".venue_list");if(t.length&&i.length){var n=t.width(),c=i.width(),l=t.offset().left,a=i.offset().left;if(n>0&&c>0&&a>l)return e.gmapView.panBy({x:(n-Math.min(n,Math.max(a-l,0)))/2,y:0})}},updateDataCluster:function(e,t){var i=this,n=jQuery("[data-module='unique']").length>0;i.options.collection=e,i.gmapView.removeAll(),i.gmapView.pushMarker(e.map(i.__markerParam,i)).then(function(){n||i.__creatCluster()}),t||i.gmapView.fitBounds({}),i.gmapView.once("map:idle",function(){i.gmapView.getZoom().then(function(e){e>17&&i.gmapView.setZoom(17)})})},removeClusterer:function(e){return this.gmapView.removeClusterer(e)},__creatCluster:function(){var e=this;e.gmapView.createClusterer({name:"Hotels",color:"#b71233",width:47.2,height:62,maxZoom:17,hoverMove:!0,imagePath:"/assets/img/maps/group-icon/group-icon.png",addStyle:"background-repeat:no-repeat;background-size:cover;text-align:right;padding-right:15.3px;line-height:35px;z-index:2;background-position:0 0"}).then(function(t){var i=[];n.each(e.gmapView._set.models,function(e){i.push(e.get("marker"))}),i.length&&t.addMarkers(i)})},__triggerMouseEnter:function(e){this.trigger("item:mouseenter",e)},__triggerMouseLeave:function(e){this.trigger("item:mouseleave",e)},__markerParam:function(e){return{model:e,position:{lng:e.get("lng"),lat:e.get("lat")},index:n.indexOf(e.collection.models,e),content:new o({model:new l.Model({rgba:"#b71233",icon:"icon-icon_N010"})})}},__addEvent:function(){jQuery(document).on("click",this.__winClose)},__delEvent:function(){jQuery(document).off("click",this.__winClose)}})},{"../../../maps/api/google/google.maps.view":1127,"../../../maps/views/icon/view":1174,"../../../ui/util":2122,"./style.sass":758,"./template.hbs":759,backbone:8,"backbone.marionette":6,underscore:42}],759:[function(e,t,i){t.exports='<div class="listing_container-maps" style="width: 100%; height: 100%"></div>\r\n<div class="gbw-p-s-map-view-tool">\r\n    <a class="gbw-p-s-map-tools" data-zoom="added" href="javascript:void(0);"><span class="icon-icon_B023"></span></a>\r\n    <a class="gbw-p-s-map-tools" data-zoom="minus" href="javascript:void(0);"><span class="icon-icon_B024"></span></a>\r\n</div>'},{}],758:[function(e,t,i){t.exports=e("sassify")('.gbw-p-s-map-view-tool {   background-color: #363636;   position: absolute;   bottom: 36px;   right: 36px; }   .gbw-p-s-map-view-tool .gbw-p-s-map-tools {     display: block;     cursor: pointer; }     .gbw-p-s-map-view-tool .gbw-p-s-map-tools span {       display: inline-block;       border: 1px solid #fff;       font-size: 18px;       padding: .2em;       color: #fff; }     .gbw-p-s-map-view-tool .gbw-p-s-map-tools:nth-child(2) span {       border-top: 0; }  html[dir="rtl"] .gbw-p-s-map-view-tool {   right: auto;   left: 36px; }  ');
},{sassify:36}],757:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"maps-static-image-wrapper",ui:{btn:".maps-static-image-inlet"},events:{"click @ui.btn":function(){if(this.trigger("maps:initailize"),"function"==typeof ga)try{ga("send",{hitType:"event",eventCategory:"Maps",eventAction:"request",eventLabel:"Google Maps JavaScript API",eventValue:location.href})}catch(e){}}},serializeData:function(){return{image:window.mapLazyLoadStaticImageUrl}}})},{"./template.hbs":756,"backbone.marionette":6}],756:[function(e,t,i){t.exports='<div class="maps-static-image-media" style="background-image: url(\'{{ image }}\')"></div>\r\n<button class="maps-static-image-inlet" type="button">\r\n    {{ local "maps.view_map" }}\r\n</button>'},{}],2121:[function(e,t,i){(function(e){!function(n,c){"function"==typeof define&&define.amd?define(["jquery"],function(e){return c(e)}):"object"==typeof i?t.exports=c("undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null):c(jQuery)}(this,function(e){function t(e){this.$container,this.constraints=null,this.__$tooltip,this.__init(e)}function i(t,i){var n=!0;return e.each(t,function(e,c){return void 0===i[e]||t[e]!==i[e]?(n=!1,!1):void 0}),n}function n(t){var i=t.attr("id"),n=i?o.window.document.getElementById(i):null;return n?n===t[0]:e.contains(o.window.document.body,t[0])}function c(){if(!a)return!1;var e=a.document.body||a.document.documentElement,t=e.style,i="transition",n=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof t[i])return!0;i=i.charAt(0).toUpperCase()+i.substr(1);for(var c=0;c<n.length;c++)if("string"==typeof t[n[c]+i])return!0;return!1}var l={animation:"fade",animationDuration:350,content:null,contentAsHTML:!1,contentCloning:!1,debug:!0,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:!1,multiple:!1,parent:"body",plugins:["sideTip"],repositionOnScroll:!1,restoration:"none",selfDestruction:!0,theme:[],timer:0,trackerInterval:500,trackOrigin:!1,trackTooltip:!1,trigger:"hover",triggerClose:{click:!1,mouseleave:!1,originClick:!1,scroll:!1,tap:!1,touchleave:!1},triggerOpen:{click:!1,mouseenter:!1,tap:!1,touchstart:!1},updateAnimation:"rotate",zIndex:9999999},a="undefined"!=typeof window?window:null,o={hasTouchCapability:!(!a||!("ontouchstart"in a||a.DocumentTouch&&a.document instanceof a.DocumentTouch||a.navigator.maxTouchPoints)),hasTransitions:c(),IE:!1,semVer:"4.1.6",window:a},s=function(){this.__$emitterPrivate=e({}),this.__$emitterPublic=e({}),this.__instancesLatestArr=[],this.__plugins={},this._env=o};s.prototype={__bridge:function(t,i,n){if(!i[n]){var c=function(){};c.prototype=t;var a=new c;a.__init&&a.__init(i),e.each(t,function(e,t){0!=e.indexOf("__")&&(i[e]?l.debug&&void 0:(i[e]=function(){return a[e].apply(a,Array.prototype.slice.apply(arguments))},i[e].bridged=a))}),i[n]=a}return this},__setWindow:function(e){return o.window=e,this},_getRuler:function(e){return new t(e)},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_plugin:function(t){var i=this;if("string"==typeof t){var n=t,c=null;return n.indexOf(".")>0?c=i.__plugins[n]:e.each(i.__plugins,function(e,t){return t.name.substring(t.name.length-n.length-1)=="."+n?(c=t,!1):void 0}),c}if(t.name.indexOf(".")<0)throw new Error("Plugins must be namespaced");return i.__plugins[t.name]=t,t.core&&i.__bridge(t.core,i,t.name),this},_trigger:function(){var e=Array.prototype.slice.apply(arguments);return"string"==typeof e[0]&&(e[0]={type:e[0]}),this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,e),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,e),this},instances:function(t){var i=[],n=t||".tooltipstered";return e(n).each(function(){var t=e(this),n=t.data("tooltipster-ns");n&&e.each(n,function(e,n){i.push(t.data(n))})}),i},instancesLatest:function(){return this.__instancesLatestArr},off:function(){return this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},origins:function(t){var i=t?t+" ":"";return e(i+".tooltipstered").toArray()},setDefaults:function(t){return e.extend(l,t),this},triggerHandler:function(){return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},e.tooltipster=new s,e.Tooltipster=function(t,i){this.__callbacks={close:[],open:[]},this.__closingTime,this.__Content,this.__contentBcr,this.__destroyed=!1,this.__destroying=!1,this.__$emitterPrivate=e({}),this.__$emitterPublic=e({}),this.__enabled=!0,this.__garbageCollector,this.__Geometry,this.__lastPosition,this.__namespace="tooltipster-"+Math.round(1e6*Math.random()),this.__options,this.__$originParents,this.__pointerIsOverOrigin=!1,this.__previousThemes=[],this.__state="closed",this.__timeouts={close:[],open:null},this.__touchEvents=[],this.__tracker=null,this._$origin,this._$tooltip,this.__init(t,i)},e.Tooltipster.prototype={__init:function(t,i){var n=this;if(n._$origin=e(t),n.__options=e.extend(!0,{},l,i),n.__optionsFormat(),!o.IE||o.IE>=n.__options.IEmin){var c=null;if(void 0===n._$origin.data("tooltipster-initialTitle")&&(c=n._$origin.attr("title"),void 0===c&&(c=null),n._$origin.data("tooltipster-initialTitle",c)),null!==n.__options.content)n.__contentSet(n.__options.content);else{var a,s=n._$origin.attr("data-tooltip-content");s&&(a=e(s)),a&&a[0]?n.__contentSet(a.first()):n.__contentSet(c)}n._$origin.removeAttr("title").addClass("tooltipstered"),n.__prepareOrigin(),n.__prepareGC(),e.each(n.__options.plugins,function(e,t){n._plug(t)}),o.hasTouchCapability&&e("body").on("touchmove."+n.__namespace+"-triggerOpen",function(e){n._touchRecordEvent(e)}),n._on("created",function(){n.__prepareTooltip()})._on("repositioned",function(e){n.__lastPosition=e.position})}else n.__options.disabled=!0},__contentInsert:function(){var e=this,t=e._$tooltip.find(".tooltipster-content"),i=e.__Content,n=function(e){i=e};return e._trigger({type:"format",content:e.__Content,format:n}),e.__options.functionFormat&&(i=e.__options.functionFormat.call(e,e,{origin:e._$origin[0]},e.__Content)),"string"!=typeof i||e.__options.contentAsHTML?t.empty().append(i):t.text(i),e},__contentSet:function(t){return t instanceof e&&this.__options.contentCloning&&(t=t.clone(!0)),this.__Content=t,this._trigger({type:"updated",content:t}),this},__destroyError:function(){throw new Error("This tooltip has been destroyed and cannot execute your method call.")},__geometry:function(){var t=this,i=t._$origin,n=t._$origin.is("area");if(n){var c=t._$origin.parent().attr("name");i=e('img[usemap="#'+c+'"]')}var l=i[0].getBoundingClientRect(),a=e(o.window.document),s=e(o.window),r=i,g={available:{document:null,window:null},document:{size:{height:a.height(),width:a.width()}},window:{scroll:{left:o.window.scrollX||o.window.document.documentElement.scrollLeft,top:o.window.scrollY||o.window.document.documentElement.scrollTop},size:{height:s.height(),width:s.width()}},origin:{fixedLineage:!1,offset:{},size:{height:l.bottom-l.top,width:l.right-l.left},usemapImage:n?i[0]:null,windowOffset:{bottom:l.bottom,left:l.left,right:l.right,top:l.top}}};if(n){var d=t._$origin.attr("shape"),I=t._$origin.attr("coords");if(I&&(I=I.split(","),e.map(I,function(e,t){I[t]=parseInt(e)})),"default"!=d)switch(d){case"circle":var b=I[0],C=I[1],u=I[2],m=C-u,p=b-u;g.origin.size.height=2*u,g.origin.size.width=g.origin.size.height,g.origin.windowOffset.left+=p,g.origin.windowOffset.top+=m;break;case"rect":var h=I[0],G=I[1],A=I[2],y=I[3];g.origin.size.height=y-G,g.origin.size.width=A-h,g.origin.windowOffset.left+=h,g.origin.windowOffset.top+=G;break;case"poly":for(var Z=0,B=0,x=0,v=0,W="even",X=0;X<I.length;X++){var F=I[X];"even"==W?(F>x&&(x=F,0===X&&(Z=x)),Z>F&&(Z=F),W="odd"):(F>v&&(v=F,1==X&&(B=v)),B>F&&(B=F),W="even")}g.origin.size.height=v-B,g.origin.size.width=x-Z,g.origin.windowOffset.left+=Z,g.origin.windowOffset.top+=B}}var Q=function(e){g.origin.size.height=e.height,g.origin.windowOffset.left=e.left,g.origin.windowOffset.top=e.top,g.origin.size.width=e.width};for(t._trigger({type:"geometry",edit:Q,geometry:{height:g.origin.size.height,left:g.origin.windowOffset.left,top:g.origin.windowOffset.top,width:g.origin.size.width}}),g.origin.windowOffset.right=g.origin.windowOffset.left+g.origin.size.width,g.origin.windowOffset.bottom=g.origin.windowOffset.top+g.origin.size.height,g.origin.offset.left=g.origin.windowOffset.left+g.window.scroll.left,g.origin.offset.top=g.origin.windowOffset.top+g.window.scroll.top,g.origin.offset.bottom=g.origin.offset.top+g.origin.size.height,g.origin.offset.right=g.origin.offset.left+g.origin.size.width,g.available.document={bottom:{height:g.document.size.height-g.origin.offset.bottom,width:g.document.size.width},left:{height:g.document.size.height,width:g.origin.offset.left},right:{height:g.document.size.height,width:g.document.size.width-g.origin.offset.right},top:{height:g.origin.offset.top,width:g.document.size.width}},g.available.window={bottom:{height:Math.max(g.window.size.height-Math.max(g.origin.windowOffset.bottom,0),0),width:g.window.size.width},left:{height:g.window.size.height,width:Math.max(g.origin.windowOffset.left,0)},right:{height:g.window.size.height,width:Math.max(g.window.size.width-Math.max(g.origin.windowOffset.right,0),0)},top:{height:Math.max(g.origin.windowOffset.top,0),width:g.window.size.width}};"html"!=r[0].tagName.toLowerCase();){if("fixed"==r.css("position")){g.origin.fixedLineage=!0;break}r=r.parent()}return g},__optionsFormat:function(){return"number"==typeof this.__options.animationDuration&&(this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration]),"number"==typeof this.__options.delay&&(this.__options.delay=[this.__options.delay,this.__options.delay]),"number"==typeof this.__options.delayTouch&&(this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch]),"string"==typeof this.__options.theme&&(this.__options.theme=[this.__options.theme]),"string"==typeof this.__options.parent&&(this.__options.parent=e(this.__options.parent)),"hover"==this.__options.trigger?(this.__options.triggerOpen={mouseenter:!0,touchstart:!0},this.__options.triggerClose={mouseleave:!0,originClick:!0,touchleave:!0}):"click"==this.__options.trigger&&(this.__options.triggerOpen={click:!0,tap:!0},this.__options.triggerClose={click:!0,tap:!0}),this._trigger("options"),this},__prepareGC:function(){var t=this;return t.__options.selfDestruction?t.__garbageCollector=setInterval(function(){var i=(new Date).getTime();t.__touchEvents=e.grep(t.__touchEvents,function(e,t){return i-e.time>6e4}),n(t._$origin)||t.destroy()},2e4):clearInterval(t.__garbageCollector),t},__prepareOrigin:function(){var e=this;if(e._$origin.off("."+e.__namespace+"-triggerOpen"),o.hasTouchCapability&&e._$origin.on("touchstart."+e.__namespace+"-triggerOpen touchend."+e.__namespace+"-triggerOpen touchcancel."+e.__namespace+"-triggerOpen",function(t){e._touchRecordEvent(t)}),e.__options.triggerOpen.click||e.__options.triggerOpen.tap&&o.hasTouchCapability){var t="";e.__options.triggerOpen.click&&(t+="click."+e.__namespace+"-triggerOpen "),e.__options.triggerOpen.tap&&o.hasTouchCapability&&(t+="touchend."+e.__namespace+"-triggerOpen"),e._$origin.on(t,function(t){e._touchIsMeaningfulEvent(t)&&e._open(t)})}if(e.__options.triggerOpen.mouseenter||e.__options.triggerOpen.touchstart&&o.hasTouchCapability){var t="";e.__options.triggerOpen.mouseenter&&(t+="mouseenter."+e.__namespace+"-triggerOpen "),e.__options.triggerOpen.touchstart&&o.hasTouchCapability&&(t+="touchstart."+e.__namespace+"-triggerOpen"),e._$origin.on(t,function(t){!e._touchIsTouchEvent(t)&&e._touchIsEmulatedEvent(t)||(e.__pointerIsOverOrigin=!0,e._openShortly(t))})}if(e.__options.triggerClose.mouseleave||e.__options.triggerClose.touchleave&&o.hasTouchCapability){var t="";e.__options.triggerClose.mouseleave&&(t+="mouseleave."+e.__namespace+"-triggerOpen "),e.__options.triggerClose.touchleave&&o.hasTouchCapability&&(t+="touchend."+e.__namespace+"-triggerOpen touchcancel."+e.__namespace+"-triggerOpen"),e._$origin.on(t,function(t){e._touchIsMeaningfulEvent(t)&&(e.__pointerIsOverOrigin=!1)})}return e},__prepareTooltip:function(){var t=this,i=t.__options.interactive?"auto":"";return t._$tooltip.attr("id",t.__namespace).css({"pointer-events":i,zIndex:t.__options.zIndex}),e.each(t.__previousThemes,function(e,i){t._$tooltip.removeClass(i)}),e.each(t.__options.theme,function(e,i){t._$tooltip.addClass(i)}),t.__previousThemes=e.merge([],t.__options.theme),t},__scrollHandler:function(t){var i=this;if(i.__options.triggerClose.scroll)i._close(t);else{if(t.target===o.window.document)i.__Geometry.origin.fixedLineage||i.__options.repositionOnScroll&&i.reposition(t);else{var n=i.__geometry(),c=!1;if("fixed"!=i._$origin.css("position")&&i.__$originParents.each(function(t,i){var l=e(i),a=l.css("overflow-x"),o=l.css("overflow-y");if("visible"!=a||"visible"!=o){var s=i.getBoundingClientRect();if("visible"!=a&&(n.origin.windowOffset.left<s.left||n.origin.windowOffset.right>s.right))return c=!0,!1;if("visible"!=o&&(n.origin.windowOffset.top<s.top||n.origin.windowOffset.bottom>s.bottom))return c=!0,!1}return"fixed"==l.css("position")?!1:void 0}),c)i._$tooltip.css("visibility","hidden");else if(i._$tooltip.css("visibility","visible"),i.__options.repositionOnScroll)i.reposition(t);else{var l=n.origin.offset.left-i.__Geometry.origin.offset.left,a=n.origin.offset.top-i.__Geometry.origin.offset.top;i._$tooltip.css({left:i.__lastPosition.coord.left+l,top:i.__lastPosition.coord.top+a})}}i._trigger({type:"scroll",event:t})}return i},__stateSet:function(e){return this.__state=e,this._trigger({type:"state",state:e}),this},__timeoutsClear:function(){return clearTimeout(this.__timeouts.open),this.__timeouts.open=null,e.each(this.__timeouts.close,function(e,t){clearTimeout(t)}),this.__timeouts.close=[],this},__trackerStart:function(){var e=this,t=e._$tooltip.find(".tooltipster-content");return e.__options.trackTooltip&&(e.__contentBcr=t[0].getBoundingClientRect()),e.__tracker=setInterval(function(){if(n(e._$origin)&&n(e._$tooltip)){if(e.__options.trackOrigin){var c=e.__geometry(),l=!1;i(c.origin.size,e.__Geometry.origin.size)&&(e.__Geometry.origin.fixedLineage?i(c.origin.windowOffset,e.__Geometry.origin.windowOffset)&&(l=!0):i(c.origin.offset,e.__Geometry.origin.offset)&&(l=!0)),l||(e.__options.triggerClose.mouseleave?e._close():e.reposition())}if(e.__options.trackTooltip){var a=t[0].getBoundingClientRect();a.height===e.__contentBcr.height&&a.width===e.__contentBcr.width||(e.reposition(),e.__contentBcr=a)}}else e._close()},e.__options.trackerInterval),e},_close:function(t,i){var n=this,c=!0;if(n._trigger({type:"close",event:t,stop:function(){c=!1}}),c||n.__destroying){i&&n.__callbacks.close.push(i),n.__callbacks.open=[],n.__timeoutsClear();var l=function(){e.each(n.__callbacks.close,function(e,i){i.call(n,n,{event:t,origin:n._$origin[0]})}),n.__callbacks.close=[]};if("closed"!=n.__state){var a=!0,s=new Date,r=s.getTime(),g=r+n.__options.animationDuration[1];if("disappearing"==n.__state&&g>n.__closingTime&&(a=!1),a){n.__closingTime=g,"disappearing"!=n.__state&&n.__stateSet("disappearing");var d=function(){clearInterval(n.__tracker),n._trigger({type:"closing",event:t}),n._$tooltip.off("."+n.__namespace+"-triggerClose").removeClass("tooltipster-dying"),e(o.window).off("."+n.__namespace+"-triggerClose"),n.__$originParents.each(function(t,i){e(i).off("scroll."+n.__namespace+"-triggerClose")}),n.__$originParents=null,e("body").off("."+n.__namespace+"-triggerClose"),n._$origin.off("."+n.__namespace+"-triggerClose"),n._off("dismissable"),n.__stateSet("closed"),n._trigger({type:"after",event:t}),n.__options.functionAfter&&n.__options.functionAfter.call(n,n,{event:t,origin:n._$origin[0]}),l()};o.hasTransitions?(n._$tooltip.css({"-moz-animation-duration":n.__options.animationDuration[1]+"ms","-ms-animation-duration":n.__options.animationDuration[1]+"ms","-o-animation-duration":n.__options.animationDuration[1]+"ms","-webkit-animation-duration":n.__options.animationDuration[1]+"ms","animation-duration":n.__options.animationDuration[1]+"ms","transition-duration":n.__options.animationDuration[1]+"ms"}),n._$tooltip.clearQueue().removeClass("tooltipster-show").addClass("tooltipster-dying"),n.__options.animationDuration[1]>0&&n._$tooltip.delay(n.__options.animationDuration[1]),n._$tooltip.queue(d)):n._$tooltip.stop().fadeOut(n.__options.animationDuration[1],d)}}else l()}return n},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_open:function(t,i){var c=this;if(!c.__destroying&&n(c._$origin)&&c.__enabled){var l=!0;if("closed"==c.__state&&(c._trigger({type:"before",event:t,stop:function(){l=!1}}),l&&c.__options.functionBefore&&(l=c.__options.functionBefore.call(c,c,{event:t,origin:c._$origin[0]}))),l!==!1&&null!==c.__Content){i&&c.__callbacks.open.push(i),c.__callbacks.close=[],c.__timeoutsClear();var a,s=function(){"stable"!=c.__state&&c.__stateSet("stable"),e.each(c.__callbacks.open,function(e,t){t.call(c,c,{origin:c._$origin[0],tooltip:c._$tooltip[0]})}),c.__callbacks.open=[]};if("closed"!==c.__state)a=0,"disappearing"===c.__state?(c.__stateSet("appearing"),o.hasTransitions?(c._$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-show"),c.__options.animationDuration[0]>0&&c._$tooltip.delay(c.__options.animationDuration[0]),c._$tooltip.queue(s)):c._$tooltip.stop().fadeIn(s)):"stable"==c.__state&&s();else{if(c.__stateSet("appearing"),a=c.__options.animationDuration[0],c.__contentInsert(),c.reposition(t,!0),o.hasTransitions?(c._$tooltip.addClass("tooltipster-"+c.__options.animation).addClass("tooltipster-initial").css({"-moz-animation-duration":c.__options.animationDuration[0]+"ms","-ms-animation-duration":c.__options.animationDuration[0]+"ms","-o-animation-duration":c.__options.animationDuration[0]+"ms","-webkit-animation-duration":c.__options.animationDuration[0]+"ms","animation-duration":c.__options.animationDuration[0]+"ms","transition-duration":c.__options.animationDuration[0]+"ms"}),setTimeout(function(){"closed"!=c.__state&&(c._$tooltip.addClass("tooltipster-show").removeClass("tooltipster-initial"),c.__options.animationDuration[0]>0&&c._$tooltip.delay(c.__options.animationDuration[0]),c._$tooltip.queue(s))},0)):c._$tooltip.css("display","none").fadeIn(c.__options.animationDuration[0],s),c.__trackerStart(),e(o.window).on("resize."+c.__namespace+"-triggerClose",function(t){var i=e(document.activeElement);(i.is("input")||i.is("textarea"))&&e.contains(c._$tooltip[0],i[0])||c.reposition(t)}).on("scroll."+c.__namespace+"-triggerClose",function(e){c.__scrollHandler(e)}),c.__$originParents=c._$origin.parents(),c.__$originParents.each(function(t,i){e(i).on("scroll."+c.__namespace+"-triggerClose",function(e){c.__scrollHandler(e)})}),c.__options.triggerClose.mouseleave||c.__options.triggerClose.touchleave&&o.hasTouchCapability){c._on("dismissable",function(e){e.dismissable?e.delay?(I=setTimeout(function(){c._close(e.event)},e.delay),c.__timeouts.close.push(I)):c._close(e):clearTimeout(I)});var r=c._$origin,g="",d="",I=null;c.__options.interactive&&(r=r.add(c._$tooltip)),c.__options.triggerClose.mouseleave&&(g+="mouseenter."+c.__namespace+"-triggerClose ",d+="mouseleave."+c.__namespace+"-triggerClose "),c.__options.triggerClose.touchleave&&o.hasTouchCapability&&(g+="touchstart."+c.__namespace+"-triggerClose",d+="touchend."+c.__namespace+"-triggerClose touchcancel."+c.__namespace+"-triggerClose"),r.on(d,function(e){if(c._touchIsTouchEvent(e)||!c._touchIsEmulatedEvent(e)){var t="mouseleave"==e.type?c.__options.delay:c.__options.delayTouch;c._trigger({delay:t[1],dismissable:!0,event:e,type:"dismissable"})}}).on(g,function(e){!c._touchIsTouchEvent(e)&&c._touchIsEmulatedEvent(e)||c._trigger({dismissable:!1,event:e,type:"dismissable"})})}c.__options.triggerClose.originClick&&c._$origin.on("click."+c.__namespace+"-triggerClose",function(e){c._touchIsTouchEvent(e)||c._touchIsEmulatedEvent(e)||c._close(e)}),(c.__options.triggerClose.click||c.__options.triggerClose.tap&&o.hasTouchCapability)&&setTimeout(function(){if("closed"!=c.__state){var t="";c.__options.triggerClose.click&&(t+="click."+c.__namespace+"-triggerClose "),c.__options.triggerClose.tap&&o.hasTouchCapability&&(t+="touchend."+c.__namespace+"-triggerClose"),e("body").on(t,function(t){c._touchIsMeaningfulEvent(t)&&(c._touchRecordEvent(t),c.__options.interactive&&e.contains(c._$tooltip[0],t.target)||c._close(t))}),c.__options.triggerClose.tap&&o.hasTouchCapability&&e("body").on("touchstart."+c.__namespace+"-triggerClose",function(e){c._touchRecordEvent(e)})}},0),c._trigger("ready"),c.__options.functionReady&&c.__options.functionReady.call(c,c,{origin:c._$origin[0],tooltip:c._$tooltip[0]})}if(c.__options.timer>0){var I=setTimeout(function(){c._close()},c.__options.timer+a);c.__timeouts.close.push(I)}}}return c},_openShortly:function(e){var t=this,i=!0;if("stable"!=t.__state&&"appearing"!=t.__state&&!t.__timeouts.open&&(t._trigger({type:"start",event:e,stop:function(){i=!1}}),i)){var n=0==e.type.indexOf("touch")?t.__options.delayTouch:t.__options.delay;n[0]?t.__timeouts.open=setTimeout(function(){t.__timeouts.open=null,t.__pointerIsOverOrigin&&t._touchIsMeaningfulEvent(e)?(t._trigger("startend"),t._open(e)):t._trigger("startcancel")},n[0]):(t._trigger("startend"),t._open(e))}return t},_optionsExtract:function(t,i){var n=this,c=e.extend(!0,{},i),l=n.__options[t];return l||(l={},e.each(i,function(e,t){var i=n.__options[e];void 0!==i&&(l[e]=i)})),e.each(c,function(t,i){void 0!==l[t]&&("object"!=typeof i||i instanceof Array||null==i||"object"!=typeof l[t]||l[t]instanceof Array||null==l[t]?c[t]=l[t]:e.extend(c[t],l[t]))}),c},_plug:function(t){var i=e.tooltipster._plugin(t);if(!i)throw new Error('The "'+t+'" plugin is not defined');return i.instance&&e.tooltipster.__bridge(i.instance,this,i.name),this},_touchIsEmulatedEvent:function(e){for(var t=!1,i=(new Date).getTime(),n=this.__touchEvents.length-1;n>=0;n--){var c=this.__touchEvents[n];if(!(i-c.time<500))break;c.target===e.target&&(t=!0)}return t},_touchIsMeaningfulEvent:function(e){return this._touchIsTouchEvent(e)&&!this._touchSwiped(e.target)||!this._touchIsTouchEvent(e)&&!this._touchIsEmulatedEvent(e)},_touchIsTouchEvent:function(e){return 0==e.type.indexOf("touch")},_touchRecordEvent:function(e){return this._touchIsTouchEvent(e)&&(e.time=(new Date).getTime(),this.__touchEvents.push(e)),this},_touchSwiped:function(e){for(var t=!1,i=this.__touchEvents.length-1;i>=0;i--){var n=this.__touchEvents[i];if("touchmove"==n.type){t=!0;break}if("touchstart"==n.type&&e===n.target)break}return t},_trigger:function(){var t=Array.prototype.slice.apply(arguments);return"string"==typeof t[0]&&(t[0]={type:t[0]}),t[0].instance=this,t[0].origin=this._$origin?this._$origin[0]:null,t[0].tooltip=this._$tooltip?this._$tooltip[0]:null,this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,t),e.tooltipster._trigger.apply(e.tooltipster,t),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,t),this},_unplug:function(t){var i=this;if(i[t]){var n=e.tooltipster._plugin(t);n.instance&&e.each(n.instance,function(e,n){i[e]&&i[e].bridged===i[t]&&delete i[e]}),i[t].__destroy&&i[t].__destroy(),delete i[t]}return i},close:function(e){return this.__destroyed?this.__destroyError():this._close(null,e),this},content:function(e){var t=this;if(void 0===e)return t.__Content;if(t.__destroyed)t.__destroyError();else if(t.__contentSet(e),null!==t.__Content){if("closed"!==t.__state&&(t.__contentInsert(),t.reposition(),t.__options.updateAnimation))if(o.hasTransitions){var i=t.__options.updateAnimation;t._$tooltip.addClass("tooltipster-update-"+i),setTimeout(function(){"closed"!=t.__state&&t._$tooltip.removeClass("tooltipster-update-"+i)},1e3)}else t._$tooltip.fadeTo(200,.5,function(){"closed"!=t.__state&&t._$tooltip.fadeTo(200,1)})}else t._close();return t},destroy:function(){var t=this;return t.__destroyed?t.__destroyError():t.__destroying||(t.__destroying=!0,t._close(null,function(){t._trigger("destroy"),t.__destroying=!1,t.__destroyed=!0,t._$origin.removeData(t.__namespace).off("."+t.__namespace+"-triggerOpen"),e("body").off("."+t.__namespace+"-triggerOpen");var i=t._$origin.data("tooltipster-ns");if(i)if(1===i.length){var n=null;"previous"==t.__options.restoration?n=t._$origin.data("tooltipster-initialTitle"):"current"==t.__options.restoration&&(n="string"==typeof t.__Content?t.__Content:e("<div></div>").append(t.__Content).html()),n&&t._$origin.attr("title",n),t._$origin.removeClass("tooltipstered"),t._$origin.removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else i=e.grep(i,function(e,i){return e!==t.__namespace}),t._$origin.data("tooltipster-ns",i);t._trigger("destroyed"),t._off(),t.off(),t.__Content=null,t.__$emitterPrivate=null,t.__$emitterPublic=null,t.__options.parent=null,t._$origin=null,t._$tooltip=null,e.tooltipster.__instancesLatestArr=e.grep(e.tooltipster.__instancesLatestArr,function(e,i){return t!==e}),clearInterval(t.__garbageCollector)})),t},disable:function(){return this.__destroyed?(this.__destroyError(),this):(this._close(),this.__enabled=!1,this)},elementOrigin:function(){return this.__destroyed?void this.__destroyError():this._$origin[0]},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null},enable:function(){return this.__enabled=!0,this},hide:function(e){return this.close(e)},instance:function(){return this},off:function(){return this.__destroyed||this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},open:function(e){return this.__destroyed||this.__destroying?this.__destroyError():this._open(null,e),this},option:function(t,i){return void 0===i?this.__options[t]:(this.__destroyed?this.__destroyError():(this.__options[t]=i,this.__optionsFormat(),e.inArray(t,["trigger","triggerClose","triggerOpen"])>=0&&this.__prepareOrigin(),"selfDestruction"===t&&this.__prepareGC()),this)},reposition:function(e,t){var i=this;return i.__destroyed?i.__destroyError():"closed"!=i.__state&&n(i._$origin)&&(t||n(i._$tooltip))&&(t||i._$tooltip.detach(),i.__Geometry=i.__geometry(),i._trigger({type:"reposition",event:e,helper:{geo:i.__Geometry}})),i},show:function(e){return this.open(e)},status:function(){return{destroyed:this.__destroyed,destroying:this.__destroying,enabled:this.__enabled,open:"closed"!==this.__state,state:this.__state}},triggerHandler:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},e.fn.tooltipster=function(){var t=Array.prototype.slice.apply(arguments);if(0===this.length)return this;if("string"==typeof t[0]){var i="#*$~&";return this.each(function(){var n=e(this).data("tooltipster-ns"),c=n?e(this).data(n[0]):null;if(!c)throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element');if("function"!=typeof c[t[0]])throw new Error('Unknown method "'+t[0]+'"');this.length>1&&"content"==t[0]&&(t[1]instanceof e||"object"==typeof t[1]&&null!=t[1]&&t[1].tagName)&&!c.__options.contentCloning&&c.__options.debug&&void 0;var l=c[t[0]](t[1],t[2]);return l!==c||"instance"===t[0]?(i=l,!1):void 0}),"#*$~&"!==i?i:this}e.tooltipster.__instancesLatestArr=[];var n=t[0]&&void 0!==t[0].multiple,c=n&&t[0].multiple||!n&&l.multiple,a=t[0]&&void 0!==t[0].content,o=a&&t[0].content||!a&&l.content,s=t[0]&&void 0!==t[0].contentCloning,r=s&&t[0].contentCloning||!s&&l.contentCloning,g=t[0]&&void 0!==t[0].debug,d=g&&t[0].debug||!g&&l.debug;return this.length>1&&(o instanceof e||"object"==typeof o&&null!=o&&o.tagName)&&!r&&d&&void 0,this.each(function(){var i=!1,n=e(this),l=n.data("tooltipster-ns"),a=null;l?c?i=!0:d&&void 0:i=!0,i&&(a=new e.Tooltipster(this,t[0]),l||(l=[]),l.push(a.__namespace),n.data("tooltipster-ns",l),n.data(a.__namespace,a),a.__options.functionInit&&a.__options.functionInit.call(a,a,{origin:this}),a._trigger("init")),e.tooltipster.__instancesLatestArr.push(a)}),this},t.prototype={__init:function(t){this.__$tooltip=t,this.__$tooltip.css({left:0,overflow:"hidden",position:"absolute",top:0}).find(".tooltipster-content").css("overflow","auto"),this.$container=e('<div class="tooltipster-ruler"></div>').append(this.__$tooltip).appendTo("body")},__forceRedraw:function(){var e=this.__$tooltip.parent();this.__$tooltip.detach(),this.__$tooltip.appendTo(e)},constrain:function(e,t){return this.constraints={width:e,height:t},this.__$tooltip.css({display:"block",height:"",overflow:"auto",width:e}),this},destroy:function(){this.__$tooltip.detach().find(".tooltipster-content").css({display:"",overflow:""}),this.$container.remove()},free:function(){return this.constraints=null,this.__$tooltip.css({display:"",height:"",overflow:"visible",width:""}),this},measure:function(){this.__forceRedraw();var e=this.__$tooltip[0].getBoundingClientRect(),t={size:{height:e.height||e.bottom,width:e.width||e.right}};if(this.constraints){var i=this.__$tooltip.find(".tooltipster-content"),n=this.__$tooltip.outerHeight(),c=i[0].getBoundingClientRect(),l={height:n<=this.constraints.height,width:e.width<=this.constraints.width&&c.width>=i[0].scrollWidth-1};t.fits=l.height&&l.width}return o.IE&&o.IE<=11&&t.size.width!==o.window.document.documentElement.clientWidth&&(t.size.width=Math.ceil(t.size.width)+1),t}};var r=navigator.userAgent.toLowerCase();-1!=r.indexOf("msie")?o.IE=parseInt(r.split("msie")[1]):-1!==r.toLowerCase().indexOf("trident")&&-1!==r.indexOf(" rv:11")?o.IE=11:-1!=r.toLowerCase().indexOf("edge/")&&(o.IE=parseInt(r.toLowerCase().split("edge/")[1]));var g="tooltipster.sideTip";return e.tooltipster._plugin({name:g,instance:{__defaults:function(){return{arrow:!0,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:"top",viewportAware:!0}},__init:function(e){var t=this;t.__instance=e,t.__namespace="tooltipster-sideTip-"+Math.round(1e6*Math.random()),t.__previousState="closed",t.__options,t.__optionsFormat(),t.__instance._on("state."+t.__namespace,function(e){"closed"==e.state?t.__close():"appearing"==e.state&&"closed"==t.__previousState&&t.__create(),t.__previousState=e.state}),t.__instance._on("options."+t.__namespace,function(){t.__optionsFormat()}),t.__instance._on("reposition."+t.__namespace,function(e){t.__reposition(e.event,e.helper)})},__close:function(){this.__instance.content()instanceof e&&this.__instance.content().detach(),this.__instance._$tooltip.remove(),this.__instance._$tooltip=null},__create:function(){var t=e('<div class="tooltipster-base tooltipster-sidetip"><div class="tooltipster-box"><div class="tooltipster-content"></div></div><div class="tooltipster-arrow"><div class="tooltipster-arrow-uncropped"><div class="tooltipster-arrow-border"></div><div class="tooltipster-arrow-background"></div></div></div></div>');
this.__options.arrow||t.find(".tooltipster-box").css("margin",0).end().find(".tooltipster-arrow").hide(),this.__options.minWidth&&t.css("min-width",this.__options.minWidth+"px"),this.__options.maxWidth&&t.css("max-width",this.__options.maxWidth+"px"),this.__instance._$tooltip=t,this.__instance._trigger("created")},__destroy:function(){this.__instance._off("."+self.__namespace)},__optionsFormat:function(){var t=this;if(t.__options=t.__instance._optionsExtract(g,t.__defaults()),t.__options.position&&(t.__options.side=t.__options.position),"object"!=typeof t.__options.distance&&(t.__options.distance=[t.__options.distance]),t.__options.distance.length<4&&(void 0===t.__options.distance[1]&&(t.__options.distance[1]=t.__options.distance[0]),void 0===t.__options.distance[2]&&(t.__options.distance[2]=t.__options.distance[0]),void 0===t.__options.distance[3]&&(t.__options.distance[3]=t.__options.distance[1]),t.__options.distance={top:t.__options.distance[0],right:t.__options.distance[1],bottom:t.__options.distance[2],left:t.__options.distance[3]}),"string"==typeof t.__options.side){var i={top:"bottom",right:"left",bottom:"top",left:"right"};t.__options.side=[t.__options.side,i[t.__options.side]],"left"==t.__options.side[0]||"right"==t.__options.side[0]?t.__options.side.push("top","bottom"):t.__options.side.push("right","left")}6===e.tooltipster._env.IE&&t.__options.arrow!==!0&&(t.__options.arrow=!1)},__reposition:function(t,i){var n,c=this,l=c.__targetFind(i),a=[];c.__instance._$tooltip.detach();var o=c.__instance._$tooltip.clone(),s=e.tooltipster._getRuler(o),r=!1,g=c.__instance.option("animation");switch(g&&o.removeClass("tooltipster-"+g),e.each(["window","document"],function(n,g){var d=null;if(c.__instance._trigger({container:g,helper:i,satisfied:r,takeTest:function(e){d=e},results:a,type:"positionTest"}),1==d||0!=d&&0==r&&("window"!=g||c.__options.viewportAware))for(var n=0;n<c.__options.side.length;n++){var I={horizontal:0,vertical:0},b=c.__options.side[n];"top"==b||"bottom"==b?I.vertical=c.__options.distance[b]:I.horizontal=c.__options.distance[b],c.__sideChange(o,b),e.each(["natural","constrained"],function(e,n){if(d=null,c.__instance._trigger({container:g,event:t,helper:i,mode:n,results:a,satisfied:r,side:b,takeTest:function(e){d=e},type:"positionTest"}),1==d||0!=d&&0==r){var o={container:g,distance:I,fits:null,mode:n,outerSize:null,side:b,size:null,target:l[b],whole:null},C="natural"==n?s.free():s.constrain(i.geo.available[g][b].width-I.horizontal,i.geo.available[g][b].height-I.vertical),u=C.measure();if(o.size=u.size,o.outerSize={height:u.size.height+I.vertical,width:u.size.width+I.horizontal},"natural"==n?i.geo.available[g][b].width>=o.outerSize.width&&i.geo.available[g][b].height>=o.outerSize.height?o.fits=!0:o.fits=!1:o.fits=u.fits,"window"==g&&(o.fits?"top"==b||"bottom"==b?o.whole=i.geo.origin.windowOffset.right>=c.__options.minIntersection&&i.geo.window.size.width-i.geo.origin.windowOffset.left>=c.__options.minIntersection:o.whole=i.geo.origin.windowOffset.bottom>=c.__options.minIntersection&&i.geo.window.size.height-i.geo.origin.windowOffset.top>=c.__options.minIntersection:o.whole=!1),a.push(o),o.whole)r=!0;else if("natural"==o.mode&&(o.fits||o.size.width<=i.geo.available[g][b].width))return!1}})}}),c.__instance._trigger({edit:function(e){a=e},event:t,helper:i,results:a,type:"positionTested"}),a.sort(function(e,t){if(e.whole&&!t.whole)return-1;if(!e.whole&&t.whole)return 1;if(e.whole&&t.whole){var i=c.__options.side.indexOf(e.side),n=c.__options.side.indexOf(t.side);return n>i?-1:i>n?1:"natural"==e.mode?-1:1}if(e.fits&&!t.fits)return-1;if(!e.fits&&t.fits)return 1;if(e.fits&&t.fits){var i=c.__options.side.indexOf(e.side),n=c.__options.side.indexOf(t.side);return n>i?-1:i>n?1:"natural"==e.mode?-1:1}return"document"==e.container&&"bottom"==e.side&&"natural"==e.mode?-1:1}),n=a[0],n.coord={},n.side){case"left":case"right":n.coord.top=Math.floor(n.target-n.size.height/2);break;case"bottom":case"top":n.coord.left=Math.floor(n.target-n.size.width/2)}switch(n.side){case"left":n.coord.left=i.geo.origin.windowOffset.left-n.outerSize.width;break;case"right":n.coord.left=i.geo.origin.windowOffset.right+n.distance.horizontal;break;case"top":n.coord.top=i.geo.origin.windowOffset.top-n.outerSize.height;break;case"bottom":n.coord.top=i.geo.origin.windowOffset.bottom+n.distance.vertical}"window"==n.container?"top"==n.side||"bottom"==n.side?n.coord.left<0?i.geo.origin.windowOffset.right-this.__options.minIntersection>=0?n.coord.left=0:n.coord.left=i.geo.origin.windowOffset.right-this.__options.minIntersection-1:n.coord.left>i.geo.window.size.width-n.size.width&&(i.geo.origin.windowOffset.left+this.__options.minIntersection<=i.geo.window.size.width?n.coord.left=i.geo.window.size.width-n.size.width:n.coord.left=i.geo.origin.windowOffset.left+this.__options.minIntersection+1-n.size.width):n.coord.top<0?i.geo.origin.windowOffset.bottom-this.__options.minIntersection>=0?n.coord.top=0:n.coord.top=i.geo.origin.windowOffset.bottom-this.__options.minIntersection-1:n.coord.top>i.geo.window.size.height-n.size.height&&(i.geo.origin.windowOffset.top+this.__options.minIntersection<=i.geo.window.size.height?n.coord.top=i.geo.window.size.height-n.size.height:n.coord.top=i.geo.origin.windowOffset.top+this.__options.minIntersection+1-n.size.height):(n.coord.left>i.geo.window.size.width-n.size.width&&(n.coord.left=i.geo.window.size.width-n.size.width),n.coord.left<0&&(n.coord.left=0)),c.__sideChange(o,n.side),i.tooltipClone=o[0],i.tooltipParent=c.__instance.option("parent").parent[0],i.mode=n.mode,i.whole=n.whole,i.origin=c.__instance._$origin[0],i.tooltip=c.__instance._$tooltip[0],delete n.container,delete n.fits,delete n.mode,delete n.outerSize,delete n.whole,n.distance=n.distance.horizontal||n.distance.vertical;var d=e.extend(!0,{},n);if(c.__instance._trigger({edit:function(e){n=e},event:t,helper:i,position:d,type:"position"}),c.__options.functionPosition){var I=c.__options.functionPosition.call(c,c.__instance,i,d);I&&(n=I)}s.destroy();var b,C;"top"==n.side||"bottom"==n.side?(b={prop:"left",val:n.target-n.coord.left},C=n.size.width-this.__options.minIntersection):(b={prop:"top",val:n.target-n.coord.top},C=n.size.height-this.__options.minIntersection),b.val<this.__options.minIntersection?b.val=this.__options.minIntersection:b.val>C&&(b.val=C);var u;u=i.geo.origin.fixedLineage?i.geo.origin.windowOffset:{left:i.geo.origin.windowOffset.left+i.geo.window.scroll.left,top:i.geo.origin.windowOffset.top+i.geo.window.scroll.top},n.coord={left:u.left+(n.coord.left-i.geo.origin.windowOffset.left),top:u.top+(n.coord.top-i.geo.origin.windowOffset.top)},c.__sideChange(c.__instance._$tooltip,n.side),i.geo.origin.fixedLineage?c.__instance._$tooltip.css("position","fixed"):c.__instance._$tooltip.css("position",""),c.__instance._$tooltip.css({left:n.coord.left,top:n.coord.top,height:n.size.height,width:n.size.width}).find(".tooltipster-arrow").css({left:"",top:""}).css(b.prop,b.val),c.__instance._$tooltip.appendTo(c.__instance.option("parent")),c.__instance._trigger({type:"repositioned",event:t,position:n})},__sideChange:function(e,t){e.removeClass("tooltipster-bottom").removeClass("tooltipster-left").removeClass("tooltipster-right").removeClass("tooltipster-top").addClass("tooltipster-"+t)},__targetFind:function(e){var t={},i=this.__instance._$origin[0].getClientRects();if(i.length>1){var n=this.__instance._$origin.css("opacity");1==n&&(this.__instance._$origin.css("opacity",.99),i=this.__instance._$origin[0].getClientRects(),this.__instance._$origin.css("opacity",1))}if(i.length<2)t.top=Math.floor(e.geo.origin.windowOffset.left+e.geo.origin.size.width/2),t.bottom=t.top,t.left=Math.floor(e.geo.origin.windowOffset.top+e.geo.origin.size.height/2),t.right=t.left;else{var c=i[0];t.top=Math.floor(c.left+(c.right-c.left)/2),c=i.length>2?i[Math.ceil(i.length/2)-1]:i[0],t.right=Math.floor(c.top+(c.bottom-c.top)/2),c=i[i.length-1],t.bottom=Math.floor(c.left+(c.right-c.left)/2),c=i.length>2?i[Math.ceil((i.length+1)/2)-1]:i[i.length-1],t.left=Math.floor(c.top+(c.bottom-c.top)/2)}return t}}}),e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2120:[function(e,t,i){t.exports=e("sassify")(".tooltipster-fall, .tooltipster-grow.tooltipster-show {   -webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1);   -moz-transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.15);   -ms-transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.15);   -o-transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.15); }  .tooltipster-base {   display: flex;   pointer-events: none;   position: absolute; }  .tooltipster-box {   flex: 1 1 auto; }  .tooltipster-content {   box-sizing: border-box;   max-height: 100%;   max-width: 100%;   overflow: auto; }  .tooltipster-ruler {   bottom: 0;   left: 0;   overflow: hidden;   position: fixed;   right: 0;   top: 0;   visibility: hidden; }  .tooltipster-fade {   opacity: 0;   -webkit-transition-property: opacity;   -moz-transition-property: opacity;   -o-transition-property: opacity;   -ms-transition-property: opacity;   transition-property: opacity; }  .tooltipster-fade.tooltipster-show {   opacity: 1; }  .tooltipster-grow {   -webkit-transform: scale(0, 0);   -moz-transform: scale(0, 0);   -o-transform: scale(0, 0);   -ms-transform: scale(0, 0);   transform: scale(0, 0);   -webkit-transition-property: -webkit-transform;   -moz-transition-property: -moz-transform;   -o-transition-property: -o-transform;   -ms-transition-property: -ms-transform;   transition-property: transform;   -webkit-backface-visibility: hidden; }  .tooltipster-grow.tooltipster-show {   -webkit-transform: scale(1, 1);   -moz-transform: scale(1, 1);   -o-transform: scale(1, 1);   -ms-transform: scale(1, 1);   transform: scale(1, 1);   -webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.15);   transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.15); }  .tooltipster-swing {   opacity: 0;   -webkit-transform: rotateZ(4deg);   -moz-transform: rotateZ(4deg);   -o-transform: rotateZ(4deg);   -ms-transform: rotateZ(4deg);   transform: rotateZ(4deg);   -webkit-transition-property: -webkit-transform,opacity;   -moz-transition-property: -moz-transform;   -o-transition-property: -o-transform;   -ms-transition-property: -ms-transform;   transition-property: transform; }  .tooltipster-swing.tooltipster-show {   opacity: 1;   -webkit-transform: rotateZ(0);   -moz-transform: rotateZ(0);   -o-transform: rotateZ(0);   -ms-transform: rotateZ(0);   transform: rotateZ(0);   -webkit-transition-timing-function: cubic-bezier(0.23, 0.635, 0.495, 1);   -webkit-transition-timing-function: cubic-bezier(0.23, 0.635, 0.495, 2.4);   -moz-transition-timing-function: cubic-bezier(0.23, 0.635, 0.495, 2.4);   -ms-transition-timing-function: cubic-bezier(0.23, 0.635, 0.495, 2.4);   -o-transition-timing-function: cubic-bezier(0.23, 0.635, 0.495, 2.4);   transition-timing-function: cubic-bezier(0.23, 0.635, 0.495, 2.4); }  .tooltipster-fall {   -webkit-transition-property: top;   -moz-transition-property: top;   -o-transition-property: top;   -ms-transition-property: top;   transition-property: top;   -webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.15);   transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.15); }  .tooltipster-fall.tooltipster-initial {   top: 0 !important; }  .tooltipster-fall.tooltipster-dying {   -webkit-transition-property: all;   -moz-transition-property: all;   -o-transition-property: all;   -ms-transition-property: all;   transition-property: all;   top: 0 !important;   opacity: 0; }  .tooltipster-slide {   -webkit-transition-property: left;   -moz-transition-property: left;   -o-transition-property: left;   -ms-transition-property: left;   transition-property: left;   -webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1);   -webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.15);   -moz-transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.15);   -ms-transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.15);   -o-transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.15);   transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.15); }  .tooltipster-slide.tooltipster-initial {   left: -40px !important; }  .tooltipster-slide.tooltipster-dying {   -webkit-transition-property: all;   -moz-transition-property: all;   -o-transition-property: all;   -ms-transition-property: all;   transition-property: all;   left: 0 !important;   opacity: 0; }  @keyframes tooltipster-fading {   0% {     opacity: 0; }   100% {     opacity: 1; } }  .tooltipster-update-fade {   animation: tooltipster-fading .4s; }  @keyframes tooltipster-rotating {   25% {     transform: rotate(-2deg); }   75% {     transform: rotate(2deg); }   100% {     transform: rotate(0); } }  .tooltipster-update-rotate {   animation: tooltipster-rotating .6s; }  @keyframes tooltipster-scaling {   50% {     transform: scale(1.1); }   100% {     transform: scale(1); } }  .tooltipster-update-scale {   animation: tooltipster-scaling .6s; }  .tooltipster-sidetip .tooltipster-box {   background: #565656;   border: 2px solid #000;   border-radius: 4px; }  .tooltipster-sidetip.tooltipster-bottom .tooltipster-box {   margin-top: 8px; }  .tooltipster-sidetip.tooltipster-left .tooltipster-box {   margin-right: 8px; }  .tooltipster-sidetip.tooltipster-right .tooltipster-box {   margin-left: 8px; }  .tooltipster-sidetip.tooltipster-top .tooltipster-box {   margin-bottom: 8px; }  .tooltipster-sidetip .tooltipster-content {   color: #fff;   line-height: 18px;   padding: 6px 14px; }  .tooltipster-sidetip .tooltipster-arrow {   overflow: hidden;   position: absolute; }  .tooltipster-sidetip.tooltipster-bottom .tooltipster-arrow {   height: 10px;   margin-left: -10px;   top: 0;   width: 20px; }  .tooltipster-sidetip.tooltipster-left .tooltipster-arrow {   height: 20px;   margin-top: -10px;   right: 0;   top: 0;   width: 10px; }  .tooltipster-sidetip.tooltipster-right .tooltipster-arrow {   height: 20px;   margin-top: -10px;   left: 0;   top: 0;   width: 10px; }  .tooltipster-sidetip.tooltipster-top .tooltipster-arrow {   bottom: 0;   height: 10px;   margin-left: -10px;   width: 20px; }  .tooltipster-sidetip .tooltipster-arrow-background, .tooltipster-sidetip .tooltipster-arrow-border {   height: 0;   position: absolute;   width: 0; }  .tooltipster-sidetip .tooltipster-arrow-background {   border: 10px solid transparent; }  .tooltipster-sidetip.tooltipster-bottom .tooltipster-arrow-background {   border-bottom-color: #565656;   left: 0;   top: 3px; }  .tooltipster-sidetip.tooltipster-left .tooltipster-arrow-background {   border-left-color: #565656;   left: -3px;   top: 0; }  .tooltipster-sidetip.tooltipster-right .tooltipster-arrow-background {   border-right-color: #565656;   left: 3px;   top: 0; }  .tooltipster-sidetip.tooltipster-top .tooltipster-arrow-background {   border-top-color: #565656;   left: 0;   top: -3px; }  .tooltipster-sidetip .tooltipster-arrow-border {   border: 10px solid transparent;   left: 0;   top: 0; }  .tooltipster-sidetip.tooltipster-bottom .tooltipster-arrow-border {   border-bottom-color: #000; }  .tooltipster-sidetip.tooltipster-left .tooltipster-arrow-border {   border-left-color: #000; }  .tooltipster-sidetip.tooltipster-right .tooltipster-arrow-border {   border-right-color: #000; }  .tooltipster-sidetip.tooltipster-top .tooltipster-arrow-border {   border-top-color: #000; }  .tooltipster-sidetip .tooltipster-arrow-uncropped {   position: relative; }  .tooltipster-sidetip.tooltipster-bottom .tooltipster-arrow-uncropped {   top: -10px; }  .tooltipster-sidetip.tooltipster-right .tooltipster-arrow-uncropped {   left: -10px; }  ");
},{sassify:36}],2119:[function(e,t,i){t.exports=e("sassify")(".tooltipster-sidetip.tooltipster-borderless .tooltipster-box {   border: none;   background: #1b1b1b;   background: rgba(10, 10, 10, 0.9); }  .tooltipster-sidetip.tooltipster-borderless.tooltipster-bottom .tooltipster-box {   margin-top: 8px; }  .tooltipster-sidetip.tooltipster-borderless.tooltipster-left .tooltipster-box {   margin-right: 8px; }  .tooltipster-sidetip.tooltipster-borderless.tooltipster-right .tooltipster-box {   margin-left: 8px; }  .tooltipster-sidetip.tooltipster-borderless.tooltipster-top .tooltipster-box {   margin-bottom: 8px; }  .tooltipster-sidetip.tooltipster-borderless .tooltipster-arrow {   height: 8px;   margin-left: -8px;   width: 16px; }  .tooltipster-sidetip.tooltipster-borderless.tooltipster-left .tooltipster-arrow, .tooltipster-sidetip.tooltipster-borderless.tooltipster-right .tooltipster-arrow {   height: 16px;   margin-left: 0;   margin-top: -8px;   width: 8px; }  .tooltipster-sidetip.tooltipster-borderless .tooltipster-arrow-background {   display: none; }  .tooltipster-sidetip.tooltipster-borderless .tooltipster-arrow-border {   border: 8px solid transparent; }  .tooltipster-sidetip.tooltipster-borderless.tooltipster-bottom .tooltipster-arrow-border {   border-bottom-color: #1b1b1b;   border-bottom-color: rgba(10, 10, 10, 0.9); }  .tooltipster-sidetip.tooltipster-borderless.tooltipster-left .tooltipster-arrow-border {   border-left-color: #1b1b1b;   border-left-color: rgba(10, 10, 10, 0.9); }  .tooltipster-sidetip.tooltipster-borderless.tooltipster-right .tooltipster-arrow-border {   border-right-color: #1b1b1b;   border-right-color: rgba(10, 10, 10, 0.9); }  .tooltipster-sidetip.tooltipster-borderless.tooltipster-top .tooltipster-arrow-border {   border-top-color: #1b1b1b;   border-top-color: rgba(10, 10, 10, 0.9); }  .tooltipster-sidetip.tooltipster-borderless.tooltipster-bottom .tooltipster-arrow-uncropped {   top: -8px; }  .tooltipster-sidetip.tooltipster-borderless.tooltipster-right .tooltipster-arrow-uncropped {   left: -8px; }  ")},{sassify:36}],748:[function(e,t,i){var n=e("../../ui/util"),c=e("backbone.marionette"),l=e("./list-item/view"),a=e("./template.hbs");t.exports=c.CompositeView.extend({childView:l,template:Handlebars.compile(a),childViewContainer:".venue_list",className:"section_right_content",ui:{upBtn:".btn_up",downBtn:".btn_down"},events:{"click @ui.upBtn":"__moveUp","click @ui.downBtn":"__moveDown"},initialize:function(){this.first=0,this.element="",this.__height=0,this.selectedIndex=0,this.count=this.collection.models.length},onRender:function(){var e=this;e.$(".venue_item").each(function(e,t){jQuery(t).attr("data-sortindex",e)}),this.__switchBtnStatus()},onShow:function(){this.element=this.$(".venue_list")},childEvents:{mouseenter:"__mouseenter",mouseleave:"__mouseleave"},__mouseenter:function(e){clearTimeout(this._timeHwnd),this.trigger("item:mouseenter",this.__markerParam(e.model))},__mouseleave:function(e){var t=this;clearTimeout(this._timeHwnd),t._timeHwnd=setTimeout(function(){t.trigger("item:mouseleave",t.__markerParam(e.model))},1e3)},__moveUp:function(){var e=this;return e.first>0&&e.first--,n.ismobile()?e.__animate(e.element,0):e.__animate(e.element,200),!1},__moveDown:function(){var e=this;return(e.first+3<e.count||n.ismobile()&&e.first<e.count-1)&&e.first++,n.ismobile()?e.__animate(e.element,0):e.__animate(e.element,200),!1},__animate:function(e,t){var i=this;i.__height=i.$(".venue_item").outerHeight(),e.animate({scrollTop:Math.round(i.first*i.__height)},t),i.ui.upBtn.css("cursor","pointer"),i.ui.downBtn.css("cursor","pointer"),0==i.first&&i.ui.upBtn.css("cursor","not-allowed"),i.first==i.count-3&&i.ui.downBtn.css("cursor","not-allowed")},__setCss:function(e){var t=this;!e&&0!=e||-1==e||(t.selectedIndex=e,t.first=e+3>t.count?t.count-3:e,t.__animate(t.element,200)),t.$(".venue_item").removeClass("selected"),-1!=e&&t.$('.venue_item[data-sortindex="'+t.selectedIndex+'"]').addClass("selected")},__switchBtnStatus:function(){var e=this;(e.count<=3&&!n.ismobile()||e.count<=1&&n.ismobile())&&e.$(".switch_button").hide(),e.count<=1&&!n.ismobile()&&e.$(".venue_list").addClass("venue_list_one"),2!=e.count||n.ismobile()||e.$(".venue_list").addClass("venue_list_two"),3!=e.count||n.ismobile()||e.$(".venue_list").addClass("venue_list_three")},__markerParam:function(e){return{model:e,position:{lng:e.get("lng"),lat:e.get("lat")}}}})},{"../../ui/util":2122,"./list-item/view":746,"./template.hbs":747,"backbone.marionette":6}],747:[function(e,t,i){t.exports='<div class="venue_list"></div>\r\n<div class="switch_button">\r\n    <div class="btn_item btn_up"><span class="icon-icon_chervonUp icon"></span></div>\r\n    <div class="btn_item btn_down"><span class="icon-icon_chervonDown icon"></span></div>\r\n    <div class="mobile_btn_item btn_up"><span class="icon-icon_chervonLeft icon"></span></div>\r\n    <div class="mobile_btn_item btn_down"><span class="icon-icon_chervonRight icon"></span></div>\r\n</div>\r\n'},{}],746:[function(e,t,i){var n=e("backbone.marionette"),c=e("./template.hbs");t.exports=n.ItemView.extend({template:function(e){return Handlebars.compile(c)(e)},className:"venue_item",events:{mouseenter:function(){this.trigger("mouseenter",this)},mouseleave:function(){this.trigger("mouseleave",this)}},initialize:function(){var e=this;window.CRSNotice&&1===window.CRSNotice.tag&&e.model.set("disable",1)}}),Handlebars.registerHelper("locationBuildScore",function(e,t,i,n,c){var l="";switch(parseInt(t,10)){case 0:l='<span class="icon-item icon-icon_E009"></span>'+e+" "+local.offers.score_title;break;case 1:l='<span class="icon-item icon-icon_E009"></span>'+e+" "+n;break;case 2:l='<span class="icon-item icon-icon_E009"></span>'+e+"/10 "+n;break;case 3:l='<span class="icon-item icon-icon_E009"></span>'+n}return l})},{"./template.hbs":745,"backbone.marionette":6}],745:[function(e,t,i){t.exports='<!--<div class="item_content">-->\r\n    <!--<div style="background-image:url({{src}})" class="item_pic"></div>-->\r\n    <!--<div class="item_infos">-->\r\n        <!--<div class="desc_container">-->\r\n            <!--<p class="request_event">{{name}}<a href="javascript:void(0)" class="icon">Request for Proposal</a></p>-->\r\n            <!--<ol>-->\r\n                <!--<li>{{info}}</li>-->\r\n            <!--</ol>-->\r\n        <!--</div>-->\r\n\r\n        <!--<ul class="icon_group level">-->\r\n            <!--{{# each icons}}-->\r\n                <!--<li>-->\r\n                    <!--<span class="icon_info icon-icon{{icon_key}}"></span>-->\r\n                    <!--<span class="icon_desc">{{icon_val}}</span>-->\r\n                <!--</li>-->\r\n                <!--&lt;!&ndash;<li><span class="icon icon-icon{{icon_key}}"><span class="item_info">{{icon_val}}</span></span></li>&ndash;&gt;-->\r\n            <!--{{/each}}-->\r\n        <!--</ul>-->\r\n    <!--</div>-->\r\n<!--</div>-->\r\n\r\n<div class="item_content">\r\n    <div style="background-image:url(\'{{carouselimage}}\')" class="item_pic item_pic_width">{{#if badgetitle}}<span class="tooltip">{{badgetitle}}</span>{{/if }}</div>\r\n    <div class="item_infos item_infos_width">\r\n        <div class="hotel_listing_title">{{{locationBuildScore score score_flag score_url reviewmessage reviewcount}}}</div>\r\n        <div class="hotel_desc">{{name}}<a href="{{url}}" class="icon">{{local "quickbook.mobile_view"}}&nbsp;{{local "general.hotel"}}</a></div>\r\n        <div class="hotel_info">{{{testimonialstr}}}</div>\r\n        <div class="room_start">\r\n            {{#ifCond price \'!=\' \'0\'}}{{#if price}}<div class="start_sgd">{{local "general.rooms_start_from"}}<span>{{currency}} {{{num-format price}}}</span></div>{{/if}}{{/ifCond}}\r\n            <div class="start_btn {{#equal disable \'1\'}}disable-crs{{/equal}}"><a href="{{booknowurl}}">{{local "form.book_now"}}</a></div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],744:[function(e,t,i){var n=e("backbone.marionette"),c=e("./template.hbs");t.exports=n.ItemView.extend({template:function(e){return Handlebars.compile(c)(e)}})},{"./template.hbs":743,"backbone.marionette":6}],743:[function(e,t,i){t.exports='<div class="mt-maps-info">\r\n    <div class="mt-maps-popup-picture" style="background-image: url(\'{{carouselimage}}\')"></div>\r\n    <div class="mt-maps-popup-content">\r\n        <div class="content_name">{{name}}</div>\r\n        <a class="content_url" href="{{url}}"><span>{{local "quickbook.mobile_view"}}&nbsp;{{local "general.hotel"}}</span></a>\r\n        <div class="content_drop">\r\n            <div class="port">\r\n                <span class="text-item">{{{locationBuildScore score score_flag score_url reviewmessage reviewcount}}}</span>\r\n                <span>{{info}}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="mt-maps-delta">\r\n    <div class="mt-maps-delta-mask"></div>\r\n</div>'},{}],671:[function(e,t,i){var n=e("set-query-string");t.exports={getParameterByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=t.exec(location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))},setQuery:function(e){n(e)}}},{"set-query-string":37}],719:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("backbone.marionette")),c=e("../../ui/util.js"),l=e("../../../../config/host.js").host,a=e("../../checkout/model/view-event"),o=e("../../checkout/view/userlogin/member-login"),s=(e("../model/checkout-event.js"),e("./points-view.js"));UserModel=e("../../user/model");var r=e("../../../../config/host");t.exports=n.ItemView.extend({template:Handlebars.compile(e("../assets/review-price.hbs")),ui:{popup:".overall-price-points-extend",pointsPopup:".pay-points-expanded",currency:"#currency-selector-wrapper",rules:"#rule-tips",triggerBtn:".pay-points-link",payWithOutPointsWrapper:".pay-without-points-wrapper"},events:{click:"stopEvent","click .price-points-close":"toggleStatus","click .overall-price-points":"toggleStatus",'click [data-opt="use_points"]':"toggleUsePointsStatus",'click [data-opt="next_step"]':"nextStep","click #opt-apply":"applyPoints",'click [data-opt="show-login"]':"showMemberLogin"},stopEvent:function(e){e.stopPropagation()},initialize:function(){this.memberLoginView=new o,this.firstTag=!0,this._defer=jQuery.Deferred(),this.getUser()},getUser:function(){var e=this;jQuery.when(UserModel.getInstance().fetchPromise,this._defer).then(function(t){e.model.set("__userIcon",t&&t[0].points&&t[0].points.icon),e.model.set("__flag",t&&t[0].flag),e.render()})},toggleStatus:function(e){this.ui.popup.is(":visible")?this.ui.popup.hide():this.ui.popup.show(),e.stopPropagation()},toggleUsePointsStatus:function(e){this.ui.pointsPopup.is(":visible")?(this.model.set("__payWithPoints",0),"function"==typeof this.model.setDataInfo&&this.model.setDataInfo(),this.ui.pointsPopup.hide(),this.ui.triggerBtn.show(),this.ui.payWithOutPointsWrapper.show()):(this.model.set("__payWithPoints",1),"function"==typeof this.model.setDataInfo&&this.model.setDataInfo(),this.ui.pointsPopup.show(),this.ui.triggerBtn.hide(),this.ui.payWithOutPointsWrapper.hide()),e&&e.stopPropagation()},showMemberLogin:function(){jQuery("body").append(this.memberLoginView.render().$el.show())},applyPoints:function(e){var t=this;a.trigger("req:loading"),t.promiss=jQuery.ajax({type:"POST",url:l+"/api/booking/checkout/getpionts",data:{redeem:t.pointsWillUse,apply:1},success:function(i){i&&(i.onlinepayprice<=0&&i.costpoints>0&&t.model.set("__useCostPoints",!0),e())},error:function(){}}).always(function(){a.trigger("req:loaded")})},resetPointsPrice:function(e){var t=this;t.model.set("__payPoints",e.banlancepoints),t.model.set("__maxPointsCouldUse",e.costpoints),t.model.set("__remainingPrice",e.onlinepayprice),t.model.set("__totalPrice",e.totalprice),t.model.set("__onlinePrice",e.onlinepayprice),t.model.set("__offlinePrice",e.offlinepayprice),t.model.set("__roomList",e.listcheckoutroom),t.model.set("__productList",e.listcheckoutproduct),t.model.set("__giftList",e.ListCheckoutGiftModels),e.banlancepoints<e.costpoints?(t.model.set("__maxPointsWillUse",e.banlancepoints),t.model.set("__enoughPoints",!1)):(t.model.set("__maxPointsWillUse",e.costpoints),t.model.set("__enoughPoints",!0),t.model.set("__remainPoints",e.banlancepoints-e.costpoints))},transformPoints:function(){var e=this;return e.promiss&&e.promiss.abort&&e.promiss.abort(),e.promiss=jQuery.ajax({type:"POST",url:l+"/api/booking/checkout/getpionts",data:{redeem:e.pointsWillUse,apply:0},success:function(t){e.resetPointsPrice(t)}}),e.promiss},nextStep:function(e){jQuery(e.currentTarget).hasClass("disable")||(window.location.href="/"+r.getLanguage()+"/checkout/guests-info")},onBeforeRender:function(){},onRender:function(){var e=this;this._defer.resolve(),c.loading({container:jQuery(".pay-points-expanded"),promise:e.transformPoints().then(function(){e.pointsView=new s({el:jQuery(".pay-points-expanded"),model:e.model}),e.pointsView.render()})})}})},{"../../../../config/host":45,"../../../../config/host.js":45,"../../checkout/model/view-event":670,"../../checkout/view/userlogin/member-login":723,"../../ui/util.js":2122,"../../user/model":2132,"../assets/review-price.hbs":646,"../model/checkout-event.js":649,"./points-view.js":712,backbone:8,"backbone.marionette":6,underscore:42}],723:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../../abmb/stateful"),a=e("../../../ui/util"),o=e("../../../user/signin/view.js"),s=e("./userlogin.hbs");e("./member-login.sass"),t.exports=c.ItemView.extend(n.extend({},l,{className:"tpl-full-screen-mask",ui:{content:".content"},template:Handlebars.compile(s),initialize:function(){var e=this;e.userSignIn=new o({callBackUrl:window.location.pathname}),e.userSignIn.on("req:close",function(){a.modald.release(e),e.$el.hide(),e.trigger("login:close")})},onRender:function(){var e=this;e.ui.content.append(e.userSignIn.render().el),a.modald.acquire(e)}}))},{"../../../abmb/stateful":72,"../../../ui/util":2122,"../../../user/signin/view.js":2137,"./member-login.sass":724,"./userlogin.hbs":725,backbone:8,"backbone.marionette":6,underscore:42}],725:[function(e,t,i){t.exports='<div class="user-module-mobile member-checkout ">\r\n    <div class="content"></div>\r\n</div>'},{}],724:[function(e,t,i){t.exports=e("sassify")("/**  *  * @param { 300 | bold } $font-weight  * @param { normal     } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal           } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { 300 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { normal } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ .member-checkout {   position: fixed;   left: 50%;   top: 50%;   width: 350px;   overflow: auto;   -webkit-transform: translate(-50%, -50%);   -moz-transform: translate(-50%, -50%);   -ms-transform: translate(-50%, -50%);   -o-transform: translate(-50%, -50%);   transform: translate(-50%, -50%);   padding: 10px; }   .member-checkout div.content .login-without-pm, .member-checkout div.content div.login-input {     background-color: #ababab; }   .member-checkout div.content div.login-input .login-close-btn {     display: block;     position: absolute;     right: 0;     top: -5px;     font-size: 3rem;     color: #fff;     cursor: pointer; }   @media (max-width: 768px) {     .member-checkout div.content {       max-height: 90vh; } }   @media (max-width: 350px) {     .member-checkout {       width: 100%; } }  ");
},{sassify:36}],712:[function(e,t,i){arguments[4][601][0].apply(i,arguments)},{"../assets/points.hbs":638,backbone:8,"backbone.marionette":6,dup:601,underscore:42}],638:[function(e,t,i){t.exports='<a href="javascript:void(0);" class="close" data-opt="use_points"><span class="icon-icon_B017"></span></a>\r\n<img src="{{ __userIcon }}" class="level-logo" alt="">\r\n<div class="points-content">\r\n    <h6 class="title">\r\n        {{#ifMena __flag \'==\' 1 }}\r\n            {{local "checkout.pay_with_points_falcon"}}\r\n        {{else}}\r\n            {{local "checkout.pay_with_points"}}\r\n        {{/ifMena}}\r\n    </h6>\r\n    <p>{{local "checkout.you_have"}} <em>{{#num-format __payPoints \'number\'}}{{/num-format}}</em>\r\n        {{#ifMena __flag \'==\' 1 }}\r\n            {{local "checkout.points_falcon"}}\r\n        {{else}}\r\n            {{local "checkout.points"}}\r\n        {{/ifMena}}\r\n    </p>\r\n    <p>{{local "checkout.your_booking_costs"}} <em>{{#num-format  __maxPointsCouldUse \'number\'}}{{/num-format}}</em>\r\n        {{#ifMena __flag \'==\' 1 }}\r\n            {{local "checkout.points_falcon"}}\r\n        {{else}}\r\n            {{local "checkout.points"}}\r\n        {{/ifMena}}\r\n    </p>\r\n    {{#if __enoughPoints}}\r\n        <p>{{local "checkout.points_left"}} <em>{{#num-format __remainPoints \'number\'}}{{/num-format}}</em>\r\n            {{#ifMena __flag \'==\' 1 }}\r\n                {{local "checkout.points_falcon"}}\r\n            {{else}}\r\n                {{local "checkout.points"}}\r\n            {{/ifMena}}\r\n        </p>\r\n    {{/if}}\r\n</div>\r\n<ul class="points-detail">\r\n    {{#each __roomList}}\r\n        <li>\r\n            <h6 class="title">{{hotelname}}</h6>\r\n            <p class="room-detail">{{roomtypename}}</p>\r\n            <ul class="price-list">\r\n                <li>\r\n                    <p>{{local "checkout.total_charge_cc"}}</p><span class="price">{{ ../__currencymark }}{{#price-format onlinepayprice}}{{/price-format}}</span>\r\n                </li>\r\n                <li>\r\n                    <p>{{local "checkout.total_charge_offline"}}</p><span class="price">{{ ../__currencymark }}{{#price-format offlinepayprice}}{{/price-format}}</span>\r\n                </li>\r\n            </ul>\r\n        </li>\r\n    {{/each}}\r\n    {{#each __productList}}\r\n        <li>\r\n            <h6 class="title">{{title}}</h6>\r\n            <ul class="price-list">\r\n                <li>\r\n                    <p>{{local "checkout.total_charge_cc"}}</p><span class="price">{{ ../__currencymark }}{{#price-format onlinepayprice}}{{/price-format}}</span>\r\n                </li>\r\n            </ul>\r\n        </li>\r\n    {{/each}}\r\n    {{#each __giftList}}\r\n        <li>\r\n            <h6 class="title">{{Title}}</h6>\r\n            <ul class="price-list">\r\n                <li>\r\n                    <p>{{local "checkout.total_charge_cc"}}</p><span class="price">{{ ../__currencymark }}{{#price-format OnlinePayPrice}}{{/price-format}}</span>\r\n                </li>\r\n            </ul>\r\n        </li>\r\n    {{/each}}\r\n</ul>\r\n<div>\r\n    <div class="overall-price-total clearfix">\r\n        <div>\r\n            <div><em>{{ __currencymark }}<span id="total-price">{{#price-format __totalPrice }}{{/price-format}}</span></em></div>\r\n            <!--a.overall-price-points Pay width points-->\r\n        </div>\r\n        <h4 class="total">{{ __title }}</h4>\r\n        <p class="total-tip">{{local "checkout.total_tip" __totalroom __totalexperience}}</p>\r\n    </div>\r\n    <div>\r\n        <div class="overall-price-total clearfix small">\r\n            <div><em>{{ __currencymark }}<span>{{#price-format __onlinePrice }}{{/price-format}}</span></em></div>\r\n            <h4>{{local "checkout.total_charge_cc"}}</h4>\r\n        </div>\r\n        {{#if __maxPointsWillUse}}\r\n            <div class="overall-price-total clearfix small">\r\n                <div><em><span>{{#num-format __maxPointsWillUse \'number\'}} {{/num-format}}</span></em></div>\r\n                <h4>\r\n                    {{#ifMena __flag \'==\' 1 }}\r\n                        {{local "checkout.points_redeemed_falcon"}}\r\n                    {{else}}\r\n                        {{local "checkout.points_redeemed"}}\r\n                    {{/ifMena}}\r\n                </h4>\r\n            </div>\r\n        {{/if}}\r\n        {{#if __hasRoom}}\r\n            <div class="overall-price-total clearfix small">\r\n                <div><em>{{ __currencymark }}<span>{{#price-format __offlinePrice }}{{/price-format}}</span></em></div>\r\n                <h4>{{local "checkout.total_charge_offline"}}</h4>\r\n            </div>\r\n        {{/if}}\r\n    </div>\r\n</div>\r\n<div class="button-block pay-point-next-button">\r\n    <a class="wgt-sqbutton-dark" data-opt="use_points">{{local \'general.cancel\'}}</a>\r\n    <a data-opt="next_step" data-tag="apply_points" class="wgt-sqbutton-blue {{#if __notAllow}} disable{{/if}}" href="javascript:void(0);">{{local "checkout.next_step"}}</a>\r\n</div>'},{}],646:[function(e,t,i){t.exports='<div class="overall-price top-line">\r\n    <form>\r\n\r\n    <!--{{#if __loggedIn}}-->\r\n        <!--&lt;!&ndash;<p class="overall-price-message">{{local "checkout.earn_around"}} <em>{{ __earnPoints }}</em> {{local "checkout.points_purchase"}}</p>&ndash;&gt;-->\r\n\r\n        <!--{{#if __payPoints}}-->\r\n            <!--{{#if __canPayWithPoints}}-->\r\n                <!--{{#not-equal-relax __totalPrice \'0.00\'}}-->\r\n                    <!--<img src="{{__userIcon}}">-->\r\n                    <!--&lt;!&ndash;<img src="/assets/img/checkout/icon_C001_white.svg">&ndash;&gt;-->\r\n                    <!--<div class="pay-points-link">-->\r\n                        <!--{{#if __displaypaypoint }}-->\r\n                            <!--<a href="javascript:void(0);" data-opt="use_points">-->\r\n                                <!--{{#ifMena __flag \'==\' 1 }}-->\r\n                                    <!--{{local "checkout.pay_points_falcon"}}-->\r\n                                <!--{{else}}-->\r\n                                    <!--{{local "checkout.pay_points"}}-->\r\n                                <!--{{/ifMena}}-->\r\n                            <!--</a>-->\r\n                        <!--{{else}}-->\r\n                            <!--<a href="javascript:void(0);" ></a>-->\r\n                        <!--{{/if}}-->\r\n                    <!--</div>-->\r\n                <!--{{/not-equal-relax}}-->\r\n            <!--{{/if}}-->\r\n        <!--{{/if}}-->\r\n        <!--<div class="pay-points-expanded">-->\r\n\r\n        <!--</div>-->\r\n    <!--{{/if}}-->\r\n\r\n    <div class="pay-without-points-wrapper">\r\n        <div class="overall-price-total">\r\n            <div>\r\n                <div>\r\n                    <div id="currency-selector-wrapper" style="display: inline-block">\r\n                        <!--currency selector -->\r\n                    </div>\r\n                    <em>{{ __currencymark }}<span\r\n                            id="total-price">{{#price-format __totalPrice }}{{/price-format}}</span></em>\r\n                </div>\r\n            </div>\r\n            <h4 class="total">{{ __title }}</h4>\r\n            <p class="total-tip">{{local "checkout.total_tip" __totalroom __totalexperience}}</p>\r\n        </div>\r\n\r\n        <div>\r\n            <div class="overall-price-total clearfix small">\r\n                <div><em>{{ __currencymark }}<span>{{#price-format __onlinePrice }}{{/price-format}}</span></em></div>\r\n                <h4>{{local "checkout.total_charge_cc"}}</h4>\r\n            </div>\r\n            {{#if __hasRoom}}\r\n                <div class="overall-price-total clearfix small">\r\n                    <div><em>{{ __currencymark }}<span>{{#price-format __offlinePrice }}{{/price-format}}</span></em>\r\n                    </div>\r\n                    <h4>{{local "checkout.total_charge_offline"}}</h4>\r\n                </div>\r\n            {{/if}}\r\n        </div>\r\n\r\n        <div style="clear: both;"></div>\r\n        <div class="overall-price-points-extend">\r\n            <!--<i class="price-points-close"></i>-->\r\n            <!--<h5>Redeem points</h5>-->\r\n            <!--<p>You have <span>{{ __payPoints }}</span> points.</p>-->\r\n            <!--<p>The Most you could use <span>{{  __maxPointsCouldUse }}</span> points.</p>-->\r\n            <!--<div class="price-points-redeem">-->\r\n            <!--<div>-->\r\n            <!--<h6>Redeem</h6>-->\r\n            <!--<div class="price-points-redeem-input">-->\r\n            <!--<input type="text" value="{{ __maxPointsCouldUse }}" id="points-val"><span>Points</span>-->\r\n            <!--</div>-->\r\n            <!--</div>-->\r\n            <!--<p>1 Points = {{ __currencymark }} <em id="rule-tips" style="font-size: inherit;"></em></p>-->\r\n            <!--</div>-->\r\n            <!--<div class="price-points-newtotal">-->\r\n            <!--<h6>New Total</h6>-->\r\n            <!--<table>-->\r\n            <!--<tbody><tr>-->\r\n            <!--<td id="new-total-points">{{ __payPoints }}</td>-->\r\n            <!--<td>Points</td>-->\r\n            <!--</tr>-->\r\n            <!--<tr>-->\r\n            <!--<td id="new-total-price">${{ __totalPrice }}</td>-->\r\n            <!--<td>{{ __currencymark }}</td>-->\r\n            <!--</tr>-->\r\n            <!--</tbody></table>-->\r\n            <!--<div class="price-points-button"><a class="wgt-sqbutton-black" id="opt-apply">apply</a></div>-->\r\n            <!--</div>-->\r\n        </div>\r\n\r\n        <div class="step-region-button clearfix">\r\n            {{#if __loggedIn}}\r\n                <a class="wgt-sqbutton-blue {{#if __notAllow}} disable {{/if}}" data-opt="next_step"\r\n                   href="javascript:void(0);">{{local "checkout.next_step"}}</a>\r\n            {{else}}\r\n                <a class="wgt-sqbutton-blue {{#if __notAllow}} disable {{/if}}" data-opt="next_step"\r\n                   href="javascript:void(0);">{{local "checkout.next_step"}}</a>\r\n                <!--<a class="wgt-sqbutton-blue mobile-font-s{{#if __notAllow}} disable {{/if}}" data-opt="next_step"-->\r\n                   <!--href="javascript:void(0);">{{local "checkout.guest_checkout"}}</a>-->\r\n                <!--<a class="wgt-sqbutton-blue mobile-font-s print" href="javascript:void(0);"-->\r\n                   <!--data-opt="show-login">{{local "checkout.express_checkout"}}</a>-->\r\n            {{/if}}\r\n        </div>\r\n        <div class="clearfix">\r\n            <!--<a class="overall-price-href">Or continue by phone</a>-->\r\n        </div>\r\n    </div>\r\n    </form>\r\n</div>'},{}],601:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=c.ItemView.extend(n.extend({},{template:Handlebars.compile(e("../assets/points.hbs")),initialize:function(){},onBeforeRender:function(){},onRender:function(){}}));t.exports=l},{"../assets/points.hbs":584,backbone:8,"backbone.marionette":6,underscore:42}],677:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../../component/abmb/stateful"),o=e("../../ui/util"),s=e("../../form/guests/view/default-view.js"),r=e("../../../component/account-management/account-mge/view.js"),g=e("./new-guest/new-guest-layout.js"),d=e("../model/checkout-event.js"),I=e("../model/view-event"),b=e("../model/post-order-model"),C=e("../model/order-status"),u=e("../../../component/account-management/choose-creditcard/view/choose-creditcard.js"),m=e("./new-guest/new-card-add"),p=e("../../../component/account-management/update-profile/form/view.js"),h=e("../../form/creditcard/model/creditcard.js"),G=e("./union-pay/view"),A=e("./currency-selector"),y=e("./discount-code"),Z=e("./aa-number"),B=e("../../../../config/host.js").host,x=e("./communication-preference"),v=e("../../form/selector/model/currency-collection.js");e("../assets/detail/detail.sass"),e("../assets/detail/detail-creditcard.sass");t.exports=l.LayoutView.extend(n.extend({},a,{requestLock:0,template:Handlebars.compile(e("../assets/detail/detail.hbs")),regions:{guests:".guests-region",aanumber:".aa-number-region",profile:".profile-region",currency:".currency-region",discountcode:".discount-code-region",chooseCard:".choose-card-region",cards:".cards-region",cup:".cup-region",authorizeFail:".detail-loggedout",communication:".communication-preference-region"},ui:{errorTips:".error-tips",nextStep:"#next-step"},events:{"click #next-step":"nextStep"},enabledNextStep:function(e){e?this.ui.nextStep.removeClass("disabled"):this.ui.nextStep.addClass("disabled")},initialize:function(e){var t=this;t.guestModel={},t.profileView=new p({isForCheckOut:!0}),t.postOrderModel=new b,t.newGuestLayoutView=new g({model:this.model,noBirthday:!0}),t.guestDefaultView=new s,t.guestEditableView=new r({isForCheckOut:!0}),t.guestCollection=t.guestEditableView.chooseGuest.collection,t.loadingParent=e&&(e.parentView||e.parent),t.chooseCreditcardView=new u({allowAdd:!0,loadingParent:t.loadingParent}),t.cardAddView=new m({model:new h}),t.cupView=new G,t.cupView.on("select:pay",function(){t.cards.empty({preventDestroy:!0}),t.chooseCreditcardView.unselectAll(),t.chooseCreditcardView.addView.$el.show(),t.enabledNextStep(!1)}),t.cupView.on("update:url",function(){var e=t.cupView.getPayType();t.postOrderModel.__payType=e,t.orderStatusModel.__payType=e,t.submitPostOrder(!0)}),t.cupView.on("cup:unselect",function(){t.ui.nextStep.attr("href",""),t.enabledNextStep(!0)}),t.chooseCreditcardView.addView.on("form-show",function(){t.collection?c.trigger("entry-detail-check",function(e){e?(t.cards.show(t.cardAddView),t.chooseCreditcardView.unselectAll(),t.cupView.unselect()):t.__hideChooseCard=!0}):(t.cards.show(t.cardAddView),t.chooseCreditcardView.unselectAll(),t.cupView.unselect())}),t.chooseCreditcardView.on("select:card",function(){t.chooseCreditcardView.addView.cancel(),t.cards.empty({preventDestroy:!0}),t.cupView.unselect()}),t.orderStatusView=e&&e.orderStatusView,t.orderStatusModel=new C,t.deferred=function(e){return jQuery.Deferred(function(t){window.setTimeout(t.resolve,e)})}},doIntervalCheck:function(e,t,i){var n=this;n.orderStatusModel.set("orderid",e),n.orderStatusView.model.set("payment_status",C.PROCESSING),n.orderStatusView.model.set("card_status",C.PROCESSED),n.orderStatusView.model.set("paymentLink",t),I.trigger("req:popup-show"),n.orderStatusView.render(),n.intervalCheck(!!t,i),window.onbeforeunload=function(){return i18n.t("checkout.leave_page")}},intervalCheck:function(e,t){var i=this;return i.orderStatusView.model.get("payment_status")!=C.PROCESSING?!1:(t?(i.orderStatusModel.__payType=t,i.orderStatusModel.cupCall=!0):i.orderStatusModel.cupCall=e,void i.orderStatusModel.save({},{emulateForm:!1,emulateJSON:!0,success:function(t){if(i.orderStatusModel.get("orderid")){var n=t.toJSON();n.orderstatus==C.PROCESSED?(i.orderStatusView.model.set("payment_status",C.PROCESSED),i.orderStatusView.render(),I.trigger("req:popup-hide"),window.Adobe_Data=n.adobeData,o.addStatisticsScript(),d.trigger("nav:change",{target:"confirmation",data:n})):n.orderstatus==C.PROCESSING?i.deferred(2e3).done(function(){i.intervalCheck(e)}):(i.orderStatusView.model.set("payment_status",C.FAILED),i.orderStatusView.render(),window.setTimeout(function(){window.onbeforeunload=null,window.location.reload()},3e3))}else{t.set("__currentroom","newroom"),t.get("__newroom",!0),t.set("__validateRightTips",!0);var c=t.toJSON();c.success==C.PROCESSED?(window.Adobe_Data=c.adobeData,o.addStatisticsScript(),d.trigger("nav:change",{target:"confirmation",data:c})):c.success==C.PROCESSING?i.deferred(2e3).done(function(){i.intervalCheck(e)}):i.handlerFail(c.message,c.status)}}}))},nextStep:function(e){var t=this,i=t.ui.nextStep.attr("href");return t.ui.nextStep.hasClass("disabled")?(e.stopPropagation(),e.preventDefault(),!1):i?(I.trigger("req:popup-show"),void t.intervalCheck(!0)):(t.submitPostOrder(),e.stopPropagation(),e.preventDefault(),!1)},submitPostOrder:function(e){var t=this;t.ui.errorTips.hide(),t.renderNewGuestView.hasExecute?(t.guestModel=t.newGuestLayoutView.guestAddView.model,t.guestModel.validate()):t.guestModel=t.guestCollection.findWhere({primary:!0});var i;if(t.cards.hasView()||t.cupView.selected()||t.__hideChooseCard||(i=t.chooseCreditcardView.getSelectedCard()),(t.renderNewGuestView.hasExecute||t.profileView.model.isValid(!0))&&t.guestModel.isValid()&&(!t.aaNumberView||!t.aaNumberView.ui.checkbox.hasClass("checked")||t.aaNumberView.validate())&&(e||!t.cards.hasView()||t.cardAddView.validate())&&(e||!i||i.validate())){t.guestModel.get("birthday")||t.guestModel.set("birthday","01/01/1900"),t.cardAddView.model.set("TokenID",i?i.model.get("TokenID"):""),t.cardAddView.model.set("security_code",i?i.model.get("security_code"):t.cardAddView.model.get("security_code")),t.cardAddView.model.set("number",i?i.model.get("CardNum"):t.cardAddView.model.get("number")),e?t.loadingParent.switchState("loading:show"):I.trigger("req:popup-show"),window.onbeforeunload=function(){return i18n.t("checkout.leave_page")};var n=!!t.profile.currentView,c=n?t.profileView.userModelSavePromise(t.profileView.model.get("birthday")):!0;jQuery.when(c).done(function(){t.profile.empty(),!t.renderNewGuestView.hasExecute&&n?t.guestCollection.fetch({success:function(i){t.guestDefaultView.collection=i,t.guestDefaultView.render(),t.saveOrder(e)},error:function(){t.handlerFail(i18n.t("checkout.guest_fetch_error"))}}):t.saveOrder(e)}).fail(function(){t.handlerFail(i18n.t("checkout.profile_update_error"))})}},handlerFail:function(e,t){var i=this;-999==t&&i.chooseCreditcardView.collection.fetch({success:function(e){e.length?(i.__hideChooseCard?i.chooseCard.empty({preventDestroy:!0}):i.chooseCard.show(i.chooseCreditcardView),i.cardAddView.model.set("allowAdd",!0),i.cards.empty({preventDestroy:!0})):(i.cards.show(i.cardAddView),i.chooseCard.empty({preventDestroy:!0}))},error:function(){i.cards.show(i.cardAddView),i.chooseCard.empty({preventDestroy:!0})}}),i.cards.hasView()&&i.cardAddView.revealNumber&&i.cardAddView.revealNumber(),i.orderStatusView.model.set("card_status",C.FAILED),i.orderStatusView.render(),window.setTimeout(function(){e==i18n.t("checkout.error")?i.ui.errorTips.css({"background-color":"#31a2ac"}):i.ui.errorTips.css({"background-color":"#ba0c2f"}),i.ui.errorTips.html(e).show(),I.trigger("req:popup-hide"),i.requestLock=0},1e3),i.postOrderModel.set("message","")},saveOrder:function(e){var t=this;t.guestModel.transformFirstLastName(),t.__hideChooseCard?t.cardAddView.model.set("cardFlag",!0):t.cardAddView.model.set("cardFlag",!1),t.postOrderModel.set("aa_member_no",t.aaNumberView&&t.aaNumberView.ui.checkbox.hasClass("checked")?t.aaNumberView.model.get("aa_member_no"):""),t.postOrderModel.set("guest",t.guestModel),t.postOrderModel.set("card",t.cardAddView.model),t.postOrderModel.set("select_preferences",t.communicationPreference&&t.communicationPreference.ui.checkbox.hasClass("checked")),t.postOrderModel.cupCall=e,t.orderStatusView.reset({headerHide:!0,progressAdditionalText:!0}),t.cards.hasView()&&t.cardAddView.maskedNumber&&t.cardAddView.maskedNumber(),e?this.updateCupUrl():(t.requestLock=1,t.postOrderModel.save({},{emulateForm:!1,emulateJSON:!0,success:function(e){var i=e.toJSON();i.success==b.SUCCESS?(t.orderStatusView.model.set("card_status",C.PROCESSED),t.orderStatusView.render(),t.orderStatusModel.set("orderid",i.orderid),t.postOrderModel.set("paymentFlag",i.paymentFlag),t.postOrderModel.set("paystatusFlag",i.paystatusFlag),t.intervalCheck(),I.trigger("req:set-post-flag",i.paymentFlag),I.trigger("req:set-post-status-flag",i.paystatusFlag)):t.handlerFail(i.message,i.status)},error:function(){t.handlerFail(i18n.t("checkout.error"))}})),I.trigger("req:set-post-order",t.postOrderModel)},updateCupUrl:function(){var e=this;e.postOrderModel.save({},{emulateForm:!1,emulateJSON:!0,success:function(){e.ui.nextStep.attr("href",B+e.postOrderModel.get("paymentLink")),e.enabledNextStep(!0),e.cupView.selectedPay(e.postOrderModel.get("payType")),e.orderStatusModel.set("orderid",e.postOrderModel.get("orderid"))},error:function(t,i){e.enabledNextStep(!1),e.cupView.unselectedAll(),e.handlerFail(i.responseJSON&&i.responseJSON.msg||i18n.t("general.network_error"))}}).always(function(){e.loadingParent.switchState("loading:hide")})},renderNewGuestView:function(){this.$el.children().length&&!this.renderNewGuestView.hasExecute&&this.authorizeFail.show(this.newGuestLayoutView)},onBeforeShow:function(){var e=this;I.on("guest_view:change",function(t){"default"==t?(e.communicationPreference.getData(),e.guests.show(e.guestDefaultView,{preventDestroy:!0}),e.guestDefaultView.render()):(e.guests.show(e.guestEditableView,{preventDestroy:!0}),e.guestEditableView.render())})},onRender:function(){var e=this;I.trigger("req:loading"),e.guestCollectionPromiss=e.guestCollection.fetch({success:function(t){var i=t.findWhere({isowner:!0});e.guestDefaultView.collection=t,e.guestDefaultView.render(),i&&!i.get("is_owner_complete")&&e.profile.show(e.profileView,{preventDestroy:!0})},error:function(){arguments[1];e.renderNewGuestView(),e.renderNewGuestView.hasExecute=!0}}),e.guests.show(e.guestDefaultView);var t=!!e.collection;e.communicationPreference=new x,e.communication.show(e.communicationPreference),t&&!e.__hideChooseCard&&"0.00"!=e.options.parentView.collection.onlinePrice&&e.cup.show(e.cupView),e.currencyCollection=new v,e.currencyView=new A({detailView:e,parentView:e.options&&e.options.parentView,parent:e.options&&e.options.parent,currencyCollection:e.currencyCollection,parentModel:e.model,parentCollection:e.collection,model:new c.Model({__hasRoom:!e.collection||e.collection.models.length}),applyPoints:!0}).on("currency:switched",function(){e.cupView.$el.hasClass("selected")&&e.submitPostOrder(!0)}),e.currencyView.model.on("change:currencyMark",function(){e.cupView.setCurrency(e.currencyView.model.get("currencyMark"))}),(t&&e.collection.aa_member_flag||!t&&e.model.get("aa_member_flag"))&&(e.aaNumberView=new Z({aa_member_no:t&&e.collection.aa_member_no||!t&&e.model.get("aa_member_no")||""}),e.aanumber.show(e.aaNumberView)),e.discountCodeView=new y({currencyView:e.currencyView,orderModel:this.model,orderId:o.queryparam("roomorderid")}),t||e.discountCodeView.model.set("flag",e.model.get("__payWithPoints")||0),e.discountCodeView.model.set("discountcode",e.options.parentView&&e.options.parentView.collection?e.options.parentView.collection.discountcode:""),e.discountcode.show(e.discountCodeView);var i=jQuery.when(e.guestCollectionPromiss,e.currencyCollection.fetch({success:function(){e.__hideChooseCard?e.currency.empty({preventDestroy:!0}):e.currency.show(e.currencyView)}}),e.chooseCreditcardView.collection.fetch({success:function(t){t.length?(e.__hideChooseCard?e.chooseCard.empty({preventDestroy:!0}):e.chooseCard.show(e.chooseCreditcardView),e.cardAddView.model.set("allowAdd",!0),t.findWhere({display:!1})||e.cards.empty({preventDestroy:!0})):(e.cardAddView.model.set("allowAdd",!1),e.__hideChooseCard?e.cards.empty({preventDestroy:!0}):e.cards.show(e.cardAddView),e.chooseCard.empty({preventDestroy:!0}))},error:function(){e.cardAddView.model.set("allowAdd",!1),e.__hideChooseCard?e.cards.empty({preventDestroy:!0}):e.cards.show(e.cardAddView),e.chooseCard.empty({preventDestroy:!0})}})).always(function(){I.trigger("req:loaded")});window.setTimeout(function(){i.always(function(){setTimeout(function(){e.cards.empty({preventDestroy:!0}),e.chooseCreditcardView.unselectAll(),e.collection?c.trigger("entry-detail-check",function(t){e.chooseCreditcardView.addView.$el[t?"show":"hide"]()}):e.chooseCreditcardView.addView.$el.show()},50)}),jQuery(window).scrollTop(0)},10)}}))},{"../../../../config/host.js":45,"../../../component/abmb/stateful":72,"../../../component/account-management/account-mge/view.js":78,"../../../component/account-management/choose-creditcard/view/choose-creditcard.js":89,"../../../component/account-management/update-profile/form/view.js":148,"../../form/creditcard/model/creditcard.js":841,"../../form/guests/view/default-view.js":859,"../../form/selector/model/currency-collection.js":860,"../../ui/util":2122,"../assets/detail/detail-creditcard.sass":609,"../assets/detail/detail.hbs":610,"../assets/detail/detail.sass":611,"../model/checkout-event.js":649,"../model/order-status":663,"../model/post-order-model":664,"../model/view-event":670,"./aa-number":672,"./communication-preference":673,"./currency-selector":676,"./discount-code":678,"./new-guest/new-card-add":690,"./new-guest/new-guest-layout.js":692,"./union-pay/view":722,backbone:8,"backbone.marionette":6,underscore:42}],860:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("./currency-model.js"),l=e("../../../../../config/host.js");t.exports=n.Collection.extend({model:c,url:l.getURL("api","account/preferences/currency")})},{"../../../../../config/host.js":45,"./currency-model.js":861,backbone:8,underscore:42}],861:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../../config/host.js");t.exports=n.Model.extend({url:c.getURL("api","account/preferences/currency"),defaults:{code:"",name:"",mark:""},parse:function(e){return e}})},{"../../../../../config/host.js":45,backbone:8,underscore:42}],859:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("backbone.marionette")),c=e("../../../checkout/model/view-event.js");t.exports=n.ItemView.extend({className:"guest-default",events:{"click #opt-edit":"edit"},serializeData:function(){return{guests:this.collection&&this.collection.toJSON()}},edit:function(){c.trigger("guest_view:change","edit")},template:Handlebars.compile(e("../assets/guests-default.hbs")),onRender:function(){}})},{"../../../checkout/model/view-event.js":670,"../assets/guests-default.hbs":858,backbone:8,"backbone.marionette":6,underscore:42}],858:[function(e,t,i){t.exports='{{#each guests}}\r\n    {{#if this.primary }}\r\n        <form>\r\n        <div class="detail-guests-item detail-guests-initial card bg-white guest">\r\n            <div class="detail-guests-info card-info">\r\n                {{#if isowner}}\r\n                    <img src="{{avatar}}"/>\r\n                {{else}}\r\n                    <span class="{{guestavatar}}"></span>\r\n                {{/if}}\r\n                <div>\r\n                    <h6>{{ this.title }} {{ this.first_name }} {{ this.last_name }}</h6>\r\n                    <p style="display: block;">{{ this.address }}</p>\r\n                    <input type="hidden" name="email" value="{{ this.email }}">\r\n                </div><a class="detail-edit" id="opt-edit">{{local "checkout.edit_diff_guest"}}</a>\r\n            </div>\r\n            <!--<p class="detail-logout" style="margin-top: 0"><a>Not {{ this.last_name }}? Logout</a></p>-->\r\n        </div>\r\n        </form>\r\n    {{/if}}\r\n{{/each}}\r\n\r\n\r\n\r\n\r\n\r\n'},{}],722:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("./template.hbs"),l=e("../new-guest/card-bin");t.exports=n.ItemView.extend({className:"card e-wallets bg-grey unionpay",events:{"click @ui.name":"select","click @ui.list .e-wallets-union-pay-item":"selectPay"},ui:{name:".e-union-pay",list:".e-wallets-union-pay-list",pays:".e-wallets-union-pay-item i.radio",radio:".e-union-pay i.radio",aliPay:'[data-view="aliPay"]',payPal:'[data-view="payPal"]'},template:Handlebars.compile(c),serializeData:function(){return{currentPayType:this.currentPayType}},initialize:function(){this.renderPromise=jQuery.Deferred()},onRender:function(){this.isRender=!0,this.renderPromise.resolve()},unselect:function(){this.isRender&&(this.ui.list.hide(),this.ui.radio.removeClass("selected")),this.trigger("cup:unselect")},select:function(){this.ui.radio.hasClass("selected")||(this.ui.radio.addClass("selected"),this.unselectedAll(),this.ui.list.show(),this.trigger("select:pay"))},selected:function(){return this.isRender&&this.ui.radio.hasClass("selected")},selectedPay:function(e){e=e||this.currentPayType,this.currentPayType=e,this.ui.pays.each(function(){var t=jQuery(this);t.attr("data-pay-type")==e?t.addClass("checked"):t.removeClass("checked")})},unselectedAll:function(){this.ui.pays.removeClass("checked")},selectPay:function(e){this.currentPayType=jQuery(e.currentTarget).find("i.radio").attr("data-pay-type"),this.trigger("update:url")},getPayType:function(){return this.currentPayType},setCurrency:function(e){var t=this,i=l.support(e);t.renderPromise.then(function(){t.ui.aliPay[i.aliPay?"show":"hide"](),t.ui.payPal[i.payPal?"show":"hide"]()})}})},{"../new-guest/card-bin":689,"./template.hbs":721,"backbone.marionette":6,underscore:42}],721:[function(e,t,i){t.exports='<div class="position-relative e-wallets-name e-union-pay"><i class="radio"></i>\r\n    <div class="card-info"><img style="max-width: 54px; max-height: 36px;" src="/assets/img/checkout/card/png/icon-e-wallet.png" alt=""><div class="unionpay-main">\r\n            <h6 style="font-size: 24px;">{{local "checkout.other_payment_methods"}}</h6>\r\n        </div>\r\n        <div style="display: block; width: calc(98.5% - 40px - 4.2em);"><span style="width: calc(3.8em + 1rem); max-width: calc(54px + 1rem);"></span><p style="font-size: 18px; line-height: 1.4em">{{local "checkout.other_payment_methods_redirect"}}</p>\r\n        </div>\r\n        <div style="display: block;padding-top: 0.7em">\r\n            <span style="max-width: 54px; display: inline-block; width: 3.8em; margin-right: 1rem;"></span><img style="width: 40px;height: 24px;margin-left: 1px;margin-right: 3px;" alt="" src="/assets/img/checkout/card/new/UnionPay-dark.png"\r\n            ><img style="width: 40px;height: 24px;margin-left: 1px;margin-right: 3px; display: none;" data-view="aliPay" alt="" src="/assets/img/checkout/card/png/icon-alipay.png"\r\n            ><img style="width: 40px;height: 24px;margin-left: 1px;margin-right: 3px; display: none;" data-view="payPal" alt="" src="/assets/img/checkout/card/png/pp-acceptance-large.png">\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="e-wallets-union-pay-list">\r\n    <div class="position-relative e-wallets-union-pay-item"><i class="radio" data-pay-type="unionPay"></i>\r\n        <div class="card-info"><img style="max-width: 54px; max-height: 36px;" alt="" src="/assets/img/checkout/card/new/UnionPay-dark.png"><div class="unionpay-main">\r\n                <h6 style="font-size: 24px;">{{local \'checkout.china_union_pay\'}}</h6>\r\n            </div>\r\n            <div style="display: block; width: calc(98.5% - 40px - 4.2em);"><span style="width: calc(3.8em + 1rem); max-width: calc(54px + 1rem);"></span><p style="font-size: 16px; line-height: 1.4em;">{{local \'checkout.china_union_pay_redirect\'}}</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="position-relative e-wallets-union-pay-item" style="display: none;" data-view="aliPay"><i class="radio" data-pay-type="aliPay"></i>\r\n        <div class="card-info"><img style="max-width: 54px; max-height: 36px;" alt="" src="/assets/img/checkout/card/png/icon-alipay.png"><div class="unionpay-main">\r\n                <h6 style="font-size: 24px;">{{local "checkout.pay_with_alipay"}}</h6>\r\n            </div>\r\n            <div style="display: block; width: calc(98.5% - 40px - 4.2em);"><span style="width: calc(3.8em + 1rem); max-width: calc(54px + 1rem);"></span><p style="font-size: 16px; line-height: 1.4em;">{{local "checkout.pay_with_alipay_redirect"}}</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="position-relative e-wallets-union-pay-item" style="display: none;" data-view="payPal"><i class="radio" data-pay-type="payPal"></i>\r\n        <div class="card-info"><img style="max-width: 54px; max-height: 36px;" alt="" src="/assets/img/checkout/card/png/pp-acceptance-large.png"><div class="unionpay-main">\r\n                <h6 style="font-size: 24px;">{{local "checkout.pay_with_paypal"}}</h6>\r\n            </div>\r\n            <div style="display: block; width: calc(98.5% - 40px - 4.2em);"><span style="width: calc(3.8em + 1rem); max-width: calc(54px + 1rem);"></span><p style="font-size: 16px; line-height: 1.4em;">{{local "checkout.pay_with_paypal_redirect"}}</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';
},{}],692:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../../abmb/stateful"),a=(e("../../model/view-event"),e("./new-guest-add"));e("./new-card-add"),e("./sign-in-checkout"),e("../../model/post-order-model"),e("../../../form/creditcard/model/creditcard.js"),t.exports=c.LayoutView.extend(n.extend({},l,{template:!1,events:{"click .loggedout-guest-select i":"setTab"},initialize:function(e){this.guestAddView=new a({noBirthday:e&&e.noBirthday}),this.guestAddView.switchState("form:show"),this.switchState("login:hide")},setTab:function(e){var t=jQuery(e.currentTarget),i=jQuery(".loggedout-guest-select");i.find(".radio").each(function(){jQuery(this).removeClass("checked")}),t.addClass("checked"),"show"==this.getState("login")?(jQuery(".cards-region").show(),this.switchState("login:hide")):(jQuery(".cards-region").hide(),this.switchState("login:show"))},onRender:function(){this.$el.append(this.guestAddView.render().el)}}))},{"../../../abmb/stateful":72,"../../../form/creditcard/model/creditcard.js":841,"../../model/post-order-model":664,"../../model/view-event":670,"./new-card-add":690,"./new-guest-add":691,"./sign-in-checkout":693,backbone:8,"backbone.marionette":6,underscore:42}],693:[function(e,t,i){var n=e("../../../user/signin/view"),c=e("../../../../../config/host").urls;t.exports=n.extend({template:Handlebars.compile(e("../../assets/new-guest/sign-in-checkout.hbs")),serializeData:function(){return{callBackUrl:encodeURIComponent(c.checkout)}}})},{"../../../../../config/host":45,"../../../user/signin/view":2137,"../../assets/new-guest/sign-in-checkout.hbs":625}],2137:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../abmb/stateful.js"),a=e("./model"),o=e("../../../../config/host.js"),s=(e("../../handlebar/helper.js"),e("../../ui/validator")),r=e("../../ui/util"),g=e("../../quick-book-hotel/cookie-object");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("./template.hbs")),ui:{signin:"a.signin",error:".error-msg",password:"[data-bind=password]",email:"[data-bind=email]",errorFacebook:".sigin-facebook",errorGoogle:".sigin-google",errorLinkedin:".sigin-linkedin",optSignIn:"#opt-sign-in",img:"[data-feedback='img']",voice:"[data-feedback='voice']",item_img:"[data-item='img']"},events:{"enter input":"onLoginClick","click #opt-sign-in":"onLoginClick","click .login-close-btn":function(){this.trigger("req:close")},"click @ui.img":function(){var e=o.getURL("api","captcha/image?r="+Math.random());jQuery(".code-bottom .captcha-img").each(function(t,i){jQuery(i).attr("src",e)})},"click @ui.voice":function(){this.IF_CLICK_AUDIO&&this.autoPlay()}},className:function(){return"content-login"},noAutoOpenUrlPatterns:["/bookings/"],focus:function(){this.ui.email.focus()},onRender:function(){var e=this,t=o.getURL("api","captcha/image?r="+Math.random());e.ui.item_img.attr("src",t),jQuery(".code-bottom .captcha-img").each(function(e,i){jQuery(i).attr("src",t)}),/#login/.test(window.location.hash)&&this.focus(),this.$("#login_form").on("keyup keypress",function(t){var i=t.keyCode||t.which;return 13===i?(e.onLoginClick(),t.preventDefault(),!1):void 0});var i=window.location.href;i.indexOf("fblogin_error")>=0&&(e.ui.errorFacebook.addClass("error-status"),jQuery(".user-module-wrapper").removeClass("expand-off").addClass("expand-on")),i.indexOf("googlelogin_error")>=0&&(e.ui.errorGoogle.addClass("error-status"),jQuery(".user-module-wrapper").removeClass("expand-off").addClass("expand-on")),i.indexOf("linkedinlogin_error")>=0&&(e.ui.errorLinkedin.addClass("error-status"),jQuery(".user-module-wrapper").removeClass("expand-off").addClass("expand-on"))},autoPlay:function(){var e=this;e.IF_CLICK_AUDIO=!1,e.audio.setAttribute("src",o.getURL("api","captcha/voice?r="+Math.random())),e.audio.load(),e.audio.play(),e.audio.oncanplay=function(){e.audio.play()},e.audio.onended=function(){e.IF_CLICK_AUDIO=!0}},initialize:function(e){var t=this;t.model=new a,t.IF_CLICK_AUDIO=!0,t.audio=new Audio,s.bind(t,{lazeModifyStyle:!0}),r.getUser().on("req:login",function(){t.focus()});var i="undefined"==typeof quickbookformena?0:quickbookformena;"undefined"!=typeof quickbookformena&&t.model.set("quickbookformena",i);var n=this.model.get("urls").sign_up+"#callbackurl="+this.model.get("urls").checkout,c="<a class='pc-a' id='opt-sign-up' href='"+n+"'>"+i18n.t("form.sign_up_now")+"</a>";this.model.set("html_a",c)},onLoginClick:function(){this.model.set("remember_me",this.$("#remember").is(":checked")?1:"");var e=this;return e.ui.optSignIn.hasClass("disabled")?!1:(e.ui.item_img.length>0&&(e.model.validation.captcha.required=!0),this.trigger("save:form"),void(this.model.isValid(!0)&&(this.$("input").blur(),r.loading({container:this.el,loading:"",showerror:!1,promise:this.model.save().success(function(t){var i=t.other&&t.other.url?t.other.url:null,c=i18n.t("login.re_activate_account").replace("{0}",i);if(!t.success){3===t.status?(e.ui.password.focus(),e.ui.optSignIn.addClass("disabled"),e.ui.error.show().html(c||"")):(4===t.status&&e.ui.email.focus(),e.ui.error.show().html(t.message||""));var l=o.getURL("api","captcha/image?r="+Math.random());return jQuery(".code-bottom .captcha-img").each(function(e,t){jQuery(t).attr("src",l)}),!1}n.every(e.noAutoOpenUrlPatterns,function(e){return!new RegExp(e,"ig").test(location.href)})&&jQuery.cookie("login_default_open","true",{path:"/"}),g.save();var a="undefined"==typeof returnUrl?"":returnUrl,s=a?a:r.queryParamFromHash("returnUrl")?decodeURIComponent(r.queryParamFromHash("returnUrl")):window.location.href.indexOf("sign-up")>-1?"/":window.location.href;jQuery("#login_form").attr("action",s),jQuery("#login_form").submit(),setTimeout(function(){r.reload()},1e3)}).error(function(t){e.ui[t&&t.responseJSON.length&&"email"==t.responseJSON[0].field?"email":"password"].focus();var i=o.getURL("api","captcha/image?r="+Math.random());jQuery(".code-bottom .captcha-img").each(function(e,t){jQuery(t).attr("src",i)})})}).model.on("change:error",function(t,i){e.ui.error.show().html(i);var n=o.getURL("api","captcha/image?r="+Math.random());jQuery(".code-bottom .captcha-img").each(function(e,t){jQuery(t).attr("src",n)})}))))}}))},{"../../../../config/host.js":45,"../../abmb/stateful.js":72,"../../handlebar/helper.js":1025,"../../quick-book-hotel/cookie-object":1822,"../../ui/util":2122,"../../ui/validator":2123,"./model":2135,"./template.hbs":2136,backbone:8,"backbone.marionette":6,underscore:42}],2136:[function(e,t,i){t.exports='<!--sing-in-area-->\r\n<div class="login-input">\r\n    <p style="position: relative" class="signin_title">\r\n        {{local "login.login_form_title"}}\r\n        <!--<span class="icon-icon_B017 login-close-btn"></span>-->\r\n    </p>\r\n    <div class="signin-with-others">\r\n        <div class="sigin-facebook">\r\n            <a class="wgt-sqbutton-facebook" href="{{urls.facebook}}">\r\n                <span class="icon-icon_B028"></span><span>{{local "login.sign_fb_btn"}}</span>\r\n            </a>\r\n            <p>{{local "login.error_facebook"}}</p>\r\n        </div>\r\n        <div class="sigin-google">\r\n            <a class="wgt-sqbutton-google" href="{{urls.google}}">\r\n                <span class="icon-icon_B048"></span><span>{{local "login.sign_google_btn"}}</span>\r\n            </a>\r\n            <p>{{local "login.error_google"}}</p>\r\n        </div>\r\n        <div class="sigin-linkedin">\r\n            <a class="wgt-sqbutton-linkedin" href="{{urls.linkedin}}">\r\n                <span class="icon-icon_B034"></span><span>{{local "login.sign_linkedin_btn"}}</span>\r\n            </a>\r\n            <p>{{local "login.error_linkedin"}}</p>\r\n        </div>\r\n\r\n    </div>\r\n    <b>{{local "login.or"}}</b>\r\n    <div class="form has-error login-form">\r\n        <form id="login_form" method="POST" action="">\r\n            <div class="field input-border-newlook">\r\n                <div class="input-box">\r\n                    <input id="login_username" name="username" type="text" data-bind="email" placeholder="{{local "form.email"}}" maxlength="254">\r\n                </div>\r\n                <span class="error-tip null"> {{local "form_error.email_empty"}} </span>\r\n                <span class="error-tip not-null"> {{local "form_error.email_invalid"}} </span>\r\n            </div>\r\n            <div class="field input-border-newlook">\r\n                <div class="input-box">\r\n                    <input id="login_password" name="password" data-bind="password" placeholder="{{local "form.password"}}" type="password"/>\r\n                </div>\r\n                <span class="error-tip null"> {{local "form_error.password_empty"}}</span>\r\n                <span class="error-tip not-null"> {{local "form_error.password_invalid"}}</span>\r\n            </div>\r\n            <div class="field input-border-newlook">\r\n                <div class="input-box">\r\n                    <input name="captcha" data-bind="captcha" placeholder="{{local "form.type_captcha"}}" type="text" autocomplete="off"/>\r\n                </div>\r\n                <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n                <span class="error-tip not-null"> {{local "form_error.cannot_be_empty"}}</span>\r\n            </div>\r\n            <div class="code-bottom">\r\n                <img src="" alt="" class="captcha-img" data-item="img">\r\n                <div class="captcha-icons">\r\n                    <div class="captcha-icon captcha-click" data-feedback="img">\r\n                        <span class="voice-icon icon-icon_B078"></span>\r\n                        <span>{{local "form.new_captcha"}}</span>\r\n                    </div>\r\n                    <div class="captcha-icon captcha-voice" data-feedback="voice">\r\n                        <span class="voice-icon icon-icon_K009"></span>\r\n                        <span>{{local "form.captcha_vision_mpaired"}}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!--<button id="login_button" style="display:none" type="submit"></button>-->\r\n        </form>\r\n        <div class="field field-newlook">\r\n            <section class="checkbox-container">\r\n                <i class="checkbox" data-bind="remember_me"></i>\r\n                <span>{{local "login.remember_me"}}</span>\r\n            </section>\r\n            <a class="forget-pssd" href="{{urls.forget_pwd}}">{{local "login.forgot_pwd"}}</a>\r\n            <p class="error-msg"></p>\r\n        </div>\r\n        <a class="wgt-sqbutton-black signin" id="opt-sign-in">{{local "form.sign_in"}}</a>\r\n    </div>\r\n</div>\r\n\r\n<div class="login-without-pm">\r\n    <p class="pm-moble">{{local "login.sign_up_desc"}}</p>\r\n    <div class="pm-pc">\r\n        <p>\r\n            <!--Not a Member yet? {{{html_a}}} and get discounts right away.-->\r\n            {{{local "login.not_a_member_yet_register_now" html_a}}}\r\n        </p>\r\n    </div>\r\n    <!--<a class="wgt-sqbutton-black" href="{{urls.sign_up}}#callbackurl={{ urls.checkout }}" id="opt-sign-up">{{local "form.sign_up_now"}}</a>-->\r\n</div>\r\n</div>'},{}],2135:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js");e("../../ui/util"),t.exports=n.Model.extend({url:c.getURL("mapi","account/login"),defaults:{urls:{forget_pwd:c.getURL("forget_pwd"),sign_up:c.getURL("sign_up"),checkout:window.location.pathname+window.location.search,facebook:"/mapi/account/login/facebook",google:"/mapi/account/login/google-plus",linkedin:"/mapi/account/login/linkedin"}},validation:{email:{required:!0,pattern:"email"},password:{required:!0},remember_me:{required:!1},captcha:{required:!1}}})},{"../../../../config/host.js":45,"../../ui/util":2122,backbone:8,underscore:42}],625:[function(e,t,i){t.exports='<!--sing-in-area-->\r\n<div class="login-input" style="background: none;">\r\n    <p style="margin-bottom: 10px;">Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</p>\r\n    <a class="wgt-sqbutton-facebook" href="/mapi/account/login/facebook">\r\n        <i class="icon"></i>\r\n        <span>{{local "form.login_with_facebook"}}</span>\r\n    </a>\r\n    <a class="wgt-sqbutton-google" href="/mapi/account/login/google-plus">\r\n        <i class="icon"></i><span>{{local "form.login_with_google_plus"}}</span>\r\n    </a>\r\n    <div class="form">\r\n        <div class="field">\r\n            <label>{{local "form.email"}}</label>\r\n            <div class="input-box">\r\n                <input name="user.mail" placeholder="Email" id="user-mail">\r\n            </div>\r\n            <span class="error-tip not-null"> {{local "form_error.invalid_email"}}</span>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        </div>\r\n        <div class="field">\r\n            <label>{{local "form.password"}}</label>\r\n            <div class="input-box">\r\n                <input name="user.password" placeholder="Password" id="user-password" type="password">\r\n            </div>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        </div>\r\n        <div class="field">\r\n            <div class="checkbox-container">\r\n                <i class="checkbox checked"></i>\r\n                <p>{{local "login.remember_me"}}</p><a>{{local "login.forgot_pwd"}}</a>\r\n            </div>\r\n        </div>\r\n        <span class="error-msg">UserName or Password Incorrect!</span>\r\n    </div>\r\n    <a class="wgt-sqbutton-black" id="opt-sign-in" href="#login&{{ callBackUrl }}">{{local "form.sign_in"}}</a>\r\n</div>\r\n'},{}],691:[function(e,t,i){var n=e("../../../form/guest/view/guest-add");t.exports=n.extend({template:Handlebars.compile(e("../../assets/new-guest/new-guest-add.hbs")),selectCheckBox:function(e){var t=jQuery(e.currentTarget);t.hasClass("checked")?(t.removeClass("checked"),this.ui.formWrapper.hide(),this.model.set("__otherGuest",!1)):(t.addClass("checked"),this.ui.formWrapper.show(),this.model.set("__otherGuest",!0))}})},{"../../../form/guest/view/guest-add":855,"../../assets/new-guest/new-guest-add.hbs":624}],690:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=(e("backbone.marionette"),e("../../../ui/date2selects/view")),l=e("../../../account-management/choose-creditcard/view/add.js"),a=e("../../../../../config/host"),o=e("./card-bin"),s=n.Model.extend({url:function(){return a.getURL("api","booking/checkout/checkcardtype?num="+this.get("card"))}});t.exports=l.extend({template:Handlebars.compile(e("../../assets/new-guest/new-card-add.hbs")),ui:{expire:"[data-bind-to=expire]",cardBank:".e-wallets-list li",number:'[data-bind="number"]'},events:{"click .close-icon":"hideForm","input @ui.number":"getCardBin"},initialize:function(){l.prototype.initialize.apply(this,arguments),this._cardBinModel=new s},getCardBin:function(){var e=this.ui.number.val().replace(/\s+/g,"");e.length>=16?(this._cardBinModel.set("card",e),this._cardBinAsync&&this._cardBinAsync.abort(),this._cardBinAsync=this._cardBinModel.fetch(),this._cardBinAsync.then(jQuery.proxy(this.changeCardSelection,this))):this.ui.cardBank.removeClass("disabled")},changeCardSelection:function(){var e=o.lookup(this._cardBinModel.get("CreditCardTypeGCProductID"));this.ui.cardBank.each(function(){var t=jQuery(this);t.attr("data-card-bank")==e?t.removeClass("disabled"):t.addClass("disabled")})},hideForm:function(){this.trigger("close")},onRender:function(){this.numberInput=this.$el.find("input[name=number]"),this.numberMaskInput=this.$el.find("input[name=numberMask]"),this.numberInput.bind("input",function(){this.value=this.value.replace(/\s/g,"").replace(/\B(.{3})(.)/g,"$1 $2")}),c.autoCreate(this.ui.expire)},maskedNumber:function(){var e=this.numberInput.val().replace(/^(.{4})(.*)(.{4})$/,function(e,t,i,n){return t+i.replace(/[^\s]/g,"*")+n});this.numberInput.hide(),this.numberMaskInput.show().val(e),this.model.set("number",this.numberInput.val().replace(/\s/g,""))},revealNumber:function(){this.numberInput.show(),this.numberMaskInput.hide()}})},{"../../../../../config/host":45,"../../../account-management/choose-creditcard/view/add.js":88,"../../../ui/date2selects/view":2068,"../../assets/new-guest/new-card-add.hbs":623,"./card-bin":689,backbone:8,"backbone.marionette":6,underscore:42}],2068:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=(e("backbone.marionette"),e("moment"),e("underscore.string/sprintf")),a=e("../autocreator");DateView=t.exports=a.extend({template:Handlebars.compile(e("./template.hbs")),ui:{selects:"select",yy:"select[name=yy]",mm:"select[name=mm]"},events:{"change select[name=mm]":function(){this.model.set({mm:this.ui.mm.val()})},"change select[name=yy]":function(){this.model.set({yy:this.ui.yy.val()})}},initialize:function(){var e=this;a.prototype.initialize.apply(this,arguments),e.model=new c.Model({mm:e.$el.data("month"),yy:e.$el.data("year"),bindto:e.$el.data("bind-to")&&(e.$el.data("parent-container")?e.$el.parent():jQuery("body")).find(l("[data-bind=%s]",e.$el.data("bind-to"))),format:e.$el.data("format")||"MM/YYYY",incomplete:e.$el.data("allow-incomplete")}),e.model.get("bindto")&&!e.model.get("bindto").length&&e.model.set({bindto:jQuery(l('<input type="hidden" data-bind="%s"/>',e.$el.data("bind-to"))).insertAfter(e.$el)}),e.model.on("change:mm change:yy",function(){var t=[e.model.get("mm"),e.model.get("yy")].join("/");e.$el.attr({"data-value":t})}),e.model.on("change:moment change:format change:bindto change:mm change:yy",function(){e.model.get("bindto")&&e.model.get("bindto").val(e.model.get("yy")&&e.model.get("mm")?e.model.get("mm")+"/"+e.model.get("yy"):"").trigger("focusout")});var t=/^\d+\/\d+$/.test(e.$el.data("value"))&&e.$el.data("value").split("/")||[];2==t.length&&e.model.set({mm:t[0],yy:t[1]})},onRender:function(){var e=this,t=Handlebars.compile('<option value="{{value}}"{{#if selected}} selected{{/if}}>{{text}}</option>');e.ui.yy.html([t({value:"",text:"YYYY"})].concat(n.range((new Date).getFullYear(),2100).map(function(i){return t({value:i-2e3,text:i,selected:e.model.get("yy")==i-2e3})})).join("")),e.ui.mm.html([t({value:"",text:"MM"})].concat(n.map("01 02 03 04 05 06 07 08 09 10 11 12".split(" "),function(i,n){return t({value:l("%02d",n+1),text:i,selected:e.model.get("mm")==n+1})})).join(""))}},{selector:"[data-component=date2selects]"})},{"../autocreator":2052,"./template.hbs":2067,backbone:8,"backbone.marionette":6,moment:16,underscore:42,"underscore.string/sprintf":41}],2067:[function(e,t,i){t.exports='<div class="input-box small-size select mm-container">\r\n    <select name="mm"></select>\r\n    <i class="input-select"></i>\r\n</div>\r\n<span class="split">/</span>\r\n<div class="input-box small-size select yy-container">\r\n    <select name="yy"></select>\r\n    <i class="input-select"></i>\r\n</div>\r\n\r\n'},{}],623:[function(e,t,i){t.exports='<div class="card e-wallets bg-grey creditcard-payment selected">\r\n    <div class="position-relative e-wallets-name"><i class="radio"></i>\r\n        <div class="card-info"><img style="max-width: 54px; max-height: 36px; width: 3.8em; margin-right: 1rem; vertical-align: middle; display: inline-block;" src="/assets/img/checkout/card/png/icon-cc.png"\r\n        ><h6 style="font-size: 24px;">{{local "checkout.pay_with_new_card"}}</h6>\r\n        </div>\r\n    </div>\r\n    <div class="e-wallets-body" style="white-space: nowrap; cursor: pointer;"><span style="max-width: 54px; width: 3.8em; margin-right: 1rem; vertical-align: middle; display: inline-block;"></span><ul class="e-wallets-list" style="white-space: normal;">\r\n            <li class="icon-visa" data-card-bank="visa"></li>\r\n            <li class="icon-master" data-card-bank="master"></li>\r\n            <li class="icon-discover" data-card-bank="discover"></li>\r\n            <!--<li class="icon-cirrus" data-card-bank="cirrus"></li>-->\r\n            <li class="icon-maestro" data-card-bank="maestro"></li>\r\n            <li class="icon-jcb" data-card-bank="jcb"></li>\r\n            <li class="icon-diners" data-card-bank="diners"></li>\r\n            <li class="icon-amex" data-card-bank="amex"></li>\r\n        </ul>\r\n    </div>\r\n    <div class="form e-wallets-body">\r\n        <div class="field" style="margin-top: 0;">\r\n            <label>{{local "form.cardholder_name"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="name" placeholder="{{local \'account.credit_card_holder_name_placeholder\'}}" name="name" maxlength="75">\r\n                <i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip null">{{local "form_error.cardholder_name_empty"}}</span>\r\n            <span class="error-tip not-null">{{local "form_error.only_accepts_latin"}}</span>\r\n        </div>\r\n\r\n        <div class="field field-half">\r\n            <label>{{local "form.credit_card_number"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" placeholder="0000 0000 0000 0000" data-bind="number" name="number" maxlength="25">\r\n                <input type="text" placeholder="0000 0000 0000 0000" style="display: none" name="numberMask">\r\n                <i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip null">{{local "form_error.credit_card_number_empty"}}</span>\r\n            <span class="error-tip not-null">{{local "form_error.credit_card_number_invalid"}}</span>\r\n        </div>\r\n        <div class="field field-half field-half-right">\r\n            <label>\r\n                <span>{{local "form.security_code"}}</span>\r\n            <span class="icon-icon_B008 security-tooltip">\r\n                <div class="security-tooltip-popup">\r\n                    <div class="content">\r\n                        <p>{{local "checkout.security_code_tooltip_header"}}</p>\r\n                        <div><span>{{local "checkout.security_code_tooltip_visa"}}</span><img src=\'/assets/img/checkout/visa_card.svg\' alt=""/></div>\r\n                        <div><span>{{local "checkout.security_code_tooltip_amex"}}</span><img src=\'/assets/img/checkout/amex_card.svg\' alt=""/></div>\r\n                    </div>\r\n                </div>\r\n            </span>\r\n            </label>\r\n            <div class="input-box small-size">\r\n                <input type="text" placeholder="xxxx" data-bind="security_code" name="security_code" maxlength="4">\r\n                <i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip null">{{local "form_error.security_code_empty"}}</span>\r\n            <span class="error-tip not-null">{{local "form_error.security_code_invalid"}}</span>\r\n        </div>\r\n        <div class="field field-third">\r\n            <label>{{local "form.credit_card_expiry"}}</label>\r\n            <div class="expiry-section">\r\n                <div data-component="date2selects" data-allow-incomplete="false" data-parent-container="true" data-bind-to="expire"\r\n                     data-value="{{expire}}"></div>\r\n            </div>\r\n            <span class="error-tip null">{{local "form_error.credit_card_expiry_empty"}}</span>\r\n        </div>\r\n    </div>\r\n    <div class="secure-tip"><span class="icon-icon_J005"></span>\r\n        <p>{{local "checkout.secure_website"}}</p>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n'},{}],678:[function(e,t,i){var n=e("../model/discount-code"),c=e("backbone.marionette"),l=e("../../ui/util"),a=(e("../../../../config/host.js"),c.ItemView.extend({template:Handlebars.compile(e("../assets/discount-code.hbs")),events:{"click .remove-code":"remove","click @ui.apply":"apply","click li":"selectCurrency","input @ui.code":function(){var e=this;e.ui.apply[e.ui.code.val().length?"removeClass":"addClass"]("disable")},"click @ui.accordion":function(){this.ui.accordion.hasClass("selected")?(this.ui.accordion.removeClass("selected"),this.ui.nopayment.hide()):(this.ui.accordion.addClass("selected"),this.ui.nopayment.show())}},ui:{code:"#discountcode",apply:".apply-code",accordion:"a.item-accordion",nopayment:".tip-nopayment.discount-code.form"},initialize:function(e){var t=this;t.model=new n({orderId:e.orderId})},apply:function(e,t){var i=this;if(!i.ui.apply.hasClass("disable")){i.model.set({action:"apply",discountcode:i.ui.code.val()||"string"==typeof t&&t}),this.options.orderId&&i.model.set(this.options.orderModel.toJSON()),e&&"string"==typeof e?(i.model.set("currency",e),i.model.set("currencymark",e)):(i.model.set("currency",i.options.currencyView.model.get("currencyMark")),i.model.set("currencymark",i.options.currencyView.model.get("currencyMark")));var n=i.model.save();return l.loading({container:i.el,loading:"",promise:n.then(function(e){e.success?(i.options.currencyView.model.set({onlinePay:e.scart.onlinepayprice,offlinePay:e.scart.offlinepayprice,totalPay:e.scart.totalprice}),i.options.currencyView.render()):i.model.set("discountcode",""),i.render()})}),n}return!0},remove:function(e){var t=this;t.model.set({action:"remove",message:""}),this.options.orderId&&t.model.set(this.options.orderModel.toJSON()),e&&"string"==typeof e?(t.model.set("currency",e),t.model.set("currencymark",e)):(t.model.set("currency",t.options.currencyView.model.get("currencyMark")),t.model.set("currencymark",t.options.currencyView.model.get("currencyMark"))),l.loading({container:t.el,loading:"",promise:t.model.save().then(function(e){e.success&&(t.model.set("discountcode",""),t.options.currencyView.model.set({onlinePay:e.scart.onlinepayprice,offlinePay:e.scart.offlinepayprice,totalPay:e.scart.totalprice}),t.options.currencyView.render()),t.render()})})}}));t.exports=a},{"../../../../config/host.js":45,"../../ui/util":2122,"../assets/discount-code.hbs":612,"../model/discount-code":651,"backbone.marionette":6}],651:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js").host;t.exports=n.Model.extend({initialize:function(e){this.options=e},url:function(){return c+(this.options.orderId?"/api/order/room/applydiscount?roomorderid="+this.options.orderId:"/api/booking/checkout/applydiscount")}})},{"../../../../config/host.js":45,backbone:8,underscore:42}],612:[function(e,t,i){t.exports='<div>\r\n    <a class="item-accordion"><span>Have a discount code</span></a>\r\n    <h4 class="item-title">{{local "checkout.pay_info"}}</h4>\r\n</div>\r\n\r\n{{#unless discountcode}}\r\n    <div class="tip-nopayment discount-code form">\r\n        <p class="tip-content">{{local \'checkout.discount_code_apply\'}}</p>\r\n        <div class="code-block">\r\n            <div class="discount-code-input">\r\n                <div class="field field-half">\r\n                    <div class="input-box">\r\n                        <form>\r\n                        <input id=\'discountcode\' placeholder="{{local \'checkout.enter_discount_code_short\'}}">\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n                <a class="wgt-sqbutton-black disable apply-code">{{local \'checkout.apply\'}}</a>\r\n                <div class="label-popup">\r\n                    <div class="content">\r\n                        <p>{{local \'checkout.enter_discount_code\'}}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <p class="error-message">{{message}}</p>\r\n        </div>\r\n    </div>\r\n{{else}}\r\n    <div class="tip-nopayment">\r\n        <div class="discount-code-applied">\r\n            <p>{{local \'checkout.discount_code_applyed\'}}<span class="code-number">{{discountcode}}</span></p>\r\n            <p><a class="edit underline-hyperlink remove-code">{{local \'checkout.remove_code\'}}</a></p>\r\n        </div>\r\n    </div>\r\n{{/unless}}'},{}],676:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("backbone.marionette")),c=e("../../ui/util.js"),l=(e("../../checkout/model/view-event"),e("../../../../config/host.js")),a=n.ItemView.extend({template:Handlebars.compile(e("../assets/currency-selector.hbs")),events:{"click .currency-selection":"togglePopUp","click .close":"togglePopUp","click li":"selectCurrency"},ui:{toggle:".currency-selection",popUp:".show-currency-checkout"},initialize:function(){var e=this;e.isForCheckOut=!!this.options.parentCollection,c.tracker.on("click",function(t){var i=e.ui.popUp,n=e.ui.toggle;i.is&&n.is&&(n.is(t.target)||0!==n.has(t.target).length||i.is(t.target)||0!==i.has(t.target).length||i.hide())})},onBeforeRender:function(){var e=this.options.parentView,t=this.options.parentModel;this.notFirstLoad||(e?(this.model.set("currencyMark",e.collection.currencymark),this.model.set("onlinePay",e.collection.onlinePrice),this.model.set("offlinePay",e.collection.offlinePrice),this.model.set("totalPay",e.collection.totalPriceAfterTax),this.model.set("applyPoints",e.collection.applyPoints)):t&&(this.payWithPoints=!!t.get("__payWithPoints"),this.model.set("currencyMark",t.get("__currencymark")),this.payWithPoints?(this.model.set("onlinePay",t.get("payamountpoint").payprice),this.model.set("offlinePay",t.get("payamountpoint").offlineprice),this.model.set("totalPay",t.get("payamountpoint").totalprice)):(this.model.set("onlinePay",t.get("payamount").payprice),this.model.set("offlinePay",t.get("payamount").offlineprice),this.model.set("totalPay",t.get("payamount").totalprice)),this.model.set("applyPoints",this.payWithPoints))),this.notFirstLoad=!0},serializeData:function(){var e=this.model.toJSON();return e.currencies=this.options.currencyCollection.toJSON(),e},togglePopUp:function(){this.ui.popUp.toggle()},selectCurrency:function(e){var t=this,i=jQuery(e.target).closest("li").data("code"),n=jQuery.Deferred(),a=jQuery.Deferred(),o=jQuery.Deferred();c.loading({errortimeout:5e3,container:jQuery(t.ui.popUp),promise:jQuery.when(n.promise(),a.promise(),o.promise()).then(function(){t.trigger("currency:switched")})}),jQuery.ajax({type:"POST",url:l.getURL("api","account/preferences/currency"),data:{code:i},success:function(){c.updateCurrencyInUrl(i,!1),n.resolve(),t.options.currencyCollection.map(function(e){e.set("selected",!1)}),t.options.currencyCollection.findWhere({code:i}).set("selected",!0),t.model.set("currencyMark",i),t.isForCheckOut?jQuery.ajax({type:"GET",url:l.getURL("api","booking/checkout/getcartinfo"),cache:!1,success:function(e){a.resolve(),t.model.get("applyPoints")?jQuery.ajax({type:"POST",url:l.getURL("api","booking/checkout/getpionts"),data:{apply:1},success:function(e){o.resolve(),t.model.set("onlinePay",e.onlinepayprice),t.model.set("offlinePay",e.offlinepayprice),t.model.set("totalPay",e.totalprice),t.render()},error:o.reject}):(o.resolve(),t.model.set("onlinePay",e.totalPriceAfterTax),t.model.set("offlinePay",e.offlinePrice),t.model.set("totalPay",e.fullPrice),t.render())},error:a.reject}):t.options.parent.resetByQuery(void 0,function(e){t.payWithPoints?(t.model.set("onlinePay",e.get("payamountpoint").payprice),t.model.set("offlinePay",e.get("payamountpoint").offlineprice),t.model.set("totalPay",e.get("payamountpoint").totalprice)):(t.model.set("onlinePay",e.get("payamount").payprice),t.model.set("offlinePay",e.get("payamount").offlineprice),t.model.set("totalPay",e.get("payamount").totalprice)),t.options.detailView.discountCodeView.model.get("discountcode")&&t.options.detailView.discountCodeView.apply(i,t.options.detailView.discountCodeView.model.get("discountcode")).then(function(){o.resolve(),a.resolve()},function(){o.reject(),a.reject()}),o.resolve(),a.resolve(),t.render()},function(){o.reject(),a.reject()},i)},error:n.reject})}});t.exports=a},{"../../../../config/host.js":45,"../../checkout/model/view-event":670,"../../ui/util.js":2122,"../assets/currency-selector.hbs":608,backbone:8,"backbone.marionette":6,underscore:42}],608:[function(e,t,i){t.exports='<!--<h4 class="item-title">{{local "checkout.pay_info"}}</h4>-->\r\n\r\n\r\n{{#if onlinePay}}\r\n    {{#not-equal-relax onlinePay "0.00" }}\r\n        <div class="tip-payment payment-total">\r\n\r\n            <div class="overall-price">\r\n                <div class="overall-price-total clearfix">\r\n                    <div>\r\n                        <div><em>{{currencyMark}}{{#price-format totalPay}}{{/price-format}}</em></div>\r\n                    </div>\r\n                    <h4 class="total">{{local "checkout.total_charge_all"}}</h4>\r\n                </div>\r\n                <div>\r\n                    <div class="overall-price-total clearfix small">\r\n                        <div><em>{{currencyMark}}{{#price-format onlinePay}}{{/price-format}}</em></div>\r\n                        <h4>{{local "checkout.total_charge_cc"}}</h4>\r\n                    </div>\r\n                    {{#if __hasRoom}}\r\n                        <div class="overall-price-total clearfix small">\r\n                            <div><em>{{currencyMark}}{{#price-format offlinePay}}{{/price-format}}</em></div>\r\n                            <h4>{{local "checkout.total_charge_offline"}}</h4>\r\n                        </div>\r\n                    {{/if}}\r\n                </div>\r\n            </div>\r\n\r\n            <div class="currency">\r\n                <div class="currency-selection"><a>{{local "checkout.select_currency"}}</a></div>\r\n            </div>\r\n        </div>\r\n    {{/not-equal-relax }}\r\n\r\n    {{#equal-relax onlinePay "0.00" }}\r\n        <div class="tip-nopayment payment-total">\r\n\r\n            <div class="overall-price">\r\n                <div class="overall-price-total clearfix">\r\n                    <div>\r\n                        <div><em>{{currencyMark}}{{#price-format totalPay}}{{/price-format}}</em></div>\r\n                    </div>\r\n                    <h4 class="total">{{local "checkout.total_charge_all"}}</h4>\r\n                </div>\r\n                <div>\r\n                    <div class="overall-price-total clearfix small">\r\n                        <div><em>{{currencyMark}}{{#price-format onlinePay}}{{/price-format}}</em></div>\r\n                        <h4>{{local "checkout.total_charge_cc"}}</h4>\r\n                    </div>\r\n                    {{#if __hasRoom}}\r\n                        <div class="overall-price-total clearfix small">\r\n                            <div><em>{{currencyMark}}{{#price-format offlinePay}}{{/price-format}}</em></div>\r\n                            <h4>{{local "checkout.total_charge_offline"}}</h4>\r\n                        </div>\r\n                    {{/if}}\r\n                </div>\r\n            </div>\r\n\r\n            <div class="currency">\r\n                <div class="currency-selection"><a>{{local "checkout.select_currency"}}</a></div>\r\n            </div>\r\n\r\n            <p class="tip-content">{{local \'checkout.validation_card_required\'}}</p>\r\n            <p class="tip-content"><strong class="bold">USD 1</strong>{{local \'checkout.validation_refund\'}}</p>\r\n        </div>\r\n    {{/equal-relax }}\r\n\r\n\r\n{{else}}\r\n    <div class="tip-nopayment payment-total">\r\n\r\n        <div class="overall-price">\r\n            <div class="overall-price-total clearfix">\r\n                <div>\r\n                    <div><em>{{currencyMark}}{{#price-format totalPay}}{{/price-format}}</em></div>\r\n                </div>\r\n                <h4 class="total">{{local "checkout.total_charge_all"}}</h4>\r\n            </div>\r\n            <div>\r\n                <div class="overall-price-total clearfix small">\r\n                    <div><em>{{currencyMark}}{{#price-format onlinePay}}{{/price-format}}</em></div>\r\n                    <h4>{{local "checkout.total_charge_cc"}}</h4>\r\n                </div>\r\n                {{#if __hasRoom}}\r\n                    <div class="overall-price-total clearfix small">\r\n                        <div><em>{{currencyMark}}{{#price-format offlinePay}}{{/price-format}}</em></div>\r\n                        <h4>{{local "checkout.total_charge_offline"}}</h4>\r\n                    </div>\r\n                {{/if}}\r\n            </div>\r\n        </div>\r\n\r\n        <div class="currency">\r\n            <div class="currency-selection"><a>{{local "checkout.select_currency"}}</a></div>\r\n        </div>\r\n\r\n        <p class="tip-content">{{local \'checkout.validation_card_required\'}}</p>\r\n        <p class="tip-content"><strong class="bold">USD 1</strong>{{local \'checkout.validation_refund\'}}</p>\r\n    </div>\r\n{{/if}}\r\n\r\n<ul class="show-currency-checkout" style="position: absolute;">\r\n    <a class="close" data-opt="close"><span class="icon-icon_B017"></span></a>\r\n\r\n    {{#each currencies}}\r\n        <li data-code="{{code}}" class="{{#if selected}}active{{/if}}">\r\n            <img class="flag" src="/assets/img/flags/{{code}}.svg"/>\r\n            <span>{{code}}</span>\r\n        </li>{{/each}}\r\n</ul>';
},{}],673:[function(e,t,i){var n=(e("backbone"),e("backbone.marionette")),c=e("../../ui/validator.js"),l=e("../model/communication-preference");CommunicationSelector=n.ItemView.extend({template:Handlebars.compile(e("../assets/communication-preference.hbs")),ui:{div:"#communication-preference",checkbox:"i.checkbox"},initialize:function(){var e=this;e.model=new l,e.model.fetch().then(function(t){e.model.set({flag:t.result})}),c.bind(this)},getData:function(){var e=this;e.model.fetch().then(function(t){e.model.set({flag:t.result})})},onRender:function(){var e=this;e.model.on("change:flag",function(){e.model.get("flag")?(e.ui.div.hide(),e.ui.checkbox.removeClass("checked")):(e.ui.div.show(),e.ui.checkbox.addClass("checked"))})}}),t.exports=CommunicationSelector},{"../../ui/validator.js":2123,"../assets/communication-preference.hbs":605,"../model/communication-preference":650,backbone:8,"backbone.marionette":6}],650:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js");t.exports=n.Model.extend({url:c.getURL("api","account/checkout/communication"),defaults:{flag:""}})},{"../../../../config/host.js":45,backbone:8,underscore:42}],605:[function(e,t,i){t.exports='\r\n<div class="checkbox-container" id="communication-preference">\r\n    <i data-bind="select_preferences" class="checkbox checked"></i>\r\n    <p>{{local \'signup.select_preferences\'}}</p>\r\n</div>'},{}],672:[function(e,t,i){var n=(e("backbone"),e("backbone.marionette")),c=e("../../ui/validator.js"),l=e("../model/aa-number"),a=(e("../../../../config/host.js"),n.ItemView.extend({template:Handlebars.compile(e("../assets/aa-number.hbs")),events:{"click @ui.checkbox":function(e){var t=jQuery(e.target);this.ui.inputArea[t.hasClass("checked")?"show":"hide"]()}},ui:{checkbox:"i.checkbox",inputArea:".tip-nopayment",input:"input"},initialize:function(e){var t=this;t.model=new l({aa_member_no:e.aa_member_no}),c.bind(this)},validate:function(){var e=this;return e.trigger("save:form"),e.model.isValid(!0)},onRender:function(){this.options.aa_member_no&&(this.ui.checkbox.addClass("checked"),this.ui.inputArea.show())}}));t.exports=a},{"../../../../config/host.js":45,"../../ui/validator.js":2123,"../assets/aa-number.hbs":604,"../model/aa-number":648,backbone:8,"backbone.marionette":6}],648:[function(e,t,i){var n=(e("underscore"),e("backbone"));e("../../../../config/host.js").host;t.exports=n.Model.extend({validation:{aa_member_no:{required:!0}}})},{"../../../../config/host.js":45,backbone:8,underscore:42}],604:[function(e,t,i){t.exports='<div autocomplete="off" class="form">\r\n    <div class="checkbox-container">\r\n        <i data-bind="select_preferences" class="checkbox"></i>\r\n        <p>{{local \'checkout.aa_member_label\'}}</p>\r\n    </div>\r\n    <div class="tip-nopayment" style="display: none">\r\n        <div class="field">\r\n            <label>{{local \'checkout.aa_number_label\'}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="aa_member_no" placeholder="{{local \'checkout.aa_number_placeholder\'}}" name="aa_member_no" value="{{aa_member_no}}"><i\r\n                    class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip null">{{local "form_error.cannot_be_empty"}}</span>\r\n        </div>\r\n    </div>\r\n</div>'},{}],664:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js").host,l=n.Model.extend({url:function(){return this.cupCall?c+"/api/booking/checkout/checkavailable/"+this.__payType:c+"/api/booking/checkout/payorder"}});l.SUCCESS=!0,l.NOT_AVAILABLE=-3,t.exports=l},{"../../../../config/host.js":45,backbone:8,underscore:42}],611:[function(e,t,i){t.exports=e("sassify")(".detail .guests-select .popup-opt {   display: none; }  .detail .guests-select.popup-show .popup-opt {   display: block; }  .detail .guests-select .guest-item {   height: 80px;   background-color: #fff;   padding: 20px;   border: 1px solid gray; }   .detail .guests-select .guest-item a {     color: red;     float: right; }  .detail .guests-select form {   display: none; }   .detail .guests-select form section {     margin: 10px; }  ")},{sassify:36}],610:[function(e,t,i){t.exports='<div class="checkout-detail">\r\n    <form>\r\n    <div class="detail-loggedout">\r\n\r\n    </div>\r\n\r\n    <div class="guests-region detail-guests">\r\n        <!-- inserts guest here -->\r\n    </div>\r\n\r\n    <div class="aa-number-region detail-aa-number">\r\n        <!--inserts profile here-->\r\n    </div>\r\n\r\n    <div class="profile-region detail-profile">\r\n        <!--inserts profile here-->\r\n    </div>\r\n\r\n    <div class="discount-code-region detail-discount-code detail-payment-new">\r\n        <!--inserts discount code here-->\r\n    </div>\r\n\r\n    <div class="currency-region detail-currency detail-payment-new">\r\n        <!--inserts currency here-->\r\n    </div>\r\n\r\n    <div class="choose-card-region detail-cards">\r\n        <!--inserts cards here-->\r\n    </div>\r\n    <div class="cards-region" style="margin-top: 2rem">\r\n        <!--inserts new card here-->\r\n    </div>\r\n    <div class="cup-region">\r\n        <!--inserts cup options here-->\r\n    </div>\r\n    <div class="error-tips"\r\n         style="display: none ;margin-top: 20px; background-color: #31a2ac; padding: 1.5rem 2rem;vertical-align: middle;color: #fbf4f5;ont-size: 1.4rem;line-height: 1.5em;">\r\n    </div>\r\n\r\n    <div class="detail-bottom clearfix">\r\n        <div>\r\n            <a class="wgt-sqbutton-blue" id="next-step" target="_blank">{{local "checkout.book_now"}}</a>\r\n            <br>\r\n            <a class="underline-a" style="visibility: hidden;">Or continue by phone</a>\r\n        </div>\r\n        <p style="margin-left: 10px;">\r\n            <!--<i class="checkbox checked" style="margin-right: 1rem;"></i>-->\r\n            {{local "checkout.agreed_term"}}\r\n        </p>\r\n        <div class="communication-preference-region"></div>\r\n    </div>\r\n    </form>\r\n</div>\r\n'},{}],609:[function(e,t,i){t.exports=e("sassify")('.card.e-wallets {   padding: 0 0 0; }   .card.e-wallets.unionpay {     padding-bottom: 0; }   .card.e-wallets .e-wallets-name {     position: relative;     padding: 2rem 1.5rem 0 4rem;     cursor: pointer; }     .card.e-wallets .e-wallets-name.e-union-pay {       padding-bottom: 2rem; }     .card.e-wallets .e-wallets-name .radio {       width: 0;       height: 0;       display: block;       background-color: transparent;       border-top: 0.8em solid #363636;       border-left: 0.8em solid transparent;       border-right: 0.8em solid transparent;       border-bottom: 0;       border-radius: 0;       right: calc(1.5% + 1rem);       top: 3rem; }       @media screen and (max-width: 768px) {         .card.e-wallets .e-wallets-name .radio {           right: 1rem; } }       .card.e-wallets .e-wallets-name .radio.selected {         border-top: 0;         border-bottom: 0.8em solid #363636; }   .card.e-wallets.selected .e-wallets-name .radio {     border-top: 0;     border-bottom: 0.8em solid #363636; }   .card.e-wallets .secure-tip {     padding: 0 1.5rem 2rem 4rem; }   .card.e-wallets .e-wallets-union-pay-list {     display: none; }     .card.e-wallets .e-wallets-union-pay-list .e-wallets-union-pay-item {       cursor: pointer;       padding: 2rem 1.5rem 2rem 4rem;       border-top: 4px solid #dcd7d2; }       .card.e-wallets .e-wallets-union-pay-list .e-wallets-union-pay-item:hover {         background-color: #E7E7E7; }       .card.e-wallets .e-wallets-union-pay-list .e-wallets-union-pay-item i.radio {         width: 3.2rem;         height: 3.2rem; }         @media screen and (max-width: 768px) {           .card.e-wallets .e-wallets-union-pay-list .e-wallets-union-pay-item i.radio {             right: 1rem; } }       .card.e-wallets .e-wallets-union-pay-list .e-wallets-union-pay-item i.checked.radio::after {         background-color: #31a2ac; }  .e-wallets-body {   padding: 0 1.5rem 2rem 4rem;   box-sizing: border-box; }   .e-wallets-body .icon-icon_J001 {     visibility: hidden;     font-size: 6.4rem;     margin-right: 1rem; }  .e-wallets-list {   font-size: 0;   display: inline-block;   vertical-align: top;   width: 180px; }   .e-wallets-list li {     width: 40px;     height: 24px;     margin-top: 4px;     margin-left: 1px;     margin-right: 3px;     display: inline-block;     background-repeat: no-repeat;     background-size: 100% 100%;     position: relative; }     .e-wallets-list li.disabled::before {       content: "";       display: block;       background-color: rgba(0, 0, 0, 0.5);       position: absolute;       bottom: 0;       right: 0;       left: 0;       top: 0; }     .e-wallets-list li.icon-amex {       background-image: url("/assets/img/checkout/card/new/AmericanExpress-dark.png"); }     .e-wallets-list li.icon-cirrus {       background-image: url("/assets/img/checkout/card/png/iconCirrus.png"); }     .e-wallets-list li.icon-diners {       background-image: url("/assets/img/checkout/card/new/DinersClub-dark.png"); }     .e-wallets-list li.icon-discover {       background-image: url("/assets/img/checkout/card/new/Discover-dark.png"); }     .e-wallets-list li.icon-jcb {       background-image: url("/assets/img/checkout/card/new/JCB-dark.png"); }     .e-wallets-list li.icon-maestro {       background-image: url("/assets/img/checkout/card/new/Maestro-dark.png"); }     .e-wallets-list li.icon-master {       background-image: url("/assets/img/checkout/card/new/MasterCard-dark.png"); }     .e-wallets-list li.icon-visa {       background-image: url("/assets/img/checkout/card/new/Visa-dark.png"); }  html[dir="rtl"] .card.e-wallets .e-wallets-name {   padding: 2rem 4rem 0 1.5rem; }   html[dir="rtl"] .card.e-wallets .e-wallets-name .radio {     left: calc(1.5% + 1rem);     right: auto; }     @media screen and (max-width: 768px) {       html[dir="rtl"] .card.e-wallets .e-wallets-name .radio {         left: 1rem;         right: auto; } }  html[dir="rtl"] .card.e-wallets .secure-tip {   padding: 0 4rem 2rem 1.5rem; }  html[dir="rtl"] .card.e-wallets .e-wallets-union-pay-list .e-wallets-union-pay-item {   padding: 2rem 4rem 2rem 1.5rem; }   html[dir="rtl"] .card.e-wallets .e-wallets-union-pay-list .e-wallets-union-pay-item i.radio {     left: 3%; }     @media screen and (max-width: 768px) {       html[dir="rtl"] .card.e-wallets .e-wallets-union-pay-list .e-wallets-union-pay-item i.radio {         left: 1rem;         right: auto; } }  html[dir="rtl"] .e-wallets-body {   padding: 0 4rem 2rem 1.5rem; }   html[dir="rtl"] .e-wallets-body .icon-icon_J001 {     margin-left: 1rem;     margin-right: 0; }  html[dir="rtl"] .e-wallets-list li {   margin-left: 3px;   margin-right: 1px; }  ')},{sassify:36}],624:[function(e,t,i){t.exports='<div class="detail-loggedout-guest">\r\n    <h4 class="item-title">{{local "checkout.your_details"}}</h4>\r\n    <div>\r\n        <!--<ul class="loggedout-guest-select">-->\r\n            <!--<li><i class="radio checked"></i><span>New Guest</span></li>-->\r\n            <!--<li><i class="radio"></i><span>Returning Guest</span></li>-->\r\n        <!--</ul>-->\r\n        <!--<p class="new-guest-el">-->\r\n            <!--You can checkout as a guest. You will have the oportunity to create an account later.-->\r\n        <!--</p>-->\r\n        <div class="form new-guest-el">\r\n            <!--<div class="login-without-pm" style="background: none;padding-left: 0;">-->\r\n                <!--<h6>Not a member? SIgn up now</h6>-->\r\n                <!--<p> Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</p>-->\r\n                <!--<a class="wgt-sqbutton-black" id="opt-sign-up">sign up here</a>-->\r\n            <!--</div>-->\r\n            <div>\r\n                <div class="field">\r\n                    <label for="">{{local "form.your_first_name"}}</label>\r\n                    <div class="input-box">\r\n                        <input type="text" data-bind="first_name" placeholder="{{local \'checkout.first_name_placeholder\'}}" value="{{first_name}}" name="first_name">\r\n                        <i class="input-status"></i>\r\n                    </div>\r\n                    <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n                    <span class="error-tip not-null"> {{local "form_error.only_accepts_latin"}}</span>\r\n                </div>\r\n                <div class="field">\r\n                    <label for="">{{local "form.your_last_name"}}</label>\r\n                    <div class="input-box">\r\n                        <input type="text" data-bind="last_name" placeholder="{{local \'checkout.last_name_placeholder\'}}" value="{{last_name}}" name="last_name"/>\r\n                        <i class="input-status"></i>\r\n                    </div>\r\n                    <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n                    <span class="error-tip not-null"> {{local "form_error.only_accepts_latin"}}</span>\r\n                </div>\r\n                <div class="field">\r\n                    <label for="">{{local "form.your_email_address"}}</label>\r\n                    <div class="input-box">\r\n                        <input type="text" data-bind="email" placeholder="{{local \'checkout.email_address_placeholder\'}}" value="{{email}}" name="email" maxlength="254">\r\n                        <i class="input-status"></i>\r\n                    </div>\r\n                    <span class="error-tip not-null"> {{local "form_error.invalid_email"}}</span>\r\n                    <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="detail-edit-controller">\r\n            <div>\r\n                <!--checked-->\r\n                <i class="checkbox" data-opt="opt-select-checkbox"></i>\r\n                <p>{{local \'checkout.booking_for_other\'}}</p>\r\n            </div>\r\n            <div class="form" style="display: none;">\r\n                <div>\r\n                    <div class="field">\r\n                        <label>{{local "checkout.guest_first_name_label"}}</label>\r\n                        <div class="input-box">\r\n                            <input type="text" placeholder="{{local \'checkout.guest_first_name_placeholder\'}}" data-bind="other_first_name"  name="other_first_name">\r\n                            <i class="input-status"></i>\r\n                        </div>\r\n                        <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n                        <span class="error-tip not-null"> {{local "form_error.only_accepts_latin"}}</span>\r\n                    </div>\r\n                    <div class="field">\r\n                        <label>{{local "checkout.guest_last_name_label"}}</label>\r\n                        <div class="input-box">\r\n                            <input type="text" placeholder="{{local \'checkout.guest_last_name_placeholder\'}}" data-bind="other_last_name"  name="other_last_name">\r\n                            <i class="input-status"></i>\r\n                        </div>\r\n                        <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n                        <span class="error-tip not-null"> {{local "form_error.only_accepts_latin"}}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="detail-loggedout-info new-guest-el">\r\n    <h4 class="item-title">{{local "checkout.complete_your_info"}}</h4>\r\n    <div class="form">\r\n        <div class="field field-half">\r\n            <label for="">{{local "form.title"}}</label>\r\n            <div class="input-box">\r\n                <select name="title" data-bind="title" data-value="{{title}}"></select>\r\n                <i class="input-select"></i>\r\n            </div>\r\n            <span class="error-tip null"> {{local "form_error.choose_title"}}</span>\r\n        </div>\r\n        <div class="field field-half field-half-right">\r\n            <label for="">{{local "form.gender"}}</label>\r\n            <div class="input-box">\r\n                <select name="gender" data-bind="gender" data-value="{{gender}}"></select>\r\n                <i class="input-select"></i>\r\n            </div>\r\n            <span class="error-tip null"> {{local "form_error.choose_gender"}}</span>\r\n        </div>\r\n    {{#unless noBirthday}}\r\n        <div class="field field-third">\r\n            <label>{{local "form.date_of_birth"}}</label>\r\n            <div data-component="date3selects" data-bind-to="birthday" data-value="{{birthday}}" data-parent-container="true"></div>\r\n            <span class="error-tip null">{{local "form_error.cannot_be_empty"}}</span>\r\n            <span data-content-key-prefix="error_birthdate_" class="error-tip not-null"> </span>\r\n        </div>\r\n        {{/unless}}\r\n        <div class="field">\r\n            <label>{{local "form.phone"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="phone" placeholder="{{local \'form.phone_placeholder\'}}" name="phone" maxlength=15 value="{{phone}}"><i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n            <span class="error-tip not-null">{{local "form_error.invalid_phone"}} </span>\r\n        </div>\r\n        <div class="field">\r\n            <label for="">{{local "form.country_of_residence"}}</label>\r\n            <div class="input-box">\r\n                <select name="country" data-bind="country">\r\n                    <option value="">{{local "form.select"}}</option>\r\n                    {{#each countries}}\r\n                        <option value="{{key}}" {{#compare key ../country}}selected="selected"{{/compare}}>{{value}}</option>\r\n                    {{/each}}\r\n                </select>\r\n                <i class="input-select"></i>\r\n            </div>\r\n            <span class="error-tip null"> {{local "form_error.choose_country"}}</span>\r\n        </div>\r\n        <div class="field">\r\n            <label for="">{{local "form.address"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="address" placeholder="{{local \'form.address_placeholder\'}}" value="{{address}}" name="address" maxlength="254">\r\n                <i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip not-null">{{local "form_error.only_accepts_alphanumerics"}}</span>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        </div>\r\n        <div class="field">\r\n            <label for="">{{local "form.city"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="city" placeholder="{{local \'form.city_placeholder\'}}" name="city" value="{{city}}">\r\n                <i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip not-null"> {{local "form_error.error_invalid_city"}}</span>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        </div>\r\n        <div class="field field-half">\r\n            <label for="">{{local "form.state_province"}}</label>\r\n            <div class="input-box">\r\n                <select name="state" data-bind="state" class="__select"></select>\r\n                <!--<input type="text" data-bind="state" placeholder="{{local \'form.state_province_placeholder\'}}" name="state" value="{{state}}">-->\r\n                <i class="input-select"></i>\r\n            </div>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n            <span class="error-tip not-null"> {{local "form_error.error_invalid_country"}}</span>\r\n        </div>\r\n        <div class="field field-half field-half-right">\r\n            <label for="">{{local "form.postal_zip_code"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="postal" placeholder="{{local \'form.postal_zip_code_placeholder\'}}" value="{{postal}}" name="postal" maxlength="16">\r\n                <i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n            <span class="error-tip not-null"> {{local "form_error.error_invalid_postal"}}</span>\r\n        </div>\r\n        <!--<div class="field">-->\r\n            <!--<label>Special Requirements</label>-->\r\n            <!--<div class="input-box">-->\r\n                <!--<textarea placeholder="Do you need a non-smoking room? etc."></textarea>-->\r\n            <!--</div>-->\r\n        <!--</div>-->\r\n    </div>\r\n    <!--<p>Booking for Business? <a class="underline-a-bold">See more</a>.</p>-->\r\n</div>';
},{}],709:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("../../../abmb/stateful.js")),l=e("../../model/view-event.js"),a=e("../../../../../config/host.js").host,o=e("backbone.marionette"),s=o.ItemView.extend(n.extend({},c,{getTemplate:function(){return this.isStaticView?Handlebars.compile(e("../../assets/order-entry/request-comments-static.hbs")):Handlebars.compile(e("../../assets/order-entry/request-comments.hbs"))},ui:{select:".bookingitem-extend",edit:".bookingitem-edit",textarea:"textarea"},events:{"click .bookingitem-edit":"toggleStatus"},initialize:function(e){this.isStaticView=e&&e.isStaticView,this.switchState("popup:hide")},toggleStatus:function(e){var t=this.ui.edit;"hide"==e||"hide"==this.getState("popup")?(this.switchState("popup:show"),t.text(t.data("save")),t.addClass("save"),this.triggerMethod("status:show")):(this.switchState("popup:hide"),t.text(t.data("edit")),t.removeClass("save"),this.resetModel())},deActive:function(){"show"==this.getState("popup")&&(this.switchState("popup:hide"),this.ui.edit.text(this.ui.edit.data("edit")),this.ui.edit.removeClass("save"))},resetModel:function(){var e=this;e.model.set("comments",jQuery.trim(e.ui.textarea.val())),e.model.hasChanged("comments")&&(l.trigger("req:loading"),jQuery.ajax({type:"post",url:a+"/api/booking/checkout/updatecomments",data:{id:e.model.get("id"),comments:jQuery.trim(e.ui.textarea.val())},success:function(){}}).always(function(){l.trigger("req:loaded")}))}}));t.exports=s},{"../../../../../config/host.js":45,"../../../abmb/stateful.js":72,"../../assets/order-entry/request-comments-static.hbs":634,"../../assets/order-entry/request-comments.hbs":635,"../../model/view-event.js":670,backbone:8,"backbone.marionette":6,underscore:42}],635:[function(e,t,i){t.exports='<form>\r\n<div class="bookingitem-content">\r\n    <h5 class="bookingitem-name"><span class="icon-icon_B010"></span><span>{{local "checkout.special_requests_title"}}</span></h5>\r\n    <div class="bookingitem-fold">\r\n        <p>{{local "checkout.view_edit_special_request"}}</p>\r\n    </div>\r\n    <a class="bookingitem-edit" data-save="{{local \'checkout.save\'}}" data-edit="{{local \'checkout.edit\'}}">{{local "checkout.edit"}}</a>\r\n</div>\r\n<div class="bookingitem-extend">\r\n    <div class="form">\r\n        <div class="field">\r\n            <label>{{local "checkout.special_requests_title"}}</label>\r\n            <div class="input-box">\r\n                <textarea placeholder="" maxlength="250">{{ comments }}</textarea><i class="input-status"></i>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n</form>'},{}],634:[function(e,t,i){t.exports='<form>\r\n<div class="bookingitem-content">\r\n    <h5 class="bookingitem-name"><span class="icon-icon_B010"></span><span>{{local "checkout.special_requests_title"}}</span></h5>\r\n    <div class="bookingitem-fold">\r\n        <p>{{ comments }}</p>\r\n    </div>\r\n</div>\r\n</form>\r\n\r\n'},{}],704:[function(e,t,i){var n=e("./template.hbs"),c=e("../../../../booking-customize/view/choose-rate-view.js");t.exports=c.extend({template:Handlebars.compile(n),toggleDescription:function(e){jQuery(e.target).closest("p").toggleClass("show"),e.stopPropagation()}})},{"../../../../booking-customize/view/choose-rate-view.js":385,"./template.hbs":703}],703:[function(e,t,i){t.exports='{{#unless data.length}}\r\n    <p class="item-tip clearfix error-message">{{local \'checkout.rates_error\'}}</p>\r\n{{/unless}}\r\n\r\n<ul class="rate-list">\r\n    {{#each data}}\r\n        <li data-plancode="{{ ratecode }}" class="{{#equal ../selectedRateCode ratecode}}checked {{/equal}}">\r\n            <div class="clearfix">\r\n                <span class="name">{{ ratename }}</span>\r\n                <label class="price">{{currencymark}}{{#price-format displaymemberrate}}{{/price-format}}</label>\r\n            </div>\r\n            <div>\r\n                <p class="description-trigger"><span>{{local \'checkout.description\'}}</span></p>\r\n                <div class="description">{{{ this.tip }}}</div>\r\n            </div>\r\n        </li>\r\n    {{/each}}\r\n</ul>\r\n\r\n'},{}],705:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../../abmb/stateful.js"),a=e("../../model/view-event.js"),o=e("../../../booking/view/booking-occupancy-popup.js"),s=e("../../assets/order-entry/occupancy-section.hbs");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(s),events:{"click .bookingitem-edit":"toggleStatus",click:"stopEvent"},ui:{edit:".bookingitem-edit"},stopEvent:function(e){e.preventDefault(),e.stopPropagation()},className:"edit-occupancy",initialize:function(e){this.occupancyView=new o(e),this.people=e.people,e.rooms&&(this.rooms=e.rooms),this.setOccupancySelector(),this.switchState("popup:hide"),this.originalPeople=n.clone(this.people),this.originalRoom=n.clone(this.rooms)},serializeData:function(){return{people:this.people,rooms:this.rooms}},setOccupancySelector:function(){this.occupancyView.selectors.adultSelector.model.set("value",this.people.adult),this.occupancyView.selectors.childrenSelector.model.set("value",this.people.child),this.occupancyView.selectors.roomSelector.model.set("value",this.rooms)},toggleStatus:function(e){if(this.model.get("packageid"))return a.trigger("req:redirect-package",this.model,"room"),!1;var t=this.ui.edit;"hide"==e||"hide"==this.getState("popup")?(this.switchState("popup:show"),t.text(t.data("save")),t.addClass("save"),this.triggerMethod("status:show")):(this.switchState("popup:hide"),t.text(t.data("edit")),t.removeClass("save"),this.resetModel())},compareEqual:function(){for(var e in this.originalPeople)if(this.originalPeople.hasOwnProperty(e)&&this.originalPeople[e]!=this.model.get("people")[e])return!1;return this.originalRoom==this.model.get("pack")[0].rooms},resetModel:function(){var e=this,t={adult:this.occupancyView.selectors.adultSelector.model.get("value"),child:this.occupancyView.selectors.childrenSelector.model.get("value")};this.people=t,e.model.set("people",t);var i=this.model.get("pack");e.rooms=this.occupancyView.selectors.roomSelector.model.get("value"),i[0].rooms=e.rooms,e.model.set("pack",i),e.model.set("__notValidate",!1);var n=e.model.get("pack")[0];e.model.set("pack",[{rateplancode:n.rateplancode,rooms:n.rooms}]),a.trigger("req:loading"),e.model.save({},{wait:!0,emulateForm:!1,emulateJSON:!0,success:function(){a.trigger("req:reset-collection",e.model.collectionData),e.originalPeople=t},error:function(){e.model.set("__notValidate",!0),a.trigger("req:reset-review")}}).always(function(){a.trigger("req:loaded")})},changePeople:function(e){this.people=e},deActive:function(){"show"==this.getState("popup")&&(this.switchState("popup:hide"),this.ui.edit.text(this.ui.edit.data("edit")),this.ui.edit.removeClass("save")),this.setOccupancySelector(),this.render()},search:function(){this.trigger("req:search")},onRender:function(){this.$el.find(".content").empty().append(this.occupancyView.render().el)}}))},{"../../../abmb/stateful.js":72,"../../../booking/view/booking-occupancy-popup.js":417,"../../assets/order-entry/occupancy-section.hbs":630,"../../model/view-event.js":670,backbone:8,"backbone.marionette":6,underscore:42}],630:[function(e,t,i){t.exports='<form><div class="bookingitem-content">\r\n    <h5 class="bookingitem-name">\r\n        <span class="icon-icon_I008"></span>\r\n        {{local "booking.occupancy"}}\r\n    </h5>\r\n    <div class="bookingitem-fold">\r\n        {{#if rooms}}\r\n            <span style="margin-right: 1em;">{{ rooms }} {{local "booking.room"}}</span>\r\n        {{/if}}\r\n        {{#each people}}\r\n            {{#equal-relax @key "adult" }}\r\n                <span style="margin-right: 1em;">{{this}} {{local "booking.adult"}} </span>\r\n            {{/equal-relax}}\r\n            {{#equal-relax @key "child" }}\r\n                <span style="margin-right: 1em;">{{this}} {{local "booking.child"}} </span>\r\n            {{/equal-relax}}\r\n        {{/each}}\r\n    </div>\r\n\r\n    <a class="bookingitem-edit" data-save="{{local \'checkout.save\'}}" data-edit="{{local \'checkout.edit\'}}">{{local "checkout.edit"}}</a>\r\n</div>\r\n\r\n<div class="bookingitem-extend">\r\n    <div class="box-content content">\r\n\r\n    </div>\r\n</div>\r\n</form>'},{}],696:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../model/view-event.js"),o=e("../../../abmb/stateful.js"),s=e("../../../calendar/calendar-twins"),r=e("../../../ui/util.js"),g=e("moment"),d=l.ItemView.extend(n.extend({},o,{template:Handlebars.compile(e("../../assets/order-entry/dates-section.hbs")),ui:{edit:".bookingitem-edit",tips:".item-dates-tip",datesSection:".bookingitem-dates",selectTip:".tips",checkinTip:".checkin"},events:{"click .bookingitem-edit":"toggleStatus"},initialize:function(e){this.switchState("popup:hide"),this.tempModel=new c.Model(n.extend({dates:{checkin:e.checkIn,checkout:e.checkOut}},e))},serializeData:function(){return this.tempModel.get("dates")},deActive:function(){if("show"==this.getState("popup")){var e=this.getDateFromModel(),t=this.tempModel.get("dates");t.checkin=e.start,t.checkout=e.end,this.tempModel.set("dates",t),this.render(),this.switchState("popup:hide"),this.ui.edit.text(this.ui.edit.data("edit"))}},toggleStatus:function(e){if(this.model.get("packageid"))return a.trigger("req:redirect-package",this.model,"room"),!1;var t=this.ui.edit;"hide"==e||"hide"==this.getState("popup")?(this.calendarTwinsCheckIn.setMonthToStartPick(g(this.tempModel.get("dates").checkin)),this.tempModel.set("dates",{}),this.switchState("popup:show"),this.triggerMethod("status:show"),t.text(t.data("save")),t.addClass("save")):(this.switchState("popup:hide"),t.text(t.data("edit")),t.removeClass("save"),this.saveModel())},onBeforeRender:function(){var e=this.getDateFromModel(),t=this.tempModel.get("dates")||{};t.diffDay=new g(e.end).diff(new g(e.start),"days"),this.tempModel.set("dates",t)},onRender:function(){var e=this;e.ui.checkinTip.text("");this.tempModel.get("dates");this.calendarTwinsCheckIn=new s({noActiveDay:!0,limitTo:"after",keepCheckOutPosition:!0}),this.calendarTwinsCheckOut=new s({noActiveDay:!0,limitTo:"after",forceAhead:!0}),e.calendarTwinsCheckIn.on("select",function(t,i){e.tempModel.set({dates:{checkin:t.format("YYYY-MM-DD"),checkout:""}}).trigger("cv1",i)}),e.calendarTwinsCheckOut.on("select",function(t){e.tempModel.set({dates:{checkout:t.format("YYYY-MM-DD"),checkin:e.tempModel.get("dates").checkin}}).trigger("cv1"),e.toggleStatus()}),this.$el.find(".date-start").append(this.calendarTwinsCheckIn.render().el),this.$el.find(".date-end").append(this.calendarTwinsCheckOut.render().el),e.on("req:change change",function(){e.ui.selectTip.text(i18n.t("booking.select_checkin_date")),e.calendarTwinsCheckIn.$el.parent().css("display","inline-block"),e.calendarTwinsCheckOut.$el.parent().css("display","none"),e.calendarTwinsCheckIn.unsetHover(),e.ui.checkinTip.text("")}),e.tempModel.on("change:dates cv1",function(t){e.ui.checkinTip.text("");var i=e.tempModel.get("dates"),n=e.tempModel.get("dates").checkin;e.calendarTwinsCheckIn.$el.parent().css("display",n?"none":"inline-block"),e.calendarTwinsCheckOut.$el.parent().css("display",n?"inline-block":"none"),e.ui.selectTip.text(n?i18n.t("booking.select_checkout_date"):i18n.t("booking.select_checkin_date")),e.calendarTwinsCheckOut.setLimitBefore(g(e.tempModel.get("dates").checkin)),n&&(e.ui.checkinTip.text(i18n.t("booking.checkin")+" "+g(i.checkin).format(r.getDateFormat())),t&&e.calendarTwinsCheckOut.older.prev())}).trigger("cv1")},getDateFromModel:function(){var e=this.model.get("dates")[0],t=this.model.get("dates")[1];return{start:e,end:t}},saveModel:function(){var e=this;e.model.set("__notValidate",!1);var t=this.tempModel.get("dates"),i=t.checkin,n=t.checkout;i&&e.model.set("dates",[i,n||g(i).add(1,"days").format("YYYY-MM-DD")]);var c=e.model.get("dates");t.checkin=c[0],t.checkout=c[1],e.tempModel.set("dates",t);var l=e.model.get("pack")[0];e.model.set("pack",[{rateplancode:l.rateplancode,rooms:l.rooms}]),a.trigger("req:loading"),e.model.save({},{emulateForm:!1,emulateJSON:!0,wait:!0,success:function(){a.trigger("req:reset-collection",e.model.collectionData)},error:function(){e.model.set("__notValidate",!0),a.trigger("req:reset-review")}}).always(function(){a.trigger("req:loaded")})}}));t.exports=d},{"../../../abmb/stateful.js":72,"../../../calendar/calendar-twins":423,"../../../ui/util.js":2122,"../../assets/order-entry/dates-section.hbs":629,"../../model/view-event.js":670,backbone:8,"backbone.marionette":6,moment:16,underscore:42}],629:[function(e,t,i){t.exports='<form>\r\n<div class="bookingitem-content">\r\n    <h5 class="bookingitem-name">\r\n        <span class="icon-icon_I007"></span>{{local "booking.dates"}}\r\n    </h5>\r\n\r\n    <div class="bookingitem-fold">\r\n        <span>{{#show-date-format checkin}}{{/show-date-format}}</span> - <span>{{#show-date-format checkout}}{{/show-date-format}}</span>\r\n        &nbsp;\r\n        {{#more-than diffDay 1}}\r\n            <span style="margin-right: 1rem;">({{ diffDay }} {{local "general.nights"}})</span>\r\n        {{/more-than}}\r\n        {{#compare diffDay 1 }}\r\n            <span style="margin-right: 1rem;">({{ diffDay }} {{local "checkout.night"}})</span>\r\n        {{/compare}}\r\n    </div>\r\n    <a href="javascript:void(0);" class="bookingitem-edit" data-save="{{local \'checkout.save\'}}" data-edit="{{local \'checkout.edit\'}}">{{local "checkout.edit"}}</a>\r\n</div>\r\n<div class="bookingitem-extend">\r\n    <div class="clearfix">\r\n        <p class="item-dates-tip clearfix" style="display: none;"><i class="icon"></i>{{local "checkout.dates_error"}}</p>\r\n    </div>\r\n    <div class="item-dates-selector">\r\n        <div class="dates-selector">\r\n            <div class="dates-tips"><div class="checkin change"></div><div class="tips"></div></div>\r\n            <div class="date-start"></div>\r\n            <div class="date-end"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n</form>'},{}],702:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../../../abmb/stateful.js"),o=(e("../../../../booking-customize/model/view-model"),e("./room-view/view")),s=e("./template.hbs");c.Collection.extend({});t.exports=l.ItemView.extend(n.extend({},a,{template:Handlebars.compile(s),ui:{expandTips:".collapse-button span",expandIcon:".collapse-button i",bedTypeWrapper:"#bed-type-wrapper",roomViewWrapper:"#view-type-wrapper",rateTitle:'[data-rate="title"]'},events:{"click #bed-type-wrapper li":"queryViewByBedType","click .collapsestrip":"toggleExpand"},initialize:function(e){var t=this;t.switchLock=e.switchLock,t.chooseRoomView=new o,e.rootView.on("change:rateCode",function(e){var i=e.rateCode;t.model=e.model,t.dataArray=t.collection.toJSON(),t.bedData=t.model.get(i),t.hasData=jQuery.isEmptyObject(this.bedData),t.type=i,t.render(),t.bedType=t.whichSelectedDefault(),t.setBedType(t.bedType,!0),t.couldUpgrade(),t.chooseRoomView.render(),t.chooseRoomView.delegateEvents()}),t.chooseRoomView.on("req:id",function(e){var i=n.findWhere(t.viewDate,{uuid:e});if(i.active){var c=n.findWhere(t.viewDate,{roomview:""});c&&(i.active=!1,c.active=!0)}else{for(var l=0;l<t.viewDate.length;l++)t.viewDate[l].active=!1;n.findWhere(t.viewDate,{uuid:e}).active=!0}t.couldUpgrade(),t.chooseRoomView.render(),t.chooseRoomView.delegateEvents(),t.unfoldAll(!0)}),t.chooseRoomView.on("req:upgrade",function(e){var i=n.findWhere(t.dataArray,{uuid:e});i.active?i.active=!1:i.active=!0,t.upgradespecified=i.active?1:0,t.suiteDate=i,t.chooseRoomView.suiteDate=t.suiteDate,t.chooseRoomView.upgradespecified=t.upgradespecified,t.chooseRoomView.render(),t.unfoldAll(!0)})},couldUpgrade:function(){var e=this,t=n.findWhere(e.viewDate,{active:!0}),i=n.where(e.dataArray,{bedtype:t.bedtype,roomview:t.roomview,ratecode:t.ratecode,categorygroup:t.categorygroup});if(i&&i.length>1){var c=n.sortBy(i,"categoryorder"),l=n.findIndex(c,{uuid:t.uuid});e.suiteDate=i[l+1],e.chooseRoomView.suiteDate=e.suiteDate}else e.chooseRoomView.suiteDate=null},serializeData:function(){return{hasData:this.hasData,bedType:this.type,bedData:this.bedData}},queryViewByBedType:function(e){var t=this;if(jQuery(e.currentTarget).hasClass("checked"))return!1;t.ui.bedTypeWrapper.find("li").removeClass("checked"),jQuery(e.currentTarget).addClass("checked");var i=jQuery(e.currentTarget).data("bedtype");t.setBedType(i),t.couldUpgrade(),t.chooseRoomView.render(),t.unfoldAll(!t.chooseRoomView.hasChildren())},whichSelectedDefault:function(e){var t=this.bedData&&this.bedData.hasOwnProperty(e),i=this,c="",l={};for(var a in this.bedData)if(this.bedData&&this.bedData.hasOwnProperty(a)){for(var o=this.bedData[a],s=0;s<o.length;s++)o[s].active&&(o[s].active=!1),!t&&o[s].defaultActive&&(o[s].active=!0,i.ui.bedTypeWrapper.find("[data-bedtype='"+a+"']").addClass("checked"),c=a),t&&e==a&&(o[s].active=!0,i.ui.bedTypeWrapper.find("[data-bedtype='"+a+"']").addClass("checked"),c=a),""==o[s].roomview&&(l=o[s]);var r=i.ui.bedTypeWrapper.find("[data-bedtype='"+a+"']"),g=n.findWhere(o,{roomview:""});r.find('[data-tag="icon"]').attr({"class":o[0].bedtypeicon}),g&&(r.attr("data-ratecode",g.ratecode),r.attr("data-roomtypecode",g.roomtypecode))}return c},setBedType:function(e){var t=this;t.bedType=e,t.viewDate=this.bedData?this.bedData[e]:[];for(var i=!1,n=0;n<t.viewDate.length;n++)t.viewDate[n].active&&(i=!0);i||(t.viewDate[0].active=!0),t.chooseRoomView.viewDate=t.viewDate,t.ui.roomViewWrapper.empty().append(t.chooseRoomView.render().el),t.chooseRoomView.delegateEvents()},unfoldAll:function(e){},setExpand:function(e){},toggleExpand:function(){},onRender:function(){}}))},{"../../../../abmb/stateful.js":72,"../../../../booking-customize/model/view-model":381,"./room-view/view":700,"./template.hbs":701,backbone:8,"backbone.marionette":6,underscore:42}],701:[function(e,t,i){t.exports='{{#unless hasData}}\r\n    <p class="item-tip clearfix error-message">{{local \'checkout.bed_type_error\'}}</p>\r\n{{/unless}}\r\n\r\n{{#if hasData}}\r\n<div id="bed-type-wrapper" class="room-options-list">\r\n    <p class="list-name">{{local \'checkout.bed_type\'}}</p>\r\n<ul>\r\n\r\n\r\n    {{#each bedData}}\r\n    <li data-bedtype="{{@key}}" data-ratecode=""  data-roomtypecode="">\r\n        <div class="content">\r\n            <span class="icon-icon_I003" data-tag="icon"></span>\r\n            <div>\r\n                <h6 class="name">{{@key}}</h6>\r\n            </div>\r\n        </div>\r\n        <!--<label class="checked-label"><span class="icon-icon_I009"></span></label>-->\r\n        <!--<label class="option-label"><span class="label-text bg-blue"><i data-tag="left" style="color:#fff;"></i></span></label>-->\r\n    </li>\r\n\r\n{{/each}}\r\n    </ul>\r\n</div>\r\n<div id="view-type-wrapper" class="room-options-list"></div>\r\n{{/if}}'},{}],700:[function(e,t,i){var n=e("./template.hbs"),c=e("../../../../../booking-customize/view/choose-roomview-view.js");t.exports=c.extend({template:Handlebars.compile(n),selectRoomView:function(e){return this.trigger("req:id",jQuery(e.currentTarget).attr("id")),!1},selectUpGrade:function(e){return this.trigger("req:upgrade",jQuery(e.currentTarget).attr("id")),!1}})},{"../../../../../booking-customize/view/choose-roomview-view.js":386,"./template.hbs":699}],699:[function(e,t,i){t.exports='\r\n\r\n{{#if hasType}}\r\n        <p class="list-name">{{local \'checkout.view_type\'}}</p>\r\n{{/if}}\r\n\r\n<ul class="booking-options room expand-content" id="view-type-wrapper">\r\n    {{#each viewDate}}\r\n        {{#if this.roomview}}\r\n            <li {{#if this.active}} class="checked" {{/if}} id="{{ this.uuid }}" data-view data-ratecode="{{ this.ratecode }}" data-roomtypecode="{{ this.roomtypecode }}">\r\n                <div class="content">\r\n                    <span class="{{ this.roomviewicon }}"></span>\r\n                    <div class="room-view-option">\r\n                        <h6 class="name">{{ this.roomview }}</h6>\r\n                        {{#if this.differPrice}}\r\n                            <div class="price"><b>+{{ this.currencymark}} {{#price-format this.differPrice}}{{/price-format}}</b><span>{{local "general.stay"}}</span></div>\r\n                        {{/if}}\r\n                    </div>\r\n                </div>\r\n            </li>\r\n        {{/if}}\r\n    {{/each}}\r\n\r\n    {{#if suiteDate}}\r\n        <li data-upgrade id="{{ suiteDate.uuid }}" {{#if suiteDate.active}} class="checked" {{/if}}>\r\n            <div class="content">\r\n                <span class="{{ suiteDate.categoryicon }}"></span>\r\n                <div class="room-view-option">\r\n                    <h6 class="name">{{ suiteDate.categoryname }}</h6>\r\n                    {{#if suiteDate.differPrice}}\r\n                        <div class="price"><b>+{{ suiteDate.currencymark }} {{#price-format suiteDate.differPrice}}{{/price-format}}</b><span>{{local "general.stay"}}</span></div>\r\n                    {{/if}}\r\n                </div>\r\n            </div>\r\n        </li>\r\n    {{/if}}\r\n\r\n</ul>'},{}],628:[function(e,t,i){t.exports='<form>\r\n<div class="bookingitem-content">\r\n    <h5 class="bookingitem-name">\r\n        <span class="icon-icon_J006"></span>{{local "checkout.rooms_options"}}\r\n    </h5>\r\n    <ul class="bookingitem-fold">\r\n        <li><span class="{{ customize.bedtypeicon }}"></span>{{ customize.bedtype }} </li>\r\n\r\n        {{#not-equal-relax customize.roomview "NOT APPLICABLE"}}\r\n            <li><i class="{{ customize.roomviewicon }}"></i>{{ customize.roomview }} </li>\r\n        {{/not-equal-relax}}\r\n        <li><span class="{{ customize.categoryicon }}"></span>{{ customize.category }} </li>\r\n    </ul>\r\n    <a class="bookingitem-edit" data-section="customize" data-save="{{local \'checkout.save\'}}" data-edit="{{local \'checkout.edit\'}}">{{local "checkout.edit"}}</a>\r\n</div>\r\n\r\n\r\n<div class="bookingitem-extend">\r\n</div>\r\n</form>'},{}],698:[function(e,t,i){var n=e("./template.hbs"),c=e("../../../../booking-customize/view/choose-stay-options-view.js");t.exports=c.extend({template:Handlebars.compile(n),toggleDescription:function(e){jQuery(e.target).closest("p").toggleClass("show"),e.stopPropagation()}})},{"../../../../booking-customize/view/choose-stay-options-view.js":387,"./template.hbs":697}],697:[function(e,t,i){t.exports='\r\n<!--<div id="no-add-on-tips" style="display: none">-->\r\n{{#unless this.services.length}} <p class="item-tip clearfix error-message">{{local "booking.no_stay_option"}}</p>{{/unless}}\r\n<!--</div>-->\r\n<!--<div class="booking-options stay expand-content clearfix" style="position:relative">-->\r\n    <!--<div class="loading-block">-->\r\n        <!--<p class="loading-gif"></p>-->\r\n    <!--</div>-->\r\n\r\n\r\n<ul class="addon-list">\r\n    {{#each this.services}}\r\n    <li>\r\n        <div data-key="{{ this.key }}"><span class="name">{{this.inventorycode}}</span>\r\n            <div class="price-block clearfix">\r\n                <div>\r\n                    <label class="price">{{ ratecurrencymark }}{{#price-format displayrate }}{{/price-format}}</label><span class="price-tip">{{ pricingtype }}</span>\r\n                </div>\r\n\r\n                <div class="count" id="{{ this.key }}">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <p class="description-trigger"><span>{{local \'checkout.description\'}}</span></p>\r\n            <p class="description">{{ desc }}</p>\r\n        </div>\r\n    </li>\r\n    {{/each}}\r\n</ul>\r\n\r\n    <!---->\r\n    <!--{{#each this.services}}-->\r\n        <!--<div data-key="{{ this.key }}"  style="display: none;">-->\r\n            <!--<h5 class="item-title">{{ this.inventorycode }}</h5>-->\r\n            <!--<div class="description">-->\r\n                <!--<p>{{ desc }}</p>-->\r\n                <!--<a class="more" href="javascript:void(0);" data-opt="more">{{local "general.read_more"}}</a>-->\r\n            <!--</div>-->\r\n            <!--<p class="price"><em> + {{ ratecurrencymark }}{{#price-format displayrate }}{{/price-format}}</em><span>{{ pricingtype }}</span></p>-->\r\n            <!--<div class="count" id="{{ this.key }}">-->\r\n            <!--</div>-->\r\n        <!--</div>-->\r\n    <!--{{/each}}-->\r\n\r\n\r\n\r\n\r\n\r\n    <!--<div class="viewmore expand-content" style="display:none; background-color: #dcd7d2;">-->\r\n        <!--<a class="wgt-sqbutton-dark" data-opt="view-more">{{local "booking.view_more_stay_options"}}</a>-->\r\n    <!--</div>-->\r\n\r\n\r\n\r\n<!--</div>-->\r\n'},{}],627:[function(e,t,i){t.exports='<form>\r\n<div class="bookingitem-content">\r\n    <h5 class="bookingitem-name"><span class="icon-icon_B023"></span><span>{{local "checkout.stays_options"}}</span></h5>\r\n    <ul class="bookingitem-fold">\r\n        {{#each servicedata}}\r\n            {{#more-than quantity 0}}\r\n                <li><span class="addon-title">{{ inventorycode }}</span>\r\n                    <label>{{local "checkout.Quantity"}} {{ quantity }}</label>\r\n                </li>\r\n            {{/more-than}}\r\n        {{/each}}\r\n    </ul>    <a class="bookingitem-edit" data-section="addon" data-save="{{local \'checkout.save\'}}" data-edit="{{local \'checkout.edit\'}}">{{local "checkout.edit"}}</a>\r\n\r\n</div>\r\n<div class="bookingitem-extend">\r\n</div>\r\n</form>'},{}],587:[function(e,t,i){var n=e("underscore"),c=e("backbone");BookingModel=e("../../../component/booking/model.js"),host=e("../../../../config/host.js").host;var l=c.Model.extend({url:function(){return host+"/api/order/room/detail?roomorderid="+this.get("__roomorderid")}}),a=c.Model.extend({query:function(e){function t(e,t){var n=i.match(e+"=([^&]+)");return t=t||"",n?n[1]:t}var i=window.location.search;return t(e)},url:function(){return host+"/api/order/room/detail?roomorderid="+this.query("roomorderid")},defaults:{},setDataInfo:function(e,t){var i=this;e||i.setDataPrice(t),i.set("__reviewForModification",!0),i.set("__canPayWithPoints",i.get("paywithpoints")),i.set("__loggedIn",i.get("islogon")),i.set("__currency",i.get("currency")),i.set("__currencymark",i.get("currencymark")),i.set("__oldCurrencymark",i.get("orderroom").currency)},setDataPrice:function(e){var t=this,i=(t.get("subtraction"),t.get("payamount")),n=t.get("payamountpoint");t.get("__payWithPoints");t.set("__payPoints",n.pointsbalance),t.set("__maxPointsCouldUse",n.requiredpoint),n.pointsbalance<n.requiredpoint?(t.set("__maxPointsWillUse",n.paypoint),t.set("__enoughPoints",!1)):(t.set("__maxPointsWillUse",n.paypoint),t.set("__enoughPoints",!0),t.set("__remainPoints",n.pointsbalance-n.requiredpoint)),i&&(t.set("__totalPrice",n.payprice),t.set("__offlinePrice",n.offlinepayprice),t.set("__fullPrice",n.totalprice),t.set("__totalPriceNoPoint",i.payprice),t.set("__offlinePriceNoPoint",i.offlineprice),t.set("__fullPriceNoPoint",i.totalprice),e&&0==t.get("flag")&&t.set("__maxPointsWillUse",0))},initialize:function(){this.set("roomorderid",this.query("roomorderid"))},doPost:function(e,t,i,n){this.getPostParamData(i,n).save({},{success:function(){}}).done(e).always(t)},getPostParamData:function(e,t){var i={};i=e?{upgradespecified:e.upgradespecified,roomtypecode:e.__rateinfo.roomtypecode,rateplancode:e.__rateinfo.ratecode,servicedata:e.servicedata}:this.get("newroom")&&this.get("newroom").key?{roomtypecode:this.get("newroom").roomtypecode,rateplancode:this.get("newroom").ratecode,servicedata:this.get("newservice"),bedtype:this.get("newroom").bedtype}:{roomtypecode:this.get("orderroom").roomtypecode,rateplancode:this.get("orderroom").ratecode,servicedata:this.get("orderservice"),bedtype:this.get("orderroom").bedtype};var c=n.extend(i,{checkin:this.get("checkin"),checkout:this.get("checkout"),rooms:this.get("rooms"),adults:this.get("adults"),children:this.get("children"),currency:t||this.get("currency")}),a=new l(c);return a.set("__roomorderid",this.query("roomorderid")),a},getBookingModel:function(){var e,t=new BookingModel;e=this.get("newroom")&&this.get("newroom").key?this.get("newroom"):this.get("orderroom");var i=this.get("orderroom");t.set({hotel:{code:this.get("hotelcode")},dates:{checkin:this.get("checkin"),checkout:this.get("checkout")},categoryid:e.categoryid,promocode:{groupcode:i.groupcode,promo:i.promocode},currency:this.get("currency"),selectedRateCode:e.ratecode});var n=t.get("occupancy");return n.findWhere({key:"rooms"}).set("value",this.get("rooms")),n.findWhere({key:"adults"}).set("value",this.get("adults")),n.findWhere({key:"children"}).set("value",this.get("children")),t},parse:function(e){return e}});a.PAYING=0,a.PAID=1,a.MODIFIED=3,a.FAILED=-1,a.CANCELLED=-2,a.MODIFING=9,a.NOTFOUND=100,a.NOT_ABIDE_RULE=201,a.CANT_MODIFY=301,a.CANT_MODIFY_PACKAGE=401,t.exports=a},{"../../../../config/host.js":45,"../../../component/booking/model.js":406,backbone:8,underscore:42}],584:[function(e,t,i){t.exports='<a href="javascript:void(0);" class="close" data-opt="use_points"><span\r\n        class="icon-icon_B017"></span></a>\r\n<img src="{{ __userIcon }}" class="level-logo">\r\n\r\n<div class="points-content">\r\n    <h6 class="title">{{local "checkout.pay_with_points"}}</h6>\r\n\r\n    <p>{{local "checkout.you_have"}} <em>{{#num-format __payPoints \'number\'}}{{/num-format}}</em> {{local "checkout.points"}}</p>\r\n\r\n    <p>{{local "checkout.your_booking_costs"}} <em>{{#num-format  __maxPointsCouldUse \'number\'}}{{/num-format}}</em> {{local "checkout.points"}}</p>\r\n    {{#if __enoughPoints}}\r\n        <p>{{local "checkout.points_left"}} <em>{{#num-format __remainPoints \'number\'}}{{/num-format}}</em> {{local "checkout.points"}}</p>\r\n    {{/if}}\r\n</div>\r\n<div>\r\n    <div class="overall-price-total clearfix">\r\n        <div>\r\n            <em>\r\n                {{ __currencymark }}\r\n                {{#price-format __fullPrice }}{{/price-format}}\r\n            </em>\r\n        </div>\r\n        <h4 style="font-size: 4rem">{{local "checkout.total_charge_all"}}</h4>\r\n    </div>\r\n    <div class="overall-price-total clearfix small">\r\n        <div><em> {{ __currencymark }}{{#price-format __totalPrice }}{{/price-format}}</em></div>\r\n        <h4>{{local "checkout.total_charge_cc"}}</h4>\r\n    </div>\r\n    {{#if __maxPointsWillUse}}\r\n        <div class="overall-price-total clearfix small">\r\n            <div><em><span>{{#num-format __maxPointsWillUse \'number\'}} {{/num-format}}</span></em></div>\r\n            <h4>{{local "checkout.points_redeemed"}}</h4>\r\n        </div>\r\n    {{/if}}\r\n    <div class="overall-price-total clearfix small">\r\n        <div><em> {{ __currencymark }}{{#price-format __offlinePrice }}{{/price-format}}</em></div>\r\n        <h4>{{local "checkout.total_charge_offline"}}</h4>\r\n    </div>\r\n</div>\r\n\r\n<div class="button-block pay-point-next-button">\r\n    <a class="wgt-sqbutton-dark" data-opt="use_points">{{local \'general.cancel\'}}</a>\r\n    <a data-opt="next_step" data-tag="apply_points"\r\n       class="wgt-sqbutton-blue {{#if __notAllow}} disable {{/if}}"\r\n       href="javascript:void(0);">{{local "checkout.next_step"}}</a>\r\n</div>\r\n'},{}],708:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../model/view-event"),a=e("../../../../../config/host.js").host,o=e("../../../abmb/stateful.js");e("../../../account-management/transaction-history/assets/styles.sass");t.exports=c.ItemView.extend(n.extend({},o,{template:Handlebars.compile(e("../../assets/order-entry/remove-confirm.hbs")),ui:{},initialize:function(){this.switchState("confirm:hide")},events:{'click a[data-opt="cancel"]':"cancel",'click a[data-opt="remove"]':"remove"},remove:function(e){e.stopPropagation();var t=this;l.trigger("req:loading"),"product"==t.type&&jQuery.ajax({type:"post",url:a+"/api/shops/checkout/delete",data:{id:t.model.get("bookingid")
},success:function(){}}).always(function(){t.switchState("confirm:hide"),l.trigger("req:remove-success")}),"room"==t.type&&jQuery.ajax({type:"post",url:a+"/api/booking/checkout/delete",data:{id:t.model.get("id")},success:function(){}}).always(function(){t.switchState("confirm:hide"),l.trigger("req:remove-success")}),"gift"==t.type&&jQuery.ajax({type:"delete",url:a+"/api/gifts/shopcart/"+t.model.get("BookingId")+"/delete",success:function(){}}).always(function(){t.switchState("confirm:hide"),l.trigger("req:remove-success")}),"ingresso"==t.type&&jQuery.ajax({type:"post",url:a+"/api/ingresso/checkout/delete",data:{id:t.model.get("bookingid")},success:function(){}}).always(function(){t.switchState("confirm:hide"),l.trigger("req:remove-success")})},cancel:function(){this.switchState("confirm:hide")},serializeData:function(){return{itemName:this.options.itemName}},onRender:function(){}}))},{"../../../../../config/host.js":45,"../../../abmb/stateful.js":72,"../../../account-management/transaction-history/assets/styles.sass":111,"../../assets/order-entry/remove-confirm.hbs":633,"../../model/view-event":670,backbone:8,"backbone.marionette":6,underscore:42}],633:[function(e,t,i){t.exports='<div id="overlayer-wrapper">\r\n    <div id="removeConfirmWrapper">\r\n        <div class="inner">\r\n            <h6>{{local "checkout.remove_item_cart"}}</h6>\r\n            <p>\r\n                {{#if itemName}}\r\n                    {{local "checkout.about_to_remove" itemName}}\r\n                {{else}}\r\n                    {{local "checkout.remove_confirm"}}\r\n                {{/if}}\r\n                <br>\r\n                <span>{{local "checkout.undo_tip"}}</span>\r\n            </p>\r\n            <div class="btn-wrapper">\r\n            <a class="wgt-sqbutton-black" data-opt="cancel"> {{local "checkout.close_and_return"}}</a>\r\n            <a class="wgt-sqbutton-blue" data-opt="remove"> {{local "checkout.remove_item"}}</a>\r\n        </div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],536:[function(e,t,i){var n=e("backbone.marionette");e("./style.sass"),t.exports=n.ItemView.extend({template:function(t){return Handlebars.compile(e("./template.hbs"))(t)}})},{"./style.sass":534,"./template.hbs":535,"backbone.marionette":6}],535:[function(e,t,i){t.exports='<div class="checkout2-loading">\r\n    <div class="checkout2-loading__inner">\r\n        <div class="checkout2-loading__content">\r\n            <div><img width="100" height="100" src="/assets/img/card/Preloader3.2_RedIcon_300px.gif" alt="{{local "form.loading"}}"></div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],534:[function(e,t,i){t.exports=e("sassify")(".checkout2-loading {   z-index: 10003;   position: fixed;   text-align: center;   bottom: 0;   right: 0;   left: 100px;   top: 0; }   .checkout2-loading .checkout2-loading__inner {     width: 100%;     height: 100vh;     overflow: hidden;     box-sizing: border-box;     background-color: rgba(255, 255, 255, 0.7);     margin: 0 auto; }     .checkout2-loading .checkout2-loading__inner .checkout2-loading__content {       width: 150px;       margin: 50vh auto 0;       -webkit-transform: translateY(-50%);       -moz-transform: translateY(-50%);       -ms-transform: translateY(-50%);       -o-transform: translateY(-50%);       transform: translateY(-50%); }  ");
},{sassify:36}],711:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../abmb/stateful.js"),a=e("../model/order-status");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("../assets/order-status.hbs")),ui:{},initialize:function(e){var t=this;t.model=e&&e.model||new a,this.switchState("order-status:hide")},onRender:function(){},reset:function(e){this.model=new a(e),this.render()}}))},{"../../abmb/stateful.js":72,"../assets/order-status.hbs":637,"../model/order-status":663,backbone:8,"backbone.marionette":6,underscore:42}],663:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js").host,l=n.Model.extend({url:function(){return this.cupCall?c+"/api/booking/checkout/checkorder-"+this.__payType:c+"/api/booking/checkout/checkorder"},defaults:{card_status:0,payment_status:0}});l.PROCESSING=0,l.PROCESSED=1,l.FAILED=-1,t.exports=l},{"../../../../config/host.js":45,backbone:8,underscore:42}],637:[function(e,t,i){t.exports='<div id="order-status-wrapper">\r\n    <div class="inner" style="text-align: center">\r\n        {{#unless headerHide}}\r\n            {{#ifCond 1 \'==\' -1}}\r\n                <h6>{{local "checkout.order_complete"}}</h6>\r\n            {{else}}\r\n                <h6>{{local "checkout.process_order_title"}}</h6>\r\n            {{/ifCond}}\r\n        {{/unless}}\r\n\r\n        <section class="logo">\r\n            <img src="/assets/img/card/Preloader3.2_RedIcon_300px.gif" alt="{{local "form.loading"}}"/>\r\n        </section>\r\n        {{#if progressAdditionalText}}\r\n            <p class="progress-additional-text">{{local \'checkout.waiting_info\'}}</p>\r\n        {{/if}}\r\n\r\n        <div class="status-process">\r\n            {{#ifCond card_status \'==\' 1}}\r\n                <section class="process-cart success">\r\n                    <span>{{local "checkout.processsed_cart"}}</span>\r\n                    <i class="check-yes icon-icon_75"></i>\r\n                </section>\r\n            {{/ifCond}}\r\n            {{#ifCond card_status \'==\' -1}}\r\n                <section class="process-cart failed">\r\n                    <span>{{local "checkout.failed_cart"}}</span>\r\n                    <i class="check-yes icon-icon_75"></i>\r\n                </section>\r\n            {{/ifCond}}\r\n            {{#ifCond card_status \'==\' 0}}\r\n                <section class="process-cart">\r\n                    <span>{{local "checkout.processing_cart"}}</span>\r\n                </section>\r\n            {{/ifCond}}\r\n\r\n\r\n            {{#ifCond payment_status \'==\' 1}}\r\n                <section class="process-payment success">\r\n                    <span>{{local "checkout.processed_pay_text"}}</span>\r\n                    <i class="check-yes icon-icon_75"></i>\r\n                </section>\r\n            {{/ifCond}}\r\n            {{#ifCond payment_status \'==\' -1}}\r\n                <section class="process-payment failed">\r\n                    <span>{{local "checkout.failed_pay_text"}}</span>\r\n                </section>\r\n            {{/ifCond}}\r\n            {{#ifCond payment_status \'==\' 0}}\r\n                <section class="process-payment">\r\n                    <span>{{local "checkout.processing_pay_text"}}</span>\r\n                </section>\r\n            {{/ifCond}}\r\n        </div>\r\n    </div>\r\n</div>'},{}],626:[function(e,t,i){t.exports=e("sassify")('/**  *  * @param { 300 | bold } $font-weight  * @param { normal     } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal           } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { 300 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { normal } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ .checkout .overall-price .overall-price-points-extend {   display: none; }  .checkout .overall-price .pay-points-expanded {   display: none; }  .bookingitem-dates .popup-show .bookingitem-extend {   display: block; }  .bookingitem-dates .popup-hide .bookingitem-extend {   display: none; }  .bookingitem-seats .popup-show .bookingitem-extend {   display: block; }  .bookingitem-seats .popup-hide .bookingitem-extend {   display: none; }  .bookingitem-method .popup-show .bookingitem-extend {   display: block; }  .bookingitem-method .popup-hide .bookingitem-extend {   display: none; }  .bookingitem-post .popup-show .bookingitem-extend {   display: block; }  .bookingitem-post .popup-hide .bookingitem-extend {   display: none; }  .bookingitem-addon .popup-show .bookingitem-fold {   display: none; }  .bookingitem-addon .popup-show .bookingitem-extend {   display: block; }  .bookingitem-addon .popup-hide .bookingitem-extend {   display: none; }  .bookingitem-addon .popup-hide .bookingitem-fold {   display: inline-block; }  .bookingitem-customizations .popup-show .bookingitem-fold {   display: none; }  .bookingitem-customizations .popup-show .bookingitem-extend {   display: block; }  .bookingitem-customizations .popup-hide .bookingitem-extend {   display: none; }  .bookingitem-customizations .popup-hide .bookingitem-fold {   display: inline-block; }  .bookingitem-occupancy .popup-show .bookingitem-fold {   display: none; }  .bookingitem-occupancy .popup-show .bookingitem-extend {   display: block; }  .bookingitem-occupancy .popup-hide .bookingitem-extend {   display: none; }  .bookingitem-occupancy .popup-hide .bookingitem-fold {   display: inline-block; }  .bookingitem-occupancy .agebands .counter {   float: left;   margin-left: 20px;   margin-bottom: 10px; }  html[dir="rtl"] .bookingitem-occupancy .agebands .counter {   float: right;   margin-right: 20px;   margin-left: 0; }  .bookingitem-guestdetail .popup-show .bookingitem-fold {   display: none; }  .bookingitem-guestdetail .popup-show .bookingitem-extend {   display: block; }  .bookingitem-guestdetail .popup-show .bookingitem-edit {   display: none; }  .bookingitem-guestdetail .popup-hide .bookingitem-extend {   display: none; }  .bookingitem-guestdetail .popup-hide .bookingitem-fold {   display: inline-block; }  .bookingitem-guestdetail .popup-hide .bookingitem-edit {   display: inline; }  .bookingitem-package .popup-show .bookingitem-extend {   display: block; }  .bookingitem-package .popup-show .bookingitem-fold {   display: none; }  .bookingitem-package .popup-hide .bookingitem-extend {   display: none; }  .bookingitem-package .popup-hide .bookingitem-fold {   display: inline-block; }  .bookingitem-request .popup-show .bookingitem-extend {   display: inline-block; }  .bookingitem-request .popup-show .bookingitem-fold {   display: none; }  .bookingitem-request .popup-hide .bookingitem-extend {   display: none; }  .bookingitem-request .popup-hide .bookingitem-fold {   display: inline-block; }  .bookingitem-error .item-dates-tip {   background-color: #ba0c2f;   padding: 1.5rem 2rem;   vertical-align: middle;   color: #fbf4f5;   font-size: 1.4rem;   line-height: 1.5em; }   .bookingitem-error .item-dates-tip a {     font-size: 1.4rem;     text-decoration: underline;     cursor: pointer;     color: white; }   .bookingitem-error .item-dates-tip i.icon {     float: right;     background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAa0lEQVQoU23PMQ7AIAwEwZN4LX0KHgRVmvxwUyDANoaOHSGdKHQqSm6lU8QASEgFYIjGPJ7MDE1kZGc0HzwxeQFLXD7gEJctsGRnD9bnblGWHYm5xdExizD6zoFk2RHRk3xIF4WP58qTvJQfWj1lGa8+uQkAAAAASUVORK5CYII=) no-repeat center center;     background-size: 1.6rem;     width: 1.6rem;     height: 1.6rem;     margin-right: 0;     cursor: pointer; }  html[dir="rtl"] .bookingitem-error .item-dates-tip i.icon {   float: left; }  .checkout-confirmation .bookingitem-remove {   display: none !important; }  .checkout-confirmation .bookingitem-edit {   display: none !important; }  .checkout-confirmation .overall-price-converter {   display: none !important; }  .guest-add .form select {   height: 50px;   border: 0;   outline: none;   font-size: 1.8rem;   background-color: transparent;   width: calc(100% + 15px); }  .edit-occupancy .booking-occupancy-popup {   z-index: 1;   background-color: #363636;   width: 100%;   height: 100%; }   .edit-occupancy .booking-occupancy-popup .people {     -webkit-touch-callout: none;     -webkit-user-select: none;     -khtml-user-select: none;     -moz-user-select: none;     -ms-user-select: none;     user-select: none;     box-sizing: border-box;     text-align: center; }     .edit-occupancy .booking-occupancy-popup .people .counter {       font-size: 2rem;       color: white;       padding: 3.5rem; }       .edit-occupancy .booking-occupancy-popup .people .counter label {         width: 5em; }         @media screen and (max-width: 768px) {           .edit-occupancy .booking-occupancy-popup .people .counter label {             width: 6em; } }       .edit-occupancy .booking-occupancy-popup .people .counter a.btn {         color: white;         border: solid 0.2rem white; }         .edit-occupancy .booking-occupancy-popup .people .counter a.btn span {           font-size: 3.5rem; }       .edit-occupancy .booking-occupancy-popup .people .counter:nth-child(2) {         margin-top: -1.5rem; }   .edit-occupancy .booking-occupancy-popup h5.head {     line-height: 40px;     font-size: 1.6rem;     background-color: #282828;     color: #9e9e9e;     text-indent: 22%; }   .edit-occupancy .booking-occupancy-popup .booking-selector {     color: white;     padding: 0 10px;     overflow: hidden;     position: relative;     width: 280px;     margin: 0 auto; }     .edit-occupancy .booking-occupancy-popup .booking-selector a.selector-label {       display: block;       color: white;       font-size: 1.6rem;       line-height: 46px; }       .edit-occupancy .booking-occupancy-popup .booking-selector a.selector-label:after {         display: inline-block;         content: \' \';         width: 0;         height: 0;         border: 6px solid transparent;         vertical-align: sub;         position: absolute;         right: 40px;         top: 20px; }     .edit-occupancy .booking-occupancy-popup .booking-selector ul.selector-items li.selector-item {       float: left;       margin: 0 10px;       line-height: 30px; }       .edit-occupancy .booking-occupancy-popup .booking-selector ul.selector-items li.selector-item a {         display: inline-block;         width: 20px;         line-height: 20px;         height: 20px;         overflow: hidden;         text-align: center;         border: 1px white solid;         font-size: 1.4rem; }         .edit-occupancy .booking-occupancy-popup .booking-selector ul.selector-items li.selector-item a:hover {           color: #282828;           background-color: white; }       .edit-occupancy .booking-occupancy-popup .booking-selector ul.selector-items li.selector-item.selected-select a {         color: #282828;         background-color: white; }       .edit-occupancy .booking-occupancy-popup .booking-selector ul.selector-items li.selector-item.selected-unselect a {         color: white; }         .edit-occupancy .booking-occupancy-popup .booking-selector ul.selector-items li.selector-item.selected-unselect a:hover {           color: #282828;           background-color: white; }     .edit-occupancy .booking-occupancy-popup .booking-selector.state-fold {       height: 45px; }       .edit-occupancy .booking-occupancy-popup .booking-selector.state-fold a.selector-label:after {         border-top-color: white; }     .edit-occupancy .booking-occupancy-popup .booking-selector.state-expand {       height: 92px; }       .edit-occupancy .booking-occupancy-popup .booking-selector.state-expand a.selector-label:after {         border-bottom-color: white; }  .edit-occupancy.popup-hide .booking-occupancy-popup {   display: none; }  html[dir="rtl"] .booking-occupancy-popup .booking-selector a.selector-label:after {   left: 40px;   right: auto; }  html[dir="rtl"] .booking-occupancy-popup .booking-selector ul.selector-items li.selector-item {   float: right; }  .order-status-hide #order-status-wrapper {   display: none; }  .order-status-show #order-status-wrapper {   display: block; }  #order-status-wrapper {   position: fixed;   left: 50%;   top: 50%;   width: 400px;   transform: translate(-50%, -50%);   -webkit-transform: translate(-50%, -50%);   -ms-transform: translate(-50%, -50%);   -o-transform: translate(-50%, -50%);   -moz-transform: translateX(-50%, -50%); }   #order-status-wrapper .inner {     border: 1px solid #878787;     background-color: #d0d0d0; }     #order-status-wrapper .inner .progress-additional-text {       padding-bottom: 58px;       font-size: 20px;       text-transform: uppercase;       font-family: \'Museo Sans\', Helvetica, sans-serif;       font-weight: bold;       padding-left: 30px;       padding-right: 30px;       line-height: 30px; }     #order-status-wrapper .inner h6 {       font-size: 16px;       font-weight: 300;       text-indent: 2rem;       height: 60px;       line-height: 60px;       background-color: #4d4d4d;       color: #fff; }     #order-status-wrapper .inner .logo {       padding: 35px 0;       text-align: center; }       #order-status-wrapper .inner .logo img {         width: 150px;         height: 150px; }     #order-status-wrapper .inner .cup-link {       display: block;       text-decoration: underline;       cursor: pointer;       margin-bottom: 2rem;       font-size: 1.5rem; }     #order-status-wrapper .inner .status-process {       display: none; }       #order-status-wrapper .inner .status-process .process-cart, #order-status-wrapper .inner .status-process .process-payment {         margin: 0 auto;         width: 80%;         height: 50px;         line-height: 50px;         position: relative;         text-align: center;         background-color: black;         color: #fff; }         #order-status-wrapper .inner .status-process .process-cart .check-yes, #order-status-wrapper .inner .status-process .process-payment .check-yes {           display: none; }         #order-status-wrapper .inner .status-process .process-cart.success, #order-status-wrapper .inner .status-process .process-payment.success {           background-color: #39b54a; }           #order-status-wrapper .inner .status-process .process-cart.success .check-yes, #order-status-wrapper .inner .status-process .process-payment.success .check-yes {             display: block;             position: absolute;             font-size: 28px;             right: 30px;             top: 11px;             width: 28px;             height: 28px; }         #order-status-wrapper .inner .status-process .process-cart.failed, #order-status-wrapper .inner .status-process .process-payment.failed {           background-color: red; }       #order-status-wrapper .inner .status-process .process-cart {         margin-bottom: 20px; }     #order-status-wrapper .inner .loader {       height: 4px;       width: 100%;       position: relative;       overflow: hidden;       background-color: #ddd; }       #order-status-wrapper .inner .loader:before {         display: block;         position: absolute;         content: "";         left: -200px;         width: 200px;         height: 4px;         background-color: #878787;         animation: loading 2s linear infinite; }  html[dir="rtl"] #order-status-wrapper .inner .status-process .process-cart.success .check-yes, html[dir="rtl"] #order-status-wrapper .inner .status-process .process-payment.success .check-yes {   left: 30px;   right: auto; }  html[dir="rtl"] #order-status-wrapper .inner .loader:before {   right: -200px;   left: auto; }  .confirm-hide #removeConfirmWrapper {   display: none; }  .confirm-show #removeConfirmWrapper {   display: block; }  html[dir="rtl"] #removeConfirmWrapper .btn-wrapper a.wgt-sqbutton {   margin-left: 10px;   margin-right: 0; }   @media (max-width: 570px) {     html[dir="rtl"] #removeConfirmWrapper .btn-wrapper a.wgt-sqbutton {       margin-left: 0; } }  .bookingitem .bookingitem-price .daily-price {   width: 100%; }   .bookingitem .bookingitem-price .daily-price h6 {     position: relative; }     .bookingitem .bookingitem-price .daily-price h6 .hide-tips {       cursor: pointer;       position: absolute;       top: 5px;       right: 10px;       font-size: 4rem;       color: #fff; }   .bookingitem .bookingitem-price .daily-price ul li {     overflow: hidden;     padding: 1rem;     text-align: center; }     .bookingitem .bookingitem-price .daily-price ul li .price-wrapper {       display: inline-block; }  html[dir="rtl"] .bookingitem .bookingitem-price .daily-price h6 .hide-tips {   left: 10px;   right: auto; }  @media screen and (max-width: 768px) {   #order-status-wrapper {     width: 80%; }     #order-status-wrapper .inner .logo {       padding: 20px 0; }       #order-status-wrapper .inner .logo img {         width: 100px;         height: 100px; }     #order-status-wrapper .inner .status-process .process-cart.success .check-yes, #order-status-wrapper .inner .status-process .process-payment.success .check-yes {       right: 6px; }   #remove-confirm-wrapper {     width: 80%; }   span.text {     display: inline-block;     visibility: hidden;     transition: all 0s 0s;     opacity: 0;     width: 173px;     height: 37px;     margin: 25px 90px;     background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK0AAAAlCAQAAACaRaF9AAAKUklEQVRo3u2aeXTVxRXHP+/lJS+ELPCQyB5AEhVQg4LmoGgQcEEloS4o56ARQ7DUGmpdqkit2FNFrNCquIAIicgRKhWMca0FWyyRJVFBxKAsISiEgEmAGPKS2z/eZJjfEp4lJ2l7Tu47kN/vznfu786dO3dm7gzSUTaLiEij3CA4fj4pFhGRr8WjeZkSousMXJGIiGw1UCd+4xQ+06XsbHEjvy4fJo0iIlLgIrlARI5JJ/UWL/tERGSXdHUg7xcRkTH6faj6zjTN6SVBERF5wlYzQY6IiMhLBu8XqvZHLu1BcqRBRESuRpDnFPQNF+AEVTbf4EVLvYjUSweDN0NEROa4fswv9SIStOBP/EpFRCRd0iVdxslkmS9VEjDKP1UaTHbUnCIiq433JxUyz4FMEZEfxGtwQt3Q1+BsEhGRSx113xURsbhdinaBPi6uWK4c1e8F6gnRWGKxU476e8Dg/chh4CC1Bq/c+N9OdRwADlvw9pprWMMaVrOIaQzUGgGUqr9zSLTV3AlsckFOYrQN+S1QTKPBCbVnj8Epc3BC9D0Aew3Ocf10vQM9lh4AVFPnVY1fAURzpQ04gMvJB+CohX8MqLNwgi6oE1R/krIGF2PXGG/VNPIpEOApG67K1uRq4F8API/fpl2tBRnCBi3GPq7cBpevOLVfCsDPHOgp/INdQA2ETFvB0wDc6ADuZLE2jtsnm+hIM6jwVBOmvI4abuYoMInLHB122IKEXD4DBnC/TcpxCxIaXd3FzbTiquVKioCLlY82UW/G8jRVIYfxKs8pYgdwjaW3I7mNBZaedX6ybWgnDwDwHJG2kkbH+MgiCDxEvzDIllEjSwEP4yzcyeyjoOnFqw2VB8RyhQEcR4CX+d+g+XwADOLBsMgSZgHRLMDTqhoto942zr1M5mUVGg3TQj5ig+bwpmX6+m+SkE0NMJPUsNjH2QSMYlqranSQQiCdgOZcRU8WngD49NMuPuYyriVSRcwkxnB5m5luutImjgTKmeOC2MOveQkf+Qy1TaF2CpLFJqJ4kvf1qqE1aDEZeBmvR/YUCszJ0muBQmdGqbdsSlnbZqady1zmMoeJBFnUDGYhHwCDeSSstC3MAmJYRESLNfM1W1JIpbEA68a1vAhW00ap5zc4BoxXAu/gBWOq6tjKph3CufTBTzL3UhkmKDxAWlh5s9kEXMI9LdbMudbvoFcdy4BRJKgprIz3TIwXiNHLoJXAeCKAqwmwxBAX1cqmLeELyozFuL37m4JCLuBlida5OWyQLOqAxxjYQs0iHZwTq6glQBTjAC/ZLDRWIX6r10Ie0JURQA7LOWSISwijgLfVjB5PnPH2CoVACn9wQSYA8UZQmAn4yTvJkP4p1LFZr4WNbAMygZH0MqcwEqxeC3+jHLie3ozlhWZ6qjkDnIxaEvG8jq13FXA3Ix1I+2LraYqAC3joP/ia/ye0zG+bn8YSy1THairS6rWN5AM3MZ0v+cRilg5hVDp5eVwLvaaTZRs8HfCwyCE11oZsUEFhJkN+8tcSHZz+J23rUhqJ5ldk8rzN9B29QHcDvARI5B4DGNdM31ljUPRJFY5pgUfHOTCLKQT6qi241bRWH/+KmYCPv7pMRu4b90ts3DNIcoyIboY7lvMhMIudrLGZPtYLDDBc/Cs2AMd41faJpDAxKNHFZJ11k51TQZcwHt1VP/VVjbHmNg65+FNfoLsjKKwHkhwd6HfMH5+p9XW0y3rbih1gcZbQZP+iY+Pfz0tvYok2ensxsIxqmxFSLP3WyeHHKY6cWaE2WorD36cxwyLLSmezhLF6VdnXpWP3cbdLfE12QTZwq0pmelwcw4yaqzgKpLCaPlr2L7lLJWxMrx9kCQpvUkOdZQSF3CLZRwbgpz87VMHrzDXCQaiPIJaBbNUemgB0JtEI3KFoNpFUvAQYxHkc0rnPoQAEmAd0pCcXEWCqDiRnATBPLfG6kEoKqEwcXIAfGE6hI6l3IxkWb4rkImC4o6NKeYi5Nr/zcQYAg418byX38CIwhm8pYjfRXEgXchjHtcCZ/FOPwZHA2UbGbAVRxmrqdOXRaT7SWAsM0qat5FFLgjlK7cmGaNMOU5zzeVdHpD3sAaLUDr+Ktyg2OieEb9r9b+CI3uddyHpLGeygmGq+1B6/1tWz4U5SiFHJTICz2Ag04Hdsg//MaAZz0OBcwAblf2ZLX+IAj3IuEQxnOJUs53HKGM12jhijYQzFto5aciIlA/RXbTvN05a5wf8LSqQHHr7jQEvTkO2mbTXytpug3bTtpm2ndtO2m7bdtO3Ubtq2o1NNE5/DKJ4lSHcm8DrfAXHcxplUks83QJo+ZKllAUlkALCe9Xi5i48pUSmcWxiCh/l6LxiiKziN1wCIZzLvsB3oSgYL6ckE4vFRx5t8YamTTS8i2U4+gp+fA7CXvwBdyCFAUB20n87t9KScV9gP9OFmYohgJcXArfp8dgsfEkkWZxLBU81cuApHcmq/EVImCNJZRDoLEi8b5RpBRkqlnCdIqqTKHFkqqRIQJFmqpJMkS6ogyFZ9Z3C6LBWvnC79bNJXSbXEq+cK+Vx8gkTL24J0FZEo6SA3ySHJsNR5RyZIgmxW9yHLZYT0kosFQdbKBEHSBEH6yJcyVDwyUcqkmyA95Ygg6XJQPIKkS6psl2wZJH5BZsmz4pE+0uPUbHSqAaFGHQ4eVv+mU8zbwN9ZwUyghBLKqaCEQ0A9wg+UKl+t1xeYBnKQRvaz0yK7N0V8onNfyzlOLvAjFYQuIx2nluXM4I+WWnXUUUWpalE9NexlnRph34PKVfyeV9mI8Bql5AJHCQIb1OhdQwm17GArdcBgDiDsYV9bx9oEMskkU71dyUb19BHDXAPPdWSqLJqZ2MjiCcfp02TyWaUl15PFwyQ7JH7IGTojHKJejKeaVeptBJlKk2d4XV9duYIiXX+YCkrn8DBTXC5aLeQ+ZoQ9umoF0x5nF7vYpQ3dlP056hq/vURTwbc27jrOZxhf0NPg+UnnDvpzlcouedjCU+Q5ktlB7LccU1nEM5oXwzGVP3uEKcxjWSgfpU+Na5XECHK5lJUuOheSxnVstnVgG5i2lhJK1BCHfQxST/343LUjVrDOJZf0DaMpY5LByWI2v+M+1pClph2YTST32moms81I2AMU8AD52sve4319F/EthnEDKcBuzlG8JLYozaYS4ZAeoq1cTKPj/mYrm9anDjr8hM6JFnALnYBIsviT4YFWCuCl6cgmAKQBwl4jpR7NRHVRIo878RA6vAkyyTiX8ACR3MdMm/QYFrCfxwxOBJ1V2KikisPAy2QTpcLZfCACPw3cym84z9HG84EG9rG/bRdf3RF8BOnNbpIoZQVJFLCZ3szTCfIuOor2oIJ5dKAbGcQhZDORvcziQXYSZC95Wu4kdqioV8CjXEQFAbw0so3f0gvozm6e5yCn8TgfWTSKoxPC7axkJJ9SRy7HSCKXaF6jmESmUgHMJsA7bKEfOWwD+rKfrnzNdOZwA9VAgz7nm81n+FjH6lMz0b8BPR7mhDmv/bYAAAAASUVORK5CIIA="); } }  @media print {   body .global-wrapper {     visibility: hidden; }   .checkout-confirmation {     visibility: visible; } }  .maximum_occupancy[data-section="maximum_occupancy"] {   display: none;   font-size: 1.5rem;   line-height: 1.2em;   color: white;   text-align: center;   padding-bottom: 2rem; }  ');
},{sassify:36}],517:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../../../booking-2.1/common/scroll");t.exports=c.CompositeView.extend({template:Handlebars.compile(e("./template.hbs")),ui:{close:"[data-item='close']",lampbox:".book2-lampbox-container"},events:{"click @ui.close":function(e){e.stopPropagation(),this.__closeLightBox()},click:function(e){this.ui.lampbox.has(e.target).length||this.__closeLightBox()},mousewheel:function(e){e.preventDefault()},DOMMouseScroll:function(e){e.preventDefault()}},initialize:function(){this.__renderDeferred=jQuery.Deferred(),l.autoCreate(this,{lock:!0})},onRender:function(){this.__renderDeferred.resolve()},serializeData:function(){var e=this.options.rootState.getCartInfo();return{entries:n.map(e.entries,function(e,t){return e.index=t+1,e.ratename=e.pack[0].name,e})}},lightBoxAnimate:function(e){return this.__renderDeferred.then(jQuery.proxy(this.__lightBoxAnimate,this,e))},__lightBoxAnimate:function(e){if(e){var t=this,i=t.ui.lampbox.width(),n=t.ui.lampbox.height(),c=t.ui.lampbox.offset(),l=jQuery(window).scrollTop(),a=e.top-l,o=e.left,s=c.top-l,r=c.left;t.__prevAnimateObj={position:"absolute",left:o,top:a,opacity:0,height:0,width:0},t.__nextAnimateObj={position:"absolute",left:r,top:s,opacity:1,height:n,width:i},t.ui.lampbox.css(t.__prevAnimateObj).animate(t.__nextAnimateObj,300,function(){t.ui.lampbox.removeAttr("style")})}},__closeLightBox:function(e){var t=this;t.__prevAnimateObj&&t.__nextAnimateObj?t.ui.lampbox.css(t.__nextAnimateObj).animate(t.__prevAnimateObj,300,function(){e&&e.resolve(),t.destroy()}):(e&&e.resolve(),t.destroy())}})},{"../../../../booking-2.1/common/scroll":349,"./template.hbs":516,"backbone.marionette":6,underscore:42}],516:[function(e,t,i){t.exports='<div class="x-mask x-mask-black">\r\n    <div class="x-al-c x-nowrap book2-vertical">\r\n        <div class="book2-lampbox-container x-al-l x-normal">\r\n            <div class="book2-lampbox-head">\r\n                <div class="x-flex x-fs-00">\r\n                    <span class="x-cell x-al-l x-di-v-m x-ff-vb ">\r\n                        <span class="x-di x-di-v-m x-fs-28">{{local "booking.guarantee_and_cancellation_policy"}}</span>\r\n                    </span>\r\n\r\n                    <span class="x-cell x-al-r x-di-v-m x-nowrap">\r\n                        <span class="message-close-icon icon-icon_B017 x-di-v-m x-pointer" data-item="close"></span>\r\n                    </span>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="book2-lampbox-body">\r\n                <div class="x-scroll">\r\n                    <div class="x-scroll-body">\r\n                        <div class="x-pl-20 x-pr-20 x-pb-36">\r\n                            <div class="x-pl-10 x-pr-10" data-item="list">\r\n\r\n                                {{#each entries}}\r\n                                    <div class="x-mt-20">\r\n                                        <span class="x-fs-14 x-ff-sm x-upper" style="color: #202020; letter-spacing: 1px">{{local "checkout.room"}} {{local "checkout.confirmation_of" index  ../entries.length}}</span>\r\n                                    </div>\r\n\r\n                                    <div class="x-mt-20">\r\n                                        <span class="x-fs-16 x-ff-m7" style="color: #202020; letter-spacing: 1px">Hotel Name</span>\r\n                                    </div>\r\n                                    <div class="x-mt-08 x-mb-20">\r\n                                        <p class="x-fs-14 x-ff-sm x-lh-24">\r\n                                            {{hotel.name}}\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div class="x-mt-20">\r\n                                        <span class="x-fs-16 x-ff-m7" style="color: #202020; letter-spacing: 1px">Room Type</span>\r\n                                    </div>\r\n                                    <div class="x-mt-08 x-mb-20">\r\n                                        <p class="x-fs-14 x-ff-sm x-lh-24">\r\n                                            {{customize.category}}\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div class="x-mt-20">\r\n                                        <span class="x-fs-16 x-ff-m7" style="color: #202020; letter-spacing: 1px">Rate Name</span>\r\n                                    </div>\r\n                                    <div class="x-mt-08 x-mb-20">\r\n                                        <p class="x-fs-14 x-ff-sm x-lh-24">\r\n                                            {{ratename}}\r\n                                        </p>\r\n                                    </div>\r\n                                    <div class="x-mt-20">\r\n                                        <span class="x-fs-16 x-ff-m7" style="color: #202020; letter-spacing: 1px">{{local "policy.Guarantee_Policy"}}</span>\r\n                                    </div>\r\n                                    <div class="x-mt-08 x-mb-20">\r\n                                        <p class="x-fs-14 x-ff-sm x-lh-24">\r\n                                           {{guaranteedesc}}\r\n                                        </p>\r\n                                    </div>\r\n                                    <div class="x-mt-16">\r\n                                        <span class="x-fs-16 x-ff-m7" style="color: #202020; letter-spacing: 1px">{{local "policy.Cancellation_Policy"}}</span>\r\n                                    </div>\r\n                                    <div class="x-mt-08 x-pb-8">\r\n                                        <div class="x-fs-14 x-ff-sm x-lh-24">\r\n                                            {{{cancelpenalty.PenaltyDescription}}}\r\n                                        </div>\r\n                                    </div>\r\n                                {{/each}}\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="x-runner">\r\n                    <div class="x-slider"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],689:[function(e,t,i){var n={1:"visa",2:"amex",3:"master",114:"visa",117:"maestro",119:"master",122:"visa",125:"jcb",128:"discover",130:"visa",132:"diners",135:"visa",136:"visa",137:"visa",139:"visa",140:"visa",141:"visa",142:"visa",144:"visa",145:"visa",146:"visa",147:"visa",148:"visa",149:"visa"},c={AUD:!0,CAD:!0,CNY:!0,EUR:!0,HKD:!0,GBP:!0,SGD:!0,USD:!0},l={AUD:!0,BRL:!0,CAD:!0,EUR:!0,JPY:!0,MXN:!0,GBP:!0,SGD:!0,THB:!0,USD:!0,CZK:!0,DKK:!0,HKD:!0,HUF:!0,ILS:!0,MYR:!0,TWD:!0,NZD:!0,NOK:!0,PHP:!0,PLN:!0,RUB:!0,SEK:!0,CHF:!0};t.exports={lookup:function(e){return n[e]},support:function(e){return{aliPay:c[e],payPal:l[e]}}}},{}],2043:[function(e,t,i){t.exports=i=function(e,t,i,n,c,l){for(var a=0,o=["webkit","moz","ms","o"],s=0;s<o.length&&!window.requestAnimationFrame;++s)window.requestAnimationFrame=window[o[s]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[o[s]+"CancelAnimationFrame"]||window[o[s]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var i=(new Date).getTime(),n=Math.max(0,16-(i-a)),c=window.setTimeout(function(){e(i+n)},n);return a=i+n,c}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)});var r=this;r.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:null,formattingFn:null};for(var g in l)l.hasOwnProperty(g)&&(r.options[g]=l[g]);""===r.options.separator&&(r.options.useGrouping=!1),r.options.prefix||(r.options.prefix=""),r.options.suffix||(r.options.suffix=""),r.d="string"==typeof e?document.getElementById(e):e,r.startVal=Number(t),r.endVal=Number(i),r.countDown=r.startVal>r.endVal,r.frameVal=r.startVal,r.decimals=Math.max(0,n||0),r.dec=Math.pow(10,r.decimals),r.duration=1e3*Number(c)||2e3,r.formatNumber=function(e){e=e.toFixed(r.decimals),e+="";var t,i,n,c;if(t=e.split("."),i=t[0],n=t.length>1?r.options.decimal+t[1]:"",c=/(\d+)(\d{3})/,r.options.useGrouping)for(;c.test(i);)i=i.replace(c,"$1"+r.options.separator+"$2");return r.options.prefix+i+n+r.options.suffix},r.easeOutExpo=function(e,t,i,n){return i*(-Math.pow(2,-10*e/n)+1)*1024/1023+t},r.easingFn=r.options.easingFn?r.options.easingFn:r.easeOutExpo,r.formattingFn=r.options.formattingFn?r.options.formattingFn:r.formatNumber,r.version=function(){return"1.8.1"},r.printValue=function(e){var t=r.formattingFn(e);"INPUT"===r.d.tagName?this.d.value=t:"text"===r.d.tagName||"tspan"===r.d.tagName?this.d.textContent=t:this.d.innerHTML=t},r.count=function(e){r.startTime||(r.startTime=e),r.timestamp=e;var t=e-r.startTime;r.remaining=r.duration-t,r.options.useEasing?r.countDown?r.frameVal=r.startVal-r.easingFn(t,0,r.startVal-r.endVal,r.duration):r.frameVal=r.easingFn(t,r.startVal,r.endVal-r.startVal,r.duration):r.countDown?r.frameVal=r.startVal-(r.startVal-r.endVal)*(t/r.duration):r.frameVal=r.startVal+(r.endVal-r.startVal)*(t/r.duration),r.countDown?r.frameVal=r.frameVal<r.endVal?r.endVal:r.frameVal:r.frameVal=r.frameVal>r.endVal?r.endVal:r.frameVal,r.frameVal=Math.round(r.frameVal*r.dec)/r.dec,r.printValue(r.frameVal),t<r.duration?r.rAF=requestAnimationFrame(r.count):r.callback&&r.callback()},r.start=function(e){return r.callback=e,r.rAF=requestAnimationFrame(r.count),!1},r.pauseResume=function(){r.paused?(r.paused=!1,delete r.startTime,r.duration=r.remaining,r.startVal=r.frameVal,requestAnimationFrame(r.count)):(r.paused=!0,cancelAnimationFrame(r.rAF))},r.reset=function(){r.paused=!1,delete r.startTime,r.startVal=t,cancelAnimationFrame(r.rAF),r.printValue(r.startVal)},r.update=function(e){cancelAnimationFrame(r.rAF),r.paused=!1,delete r.startTime,r.startVal=r.frameVal,r.endVal=Number(e),r.countDown=r.startVal>r.endVal,r.rAF=requestAnimationFrame(r.count)},r.printValue(r.startVal)}},{}],795:[function(e,t,i){t.exports=e("../../offers-2.0/02-toolbar/01-drop-down-menu/02-nation/waterfall")},{"../../offers-2.0/02-toolbar/01-drop-down-menu/02-nation/waterfall":1502}],1502:[function(e,t,i){function n(e){this._columnCount=e.colCount||4,this._columnWidth=e.colWidth||100/this._columnCount,this._increment=e.increment||1,this._followIdentify=e.followIdentify||"data-follow",this._container="string"==typeof e.container?document.querySelector(e.container):e.container,this._increased=!1,this.__initial()}function c(e){return window.getComputedStyle?"rtl"===window.getComputedStyle(e).direction:"rtl"===document.documentElement.getAttribute("dir")}n.prototype.__initialChildrenObjects=function(){for(var e=Array.prototype.slice.call(this._container.children),t=this._followIdentify,i=[],n=0,c=e.length;c>n;n++)i.push({el:e[n],height:e[n].offsetHeight,follow:e[n].hasAttribute(t),offset:0,column:0});this._childrenObjects=i},n.prototype.__initialContainerHeight=function(){for(var e=this._childrenObjects,t=0,i=0,n=0,c=e.length;c>n;n++)e[n].follow?t+=e[n].height:t=e[n].height,i=Math.max(i,t);this._containerHeight=i},n.prototype.__computeChildrenOffsets=function(){for(var e=this._childrenObjects,t=this._containerHeight,i=this._columnCount-1,n=0,c=0,l=0,a=!1,o=0,s=e.length;s>o;o++){var r=e[o].follow,g=e[o].height;if(c+g>t){if(r){l=c+g-t,a=!0;break}if(n+1>i){l=this.__surplusAveragedOffsets(o),a=!0;break}n+=1,c=0}e[o].column=n,e[o].offset=c,c+=g}a&&(this._containerHeight=t+l,this.__computeChildrenOffsets())},n.prototype.__surplusAveragedOffsets=function(e){if(this._increased)return this._increment;for(var t=this._childrenObjects,i=this._columnCount,n=0,c=e,l=t.length;l>c;c++)n+=t[c].height;return this._increased=!0,Math.max(Math.ceil(n/i),this._increment)},n.prototype.__initial=function(){this.__initialChildrenObjects(),this.__initialContainerHeight(),this.__computeChildrenOffsets();for(var e=this._childrenObjects,t=c(this._container),i=0,n=e.length;n>i;i++)t?(e[i].el.style.left="auto",e[i].el.style.right=e[i].column*this._columnWidth+"%"):(e[i].el.style.right="auto",e[i].el.style.left=e[i].column*this._columnWidth+"%"),e[i].el.style.top=e[i].offset+"px";this._container.style.height=this._containerHeight+"px"},t.exports=n},{}],452:[function(e,t,i){var n=e("backbone"),c=e("../../../config/host.js").host,l=n.Model.extend({initialize:function(e){var t=c+"/api/career/search?locationid="+(e.locationid||e.cid||"")+"&hotelid="+(e.hotelid||"")+"&departmentid="+(e.departmentid||e.departid||"")+"&keywords="+(e.keywords||"")+"&pageindex="+(e.pageindex||0)+"&pagesize="+(e.pagesize||8)+"&excludeid="+(e.excludeid||"");this.url=t}});t.exports=l},{"../../../config/host.js":45,backbone:8}],448:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:Handlebars.compile(e("./loadmore_template.hbs"))})},{"./loadmore_template.hbs":449,"backbone.marionette":6}],449:[function(e,t,i){t.exports='{{#each data}}\r\n<dl class="carees-list-data">\r\n    <dt data-group="{{date-with-format date "Y.M"}}">{{date-with-format date "MMMM"}} {{local "careers.postings"}}</dt>\r\n    <dd>\r\n        <ul>\r\n            {{#each data}}\r\n            <li>\r\n                <div class="carees-list__name"><strong><a class="links" href="{{url}}" title="{{title}}">{{title}}</a></strong>\r\n                    <span>{{jobtype}}\r\n                        {{#if hotels.0.name}}\r\n                        <a href="javascript:;" class="hotelname" data-location="{{location}}" data-locationid="{{locationid}}" data-id="{{hotels.0.id}}" data-name="{{hotels.0.name}}" >{{hotels.0.name}}</a>\r\n                        {{/if}}\r\n                    </span>\r\n                </div>\r\n                <div class="carees-list__view"><a class="links" href="{{url}}">{{local "careers.view_details"}}</a></div>\r\n                {{#if jobportallink}}\r\n                    <div class="carees-list__apply"><a href="{{jobportallink}}" target="_blank">{{jobportallinktext}}</a></div>\r\n                {{/if}}\r\n            </li>\r\n           {{/each}}\r\n        </ul>\r\n    </dd>\r\n</dl>\r\n{{/each}}\r\n'},{}],417:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../assets/booking-occupancy-popup.hbs"),o=(e("../../abmb/selector/model/select-collection.js"),e("../../ui/counter/view/counter.js"));t.exports=l.ItemView.extend({template:Handlebars.compile(a),className:"booking-occupancy-popup",ui:{roomsContainer:".rooms",peopleContainer:".people"},initialize:function(e){e=e||{};var t={value:e.maxocc,events:n.extend({},c.Events)};this.selectors={roomSelector:new o({model:new c.Model({key:"rooms",name:"rooms",value:1,minValue:1,maxValue:4,label:i18n.t("booking.room"),labels:i18n.t("booking.rooms")})}),adultSelector:new o({maxocc:t,model:new c.Model({key:"adults",name:"adults",value:1,minValue:1,maxValue:e.adultocc||9,label:i18n.t("booking.adult"),labels:i18n.t("booking.adults")})}),childrenSelector:new o({maxocc:t,model:new c.Model({key:"children",name:"children",value:0,minValue:0,maxValue:e.childocc||9,label:i18n.t("booking.child"),labels:i18n.t("booking.children"),sublabel:i18n.t("booking.child_sublabel")})})}},onRender:function(){this.ui.peopleContainer.append(this.selectors.adultSelector.render().el),this.ui.peopleContainer.append(this.selectors.childrenSelector.render().el)}})},{"../../abmb/selector/model/select-collection.js":70,"../../ui/counter/view/counter.js":2064,"../assets/booking-occupancy-popup.hbs":396,backbone:8,"backbone.marionette":6,underscore:42}],396:[function(e,t,i){t.exports='<!--<div class="rooms">-->\r\n    <!--<h5 class="head">{{local "booking.rooms"}}</h5>-->\r\n<!--</div>-->\r\n<div class="people">\r\n\r\n</div>\r\n<div data-section="maximum_occupancy" class="maximum_occupancy">{{local "checkout.maximum_occupancy"}}</div>'},{}],1980:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../abmb/stateful.js"),o=e("../../ui/counter/view/counter"),s=e("./model"),r=e("../../calendar/calendar"),g=e("moment"),d=e("./cart-model"),I=e("../../ui/util"),b=e("../../ui/read-more"),C=e("underscore.string/sprintf"),u=e("../../ui/scratchpad-item/view"),m=e("../../share-item/view"),p=e("../../../../config/host.js"),h=e("./template-review.hbs"),G=e("./checkbooking-model"),A=e("./gallery/view"),y=e("./hotel-suggestion/view"),Z=e("./tour-suggestion/view");t.exports=l.ItemView.extend(n.extend({},a,{template:!1,el:".tours-detail",ui:{date:".date-popup",dateHeader:".select-calendar",dateLabel:".select-calendar i",checkavailability:"a.check-availability",checkavailabilityTip:".booking-widget .cta-button .label-popup .content p",results:".tour-options",agebands:".agebands",personCounter:".person-counter",popUp:".popup-lightbox",addhoteltocart:".add-selected-hotel-to-cart",bottomButton:"div.button-to-bottom.clearfix",summary:".booking-parameter",mobileAvailibility:".sticky-check-availability",stickyBar:".mobile-stickybar",sidebar:".booking-widget-block",reviewList:".review-list"},events:{"keyup .hotel-name":"onSelectBoxChange","change .form select":"onSelectBoxChange","click .select-calendar":"onDateHeaderClick","click .check-availability":"onCheckAvailabilityClick","click .add-to-cart":"onAddToCartClick","click .edit-option":"onEditOptionClick","click .radio":"onCheckOption","click @ui.mobileAvailibility":function(e){this.onEditOptionClick(),this.ui.stickyBar.hide(),this.ui.sidebar.removeClass("hide-sidebar")},"click .trigger li":function(e){var t=jQuery(e.target).closest("li"),i=t.closest(".tour-detail-tabs");t.siblings().removeClass("checked"),t.addClass("checked"),i.removeClass("detail review information"),i.addClass(t.data("block"))},"click .tpl-hero-tours-detail .view":function(){var e=this;e.ui.popUp.show()},"click .tpl-tours-img-lightbox .close":function(){this.ui.popUp.hide()},"click .form ul p":function(e){jQuery(e.target).siblings(".radio").click()},"click .placeholder":function(e){var t,i=jQuery(e.target),n=i.closest("li");t=document.createEvent("MouseEvents"),t.initEvent("mouseup",!0,!0);var c;c=document.createEvent("MouseEvents"),c.initEvent("click",!0,!0);var l;l=document.createEvent("MouseEvents"),l.initEvent("mousedown",!0,!0),n.find(".radio").click();var a=n.find("select").focus().get(0);a.dispatchEvent(l),a.dispatchEvent(c),a.dispatchEvent(t)},"click .see-all":function(e){var t=jQuery(e.target).closest(".see-all"),i=this.model.DAO.tourModel.get("reviews"),n=parseInt(t.data("page")),c=3*(n-1),l=c+3;l>=i.length?(l=i.length,t.hide()):t.data("page",++n);var a=i.slice(0,l);this.ui.reviewList.html(this.templateReview({reviews:a}))}},initialize:function(){var e=this,t=e.$el.data("max-occupancy");t=t?t>4?4:e.$el.data("max-occupancy"):4,e.model=new s({code:e.$el.data("code"),currency:e.$el.data("currency"),destid:e.$el.data("destid"),hotelpickup:!1,checkouturl:e.$el.data("checkout-url"),city:e.$el.data("city"),maxoccupancy:t}),e.model.on("change:promise",function(t,i){I.loading({container:e.el,promise:i})}),Handlebars.registerHelper("json",function(e){return JSON.stringify(e)}),e.templateReview=Handlebars.compile(h)},onRender:function(){var t=this;u.autoCreate(),m.autoCreate(),n.invoke(n.values(b),"autoCreate"),t.model.on("change",function(){t.switchState("validoptionsform:"+!!t.model.isValid())}),t.model.on("checkavailability:disabled",function(){t.ui.checkavailability[t.model.isValid()?"removeClass":"addClass"]&&t.ui.checkavailability[t.model.isValid()?"removeClass":"addClass"]("disabled");var e=t.model.get("date"),i=t.model.get("agebands")&&t.model.get("agebands").any(function(e){return e.get("count")&&e.get("treatAsAdult")});t.ui.checkavailabilityTip.parent().css("visibility","visible"),e?i?(t.ui.checkavailabilityTip.parent().css("visibility","hidden"),t.ui.checkavailabilityTip.html("")):t.ui.checkavailabilityTip.html(i18n.t("tours.disable_tip")):t.ui.checkavailabilityTip.html(i18n.t("tours.disable_tip_date"))}),t.model.on("change:code change:date change:currency change:agebands",function(){t.model.trigger("checkavailability:disabled")}),t.template_options=Handlebars.compile(e("./template.hbs")),t.template_summary=Handlebars.compile(e("./template-summary.hbs")),t.model.on("change:options",function(){var e=t.model.get("options")?t.model.get("options").length:"";t.switchState("displayingoptions:"+!(!t.model.get("options")||!t.model.get("options").length)),t.$el.attr("data-options-count",e),t.ui.results.html(t.template_options(t.model.attributes));var i=I.queryparam("hotelcode");if(i){var c=t.$('option[code="'+i+'"]');c&&(t.$("select.m-hotels").each(function(){jQuery(this).val(c.val()),jQuery(this).closest("li").find(".radio").click()}),t.$(".add-to-cart").each(function(){jQuery(this).removeClass("disabled")}))}if(e){var l=[];n.each(t.model.get("agebands").models,function(e){var t=e.get("count");1==e.get("count")?l.push(e.get("description")+" "+t):t>1&&l.push(e.get("pluralDescription")+" "+t)}),t.ui.summary.html(t.template_summary({dates:t.model.get("date"),travelerSummary:l.join(", ")}))}t.delegateEvents()}),t.date=new r({el:t.ui.date,limitTo:"after",limitBefore:g().add(3,"days")}).render().hide(),t.model.on("change",function(){t.date.hide()}),t.date.myEvent.on("select",function(e){t.ui.dateLabel.text(e.format("MMMM DD, YYYY")),t.model.set({date:e.format("YYYY-MM-DD")})});var i=I.queryparam("checkin");i&&(t.date.setActiveDay(g(i)),t.date.myEvent.trigger("select",t.date.model.get("activeDay"))),t.model.setPromise(t.model.DAO.promise).then(function(){t.galleryView=new A({model:t.model.DAO.tourModel,el:t.ui.popUp}),t.galleryView.next(),t.model.get("agebands").each(function(e){e.counterView=new o({model:new c.Model({label:e.get("pluralDescription"),sublabel:C("(%s %d%s)",i18n.t("general.age"),e.get("ageFrom"),e.get("ageTo")?" - "+e.get("ageTo"):"+"),minValue:0,maxValue:t.model.get("maxoccupancy"),value:e.get("count")})}),e.counterView.model.on("change:value",function(i){var n=i.get("value")-e.get("count"),c=t.model.get("maxoccupancy")?t.model.get("maxoccupancy")-t.model.totalOccupants()-n:1,l=e.counterView.$el.find("label").not(".sublabel").data("type"),a=i.get("value"),o=t.ui.personCounter;switch(l){case"Adults":1==a?o.find(".adults").text(a+" "+i18n.t("booking.adult")).addClass("show"):a>1?o.find(".adults").text(a+" "+i18n.t("booking.adults")).addClass("show"):0==a&&o.find(".adults").text("").removeClass("show").removeClass("has-comma");break;case"Seniors":1==a?o.find(".seniors").text(a+" "+i18n.t("booking.senior")).addClass("show"):a>1?o.find(".seniors").text(a+" "+i18n.t("booking.seniors")).addClass("show"):0==a&&o.find(".seniors").text("").removeClass("show").removeClass("has-comma");break;case"Children":1==a?o.find(".children").text(a+" "+i18n.t("booking.child")).addClass("show"):a>1?o.find(".children").text(a+" "+i18n.t("booking.children")).addClass("show"):0==a&&o.find(".children").text("").removeClass("show").removeClass("has-comma");break;case"Infants":1==a?o.find(".infants").text(a+" "+i18n.t("booking.infant")).addClass("show"):a>1?o.find(".infants").text(a+" "+i18n.t("booking.infants")).addClass("show"):0==a&&o.find(".infants").text("").removeClass("show").removeClass("has-comma")}var s=t.ui.agebands.find(".show").length;t.ui.agebands.find(".show").each(function(e){var t=jQuery(this).hasClass("has-comma");s>e+1&&!t?jQuery(this).addClass("has-comma"):e+1==s&&jQuery(this).removeClass("has-comma")}),c>=0?(e.set({count:i.get("value")}),t.model.get("maxoccupancy")&&t.model.get("agebands").each(function(e){e.counterView.model.set({maxValue:e.counterView.model.get("value")+c})})):i.set({value:e.get("count")})}),t.ui.agebands.append(e.counterView.render().el)})}),t.model.trigger("checkavailability:disabled");var l=jQuery("#main-footer-wrapper");l.length&&jQuery(window).on("scroll resize",function(){var e=t.ui.sidebar.offset().top+t.ui.sidebar.height()-l.offset().top,i=parseInt(t.ui.sidebar.parent().css("top"));e>0?t.ui.sidebar.parent().css("top",i-e+"px"):83>i&&t.ui.sidebar.parent().css("top",Math.min(83,i-e)+"px")})},onCheckOption:function(e){var t=jQuery(e.target),i=t.closest(".tour-option-item"),n=t.closest("li"),c=i.find(".radio"),l=t.data("option"),a=i.find(".hotel-name-wrapper"),o=i.find("select.m-hotels"),s=i.find("select.other-hotels"),r=i.find(".placeholder"),g=n.find(".placeholder"),d=i.find(".add-to-cart");switch(a.hide(),i.find("select").attr("disabled","disabled"),r.show(),l){case 0:o.removeAttr("disabled"),g.hide();break;case 1:s.removeAttr("disabled"),g.hide();break;case 2:a.show()}c.removeClass("checked"),t.addClass("checked"),d.addClass("disabled"),this.onSelectBoxChange(e,l)},onEditOptionClick:function(){this.switchState("displayingoptions:false"),jQuery("html, body").animate({scrollTop:jQuery(".tour-title").offset().top-40},0)},onSelectBoxChange:function(e,t){var i=this,n=jQuery(e.target),c=t,l=n.closest(".tour-option-item").find(".add-to-cart"),a=n.closest(".tour-option-item").find(".hotel-name");if(i.model.set("hotelId",void 0),"select"==n.prop("tagName").toLowerCase()){var o=n.val();l[o?"removeClass":"addClass"]("disabled"),c=n.hasClass("other-hotels")?1:0,i.model.set("hotelId",o)}else n.hasClass("hotel-name")||2==t?(l[a.val()?"removeClass":"addClass"]("disabled"),i.model.set("other-hotel-name",n.val()),c=2):0!=t&&1!=t&&l.removeClass("disabled");i.model.set("hotelOption",c)},onDateHeaderClick:function(){this.date.toggle()},onCheckAvailabilityClick:function(e){this.ui.checkavailability.hasClass("disabled")||this.model.getOptions()},getBookHotelURL:function(e){var t=this;return C("%s?checkin=%s&currency=%s&%s",e,t.model.get("date"),t.model.get("currency"),t.model.get("agebands").map(function(e){return C("%s=%d",e.getBookHotelParameterName(),e.get("count"))}).join("&"))},onAddToCartClick:function(e){var t=this,i=4,c=jQuery(e.target).closest("[data-index]"),l=t.model.get("options").at(c.data("index")),a=void 0,o=t.model.get("hotelId"),s=c.find("a.disabled").length;if(!s){var r=!1;0==i?(a=t.model.DAO.hotels.findWhere({hotelid:o}),a&&(r=a.get("hotelid"))):1==i&&(a=t.model.DAO.otherHotels.findWhere({hotelid:parseInt(o)}));var g=t.model.get("hotelpickup"),I=new d({productCode:t.model.get("code"),gradeCode:l.get("gradecode"),travelDate:t.model.get("date"),currencyCode:l.get("currencycode"),price:l.get("retailprice"),hotelOption:g?i:-1,hotelId:g?a&&a.get("hotelid"):"",hotelName:g?a&&a.get("hotelname")||t.model.get("other-hotel-name"):"",hotelAddress:g?a&&a.get("address"):"",ageBands:t.model.get("agebands")});if(t.model.get("nosubmit"))return t.model.set({option:l,cartitem:I});var b=!1;r&&(b=new G({city:t.model.get("city"),date:t.model.get("date"),hotelid:r})),t.model.setPromise(jQuery.when(I.save({},{emulateForm:!1,emulateJSON:!0}),!b||b.fetch()).then(function(e){t.model.set({success:e.success,option:l,hotel:a,pickUpHotelURL:a&&t.getBookHotelURL(a.get("hotelurl")),hasbooked:!b||b.get("hasbooked")});var i=I.get("shoppingcarthasroom"),c=I.get("citybookingurl"),o=r&&!t.model.get("hasbooked"),s=!r;if(o||s){var g=new y({el:t.ui.popUp,shoppingcarthasroom:i,citybookingurl:c});s?g.model.url=p.getURL("api","hotels/randombycity?count=1&city="+t.model.get("city")):g.model.url=p.getURL("api","hotels/randombycity?count=1&hotelid="+r),g.model.checkOutUrl=t.model.get("checkouturl"),g.model.getBookHotelURL=n.bind(t.getBookHotelURL,t),t.model.setPromise(g.model.fetch()).then(function(){g.render(),t.ui.popUp.show()})}else{var d=new Z({el:t.ui.popUp,shoppingcarthasroom:i,citybookingurl:c});d.model.city=t.model.get("city"),d.model.checkOutUrl=t.model.get("checkouturl"),t.model.setPromise(d.model.fetch()).then(function(){d.render(),u.autoCreate(),m.autoCreate(),t.ui.popUp.show()})}}))}}}))},{"../../../../config/host.js":45,"../../abmb/stateful.js":72,"../../calendar/calendar":424,"../../share-item/view":1940,"../../ui/counter/view/counter":2064,"../../ui/read-more":2109,"../../ui/scratchpad-item/view":2113,"../../ui/util":2122,"./cart-model":1960,"./checkbooking-model":1961,"./gallery/view":1964,"./hotel-suggestion/view":1969,"./model":1970,"./template-review.hbs":1974,"./template-summary.hbs":1975,"./template.hbs":1976,"./tour-suggestion/view":1979,backbone:8,"backbone.marionette":6,moment:16,underscore:42,"underscore.string/sprintf":41}],1979:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../../abmb/stateful.js"),a=e("./model");Util=e("../../../ui/util"),t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("./template.hbs")),initialize:function(e){var t=this;t.model||(t.model=new a)},serializeData:function(){return n.assign({shoppingcarthasroom:this.options.shoppingcarthasroom,citybookingurl:this.options.citybookingurl},this.model.toJSON())}}))},{"../../../abmb/stateful.js":72,"../../../ui/util":2122,"./model":1977,"./template.hbs":1978,backbone:8,"backbone.marionette":6,underscore:42}],1978:[function(e,t,i){t.exports='<div class="tpl-tours-chekcout-lightbox">\r\n    {{#each products}}\r\n        <div style="background-image: url(\'{{image_big}}\')" class="tpl-half-tour clearfix {{image_anchor}}">\r\n            <div class="tpl-content">\r\n                <div class="tpl-text">\r\n                    <h3>\r\n                        <span>{{{title}}}</span>\r\n                        <a class="wgt-scratchpad-on" data-component="scratchpad" data-id="{{code}}"\r\n                           data-type="Shop" data-content="{{content}}" data-title="{{title}}"\r\n                           data-url="{{url}}">\r\n                            <span class="icon-icon_B013"></span>\r\n                            <div class="scratchpad-tip"><span class="label-popup"><div\r\n                                    class="content"><p>{{local "scratchpad.item_added"}}</p></div></span></div>\r\n                        </a>\r\n                            <span data-component="share" data-title="{{title}}" data-url="{{url}}"\r\n                                  class="icon-icon_M001 tpl-half-favorite">\r\n                            </span>\r\n                    </h3>\r\n                    <div class="content-progress">\r\n                        {{local "tours.rating"}}: {{rating}}\r\n                        {{#from 1 rating 5}}<span class="icon-icon_E006"></span>\r\n                        {{else}}        <span class="icon-icon_E007"></span>{{/from}}\r\n                    </div>\r\n                    <p>{{../city}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="tpl-cta-left">\r\n                <p>{{local "tours.starting_at"}}</p>\r\n                <em><span class="currency">{{currency_code}}</span>{{#price-format price}}{{/price-format}}</em>\r\n            </div>\r\n            <div class="tpl-cta-right"><a class="wgt-sqbutton" href="{{url}}">{{local "tours.book_now"}}</a></div>\r\n            <div class="tpl-holder"></div>\r\n        </div>\r\n    {{/each}}\r\n    <div class="cta-block">\r\n        <a class="wgt-sqbutton-dark" href="/tours-plus/">{{local "tours.continue_shopping"}}</a>\r\n        {{#if shoppingcarthasroom}}\r\n            <a class="wgt-sqbutton-red" href="{{checkOutUrl}}">{{local "tours.proceed_to_checkout"}}</a>\r\n        {{else}}\r\n            <a class="wgt-sqbutton-red" href="{{citybookingurl}}">{{local "tours.book_a_hotel_room"}}</a>\r\n        {{/if}}\r\n    </div>\r\n</div>'},{}],1977:[function(e,t,i){var n=(e("underscore"),e("../../../../../config/host.js")),c=e("backbone");i=t.exports=c.Model.extend({parse:function(e){return{products:e,checkOutUrl:this.checkOutUrl,city:this.city}},url:function(){return n.getURL("api","shops/product/randombycity?count=2&city="+this.city)}})},{"../../../../../config/host.js":45,backbone:8,underscore:42}],1976:[function(e,t,i){t.exports='<div class="title-block">\r\n    <h5 class="name">{{local "tours.tour_activity_options"}}</h5>\r\n    <div class="button edit-option"><a class="wgt-sqbutton-dark">{{local "general.cancel"}}</a></div>\r\n</div>\r\n\r\n<ul class="tour-list">\r\n    {{#each options.models}}\r\n        {{#if attributes.available}}\r\n            <li class="expand tour-option-item" data-index="{{@index}}">\r\n                <div class="list-main">\r\n                    <h6 class="name">{{attributes.gradetitle}}</h6>\r\n                    <p class="time">{{local "tours.departs"}} {{attributes.gradedeparturetime}}</p>\r\n                    <p class="description">{{attributes.gradedescription}}</p>\r\n                    <div class="expand-main {{#unless ../../hotelpickup}}no-pickup{{/unless}}">\r\n                        {{#if ../../hotelpickup}}\r\n\r\n                            <div class="form">\r\n                                <h6 class="color-blue">{{local "tours.choose_hotel_pickup_point"}}</h6>\r\n                                <ul>\r\n\r\n                                    {{#if ../../../hotels.models.length}}\r\n                                        <li><i class="radio" data-option="0"></i>\r\n                                            <div class="select">\r\n                                                <div class="placeholder"></div>\r\n                                                <select class="m-hotels" disabled>\r\n                                                    {{#more-than ../../../../hotels.models.length 0}}\r\n                                                        <option value="">{{local "tours.choose_millennium_hotel_pickup_point"}}</option>\r\n                                                    {{/more-than}}\r\n                                                    {{#each ../../../../hotels.models}}\r\n                                                        <option value="{{attributes.hotelid}}"\r\n                                                                code="{{attributes.hotelcode}}">{{attributes.hotelname}}</option>\r\n                                                    {{/each}}\r\n                                                </select>\r\n                                            </div>\r\n                                        </li>\r\n                                    {{/if}}\r\n\r\n                                    {{#if ../../../otherHotels.models.length}}\r\n                                        <li><i class="radio" data-option="1"></i>\r\n                                            <div class="select">\r\n                                                <div class="placeholder"></div>\r\n                                                <select class="other-hotels" disabled>\r\n                                                    {{#more-than ../../../../otherHotels.models.length 0}}\r\n                                                        <option value="">{{local "tours.choose_another_hotel_pickup_point"}}</option>\r\n                                                    {{/more-than}}\r\n                                                    {{#each ../../../../otherHotels.models}}\r\n                                                        <option value="{{attributes.hotelid}}"\r\n                                                                code="{{attributes.hotelcode}}">{{attributes.hotelname}}</option>\r\n                                                    {{/each}}\r\n                                                </select>\r\n                                            </div>\r\n                                        </li>\r\n                                    {{/if}}\r\n\r\n                                    <li><i class="radio" data-option="2"></i>\r\n                                        <p>{{local "tours.hotel_not_listed"}}</p>\r\n\r\n                                    </li>\r\n\r\n                                    <li class="hotel-name-wrapper" style="display: none">\r\n                                        <div class="input" id="option-input">\r\n                                            <input type="text" class="hotel-name">\r\n                                        </div>\r\n                                    </li>\r\n                                    <li><i class="radio" data-option="3"></i>\r\n                                        <p>{{local "tours.live_locally"}}</p>\r\n                                    </li>\r\n                                    <li><i class="radio" data-option="4"></i>\r\n                                        <p>{{local "tours.hotel_not_booked"}}</p>\r\n                                    </li>\r\n\r\n\r\n                                </ul>\r\n                            </div>\r\n                        {{/if}}\r\n                        <div style="z-index:10" class="expand-sidebar">\r\n                            <div>\r\n                                <a class="wgt-sqbutton-blue add-to-cart {{#if ../../hotelpickup}}disabled{{/if}}">{{local "tours.add_to_cart"}}</a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="list-sidebar">\r\n                    <div class="flag-display">\r\n                        <div class="price-content">\r\n                            <p class="price"><i\r\n                                    class="currency">{{attributes.currencymark}}</i><span>{{attributes.retailprice}}</span>\r\n                            </p>\r\n                            <div class="guarantee-container">\r\n                                <div class="wgt-guarantee"><span class="icon-icon_B012 guarantee-label"></span>\r\n                                    <p class="text">{{local "tours.low_price"}}<br>{{local "tours.guarantee"}}</p>\r\n                                </div>\r\n                                <div class="label-popup">\r\n                                    <div class="content">\r\n                                        <p>{{local \'tours.no_hidden_cost\'}}</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n        {{else}}\r\n            <li class="tour-option-item" data-index="{{@index}}">\r\n                <div class="list-main grey">\r\n                    <h6 class="name">{{attributes.gradetitle}}</h6>\r\n                    <p class="time">{{local "tours.departs"}} {{attributes.gradedeparturetime}}</p>\r\n                    <p class="description">{{attributes.gradedescription}}</p>\r\n                </div>\r\n                <div class="list-sidebar">\r\n                    <div class="flag-display grey">\r\n                        <div class="unavailable-content">\r\n                            <p class="unavailable-description">{{local "tours.dates_unavailable"}}</p>\r\n                            <a class="link edit-option">{{local "tours.edit_dates"}}</a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n        {{/if}}\r\n    {{/each}}\r\n</ul>\r\n\r\n';
},{}],1975:[function(e,t,i){t.exports='<div class="booking-parameter">\r\n    <p class="selection-tip">{{local "tours.summary_of_selections"}}</p>\r\n    <ul class="selections-info">\r\n        <li>\r\n            <div class="date-section clearfix">\r\n                <p class="item-name">{{local "tours.date_of_tour"}}</p><a class="edit edit-option">{{local "general.edit"}}</a>\r\n            </div>\r\n            <p class="item">{{#date dates}}{{/date}}</p>\r\n        </li>\r\n        <li>\r\n            <p class="item-name">{{local "tours.number_of_travelers"}}</p>\r\n            <p class="item">{{travelerSummary}}</p>\r\n        </li>\r\n    </ul>\r\n</div>'},{}],1974:[function(e,t,i){t.exports='{{#each reviews}}\r\n    <li>\r\n        <h6 class="name">{{ ownerName }}</h6>\r\n        <div class="wgt-rate-blue">\r\n                                        <span class="stars">\r\n                                            {{#from 1 rating 5}}\r\n                                                <span class="icon-icon_E006"></span>\r\n                                            {{else}}\r\n                                                <span class="icon-icon_E007"></span>\r\n                                            {{/from}}\r\n                                        </span><span\r\n                class="description">{{#date-with-format publishedDate \'MMMM YYYY\'}}{{/date-with-format}}</span>\r\n        </div>\r\n        <p>{{{review}}}</p>\r\n    </li>\r\n{{/each}}'},{}],1970:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("./DAO"),a=e("./option-collection");n.mixin({sum:function(e){return n.reduce(e,function(e,t){return e+t},0)}});i=t.exports=c.Model.extend({defaults:{maxoccupancy:9,destid:"",code:"",currency:"",date:"",agebands:null,options:null,promise:null,hotelpickup:!1,hasbooked:!1,city:""},setPromise:function(e){return this.set({promise:e}),e},initialize:function(){var e=this;e.DAO=l({destid:e.get("destid"),code:e.get("code"),city:e.get("city")}),e.DAO.promise.then(function(){e.set({otherHotels:e.DAO.otherHotels,hotels:e.DAO.hotels,agebands:e.DAO.agebands},{silent:!0}),e.get("agebands").on("change",function(){e.set({options:null}),e.trigger("change"),e.trigger("checkavailability:disabled")}),e.on("change:date",function(){e.set({options:null},{silent:!0})})})},isValid:function(){return this.get("code")&&this.get("currency")&&this.get("date")&&this.get("agebands")&&this.get("agebands").any(function(e){return e.get("count")&&e.get("treatAsAdult")})},totalOccupants:function(){return n.sum(this.get("agebands").pluck("count"))},hasReachedMaxOccupancy:function(){return this.get("maxoccupancy")&&this.totalOccupants()>=this.get("maxoccupancy")},getOptions:function(){var e=this;if(e.isValid()){var t=new a(this.attributes);e.setPromise(jQuery.when(t.promise).then(function(){e.set({options:t})}))}}})},{"./DAO":1957,"./option-collection":1971,backbone:8,underscore:42}],1971:[function(e,t,i){var n=e("backbone"),c=e("../../../../config/host.js"),l=e("./option-model");t.exports=n.Collection.extend({model:l,url:c.getURL("api","shops/booking/tourgrades"),initialize:function(e){this.promise=this.fetch({type:"POST",data:{model:JSON.stringify({productCode:e.code,currencyCode:e.currency,bookingDate:e.date,ageBands:e.agebands.map(function(e){return{bandId:e.get("bandId"),count:e.get("count")}})})}})}})},{"../../../../config/host.js":45,"./option-model":1972,backbone:8}],1972:[function(e,t,i){var n=e("backbone");i=t.exports=n.Model.extend({defaults:{sortorder:1,bookingdate:"",gradecode:"",gradetitle:"",gradedescription:"",retailprice:0,currencycode:"",retailpriceformatted:"",gradedeparturetime:""}})},{backbone:8}],1957:[function(e,t,i){var n=(e("underscore"),e("./hotel-collection")),c=e("./other-hotel-collection"),l=e("./ageband-collection"),a=e("./gallery/model");i=t.exports=function(e){var o=i=t.exports={hotels:new n({city:e.city,destid:e.destid}),otherHotels:new c({city:e.city}),agebands:new l({code:e.code}),tourModel:new a({code:e.code})};return o.promise=jQuery.when(o.hotels.fetch(),o.otherHotels.fetch(),o.agebands.fetch(),o.tourModel.fetch()).then(function(){}),o}},{"./ageband-collection":1958,"./gallery/model":1962,"./hotel-collection":1965,"./other-hotel-collection":1973,underscore:42}],1973:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js"),l=e("./hotel-model.js");t.exports=n.Collection.extend({model:l,initialize:function(e){this.url=c.getURL("api","shops/booking/viatorhotels?city="+e.city)}})},{"../../../../config/host.js":45,"./hotel-model.js":1966,backbone:8,underscore:42}],1965:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js"),l=e("./hotel-model.js");t.exports=n.Collection.extend({model:l,initialize:function(e){this.url=c.getURL("api","shops/booking/hotels?city="+e.city)}})},{"../../../../config/host.js":45,"./hotel-model.js":1966,backbone:8,underscore:42}],1966:[function(e,t,i){var n=e("backbone");i=t.exports=n.Model.extend({defaults:{hotelid:"",hotelname:"",sortorder:0,city:"",hotelurl:""}})},{backbone:8}],1958:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js"),l=e("./ageband-model.js");t.exports=n.Collection.extend({model:l,initialize:function(e){this.url=c.getURL("api","shops/product/agebands?code="+e.code)}})},{"../../../../config/host.js":45,"./ageband-model.js":1959,backbone:8,underscore:42}],1959:[function(e,t,i){var n=e("backbone");i=t.exports=n.Model.extend({defaults:{sortorder:0,ageFrom:0,ageTo:0,adult:!1,bandId:0,pluralDescription:"",treatAsAdult:!1,count:0,description:""},getBookHotelParameterName:function(){return this.get("adult")?"adults":this.get("pluralDescription").toLowerCase()}})},{backbone:8}],1969:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../../abmb/stateful.js"),a=e("./model");e("../../../ui/util");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("./template.hbs")),initialize:function(e){var t=this;t.model||(t.model=new a)},serializeData:function(){return n.assign({shoppingcarthasroom:this.options.shoppingcarthasroom,citybookingurl:this.options.citybookingurl},this.model.toJSON())}}))},{"../../../abmb/stateful.js":72,"../../../ui/util":2122,"./model":1967,"./template.hbs":1968,backbone:8,"backbone.marionette":6,underscore:42}],1968:[function(e,t,i){t.exports='{{#if reevoo}}\r\n    <div class="tpl-tours-chekcout-lightbox">\r\n        <div class="tpl-half-line">\r\n            <div style="background-image: url(\'{{image_big}}\')" class="tpl-half-scratchpad clearfix {{image_anchor}}">\r\n                <div class="tpl-content">\r\n                    <!--+x-wgt-icon(type,"blog")-->\r\n                    <div class="wgt-icon"><span class="icon-icon_B002"></span>\r\n                        <label>{{local "hotels.hotels"}}</label>\r\n                    </div>\r\n                    <div class="tpl-text">\r\n                        <h3><span>{{hotelname}}</span>\r\n                        </h3>\r\n                    </div>\r\n                    <div class="tpl-cta"><a class="wgt-sqbutton" href="{{url}}">{{local "booking.book_now"}}</a></div>\r\n                </div>\r\n                <div class="tpl-holder">\r\n                </div>\r\n            </div>\r\n            <div class="tpl-half-reviews clearfix">\r\n                {{#ifCond reevoo.ReviewFlag \'==\' 1}}\r\n                    <div class="tpl-content">\r\n                        <div class="wgt-icon"><span class="icon-icon_E009"></span><label>{{local "general.review_title"}}</label></div>\r\n                        <div class="tpl-text">\r\n                            <h4><span>{{reevoo.ReviewScore}}</span></h4>\r\n                            <p>{{reevoo.ReviewMessage}}</p>\r\n                        </div>\r\n                        <div class="tpl-cta">\r\n                            <a class="wgt-sqbutton" href="{{reevoo.ReviewUrl}}"\r\n                               target="_blank">{{local "general.view_all_reviews"}}</a>\r\n                        </div>\r\n                    </div>\r\n                {{/ifCond}}\r\n                {{#ifCond reevoo.ReviewFlag \'==\' 2}}\r\n                    <div class="tpl-content">\r\n                        <div class="wgt-icon"><span class="icon-icon_E009"></span><label>{{local "offers.review_title"}}</label></div>\r\n                        <div class="tpl-text">\r\n                            <h4><span>{{reevoo.ReviewScore}}</span><label> / 10</label></h4>\r\n                            <p>{{reevoo.ReviewMessage}}</p>\r\n                        </div>\r\n                        <div class="tpl-cta">\r\n                            <a class="wgt-sqbutton" href="{{reevoo.ReviewUrl}}"\r\n                               target="_blank">{{local "general.view_all_reviews"}}</a>\r\n                        </div>\r\n                    </div>\r\n                {{/ifCond}}\r\n                {{#ifCond reevoo.ReviewFlag \'==\' 3}}\r\n                    <div class="tpl-content">\r\n                        <div class="wgt-icon"><span class="icon-icon_E009"></span><label>{{local "offers.review_title"}}</label></div>\r\n                        <div class="tpl-text">\r\n                            <h4>&nbsp;</h4>\r\n                            <p><span>{{reevoo.ReviewMessage}}</span></p>\r\n                        </div>\r\n                    </div>\r\n                {{/ifCond}}\r\n                <div class="tpl-holder"></div>\r\n            </div>\r\n        </div>\r\n        <div class="cta-block">\r\n            <a class="wgt-sqbutton-dark" href="/tours-plus/">{{local "tours.continue_shopping"}}</a>\r\n            {{#if shoppingcarthasroom}}\r\n                <a class="wgt-sqbutton-red" href="{{checkOutUrl}}">{{local "tours.proceed_to_checkout"}}</a>\r\n            {{else}}\r\n                <a class="wgt-sqbutton-red" href="{{citybookingurl}}">{{local "tours.book_a_hotel_room"}}</a>\r\n            {{/if}}\r\n        </div>\r\n    </div>\r\n{{else}}\r\n    <div class="tpl-tours-chekcout-lightbox mandatory-attribute-width30">\r\n        <div class="tpl-half-line">\r\n            <div style="background-image: url(\'{{image_big}}\');" class="tpl-half-scratchpad clearfix mandatory-attribute-width100 {{image_anchor}}">\r\n                <div class="tpl-content">\r\n                    <!--+x-wgt-icon(type,"blog")-->\r\n                    <div class="wgt-icon"><span class="icon-icon_B002"></span>\r\n                        <label>{{local "hotels.hotels"}}</label>\r\n                    </div>\r\n                    <div class="tpl-text">\r\n                        <h3><span>{{hotelname}}</span>\r\n                        </h3>\r\n                    </div>\r\n                    <div class="tpl-cta"><a class="wgt-sqbutton" href="{{url}}">{{local "booking.book_now"}}</a></div>\r\n                </div>\r\n                <div class="tpl-holder">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="cta-block mandatory-attribute-padding">\r\n            <a class="wgt-sqbutton-dark mandatory-attribute-width45" href="/tours-plus/">{{local "tours.continue_shopping"}}</a>\r\n            {{#if shoppingcarthasroom}}\r\n                <a class="wgt-sqbutton-red mandatory-attribute-width45" href="{{checkOutUrl}}">{{local "tours.proceed_to_checkout"}}</a>\r\n            {{else}}\r\n                <a class="wgt-sqbutton-red mandatory-attribute-width45" href="{{citybookingurl}}">{{local "tours.book_a_hotel_room"}}</a>\r\n            {{/if}}\r\n        </div>\r\n    </div>\r\n{{/if}}'},{}],1967:[function(e,t,i){var n=(e("underscore"),e("backbone"));e("../../../../../config/host.js");Util=e("../../../ui/util");i=t.exports=n.Model.extend({parse:function(e){return e[0].url=this.getBookHotelURL(e[0].url),e[0].checkOutUrl=this.checkOutUrl,e[0]}})},{"../../../../../config/host.js":45,"../../../ui/util":2122,backbone:8,underscore:42}],1964:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../../abmb/stateful.js"),a=e("./model"),o=e("../../../ui/scratchpad-item/view"),s=e("../../../share-item/view");e("../../../ui/util");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("./template.hbs")),events:{"click .previous":"previous","click .next":"next","click .thumbnail":function(e){this.model.set("index",parseInt(jQuery(e.target).closest(".thumbnail").data("index")))}},initialize:function(e){var t=this;t.model||(t.model=new a);var i=jQuery('.operation [data-component="scratchpad"]');t.model.set({dataId:i.data("id"),dataContent:i.data("content"),dataType:i.data("type"),dataTitle:i.data("title"),dataUrl:i.data("url")}),t.model.on("change:index",n.bind(t.renderForIndex,this))},previous:function(){this.model.set("index",Math.max(1,this.model.get("index")-1))},next:function(){this.model.set("index",Math.min(this.model.get("total"),this.model.get("index")+1))},renderForIndex:function(){var e=this,t=e.model.get("total"),i=e.model.get("index"),c=e.model.get("userPhotos"),l=t>=7?Math.min(Math.max(0,i-4),t-7):0,a=l+7,r=n.map(c.slice(l,a),function(e){return{url:e.thumbnailURL,index:e.index}}),g=n.find(c,function(e){return e.index==i});e.model.set({thumbNails:r,current:g}),e.render(),o.autoCreate(),s.autoCreate()}}))},{"../../../abmb/stateful.js":72,"../../../share-item/view":1940,"../../../ui/scratchpad-item/view":2113,"../../../ui/util":2122,"./model":1962,"./template.hbs":1963,backbone:8,"backbone.marionette":6,underscore:42}],1963:[function(e,t,i){t.exports='<div class="tpl-tours-img-lightbox">\r\n    <div class="head-block">\r\n        <div>\r\n            <h3 class="name"><span>{{current.productTitle}}</span><a data-component="scratchpad"\r\n                    data-id="{{dataId}}"\r\n                    data-type="{{dataType}}" data-content="{{dataContent}}" data-title="{{dataTitle}}"\r\n                    data-url="{{dataUrl}}"\r\n                    class="wgt-scratchpad-off" data-favourite="false"><span class="icon-icon_B013"></span>\r\n                <div class="scratchpad-tip"><span class="label-popup">\r\n                                <div class="content">\r\n                                  <p>{{local "scratchpad.item_added"}}</p>\r\n                                </div></span></div>\r\n            </a>\r\n\r\n                <a class="share-button">\r\n                    <span data-component="share" data-title="{{dataTitle}}" data-url="{{dataUrl}}"\r\n                          class="favorite-share icon-icon_M001 tpl-half-favorite" style="color: #383838;width: 3.5rem;text-align: center;"></span>\r\n                </a>\r\n            </h3>\r\n        </div>\r\n        <a class="close"><span class="icon-icon_B017"></span></a>\r\n    </div>\r\n    <div class="main-content">\r\n        <div class="image-slider clearfix"\r\n             style="display: block; background-image: url(\'{{current.photoURL}}\')">\r\n            <div class="tpl-content">\r\n                <div class="image-info"><span class="owner-name">{{current.ownerName}}</span><span class="date">{{current.timeUploaded}}</span></div>\r\n                <p class="image-caption">{{{current.title}}}</p>\r\n                <div class="image-description">{{{current.caption}}}</div>\r\n            </div>\r\n            <div class="tpl-holder"></div>\r\n            <div class="tpl-holder"></div>\r\n        </div>\r\n        <div class="image-controller clearfix"><a class="wgt-gallerybtn wgt-gallerybtn-next next">\r\n            <div>\r\n                <p></p>\r\n                <p></p>\r\n            </div>\r\n            <div class="wgt-gallerybtn-icon"><span></span></div>\r\n        </a>\r\n            <p class="mobile-tip">{{current.index}} of {{total}}</p>\r\n\r\n            <a class="wgt-gallerybtn wgt-gallerybtn-previous previous">\r\n            <div class="wgt-gallerybtn-icon"><span></span></div>\r\n            <div>\r\n                <p></p>\r\n                <p></p>\r\n            </div>\r\n        </a>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="image-thumbnail wgt-carousel">\r\n        <div class="image-collection">\r\n            {{#each thumbNails}}\r\n                <div class="{{#equal index ../current.index}}current{{/equal}} thumbnail" data-index="{{index}}"\r\n                     style="display: inline-block; background-image: url(\'{{url}}\')"></div>\r\n            {{/each}}\r\n\r\n        </div>\r\n        <a class="wgt-carousel-buttonleft previous"></a><a class="wgt-carousel-buttonright next"></a>\r\n    </div>\r\n</div>'},{}],1962:[function(e,t,i){var n=e("underscore"),c=e("moment"),l=e("../../../../../config/host.js"),a=e("../../../ui/util"),o=e("backbone");i=t.exports=o.Model.extend({defaults:{index:0},initialize:function(e){this.url=l.getURL("api","/shops/detail/"+e.code)},parse:function(e){var t=e.data,i=t.userPhotos||[];return{userPhotos:n.map(i,function(e,t){return e.timeUploaded=c(e.timeUploaded).format(a.getDateFormat()),e.index=t+1,e}),reviews:t.reviews,total:i.length}}})},{"../../../../../config/host.js":45,"../../../ui/util":2122,backbone:8,moment:16,underscore:42}],1961:[function(e,t,i){var n=e("backbone"),c=e("../../../../config/host.js"),l=e("underscore.string/sprintf");i=t.exports=n.Model.extend({defaults:{hasbooked:!1},parse:function(e){return{hasbooked:e.bookingedhotel}},initialize:function(e){this.url=c.getURL("api",l("shops/booking/existhotel?city=%s&date=%s&hotelid=%s",e.city,e.date,e.hotelid))}})},{"../../../../config/host.js":45,backbone:8,"underscore.string/sprintf":41}],1960:[function(e,t,i){var n=e("backbone"),c=e("../../../../config/host.js");i=t.exports=n.Model.extend({url:c.getURL("api","shops/booking/addtocart"),defaults:{productCode:"",gradeCode:"",travelDate:"",currencyCode:"",price:0,hotelId:"",hotelName:"",hotelAddress:"",hotelOption:4,ageBands:null}})},{"../../../../config/host.js":45,backbone:8}],389:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../abmb/stateful.js"),o=e("./choose-rate-view"),s=e("./choose-option-view.js"),r=e("../view/choose-stay-options-view.js"),g=e("../model/view-model"),d=e("../../ui/util.js"),I=e("../model/add-cart-model"),b=e("../model/add-on-model"),C=e("../model/view-event"),u=e("../model/room-rates-collection");e("../../../../config/host.js").urls;e("../../handlebar/helper"),e("../assets/booking-customize.sass");var m=e("../view/submit-booking-edit-view.js"),p=e("../assets/main-layout-edit.hbs");e("../assets/booking-customize-edit.sass");var h=c.Model.extend({});t.exports=l.LayoutView.extend(n.extend({},a,{template:Handlebars.compile(p),className:"bookingflow",regions:{chooseRate:"#choose-rate-wrapper",chooseOptions:"#room-options-wrapper",chooseStayOptions:"#stay-options-wrapper",submitBooking:"#submit-booking-wrapper"},events:{'click [data-opt="return"]':"closeBookingCustomize"},closeBookingCustomize:function(){this.trigger("req:close-booking-customize")},initialize:function(e){function t(e,t,n){var c;if(t)c=t;else for(var l=0;l<e.length;l++)if(e[l].active){c=e[l];break}i.model.set("hotelcode",i.roomRatesCollection.hotelcode),i.model.set("checkin",i.roomRatesCollection.checkin),i.model.set("checkout",i.roomRatesCollection.checkout),i.model.set("rooms",i.roomRatesCollection.rooms),i.model.set("adults",i.roomRatesCollection.adults),i.model.set("children",i.roomRatesCollection.children),i.model.set("roomtype",c.roomtypecode),i.model.set("upgradespecified",1===n?1:0),i.model.set("roomid",c.roomid),i.model.set("ratecode",c.ratecode),i.model.set("currency",i.roomRatesCollection.currency),i.model.set("currencymark",i.roomRatesCollection.currencymark),i.model.set("price",c.displaymemberrate),i.model.set("tax",c.tax),i.model.set("discountcode",c.discountcode),i.model.set("memberprice",c.memberprice),i.model.set("__rateinfo",c),i.submitBookingView.model=i.model,window.clearTimeout(i.timer),i.timer=window.setTimeout(function(){i.promiseForAddOn&&i.promiseForAddOn.abort&&i.promiseForAddOn.abort(),i.chooseStayOptionsView.model.setQueryByCartModel(i.model),i.chooseStayOptionsView.switchState("loading:show"),i.submitBookingView.switchState("loading:show"),i.promiseForAddOn=i.chooseStayOptionsView.model.fetch({success:function(e){i.chooseStayOptionsView.showNoResult=!0,i.chooseStayOptionsView.render(),i.chooseStayOptionsView.addOnLoadedCallBack&&i.chooseStayOptionsView.addOnLoadedCallBack(),i.submitBookingView.switchState("loading:hide")}}).always(function(){i.chooseStayOptionsView.switchState("loading:hide"),i.chooseStayOptionsView.switchState("expand:on"),i.chooseStayOptionsView.switchState("collapse_btn:show"),i.chooseStayOptionsView.trigger("req:select-add-on")})},300),i.submitBookingView.render()}var i=this,c=new h;g.set("rateCode",""),C.reset();var l=e.bookingModel;this.roomRatesCollection=new u({bookingModel:l}),this.switchState("loading:show"),i.model=new I,i.model.set("productprice",0),i.model.set("addonprice",0),i.addOnModel=new b(l),i.chooseStayOptionsView=new r({model:i.addOnModel,switchLock:!0}),i.chooseStayOptionsView.on("req:select-add-on",function(){var e=i.addOnModel.getSelectedItem(),t=0;i.model.set("servicedata",e),n.each(e,function(e){t+=e.displayrate*e.quantity}),i.model.set("addonprice",t),i.submitBookingView.render()}),i.chooseRateView=new o({switchLock:!0}),i.chooseOptionsView=new s({switchLock:!0}),i.submitBookingView=new m({model:i.model,collection:this.roomRatesCollection}),i.promise=this.roomRatesCollection.fetch({success:function(e){l.set("editUrl",e.editUrl),i.chooseRateView.collection=e,i.chooseRateView.model=c,i.chooseOptionsView.collection=e,i.chooseOptionsView.model=c,l.set("__categoryId",e.categoryId),l.set("__categoryName",e.categoryName),i.render()}}).then(function(){}).always(function(){i.switchState("loading:hide")}),g.on("form-data-change",function(e){return e.suiteDate&&e.suiteDate.active?(t([],e.suiteDate,e.upgradespecified),!1):void(e.viewDate&&e.viewDate.length>0&&t(e.viewDate))})},setDefaultSelected:function(e){var t=this;window.setTimeout(function(){t.chooseRateView.reSort(e.ratecode,e.roomtypecode,!0),t.chooseOptionsView.chooseRoomView.setSelected(e.ratecode,e.roomtypecode)},10)},focusOnOneSubView:function(e){this.chooseRateView.switchLock=!1,this.chooseOptionsView.switchLock=!1,this.chooseStayOptionsView.switchLock=!1,this.chooseRateView.unfoldAll(),this.chooseOptionsView.unfoldAll(),this.chooseStayOptionsView.unfoldAll(),this.chooseStayOptionsView.switchState("expand:off"),this.chooseStayOptionsView.setExpand("OPEN");var t=d.ismobile()?40:0;switch(e){case"package":this.chooseRateView.switchState("expand:on"),this.chooseRateView.setExpand("OFF"),jQuery(window).scrollTop(jQuery("#choose-rate-wrapper").offset().top-t);break;case"customize":this.chooseOptionsView.switchState("expand:on"),this.chooseOptionsView.setExpand("OFF"),jQuery(window).scrollTop(jQuery("#room-options-wrapper").offset().top-t);break;case"addon":this.chooseStayOptionsView.switchState("expand:on"),this.chooseStayOptionsView.setExpand("OFF"),jQuery(window).scrollTop(jQuery("#stay-options-wrapper").offset().top-t)}},onRender:function(){var e=this;e.promise.then(function(){e.chooseRate.show(e.chooseRateView,{preventDestroy:!0}),e.chooseOptions.show(e.chooseOptionsView,{preventDestroy:!0}),e.chooseStayOptions.show(e.chooseStayOptionsView,{preventDestroy:!0}),e.submitBooking.show(e.submitBookingView,{preventDestroy:!0})})}}))},{"../../../../config/host.js":45,"../../abmb/stateful.js":72,"../../handlebar/helper":1025,"../../ui/util.js":2122,"../assets/booking-customize-edit.sass":359,"../assets/booking-customize.sass":360,"../assets/main-layout-edit.hbs":368,"../model/add-cart-model":375,"../model/add-on-model":376,"../model/room-rates-collection":378,"../model/view-event":380,"../model/view-model":381,"../view/choose-stay-options-view.js":387,"../view/submit-booking-edit-view.js":393,"./choose-option-view.js":384,"./choose-rate-view":385,backbone:8,"backbone.marionette":6,underscore:42}],393:[function(e,t,i){var n=e("./submit-booking-view.js"),c=e("../../checkout/model/view-event.js");t.exports=n.extend({template:Handlebars.compile(e("../assets/submit-booking-edit.hbs")),addToCart:function(){var e=this;return e.$el.find("#submit").hasClass("disabled")?!1:void c.trigger("req:edit-rates-save",this.model.toJSON())}})},{"../../checkout/model/view-event.js":670,"../assets/submit-booking-edit.hbs":372,"./submit-booking-view.js":394}],394:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../abmb/stateful.js"),a=e("../../ui/util"),o=e("../../../../config/host");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("../assets/submit-booking.hbs")),events:{"click #submit":"addToCart"},addToCart:function(){var e=this;return e.requesting||e.$el.find("#submit").hasClass("disabled")?!1:(e.requesting=!0,e.switchState("loading:show"),void e.model.save({},{success:function(e){e.get("success")?window.location.href="/"+o.getLanguage()+"/checkout":(a.error({el:jQuery("body"),screenCenter:!0,error:e.get("message")+i18n.t("booking.discount_code_reload")}),setTimeout(function(){window.location.href=window.location.href.replace(/&discountcode=.*&groupcode/,"&discountcode=&groupcode")},5e3))}}).always(function(){e.requesting=!1,e.switchState("loading:hide")}))},initialize:function(){var e=this;this.switchState("loading:hide"),this.requesting=!1,e.model.on("change:price",function(){e.model.set("_hasPrice",!0),e.render()})},onBeforeRender:function(){this.model.setSum(),this.model.setPointsSum()},fixStickyBar:function(){var e=this;!function(t){function i(){t(window).height()+t(window).scrollTop()>c.height()?n.removeClass("fixed"):n.hasClass("fixed")||n.addClass("fixed")}var n=(t("#main-footer-wrapper"),t(".bookingflow-stickybar")),c=t(".bookingflow");i(),t(window).scroll(function(){window.clearTimeout(e.timer),e.timer=window.setTimeout(function(){i()},2)})}(jQuery)},onRender:function(){var e=this;e.model.set("__totalNight",this.collection.__diffDay),window.setTimeout(function(){e.fixStickyBar()},10)}}))},{"../../../../config/host":45,"../../abmb/stateful.js":72,"../../ui/util":2122,"../assets/submit-booking.hbs":373,backbone:8,"backbone.marionette":6,underscore:42}],2001:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../abmb/stateful.js"),a=e("./model"),o=e("../../ui/util"),s=e("../../ui/read-more"),r=e("underscore.string/sprintf"),g=e("../../ui/scratchpad-item/view"),d=e("../../share-item/view"),I=e("./gallery/view"),b=e("./ingresso-side/view"),C=e("./template-review.hbs");t.exports=c.ItemView.extend(n.extend({},l,{template:!1,el:".tours-tetail-ingresso",ui:{checkavailability:"a.check-availability",results:".tour-options",popUp:".popup-lightbox",addhoteltocart:".add-selected-hotel-to-cart",bottomButton:"div.button-to-bottom.clearfix",summary:".booking-parameter",mobileAvailibility:".sticky-check-availability",stickyBar:".mobile-stickybar",sidebar:".booking-widget-block",sidebar:".sidebar",tour_options:".tour-options",tour_detail_tabs:".tour-detail-tabs",reviewList:".review-list",ingressotrigger:".ingresso-trigger"},events:{"keyup .hotel-name":"onSelectBoxChange","change .form select":"onSelectBoxChange","click .check-availability":"onCheckAvailabilityClick","click .tour-seat .radio":"onCheckOption","click .trigger li":function(e){var t=jQuery(e.target).closest("li"),i=t.closest(".tour-detail-tabs");void 0!=t.data("count")&&0==!t.data("count")&&(t.siblings().removeClass("checked"),t.addClass("checked"),i.removeClass("detail review information"),i.addClass(t.data("block")))},"click .tpl-hero-tours-detail .view":function(){var e=this;e.ui.popUp.show()},"click .tpl-tours-img-lightbox .close":function(){this.ui.popUp.hide()},"click .form ul p":function(e){jQuery(e.target).siblings(".radio").click()},"click .see-all":function(e){var t=jQuery(e.target).closest(".see-all"),i=this.model.DAO.tourModel.get("reviews"),n=parseInt(t.data("page")),c=3*(n-1),l=c+3;l>=i.length?(l=i.length,t.hide()):t.data("page",++n);var a=i.slice(0,l);this.ui.reviewList.html(this.templateReview({reviews:a}))}},initialize:function(){var e=this;e.model=new a({code:e.$el.data("code"),currency:e.$el.data("currency"),destid:e.$el.data("destid"),hotelpickup:!1,checkouturl:e.$el.data("checkout-url"),city:e.$el.data("city")}),e.model.on("change:promise",function(t,i){o.loading({container:e.el,promise:i})}),Handlebars.registerHelper("json",function(e){return JSON.stringify(e)}),e.templateReview=Handlebars.compile(C)},onRender:function(){var e=this;g.autoCreate(),d.autoCreate(),n.invoke(n.values(s),"autoCreate"),e.model.on("change",function(){e.switchState("validoptionsform:"+!!e.model.isValid())}),e.model.setPromise(e.model.DAO.promise).then(function(){e.galleryView=new I({model:e.model.DAO.tourModel,el:e.ui.popUp}),e.galleryView.next(),e.model.DAO.tourModel.get("reviewCount")?e.ui.ingressotrigger.find("[data-block=review]")[0].setAttribute("data-count",e.model.DAO.tourModel.get("reviewCount")):(e.ui.ingressotrigger.find("[data-block=review]")[0].setAttribute("data-count",e.model.DAO.tourModel.get("reviewCount")),e.ui.ingressotrigger.find("[data-block=review]").eq(0).addClass("disabled")),e.sideview=new b({model:e.model.DAO.side,el:e.ui.sidebar}).render()});var t=jQuery("#main-footer-wrapper");t.length&&jQuery(window).on("scroll resize",function(){var i=e.ui.sidebar.offset().top+e.ui.sidebar.height()-t.offset().top,n=parseInt(e.ui.sidebar.parent().css("top"));i>0?e.ui.sidebar.parent().css("top",n-i+"px"):83>n&&e.ui.sidebar.parent().css("top",Math.min(83,n-i)+"px")})},onCheckOption:function(e){var t=jQuery(e.target),i=t.closest(".tour-option-item"),n=i.find(".radio");n.removeClass("checked"),t.addClass("checked")},onCheckAvailabilityClick:function(e){var t=this;jQuery(e.target).hasClass("disabled")||(o.loading({container:t.el,promise:""}),this.sideview.myEvent.trigger("request",{tour_options:t.ui.tour_options,tour_detail_tabs:t.ui.tour_detail_tabs,main:t.el}))},getBookHotelURL:function(e){var t=this;return r("%s?checkin=%s&currency=%s&%s",e,t.model.get("date"),t.model.get("currency"))}}))},{"../../abmb/stateful.js":72,"../../share-item/view":1940,"../../ui/read-more":2109,"../../ui/scratchpad-item/view":2113,"../../ui/util":2122,"./gallery/view":1984,"./ingresso-side/view":1997,"./model":1998,"./template-review.hbs":2e3,"backbone.marionette":6,underscore:42,"underscore.string/sprintf":41}],2109:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("backbone.marionette"),e("./autocreator")),c=e("./util"),l='<a class="read-more">'+c.translate("general.read_more")+"</a>";ReadMoreClasses=i=t.exports={below:n.extend({template:!1,ui:{link:"a.read-more"},initialize:function(){var e=this;e.$("a.read-more").length||e.$el.append(l),e.$el.children().not("a.read-more").each(function(t){t>=e.$el.data("read-more")&&jQuery(this).hide()})},events:{"click @ui.link":function(){this.$el.children().show(),this.ui.link.hide()}}},{selector:"[data-read-more]"}),mask:n.extend({template:!1,initialize:function(){var e=this;e.$el.next().is("a.read-more")||e.$el.after(l),e.$el.next().click(function(){e.$el.removeClass("read-more-mask").next().remove()})}},{selector:".read-more-mask"})}},{"./autocreator":2052,"./util":2122,backbone:8,"backbone.marionette":6,underscore:42}],2e3:[function(e,t,i){t.exports='{{#each reviews}}\r\n    <li>\r\n        <h6 class="name">{{ review_author }}</h6>\r\n        <div class="wgt-rate-blue">\r\n                                        <span class="stars">\r\n                                            {{#from 1 star_rating 5}}\r\n                                                <span class="icon-icon_E006"></span>\r\n                                            {{else}}\r\n                                                <span class="icon-icon_E007"></span>\r\n                                            {{/from}}\r\n                                        </span><span\r\n                class="description">{{#date-with-format review_date_yyyymmdd \'MMMM YYYY\'}}{{/date-with-format}}</span>\r\n        </div>\r\n        <p>{{{review_body}}}</p>\r\n    </li>\r\n{{/each}}';
},{}],1998:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("./DAO");n.mixin({sum:function(e){return n.reduce(e,function(e,t){return e+t},0)}});i=t.exports=c.Model.extend({defaults:{destid:"",code:"",currency:"",date:"",number:"0",options:null,promise:null,side:null,hotelpickup:!1,hasbooked:!1,city:""},setPromise:function(e){return this.set({promise:e}),e},initialize:function(){var e=this;e.DAO=l({destid:e.get("destid"),code:e.get("code"),city:e.get("city")}),e.DAO.promise.then(function(){e.set({otherHotels:e.DAO.otherHotels,hotels:e.DAO.hotels,side:e.DAO.side},{silent:!0}),e.on("change:date",function(){e.set({options:null},{silent:!0})})})},isValid:function(){return this.get("code")&&this.get("currency")&&this.get("date")&&this.get("side")}})},{"./DAO":1981,backbone:8,underscore:42}],1981:[function(e,t,i){var n=(e("underscore"),e("./gallery/model"));SideModel=e("./side");i=t.exports=function(e){var c=i=t.exports={tourModel:new n({code:e.code}),side:new SideModel({code:e.code})};return c.promise=jQuery.when(c.tourModel.fetch(),c.side.fetch()).then(function(){}),c}},{"./gallery/model":1982,"./side":1999,underscore:42}],1999:[function(e,t,i){var n=e("backbone"),c=e("../../../../config/host.js");i=t.exports=n.Model.extend({defaults:{crypto_block:"",using_perf_list:"",event_quantity_options:""},initialize:function(e){this.url=c.getURL("api","ingresso/datetimeoptions?token="+e.code)}})},{"../../../../config/host.js":45,backbone:8}],1997:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../../abmb/stateful.js"),o=e("../../../calendar/calendar"),s=e("../../../ui/util"),r=(e("moment"),e("./model")),g=e("../ingresso-result/view"),d=c.Model.extend({});t.exports=l.ItemView.extend(n.extend({},a,{template:!1,ui:{add_btn:".add-btn",minus_btn:".minus-btn",select_calendar:".select-calendar",checkBnt:".check-availability",date:".date-popup",dateHeader:".select-calendar",dateLabel:".select-calendar i",selectTime:".select-time",timeLabel:".select-time i",timePopup:".time-popup",timeItem:".time-popup label",summary:".booking-parameter",booking_widget:".booking-widget",edit:".edit-option",labelpop:".cta-button .label-popup"},events:{"click @ui.select_calendar":"onDateHeaderClick","click @ui.add_btn":"addNumber","click @ui.minus_btn":"minNumber","click @ui.selectTime":"onTimeClick","click @ui.timeItem":"onSelectTime","click @ui.checkBnt":"onRequest","click @ui.edit":"editSidebar","mouseover .check-availability":"onCheckHover","mouseleave .check-availability":"onCheckLeave"},initialize:function(){this.sidehttp=new r({crypto:this.model.toJSON().crypto_block}),this.listenTo(this.sidehttp,"change",this.checkAvailability);var e={};n.extend(e,c.Events),this.myEvent=e;var t=this;this.myEvent.on("request",function(e){t.changeSideOption=e,s.loading({container:e.main,promise:t.sidehttp.save().then(function(e){var i=new d(e);return t.changeSideOption.tour_detail_tabs.hide(),t.changeSideOption.tour_options.show(),t.ui.booking_widget.hide(),t.ui.summary.html(t.template_summary(t.sidehttp.toJSON())).show(),t.IngressoResult?void t.IngressoResult.myEvent.trigger("updateModel",e,t.sidehttp.get("num")):void(t.IngressoResult=new g({el:t.changeSideOption.tour_options,model:i,dom:{detail:t.changeSideOption.tour_detail_tabs,sideResult:t.ui.summary,sideEdit:t.ui.booking_widget,num:t.sidehttp.get("num"),hasDate:t.sidehttp.get("hasDate")}}).render())})})})},onRender:function(){this.date=new o({el:this.ui.date,limitTo:"after",allowDate:this.model.toJSON().using_perf_list}).render().hide(),this.template_summary=Handlebars.compile(e("./template-summary.hbs")),this.listenTo(this.sidehttp,"request",this.changeSide);var t=this;this.date.myEvent.on("select",function(e){t.ui.dateLabel.text(e.format(s.getDateFormat())),t.date.hide(),t.sidehttp.set({hasDate:e.format("YYYY-MM-DD"),perf:null}),t.ui.timeLabel.text("Select a time"),t.ui.timePopup.html("");for(var i=e.format("YYYYMMDD"),n=t.model.toJSON().using_perf_list,c=0,l=n.length;l>c;c++)i==n[c].performance.date_yyyymmdd&&(n[c].performance.time_desc?t.ui.timePopup.append('<span><label data-token="'+n[c].performance.perf_token+'">'+n[c].performance.time_desc.replace(".",":")+"</label></span>"):t.ui.timePopup.append('<span><label data-token="'+n[c].performance.perf_token+'">full day</label></span>'))});var i=this.model.toJSON().event_quantity_options.length;this.ui.add_btn[0].setAttribute("data-max-number",i),this.ui.checkBnt.addClass("disabled")},checkAvailability:function(e){this.date.hide(),e.get("num")?this.ui.select_calendar.removeClass("select-calendar-disable"):(this.ui.select_calendar.addClass("select-calendar-disable"),this.ui.selectTime.addClass("select-time-disabled")),e.get("num")&&e.get("hasDate")&&this.ui.selectTime.removeClass("select-time-disabled"),e.get("num")&&e.get("hasDate")&&e.get("perf")?this.ui.checkBnt.removeClass("disabled"):this.ui.checkBnt.addClass("disabled")},addNumber:function(e){var t=jQuery(e.target).closest(".add-btn"),i=t.siblings(".minus-btn"),n=t.siblings(".value"),c=Number(jQuery.trim(n.text())),l=t.data("max-number");c>=l||(n.text(c+1),n.text()==l&&t.addClass("btn-disable"),i.hasClass("btn-disable")&&i.removeClass("btn-disable"),this.sidehttp.set({num:Number(n.text())}),this.date.myEvent.trigger("resetNumber"))},minNumber:function(e){var t=jQuery(e.target).closest(".minus-btn"),i=t.siblings(".value"),n=Number(jQuery.trim(i.text()));t.siblings(".add-btn").removeClass("btn-disable"),0!=n&&(n>1&&i.text(n-1),1==n&&(i.text("0"),t.addClass("btn-disable")),this.sidehttp.set({num:Number(i.text())}),this.date.myEvent.trigger("resetNumber",Number(i.text())))},onDateHeaderClick:function(e){var t=jQuery(e.target).closest(".select-calendar");t.hasClass("select-calendar-disable")||this.date.toggle()},onTimeClick:function(e){var t=jQuery(e.target).closest(".select-time");t.hasClass("select-time-disabled")||this.ui.timePopup.toggle()},onSelectTime:function(e){var t=jQuery(e.target),i=t.data("token");t.addClass("active").parent().siblings().find("label").removeClass("active"),this.ui.timeLabel.text(t.text()),this.ui.timePopup.hide(),this.sidehttp.set({perf:i}),this.sidehttp.set({time:t.text()})},editSidebar:function(){this.ui.booking_widget.show(),this.ui.summary.hide(),this.changeSideOption.tour_options.hide(),this.changeSideOption.tour_detail_tabs.show()},onCheckHover:function(){this.ui.select_calendar.hasClass("select-calendar-disable")&&this.ui.labelpop.show()},onCheckLeave:function(){this.ui.labelpop.hide()}}))},{"../../../abmb/stateful.js":72,"../../../calendar/calendar":424,"../../../ui/util":2122,"../ingresso-result/view":1994,"./model":1995,"./template-summary.hbs":1996,backbone:8,"backbone.marionette":6,moment:16,underscore:42}],1996:[function(e,t,i){t.exports='<div class="booking-parameter">\r\n    <p class="selection-tip">{{local "Summary of_selections"}}</p>\r\n    <ul class="selections-info">\r\n        <li>\r\n            <div class="date-section clearfix">\r\n                <p class="item-name">{{local "number of tickets"}}</p><a class="edit edit-option">{{local "general.edit"}}</a>\r\n            </div>\r\n            <p class="item">{{ num }}</p>\r\n        </li>\r\n        <li>\r\n            <p class="item-name">{{local "data of event"}}</p>\r\n            <p class="item">{{hasDate }}</p>\r\n        </li>\r\n        <li>\r\n            <p class="item-name">{{local "time of event"}}</p>\r\n            <p class="item">{{ time }}</p>\r\n        </li>\r\n    </ul>\r\n</div>'},{}],1995:[function(e,t,i){var n=(e("underscore"),e("../../../../../config/host.js")),c=e("backbone");t.exports=c.Model.extend({parse:function(e){},url:function(){return n.getURL("api","ingresso/availabilityoptions")},defaults:function(){return{crypto:null,perf:null,num:0,hasDate:null}}})},{"../../../../../config/host.js":45,backbone:8,underscore:42}],1994:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../../abmb/stateful.js"),o=(e("moment"),e("../../../ui/util")),s=e("./pull-model"),r=e("./cart-model"),g=e("./getsuccess-model"),d=e("./getsuccessDate"),I=e("../hotel-suggestion/view"),b=e("../../../../../config/host.js");c.Model.extend({});t.exports=l.ItemView.extend(n.extend({},a,{template:Handlebars.compile(e("./ingresso-result.hbs")),ui:{cancel:".wgt-sqbutton-dark",section_seat:".section-seat",Seat_i:".section-seat  .radio",selectedSeat:".section-seat  .checked",section_method:".section-method",Method_i:".section-method .radio",selectedMethod:".section-method .checked",totalPrice:".list-sidebar .price span",totalPriceMark:".list-sidebar .price i",addcart:".add-to-cart",select:"select"},events:{"click @ui.cancel":"closeView","click @ui.Seat_i":"changeSeat","click @ui.Method_i":"changeMethod","change @ui.select":"changeselect","click @ui.addcart":"onClickcart"},initialize:function(t){var i=this;this.cartModel=new r,this.listenTo(i.cartModel,"change",i.checkAddCart),this.listenTo(i.model,"change",function(){i.render()}),t.dom&&(this.detail=t.dom.detail,this.sideResult=t.dom.sideResult,this.sideEdit=t.dom.sideEdit,this.num=t.dom.num,this.date=t.dom.hasDate),this.pullmodel=new s({crypto:i.model.get("crypto_block"),num:i.num}),this.listTem=Handlebars.compile(e("./ingresso-discounts.hbs"));var l={};n.extend(l,c.Events),this.myEvent=l,this.myEvent.on("updateModel",function(e,t){i.pullmodel.set({crypto:e.crypto_block,num:t,band:null,despatch:null,allow:!1}),i.countPrice(),e.rnd=Math.random(),i.model.set(e)}),this.city=jQuery(".tours-tetail-ingresso").data("city"),this.getsuccessModel=new g({city:i.city,date:i.date}),this.getsuccess=new d},onRender:function(){this.$el.show(),this.getBandtoken();var e=this;this.pullmodel.get("allow")&&o.loading({container:e.el,promise:e.pullmodel.save().then(function(t){e.pullmodel.set({allow:!1}),e.cartModel.set({crypto:t.crypto_block});for(var i=0,n=t.discounts.length;n>i;i++)t.discounts[i].discount_list=Number(t.discounts[i].discount_list)+1;var c=e.listTem(t);e.ui.selectedSeat.parent("li").find(".child").html(c).show();e.countPrice()})}),this.pullmodel.on("change:promise",function(e,t){o.loading({container:".tours-tetail-ingresso",promise:t})})},closeView:function(){this.$el.hide(),this.detail.show(),this.sideResult.hide(),this.sideEdit.show()},countPrice:function(){for(var e=this,t=this.ui.section_seat.find("i.checked").siblings(".child").find("select"),i=0,n=[],c=0,l=t.length;l>c;c++)n.push(t[c].value),i+=Number(jQuery(t[c]).find("option:selected").data("money"));this.cartModel.set({discount:n});var a=0;this.ui.section_method.find("i.checked").length&&(a=e.ui.section_method.find("i.checked").siblings("p").find("strong").data("money")),i+=a,window.accounting&&(i=accounting.formatNumber(i,2)),this.ui.totalPrice.text(i)},getBandtoken:function(){var e=this,t=this.ui.section_seat.find(".checked").data("band"),i=null;this.ui.selectedMethod.length&&(i=e.ui.section_method.find(".checked").data("despatch")),this.pullmodel.set({band:t,despatch:i,allow:!0})},requestAPI:function(t){var i=this;this.pullmodel.get("allow")&&o.loading({container:i.el,promise:i.pullmodel.save().then(function(n){i.ui.section_seat.find(".child").html("").hide(),i.pullmodel.set({allow:!1}),i.cartModel.set({crypto:n.crypto_block});for(var c=0,l=n.discounts.length;l>c;c++)n.discounts[c].discount_list=Number(n.discounts[c].discount_list)+1;var a=Handlebars.compile(e("./ingresso-discounts.hbs")),o=a(n);t.html(o).show(),i.countPrice()})})},changeSeat:function(e){var t=this,i=jQuery(e.target),n=jQuery(e.target).siblings(".child"),c=i.data("band"),l=null;this.ui.selectedMethod.length&&(l=t.ui.section_method.find(".checked").data("despatch")),this.pullmodel.set({band:c,despatch:l,allow:!0}),t.requestAPI(n)},changeMethod:function(t){var i=jQuery(t.target),n=i.closest(".section-method"),c=n.find(".radio");c.removeClass("checked"),i.addClass("checked"),this.countPrice(),this.getBandtoken();var l=this;o.loading({container:l.el,promise:l.pullmodel.save().then(function(t){l.pullmodel.set({allow:!1}),l.cartModel.set({crypto:t.crypto_block});for(var i=0,n=t.discounts.length;n>i;i++)t.discounts[i].discount_list=Number(t.discounts[i].discount_list)+1;var c=Handlebars.compile(e("./ingresso-discounts.hbs")),a=c(t);l.ui.section_seat.find("i.checked").siblings(".child").html(a),l.countPrice()})})},checkAddCart:function(){var e=this;e.cartModel.get("crypto")&&e.cartModel.get("discount")?e.ui.addcart.removeClass("disabled"):e.ui.addcart.addClass("disabled")},changeselect:function(e){this.countPrice()},onClickcart:function(e){var t=jQuery(e.target);if(!t.hasClass("disabled")){var i=this;o.loading({container:".tours-tetail-ingresso",promise:jQuery.when(i.cartModel.save(),i.getsuccessModel.fetch()).then(function(e,t){return JSON.parse(t[2].responseText).bookingedhotel?i.getsuccess.url=b.getURL("api","shops/product/randombycity?count=2&city="+i.city):i.getsuccess.url=b.getURL("api","hotels/randombycity?count=1&city="+i.city),JSON.parse(e[2].responseText).success?i.getsuccess.fetch():void 0}).then(function(e){var t=c.Model.extend({"default":{data:null}});jQuery(".tours-tetail-ingresso .popup-lightbox").html(""),i.suggestionView=new I({el:".tours-tetail-ingresso .popup-lightbox",model:new t({data:e})}).render()})})}}}))},{"../../../../../config/host.js":45,"../../../abmb/stateful.js":72,"../../../ui/util":2122,"../hotel-suggestion/view":1987,"./cart-model":1988,"./getsuccess-model":1989,"./getsuccessDate":1990,"./ingresso-discounts.hbs":1991,"./ingresso-result.hbs":1992,"./pull-model":1993,backbone:8,"backbone.marionette":6,moment:16,underscore:42}],1993:[function(e,t,i){var n=e("backbone"),c=e("../../../../../config/host.js");t.exports=n.Model.extend({url:function(){return c.getURL("api","ingresso/discountoptions")},defaults:{crypto:null,band:null,despatch:null,num:null,allow:!1}})},{"../../../../../config/host.js":45,backbone:8}],1992:[function(e,t,i){t.exports='<!--add test-->\r\n<div class="title-block">\r\n    <h5 class="name">Tour/activity Options</h5>\r\n    <div class="button">edit-option<a class="wgt-sqbutton-dark">Cancel</a></div>\r\n</div>\r\n<!--select your seats-->\r\n<ul class="tour-list tour-seat">\r\n    <li data-index="0" class="expand tour-option-item">\r\n        <div class="list-main tour-seat-list"><br>\r\n            <h6 class="name">\r\n                {{#if price_bands.example_seats}}\r\n                    Select Your Seat(s)\r\n                {{else}}\r\n                    Select Ticket Type(s)\r\n                {{/if}}\r\n            </h6>\r\n            <div class="expand-main">\r\n                <div class="form section-2 section-seat">\r\n                    <ul>\r\n                        {{#each price_bands}}\r\n                        <li><i data-option="{{@index}}" data-band="{{band_token}}" class="radio {{#ifCond @index \'==\' 0}} checked {{/ifCond}}"></i>\r\n                            <p>\r\n                                <span>{{ ticket_type_desc }}</span>\r\n                                <label>\r\n                                    {{#if example_seats }}\r\n                                        {{#ifCond example_seats.example_seats.id \'isArray\' 0}}\r\n                                            {{#each example_seats.example_seats.id}}\r\n                                                <ins>{{this}}</ins>\r\n                                            {{/each}}\r\n                                        {{else}}\r\n                                            <ins>{{example_seats.example_seats.id}}</ins>\r\n                                        {{/ifCond}}\r\n                                    {{/if}}\r\n                                </label>\r\n                                <strong data-money="{{ combined }}">\r\n                                    <sup>{{ ../currency }}</sup><em>{{ price-format combined }}</em>\r\n                                    <small>per person</small>\r\n                                </strong>\r\n                            </p>\r\n                            <div class="child">\r\n\r\n                            </div>\r\n                        </li>\r\n                        {{/each}}\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </li>\r\n</ul>\r\n\r\n<ul class="tour-list">\r\n    <li data-index="0" class="expand tour-option-item">\r\n        <div class="list-main"><br>\r\n            <h6 class="name">Select Preferred Delivery Method</h6>\r\n            <div class="expand-main">\r\n                <div class="form section-2 section-method" style="min-height:70px">\r\n                    <ul>\r\n                        {{#each despatch_options}}\r\n                        <li><i data-option="{{@index}}" data-despatch="{{ despatch_token }}" class="radio {{#ifCond @index \'==\' 0}}checked{{/ifCond}}"></i>\r\n                            <p>\r\n                                <span>{{despatch_desc}}</span>\r\n                                <strong data-money="{{ despatch_cost }}"><sup>{{ ../currency }}</sup><em>{{ price-format despatch_cost}}</em></strong>\r\n                            </p>\r\n                            <div style="display:none" class="select-prompt"></div>\r\n                        </li>\r\n                        {{/each}}\r\n                    </ul>\r\n                </div>\r\n                <div style="z-index:10" class="expand-sidebar">\r\n                    <div><a class="wgt-sqbutton-blue add-to-cart disabled">add to cart</a></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="list-sidebar">\r\n            <div class="flag-display">\r\n                <div class="price-content">\r\n                    <p class="price"><i class="currency">{{ currency }}</i> <span>2180.24</span></p>\r\n                    <div class="guarantee-container">\r\n                        <div class="wgt-guarantee"><span class="icon-icon_B012 guarantee-label"></span>\r\n                            <p>BEST PRICE<br>GUARANTEE</p>\r\n                        </div>\r\n                        <div class="label-popup">\r\n                            <div class="content">\r\n                                <p>tours.no_hidden_cost</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </li>\r\n</ul>\r\n'},{}],1991:[function(e,t,i){t.exports='<!--ticket type-->\r\n{{#each discounts}}\r\n    <div class="select-item">\r\n        <div class="label">Ticket{{ discount_list }}</div>\r\n        <div class="select  m-ingresso">\r\n            <!--<div class="placeholder"></div>-->\r\n            <select class="" data-money="">\r\n                {{#each discount}}\r\n                <option value="{{ discount_token }}" data-money="{{combined}}">{{ discount_desc }} {{ combined_formatted }}</option>\r\n                {{/each}}\r\n            </select>\r\n        </div>\r\n    </div>\r\n{{/each}}\r\n\r\n'},{}],1990:[function(e,t,i){var n=e("backbone");e("../../../../../config/host.js");t.exports=n.Model.extend({})},{"../../../../../config/host.js":45,backbone:8}],1989:[function(e,t,i){var n=e("backbone"),c=e("../../../../../config/host.js");t.exports=n.Model.extend({initialize:function(e){this.url=c.getURL("api","shops/booking/existhotel?city="+e.city+"&date="+e.date)}})},{"../../../../../config/host.js":45,backbone:8}],1988:[function(e,t,i){var n=e("backbone"),c=e("../../../../../config/host.js");t.exports=n.Model.extend({url:function(){return c.getURL("api","ingresso/addtocart")},defaults:{crypto:null,discount:null}})},{"../../../../../config/host.js":45,backbone:8}],1987:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../../abmb/stateful.js");e("./model"),e("../../../ui/util");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("./template.hbs")),initialize:function(e){},onRender:function(){this.$el.show()}}))},{"../../../abmb/stateful.js":72,"../../../ui/util":2122,"./model":1985,"./template.hbs":1986,backbone:8,"backbone.marionette":6,underscore:42}],1986:[function(e,t,i){t.exports='{{#ifCond data.length \'>\' 1 }}\r\n    <div class="tpl-tours-chekcout-lightbox">\r\n        <div class="tpl-half-line">\r\n            {{#each data}}\r\n                <div style="background-image: url(\'{{ image_big }}\')" class="tpl-half-scratchpad clearfix {{image_anchor}}">\r\n                    <div class="tpl-content">\r\n                        <!--+x-wgt-icon(type,"blog")-->\r\n                        <div class="wgt-icon"><span class="icon-icon_B002"></span>\r\n                            <label>{{local "hotels.hotels"}}</label>\r\n                        </div>\r\n                        <div class="tpl-text">\r\n                            <h3><span>{{ title }}</span></h3>\r\n                        </div>\r\n                        <div class="tpl-cta"><a class="wgt-sqbutton" href="{{url}}">{{local "booking.book_now"}}</a></div>\r\n                    </div>\r\n                    <div class="tpl-holder">\r\n                    </div>\r\n                </div>\r\n            {{/each}}\r\n        </div>\r\n        <div class="cta-block">\r\n            <a class="wgt-sqbutton-dark" href="/tours-plus/">{{local "tours.continue_shopping"}}</a>\r\n            <a class="wgt-sqbutton-red" href="/checkout/">{{local "tours.proceed_to_checkout"}}</a>\r\n        </div>\r\n    </div>\r\n{{else}}\r\n    {{#if data.0.reevoo}}\r\n        <div class="tpl-tours-chekcout-lightbox">\r\n            <div class="tpl-half-line">\r\n                <div style="background-image: url(\'{{ data.0.image_big }}\')" class="tpl-half-scratchpad clearfix {{data.0.image_anchor}}">\r\n                    <div class="tpl-content">\r\n                        <!--+x-wgt-icon(type,"blog")-->\r\n                        <div class="wgt-icon"><span class="icon-icon_B002"></span>\r\n                            <label>{{local "hotels.hotels"}}</label>\r\n                        </div>\r\n                        <div class="tpl-text">\r\n                            <h3><span>{{ data.0.hotelname }}</span>\r\n                            </h3>\r\n                        </div>\r\n                        <div class="tpl-cta"><a class="wgt-sqbutton" href="{{data.0.url}}">{{local "booking.book_now"}}</a></div>\r\n                    </div>\r\n                    <div class="tpl-holder">\r\n                    </div>\r\n                </div>\r\n                <div class="tpl-half-reviews clearfix">\r\n                    {{#ifCond data.0.reevoo.ReviewFlag \'==\' 1}}\r\n                        <div class="tpl-content">\r\n                            <div class="wgt-icon"><span class="icon-icon_E009"></span><label>{{local "general.review_title"}}</label></div>\r\n                            <div class="tpl-text">\r\n                                <h4><span>{{data.0.reevoo.ReviewScore}}</span></h4>\r\n                                <p>{{data.0.reevoo.ReviewMessage}}</p>\r\n                            </div>\r\n                            <div class="tpl-cta">\r\n                                <a class="wgt-sqbutton" href="{{data.0.reevoo.ReviewUrl}}"\r\n                                   target="_blank">{{local "general.view_all_reviews"}}</a>\r\n                            </div>\r\n                        </div>\r\n                    {{/ifCond}}\r\n                    {{#ifCond data.0.reevoo.ReviewFlag \'==\' 2}}\r\n                        <div class="tpl-content">\r\n                            <div class="wgt-icon"><span class="icon-icon_E009"></span><label>{{local "offers.review_title"}}</label></div>\r\n                            <div class="tpl-text">\r\n                                <h4><span>{{data.0.reevoo.ReviewScore}}</span><label> / 10</label></h4>\r\n                                <p>{{data.0.reevoo.ReviewMessage}}</p>\r\n                            </div>\r\n                            <div class="tpl-cta">\r\n                                <a class="wgt-sqbutton" href="{{data.0.reevoo.ReviewUrl}}"\r\n                                   target="_blank">{{local "general.view_all_reviews"}}</a>\r\n                            </div>\r\n                        </div>\r\n                    {{/ifCond}}\r\n                    {{#ifCond data.0.reevoo.ReviewFlag \'==\' 3}}\r\n                        <div class="tpl-content">\r\n                            <div class="wgt-icon"><span class="icon-icon_E009"></span><label>{{local "offers.review_title"}}</label></div>\r\n                            <div class="tpl-text">\r\n                                <h4>&nbsp;</h4>\r\n                                <p><span>{{data.0.reevoo.ReviewMessage}}</span></p>\r\n                            </div>\r\n                        </div>\r\n                    {{/ifCond}}\r\n                    <div class="tpl-holder"></div>\r\n                </div>\r\n            </div>\r\n            <div class="cta-block">\r\n                <a class="wgt-sqbutton-dark" href="/tours-plus/">{{local "tours.continue_shopping"}}</a>\r\n                <a class="wgt-sqbutton-red" href="/checkout/">{{local "tours.proceed_to_checkout"}}</a>\r\n            </div>\r\n        </div>\r\n        {{else}}\r\n        <div class="tpl-tours-chekcout-lightbox mandatory-attribute-width30">\r\n            <div class="tpl-half-line">\r\n                <div style="background-image: url(\'{{ data.0.image_big }}\')" class="tpl-half-scratchpad clearfix mandatory-attribute-width100 {{data.0.image_anchor}}">\r\n                    <div class="tpl-content">\r\n                        <!--+x-wgt-icon(type,"blog")-->\r\n                        <div class="wgt-icon"><span class="icon-icon_B002"></span>\r\n                            <label>{{local "hotels.hotels"}}</label>\r\n                        </div>\r\n                        <div class="tpl-text">\r\n                            <h3><span>{{ data.0.hotelname }}</span>\r\n                            </h3>\r\n                        </div>\r\n                        <div class="tpl-cta"><a class="wgt-sqbutton" href="{{data.0.url}}">{{local "booking.book_now"}}</a></div>\r\n                    </div>\r\n                    <div class="tpl-holder">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="cta-block mandatory-attribute-padding">\r\n                <a class="wgt-sqbutton-dark mandatory-attribute-width45" href="/tours-plus/">{{local "tours.continue_shopping"}}</a>\r\n                <a class="wgt-sqbutton-red mandatory-attribute-width45" href="/checkout/">{{local "tours.proceed_to_checkout"}}</a>\r\n            </div>\r\n        </div>\r\n    {{/if}}\r\n{{/ifCond}}'},{}],1985:[function(e,t,i){var n=(e("underscore"),e("backbone"));e("../../../../../config/host.js");Util=e("../../../ui/util");i=t.exports=n.Model.extend({"default":{data:null}})},{"../../../../../config/host.js":45,"../../../ui/util":2122,backbone:8,underscore:42}],1984:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../../abmb/stateful.js"),a=e("./model"),o=e("../../../ui/scratchpad-item/view"),s=e("../../../share-item/view");e("../../../ui/util");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(e("./template.hbs")),events:{"click .previous":"previous","click .next":"next","click .thumbnail":function(e){this.model.set("index",parseInt(jQuery(e.target).closest(".thumbnail").data("index")))}},initialize:function(e){var t=this;t.model||(t.model=new a);var i=jQuery('.operation [data-component="scratchpad"]');t.model.set({dataId:i.data("id"),dataContent:i.data("content"),dataType:i.data("type"),dataTitle:i.data("title"),dataUrl:i.data("url")}),t.model.on("change:index",n.bind(t.renderForIndex,this))},previous:function(){this.model.set("index",Math.max(1,this.model.get("index")-1))},next:function(){this.model.set("index",Math.min(this.model.get("total"),this.model.get("index")+1))},renderForIndex:function(){var e=this,t=e.model.get("total"),i=e.model.get("index"),c=e.model.get("userPhotos"),l=t>=7?Math.min(Math.max(0,i-4),t-7):0,a=l+7,r=n.map(c.slice(l,a),function(e){return{url:e.insecure_complete_url,index:e.index}}),g=n.find(c,function(e){return e.index==i});e.model.set({thumbNails:r,current:g}),e.render(),o.autoCreate(),s.autoCreate()}}))},{"../../../abmb/stateful.js":72,"../../../share-item/view":1940,"../../../ui/scratchpad-item/view":2113,"../../../ui/util":2122,"./model":1982,"./template.hbs":1983,backbone:8,"backbone.marionette":6,underscore:42}],2113:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette"),e("../autocreator")),l=e("../../abmb/stateful"),a=e("../../user/model"),o=e("./model"),s=e("../util");ScratchPadView=t.exports=c.extend(l).extend({template:!1,events:{"click span":"onToggleClick"},userready:function(e){this.model.isValid()&&a.getInstance().deferredPromise.then(e)},ui:{icon:"span[class^=icon]",text:"span.text",span:"span"},initialize:function(e){c.prototype.initialize.apply(this,arguments);var t=this,i=t.$el.closest(".tpl-content").find("[class*=icon] span[class*=icon-icon]").get(0);t.model=new o({id:t.$el.data("id"),type:t.$el.data("type"),content:t.$el.data("content"),url:t.$el.data("url"),timestamp:Date.now(),icon:t.$el.data("icon")||t.$el.closest("[data-scratchpad-icon]").data("scratchpad-icon")||n.filter(i?i.className.split(" "):["icon-icon_B001"],function(e){return/icon-icon_/.test(e)}).shift().replace(/^icon-icon_/,""),title:t.$el.data("title")||t.$el.closest("[data-scratchpad-title]").data("scratchpad-title")||t.$el.closest("h3").text()||t.$el.parent().find(".title").text()});var l=t.$el.find(".scratchpad-tip");0==l.length&&(l=jQuery('<div class="scratchpad-tip"><span class="label-popup"><div class="content"><p></p></div></span></div>'),t.$el.append(l)),t.tip=l,t.userready(function(){t.model=a.getInstance().getScratchPad(t.model).on("change",t.onRender,t),t.render()})},onRender:function(){var e=this;e.switchState("wgt-scratchpad:"+(e.model.get("favourite")?"on":"off")),e.$el.attr({"data-component":"scratchpad","data-favourite":e.model.get("favourite")}),e.ui.text.text(e.$el.data("text"+(e.model.get("favourite")?"remove":"add"))||i18n.t("scratchpad.button_text_"+(e.model.get("favourite")?"remove":"add"))),(e.ui.icon.length||e.ui.text.length?e.ui.icon:e.ui.span).attr("class","icon-icon_"+(e.model.get("favourite")?"B014":"B013"))},onToggleClick:function(e){var t=this;return t.tip.has(e.target).length?e.stopPropagation():void t.userready(function(){s.ismobile()||t.model.once("notification",function(e){t.tip.find("p").text(e),t.tip.finish().show().delay(3500).fadeOut(2e3).hide(1)}),a.getInstance().isLoggedIn()?t.model.set({favourite:!t.model.get("favourite")}):a.getInstance().trigger("req:login")})}},{selector:"[data-component=scratchpad]"})},{"../../abmb/stateful":72,"../../user/model":2132,"../autocreator":2052,"../util":2122,"./model":2112,backbone:8,"backbone.marionette":6,underscore:42}],1983:[function(e,t,i){t.exports='<div class="tpl-tours-img-lightbox">\r\n    <div class="head-block">\r\n        <div>\r\n            <h3 class="name"><span>{{ title }}</span><a data-component="scratchpad"\r\n                    data-id="{{dataId}}"\r\n                    data-type="{{dataType}}" data-content="{{dataContent}}" data-title="{{dataTitle}}"\r\n                    data-url="{{dataUrl}}"\r\n                    class="wgt-scratchpad-off" data-favourite="false"><span class="icon-icon_B013"></span>\r\n                <div class="scratchpad-tip"><span class="label-popup">\r\n                                <div class="content">\r\n                                  <p>{{local "scratchpad.item_added"}}</p>\r\n                                </div></span></div>\r\n            </a>\r\n\r\n                <a class="share-button">\r\n                    <span data-component="share" data-title="{{dataTitle}}" data-url="{{dataUrl}}"\r\n                          class="favorite-share icon-icon_M001 tpl-half-favorite" style="color: #383838;width: 3.5rem;text-align: center;"></span>\r\n                </a>\r\n            </h3>\r\n        </div>\r\n        <a class="close"><span class="icon-icon_B017"></span></a>\r\n    </div>\r\n    <div class="main-content">\r\n        <div class="image-slider clearfix"\r\n             style="display: block; background-image: url(\'{{current.insecure_complete_url}}\')">\r\n            <div class="tpl-content">\r\n                <div class="image-info"><span class="owner-name">{{current.ownerName}}</span><span class="date">{{current.timeUploaded}}</span></div>\r\n                <p class="image-caption">{{{current.title}}}</p>\r\n                <div class="image-description">{{{current.caption}}}</div>\r\n            </div>\r\n            <div class="tpl-holder"></div>\r\n            <div class="tpl-holder"></div>\r\n        </div>\r\n        <div class="image-controller clearfix"><a class="wgt-gallerybtn wgt-gallerybtn-next next">\r\n            <div>\r\n                <p></p>\r\n                <p></p>\r\n            </div>\r\n            <div class="wgt-gallerybtn-icon"><span></span></div>\r\n        </a>\r\n            <p class="mobile-tip">{{current.index}} of {{total}}</p>\r\n\r\n            <a class="wgt-gallerybtn wgt-gallerybtn-previous previous">\r\n            <div class="wgt-gallerybtn-icon"><span></span></div>\r\n            <div>\r\n                <p></p>\r\n                <p></p>\r\n            </div>\r\n        </a>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="image-thumbnail wgt-carousel">\r\n        <div class="image-collection">\r\n            {{#each thumbNails}}\r\n                <div class="{{#equal index ../current.index}}current{{/equal}} thumbnail" data-index="{{index}}"\r\n                     style="display: inline-block; background-image: url(\'{{url}}\')"></div>\r\n            {{/each}}\r\n\r\n        </div>\r\n        <a class="wgt-carousel-buttonleft previous"></a><a class="wgt-carousel-buttonright next"></a>\r\n    </div>\r\n</div>';
},{}],1982:[function(e,t,i){var n=e("underscore"),c=e("moment"),l=e("../../../../../config/host.js"),a=e("../../../ui/util"),o=e("backbone");i=t.exports=o.Model.extend({defaults:{index:0},initialize:function(e){this.url=l.getURL("api","ingresso/extrainfo?token="+e.code)},parse:function(e){var t=e,i=t.userPhotos||[];return{userPhotos:n.map(i,function(e,t){return e.timeUploaded=c(e.timeUploaded).format(a.getDateFormat()),e.index=t+1,e}),reviewCount:t.reviewCount,reviews:t.reviews,total:i.length,title:t.title}}})},{"../../../../../config/host.js":45,"../../../ui/util":2122,backbone:8,moment:16,underscore:42}],1940:[function(e,t,i){var n=(e("underscore"),e("../ui/addthis")),c=e("../ui/autocreator"),l=e("../abmb/stateful"),a=e("../ui/util"),o=e("backbone");t.exports=c.extend(l).extend({template:Handlebars.compile(e("./template.hbs")),ui:{toolBox:".addthis_toolbox",popup:".label-popup"},initialize:function(e){c.prototype.initialize.apply(this,arguments)},onBeforeRender:function(){var e=this.$el.data("url");e.indexOf("http")<0&&(e=window.location.origin+e),this.model=new o.Model({title:this.$el.data("title"),url:e})},onRender:function(){var e=this;n.then(function(){var t={ui_508_compliant:!0},i=e.$el,n=i.find(".addthis_toolbox"),c=i.find(".label-popup");a.ismobileOS()||i.find(".whatsapp").hide(),i.on("click",function(e){if(jQuery(e.target).hasClass("icon-icon_M001")&&(c.toggleClass("show"),c.closest(".tpl-half-favorite").toggleClass("show"),c.hasClass("show"))){var t=c.offset().left,i=c.css("right"),n=t+c.width(),l=jQuery(window).width()-16;if(n>l){var o=n-l,s=parseInt(i)+o+"px";c.css("right",s)}if(!a.ismobileOS()||a.ismobileOS()&&!a.ismobile()){var r=120-t;if(r>0){var g=parseInt(i)-r+"px";c.css("right",g)}}else if(a.ismobileOS()&&a.ismobile()){var r=10-t;if(r>0){var g=parseInt(i)-r+"px";c.css("right",g)}}}e.stopPropagation()}),addthis.toolbox(e.ui.toolBox.get(0),t,{url:n.data("url"),title:n.data("title")})})}},{selector:"[data-component=share]"}),jQuery("html").on("click",function(){jQuery('[data-component="share"] .label-popup').removeClass("show").closest(".tpl-half-favorite").removeClass("show")})},{"../abmb/stateful":72,"../ui/addthis":2047,"../ui/autocreator":2052,"../ui/util":2122,"./template.hbs":1939,backbone:8,underscore:42}],1939:[function(e,t,i){t.exports='<span class="label-popup template-share">\r\n                                <span class="popup-content addthis_toolbox" data-url="{{url}}" data-title="{{title}}">\r\n                                    <a class="email" title="email" href="mailto:?subject={{title}}&body={{url}}"><span\r\n                                            class="icon-icon_H003"></span></a>\r\n                                    <a class="addthis_button_twitter"><span class="icon-icon_B032"></span></a>\r\n                                    <a class="addthis_button_facebook"><span class="icon-icon_B028"></span></a>\r\n                                    <a class="whatsapp" href="whatsapp://send?text={{url}}"\r\n                                       data-action="share/whatsapp/share" target="_blank"><span\r\n                                            class="icon-icon_B033"></span></a>\r\n                                    <a class="addthis_button_linkedin"><span class="icon-icon_B034"></span></a>\r\n                                    <a class="addthis_button_sinaweibo"><span class="icon-icon_B037"></span></a>\r\n                                </span>\r\n                            </span>'},{}],387:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../../component/ui/counter/view/counter"),o=e("../../abmb/stateful.js");t.exports=l.ItemView.extend(n.extend({},o,{template:Handlebars.compile(e("../assets/choose-stay-options.hbs")),initialize:function(e){this.switchLock=e.switchLock,this.switchState("collapse_btn:hide"),this.switchState("expand:off")},ui:{expandTips:".collapse-button span",expandIcon:".collapse-button i",listWrapper:"ul.booking-options",viewMore:".viewmore",rateTitle:'[data-rate="title"]'},events:{"click .collapsestrip":"toggleExpand",'click [data-opt="view-more"]':"viewMore",'click [data-opt="more"]':"readMore","click .description-trigger":"toggleDescription"},setExpand:function(e){"OPEN"==e&&(this.ui.expandTips.text(i18n.t("booking.open")),this.ui.expandIcon.attr({"class":"plus"})),"OFF"==e&&(this.ui.expandIcon.attr({"class":"minus"}),this.ui.expandTips.text(i18n.t("booking.collapse")))},toggleExpand:function(){"on"==this.getState("expand")?(this.switchState("expand:off"),this.setExpand("OPEN")):(this.switchState("expand:on"),this.setExpand("OFF"))},unfoldAll:function(){var e=0;n.each(this.model.get("services"),function(t){t.quantity>0&&e++}),e>0?this.ui.rateTitle.text(i18n.t("booking.selected_stay_option")+e+" "+i18n.t("booking.SELECTED")).next().hide().parent().addClass("blue"):this.ui.rateTitle.text(i18n.t("booking.choose_stay_opt")).next().show().parent().removeClass("blue")},setPagination:function(){if(this.model.get("services")&&0!=this.model.get("services").length){if(this.model.get("services")){this.$el.find("#no-add-on-tips").hide(),this.switchState("collapse_btn:show");var e=this.model.get("services").length;e>2&&this.ui.viewMore.show(),this.$el.find(".booking-options").find("[data-key]:lt(2)").show()}}else this.switchState("collapse_btn:hide"),this.showNoResult&&this.$el.find("#no-add-on-tips").show()},setDefaultSelected:function(e){var t=this.model.get("services");n.each(t,function(e){e.quantity=0}),n.each(e,function(e){var i=n.findWhere(t,{key:e.key});i&&(i.quantity=e.quantity)}),this.render(),this.viewMore()},viewMore:function(){this.$el.find(".booking-options").find("[data-key]").show(),this.ui.viewMore.hide()},readMore:function(e){jQuery(e.currentTarget).parent().addClass("show-more")},newCheckBox:function(e){var t=jQuery('<span class="checkbox-tip">Add to order</span><i class="checkbox"><span style="font-size: 2.8rem;color:#fff;opacity:0" class="icon-icon_B023"></span></i>');return e&&t.addClass("checked"),t.on("click",function(){var e=t.hasClass("checked");e?t.removeClass("checked"):t.addClass("checked"),t.trigger("change",!e)}),t},onRender:function(){var e=this;n.each(this.model.get("services"),function(t){var i=-1==t.maxquantity?99:t.maxquantity||0,n=t.quantity||0;if(1==i){var l=e.newCheckBox(t.quantity>0);l.on("change",function(i,n){t.quantity=n?1:0,e.trigger("req:select-add-on"),e.unfoldAll()}),e.$el.find("#"+t.key).append(l)}else{var l=new a({model:new c.Model({label:"",minValue:0,maxValue:i,value:n,hideLabel:!0})});l.model.on("change:value",function(i){t.quantity=i.get("value"),e.trigger("req:select-add-on"),e.unfoldAll()}),e.$el.find("#"+t.key).append(l.render().el),l.$el.find("label").hide()}}),e.setPagination()}}))},{"../../../component/ui/counter/view/counter":2064,"../../abmb/stateful.js":72,"../assets/choose-stay-options.hbs":365,backbone:8,"backbone.marionette":6,underscore:42}],385:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../abmb/stateful.js"),o=e("./rate-holder-view"),s=e("./blank-image-view"),r=e("../model/view-model"),g=e("../model/view-event"),d=e("../../ui/util.js"),I=(e("../model/room-rates-collection"),e("../assets/choose-rate.hbs")),b=c.Model.extend({});Handlebars.registerHelper("debug",function(e){}),t.exports=l.ItemView.extend(n.extend({},a,{template:Handlebars.compile(I),ui:{expandTips:".collapse-button span",expandIcon:".collapse-button i",listWrapper:"ul.booking-options",viewMore:".viewmore",rateTitle:'[data-rate="title"]'},events:{"click .collapsestrip":"toggleExpand",'click [data-opt="more"]':"viewMore",'click [data-opt="select"],.rate-image':"select",'click [data-opt="click"]':"toggleTipsPanel",'click [data-opt="close"]':"closeTipsPanel","click .description-trigger":"toggleDescription","click .popup-close":"popupClose","click .rate-desc-more":"popupShow","click .lable-full":"labelFullClose"},initialize:function(e){this.switchLock=e.switchLock,this.switchState("expand:on"),this.rateHolderView=new o({model:new b}),this.blankImageView=new s({model:new(c.Model.extend({}))}),this.pageSize=3,this.pageIndex=1},serializeData:function(){var e=n.sortBy(this.rateData,function(e){return e.__orderIndex});return{data:e,inLoyaltyProgram:window.inLoyaltyProgram,selectedRateCode:this.collection.selectedRateCode,_islogin:d.isloggedin()}},labelFullClose:function(e){var t=jQuery(e.target).closest(".label-popup");d.ismobile()&&t.hide()},popupClose:function(e){var t=jQuery(e.target),i=t.closest(".label-popup");i.hide()},popupShow:function(e){var t=jQuery(e.target),i=t.closest(".rate-item"),n=i.children(".label-popup");n.css({width:i.width(),height:i.height()}).show()},select:function(e){var t=jQuery(e.currentTarget),i=t.parents("li");if(!i.hasClass("checked")){this.ui.listWrapper.find("li").removeClass("highlighted").removeClass("checked").find('[data-opt="select"]').text(i18n.t("booking.select_and_customize")),i.addClass("checked");var n=t.data("ratecode");this.rateName=t.parents("li").data("ratename"),g.get().trigger("change:rateCode",{model:this.model,rateCode:n}),r.set("rateCode",n),this.unfoldAll(),t.hasClass("wgt-sqbutton-dark")&&t.text(i18n.t("booking.SELECTED"))}},unfoldAll:function(){this.notUnFold||(this.setExpand("OPEN"),this.switchState("expand:off"),this.ui.rateTitle.addClass("blue").text(i18n.t("booking.selected_rate")+this.rateName)),this.notUnFold=!1},highlightRate:function(){var e=this;window.setTimeout(function(){var t=e.collection.query("promo");if(t){t=t.toUpperCase();var i=e.$el.find('[data-auto-set-select="'+t+'"]').eq(0);i&&(i.closest(".rate-item").addClass("highlighted"),i.text(i18n.t("booking.confirm_and_customize")))}else{var n=e.collection.query("groupcode");if(n){n=n.toUpperCase();var i=e.$el.find('[data-auto-set-select-group="'+n+'"]').eq(0);i&&(i.closest(".rate-item").addClass("highlighted"),i.text(i18n.t("booking.confirm_and_customize")))}}},100)},toggleTipsPanel:function(e){if(d.ismobile()){var t=jQuery(e.currentTarget);t.hasClass("click")?t.removeClass("click"):t.addClass("click")}},closeTipsPanel:function(e){var t=jQuery(e.currentTarget);t.parents('[data-opt="click"]').removeClass("click"),e.stopPropagation()},setSelected:function(e){var t=this;window.setTimeout(function(){t.$el.find("[data-auto-set-select]").each(function(t){return jQuery(this).data("ratecode")==e?(jQuery(this).trigger("click",!0),!1):void 0})},0)},scrollToNextStep:function(){var e=d.ismobile()?40:0;jQuery("html, body").stop().animate({scrollTop:jQuery("#room-options-wrapper").offset().top-e},"500","swing",function(){})},setPagination:function(){var e=this;if(count=e.rateData&&e.rateData.length,items=e.ui.listWrapper.children("li.rate-item"),inline={display:"inline-block"},0==count?(e.pageCount=0,e.pageIndex=1,e.rateHolderView.$el.hide()):(e.pageCount=Math.ceil((count+1)/e.pageSize),e.pageIndex=Math.max(1,Math.min(e.pageCount,Math.max(e.pageIndex,2))),e.rateHolderView.model.set("col",1==count?"2":"1"),e.rateHolderView.$el.css(inline)),e.blankImageView.$el.hide(),count>2){var t=count%3;0!=t&&1!=t||e.pageIndex!=e.pageCount||(e.blankImageView.model.set("col",0==t?"2":1),e.blankImageView.model.set("src",jQuery("#graySpaceImage").val()),items.eq(-1).after(e.blankImageView.render().$el.css(inline)))}items.eq(items.length>2?1:-1).after(e.rateHolderView.render().$el),items.hide().slice(0,e.pageIndex*e.pageSize-1).css(inline),e.ui.viewMore[e.pageIndex<e.pageCount?"show":"hide"](),jQuery(window).width()<768&&e.rateHolderView.$el.hide()},viewMore:function(){this.pageIndex++,this.setPagination()},setExpand:function(e){"OPEN"==e&&(this.ui.expandTips.text(i18n.t("booking.open")),this.ui.expandIcon.attr({"class":"plus"})),"OFF"==e&&(this.ui.expandIcon.attr({"class":"minus"}),this.ui.expandTips.text(i18n.t("booking.collapse")))},toggleExpand:function(){"on"==this.getState("expand")?(this.switchState("expand:off"),this.setExpand("OPEN")):(this.switchState("expand:on"),this.setExpand("OFF"))},onBeforeRender:function(){var e=this.collection.toJSON();this.queryByCategory=n.where(e,{categoryid:this.collection.categoryId}),this.rateData=n.uniq(this.queryByCategory,"ratecode");for(var t=0;t<this.rateData.length;t++){this.rateData[t].uuid==this.shouldListFirstId||this.rateData[t].ratecode==this.collection.selectedRateCode||this.rateData[t].promocode&&this.rateData[t].promocode.length>0||this.rateData[t].groupcode&&this.rateData[t].groupcode.length>0?this.rateData[t].__orderIndex=1:this.rateData[t].__orderIndex=100,this.rateData[t].defaultActive=!0;for(var i=this.rateData[t].ratecode,c=n.where(this.queryByCategory,{ratecode:i}),l=n.uniq(c,"bedtype"),a={},o=0;o<l.length;o++)a[l[o].bedtype]=n.where(c,{bedtype:l[o].bedtype});this.model.set(this.rateData[t].ratecode,a)}},reSort:function(e,t,i){var c=n.findWhere(this.queryByCategory,{ratecode:e,roomtypecode:t}),l=n.findWhere(this.queryByCategory,{ratecode:e});i&&(this.notUnFold=!0),c?(this.shouldListFirstId=c.uuid,this.setSelected(e),this.render()):l&&(this.setSelected(e),this.render())},setPopupSize:function(){var e=jQuery(".rate-item");try{var t=e.children(".label-popup");t.css({width:e.width(),height:e.height()})}catch(i){}},onRender:function(){this.setExpand("OFF"),this.setPagination(),this.highlightRate()}}))},{"../../abmb/stateful.js":72,"../../ui/util.js":2122,"../assets/choose-rate.hbs":363,"../model/room-rates-collection":378,"../model/view-event":380,"../model/view-model":381,"./blank-image-view":382,"./rate-holder-view":391,backbone:8,"backbone.marionette":6,underscore:42}],391:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../abmb/stateful.js");t.exports=c.ItemView.extend(n.extend({},l,{tagName:"li",className:"blank loggedout",initialize:function(){},getTemplate:function(){var t=jQuery("#guarantee_tpl").html();return(null==t||t.length<1)&&(t=e("1"==this.model.get("col")?"../assets/rate-holder/holder-col-1-1.hbs":"../assets/rate-holder/holder-col-2-1.hbs")),Handlebars.compile(t)},onRender:function(){"1"==this.model.get("col")?this.$el.addClass("col-1"):this.$el.addClass("col-2"),"3"==this.model.get("col")&&this.$el.css({width:"100%",padding:"7.5% 0 7.5% 0"})}}))},{"../../abmb/stateful.js":72,"../assets/rate-holder/holder-col-1-1.hbs":370,"../assets/rate-holder/holder-col-2-1.hbs":371,backbone:8,"backbone.marionette":6,underscore:42}],384:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../abmb/stateful.js"),o=(e("../model/view-model"),e("../model/view-event")),s=e("./choose-roomview-view"),r=e("../assets/choose-option.hbs");c.Collection.extend({});t.exports=l.ItemView.extend(n.extend({},a,{template:Handlebars.compile(r),ui:{expandTips:".collapse-button span",expandIcon:".collapse-button i",bedTypeWrapper:"#bed-type-wrapper",roomViewWrapper:"#view-type-wrapper",rateTitle:'[data-rate="title"]'},events:{"click #bed-type-wrapper li":"queryViewByBedType","click .collapsestrip":"toggleExpand"},initialize:function(e){var t=this;t.switchLock=e.switchLock,t.switchState("collapse_btn:hide"),t.chooseRoomView=new s,o.get().on("change:rateCode",function(e){var i=e.rateCode;t.model=e.model,t.dataArray=t.collection.toJSON(),t.bedData=t.model.get(i),t.render(),t.bedType=t.whichSelectedDefault(),t.setBedType(t.bedType,!0),t.couldUpgrade(),t.chooseRoomView.render(),t.chooseRoomView.delegateEvents(),t.switchState("expand:on"),t.switchState("collapse_btn:show")}),t.chooseRoomView.on("req:id",function(e){var i=n.findWhere(t.viewDate,{uuid:e});if(i.active){var c=n.findWhere(t.viewDate,{roomview:""});c&&(i.active=!1,c.active=!0)}else{for(var l=0;l<t.viewDate.length;l++)t.viewDate[l].active=!1;n.findWhere(t.viewDate,{uuid:e}).active=!0}t.couldUpgrade(),t.chooseRoomView.render(),t.chooseRoomView.delegateEvents(),t.unfoldAll(!0)}),t.chooseRoomView.on("req:upgrade",function(e){var i=n.findWhere(t.dataArray,{uuid:e});i.active?i.active=!1:i.active=!0,t.upgradespecified=i.active?1:0,t.suiteDate=i,t.chooseRoomView.suiteDate=t.suiteDate,t.chooseRoomView.upgradespecified=t.upgradespecified,t.chooseRoomView.render(),t.unfoldAll(!0)})},couldUpgrade:function(){var e=this,t=n.findWhere(e.viewDate,{active:!0}),i=n.where(e.dataArray,{bedtype:t.bedtype,roomview:t.roomview,ratecode:t.ratecode,categorygroup:t.categorygroup});if(i&&i.length>1){var c=n.sortBy(i,"categoryorder"),l=n.findIndex(c,{uuid:t.uuid});e.suiteDate=i[l+1],e.chooseRoomView.suiteDate=e.suiteDate}else e.chooseRoomView.suiteDate=null},serializeData:function(){return{bedData:this.bedData}},queryViewByBedType:function(e){var t=this;if(jQuery(e.currentTarget).hasClass("checked"))return!1;t.ui.bedTypeWrapper.find("li").removeClass("checked"),jQuery(e.currentTarget).addClass("checked");var i=jQuery(e.currentTarget).data("bedtype");t.setBedType(i),t.couldUpgrade(),t.chooseRoomView.render(),t.unfoldAll(!t.chooseRoomView.hasChildren())},whichSelectedDefault:function(){var e=this,t="",i={};for(var c in this.bedData)if(this.bedData&&this.bedData.hasOwnProperty(c)){for(var l=this.bedData[c],a=0;a<l.length;a++)l[a].active&&(l[a].active=!1),l[a].defaultActive&&(l[a].active=!0,e.ui.bedTypeWrapper.find("[data-bedtype='"+c+"']").addClass("checked"),t=c),""==l[a].roomview&&(i=l[a]);var o=e.ui.bedTypeWrapper.find("[data-bedtype='"+c+"']"),s=n.findWhere(l,{roomview:""});o.find('[data-tag="icon"]').attr({"class":l[0].bedtypeicon}),s&&(o.attr("data-ratecode",s.ratecode),o.attr("data-roomtypecode",s.roomtypecode));var r=i.roomleft;r>0?o.find('[data-tag="left"]').text(r+" "+(r>1?i18n.t("booking.rooms_left"):i18n.t("booking.room_left"))).parents("label").show():o.find('[data-tag="left"]').parents("label").hide()}return t},setBedType:function(e){var t=this;t.bedType=e,t.viewDate=this.bedData[e];for(var i=!1,n=0;n<t.viewDate.length;n++)t.viewDate[n].active&&(i=!0);i||(t.viewDate[0].active=!0),t.chooseRoomView.viewDate=t.viewDate,t.ui.roomViewWrapper.empty().append(t.chooseRoomView.render().el),t.chooseRoomView.delegateEvents()},unfoldAll:function(e){var t=this.$el.find('li[class="checked"]').length;this.setExpand("OPEN"),e&&this.switchState("expand:off"),this.olderCheckedCount=t,this.ui.rateTitle.addClass("blue").text(i18n.t("booking.selected_room_option")+this.$el.find('li[class="checked"]').length+" "+i18n.t("booking.SELECTED"))},setExpand:function(e){"OPEN"==e&&(this.ui.expandTips.text(i18n.t("booking.open")),this.ui.expandIcon.attr({"class":"plus"})),"OFF"==e&&(this.ui.expandIcon.attr({"class":"minus"}),this.ui.expandTips.text(i18n.t("booking.collapse")))},toggleExpand:function(){"hide"!=this.getState("expand")&&("on"==this.getState("expand")?(this.switchState("expand:off"),this.setExpand("OPEN")):(this.switchState("expand:on"),this.setExpand("OFF")))},onRender:function(){}}))},{"../../abmb/stateful.js":72,"../assets/choose-option.hbs":362,"../model/view-event":380,"../model/view-model":381,"./choose-roomview-view":386,backbone:8,"backbone.marionette":6,underscore:42}],386:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../abmb/stateful.js"),a=e("../model/view-model"),o=e("../assets/choose-roomview.hbs");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(o),events:{"click li[data-view]":"selectRoomView","click li[data-upgrade]":"selectUpGrade"},initialize:function(){},serializeData:function(){if(this.viewDate)for(var e=n.sortBy(this.viewDate,"displaymemberrate")[0].displaymemberrate,t=0;t<this.viewDate.length;t++)this.viewDate[t].differPrice=Math.round(100*(this.viewDate[t].displaymemberrate-e))/100;return this.suiteDate&&(this.suiteDate.differPrice=Math.round(100*(this.suiteDate.displaymemberrate-e))/100),a.trigger("form-data-change",{viewDate:this.viewDate,suiteDate:this.suiteDate,upgradespecified:1===this.upgradespecified?1:0}),{hasType:n.some(this.viewDate,function(e){return e&&e.roomview})||this.suiteDate,upgradespecified:1===this.upgradespecified?1:0,viewDate:this.viewDate,suiteDate:this.suiteDate}},selectRoomView:function(e){this.trigger("req:id",jQuery(e.currentTarget).attr("id"))},selectUpGrade:function(e){this.trigger("req:upgrade",jQuery(e.currentTarget).attr("id"))},setSelected:function(e,t){var i=this;window.setTimeout(function(){i.$el.find("li[data-view]").each(function(i){jQuery(this).data("ratecode")==e&&jQuery(this).data("roomtypecode")==t&&jQuery(this).trigger("click")})},100)},hasChildren:function(){return this.viewDate&&this.viewDate.some(function(e){return e.roomview})||this.suiteDate}}))},{"../../abmb/stateful.js":72,"../assets/choose-roomview.hbs":364,"../model/view-model":381,backbone:8,"backbone.marionette":6,underscore:42}],382:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({tagName:"li",className:"blank loggedout",template:!1,onRender:function(){var e=this.model.get("col");this.$el.addClass("col-"+e),this.model.get("src")&&this.$el.css({"background-image":"url('"+this.model.get("src")+"')","background-repeat":"no-repeat","background-size":"cover"}),this.$el.html(this.paddingHTML(67.5/+e))},paddingHTML:function(e){return'<div style="padding-top:'+e+'%;"><div style="height:1.5em;font-size:1.8rem;"></div><div style="height:5.4em;font-size:1.6rem;padding-top:2.2em;"></div><div style="height:4.3em;font-size:1.4rem;padding-top:.2rem;"></div></div>'}})},{"backbone.marionette":6}],381:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=n.Model.extend({});t.exports=new c},{backbone:8,underscore:42}],380:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l={};n.extend(l,c.Events),t.exports={reset:function(){l={name:"xxx"},n.extend(l,c.Events)},get:function(){return l}}},{backbone:8,underscore:42}],378:[function(e,t,i){function n(e){var t=jQuery.Deferred();return t.resolve(e),t.promise()}function c(e){return this.hotelcode=e.hotelcode,this.checkoutform=e.checkoutform,this.checkin=e.checkin,this.checkout=e.checkout,this.__diffDay=new o(this.checkout).diff(new o(this.checkin),"days"),this.rooms=e.rooms,this.adults=e.adults,this.children=e.children,this.currency=e.currency,this.currencymark=e.currencymark,this.categoryName=e.categoryname,this.categoryId=e.categoryid,this.editUrl=e.url,this.city=e.city,this.hotelid=e.viatorhotel,this.hotelname=e.hotelname,this.selectedRateCode=this.bookingModel&&this.bookingModel.get("selectedRateCode"),l.each(e.roomrates,function(t){t.hotelname=e.hotelname,t.currencymark=e.currencymark,t.conditionUrl=e.conditionurl,t.soldOutBedTypes=[],l.each(e.soldOutBedTypes,function(e){e.rateCode===t.ratecode&&t.soldOutBedTypes.push(e)}),+t.avgdisplaymemberratesaved||(t.avgdisplaymemberratesaved="")}),this.roomrates=e.roomrates,e.roomrates}var l=e("underscore"),a=e("backbone"),o=e("moment"),s=e("../../booking/model"),r=e("../../../../config/host.js").host,g=e("./room-rate-model.js"),d=e("../../booking-2.1/storage/book");t.exports=a.Collection.extend({model:g,query:function(e){function t(e,t){var n=i.match(e+"=([^&]+)");return t=t||"",n?n[1]:t}var i=window.location.search;l.clone(this.defaults);return t(e)},initialize:function(e){e&&e.bookingModel&&(this.bookingModel=e.bookingModel)},fetch:function(){var e=this,t={},i={};return i=this.bookingModel?this.bookingModel:new s,t=this.bookingModel.flatten(!0),t=i.get("categoryid")?l.extend(this.bookingModel.flatten(!0),{categoryid:i.get("categoryid")},{currency:i.get("currency")}):l.extend(this.bookingModel.flatten(!0),{categoryid:e.query("categoryid")}),t=l.omit(t,"packageurl"),t.children||(t.children=0),d.getRatesByRoom(t).then(function(t){return e.reset(),e.set(c(t)),n()})},url:function(){var e={};return e=this.bookingModel?this.bookingModel:new s,e.get("categoryid")?r+"/api/data/avaliableroomrate?"+e.getQueryParams()+"&categoryid="+e.get("categoryid")+"&currency="+e.get("currency"):r+"/api/data/avaliableroomrate?"+e.getQueryParams()+"&categoryid="+this.query("categoryid")},parse:function(e){return this.hotelcode=e.hotelcode,this.checkoutform=e.checkoutform,this.checkin=e.checkin,this.checkout=e.checkout,this.__diffDay=new o(this.checkout).diff(new o(this.checkin),"days"),this.rooms=e.rooms,this.adults=e.adults,this.children=e.children,this.currency=e.currency,this.currencymark=e.currencymark,this.categoryName=e.categoryname,this.categoryId=e.categoryid,this.editUrl=e.url,this.city=e.city,this.hotelid=e.viatorhotel,this.hotelname=e.hotelname,this.selectedRateCode=this.bookingModel&&this.bookingModel.get("selectedRateCode"),l.each(e.roomrates,function(t){t.hotelname=e.hotelname,t.currencymark=e.currencymark,t.conditionUrl=e.conditionurl,t.soldOutBedTypes=[],l.each(e.soldOutBedTypes,function(e){e.rateCode===t.ratecode&&t.soldOutBedTypes.push(e)}),+t.avgdisplaymemberratesaved||(t.avgdisplaymemberratesaved="")}),this.roomrates=e.roomrates,e.roomrates}})},{"../../../../config/host.js":45,"../../booking-2.1/storage/book":353,"../../booking/model":406,"./room-rate-model.js":377,backbone:8,moment:16,underscore:42}],377:[function(e,t,i){function n(){for(var e=[],t="0123456789abcdef",i=0;36>i;i++)e[i]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}var c=(e("underscore"),e("backbone"));t.exports=c.Model.extend({parse:function(e){return e.uuid=n(),e}})},{backbone:8,underscore:42}],376:[function(e,t,i){var n=e("underscore"),c=e("../../../../config/host.js").host,l=e("backbone"),a=l.Model.extend({initialize:function(e){this.queryUrl=e.getQueryParams()},setQueryByCartModel:function(e){var t="rateplancode="+e.get("ratecode")+"&roomtypecode="+e.get("roomtype")+"&currency="+e.get("currency");this.cartQueryUrl=this.queryUrl+"&"+t},url:function(){return c+"/api/room/getroomservicelist?"+this.cartQueryUrl},queryById:function(e){var t=this.get("services");return n.findWhere(t,{key:e+""})},getSelectedItem:function(){return this.get("services")}});t.exports=a},{"../../../../config/host.js":45,backbone:8,underscore:42}],375:[function(e,t,i){var n=(e("underscore"),e("../../../../config/host.js").host),c=e("backbone"),l=c.Model.extend({hotelcode:"",checkin:"",checkout:"",rooms:"",adults:"",children:"",roomtype:"",roomid:"",ratecode:"",currency:"",price:"",tax:"",discountcode:"",points:"",addonpoints:"",productpoints:"",url:function(){return n+"/api/roombooking/add"},setSum:function(){var e=isNaN(this.get("productprice"))?0:this.get("productprice"),t=isNaN(this.get("addonprice"))?0:this.get("addonprice"),i=isNaN(this.get("price"))?0:this.get("price"),n=e+t+i;this.set("sum",Math.round(100*n)/100)},setPointsSum:function(){var e=isNaN(this.get("points"))?0:this.get("points"),t=isNaN(this.get("productpoints"))?0:this.get("productpoints"),i=isNaN(this.get("addonpoints"))?0:this.get("addonpoints"),n=i+e+t;this.set("pointssum",Math.round(100*n)/100)}});t.exports=l},{"../../../../config/host.js":45,backbone:8,underscore:42}],373:[function(e,t,i){t.exports='{{#if _hasPrice}}\r\n    <div class="bookingflow-stickybar selected">\r\n        <!--<div class="stickybar-tip">{{ currencymark }}</div>-->\r\n        <div class="stickybar-content">\r\n            <div class="stickybar-price">\r\n                <p data-rate="{{ price }}" data-product="{{ productprice }}">\r\n                    {{#more-than __totalNight 1}}\r\n                        {{local "general.total"}} <span> ({{ __totalNight }} {{local "general.nights"}})</span>\r\n                    {{/more-than}}\r\n                    {{#compare __totalNight 1 }}\r\n                        {{local "general.total"}} <span> ({{ __totalNight }}{{local "general.night"}})</span>\r\n                    {{/compare}}: <br style="display: none;">\r\n                    {{currencymark}}{{#price-format sum}} {{/price-format}}\r\n\r\n                </p>\r\n               <p>\r\n                    OR<span> Pay with</span> My Points : {{#num-format pointssum}} {{/num-format}}\r\n               </p>\r\n            </div>\r\n            <!--<a class="stickybar-currency" style="visibility: hidden;"><span>{{currencymark}}</span></a>-->\r\n            <a class="wgt-sqbutton-red" id="submit">{{local "general.checkout"}}</a>\r\n        </div>\r\n        <div class="loading-block"><p class="loading-gif"></p></div>\r\n    </div>\r\n{{else}}\r\n    <div class="bookingflow-stickybar unselected">\r\n        <div class="stickybar-tip">\r\n            <p>{{local "booking.select_rate_continue"}}</p>\r\n        </div>\r\n        <div class="stickybar-content">\r\n            <a class="wgt-sqbutton-red disabled " id="submit">{{local "general.checkout"}}</a></div>\r\n    </div>\r\n{{/if}}'},{}],372:[function(e,t,i){t.exports='{{#if price}}\r\n    <div class="bookingflow-stickybar selected">\r\n        <!--<div class="stickybar-tip">{{ currencymark }}</div>-->\r\n        <div class="stickybar-content">\r\n            <div class="stickybar-price">\r\n                <p data-rate="{{ price }}" data-product="{{ productprice }}">\r\n                    {{#more-than __totalNight 1}}\r\n                        {{local "general.total"}} <br style="display: none;">({{ __totalNight }} {{local "general.nights"}})\r\n                    {{/more-than}}\r\n                    {{#compare __totalNight 1 }}\r\n                        {{local "general.total"}} <br style="display: none;">({{ __totalNight }} {{local "general.night"}})\r\n                    {{/compare}}:\r\n                    {{currencymark}}{{#price-format sum}} {{/price-format}}\r\n                </p>\r\n            </div>\r\n            <!--<a class="stickybar-currency" style="visibility: hidden;"><span>{{currencymark}}</span></a>-->\r\n            <a class="wgt-sqbutton-red" id="submit">{{local "booking.save_changes"}}</a>\r\n        </div>\r\n        <div class="loading-block"><p>{{local "general.loading_wait"}}</p></div>\r\n    </div>\r\n{{else}}\r\n    <div class="bookingflow-stickybar unselected">\r\n        <div class="stickybar-tip">\r\n            <p>{{local "booking.select_rate_continue"}}</p>\r\n        </div>\r\n        <div class="stickybar-content"><a class="wgt-sqbutton-red disabled" id="submit"></a></div>\r\n    </div>\r\n{{/if}}'},{}],371:[function(e,t,i){t.exports='<div class="content">\r\n    <h4>{{local "booking.custom_bpg_title"}}<!--Get 5% Off Your Room--></h4>\r\n    <p class="description">{{local "booking.custom_bpg_desc"}}<!--Donec viverra augue in porttitor cursus. Interdum et malesuada fames ac ante ipsum primis in faucibus.--></p>\r\n    <div><a class="wgt-sqbutton-dark">{{local "booking.join_loyalty_btn"}}<!--Sign on to claim your 5% discount--></a></div><a class="blue member">{{local "booking.already_member"}}<!--Already a member?--></a>\r\n    <div class="lowestprice"><span class="icon-icon_B012"></span>\r\n        <h4>{{local "booking.lowest_prices_around"}}<!--Best Price Guaranteed--></h4>\r\n    </div>\r\n</div>\r\n<!--\r\n    text change key:\r\n    booking.join_loyalty_btn\r\n    booking.lowest_prices_around\r\n-->'},{}],370:[function(e,t,i){t.exports='<div class="content">\r\n    <h4>Awesome, you saved 5% Off Your Room price!</h4>\r\n    <p class="description">Not just this, you also get My Millennuium Loyalty points which you can use for future stays.</p>\r\n    <div class="lowestprice"><span class="icon-icon_B016"></span>\r\n        <h4>Lowest Prices Around</h4>\r\n    </div>\r\n    <label class="guarantee-hover"><a class="blue guarantee">See our guarantee</a>\r\n        <div class="label-popup">\r\n            <h5 class="title">FALL INTO AUTUMN</h5><a class="close"><span class="icon-icon_B017"></span></a>\r\n            <div class="content">\r\n                <p>Get 33% off our best flexible rate with breakfast and and enjoy complimentary Wi-Fi as part of our Autumn Saver offer.</p>\r\n                <p>Rate is Inclusive of Buffet Breakfast for 2 and High Speed Internet Access.</p>\r\n                <ul>\r\n                    <li>Rate is Exclusive of Taxes.</li>\r\n                    <li>No Cancellations and Amendments Allowed.</li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </label>\r\n</div>'},{}],368:[function(e,t,i){t.exports='<div class="loading-block" style="min-height: 200px;">\r\n    <p class="loading-gif"></p>\r\n</div>\r\n\r\n<div class="headerblock">\r\n    <h2 class="head">{{local "booking.edit_your_customisations"}}</h2>\r\n    <p>\r\n        {{local "booking.change_your_rate_tip"}}\r\n        <a href="javascript:void(0);" data-opt="return" style="color: #2d939c;">{{local "booking.cancel_and_return"}}</a>\r\n    </p>\r\n</div>\r\n\r\n<div id="choose-rate-wrapper">\r\n    <!-- Step01 CHOOSE YOUR RATE INSERT INTO HERE -->\r\n</div>\r\n\r\n<div id="room-options-wrapper">\r\n    <!-- Step02 CHOOSE YOUR ROOM OPTIONS INTO HERE -->\r\n</div>\r\n\r\n<div id="stay-options-wrapper">\r\n    <!-- Step03 CHOOSE STAY OPTIONS INTO HERE -->\r\n</div>\r\n\r\n<div id="submit-booking-wrapper">\r\n    <!-- SUBMIT BOOKING INTO HERE -->\r\n</div>';
},{}],365:[function(e,t,i){t.exports='<div class="collapsestrip">\r\n    <div class="collapse-button"><span>{{local "booking.open"}}</span><i class="plus"></i></div>\r\n    <div class="collapse-content">\r\n        <h5>\r\n            <span class="mobile-hidden">{{local "booking.step"}} </span> 04\r\n        </h5>\r\n        <p class="mobile-hidden">\r\n            <span data-rate="title">{{local "booking.choose_stay_opt"}}</span>\r\n            <span class="small"> ({{local "booking.optional"}})</span>\r\n        </p>\r\n        <p class="desktop-hidden">\r\n            <span data-rate="title">{{local "booking.stay_opt"}}</span>\r\n            <span class="small"> ({{local "booking.optional"}})</span>\r\n        </p>\r\n    </div>\r\n</div>\r\n\r\n<div id="no-add-on-tips" style="display: none; height: 100px; line-height: 100px; text-align: center; font-size: 3rem;">\r\n    {{local "booking.no_stay_option"}}\r\n</div>\r\n<div class="booking-options stay expand-content clearfix" style="position:relative">\r\n    <div class="loading-block">\r\n        <p class="loading-gif"></p>\r\n    </div>\r\n    {{#each this.services}}\r\n        <div data-key="{{ this.key }}"  style="display: none;">\r\n            <h5 class="item-title">{{ this.inventorycode }}</h5>\r\n            <div class="description">\r\n                <p>{{ desc }}</p>\r\n                <a class="more" href="javascript:void(0);" data-opt="more">{{local "general.read_more"}}</a>\r\n            </div>\r\n            <p class="price"><em> + {{ ratecurrencymark }}{{#price-format displayrate }}{{/price-format}}</em><span>{{ pricingtype }}</span></p>\r\n            <div class="count" id="{{ this.key }}">\r\n            </div>\r\n        </div>\r\n    {{/each}}\r\n    <div class="viewmore expand-content" style="display:none; background-color: #dcd7d2;">\r\n        <a class="wgt-sqbutton-dark" data-opt="view-more">{{local "booking.view_more_stay_options"}}</a>\r\n    </div>\r\n</div>\r\n'},{}],364:[function(e,t,i){t.exports='<ul class="booking-options room clearfix expand-content" id="view-type-wrapper">\r\n    {{#each viewDate}}\r\n        {{#if this.roomview}}\r\n            <li {{#if this.active}} class="checked" {{/if}} id="{{ this.uuid }}" data-view data-ratecode="{{ this.ratecode }}" data-roomtypecode="{{ this.roomtypecode }}">\r\n                <div class="content">\r\n                    <span class="{{ this.roomviewicon }}"></span>\r\n                    <div>\r\n                        <h6 class="name">{{ this.roomview }}</h6>\r\n                        {{#if this.differPrice}}\r\n                        <div class="price"><b>+{{ this.currencymark}} {{#price-format this.differPrice}}{{/price-format}}</b><span>{{local "general.stay"}}</span></div>\r\n                        {{/if}}\r\n                    </div>\r\n                </div>\r\n                <label class="checked-label"><span class="icon-icon_I009"></span></label>\r\n                {{#more-than this.roomleft 0}}\r\n                    <label class="option-label"><span class="label-text bg-blue">{{ this.roomleft }} {{local "booking.rooms_left"}}</span></label>\r\n                {{/more-than}}\r\n            </li>\r\n        {{/if}}\r\n    {{/each}}\r\n\r\n    {{#if suiteDate}}\r\n        <li data-upgrade id="{{ suiteDate.uuid }}" {{#if suiteDate.active}} class="checked" {{/if}}>\r\n            <div class="content">\r\n                <span class="{{ suiteDate.categoryicon }}"></span>\r\n                <div>\r\n                    <h6 class="name">{{ suiteDate.categoryname }}</h6>\r\n                    {{#if suiteDate.differPrice}}\r\n                        <div class="price"><b>+{{ suiteDate.currencymark }} {{#price-format suiteDate.differPrice}}{{/price-format}}</b><span>{{local "general.stay"}}</span></div>\r\n                    {{/if}}\r\n                </div>\r\n            </div>\r\n            <label class="checked-label"><span class="icon-icon_I009"></span></label>\r\n            <label class="option-label"><span class="label-text bg-blue">{{local "booking.upgrade"}}</span></label>\r\n        </li>\r\n    {{/if}}\r\n\r\n</ul>'},{}],363:[function(e,t,i){t.exports='<div class="collapsestrip">\r\n  <div class="collapse-button"><span>{{local "booking.open"}}</span><i class="plus"></i></div>\r\n  <div class="collapse-content">\r\n    <h5><span class="mobile-hidden">{{local "booking.step"}}</span> 02</h5>\r\n    <p class="mobile-hidden" data-rate="title">{{local "booking.choose_rate"}}</p>\r\n    <p class="desktop-hidden" data-rate="title">{{local "booking.choose_rate"}}</p>\r\n  </div>\r\n</div>\r\n<div class="expand-content">\r\n  <ul class="booking-options rate">\r\n    {{#each data}}\r\n      <li class="rate-item" data-ratecode="{{ ratecode }}" data-ratename="{{ ratename }}">\r\n        <div class="label-popup lable-full" style="z-index:3">\r\n          <h6 class="popup-title">\r\n            <span>{{ this.ratename }}</span>\r\n            <a href="javascript:;" class="popup-close"><span class="icon-icon_B026 icon-type-back"></span></a>\r\n          </h6>\r\n          <div class="content" style="width: 100%;height:calc(100% - 2.8rem)">\r\n            <p>{{{ this.tip }}}</p>\r\n          </div>\r\n        </div>\r\n        <div style="background-image: url(\'{{ image }}\')" class="rate-image clearfix" data-ratecode="{{ this.ratecode }}">\r\n          <div class="rate-image-content">\r\n            <div class="main">\r\n              <b class="price">{{ currencymark }}{{#price-format avgdisplaymemberrate }}{{/price-format}}</b>\r\n              <b class="price sub-price">{{local "Property.room_section_night"}}</b>\r\n                    <!--{{#if ../inLoyaltyProgram}}-->\r\n                    <!--{{#if this.memberprice}}-->\r\n                <!--<p>{{ this.loyaltytip }}</p>-->\r\n                      <!--{{/if}}-->\r\n                    <!--{{/if}}-->\r\n              {{#if avgdisplaymemberratesaved}}\r\n                {{#if ../../_islogin}}\r\n                  <p>{{ local "booking.as_a_member_you_saved" currencymark avgdisplaymemberratesaved }}</p>\r\n                {{else}}\r\n                  <p>{{ local "booking.loyalty_members_save"  currencymark avgdisplaymemberratesaved }}</p>\r\n                {{/if}}\r\n              {{/if}}\r\n            </div>\r\n            {{#if ../inLoyaltyProgram}}\r\n              {{#if this.memberprice}}\r\n                <label class="price-original">{{ currencymark }}{{#price-format avgdisplayrate }}{{/price-format}}</label>\r\n              {{/if}}\r\n            {{/if}}\r\n          </div>\r\n          <div class="booking-holder"></div>\r\n        </div>\r\n        <div class="rate-content">\r\n          <div>\r\n              <h5>{{ this.ratename }}</h5>\r\n              <div>\r\n                  {{#if this.tip}}\r\n                      <i class="rate-hover orign" data-opt="click">\r\n                          <span class="icon-icon_I011"></span>\r\n                          <div class="label-popup">\r\n                              <h5 class="title">{{ this.tiptitle }}</h5>\r\n                              <a class="close" data-opt="close"><span class="icon-icon_B017"></span></a>\r\n                              <div class="content">\r\n                                  <p>{{{ this.tip }}}</p>\r\n                              </div>\r\n                          </div>\r\n                      </i>\r\n                  {{/if}}\r\n              </div>\r\n              {{#if this.desc}}\r\n                  <div class="rate-desc">\r\n                      <p class="rate-desc-title">\r\n                          {{ this.desc }}\r\n                      </p>\r\n                  </div>\r\n              {{/if}}\r\n            {{#if this.roomstay.RatePlan.policymatchcopy}}\r\n              <i class="rate-hover" data-opt="click">\r\n                <p class="rate-desc-title">\r\n                  {{this.roomstay.RatePlan.policymatchcopy}}\r\n                </p>\r\n                <div class="label-popup">\r\n                  <h6 class="popup-title">\r\n                    <span>{{local "policy.policy"}}</span>\r\n                  </h6>\r\n                  <div class="content" style="width: 26rem;width: 100%\\0">\r\n                    <h6 class="policy-title">{{local "policy.Guarantee_Policy"}}</h6>\r\n                    <p class="policy-content">{{this.roomstay.RatePlan.guaranteeDesc}}</p>\r\n                    <h6 class="policy-title">{{local "policy.Cancellation_Policy"}}</h6>\r\n                    <p class="policy-content">{{this.roomstay.CancelPenalty.PenaltyDescription}}</p>\r\n                  </div>\r\n                </div>\r\n              </i>\r\n            {{else}}\r\n              {{#if this.roomstay.CancelPenalty.PenaltyDescription}}\r\n                <i class="rate-hover">\r\n                  <p class="rate-desc-title">\r\n                    {{local "policy.refer_to_terms_condition_for_full_policy"}}\r\n                  </p>\r\n                  <div class="label-popup">\r\n                    <h6 class="popup-title">\r\n                      <span>{{local "policy.policy"}}</span>\r\n                    </h6>\r\n                    <div class="content" style="width: 26rem;width: 100%\\0">\r\n                      <h6 class="policy-title">{{local "policy.Guarantee_Policy"}}</h6>\r\n                      <p class="policy-content">{{this.roomstay.RatePlan.guaranteeDesc}}</p>\r\n                      <h6 class="policy-title">{{local "policy.Cancellation_Policy"}}</h6>\r\n                      <p class="policy-content">{{this.roomstay.CancelPenalty.PenaltyDescription}}</p>\r\n                    </div>\r\n                  </div>\r\n                </i>\r\n              {{else}}\r\n                <i class="rate-hover rate-empty-title">\r\n                  <p class="rate-desc-title">\r\n                    {{local "policy.refer_to_terms_condition_for_full_policy"}}\r\n                  </p>\r\n                </i>\r\n              {{/if}}\r\n            {{/if}}\r\n\r\n          </div>\r\n          <!-- <h5>{{ this.ratename }}</h5> -->\r\n          <!-- <p class="description">{{ this.desc }}</p> -->\r\n          <div><a class="wgt-sqbutton-dark" data-opt="select" data-ratecode="{{ this.ratecode }}" data-auto-set-select="{{ this.promocode }}" data-auto-set-select-group="{{ this.groupcode }}">{{local "booking.select_and_customize"}}</a></div>\r\n        </div>\r\n        <label class="checked-label"><span class="icon-icon_I009 bg-red"></span></label>\r\n\r\n        {{#equal this.priceratio.status "4"}}\r\n          <label class="option-label hover" data-opt="click"><span class="label-text bg-red">{{local "booking.same_as"}}</span><span class="icon-icon_B016 bg-red"></span>\r\n            <div class="label-popup">\r\n              <h5 class="title booking-flow-label-list">\r\n                  {{#if this.priceratio.title}}{{this.priceratio.title}}{{else}}{{local "booking.price_match_guarantee"}}{{/if}}\r\n              </h5>\r\n              <a class="close"><span class="icon-icon_B017"></span></a>\r\n              <div class="content booking-flow-label-list">\r\n                <ul class="website-list">\r\n                  {{#each this.priceratio.list}}\r\n                    <li>\r\n                      {{# if this.price}}\r\n                        <span class="red">{{this.currency }}{{#price-format this.price}}{{/price-format}}</span>\r\n                      {{else}}\r\n                        <span class="red">{{this.currency }}{{#price-format this.originprice}}{{/price-format}}</span>\r\n                      {{/if}}\r\n                      <span class="red" style="font-size: 1.2rem;min-width: 20%;"> {{local "Property.room_section_night"}}</span>\r\n                      <p>{{ this.website }}</p>\r\n                      {{#if this.sameas}}<span class="icon-icon_I009"></span>{{/if}}\r\n                    </li>\r\n                  {{/each}}\r\n                </ul>\r\n                <a target="_blank" href="{{this.conditionUrl }}">{{local "booking.view_terms_and_conditions"}}</a>\r\n              </div>\r\n            </div>\r\n          </label>\r\n        {{/equal}}\r\n\r\n        {{#equal this.priceratio.status "3"}}\r\n          <label class="option-label hover" data-opt="click">\r\n            <span class="label-text bg-red">{{local "booking.price_matched"}}</span><span class="icon-icon_B016 bg-red"></span>\r\n            <div class="label-popup">\r\n              <h5 class="title booking-flow-label-list">{{#if this.priceratio.title}}{{this.priceratio.title}}{{else}}{{local "booking.price_match_guarantee"}}{{/if}}</h5><a class="close"><span class="icon-icon_B017"></span></a>\r\n              <div class="content booking-flow-label-list">\r\n                <ul class="website-list">\r\n                  {{#each this.priceratio.list}}\r\n                    <li>\r\n                      {{# if this.price}}\r\n                        <span class="red">{{this.currency }}{{#price-format this.price}}{{/price-format}}</span>\r\n                      {{else}}\r\n                        <span class="red">{{this.currency }}{{#price-format this.originprice}}{{/price-format}}</span>\r\n                      {{/if}}\r\n                      <span class="red" style="font-size: 1.2rem;min-width: 20%;"> {{local "Property.room_section_night"}}</span>\r\n                      <p>{{ this.website }}</p>\r\n                      {{#if this.matched}}<span class="icon-icon_I009"></span>{{/if}}\r\n                    </li>\r\n                  {{/each}}\r\n                </ul>\r\n                <a target="_blank" href="{{this.conditionUrl }}">{{local "booking.view_terms_and_conditions"}}</a>\r\n              </div>\r\n            </div>\r\n          </label>\r\n        {{/equal}}\r\n\r\n        {{#equal this.priceratio.status "2"}}\r\n          <label class="option-label hover" data-opt="click"><span class="label-text bg-red">{{local "booking.lowest_around"}}</span><span class="icon-icon_B016 bg-red"></span>\r\n            <div class="label-popup">\r\n              <h5 class="title booking-flow-label-list">{{#if this.priceratio.title}}{{this.priceratio.title}}{{else}}{{local "booking.price_match_guarantee"}}{{/if}}</h5>\r\n              <a class="close"><span class="icon-icon_B017"></span></a>\r\n              <div class="content booking-flow-label-list">\r\n                <ul class="website-list">\r\n                  {{#each this.priceratio.list}}\r\n                    <li>\r\n                      {{# if this.price}}\r\n                        <span class="red">{{this.currency }}{{#price-format this.price}}{{/price-format}}</span>\r\n                      {{else}}\r\n                        <span class="red">{{this.currency }}{{#price-format this.originprice}}{{/price-format}}</span>\r\n                      {{/if}}\r\n                      <span class="red" style="font-size: 1.2rem;min-width: 20%;"> {{local "Property.room_section_night"}}</span>\r\n                      <p>{{ this.website }}</p>\r\n                      {{#if this.matched}}<span class="icon-icon_I009"></span>{{/if}}\r\n                    </li>\r\n                  {{/each}}\r\n                </ul>\r\n                <a target="_blank" href="{{this.conditionUrl }}">{{local "booking.view_terms_and_conditions"}}</a>\r\n              </div>\r\n            </div>\r\n          </label>\r\n        {{/equal}}\r\n      </li>\r\n    {{/each}}\r\n  </ul>\r\n  <div class="viewmore"><a class="wgt-sqbutton-dark" data-opt="more">{{local "booking.view_more_rates"}}</a></div>\r\n</div>'},{}],362:[function(e,t,i){t.exports='<div class="collapsestrip">\r\n    <div class="collapse-button"><span>{{local "booking.collapse"}}</span><i class="minus"></i></div>\r\n    <div class="collapse-content">\r\n        <h5>\r\n            <span class="mobile-hidden">{{local "booking.step"}}</span> 03\r\n        </h5>\r\n        <p class="mobile-hidden" data-rate="title">{{local "booking.choose_room_opt"}}</p>\r\n        <p class="desktop-hidden" data-rate="title">{{local "booking.choose_room_opt"}}</p>\r\n    </div>\r\n</div>\r\n<ul class="booking-options room clearfix expand-content" id="bed-type-wrapper">\r\n    {{#each bedData}}\r\n        <li data-bedtype="{{@key}}" data-ratecode=""  data-roomtypecode="">\r\n            <div class="content">\r\n                <span class="icon-icon_I003" data-tag="icon"></span>\r\n                <div>\r\n                    <h6 class="name">{{@key}}</h6>\r\n                </div>\r\n            </div>\r\n            <label class="checked-label"><span class="icon-icon_I009"></span></label>\r\n            <label class="option-label"><span class="label-text bg-blue"><i data-tag="left" style="color:#fff;"></i></span></label>\r\n        </li>\r\n    {{/each}}\r\n</ul>\r\n<div id="view-type-wrapper"></div>'},{}],360:[function(e,t,i){t.exports=e("sassify")('.bookingflow .expand-on .expand-content {   display: block; }  .bookingflow .expand-on .collapse-button {   visibility: visible; }  .bookingflow .expand-off .expand-content {   display: none; }  .bookingflow .expand-off .collapse-button {   visibility: visible; }  .bookingflow .collapse_btn-hide .collapse-button {   visibility: hidden; }  .bookingflow #choose-rate-wrapper .booking-options li.rate-item {   display: none; }  .bookingflow #choose-rate-wrapper .viewmore {   display: none; }  .shoppingdetail {   position: relative; }   .shoppingdetail .tpl-hero-shopheader {     height: calc(100vh - 19rem - 80px); }   .shoppingdetail #back-to-booking {     position: absolute;     top: 1%;     right: 3%;     cursor: pointer;     z-index: 2; }     @media (max-width: 768px) {       .shoppingdetail #back-to-booking {         top: calc(1% + 40px); } }  html[dir="rtl"] .shoppingdetail #back-to-booking {   right: inherit;   left: 3%; }  #submit-booking-wrapper {   height: 80px; }   #submit-booking-wrapper .bookingflow-stickybar {     margin: 0 0 0 -100px; }     #submit-booking-wrapper .bookingflow-stickybar.fixed {       margin-left: 0 !important;       position: fixed;       bottom: 0;       left: 0;       width: 100%;       margin-bottom: 0;       z-index: 4; }   #submit-booking-wrapper .loading-hide .loading-block {     display: none; }   #submit-booking-wrapper .loading-show .loading-block {     display: block; }  @media screen and (max-width: 768px) {   #submit-booking-wrapper .bookingflow-stickybar {     margin: 0 0 0 0; } }  ')},{sassify:36}],359:[function(e,t,i){t.exports=e("sassify")(".bookingflow #stay-options-wrapper .viewmore {   border-bottom: solid 1px #7f7f7f; }  .shoppingdetail .tpl-hero-shopheader {   height: calc(100vh - 19rem - 80px); }  ")},{sassify:36}],2142:[function(e,t,i){(function(i){var n=(e("underscore"),"undefined"!=typeof window?window.jQuery:"undefined"!=typeof i?i.jQuery:null,e("backbone"),e("backbone.marionette")),c=e("./usp-bar-model"),l=n.ItemView.extend({el:".tpl-static-banner ",template:Handlebars.compile(e("./usp-bar-template.hbs")),model:new c,initialize:function(){var e=this;this.model.on("change",function(){e.render()})},onRender:function(){}});t.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./usp-bar-model":2140,"./usp-bar-template.hbs":2141,backbone:8,"backbone.marionette":6,underscore:42}],2141:[function(e,t,i){t.exports='<div class="banner-container">\r\n    <ul>\r\n        {{#each uspBarInfo}}\r\n            <li>\r\n                <div class="banner-item-wrapper">\r\n                    <div class="banner-icon"><span class="{{this.imageUrl}}"></span></div>\r\n                    <div class="banner-text">{{this.title}}</div>\r\n                </div>\r\n            </li>\r\n        {{/each}}\r\n    </ul>\r\n</div>\r\n'},{}],2140:[function(e,t,i){var n=(e("underscore"),e("../../../config/host")),c=(e("../ui/util"),e("backbone"));t.exports=c.Model.extend({defaults:{baseUrl:n.getURL("api/book2/getuspbarinfo")},initialize:function(){}})},{"../../../config/host":45,"../ui/util":2122,backbone:8,underscore:42}],553:[function(e,t,i){var n=e("../../../../config/host");t.exports={store:function(e){return jQuery.post(n.getURL("mapi","account/login"),e,"json").then(function(e){return e},function(e){var t=e.responseJSON;if(!t)try{t=JSON.parse(e.responseText||"{}")}catch(i){}return t&&t.msg||t&&t[0]&&t[0].msg||i18n.t("general.network_error")})},newly:function(e){return jQuery.post(n.getURL("api","account/signup"),e,"json").then(function(e){if(e.success)return e;var t=jQuery.Deferred();return t.reject(e),t.promise()},function(e){var t=e.responseJSON;if(!t)try{t=JSON.parse(e.responseText||"{}")}catch(i){}return{success:!1,message:t&&t.msg||t&&t[0]&&t[0].msg||i18n.t("general.network_error")}})}}},{"../../../../config/host":45}],335:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs"))})},{"./template.hbs":334,"backbone.marionette":6}],334:[function(e,t,i){t.exports='<div class="x-mask x-mask-white">\r\n    <div class="book2-loading-ins x-al-c">\r\n        <div><img width="150" src="/assets/img/card/Preloader3.2_RedIcon_300px.gif" alt="{{local "form.loading"}}"></div>\r\n        <div class="x-fs-16">{{local "booking.hold_on_your_results"}}</div>\r\n    </div>\r\n</div>'},{}],332:[function(e,t,i){t.exports='<div class="x-mask x-mask-black">\r\n    <div class="x-al-c x-nowrap book2-vertical">\r\n        <div class="book2-lampbox-container x-al-l x-normal mm2-ig-container">\r\n            <div class="mm2-rup-header-container">\r\n                <h3 class="mm2-rup-header">{{local \'rup.instant_redemption\'}}</h3>\r\n                <span class="icon-icon_B017" data-item="cancel"></span>\r\n            </div>\r\n            <div class="mm2-rup-content-container">\r\n                <div class="x-scroll">\r\n                    <div class="x-scroll-body" style="width: 100%">\r\n                        <div class="mm2-ig-content">\r\n                            <p class="mm2-ig-caption">\r\n                                {{local \'rup.be_delighted\'}}\r\n                            </p>\r\n                            <div class="mm2-ig-list">\r\n                                {{#each items}}\r\n                                    <div class="mm2-ig-item {{#if disabled}}disabled{{/if}}">\r\n                                        <span class="mm2-ig-checkbox {{#if checked}}checked{{/if}}" data-item="check" data-id="{{id}}"></span>\r\n                                        <div class="mm2-ig-section">\r\n                                            <div class="mm2-ig-item-name">{{title}}</div>\r\n                                            <div class="mm2-ig-item-caption">{{description}}</div>\r\n                                        </div>\r\n                                        <div class="mm2-ig-price-block">\r\n                                            {{num-format requiredPoints}} pts\r\n                                        </div>\r\n                                    </div>\r\n                                {{/each}}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="x-runner">\r\n                    <div class="x-slider"></div>\r\n                </div>\r\n            </div>\r\n            <div class="mm2-rup-content-bottom-container">\r\n                <span class="mm2-rup-content-bottom-link" data-item="cancel">{{local \'general.cancel\'}}</span>\r\n                <span class="mm2-gold-button" data-item="confirm">{{local \'general.confirm\'}}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],545:[function(e,t,i){var n=e("backbone"),c=e("../../ui/validator"),l=e("../../../../data/country.json"),a=e("underscore");t.exports=n.Model.extend({defaults:{first_name:"",last_name:"",email:"",aa_member_no:"",IATANumber:"",guest_first_name:"",guest_last_name:"",birthday:"",new_birthday:"",new_password:"",title:"",gender:"",phone:"",country:"",address:"",city:"",state:"",postal:"",rewardsmember:"",rewardcategoryid:"",rewardsmyno:"",rewardsbookercompanyname:"",rewardsbookerno:"",group:"",affiliates:"",tick:""},initialize:function(){var e=jQuery.cookie("client_country"),t=a.find(l,function(t){return t.key.indexOf("("+e+")")>-1});!this.get("country")&&t&&this.set("country",t.key)},validation:{birthday:function(e){if(this.checkoutformdata&&this.checkoutformdata.length>0)for(var t=0;t<this.checkoutformdata.length;t++)if("dob"==this.checkoutformdata[t].name)return this.checkoutformdata[t].required?c.validators.date(e,18):e?c.validators.date(e,18):void 0},title:function(e){return e?void 0:this.__ifRequired("title_gender")},gender:function(e){return e?void 0:this.__ifRequired("title_gender")},phone:function(e){var t=/^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/;return e&&t.exec(e)?void 0:this.__ifRequired("phone",e,t)},country:function(e){return e?void 0:this.__ifRequired("address")},address:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")?void 0:this.__ifRequired("address")},city:function(e){return e?void 0:this.__ifRequired("address")},postal:function(e){return e?void 0:this.__ifRequired("address")},first_name:{required:!0,pattern:c.latinRegex3,maxLength:254},last_name:{required:!0,pattern:c.latinRegex3,maxLength:254},email:{required:!0,pattern:"email"},aa_member_no:{required:!0},IATANumber:{required:!0,pattern:c.latinRegex3,maxLength:254},guest_first_name:{required:!0,pattern:c.latinRegex3,maxLength:254},guest_last_name:{required:!0,pattern:c.latinRegex3,maxLength:254},tick:{required:!0},new_birthday:function(e){return c.validators.date(e,18,!0)},new_password:function(e){var t=!e&&"null"||e.length<8&&"length"||!/[0-9]/.test(e)&&"number"||!(/[a-z]/i.test(e)&&/[0-9]/.test(e))&&"letters_numbers"||!c.patterns.keyboard.test(e)&&"must_contain";return t&&this.trigger("password:error",t),t},rewardcategoryid:{required:!0},rewardsmember:{},rewardsbookercompanyname:{required:!0},rewardsbookerno:{required:!0}},__ifRequired:function(e,t,i){var n=!1;if(this.checkoutformdata.length>0)for(var c=0;c<this.checkoutformdata.length;c++)if(this.checkoutformdata[c].name==e){n=this.checkoutformdata[c].required;break}if(n)return t&&i?i.exec(t)?{required:n}:i18n.t("form_error.invalid_phone"):{required:n}}})},{"../../../../data/country.json":47,"../../ui/validator":2123,backbone:8,underscore:42}],316:[function(e,t,i){var n=e("backbone"),c=e("backbone.marionette"),l=e("../../02-section/03-content/03-view-by-room/child/02-stay/child/view"),a=e("../../02-section/03-content/03-view-by-room/child/02-stay/empty/view"),o=e("../../common/scroll"),s=e("../../common/short");
t.exports=c.CompositeView.extend({childView:l,emptyView:a,childViewContainer:"[data-item='list']",template:Handlebars.compile(e("./template.hbs")),ui:{close:"[data-item='close']",lampbox:".book2-lampbox-container"},events:{"click @ui.close":function(e){e.stopPropagation(),this.__saveAddOnData&&this.__saveAddOnData()||this.__closeLightBox()},click:function(e){this.ui.lampbox.has(e.target).length||this.__saveAddOnData&&this.__saveAddOnData()||this.__closeLightBox()},mousewheel:function(e){e.preventDefault()},DOMMouseScroll:function(e){e.preventDefault()}},childViewOptions:function(e){return{model:e,rootState:this.options.rootState}},serializeData:function(){var e=this;return{multiple:parseInt(this.options.rootState.getParam().rooms)>1,noAddon:!e.collection.length}},initialize:function(){var e=this,t=e.model.toJSON(),i=e.options.rootState,c=i.getStays({roomtypecode:t.roomtypecode,ratecode:t.ratecode,roomid:t.roomid});e.__renderDeferred=jQuery.Deferred(),e.collection=new n.Collection(c),e.listenTo(i,"lightBoxAnimate",e.lightBoxAnimate),o.autoCreate(this,{lock:!0}),s.autoCreate(this)},onRender:function(){this.__renderDeferred.resolve()},lightBoxAnimate:function(e){return this.__renderDeferred.then(jQuery.proxy(this.__lightBoxAnimate,this,e))},__lightBoxAnimate:function(e){if(e){var t=this,i=t.ui.lampbox.width(),n=t.ui.lampbox.height(),c=t.ui.lampbox.offset(),l=jQuery(window).scrollTop(),a=e.top-l,o=e.left,s=c.top-l,r=c.left;t.__prevAnimateObj={position:"absolute",left:o,top:a,opacity:0,height:0,width:0},t.__nextAnimateObj={position:"absolute",left:r,top:s,opacity:1,height:n,width:i},t.ui.lampbox.css(t.__prevAnimateObj).animate(t.__nextAnimateObj,300,function(){t.ui.lampbox.removeAttr("style")})}},__closeLightBox:function(e){var t=this;t.__prevAnimateObj&&t.__nextAnimateObj?t.ui.lampbox.css(t.__nextAnimateObj).animate(t.__prevAnimateObj,300,function(){e&&e.resolve(),t.destroy()}):(e&&e.resolve(),t.destroy())}})},{"../../02-section/03-content/03-view-by-room/child/02-stay/child/view":254,"../../02-section/03-content/03-view-by-room/child/02-stay/empty/view":255,"../../common/scroll":349,"../../common/short":350,"./template.hbs":315,backbone:8,"backbone.marionette":6}],315:[function(e,t,i){t.exports='<div class="x-mask x-mask-black">\r\n    <div class="x-al-c x-nowrap book2-vertical">\r\n        <div class="book2-lampbox-container x-al-l x-normal">\r\n            <div class="book2-lampbox-head {{#if noAddon}}no-boder{{/if}}">\r\n                <div class="x-flex x-fs-00">\r\n                    <!--(x-upper)style="text-transform: uppercase;"-->\r\n                    <span class="x-cell x-al-l x-di-v-m x-fs-28 x-ff-vb">\r\n                        {{#if noAddon}}\r\n                            {{local "booking.no_addons_available"}}\r\n                        {{else}}\r\n                            {{local "booking.add_more_value"}}\r\n                        {{/if}}\r\n                    </span>\r\n                    <span class="x-cell x-al-r x-di-v-m x-nowrap">\r\n                        <span class="x-di x-di-v-m x-fs-14 x-fc-azure x-pointer x-upper x-ff-m7 x-none" data-item="close">\r\n                            {{#if forCheckout}}\r\n                                {{local "checkout.continue_with_checkout"}}\r\n                            {{else}}\r\n                                {{local "booking.continue_with_booking"}}\r\n                            {{/if}}\r\n                        </span>\r\n                        <span class="x-di x-di-v-m x-fs-24 x-fc-azure x-pointer icon-keep-right x-ml-04" data-item="close"></span>\r\n                        <!--<span class="x-di x-di-v-m x-pointer icon-icon_B017" data-item="close"></span>-->\r\n                    </span>\r\n                </div>\r\n                {{#if multiple}}\r\n                    {{#if noAddon}}\r\n                        <div class="x-ff-sm x-fs-13 x-lh-16" style="margin-top: -15px;">{{local "booking.no_available_addon"}}</div>\r\n                    {{else}}\r\n                        <div class="x-pb-20 x-ff-sm x-fs-13 x-lh-16" style="margin-top: -15px;">{{local "booking.selected_addons_to_each_room"}}</div>\r\n                    {{/if}}\r\n                {{else}}\r\n                    {{#if noAddon}}\r\n                        <div class="x-ff-sm x-fs-13 x-lh-16" style="margin-top: -15px;">{{local "booking.no_available_addon"}}</div>\r\n                    {{/if}}\r\n                {{/if}}\r\n            </div>\r\n            <div class="book2-lampbox-body">\r\n                <div class="x-scroll">\r\n                    <div class="x-scroll-body">\r\n                        <div class="x-pl-20 x-pr-20 x-pb-20">\r\n                            <div class="x-pl-10 x-pr-10" data-item="list"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="x-runner">\r\n                    <div class="x-slider"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],314:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../common/scroll"),o=e("./child/view"),s=0,r=l.CompositeView.extend({childView:o,template:Handlebars.compile(e("./template.hbs")),childViewContainer:"[data-item='list']",ui:{scroll:".x-scroll",close:"[data-item='close']",lampbox:".book2-lampbox-container"},events:{"click @ui.close":function(e){e.stopPropagation(),this.__closeLightBox()},click:function(e){this.ui.lampbox.has(e.target).length||this.__closeLightBox()},mousewheel:function(e){e.preventDefault()},DOMMouseScroll:function(e){e.preventDefault()}},childEvents:{"select:room":function(e,t){var i=this;s=i.ui.scroll.scrollTop(),i.model.set(t),i.initialize(),i.render(),i.ui.scroll.scrollTop(s),setTimeout(function(){i.__closeLightBox()},1e3)}},childViewOptions:function(e){var t=this;return{model:e,rootState:t.options.rootState}},initialize:function(){var e=this,t=e.model.toJSON(),i=e.options.rootState,n=i.getAllah({ratecode:t.ratecode}),l=i.getRates({ratecode:t.ratecode});e.__renderDeferred=jQuery.Deferred(),e.listenTo(i,"lightBoxAnimate",e.lightBoxAnimate),e.collection=new c.Collection(e.getUniqueDataGroupByRoom(l,{ratecode:t.ratecode,bedtype:n?n.bedtype:t.bedtype})),a.autoCreate(this,{lock:!0})},onShow:function(){var e=this.$(".x-highlight-delta").has(".x-radio.checked");if(e.length){var t=e.offset().top,i=this.ui.scroll.offset().top+77;this.ui.scroll.scrollTop(Math.max(0,t-i))}},onRender:function(){this.__renderDeferred.resolve()},lightBoxAnimate:function(e){return this.__renderDeferred.then(jQuery.proxy(this.__lightBoxAnimate,this,e))},__lightBoxAnimate:function(e){if(e){var t=this,i=t.ui.lampbox.width(),n=t.ui.lampbox.height(),c=t.ui.lampbox.offset(),l=jQuery(window).scrollTop(),a=e.top-l,o=e.left,s=c.top-l,r=c.left;t.__prevAnimateObj={position:"absolute",left:o,top:a,opacity:0,height:0,width:0},t.__nextAnimateObj={position:"absolute",left:r,top:s,opacity:1,height:n,width:i},t.ui.lampbox.css(t.__prevAnimateObj).animate(t.__nextAnimateObj,300,function(){t.ui.lampbox.removeAttr("style")})}},__closeLightBox:function(e){var t=this;t.__prevAnimateObj&&t.__nextAnimateObj?t.ui.lampbox.css(t.__nextAnimateObj).animate(t.__prevAnimateObj,300,function(){e&&e.resolve(),t.destroy()}):(e&&e.resolve(),t.destroy())}});r.prototype.getUniqueDataGroupByRoom=function(e,t){return n.map(n.uniq(n.map(e,function(e){return e.categoryid})),function(e){return n.assign({categoryid:e},t)})},t.exports=r},{"../../common/scroll":349,"./child/view":312,"./template.hbs":313,backbone:8,"backbone.marionette":6,underscore:42}],313:[function(e,t,i){t.exports='<div class="x-mask x-mask-black">\r\n    <div class="x-al-c x-nowrap book2-vertical">\r\n        <div class="book2-lampbox-container x-al-l x-normal">\r\n            <div class="book2-lampbox-head">\r\n                <div class="x-flex x-fs-00">\r\n                    <!--([x-upper] style: text-transform: uppercase;)-->\r\n                    <span class="x-cell x-al-l x-di-v-m x-fs-28 x-ff-vb">\r\n                        {{#if forCheckout}}\r\n                            {{local "booking.select_your_room"}}\r\n                        {{else}}\r\n                            {{local "booking.view_and_compare_all_rooms"}}\r\n                        {{/if}}\r\n                    </span>\r\n                    <span class="x-cell x-al-r x-di-v-m x-nowrap">\r\n                        <span class="x-di x-di-v-m x-fs-14 x-fc-azure x-pointer x-upper x-ff-m7 x-none" data-item="close">\r\n                            {{#if forCheckout}}\r\n                                {{local "checkout.continue_with_checkout"}}\r\n                            {{else}}\r\n                                {{local "booking.continue_with_booking"}}\r\n                            {{/if}}\r\n                        </span>\r\n                        <span class="x-di x-di-v-m x-fs-24 x-fc-azure x-pointer icon-keep-right x-ml-04" data-item="close"></span>\r\n                    <!--<span class="x-di x-di-v-m x-pointer icon-icon_B017" data-item="close"></span>-->\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="book2-lampbox-body">\r\n                <div class="x-scroll">\r\n                    <div class="x-scroll-body">\r\n                        <div class="x-pl-20 x-pr-20 x-pb-20">\r\n                            <div class="x-pl-10 x-pr-10" data-item="list"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="x-runner">\r\n                    <div class="x-slider"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],312:[function(e,t,i){var n=e("underscore"),c=e("../../../02-section/03-content/04-view-by-rate/child/03-room/child/view"),l=e("../../../06-popping/view"),a=e("../../../common/popup"),o=0;t.exports=c.extend({events:n.assign({},c.prototype.events,{"mouseenter @ui.member":function(e){e.stopPropagation(),a.addListener(this,function(){clearTimeout(o)});var t=this;a.addPopupTip(this,l.MEMBER,this.getMember(),jQuery(e.currentTarget).prev(),!0,!0).on("click","[data-item='sign']",function(){t.options.rootState.trigger("registerPayment")})},"mouseleave @ui.member":function(e){e.stopPropagation(),o=setTimeout(function(){a.delPopupTip()},1e3)}})})},{"../../../02-section/03-content/04-view-by-rate/child/03-room/child/view":273,"../../../06-popping/view":343,"../../../common/popup":348,underscore:42}],311:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../common/scroll"),o=e("./child/view"),s=0,r=l.CompositeView.extend({childView:o,template:Handlebars.compile(e("./template.hbs")),childViewContainer:"[data-item='list']",ui:{scroll:".x-scroll",close:"[data-item='close']",lampbox:".book2-lampbox-container"},events:{"click @ui.close":function(e){e.stopPropagation(),this.__closeLightBox()},click:function(e){this.ui.lampbox.has(e.target).length||this.__closeLightBox()},mousewheel:function(e){e.preventDefault()},DOMMouseScroll:function(e){e.preventDefault()}},childEvents:{"select:rate":function(e,t){var i=this;s=i.ui.scroll.scrollTop(),i.model.set(t),i.initialize(),i.render(),i.ui.scroll.scrollTop(s),setTimeout(function(){i.__closeLightBox()},1e3)}},childViewOptions:function(e){var t=this;return{model:e,expandAll:e.get("roomtypecode")===t.model.get("roomtypecode")&&e.get("ratecode")===t.model.get("ratecode")&&e.get("roomid")===t.model.get("roomid"),rootState:t.options.rootState}},initialize:function(){var e=this,t=e.model.toJSON(),i=e.options.rootState,n=i.getRates({categoryid:t.categoryid,bedtype:t.bedtype});e.__renderDeferred=jQuery.Deferred(),e.listenTo(i,"lightBoxAnimate",e.lightBoxAnimate),e.collection=new c.Collection(e.getUniqueDataGroupByCode(n)),a.autoCreate(this,{lock:!0})},onShow:function(){var e=this.$(".x-highlight-delta").has(".x-radio.checked");if(e.length){var t=e.offset().top,i=this.ui.scroll.offset().top+77;this.ui.scroll.scrollTop(Math.max(0,t-i))}},onRender:function(){this.__renderDeferred.resolve()},lightBoxAnimate:function(e){return this.__renderDeferred.then(jQuery.proxy(this.__lightBoxAnimate,this,e))},__lightBoxAnimate:function(e){if(e){var t=this,i=t.ui.lampbox.width(),n=t.ui.lampbox.height(),c=t.ui.lampbox.offset(),l=jQuery(window).scrollTop(),a=e.top-l,o=e.left,s=c.top-l,r=c.left;t.__prevAnimateObj={position:"absolute",left:o,top:a,opacity:0,height:0,width:0},t.__nextAnimateObj={position:"absolute",left:r,top:s,opacity:1,height:n,width:i},t.ui.lampbox.css(t.__prevAnimateObj).animate(t.__nextAnimateObj,300,function(){t.ui.lampbox.removeAttr("style")})}},__closeLightBox:function(e){var t=this;t.__prevAnimateObj&&t.__nextAnimateObj?t.ui.lampbox.css(t.__nextAnimateObj).animate(t.__prevAnimateObj,300,function(){e&&e.resolve(),t.destroy()}):(e&&e.resolve(),t.destroy())}});r.prototype.getUniqueDataGroupByCode=function(e){return n.uniq(e,function(e){return e.ratecode})},t.exports=r},{"../../common/scroll":349,"./child/view":309,"./template.hbs":310,backbone:8,"backbone.marionette":6,underscore:42}],310:[function(e,t,i){t.exports='<div class="x-mask x-mask-black">\r\n    <div class="x-al-c x-nowrap book2-vertical">\r\n        <div class="book2-lampbox-container x-al-l x-normal">\r\n            <div class="book2-lampbox-head">\r\n                <div class="x-flex x-fs-00">\r\n                    <span class="x-cell x-al-l x-di-v-m x-fs-28 x-ff-vb">\r\n                        {{#if forCheckout}}\r\n                            {{local "booking.select_your_rate"}}\r\n                        {{else}}\r\n                            {{local "booking.view_and_compare_all_rates"}}\r\n                        {{/if}}\r\n                    </span>\r\n                    <span class="x-cell x-al-r x-di-v-m x-nowrap">\r\n                        <span class="x-di x-di-v-m x-fs-14 x-fc-azure x-pointer x-upper x-ff-m7 x-none" data-item="close">\r\n                            {{#if forCheckout}}\r\n                                {{local "checkout.continue_with_checkout"}}\r\n                            {{else}}\r\n                                {{local "booking.continue_with_booking"}}\r\n                            {{/if}}\r\n                        </span>\r\n                        <span class="x-di x-di-v-m x-fs-24 x-fc-azure x-pointer icon-keep-right x-ml-04" data-item="close"></span>\r\n                        <!--<span class="x-di x-di-v-m x-pointer icon-icon_B017" data-item="close"></span>-->\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="book2-lampbox-body">\r\n                <div class="x-scroll">\r\n                    <div class="x-scroll-body">\r\n                        <div class="x-pl-10 x-pr-10 x-pb-10" data-item="list"></div>\r\n                    </div>\r\n                </div>\r\n                <div class="x-runner">\r\n                    <div class="x-slider"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],309:[function(e,t,i){var n=e("underscore"),c=e("../../../02-section/03-content/03-view-by-room/child/03-rate/child/view"),l=e("../../../06-popping/view"),a=e("../../../common/popup"),o=0;t.exports=c.extend({events:n.assign({},c.prototype.events,{"mouseenter @ui.member":function(e){e.stopPropagation(),a.addListener(this,function(){clearTimeout(o)});var t=this;a.addPopupTip(this,l.MEMBER,this.getMember(),jQuery(e.currentTarget).prev(),!0,!0).on("click","[data-item='sign']",function(){t.options.rootState.trigger("registerPayment")})},"mouseleave @ui.member":function(e){e.stopPropagation(),o=setTimeout(function(){a.delPopupTip()},1e3)}})})},{"../../../02-section/03-content/03-view-by-room/child/03-rate/child/view":259,"../../../06-popping/view":343,"../../../common/popup":348,underscore:42}],308:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../available-room/view/room-details/view");t.exports=l.LayoutView.extend({template:Handlebars.compile(e("./template.hbs")),ui:{body:".book2-gallery-container"},regions:{body:".book2-gallery-container"},events:{click:function(e){this.ui.body.has(e.target).length||this.destroy()},mousewheel:function(e){e.preventDefault()},DOMMouseScroll:function(e){e.preventDefault()},"mousewheel .nano-content":"preventScroll","DOMMouseScroll .nano-content":"preventScroll"},preventScroll:function(e){e.stopPropagation();var t=e.currentTarget.clientHeight,i=e.currentTarget.scrollHeight,n=e.currentTarget.scrollTop,c=e.originalEvent.wheelDelta?e.originalEvent.wheelDelta:-(e.originalEvent.detail||0);(c>0&&c>=n||0>c&&-1*c>=i-t-n)&&(e.currentTarget.scrollTop=c>0?0:i-t,e.preventDefault())},onRender:function(){var e,t,i,l,o=this,s=o.model.toJSON(),r=o.options.rootState,g=new a;s._gbw_hotel_gallery&&(n.forEach(s.array,function(e){e._gbw_hotel_gallery=!0,e._gbw_is_many_days=s._gbw_is_many_days,e._gbw_hide_button=s._gbw_hide_button,e._gbw_iftools=1===s.array.length,e.type=e.name,e.longdesc=e.description,e.imageurl=e.hotelurl,e.currency=e.price&&e.price.currency,e.detailimage=e.infoimages,e._isloggedin=r.isLogin(),e._gbw_maxchildage=r.getMaxChildAge()}),e=s.array.length,t=s.array.indexOf(s.allah),i=new c.Collection(s.array),l=i.at(t),g._data=l,g.on("book:now",function(e){var t=n.findWhere(s.array,{id:e});t&&(o.getRegion("body").empty(),r.trigger("resetQueryParam",{code:t.hotelid,type:"hotel"}),r.trigger("hideGalleryView"))})),s._gbw_room_gallery&&(n.forEach(s.array,function(e){e._gbw_room_gallery=!0,e._gbw_is_many_days=s._gbw_is_many_days,e._gbw_iftools=1===s.array.length,e.currency=r.getCurrency(),e._isloggedin=r.isLogin(),e._gbw_maxchildage=r.getMaxChildAge();var t;t=r.isStyle(r.VIEW_STYLES.HOTEL_BY_ALL)?r.getAllah({categoryid:e.id,byAll:!0}):r.getAllah({categoryid:e.id}),t&&(e.occupancy={maxocc:t.maxocc,adultocc:t.adultocc,childocc:t.childocc})}),e=s.array.length,t=s.array.indexOf(s.allah),i=new c.Collection(s.array),l=i.at(t),g._data=l,g.on("book:now",function(e){if(o.getRegion("body").empty(),r.trigger("hideGalleryView"),r.isStyle(r.VIEW_STYLES.HOTEL_BY_ROOM)&&r.trigger("loadRatesByRoom",{categoryid:e}),r.isStyle(r.VIEW_STYLES.HOTEL_BY_ALL)&&r.trigger("loadRatesByRoom",{categoryid:e}),r.isStyle(r.VIEW_STYLES.HOTEL_BY_RATE)&&s.ratecode){var t=r.getRates({categoryid:e,ratecode:s.ratecode});if(t.length){var i=t[0];r.setAllah({roomtypecode:i.roomtypecode,ratecode:i.ratecode,roomid:i.roomid}),r.trigger("loadStaysByRate",i)}}})),g.on("view:prev",function(){t-1>-1&&(g.showPrev(i.at(--t)),g.pattern({index:t,count:e}))}),g.on("view:next",function(){e>t+1&&(g.showNext(i.at(++t)),g.pattern({index:t,count:e}))}),g.on("view:exit",function(){g.retract({left:0,top:0})}),g.on("view:express:floating",function(){g.showPrev(l)}),g.on("view:retract:fastened",function(){o.getRegion("body").empty(),r.trigger("hideGalleryView")}),setTimeout(function(){g.pattern({index:t,count:e}),g.express({left:0,top:0})}),o.getRegion("body").show(g)}})},{"../../available-room/view/room-details/view":183,"./template.hbs":307,backbone:8,"backbone.marionette":6,underscore:42}],307:[function(e,t,i){t.exports='<div class="x-mask x-mask-black">\r\n    <div class="x-al-c x-nowrap book2-vertical">\r\n        <div class="book2-gallery-container x-al-l x-normal"></div>\r\n    </div>\r\n</div>'},{}],296:[function(e,t,i){t.exports="<div></div>"},{}],273:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l={},a=e("../../../../../../06-popping/view"),o=e("../../../../../../common/popup"),s=c.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"x-highlight-delta",ui:{maxocc:"[data-item='maxocc']",member:"[data-item='member']"},events:{"mouseenter @ui.maxocc":function(e){e.stopPropagation(),o.addPopupTip(this,a.OCCUPANCY,this.getOccupancy(),jQuery(e.currentTarget))},"mouseleave @ui.maxocc":function(e){e.stopPropagation(),o.delPopupTip()},"click [data-item='look']":function(e){e.stopPropagation();var t=this,i=t.model.toJSON(),n=t.options.rootState;n.isFinal()&&n.trigger("planGalleryData",{ratecode:i.ratecode,categoryid:i.categoryid})},"click [data-item='beds']":function(e){e.stopPropagation();var t=this,i=null,n=t.model.toJSON(),c=t.options.rootState,a=c.getAllah({ratecode:n.ratecode}),o=jQuery(e.currentTarget).attr("data-bed-type"),s=c.getRates({categoryid:n.categoryid,ratecode:n.ratecode,bedtype:o});s.length&&(i=s[0],c.storeUpdatedTip({type:l,code:n.categoryid+"_"+n.ratecode,name:o}),t.__currentData=i,t.model.set("bedtype",o),a.categoryid===i.categoryid?(c.setAllah({roomtypecode:i.roomtypecode,ratecode:i.ratecode,roomid:i.roomid}),t.render(),c.trigger("loadStaysByRate",i),t.trigger("select:room",i)):t.render())},"click [data-item='select']":function(e){e.stopPropagation();var t=this,i=t.__currentData,n=t.options.rootState;i&&(n.setAllah({roomtypecode:i.roomtypecode,ratecode:i.ratecode,roomid:i.roomid}),n.storeUpdatedTip({type:l,code:i.roomtypecode,name:i.ratecode,room:i.roomid}),n.trigger("loadStaysByRate",i),t.trigger("select:room",i))},"click [data-item='sign']":function(e){e.stopPropagation(),this.options.rootState.trigger("registerPayment")}},getOccupancy:function(){var e=this,t=e.options.rootState,i=e.__currentData,c={},l=t.getMaxChildAge();return c.maxocc=l&&(i.maxocc||0),c.adultocc=l&&(i.adultocc||0),c.childocc=l&&(i.childocc||0),c.adults=n.range(i.adultocc||0),c.children=n.range(i.childocc||0),c.maxchildage=l,c},getMember:function(){var e=this,t=e.__currentData,i=e.options.rootState;return{isLogin:i.isLogin(),isUseMoney:i.isTrade(i.VIEW_TRADES.USE_MONEY),isUsePoint:i.isTrade(i.VIEW_TRADES.USE_POINT),currency:i.getCurrency(),complete:i.getComplete(),loyalty:i.getLoyalty(),pointssaved:parseFloat(t.pointssaved),ratesaved:parseFloat(t.ratesaved)}},serializeData:function(){var e=this,t=null,i=e.__currentData,c=e.model.toJSON(),l=e.options.rootState,a=l.getAllah({ratecode:c.ratecode}),o=l.getRooms({id:c.categoryid});o.length&&(t=o[0]);var s=l.getMaxChildAge(),r=s&&(a&&a.maxocc||"0"),g=s&&i&&i.adultocc,d=s&&i&&i.childocc,I=i&&parseFloat(i.pointssaved),b=i&&parseFloat(i.ratesaved);return{isLogin:l.isLogin(),isFinal:l.isFinal(),isManyDays:l.isManyDays(),isUseMoney:l.isTrade(l.VIEW_TRADES.USE_MONEY),isUsePoint:l.isTrade(l.VIEW_TRADES.USE_POINT),expandAll:a&&a.roomtypecode===(i&&i.roomtypecode)&&a.ratecode===(i&&i.ratecode)&&a.roomid===(i&&i.roomid),maxchildage:s,currency:l.getCurrency(),restricted:i&&i.roomstay&&i.roomstay.RatePlan&&i.roomstay.RatePlan.restricted,complete:!(i&&i.roomstay&&i.roomstay.RatePlan&&i.roomstay.RatePlan.restricted)&&l.getComplete(),data:i,type:t&&t.type,badgeicon:t&&t.badgeicon,badgetitle:t&&t.badgetitle,priceratio:i.priceratio,priceratiodesc:(i.priceratio&&i.priceratio.desc||"").trim(),bedtypes:i&&e.getUniqueBedTypes(l.getRates({categoryid:i.categoryid,ratecode:i.ratecode}),i,l.getCurrency(),l.isTrade(l.VIEW_TRADES.USE_POINT)),amenities:t&&e.getValidAmenities(t.amenities),roomsize:t&&t.features.roomsize,roomtagline:t&&t.roomtagline,image:t&&(t.imageurl3||t.imageurl)||i&&i.image,rate:e.getOriginPrice(i),points:e.getOriginPoint(i),memberrate:e.getMemberPrice(i),memberpoints:e.getMemberPoint(i),pointssaved:I,ratesaved:b,pointssavedformat:Handlebars.compile("{{num-format this}}")(i&&parseFloat(i.pointssaved)),ratesavedformat:Handlebars.compile("{{price-format this}}")(i&&parseFloat(i.ratesaved)),availability:!0,vouchervisible:i&&i.roomupgradeavailabled,voucherusage:i&&i.voucherusage,bestdeal:i&&l.isBestDealRate({memberrate:i.memberrate}),maxocc:r,adultocc:g,childocc:d,hasocc:!!g||!!d,adults:n.range(g||0),children:n.range(d||0),pointsText:i18n.t("checkout.points"),updateIdentity:i.ratecode}},initialize:function(){var e=this,t=e.model.toJSON(),i=e.options.rootState,c=i.getRates({ratecode:t.ratecode,categoryid:t.categoryid});c.length&&(e.__currentData=n.findWhere(c,{bedtype:t.bedtype})||c[0]),e.__renderDeferred=jQuery.Deferred(),e.listenTo(i,"redrawViewChild",this.redrawViewChild),e.listenTo(i,"changePartCount",this.changePartCount)},onRender:function(){var e=this,t=e.options.rootState,i=e.model.toJSON(),n=e.__currentData,c=t.getAllah({ratecode:i.ratecode});e.__renderDeferred.resolve(),t.glintUpdatedTip({code:i.categoryid+"_"+i.ratecode,type:l},e),c&&c.roomtypecode===(n&&n.roomtypecode)&&c.ratecode===(n&&n.ratecode)&&c.roomid===(n&&n.roomid)&&t.glintUpdatedTip({code:n.roomtypecode,room:n.roomid,type:l},e)},redrawViewChild:function(e){return this.__renderDeferred.then(jQuery.proxy(this.__redrawViewChild,this,e))},changePartCount:function(e){return this.__renderDeferred.then(jQuery.proxy(this.__changePartCount,this,e))},__redrawViewChild:function(){this.render()},__changePartCount:function(e){this.__currentData&&this.__currentData.roomtypecode===e.roomtypecode&&this.__currentData.ratecode===e.ratecode&&this.__currentData.roomid===e.roomid&&(this.__currentData=n.assign(this.__currentData,e),this.render())}});s.prototype.getOriginPrice=function(e){return e.memberprice?(parseFloat(e.memberrate)||0)+parseFloat(e.ratesaved):parseFloat(e.memberrate)||0},s.prototype.getOriginPoint=function(e){return e.memberprice?(parseFloat(e.avgdisplaypoints||e.points)||0)+(parseFloat(e.pointssaved)||0):parseFloat(e.avgdisplaypoints||e.points)||0},s.prototype.getMemberPrice=function(e){return e.memberprice?parseFloat(e.memberrate)||0:(parseFloat(e.memberrate)||0)-parseFloat(e.ratesaved)},s.prototype.getMemberPoint=function(e){return e.memberprice?parseFloat(e.avgdisplaypoints||e.points)||0:(parseFloat(e.avgdisplaypoints||e.points)||0)-(parseFloat(e.pointssaved)||0)},s.prototype.getUniqueBedTypes=function(e,t,i,c){var l=n.has(t,"memberrate")&&n.has(t,"avgdisplaypoints");return e=n.uniq(e,function(e){return e.bedtype}),e=n.map(e,function(e){var n=e.bedtype,a=e.bedtypeicon,o=parseFloat(e.memberrate),s=parseFloat(e.avgdisplaypoints),r=e.bedtype===t.bedtype;if(l&&!r)if(c){var g=s-parseFloat(t.avgdisplaypoints);g&&(n=Handlebars.compile("{{bedtype}} ({{operator}}{{num-format difference}})")({bedtype:n,currency:i,operator:g>0?"+":"-",difference:Math.abs(g)}))}else{var g=o-parseFloat(t.memberrate);g&&(n=Handlebars.compile("{{bedtype}} ({{operator}}{{currency}}{{price-format difference}})")({bedtype:n,currency:i,operator:g>0?"+":"-",difference:Math.abs(g)}))}return{bedtext:n,bedtype:e.bedtype,bedtypeicon:a,highlight:r}})},s.prototype.getValidAmenities=function(e){return n.filter(e||[],function(e){return!!e.fonticon}).slice(0,4)},t.exports=s},{"../../../../../../06-popping/view":343,"../../../../../../common/popup":348,"./template.hbs":272,"backbone.marionette":6,underscore:42}],272:[function(e,t,i){t.exports='<div class="x-fs-00 x-nowrap x-top-line">\r\n    <div class="book2-child-block">\r\n        <div class="book2-child-image x-fs-00 x-img x-img-top" style="background-image: url(\'{{image}}\')">\r\n            <!--{{#if priceratio}}-->\r\n                <!--<span class="x-pl-05 x-pr-05 x-di x-di-v-m x-nowrap x-bc-peach x-fc-white x-around x-pointer">-->\r\n                    <!--<span class="x-fs-12 x-lh-20 x-upper">{{priceratio.title}}</span>-->\r\n                    <!--<div class="x-popup-wrap" style="width: 450px">-->\r\n                        <!--<div class="x-popup-body" style="padding-bottom: 20px">-->\r\n                            <!--<div class="x-popup-head x-upper x-fs-13">{{priceratio.title}}</div>-->\r\n                            <!--{{#each priceratio.list}}-->\r\n                                <!--<div class="x-mt-13 x-ml-20 x-mr-20">-->\r\n                                    <!--<span class="x-di x-di-v-m x-fs-14 x-upper">{{currency}} {{price-format price}}</span>-->\r\n                                    <!--{{#if ../isManyDays}}-->\r\n                                        <!--<span class="x-di x-di-v-m x-fs-14 x-upper x-ml-20">{{local "Property.night"}}</span>-->\r\n                                    <!--{{else}}-->\r\n                                        <!--<span class="x-di x-di-v-m x-fs-14 x-upper x-ml-20">/{{local "general.night"}}</span>-->\r\n                                    <!--{{/if}}-->\r\n                                    <!--<span class="x-di x-di-v-m x-fs-14 x-ml-20">{{website}}</span>-->\r\n                                <!--</div>-->\r\n                            <!--{{/each}}-->\r\n                            <!--{{#if priceratiodesc}}-->\r\n                                <!--<div class="x-mt-13 x-ml-20 x-mr-20">-->\r\n                                    <!--<span class="x-di x-di-v-m x-fs-14 x-ff-mh">{{priceratiodesc}}</span>-->\r\n                                <!--</div>-->\r\n                            <!--{{/if}}-->\r\n                        <!--</div>-->\r\n                    <!--</div>-->\r\n                <!--</span>-->\r\n            <!--{{/if}}-->\r\n            <!--<div class="book2-viewgallery shrink">-->\r\n                <!--<span class="x-fs-18 x-di x-di-v-m x-fc-white x-pointer icon-icon_A004" data-item="look"></span>-->\r\n                <!--<span class="x-fs-18 x-di x-di-v-m x-fc-white x-pointer x-ml-06" data-item="look">{{local "booking.quick_look"}}</span>-->\r\n            <!--</div>-->\r\n        </div>\r\n        <div class="book2-child-theme x-fs-00 x-nowrap">\r\n            <div class="panel-1 x-di x-di-v-t x-normal">\r\n                <div>\r\n                    <h2 class="x-fs-24 x-di x-di-v-m x-lh-12 x-ff-wb">{{type}}</h2>\r\n                    {{#if amenities.length}}\r\n                        <span class="x-fs-18 x-di x-di-v-m x-ml-08 x-separator"></span>\r\n                        <span class="x-fs-18 x-di x-di-v-m x-ml-04"></span>\r\n                        {{#each amenities}}\r\n                            <span class="x-fs-18 x-di x-di-v-m x-ml-04 x-default x-popup {{fonticon}}">\r\n                                <div class="x-popup-wrap x-fs-00">\r\n                                    <div class="x-popup-body x-fs-16 x-ff-sm x-nowrap" style="padding: 6px 10px">{{name}}</div>\r\n                                </div>\r\n                            </span>\r\n                        {{/each}}\r\n                    {{/if}}\r\n                </div>\r\n                {{#if badgetitle}}\r\n                    <div class="x-mt-08">\r\n                        <span class="x-fs-12 x-ff-mh x-lh-24 x-pl-08 x-pr-08 x-di x-di-v-t x-upper x-nowrap x-bc-peach x-fc-white">{{badgetitle}}</span>\r\n                    </div>\r\n                {{/if}}\r\n                {{#if roomtagline}}\r\n                    <div class="x-mt-08">\r\n                        <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-fc-black x-normal">{{roomtagline}}</span>\r\n                    </div>\r\n                {{else}}\r\n                    {{#if roomsize}}\r\n                        <div class="x-mt-08 x-nowrap">\r\n                            <span class="x-fs-16 x-di x-di-v-m x-fc-black icon-icon_I016"></span>\r\n                            <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-fc-black x-ml-06 x-normal">{{{specialSymbolFix roomsize}}}</span>\r\n                        </div>\r\n                    {{/if}}\r\n                    <div class="x-mt-08">\r\n                        {{#if adults.length}}\r\n                            {{#each adults}}\r\n                                <span class="x-fs-16 x-di x-di-v-m x-fc-black icon-icon_J013"></span>\r\n                            {{/each}}\r\n                            {{#equal adults.length 1}}\r\n                                <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.adult"}}</span>\r\n                            {{else}}\r\n                                <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.adults"}}</span>\r\n                            {{/equal}}\r\n                            <span class="x-di x-di-v-m x-ml-06"></span>\r\n                        {{/if}}\r\n                        {{#if children.length}}\r\n                            {{#each children}}\r\n                                <span class="x-fs-16 x-di x-di-v-m x-fc-black icon-icon_J012"></span>\r\n                            {{/each}}\r\n                            {{#equal children.length 1}}\r\n                                <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.child"}}</span>\r\n                            {{else}}\r\n                                <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.children"}}</span>\r\n                            {{/equal}}\r\n                        {{/if}}\r\n                        {{#if hasocc}}\r\n                            <span class="x-di x-di-v-m x-fs-16 x-ml-06 x-default x-popup icon-icon_B008" data-item="maxocc"></span>\r\n                        {{/if}}\r\n                    </div>    \r\n                {{/if}}\r\n                \r\n                <div class="x-mt-08">\r\n                    {{#each bedtypes}}\r\n                        <div class="x-di x-di-v-t">\r\n                            {{#if highlight}}\r\n                                <div class="x-nowrap x-fc-azure">\r\n                                    <span class="x-fs-16 x-di x-di-v-m {{bedtypeicon}}"></span>\r\n                                    <span class="x-fs-16 x-di x-di-v-m x-ff-wm x-ml-06 x-under">{{bedtext}}</span>\r\n                                </div>\r\n                            {{else}}\r\n                                <div class="x-nowrap x-fc-black x-pointer" data-bed-type="{{bedtype}}" data-item="beds">\r\n                                    <span class="x-fs-16 x-di x-di-v-m {{bedtypeicon}}"></span>\r\n                                    <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06 x-under">{{bedtext}}</span>\r\n                                </div>\r\n                            {{/if}}\r\n                            <div class="book2-updated-tip x-fs-12 x-mt-08 x-fc-green x-al-c" data-bed-type="{{bedtype}}">\r\n                                <span class="x-fs-16 x-di x-di-v-m icon-icon_I009"></span> {{local "booking.updated"}}\r\n                            </div>\r\n                        </div>\r\n                        <div class="x-di x-di-v-t x-ml-08"></div>\r\n                    {{/each}}\r\n                </div>\r\n            </div>\r\n            <div class="panel-2 x-di x-di-v-t x-normal">\r\n                {{#if isUseMoney}}\r\n                    {{#if ratesaved}}\r\n                        {{#if isLogin}}\r\n                            <span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-fc-azure x-upper">{{local "booking.you_ve_saved"}} {{currency}} {{price-format ratesaved}}</span>\r\n                            <span class="x-fs-16 x-di x-di-v-m x-ml-06 x-fc-azure x-default icon-icon_B008" data-item="member"></span>\r\n                        {{else}}\r\n                            {{#if complete}}\r\n                                <span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-upper x-through">{{local "booking.usual_price"}}: {{currency}} {{price-format rate}}</span>\r\n                            {{else}}\r\n                                <!--<span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-upper">{{local "Property.members_pay"}}: {{currency}} {{price-format memberrate}}</span>-->\r\n                                <span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-upper">{{local "booking.members_save"}}: {{currency}} {{price-format ratesaved}}</span>\r\n                            {{/if}}\r\n                            <span class="x-fs-16 x-di x-di-v-m x-ml-06 x-default icon-icon_B008" data-item="member"></span>\r\n                            <!--<div class="x-mt-04">-->\r\n                            <!--<span style="display: inline-block; max-width: 250px; line-height: 14px">-->\r\n                                <!--{{#if complete}}-->\r\n                            <!--<span class="x-fs-14 x-fc-white x-bc-azure x-di-v-m x-mr-06 icon-icon_I009"></span>-->\r\n                            <!--<span class="x-fs-12 x-ff-mm x-fw-none x-fc-azure x-di-v-m x-under">{{local "booking.complete_then_sign"}}</span>-->\r\n                                <!--{{else}}-->\r\n                            <!--<span class="x-fs-12 x-ff-mm x-fw-none x-pointer x-fc-azure x-under" data-item="sign">{{local "booking.sign_up_to_pay" currency ratesavedformat }}</span>-->\r\n                                <!--{{/if}}-->\r\n                            <!--</span>-->\r\n                            <!--</div>-->\r\n                        {{/if}}\r\n                        <div class="x-mt-08"></div>\r\n                    {{else}}\r\n                        {{#if restricted}}\r\n                            <div class="x-fs-14 x-ff-sm x-italic x-fc-gray">{{local "booking.loyalty_discount_not_applicable"}}</div>\r\n                            <div class="x-mt-08"></div>\r\n                        {{/if}}\r\n                    {{/if}}\r\n                    {{#if rate}}\r\n                        <div class="x-fs-00">\r\n                            <!--{{#if bestdeal}}-->\r\n                                <!--<span class="x-fs-12 x-lh-20 x-pl-05 x-pr-05 x-di x-di-v-m x-upper x-nowrap x-bc-peach x-fc-white x-mr-08">{{ local "booking.best_deal" }}</span>-->\r\n                            <!--{{/if}}-->\r\n                            {{#if isLogin}}\r\n                                <span class="x-fs-24 x-ff-wb x-upper x-di x-di-v-m">{{currency}} {{price-format memberrate}}</span>\r\n                            {{else}}\r\n                                {{#if complete}}\r\n                                    <span class="x-fs-24 x-ff-wb x-upper x-di x-di-v-m">{{currency}} {{price-format memberrate}}</span>\r\n                                {{else}}\r\n                                    <span class="x-fs-24 x-ff-wb x-upper x-di x-di-v-m">{{currency}} {{price-format rate}}</span>\r\n                                {{/if}}\r\n                            {{/if}}\r\n                        </div>\r\n                        {{#if isManyDays}}\r\n                            <div class="x-fs-16 x-ff-m7 x-upper x-mt-08">{{#if forCheckout}}{{local "booking.total"}}{{else}}{{local "Property.avg_night"}}{{/if}}</div>\r\n                        {{else}}\r\n                            <div class="x-fs-16 x-ff-m7 x-upper x-mt-08">{{local "general.avg_night"}}</div>\r\n                        {{/if}}\r\n                    {{/if}}\r\n                {{/if}}\r\n                {{#if isUsePoint}}\r\n                    {{#if pointssaved}}\r\n                        {{#if isLogin}}\r\n                            <span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-fc-azure x-upper">{{local "booking.you_ve_saved"}} {{num-format ratesaved}} {{local "checkout.points"}}</span>\r\n                            <span class="x-fs-16 x-di x-di-v-m x-ml-06 x-fc-azure x-default icon-icon_B008" data-item="member"></span>\r\n                        {{else}}\r\n                            {{#if complete}}\r\n                                <span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-upper x-through">{{local "booking.usual_price"}}: {{num-format points}} {{local "checkout.points"}}</span>\r\n                            {{else}}\r\n                                <!--<span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-upper">{{local "Property.members_pay"}}: {{num-format memberpoints}} {{local "checkout.points"}}</span>-->\r\n                                <span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-upper">{{local "booking.members_save"}}: {{num-format pointssaved}} {{local "checkout.points"}}</span>\r\n                            {{/if}}\r\n                            <span class="x-fs-16 x-di x-di-v-m x-ml-06 x-default icon-icon_B008" data-item="member"></span>\r\n                            <!--<div class="x-mt-04">-->\r\n                            <!--<span style="display: inline-block; max-width: 250px; line-height: 14px">-->\r\n                                <!--{{#if complete}}-->\r\n                            <!--<span class="x-fs-14 x-fc-white x-bc-azure x-di-v-m x-mr-06 icon-icon_I009"></span>-->\r\n                            <!--<span class="x-fs-12 x-ff-mm x-fw-none x-fc-azure x-di-v-m x-under">{{local "booking.complete_then_sign"}}</span>-->\r\n                                <!--{{else}}-->\r\n                            <!--<span class="x-fs-12 x-ff-mm x-fw-none x-pointer x-fc-azure x-under" data-item="sign">{{local "booking.sign_up_to_pay" pointssavedformat pointsText}}</span>-->\r\n                                <!--{{/if}}-->\r\n                            <!--</span>-->\r\n                            <!--</div>-->\r\n                        {{/if}}\r\n                        <div class="x-mt-08"></div>\r\n                    {{else}}\r\n                        {{#if restricted}}\r\n                            <div class="x-fs-14 x-ff-sm x-italic x-fc-gray">{{local "booking.loyalty_discount_not_applicable"}}</div>\r\n                            <div class="x-mt-08"></div>\r\n                        {{/if}}\r\n                    {{/if}}\r\n                    {{#if points}}\r\n                        <div class="x-fs-00">\r\n                            <!--{{#if bestdeal}}-->\r\n                                <!--<span class="x-fs-12 x-lh-20 x-pl-05 x-pr-05 x-di x-di-v-m x-upper x-nowrap x-bc-peach x-fc-white x-mr-08">{{ local "booking.best_deal" }}</span>-->\r\n                            <!--{{/if}}-->\r\n                            {{#if isLogin}}\r\n                                <span class="x-fs-24 x-ff-wb x-upper x-di x-di-v-m">{{num-format memberpoints}}</span>\r\n                            {{else}}\r\n                                {{#if complete}}\r\n                                    <span class="x-fs-24 x-ff-wb x-upper x-di x-di-v-m">{{num-format memberpoints}}</span>\r\n                                {{else}}\r\n                                    <span class="x-fs-24 x-ff-wb x-upper x-di x-di-v-m">{{num-format points}}</span>\r\n                                {{/if}}\r\n                            {{/if}}\r\n                        </div>\r\n                        {{#if isManyDays}}\r\n                            <div class="x-fs-16 x-ff-m7 x-upper x-mt-08">{{#if forCheckout}}{{local "booking.total"}}{{else}}{{local "Property.avg_night"}}{{/if}}</div>\r\n                        {{else}}\r\n                            <div class="x-fs-16 x-ff-m7 x-upper x-mt-08">{{local "general.avg_night"}}</div>\r\n                        {{/if}}\r\n                    {{/if}}\r\n                {{/if}}\r\n                <div style="max-height: 38px">\r\n                    <div class="x-mt-20">\r\n                        {{#if expandAll}}\r\n                            <div>\r\n                                <span class="x-fs-15 x-di x-di-v-m x-ff-mh x-fc-azure x-upper x-default">\r\n                                    <div style="padding: 8px 0">{{local "booking.room_selected"}}</div>\r\n                                    <div class="book2-updated-tip x-fs-12 x-fc-green x-al-c" style="height: 0px" data-bed-type="{{updateIdentity}}">\r\n                                        <span class="x-fs-16 x-di x-di-v-m icon-icon_I009"></span> {{local "booking.updated"}}\r\n                                    </div>\r\n                                </span>\r\n                                <span class="x-fs-32 x-di x-di-v-m x-radio x-fc-azure x-ml-08 x-default checked"></span>\r\n                            </div>\r\n                        {{else}}\r\n                            <div>\r\n                                <span class="x-fs-15 x-di x-di-v-m x-ff-mh x-fc-azure x-upper x-default">{{local "booking.select_this_room"}}</span>\r\n                                <span class="x-fs-32 x-di x-di-v-m x-radio x-fc-azure x-ml-08 x-pointer" data-item="select"></span>\r\n                            </div>\r\n                        {{/if}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';
},{}],259:[function(e,t,i){var n=e("backbone.marionette"),c=e("../../../../../../common/short"),l=e("../../../../../../06-popping/view"),a=e("../../../../../../common/popup"),o={},s=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"x-highlight-delta",ui:{popup:"[data-item='popup']",member:"[data-item='member']"},events:{"click [data-item='select']":function(e){e.stopPropagation();var t=this,i=t.model.toJSON(),n=t.options.rootState;n.isStyle(n.VIEW_STYLES.HOTEL_BY_ROOM)?n.setAllah({categoryid:i.categoryid,roomtypecode:i.roomtypecode,ratecode:i.ratecode,roomid:i.roomid}):n.isStyle(n.VIEW_STYLES.HOTEL_BY_ALL)&&n.setAllah({categoryid:i.categoryid,roomtypecode:i.roomtypecode,ratecode:i.ratecode,roomid:i.roomid,byAll:!0}),n.storeUpdatedTip({type:o,code:i.roomtypecode,name:i.ratecode,room:i.roomid}),n.trigger("loadStaysByRate",i),t.trigger("select:rate",i)},"click [data-item='sign']":function(e){e.stopPropagation(),this.options.rootState.trigger("registerPayment")},"mouseenter @ui.popup":function(e){e.stopPropagation(),a.addPopupTip(this,l.PENALTY,this.model.toJSON(),this.ui.popup.eq(-1))},"mouseleave @ui.popup":function(e){e.stopPropagation(),a.delPopupTip()}},getMember:function(){var e=this,t=e.model.toJSON(),i=e.options.rootState;return{isLogin:i.isLogin(),isUseMoney:i.isTrade(i.VIEW_TRADES.USE_MONEY),isUsePoint:i.isTrade(i.VIEW_TRADES.USE_POINT),currency:i.getCurrency(),complete:i.getComplete(),loyalty:i.getLoyalty(),pointssaved:parseFloat(t.pointssaved),ratesaved:parseFloat(t.ratesaved)}},serializeData:function(){var e=this,t=e.model.toJSON(),i=e.options.rootState,n=parseFloat(t.pointssaved),c=parseFloat(t.ratesaved);return{isLogin:i.isLogin(),isFinal:i.isFinal(),isManyDays:i.isManyDays(),currency:i.getCurrency(),restricted:t&&t.roomstay&&t.roomstay.RatePlan&&t.roomstay.RatePlan.restricted,complete:!(t&&t.roomstay&&t.roomstay.RatePlan&&t.roomstay.RatePlan.restricted)&&i.getComplete(),isUseMoney:i.isTrade(i.VIEW_TRADES.USE_MONEY),isUsePoint:i.isTrade(i.VIEW_TRADES.USE_POINT),expandAll:e.options.expandAll,data:t,rate:e.getOriginPrice(t),points:e.getOriginPoint(t),memberrate:e.getMemberPrice(t),memberpoints:e.getMemberPoint(t),pointssaved:n,ratesaved:c,pointssavedformat:Handlebars.compile("{{num-format this}}")(parseFloat(t.pointssaved)),ratesavedformat:Handlebars.compile("{{price-format this}}")(parseFloat(t.ratesaved)),priceratiodesc:(t.priceratio&&t.priceratio.desc||"").trim(),bestdeal:t&&t.badgetitle,pointsText:i18n.t("checkout.points")}},initialize:function(){var e=this.options.rootState;this.__renderDeferred=jQuery.Deferred(),this.listenTo(e,"redrawViewChild",this.redrawViewChild),c.autoCreate(this)},onRender:function(){var e=this;e.__renderDeferred.resolve(),e.options.expandAll&&e.options.rootState.glintUpdatedTip({code:e.model.get("roomtypecode"),room:e.model.get("roomid"),type:o},e)},redrawViewChild:function(e){return this.__renderDeferred.then(jQuery.proxy(this.__redrawViewChild,this,e))},__redrawViewChild:function(){this.render()}});s.prototype.getOriginPrice=function(e){return e.memberprice?(parseFloat(e.memberrate)||0)+parseFloat(e.ratesaved):parseFloat(e.memberrate)||0},s.prototype.getOriginPoint=function(e){return e.memberprice?(parseFloat(e.avgdisplaypoints||e.points)||0)+(parseFloat(e.pointssaved)||0):parseFloat(e.avgdisplaypoints||e.points)||0},s.prototype.getMemberPrice=function(e){return e.memberprice?parseFloat(e.memberrate)||0:(parseFloat(e.memberrate)||0)-parseFloat(e.ratesaved)},s.prototype.getMemberPoint=function(e){return e.memberprice?parseFloat(e.avgdisplaypoints||e.points)||0:(parseFloat(e.avgdisplaypoints||e.points)||0)-(parseFloat(e.pointssaved)||0)},t.exports=s},{"../../../../../../06-popping/view":343,"../../../../../../common/popup":348,"../../../../../../common/short":350,"./template.hbs":258,"backbone.marionette":6}],258:[function(e,t,i){t.exports='<div class="x-fs-00 x-ml-20 x-mr-20 x-pt-20 x-pb-13 x-nowrap x-top-line">\r\n    <div class="book2-rates-block x-di x-di-v-t x-normal book2-pr-18">\r\n        <div class="x-ff-00">\r\n            <h5 class="x-fs-22 x-ff-wb x-di x-di-v-m">{{data.ratename}}</h5>\r\n            {{#if bestdeal}}\r\n                <span class="x-fs-12 x-lh-24 x-pl-05 x-pr-05 x-di x-di-v-m x-upper x-nowrap x-bc-peach x-fc-white x-ml-08">{{ bestdeal }}</span>\r\n            {{/if}}\r\n            <!--{{#if data.priceratio}}-->\r\n                <!--<span class="x-pl-05 x-pr-05 x-di x-di-v-m x-nowrap x-bc-peach x-fc-white x-ml-08 x-around x-pointer">-->\r\n                    <!--<span class="x-fs-12 x-lh-20 x-upper">{{data.priceratio.title}}</span>-->\r\n                    <!--<div class="x-popup-wrap" style="width: 450px">-->\r\n                        <!--<div class="x-popup-body" style="padding-bottom: 20px">-->\r\n                            <!--<div class="x-popup-head x-upper x-fs-13">{{data.priceratio.title}}</div>-->\r\n                            <!--{{#each data.priceratio.list}}-->\r\n                                <!--<div class="x-mt-13 x-ml-20 x-mr-20">-->\r\n                                    <!--<span class="x-di x-di-v-m x-fs-14 x-upper">{{currency}} {{price-format price}}</span>-->\r\n                                    <!--{{#if ../isManyDays}}-->\r\n                                        <!--<span class="x-di x-di-v-m x-fs-14 x-upper x-ml-20">{{local "Property.night"}}</span>-->\r\n                                    <!--{{else}}-->\r\n                                        <!--<span class="x-di x-di-v-m x-fs-14 x-upper x-ml-20">/{{local "general.night"}}</span>-->\r\n                                    <!--{{/if}}-->\r\n                                    <!--<span class="x-di x-di-v-m x-fs-14 x-ml-20">{{website}}</span>-->\r\n                                <!--</div>-->\r\n                            <!--{{/each}}-->\r\n                            <!--{{#if priceratiodesc}}-->\r\n                                <!--<div class="x-mt-13 x-ml-20 x-mr-20">-->\r\n                                    <!--<span class="x-di x-di-v-m x-fs-14 x-ff-mh">{{priceratiodesc}}</span>-->\r\n                                <!--</div>-->\r\n                            <!--{{/if}}-->\r\n                        <!--</div>-->\r\n                    <!--</div>-->\r\n                <!--</span>-->\r\n            <!--{{/if}}-->\r\n        </div>\r\n        <!--<div class="x-mt-13">-->\r\n            <!--<span class="x-fs-15 x-ff-wb x-di x-di-v-m">{{local "policy.refer_to_terms_condition_for_full_policy"}}</span>-->\r\n            <!--<span class="x-fs-16 x-di x-di-v-m x-ml-06 x-pointer icon-icon_B008" data-item="popup">-->\r\n            <!--</span>-->\r\n        <!--</div>-->\r\n\r\n        <div class="x-mt-08">\r\n            {{#if data.roomstay.RatePlan.paymentType}}\r\n                <span class="x-fs-18 x-ff-m7 x-di x-di-v-m x-upper" style="color: #202020; letter-spacing: 1px">{{local "booking.pay_now_and_save"}}</span>\r\n            {{else}}\r\n                <span class="x-fs-18 x-ff-m7 x-di x-di-v-m x-upper" style="color: #202020; letter-spacing: 1px">{{local "booking.book_now_and_pay_later"}}</span>\r\n            {{/if}}\r\n        </div>\r\n        <div class="x-mt-08">\r\n            <p class="x-fs-16 x-ff-sm x-lh-24">\r\n                {{data.desc}}\r\n            </p>\r\n        </div>\r\n        {{#if data.tipshort}}\r\n            <div class="book2-information x-mt-08 x-fs-14 x-ff-sm x-lh-22">\r\n                {{{data.tipshort}}}\r\n            </div>\r\n        {{/if}}\r\n        <div class="x-mt-13">\r\n            <span class="x-fs-14 x-di x-di-v-m x-ff-mm x-fc-azure x-default x-under" data-item="popup">{{local "booking.view_guarantee_and_cancellation_policy"}}</span>\r\n            <span class="x-fs-16 x-di x-di-v-m x-ml-06 x-fc-azure x-default icon-icon_B008" data-item="popup"></span>\r\n        </div>\r\n    </div>\r\n    <div class="book2-rates-patch x-di x-di-v-t x-normal x-al-r">\r\n        {{#if isUseMoney}}\r\n            {{#if ratesaved}}\r\n                {{#if isLogin}}\r\n                    <span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-fc-azure x-upper">{{local "booking.you_ve_saved"}} {{currency}} {{price-format ratesaved}}</span>\r\n                    <span class="x-fs-16 x-di x-di-v-m x-ml-06 x-fc-azure x-default icon-icon_B008" data-item="member"></span>\r\n                {{else}}\r\n                    {{#if complete}}\r\n                        <span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-upper x-through">{{local "booking.usual_price"}}: {{currency}} {{price-format rate}}</span>\r\n                    {{else}}\r\n                        <!--<span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-upper">{{local "Property.members_pay"}}: {{currency}} {{price-format memberrate}}</span>-->\r\n                        <span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-upper">{{local "booking.members_save"}}: {{currency}} {{price-format ratesaved}}</span>\r\n                    {{/if}}\r\n                    <span class="x-fs-16 x-di x-di-v-m x-ml-06 x-default icon-icon_B008" data-item="member"></span>\r\n                    <!--<div class="x-mt-04">-->\r\n                    <!--<span style="display: inline-block; max-width: 250px; line-height: 14px">-->\r\n                        <!--{{#if complete}}-->\r\n                    <!--<span class="x-fs-14 x-fc-white x-bc-azure x-di-v-m x-mr-06 icon-icon_I009"></span>-->\r\n                    <!--<span class="x-fs-12 x-ff-mm x-fw-none x-fc-azure x-di-v-m x-under">{{local "booking.complete_then_sign"}}</span>-->\r\n                        <!--{{else}}-->\r\n                    <!--<span class="x-fs-12 x-ff-mm x-fw-none x-pointer x-fc-azure x-under" data-item="sign">{{local "booking.sign_up_to_pay" currency ratesavedformat }}</span>-->\r\n                        <!--{{/if}}-->\r\n                    <!--</span>-->\r\n                    <!--</div>-->\r\n                {{/if}}\r\n                <div class="x-mt-08"></div>\r\n            {{else}}\r\n                {{#if restricted}}\r\n                    <div class="x-fs-14 x-ff-sm x-italic x-fc-gray">{{local "booking.loyalty_discount_not_applicable"}}</div>\r\n                    <div class="x-mt-08"></div>\r\n                {{/if}}\r\n            {{/if}}\r\n            {{#if rate}}\r\n                <div class="x-fs-00">\r\n                    {{#if isLogin}}\r\n                        <span class="x-fs-24 x-ff-wb x-upper x-di x-di-v-m">{{currency}} {{price-format memberrate}}</span>\r\n                    {{else}}\r\n                        {{#if complete}}\r\n                            <span class="x-fs-24 x-ff-wb x-upper x-di x-di-v-m">{{currency}} {{price-format memberrate}}</span>\r\n                        {{else}}\r\n                            <span class="x-fs-24 x-ff-wb x-upper x-di x-di-v-m">{{currency}} {{price-format rate}}</span>\r\n                        {{/if}}\r\n                    {{/if}}\r\n                </div>\r\n                {{#if isManyDays}}\r\n                    <div class="x-fs-16 x-ff-m7 x-upper x-mt-08">{{#if forCheckout}}{{local "booking.total"}}{{else}}{{local "Property.avg_night"}}{{/if}}</div>\r\n                {{else}}\r\n                    <div class="x-fs-16 x-ff-m7 x-upper x-mt-08">{{local "general.avg_night"}}</div>\r\n                {{/if}}\r\n            {{/if}}\r\n        {{/if}}\r\n        {{#if isUsePoint}}\r\n            {{#if pointssaved}}\r\n                {{#if isLogin}}\r\n                    <span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-fc-azure x-upper">{{local "booking.you_ve_saved"}} {{num-format pointssaved}} {{local "checkout.points"}}</span>\r\n                    <span class="x-fs-16 x-di x-di-v-m x-ml-06 x-fc-azure x-default icon-icon_B008" data-item="member"></span>\r\n                {{else}}\r\n                    {{#if complete}}\r\n                        <span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-upper x-through">{{local "booking.usual_price"}}: {{num-format points}} {{local "checkout.points"}}</span>\r\n                    {{else}}\r\n                        <!--<span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-upper">{{local "Property.members_pay"}}: {{num-format memberpoints}} {{local "checkout.points"}}</span>-->\r\n                        <span class="x-fs-16 x-di x-di-v-m x-ff-m7 x-upper">{{local "booking.members_save"}}: {{num-format pointssaved}} {{local "checkout.points"}}</span>\r\n                    {{/if}}\r\n                    <span class="x-fs-16 x-di x-di-v-m x-ml-06 x-default icon-icon_B008" data-item="member"></span>\r\n                    <!--<div class="x-mt-04">-->\r\n                    <!--<span style="display: inline-block; max-width: 250px; line-height: 14px">-->\r\n                        <!--{{#if complete}}-->\r\n                    <!--<span class="x-fs-14 x-fc-white x-bc-azure x-di-v-m x-mr-06 icon-icon_I009"></span>-->\r\n                    <!--<span class="x-fs-12 x-ff-mm x-fw-none x-fc-azure x-di-v-m x-under">{{local "booking.complete_then_sign"}}</span>-->\r\n                        <!--{{else}}-->\r\n                    <!--<span class="x-fs-12 x-ff-mm x-fw-none x-pointer x-fc-azure x-under" data-item="sign">{{local "booking.sign_up_to_pay" currency pointssavedformat }}</span>-->\r\n                        <!--{{/if}}-->\r\n                    <!--</span>-->\r\n                    <!--</div>-->\r\n                {{/if}}\r\n                <div class="x-mt-08"></div>\r\n            {{else}}\r\n                {{#if restricted}}\r\n                    <div class="x-fs-14 x-ff-sm x-italic x-fc-gray">{{local "booking.loyalty_discount_not_applicable"}}</div>\r\n                    <div class="x-mt-08"></div>\r\n                {{/if}}\r\n            {{/if}}\r\n            {{#if points}}\r\n                <div class="x-fs-00">\r\n                    {{#if isLogin}}\r\n                        <span class="x-fs-24 x-ff-wb x-upper x-di x-di-v-m">{{num-format memberpoints}}</span>\r\n                    {{else}}\r\n                        {{#if complete}}\r\n                            <span class="x-fs-24 x-ff-wb x-upper x-di x-di-v-m">{{num-format memberpoints}}</span>\r\n                        {{else}}\r\n                            <span class="x-fs-24 x-ff-wb x-upper x-di x-di-v-m">{{num-format points}}</span>\r\n                        {{/if}}\r\n                    {{/if}}\r\n                </div>\r\n                {{#if isManyDays}}\r\n                    <div class="x-fs-16 x-ff-m7 x-upper x-mt-08">{{#if forCheckout}}{{local "booking.total"}}{{else}}{{local "Property.avg_night"}}{{/if}}</div>\r\n                {{else}}\r\n                    <div class="x-fs-16 x-ff-m7 x-upper x-mt-08">{{local "general.avg_night"}}</div>\r\n                {{/if}}\r\n            {{/if}}\r\n        {{/if}}\r\n        <div class="x-mt-13">\r\n            {{#if expandAll}}\r\n                <span class="x-fs-15 x-di x-di-v-m x-ff-mh x-fc-azure x-upper x-default">\r\n                    <div style="padding: 8px 0">{{local "booking.rate_selected"}}</div>\r\n                    <div class="book2-updated-tip x-fs-12 x-fc-green x-al-c" style="height: 0px" data-bed-type="{{data.ratecode}}">\r\n                        <span class="x-fs-16 x-di x-di-v-m icon-icon_I009"></span> {{local "booking.updated"}}\r\n                    </div>\r\n                </span>\r\n                <span class="x-fs-32 x-di x-di-v-m x-radio x-fc-azure x-ml-08 x-default checked"></span>\r\n            {{else}}\r\n                <span class="x-fs-15 x-di x-di-v-m x-ff-mh x-fc-azure x-upper x-default">{{local "booking.select_this_rate"}}</span>\r\n                <span class="x-fs-32 x-di x-di-v-m x-radio x-fc-azure x-ml-08 x-pointer" data-item="select"></span>\r\n            {{/if}}\r\n        </div>\r\n    </div>\r\n</div>'},{}],255:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:!1})},{"backbone.marionette":6}],254:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../../../../../common/count"),a=e("../../../../../../common/short");t.exports=c.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),ui:{count:"[data-item='count']",update:".book2-updated-tip"},serializeData:function(){var e=this,t=e.model.toJSON(),i=e.options.rootState;return{currency:i.getCurrency(),isUseMoney:i.isTrade(i.VIEW_TRADES.USE_MONEY),isUsePoint:i.isTrade(i.VIEW_TRADES.USE_POINT),data:t,multiple:parseInt(i.getParam().rooms)>1}},initialize:function(){a.autoCreate(this)},onRender:function(){this.createCountView()},createCountView:function(){var e=this,t=e.model.toJSON(),i=e.options.rootState,n=parseFloat(t.maxquantity);0===t.displayrate&&i.isStayModified&&!i.isStayModified({key:t.key,categoryid:t.categoryid})&&i.setStayCount({key:t.key,categoryid:t.categoryid,quantity:1});var c=i.getStayCount({key:t.key,categoryid:t.categoryid});l.autoCreate(this.ui.count,{minValue:0,maxValue:n&&n>0?n:99,value:c||0,change:jQuery.proxy(e.__onChangeCount,this),label:i18n.t("booking.add_to_booking"),single:!0})},__onChangeCount:function(e){var t=this,i=t.model.toJSON(),n={roomtypecode:i.roomtypecode,ratecode:i.ratecode,roomid:i.roomid},c=t.options.rootState;c.setStayCount({key:i.key,categoryid:i.categoryid,quantity:e}),c.trigger("changePartCount",n),1===i.maxquantity?t.__showUpdateTip():t.__fadeUpdateTip()},__showUpdateTip:function(){this.ui.update.finish&&this.ui.update.finish().show().delay(5e3).queue(function(){jQuery(this).fadeOut(400).dequeue()})},__fadeUpdateTip:n.debounce(function(){this.__showUpdateTip()},500)})},{"../../../../../../common/count":345,"../../../../../../common/short":350,"./template.hbs":253,"backbone.marionette":6,underscore:42}],253:[function(e,t,i){t.exports='<div class="x-fs-00 x-mt-16 x-nowrap">\r\n    <div class="book2-stay-image x-di x-di-v-t x-img" style="background-image: url(\'{{data.img}}\')"></div>\r\n    <div class="book2-stay-theme x-di x-di-v-t">\r\n        <div class="book2-stay-child x-fs-00 x-nowrap">\r\n            <div class="panel-1 x-di x-di-v-t x-normal">\r\n                <div><h4 class="x-fs-16 x-ff-wb">{{data.inventorycode}}</h4></div>\r\n                <div style="margin-top: 8px">\r\n                    <p class="x-fs-13 x-ff-sm x-lh-18 x-short" data-line="2">\r\n                        {{data.desc}}\r\n                    </p >\r\n                </div>\r\n            </div>\r\n            <div class="panel-2 x-di x-di-v-t x-normal">\r\n                <div>\r\n                    {{#if isUseMoney}}\r\n                        <span class="x-fs-17 x-ff-wb x-di-v-t x-upper"><span class="x-fs-13 x-ff-wb x-di-v-t x-upper">+{{data.ratecurrency}}</span> {{price-format data.avgdisplayrate}}</span>\r\n                    {{/if}}\r\n                    {{#if isUsePoint}}\r\n                        <span class="x-fs-17 x-ff-wb x-di-v-t x-upper">{{num-format data.avgcostpoints}}</span>\r\n                    {{/if}}\r\n                </div>\r\n                <div class="x-mt-02">\r\n                    <span class="x-fs-12 x-ff-mh x-upper">{{#if multiple}}{{local "booking.per_room"}} {{/if}}{{data.pricingtype}}</span>\r\n                </div>\r\n                <div class="x-mt-10">\r\n                    <span class="x-fs-00" data-item="count"></span>\r\n                </div>\r\n                <div class="book2-updated-tip x-fs-12 x-mt-08 x-fc-green x-al-r">\r\n                    <span class="x-fs-16 x-di x-di-v-m icon-icon_I009"></span> {{local "booking.updated"}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],350:[function(e,t,i){function n(){jQuery("body").on("click",".x-short-ctrl",b),d.tracker.on("change:size",C)}function c(){jQuery("body").off("click",".x-short-ctrl",b),d.tracker.off("change:size",C)}function l(e){-1===I.indexOf(e)&&(I.push(e),1===I.length&&n(),e.hasAttribute("data-text")||e.setAttribute("data-text",(e.innerHTML||"").trim()),o(e))}function a(e){var t=I.indexOf(e);-1!==t&&(I.splice(t,1),0===I.length&&c())}function o(e,t){var i=e.getBoundingClientRect().height,n=e.getAttribute("data-line")||0,c=e.getAttribute("data-text")||"",l=e.getAttribute("data-more");if(n=parseInt(n),n&&c&&!l){for(;e.firstChild;)e.removeChild(e.firstChild);e.innerHTML="X";var a=!1,o=0,s=0;for(o=(n+1)*Math.ceil(e.getBoundingClientRect().height),e.innerHTML=c,s=Math.ceil(e.getBoundingClientRect().height);s>=o;){var g=c.replace(/((\s)*([a-zA-Z0-9\-&;]+|\W))(?=(<[^>]*>)*$)/,"");if(g=g.replace(/<([a-z]+?)(?:\s+?[^>]*?)?>\s*?<\/\1>/gi,""),g=g.replace(/<br\s*>|<\/br\s*>|<br\s*\/>/gi,""),g=g.replace(/<img(.*?)>/gi,""),g=g.replace(/<a.*?>(.*?)<\/a>/gi,""),g.length===c.length)break;a=!0,c=g,e.innerHTML=c,s=Math.ceil(e.getBoundingClientRect().height)}if(a){var d=r(c);if(!d){for(var I=Math.max(0,c.length-13);c.length>I;){var g=c.replace(/((\s)*([a-zA-Z0-9\-&;]+|\W))(?=(<[^>]*>)*$)/,"");if(g=g.replace(/<([a-z]+?)(?:\s+?[^>]*?)?>\s*?<\/\1>/gi,""),g=g.replace(/<br\s*>|<\/br\s*>|<br\s*\/>/gi,""),g=g.replace(/<img(.*?)>/gi,""),g=g.replace(/<a.*?>(.*?)<\/a>/gi,""),g.length===c.length)break;c=g}e.innerHTML=c+"..."}if(t){var b=e.getBoundingClientRect().height;e.innerHTML=e.getAttribute("data-text"),jQuery(e).css({height:i,overflow:"hidden"}).animate({height:b},500,function(){jQuery(e).css({height:"initial",overflow:"visible"}),d?e.innerHTML=c:e.innerHTML=c+"...";var t=document.createElement("span");t.className="x-short-ctrl",t.textContent=i18n.t("general.read_more"),e.appendChild(t)})}else{d?e.innerHTML=c:e.innerHTML=c+"...";var C=document.createElement("span");C.className="x-short-ctrl",C.textContent=i18n.t("general.read_more"),e.appendChild(C)}}}}function s(e){var t=e.getBoundingClientRect().height,i=e.getAttribute("data-text")||"",n=e.getAttribute("data-more");if(i&&n){for(;e.firstChild;)e.removeChild(e.firstChild);e.innerHTML=i;var c=document.createElement("span");c.className="x-short-ctrl",c.textContent=i18n.t("general.read_less"),e.appendChild(c);var l=e.getBoundingClientRect().height;jQuery(e).css({height:t,overflow:"hidden"}).animate({height:l},500,function(){jQuery(e).css({height:"initial",overflow:"visible"})})}}function r(e){return/<[^>]*>/.test(e)}var g=e("underscore"),d=e("../../ui/util"),I=[],b=function(e){var t=e.currentTarget,i=t.parentElement,n=i.getAttribute("data-text")||"",c=i.getAttribute("data-more");n&&(c?(i.setAttribute("data-more",""),o(i,!0)):(i.setAttribute("data-more","more"),s(i)))},C=g.debounce(function(e){I.forEach(function(e){o(e)})},500);t.exports={autoCreate:function(e,t){function i(){c=e.$(t.selector||".x-short"),c.each(function(){l(this)})}function n(){c&&c.each(function(){a(this)}),c=null}t=t||{};var c=null,o=!1;e.on("render",function(){setTimeout(function(){o||(n(),i())})}),e.on("before:render",function(){n()}),e.on("destroy",function(){n(),o=!0})}}},{"../../ui/util":2122,underscore:42}],1127:[function(e,t,i){function n(e){var t=jQuery.Deferred();return"function"==typeof e.then?e.then(function(e){t.resolve(e)},function(e){t.reject(e)}):t.resolve(e),t.promise()}var c=e("underscore"),l=e("backbone.marionette"),a=e("./google.maps.extend"),o=e("./google.maps.styles"),s=e("./google.maps.projection"),r=e("./google.maps.container"),g=e("../../helpers/requestAnimationProxy"),d=e("./google.maps.MarkerClusterer");t.exports=l.ItemView.extend({template:!1,className:function(){return"mh-maps-map-view"},onRender:function(){jQuery.when(n(a)).then(g(this.__initMap,this))},getZoom:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__getZoom,this))},setZoom:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__setZoom,this))},addZoom:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__addZoom,this))},setCenter:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__setCenter,this))},setRegion:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__setRegion,this))},delRegion:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__delRegion,this))},setActive:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__setActive,this))},fitBounds:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__fitBounds,this))},navigation:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__navigation,this))},openWindow:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__openWindow,this))},shutWindow:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__shutWindow,this))},pushMarker:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__pushMarker,this))},fadeMarker:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__fadeMarker,this))},wellMarker:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__wellMarker,this))},fromLatLngToContainerPixel:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__fromLatLngToContainerPixel,this))},fromContainerPixelToLatLng:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__fromContainerPixelToLatLng,this))},createClusterer:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__createClusterer,this))},removeClusterer:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__removeClusterer,this))},setLabelVisible:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__setLabelVisible,this))},setConst:function(e){this._set.setConst(e)},removeAll:function(e){if(this._set.removeAll(e),this._clusterers)for(var t in this._clusterers)this._clusterers[t].clearMarkers(!0)},__setLabelVisible:function(e,t,i){i?t.setOptions({styles:o.concat([{featureType:"all",elementType:"labels",stylers:[{visibility:"on"}]}])}):t.setOptions({styles:o.concat([{featureType:"all",elementType:"labels",stylers:[{visibility:"off"}]}])})},__getZoom:function(e,t,i){return t.getZoom()},__setZoom:function(e,t,i){t.setZoom(i)},__addZoom:function(e,t,i){t.setZoom(t.getZoom()+i)},__setCenter:function(e,t,i){t.setCenter(this.__LatLng(e,t,i))},__setRegion:function(e,t,i){var n=null,c=this;return c.__delRegion(e,t,i),"circle"==i.type&&(c._reg=new e.maps.Circle({center:c.__LatLng(e,t,i.center),radius:i.radius,strokeColor:"#31a2ac",fillColor:"#31a2ac",strokeOpacity:.8,fillOpacity:.2,strokeWeight:2,map:t}),n=function(n){var l=c.__LatLng(e,t,n),a=c.__LatLng(e,t,i.center);return e.maps.geometry.spherical.computeDistanceBetween(l,a)<=i.radius}),"polygon"==i.type&&(c._reg=new e.maps.Polygon({paths:i.paths.map(function(i){return c.__LatLng(e,t,i)},c),strokeColor:"#31a2ac",fillColor:"#31a2ac",strokeOpacity:.8,fillOpacity:.2,strokeWeight:2,map:t}),n=function(i){var n=c.__LatLng(e,t,i);return e.maps.geometry.poly.containsLocation(n,c._reg)}),{contains:function(e){return n?n(e):!1}}},__delRegion:function(e,t,i){var n=this;n._reg&&(n._reg.setMap(null),n._reg=null)},__setActive:function(e,t,i){this._set.setActive(i)},__fitBounds:function(e,t,i){var n=this,c=new e.maps.LatLngBounds;Array.isArray(i.bounds)?i.bounds.forEach(function(i){c.extend(n.__LatLng(e,t,i))}):(n._reg&&(c=n._reg.getBounds()),this._set.each(function(e){c.extend(e.get("marker").getPosition())}));var l=jQuery.Deferred();n._idle=!1,e.maps.event.trigger(t,"resize");var a=e.maps.event.addListenerOnce(t,"idle",function(){l.resolve()});return t.fitBounds(c),i.center?(l.then(function(){n._idle=!0,n.__setCenter(e,t,i.center);for(var l=t.getZoom(),a=t.getBounds(),o=c.getNorthEast(),s=c.getSouthWest();a&&l>1&&(!a.contains(o)||!a.contains(s));)n.__setZoom(e,t,--l),a=t.getBounds()}),setTimeout(function(){e.maps.event.removeListener(a),n._idle=!0,l.resolve()},5e3)):(n._idle=!0,setTimeout(function(){l.resolve()},5e3)),l},__navigation:function(e,t,i){var n=this;n._dis&&n._dis.setMap(null),n._dis=new e.maps.DirectionsRenderer({polylineOptions:{strokeOpacity:0,icons:[{icon:{path:"M0,3a3,3 0 1,0 6,0a3,3 0 1,0 -6,0",fillColor:"#a21a3b",fillOpacity:.8,strokeOpacity:0,scale:1},offset:"0",repeat:"10px"}]},preserveViewport:!0,suppressInfoWindows:!0,suppressMarkers:!0,directions:i,map:t})},__openWindow:function(e,t,i){var n=null,c=this;c.__shutWindow(e,t,i),void 0!=i&&(n=c._inf=new e.maps.HTMLWindow({position:c.__LatLng(e,t,i.position),content:i.content,map:t}),e.maps.event.addListener(n,"click",function(e){c.trigger("window:click",{flag:i,event:e})}),e.maps.event.addListener(n,"mouseenter",function(){c.trigger("window:mouseenter",i)}),e.maps.event.addListener(n,"mouseleave",function(){c.trigger("window:mouseleave",i)}))},__shutWindow:function(e,t,i){var n=this;n._inf&&(n._inf.setMap(null),n._inf=null)},__pushMarker:function(e,t,i){var n=this;if(Array.isArray(i))i.forEach(function(i){n.__pushMarker(e,t,i)});else{var c=new e.maps.HTMLMarker({position:n.__LatLng(e,t,i.position),content:i.content,map:t,arg:i});e.maps.event.addListener(c,"mouseenter",function(){n.trigger("marker:mouseenter",i)}),e.maps.event.addListener(c,"mouseleave",function(){n.trigger("marker:mouseleave",i)}),e.maps.event.addListener(c,"click",function(){n.trigger("marker:click",i)}),n._set.pushMarker(i,c)}},__fadeMarker:function(e,t,i){this._set.fadeMarker(i)},__wellMarker:function(e,t,i){this._set.wellMarker(i)},__fromLatLngToContainerPixel:function(e,t,i){return s.fromLatLngToContainerPixel(t,i)},__fromContainerPixelToLatLng:function(e,t,i){return s.fromContainerPixelToLatLng(t,i)},__LatLng:function(e,t,i){return new e.maps.LatLng(i.lat,i.lng)},__initMap:function(e){var t=this,i=new e.maps.Map(this.el,c.assign({mapTypeId:e.maps.MapTypeId.ROADMAP,styles:o,scrollwheel:!1,disableDefaultUI:!0,maxZoom:18,center:{lat:0,lng:0}},this.options.initMapOptions||{}));e.maps.event.addListener(i,"idle",function(){t._idle&&t.trigger("map:idle")}),e.maps.event.addListener(i,"zoom_changed",function(){t.trigger("map:zoom_changed")}),t._map.resolve(i)},__createClusterer:function(e,t,i){var n=this;if(this._clusterers||(this._clusterers={}),this._clusterers[i.name])return this._clusterers[i.name];var c=new d(t,null,{clusterClass:i.clusterClass,maxZoom:i.maxZoom,dataID:i.dataID,dataParent:i.dataParent,zoomOnClick:!0,hoverUrl:i.hoverImagePath,hoverMove:i.hoverMove,styles:[{url:i.imagePath,width:i.width,height:i.height,textColor:i.color,addStyle:i.addStyle}]});return this._clusterers[i.name]=c,e.maps.event.addListener(c,"clustermouseenter",function(e){n.trigger("cluster:mouseenter",e)}),e.maps.event.addListener(c,"clustermouseleave",function(e){n.trigger("cluster:mouseleave",e)}),c},__removeClusterer:function(e,t,i){return this._clusterers[i]?(this._clusterers[i].clearMarkers(),delete this._clusterers[i],!0):!1},panBy:function(e){return jQuery.when(n(a),this._map,e).then(g(this.__panBy,this))},__panBy:function(e,t,i){t.panBy(i.x||0,i.y||0)},initialize:function(){this._set=new r,this._map=jQuery.Deferred()}})},{"../../helpers/requestAnimationProxy":1149,"./google.maps.MarkerClusterer":1119,"./google.maps.container":1121,"./google.maps.extend":1123,"./google.maps.projection":1125,"./google.maps.styles":1126,"backbone.marionette":6,underscore:42}],1126:[function(e,t,i){t.exports=[{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#e0efef"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{hue:"#1900ff"},{color:"#c0e8e8"}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"on"},{lightness:700}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#7dcdcd"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#7dcdcd"}]},{featureType:"all",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"poi.business",elementType:"labels",stylers:[{visibility:"off"}]}]},{}],1125:[function(e,t,i){var n=null;t.exports={fromLatLngToContainerPixel:function(e,t){return n||this.__init(),n.setMap(e),n.getProjection().fromLatLngToContainerPixel(t)},fromContainerPixelToLatLng:function(e,t){return n||this.__init(),n.setMap(e),n.getProjection().fromContainerPixelToLatLng(t)},__init:function(){var e=function(){};e.prototype=new google.maps.OverlayView,
e.prototype.constructor=e,e.prototype.onAdd=function(){},e.prototype.draw=function(){},e.prototype.onRemove=function(){},n=new e}}},{}],1123:[function(e,t,i){var n=e("underscore"),c=e("./google.maps.api"),l=e("./extend/view");t.exports={then:function(e,t){return c.then(function(e){function t(t){var i=this;i.pinModel=t.arg,i.__poi=t.position,i.__ctx=new l({className:"mh-maps-extend-marker"}),i.__ctx.on("html:click",function(){e.maps.event.trigger(i,"click")}),i.__ctx.on("html:mouseenter",function(){e.maps.event.trigger(i,"mouseenter")}),i.__ctx.on("html:mouseleave",function(){e.maps.event.trigger(i,"mouseleave")}),i.__ctx.showView(t.content),i.__ctx.render(),i.setMap(t.map)}function i(t){var i=this;i.__poi=t.position,i.alignBottom_=!1,i.__ctx=new l({className:"mh-maps-extend-window"}),i.__ctx.on("html:click",function(t){e.maps.event.trigger(i,"click",t)}),i.__ctx.on("html:mouseenter",function(){e.maps.event.trigger(i,"mouseenter")}),i.__ctx.on("html:mouseleave",function(){e.maps.event.trigger(i,"mouseleave")}),i.__deferred=i.__ctx.showView(t.content),i.__ctx.render(),i.setMap(t.map)}return t.prototype=new e.maps.OverlayView,t.prototype.draw=function(){var e=this,t=e.getProjection().fromLatLngToDivPixel(e.__poi);jQuery(e.getPanes().overlayMouseTarget).append(e.__ctx.$el.css({top:t.y,left:t.x}))},t.prototype.remove=function(){this.__ctx.$el.detach()},t.prototype.getPosition=function(){return this.__poi},i.prototype=new e.maps.OverlayView,i.prototype.draw=function(){var e=this,t=e.getProjection().fromLatLngToDivPixel(e.__poi);jQuery(e.getPanes().floatPane).append(e.__ctx.$el.css({top:t.y-65,left:t.x})),this.panBox_()},i.prototype.remove=function(){this.__ctx.$el.detach()},i.prototype.getPosition=function(){return this.__poi},i.prototype.panBox_=n.debounce(function(){var e=this.__poi,t=this.getMap();if(t){var i=this.getProjection().fromLatLngToContainerPixel(e),n=t.getDiv(),c=n.offsetWidth,l=n.offsetHeight,a=this;a.__deferred.then(function(){var e=a.__ctx.el.clientWidth,n=a.__ctx.el.clientHeight,o=i.x-.5*e,s=i.y-n-65,r=10,g=10,d=0,I=0;r>o?d=o-r:o>c-e-r&&(d=o-(c-e-r)),g>s?I=s-g:s>l-n-g-65&&(I=s-(l-n-g-65)),(d||I)&&t.panBy(d,I)})}},100),e.maps.Polygon.prototype.getBounds=function(){for(var t=new e.maps.LatLngBounds,i=this.getPath(),n=0;n<i.length;n++)t.extend(i.getAt(n));return t},e.maps.HTMLMarker=t,e.maps.HTMLWindow=i,e}).then(e,t)}}},{"./extend/view":1118,"./google.maps.api":1120,underscore:42}],1120:[function(e,t,i){var n=e("../../../millennium-for-business/widget/ui/google-map/gmap/cdn");t.exports={then:function(e,t){var i=jQuery.Deferred();return n.then(e,t).then(function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise()}}},{"../../../millennium-for-business/widget/ui/google-map/gmap/cdn":1366}],1366:[function(e,t,i){var n=e("./key"),c=e("./sandbox"),l=e("elfjs").Promise,a=document.documentElement.lang;a&&(a="&language="+encodeURIComponent(a));var o=0,s=!0,r=null,g="3.21";t.exports={then:function(e,t){return(r=r||new l(function(e,t){function i(i){if(s){s=!1;for(var n=0;n<r.length;n++)r[n].dispose();var c=document.createElement("script");c.addEventListener("load",function l(){c.removeEventListener("load",l),e(google)}),c.addEventListener("error",function a(e){c.removeEventListener("error",a),t(e)}),c.setAttribute("type","text/javascript"),c.setAttribute("src",i),document.body.appendChild(c)}}function l(e){++o===r.length&&t(new Error("All gmap APIs fail"))}for(var r=[c("https://maps.google.com/maps/api/js?v="+g+"&libraries=geometry&key="+n+"&libraries=geometry"+a),c("https://ditu.gdgdocs.org/maps/api/js?v="+g+"&libraries=geometry&key="+n+"&libraries=geometry"+a)],d=0;d<r.length;d++)r[d].then(i,l)})).then(e,t)}}},{"./key":1367,"./sandbox":1368,elfjs:10}],1368:[function(e,t,i){var n=e("elfjs").Promise;t.exports=function(e){return new n(function(t,i){var n=document.createElement("iframe");return n.addEventListener("load",function c(){n.removeEventListener("load",c);var l=n.contentDocument||n.contentWindow.document,a=l.createElement("script");a.addEventListener("load",function o(){a.removeEventListener("load",o),t(e)}),a.addEventListener("error",function s(e){a.removeEventListener("error",s),i(e)}),a.setAttribute("type","text/javascript"),a.setAttribute("src",e),l.body.appendChild(a)}),n.addEventListener("error",function l(e){n.removeEventListener("error",l),i(e)}),n.setAttribute("frameborder","0"),n.setAttribute("style","width: 0; height: 0; border: 0; opacity: 0;"),document.body.appendChild(n),function(){n.parentNode&&n.parentNode.removeChild(n)}})}},{elfjs:10}],1367:[function(e,t,i){t.exports="AIzaSyDu3E2UtBYsFE9YhCOu-7ha_dEksVjbljY"},{}],1118:[function(e,t,i){var n=e("backbone.marionette"),c=e("../../../helpers/requestAnimationProxy");t.exports=n.LayoutView.extend({events:{click:function(e){e.stopPropagation(),this.trigger("html:click",e)},mouseenter:function(){this.trigger("html:mouseenter")},mouseleave:function(){this.trigger("html:mouseleave")}},regions:{view:"[data-google-view='content']"},template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},initialize:function(){this._defer=jQuery.Deferred()},onRender:function(){this._defer.resolve()},showView:function(e){return jQuery.when(e,this._defer).then(c(this.__showView,this))},__showView:function(e){this.getRegion("view").show(e)}})},{"../../../helpers/requestAnimationProxy":1149,"./template.hbs":1117,"backbone.marionette":6}],1149:[function(e,t,i){var n=e("./requestAnimationFrame");t.exports=function(e,t){return function(){var i=jQuery.Deferred(),c=Array.prototype.slice.apply(arguments);return n(function(){jQuery.when(e.apply(t,c)).then(function(e){i.resolve(e)})}),i.promise()}}},{"./requestAnimationFrame":1148}],1148:[function(e,t,i){t.exports=function(e){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}}(window)},{}],1117:[function(e,t,i){t.exports='<div data-google-view="content"></div>'},{}],1121:[function(e,t,i){var n=e("backbone");t.exports=n.Collection.extend({setConst:function(e){this._const=e},setActive:function(e){var t=this;t.each(function(i){var n=i.get("status");if(n==e||n.model==e)n.content.addClass("selected"),n.content.closest(".mh-maps-extend-marker").addClass("top");else{if(n==t._const||n.model==t._const)return;n.content.removeClass("selected"),n.content.closest(".mh-maps-extend-marker").removeClass("top")}})},removeAll:function(e){this.each(function(e){e.get("marker").setMap(null)}),this.reset()},pushMarker:function(e,t){this.add(new n.Model({id:e.id||e.model.id,status:e,marker:t}))},fadeMarker:function(e){var t=this;t.each(function(i){var n=i.get("status");n!=t._const&&n.model!=t._const&&(n==e||n.sorts==e?(n.content.removeClass("disabled"),n.content.closest(".mh-maps-extend-marker").removeClass("low")):(n.content.addClass("disabled"),n.content.closest(".mh-maps-extend-marker").addClass("low")))})},wellMarker:function(e){this.each(function(e){e.get("status").content.removeClass("disabled"),e.get("status").content.closest(".mh-maps-extend-marker").removeClass("low")})}})},{backbone:8}],1119:[function(e,t,i){function n(e,t,i){this.extend(n,google.maps.OverlayView),this.map_=e,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var c=i||{};this.gridSize_=c.gridSize||60,this.minClusterSize_=c.minimumClusterSize||2,this.maxZoom_=c.maxZoom||null,this.styles_=c.styles||[],this.imagePath_=c.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.dataID_=c.dataID||null,this.dataParent_=c.dataParent||null,this.clusterClass_=c.clusterClass||"marker-cluster",this.hoverUrl_=c.hoverUrl||null,this.imageExtension_=c.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,this.hoverMove_=c.hoverMove||null,void 0!=c.zoomOnClick&&(this.zoomOnClick_=c.zoomOnClick),this.averageCenter_=!1,void 0!=c.averageCenter&&(this.averageCenter_=c.averageCenter),this.setupStyles_(),this.setMap(e),this.prevZoom_=this.map_.getZoom();var l=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var e=l.map_.getZoom();l.prevZoom_!=e&&(l.prevZoom_=e,l.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){l.redraw()}),t&&t.length&&this.addMarkers(t,!1)}function c(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinClusterSize(),this.averageCenter_=e.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new l(this,e.getStyles(),e.getGridSize(),e.getDataID(),e.getClassName(),e.getHoverUrl(),e.getHoverMove(),e.getDataParent())}function l(e,t,i,n,c,a,o,s){e.getMarkerClusterer().extend(l,google.maps.OverlayView),this.styles_=t,this.padding_=i||0,this.cluster_=e,this.center_=null,this.map_=e.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.dataID=n,this.dataParent=s,this.clusterClass=c,this.hoverUrl_=a,this.hoverMove_=o,this.setMap(this.map_)}n.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m",n.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",n.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},n.prototype.onAdd=function(){this.setReady_(!0)},n.prototype.draw=function(){},n.prototype.setupStyles_=function(){if(!this.styles_.length)for(var e,t=0;e=this.sizes[t];t++)this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},n.prototype.fitMapToMarkers=function(){for(var e,t=this.getMarkers(),i=new google.maps.LatLngBounds,n=0;e=t[n];n++)i.extend(e.getPosition());this.map_.fitBounds(i)},n.prototype.setStyles=function(e){this.styles_=e},n.prototype.getStyles=function(){return this.styles_},n.prototype.getDataID=function(){return this.dataID_},n.prototype.getDataParent=function(){return this.dataParent_},n.prototype.getClassName=function(){return this.clusterClass_},n.prototype.getHoverUrl=function(){return this.hoverUrl_},n.prototype.getHoverMove=function(){return this.hoverMove_},n.prototype.isZoomOnClick=function(){return this.zoomOnClick_},n.prototype.isAverageCenter=function(){return this.averageCenter_},n.prototype.getMarkers=function(){return this.markers_},n.prototype.getTotalMarkers=function(){return this.markers_.length},n.prototype.setMaxZoom=function(e){this.maxZoom_=e},n.prototype.getMaxZoom=function(){return this.maxZoom_},n.prototype.calculator_=function(e,t){for(var i=0,n=e.length,c=n;0!==c;)c=parseInt(c/10,10),i++;return i=Math.min(i,t),{text:n,index:i}},n.prototype.setCalculator=function(e){this.calculator_=e},n.prototype.getCalculator=function(){return this.calculator_},n.prototype.addMarkers=function(e,t){for(var i,n=0;i=e[n];n++)this.pushMarkerTo_(i);t||this.redraw()},n.prototype.pushMarkerTo_=function(e){if(e.isAdded=!1,e.draggable){var t=this;google.maps.event.addListener(e,"dragend",function(){e.isAdded=!1,t.repaint()})}this.markers_.push(e)},n.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw()},n.prototype.removeMarker_=function(e){var t=-1;if(this.markers_.indexOf)t=this.markers_.indexOf(e);else for(var i,n=0;i=this.markers_[n];n++)if(i==e){t=n;break}return-1==t?!1:(e.setMap(null),this.markers_.splice(t,1),!0)},n.prototype.removeMarker=function(e,t){var i=this.removeMarker_(e);return!t&&i?(this.resetViewport(),this.redraw(),!0):!1},n.prototype.removeMarkers=function(e,t){for(var i,n=!1,c=0;i=e[c];c++){var l=this.removeMarker_(i);n=n||l}return!t&&n?(this.resetViewport(),this.redraw(),!0):void 0},n.prototype.setReady_=function(e){this.ready_||(this.ready_=e,this.createClusters_())},n.prototype.getTotalClusters=function(){return this.clusters_.length},n.prototype.getMap=function(){return this.map_},n.prototype.setMap=function(e){this.map_=e},n.prototype.getGridSize=function(){return this.gridSize_},n.prototype.setGridSize=function(e){this.gridSize_=e},n.prototype.getMinClusterSize=function(){return this.minClusterSize_},n.prototype.setMinClusterSize=function(e){this.minClusterSize_=e},n.prototype.getExtendedBounds=function(e){var t=this.getProjection(),i=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()),n=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),c=t.fromLatLngToDivPixel(i);c.x+=this.gridSize_,c.y-=this.gridSize_;var l=t.fromLatLngToDivPixel(n);l.x-=this.gridSize_,l.y+=this.gridSize_;var a=t.fromDivPixelToLatLng(c),o=t.fromDivPixelToLatLng(l);return e.extend(a),e.extend(o),e},n.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},n.prototype.clearMarkers=function(e){e?this.resetViewport():this.resetViewport(!0),this.markers_=[]},n.prototype.resetViewport=function(e){for(var t,i=0;t=this.clusters_[i];i++)t.remove();for(var n,i=0;n=this.markers_[i];i++)n.isAdded=!1,e&&n.setMap(null);this.clusters_=[]},n.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var t,i=0;t=e[i];i++)t.remove()},0)},n.prototype.redraw=function(){this.createClusters_()},n.prototype.distanceBetweenPoints_=function(e,t){if(!e||!t)return 0;var i=6371,n=(t.lat()-e.lat())*Math.PI/180,c=(t.lng()-e.lng())*Math.PI/180,l=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(c/2)*Math.sin(c/2),a=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),o=i*a;return o},n.prototype.addToClosestCluster_=function(e){for(var t,i=4e4,n=null,l=(e.getPosition(),0);t=this.clusters_[l];l++){var a=t.getCenter();if(a){var o=this.distanceBetweenPoints_(a,e.getPosition());i>o&&(i=o,n=t)}}if(n&&n.isMarkerInClusterBounds(e))n.addMarker(e);else{var t=new c(this);t.addMarker(e),this.clusters_.push(t)}},n.prototype.createClusters_=function(){if(this.ready_)for(var e,t=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),i=this.getExtendedBounds(t),n=0;e=this.markers_[n];n++)!e.isAdded&&this.isMarkerInBounds_(e,i)&&this.addToClosestCluster_(e)},c.prototype.isMarkerAlreadyAdded=function(e){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(e);for(var t,i=0;t=this.markers_[i];i++)if(t==e)return!0;return!1},c.prototype.addMarker=function(e){if(this.isMarkerAlreadyAdded(e))return!1;if(this.center_){if(this.averageCenter_){var t=this.markers_.length+1,i=(this.center_.lat()*(t-1)+e.getPosition().lat())/t,n=(this.center_.lng()*(t-1)+e.getPosition().lng())/t;this.center_=new google.maps.LatLng(i,n),this.calculateBounds_()}}else this.center_=e.getPosition(),this.calculateBounds_();e.isAdded=!0,this.markers_.push(e);var c=this.markers_.length;if(c<this.minClusterSize_&&e.getMap()!=this.map_&&e.setMap(this.map_),c==this.minClusterSize_)for(var l=0;c>l;l++)this.markers_[l].setMap(null);return c>=this.minClusterSize_&&e.setMap(null),this.updateIcon(),!0},c.prototype.getMarkerClusterer=function(){return this.markerClusterer_},c.prototype.getBounds=function(){for(var e,t=new google.maps.LatLngBounds(this.center_,this.center_),i=this.getMarkers(),n=0;e=i[n];n++)t.extend(e.getPosition());return t},c.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},c.prototype.getSize=function(){return this.markers_.length},c.prototype.getMarkers=function(){return this.markers_},c.prototype.getCenter=function(){return this.center_},c.prototype.calculateBounds_=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)},c.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},c.prototype.getMap=function(){return this.map_},c.prototype.updateIcon=function(){var e=this.map_.getZoom(),t=this.markerClusterer_.getMaxZoom();if(t&&e>t)for(var i,n=0;i=this.markers_[n];n++)i.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();var c=this.markerClusterer_.getStyles().length,l=this.markerClusterer_.getCalculator()(this.markers_,c);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(l),this.clusterIcon_.show()}},l.prototype.triggerClusterClick=function(e){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterclick",this.cluster_,e),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},l.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.div_.className=this.clusterClass,this.dataID&&this.div_.setAttribute("data-id",this.dataID),this.dataParent&&this.div_.setAttribute("data-Parent",this.dataParent),this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.innerHTML=this.sums_.text}var t=this.getPanes();t.overlayMouseTarget.appendChild(this.div_);var i=this,n=!1;google.maps.event.addDomListener(this.div_,"click",function(e){n||i.triggerClusterClick(e)}),google.maps.event.addDomListener(this.div_,"mousedown",function(){n=!1}),google.maps.event.addDomListener(this.div_,"mousemove",function(){n=!0}),google.maps.event.addDomListener(this.div_,"mouseenter",function(){if(i.hoverUrl_&&(i.div_.style.backgroundImage="url("+i.hoverUrl_+")"),i.hoverMove_){var e=parseInt(jQuery(i.div_).css("background-position-y"));jQuery(i.div_).css("background-position-y",e-61+"px")}google.maps.event.trigger(i.cluster_.getMarkerClusterer(),"clustermouseenter",i.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseleave",function(){if(i.hoverUrl_&&(i.div_.style.backgroundImage="url("+i.url_+")"),i.hoverMove_){var e=parseInt(jQuery(i.div_).css("background-position-y"));jQuery(i.div_).css("background-position-y",e+61+"px")}google.maps.event.trigger(i.cluster_.getMarkerClusterer(),"clustermouseleave",i.cluster_)})},l.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return"object"==typeof this.iconAnchor_&&2===this.iconAnchor_.length?(t.x-=this.iconAnchor_[0],t.y-=this.iconAnchor_[1]):(t.x-=parseInt(this.width_/2,10),t.y-=parseInt(this.height_/2,10)),t},l.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px"}},l.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},l.prototype.show=function(){if(this.div_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.style.display=""}this.visible_=!0},l.prototype.remove=function(){this.setMap(null)},l.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},l.prototype.setSums=function(e){this.sums_=e,this.text_=e.text,this.index_=e.index,this.div_&&(this.div_.innerHTML=e.text),this.useStyle()},l.prototype.useStyle=function(){var e=Math.max(0,this.sums_.index-1);e=Math.min(this.styles_.length-1,e);var t=this.styles_[e];this.url_=t.url,this.height_=t.height,this.width_=t.width,this.textColor_=t.textColor,this.anchor_=t.anchor,this.textSize_=t.textSize,this.backgroundPosition_=t.backgroundPosition,this.iconAnchor_=t.iconAnchor,this.addStyle=t.addStyle},l.prototype.setCenter=function(e){this.center_=e},l.prototype.createCss=function(e){var t=[];t.push("background-image:url("+this.url_+");");var i=this.backgroundPosition_?this.backgroundPosition_:"0 0";t.push("background-position:"+i+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?t.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):"number"==typeof this.anchor_[0]&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_?t.push("height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;"):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?t.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):t.push("width:"+this.width_+"px; text-align:center;")):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var n=this.textColor_?this.textColor_:"black",c=this.textSize_?this.textSize_:11;return t.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+n+"; position:absolute; font-size:"+c+"px; font-family:Arial,sans-serif; font-weight:bold"),t.push(this.addStyle),t.join("")},t.exports=n},{}],1174:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:function(t){return Handlebars.compile(e("../../assets/icon/template.hbs"))(t)},ui:{mapIcon:".mh-maps-icon-back"},className:function(){return"mh-maps-icon-view"},addClass:function(e){this.$el&&this.$el.addClass(e)},hasClass:function(e){return this.$el?this.$el.hasClass(e):!1},removeClass:function(e){this.$el&&this.$el.removeClass(e)},closest:function(e){return this.$el?this.$el.closest(e):void 0},onRender:function(){var e=this,t=jQuery(".c-lengs-page");this.model.get("IFHOTEL")&&(this.addClass("selected-hotel"),this.hasClass("selected-hotel")&&t.hasClass("c-hotel-m-social")&&(e.ui.mapIcon.find("svg").remove(),e.ui.mapIcon.append('<svg xmlns="http://www.w3.org/2000/svg" width="120%" height="170%" viewBox="0 0 38 46" style="margin-top: -65%;"><path d="M 6 36 A 24 24 0 0 1 0 19 A 19 19 0 0 1 19 0 A 19 19 0 0 1 38 19 A 24 24 0 0 1 33 34 L 19 55 Z" stroke-width="0" fill="#000"></path></svg>')))}})},{"../../assets/icon/template.hbs":1132,"backbone.marionette":6}],1132:[function(e,t,i){t.exports='<div style="color: {{rgba}}">\r\n    {{#if event}}\r\n        <div class="mh-maps-icon-sign event">\r\n            <img width="50" height="50" src="/assets/img/maps/event.gif" alt="">\r\n        </div>\r\n    {{else}}\r\n        <div class="mh-maps-icon-sign"></div>\r\n    {{/if}}\r\n        <div class="mh-maps-icon-back">\r\n            <svg xmlns="http://www.w3.org/2000/svg" width="{{#if IFHOTEL}}120%{{else}}100%{{/if}}" height="{{#if IFHOTEL}}120%{{else}}100%{{/if}}" viewBox="0 0 38 46">\r\n                <path d="M 6 33 A 19 19 0 0 1 0 19 A 19 19 0 0 1 19 0 A 19 19 0 0 1 38 19 A 19 19 0 0 1 32 33 L 19 45 Z" stroke-width="0" fill="#08f"></path>\r\n                <path d="M 4 19 A 15 15 0 0 0 34 19 A 15 15 0 0 0 4 19 Z" stroke-width="0" fill="#fff"></path>\r\n                <path d="M 9 30.2 A 15 15 0 0 1 4 19 A 15 15 0 0 1 19 4 A 15 15 0 0 1 34 19 A 15 15 0 0 1 29 30.2 L 19 39 Z" stroke-width="0" fill="#fff"></path>\r\n            </svg>\r\n        </div>\r\n        <div class="mh-maps-icon-fore">\r\n            <span class="{{icon}}"></span>\r\n        </div>\r\n    {{#if count}}\r\n        <div class="mh-maps-icon-numb">{{count}}</div>\r\n    {{/if}}\r\n</div>\r\n{{#if label}}\r\n    <div class="mh-maps-icon-label">{{label}}</div>\r\n{{/if}}'},{}],345:[function(e,t,i){var n=Handlebars.compile(['<span class="x-di x-di-v-m x-fs-16 x-number icon-icon_B024"></span>','<span class="x-di x-di-v-m x-fs-16 x-ml-10 x-none">{{value}}</span>','<span class="x-di x-di-v-m x-fs-16 x-number icon-icon_B023 x-ml-10"></span>'].join("")),c=Handlebars.compile(['<span class="x-di x-di-v-m x-fs-14 x-ff-sm">{{label}}</span>','<span class="x-di x-di-v-m x-fs-18 x-ml-06 x-pointer x-check x-check-green"></span>'].join(""));t.exports={autoCreate:function(e,t){e.empty();t.single&&1===t.maxValue?this.__appendCheckTemp(e,t):this.__appendCountTemp(e,t)},__appendCheckTemp:function(e,t){function i(){t.value?n.eq(1).addClass("checked"):n.eq(1).removeClass("checked")}var n=jQuery(c(t));t.value=Math.max(0,Math.min(1,t.value)),n.eq(1).on("click",function(){t.value=2+~t.value,i(),t.change&&t.change(t.value)}),i(),e.append(n)},__appendCountTemp:function(e,t){function i(){t.value<=t.minValue?c.eq(0).addClass("disabled"):c.eq(0).removeClass("disabled"),t.value>=t.maxValue?c.eq(2).addClass("disabled"):c.eq(2).removeClass("disabled"),c.eq(1).html(t.value)}var c=jQuery(n(t));c.eq(0).on("click",function(){t.value>t.minValue&&(t.value--,i(),t.change&&t.change(t.value))}),c.eq(2).on("click",function(){t.value<t.maxValue&&(t.value++,i(),t.change&&t.change(t.value))}),i(),e.append(c)}}},{}],220:[function(e,t,i){var n=e("moment"),c=e("backbone.marionette"),l=e("../../../../global-booking-widget/prop-page/01-article/03-dates/calendar/view"),a=e("../../../../global-booking-widget/prop-page/01-article/03-dates/calendar/locals"),o=e("../../../../ui/util"),s=o.getDateFormat(),r=["change:checkin","change:checkout"].join(" ");t.exports=c.LayoutView.extend({template:Handlebars.compile(e("./template.hbs")),className:"book2-calendar",regions:{date:"[data-region='date']"},ui:{prev:"[data-item='prev']",next:"[data-item='next']",prev_text:"[data-item='prev_text']",next_text:"[data-item='next_text']"},events:{"click @ui.prev":function(e){e.stopPropagation(),this.__showPrevCalendar()},"click @ui.next":function(e){e.stopPropagation(),this.__showNextCalendar()},"click [data-item='c-rate-calendar']":function(){var e=this,t=e.options.rootState;4!=t.getStyle()?(t.setLastStyle(t.getStyle()),t.isFinal()&&t.trigger("changeViewStyle",t.VIEW_STYLES.HOTEL_BY_CALENDAR)):t.isFinal()&&t.trigger("expandChildView")}},serializeData:function(){var e=this.model.toJSON();return{checkin:e.checkin?n(e.checkin).format(s):"dd/mm/yyyy",checkout:e.checkout?n(e.checkout).format(s):"dd/mm/yyyy"}},initialize:function(){var e=this,t=e.options.rootState;e.showRate=t.hasRateCalendar(),e.__renderDeferred=jQuery.Deferred(),e.listenTo(t,"expandCalendar",e.expandCalendar),e.listenTo(t,"updateDate",e.hideCalendarView),e.listenTo(e.model,r,this.render)},onRender:function(){this.__renderDeferred.resolve()},expandCalendar:function(e){return this.__renderDeferred.then(jQuery.proxy(this.__expandCalendar,this,e))},hideCalendarView:function(e){return this.__renderDeferred.then(jQuery.proxy(this.__hideCalendarView,this,e))},__expandCalendar:function(e){e?this.__showNextCalendar():this.__showPrevCalendar()},__showPrevCalendar:function(){var e=this,t=e.model.toJSON();e.ui.next_text.css("background-color","transparent"),e.ui.prev_text.css("background-color","rgba(63,171,180, .1)");var i=new l({noClickOff:this.options.noClickOff,alwaysEditNextDate:this.options.alwaysEditNextDate,showRate:this.showRate});i.on("date:been:select",function(i){var n=i,c=t.checkout,l=!0;(null==c||n>=c)&&(c=a.nextDate(n));var o={prevDate:n,nextDate:c};l?e.__showNextCalendar(n):e.__hideCalendarView(o)}),i.on("date:will:select",function(e){var n=e,c=t.checkout;(null==c||n>=c)&&(c=a.nextDate(n));var l={prevDate:n,nextDate:c};i.showDateCSS(l)}),i.on("date:cancel",function(){e.__hideCalendarView()}),i.initOptions(e.__params()),e.getRegion("date").show(i)},__showNextCalendar:function(e){var t=this,i=t.model.toJSON();t.ui.prev_text.css("background-color","transparent"),t.ui.next_text.css("background-color","rgba(63,171,180, .1)");var n=new l({noClickOff:this.options.noClickOff,showRate:this.showRate});n.on("date:been:select",function(n){if(n>a.nowDate()){var c=e||i.checkin,l=n;(null==c||c>=l)&&(c=a.prevDate(l));var o={prevDate:c,nextDate:l};t.__hideCalendarView(o)}}),n.on("date:will:select",function(t){if(t>a.nowDate()){var c=e||i.checkin,l=t;(null==c||c>=l)&&(c=a.prevDate(l));var o={prevDate:c,nextDate:l};n.showDateCSS(o)}}),n.on("date:cancel",function(){t.__hideCalendarView()}),n.initOptions(t.__params(e)),t.getRegion("date").show(n)},__hideCalendarView:function(e){this.ui.prev_text.css("background-color","transparent"),this.ui.next_text.css("background-color","transparent"),this.getRegion("date").empty(),e&&this.model.set({checkin:e.prevDate,checkout:e.nextDate}),this.trigger("hide:calendar")},__params:function(e){var t=this,i=this.model.toJSON();return e=e||i.checkin,{nowMonth:e?new Date(e.getFullYear(),e.getMonth(),1):void 0,prevDate:e,nextDate:i.checkout,showRate:t.showRate}}})},{"../../../../global-booking-widget/prop-page/01-article/03-dates/calendar/locals":935,"../../../../global-booking-widget/prop-page/01-article/03-dates/calendar/view":938,"../../../../ui/util":2122,"./template.hbs":219,"backbone.marionette":6,moment:16}],938:[function(e,t,i){var n=e("backbone.marionette"),c=e("./locals");t.exports=n.ItemView.extend({ui:{cells:".x-solar-cell",validDateItem:".x-solar-item.valid-date"},events:{"click .x-solar-icon-prev, .icon-icon_chervonLeft":function(e){this.goToPrevMonth(e)},"click .x-solar-icon-next, .icon-icon_chervonRight":function(e){this.goToNextMonth(e)},"click      @ui.validDateItem":function(e){e.stopPropagation();var t=jQuery(e.currentTarget),i=t.find(".x-solar-cell"),n=i.find(".x-solar-text");n.length&&this.trigger("date:been:select",new Date(i.attr("data-date")))},"mouseenter @ui.validDateItem":function(e){e.stopPropagation();var t=jQuery(e.currentTarget),i=t.find(".x-solar-cell"),n=i.find(".x-solar-text");n.length&&this.trigger("date:will:select",new Date(i.attr("data-date")))},"mouseleave @ui.validDateItem":function(){this.__rendered&&this.showDateCSS({prevDate:this.prevDate,nextDate:this.nextDate,currentDate:this.currentDate})}},template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},className:function(){return"x-solar"},serializeData:function(){return{weeks:c.weeks_short,title:c.months[this.nowMonth.getMonth()]+" "+this.nowMonth.getFullYear(),days:c.getDays(this.nowMonth,c.nowDate()),prev:c.nowMonth()<this.nowMonth,next:this.maxMonth?this.maxMonth>this.nowMonth:!0,showRate:this.showRate}},initialize:function(e){this.maxMonth=null,this.nowMonth=c.nowMonth(),this.showRate=e.showRate,this.options.noClickOff||(this.cancelFN=jQuery.proxy(this.__undo,this))},onDestroy:function(){this.__rendered=!1,this.options.noClickOff||jQuery(document).off("click",this.cancelFN)},onRender:function(){this.options.noClickOff||jQuery(document).off("click",this.cancelFN).on("click",this.cancelFN),this.__rendered=!0,this.showDateCSS({prevDate:this.prevDate,nextDate:this.nextDate,currentDate:this.currentDate})},initOptions:function(e){this.maxMonth=e.maxMonth,this.nowMonth=e.nowMonth||c.nowMonth(),this.prevDate=e.prevDate,this.nextDate=e.nextDate,this.currentDate=e.currentDate,this.showRate=e.showRate,this.__rendered&&this.render()},showDateCSS:function(e){if(this.ui.cells.removeClass("prev"),this.ui.cells.removeClass("next"),this.ui.cells.removeClass("note"),this.ui.cells.removeClass("current"),e.prevDate&&this.$el.find("[data-date='"+e.prevDate.toUTCString()+"']").addClass("prev"),e.nextDate)if(e.nextDate>e.prevDate)this.$el.find("[data-date='"+e.nextDate.toUTCString()+"']").addClass("next");else{var t=c.nextDate(e.prevDate);this.$el.find("[data-date='"+t.toUTCString()+"']").addClass("next")}if(e.prevDate&&e.nextDate)for(var i=c.nextDate(e.prevDate),n=c.prevDate(e.nextDate);n>=i;i.setDate(i.getDate()+1))this.$el.find("[data-date='"+i.toUTCString()+"']").addClass("note");e.currentDate&&this.$el.find("[data-date='"+e.currentDate.toUTCString()+"']").addClass("current")},__undo:function(e){0===this.$el.has(e.target).length&&this.trigger("date:cancel")},goToPrevMonth:function(e){e&&e.stopPropagation(),this.initOptions({nowMonth:c.prevMonth(this.nowMonth),prevDate:this.prevDate,nextDate:this.nextDate,currentDate:this.currentDate,maxMonth:this.maxMonth,showRate:this.showRate})},goToNextMonth:function(e){e&&e.stopPropagation(),this.initOptions({nowMonth:c.nextMonth(this.nowMonth),prevDate:this.prevDate,nextDate:this.nextDate,currentDate:this.currentDate,maxMonth:this.maxMonth,showRate:this.showRate})}})},{"./locals":935,"./template.hbs":937,"backbone.marionette":6}],937:[function(e,t,i){t.exports='<table class="x-solar-tab" border="0" cellpadding="0" cellspacing="0">\r\n    <thead>\r\n        <tr>\r\n            <th class="x-solar-item">\r\n                <div class="x-solar-cell">\r\n                    {{#if prev}}\r\n                        <span class="x-solar-icon x-solar-icon-prev"></span>\r\n                    {{/if}}\r\n                </div>\r\n            </th>\r\n            <th class="x-solar-date" colspan="5">{{title}}</th>\r\n            <th class="x-solar-item">\r\n                <div class="x-solar-cell">\r\n                    {{#if next}}\r\n                        <span class="x-solar-icon x-solar-icon-next"></span>\r\n                    {{/if}}\r\n                </div>\r\n            </th>\r\n        </tr>\r\n        <tr>\r\n            {{#each weeks}}\r\n                <th class="x-solar-item">\r\n                    <div class="x-solar-cell">\r\n                        <span class="x-solar-head">{{this}}</span>\r\n                    </div>\r\n                </th>\r\n            {{/each}}\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        {{#each days}}\r\n            <tr>\r\n                {{#each this}}\r\n                    <td class="x-solar-item {{#if this}}valid-date{{/if}}">\r\n                        <div class="x-solar-cell" {{#if this}}data-date="{{this.UTC}}"{{/if}}>\r\n                            {{#if this}}\r\n                                {{#if this.live}}\r\n                                    <span class="x-solar-mask">\r\n                                        <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 16">\r\n                                            <path d="M 0 0 V 0 16 H 15 L 20 8 L 15 0 Z" class="prev"/>\r\n                                            <path d="M 5 0 L 0 8 L 5 16 H 20 V 0 Z" class="next"/>\r\n                                        </svg>\r\n                                    </span>\r\n                                    <span class="x-solar-text">{{this.text}}</span>\r\n                                {{else}}\r\n                                    <span class="x-solar-none">{{this.text}}</span>\r\n                                {{/if}}\r\n                            {{/if}}\r\n                        </div>\r\n                    </td>\r\n                {{/each}}\r\n            </tr>\r\n        {{/each}}\r\n        {{#if showRate}}\r\n            <tr>\r\n                <td colspan="7" class="x-solar-calendar-tip" data-item="c-rate-calendar">\r\n                    <div class="x-solar-tip-box">\r\n                        <span class="icon-icon_D007"></span><span class="x-solar-tip">{{local \'booking.try_rate_calendar\'}}</span>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        {{/if}}\r\n    </tbody>\r\n</table>';
},{}],935:[function(e,t,i){var n=window.local&&window.local.dates||{January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December",Sunday:"Sunday",Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday"},c=window.local&&window.local.dates_short||{January:"Jan",February:"Feb",March:"Mar",April:"Apr",May:"May",June:"Jun",July:"Jul",August:"Aug",September:"Sep",October:"Oct",November:"Nov",December:"Dec",Sunday:"Sun",Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat"};t.exports={weeks:[n.Sunday,n.Monday,n.Tuesday,n.Wednesday,n.Thursday,n.Friday,n.Saturday],weeks_short:[c.Sunday,c.Monday,c.Tuesday,c.Wednesday,c.Thursday,c.Friday,c.Saturday],months:[n.January,n.February,n.March,n.April,n.May,n.June,n.July,n.August,n.September,n.October,n.November,n.December],months_short:[c.January,c.February,c.March,c.April,c.May,c.June,c.July,c.August,c.September,c.October,c.November,c.December],getDays:function(e,t){for(var i=e.getFullYear(),n=e.getMonth(),c=new Date(i,n,1),l=new Date(i,n+1,0),a=c.getDay(),o=l.getDay(),s=new Date(i,n,0===a?1:1-a),r=new Date(i,n+1,6===o?0:6-o),g=[];r>=s;){var d,I=s.getDay(),b=s.getDate(),C=s.getMonth();0===I?(d=[],g.push(d)):d=g[g.length-1],C===n?d.push({UTC:s.toUTCString(),live:s>=t,text:b}):d.push(void 0),s.setDate(b+1)}return g},nowMonth:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),1)},changeMonth:function(e){var t=new Date;return new Date(t.getFullYear(),t.getMonth()+e,1)},prevMonth:function(e){return new Date(e.getFullYear(),e.getMonth()-1,1)},nextMonth:function(e){return new Date(e.getFullYear(),e.getMonth()+1,1)},nowDate:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},addDate:function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},prevDate:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()-1)},nextDate:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}}},{}],219:[function(e,t,i){t.exports='<div class="x-flex x-fs-00 x-pb-17 x-ml-23 x-mr-23 x-top-line x-pt-17" style="width: 86.4%;">\r\n    <div class="x-cell x-al-l" style="vertical-align: top">\r\n        <div class="x-nowrap">\r\n            <div class="x-di x-di-v-t x-pointer" data-item="prev">\r\n                <div>\r\n                    <span class="x-fs-16 x-fc-azure x-di x-di-v-m x-di-v-m icon-icon_D007"></span>\r\n                    <span class="x-fs-14 x-fc-azure x-di x-di-v-m x-ml-08 x-upper x-ff-mh x-none">{{local "booking.check_in"}}</span>\r\n                </div>\r\n                <div class="x-mt-08">\r\n                    <span class="x-fs-15 x-ff-sm x-fc-black x-pointer x-none" data-item="prev_text">{{checkin}}</span>\r\n                </div>\r\n            </div>\r\n            <div class="x-di x-di-v-t">\r\n                <div>\r\n                    <span class="x-fs-16 x-fc-azure x-pl-08 x-pr-08">-</span>\r\n                </div>\r\n                <div class="x-mt-08">\r\n                    <span class="x-fs-16 x-fc-black x-pl-08 x-pr-08">-</span>\r\n                </div>\r\n            </div>\r\n            <div class="x-di x-di-v-t x-pointer" data-item="next">\r\n                <div>\r\n                    <span class="x-fs-16 x-fc-azure x-di x-di-v-m x-di-v-m icon-icon_D007"></span>\r\n                    <span class="x-fs-14 x-fc-azure x-di x-di-v-m x-ml-08 x-upper x-ff-mh x-none">{{local "booking.check_out"}}</span>\r\n                </div>\r\n                <div class="x-mt-08">\r\n                    <span class="x-fs-15 x-ff-sm x-fc-black x-pointer x-none" data-item="next_text">{{checkout}}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="x-cell x-al-r" style="vertical-align: top">\r\n        <span class="x-fs-00 x-nowrap x-pointer" style="margin-top: 1px" data-item="prev">\r\n            <span class="x-fs-12 x-fc-azure x-di x-di-v-m icon-icon_J006"></span>\r\n            <span class="x-fs-12 x-fc-azure x-di x-di-v-m x-ff-wm x-none x-ml-04 x-under">{{local "checkout.edit"}}</span>\r\n        </span>\r\n    </div>\r\n</div>\r\n\r\n<div class="x-level x-level-2" data-region="date"></div>'},{}],349:[function(e,t,i){var n=e("./drag"),c=window.requestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},l=window.cancelAnimationFrame||function(e){return window.clearTimeout(e)};t.exports={autoCreate:function(e,t){var i=0;t=t||{},e.on("render",function(){var l=e.$(t.scroll||".x-scroll"),a=e.$(t.matter||".x-scroll-body"),o=e.$(t.slider||".x-slider"),s=e.$(t.runner||".x-runner"),r=0,g=0,d=!1,I=function(){var e=parseFloat(o.css("marginTop")),t=o.prop("clientHeight"),i=o.parent().prop("clientHeight");i>t&&l.prop("scrollTop",e/(i-t)*(l.prop("scrollHeight")-l.prop("clientHeight")))};o.on("click",function(e){e.stopPropagation()}),s.on("click",function(e){e.stopPropagation();var t=e.offsetY,i=o.prop("clientHeight"),n=o.parent().prop("clientHeight"),c=Math.max(0,Math.min(n-i,t-i/2));o.css("marginTop",c+"px"),I()}),l.on("mousewheel DOMMouseScroll",function(e){e.stopPropagation();var i=this.clientHeight,n=this.scrollHeight;if(n>i||t.lock){var c=this.scrollTop,l=e.originalEvent.wheelDelta?e.originalEvent.wheelDelta:-(e.originalEvent.detail||0);(l>0&&l>=c||0>l&&-1*l>=n-i-c)&&(this.scrollTop=l>0?0:n-i,e.preventDefault())}}),n(o,{lockX:!0,move:I});var b=function(){var e=l.prop("clientWidth"),t=a.prop("clientWidth"),n=l.prop("clientHeight"),s=a.prop("clientHeight"),I=l.prop("scrollTop");if(t-e>1&&l.css("width",t+(t-e)+"px"),e-t>1&&l.css("width",t+"px"),s>n){d===!1&&(d=!0,o.show());var C=o.parent().prop("clientHeight"),u=Math.max(30,n*C/s),m=I?I/(s-n)*(C-u):0;r!=u&&o.css("height",(r=u)+"px"),g!=m&&o.css("marginTop",(g=m)+"px")}else d===!0&&(d=!1,o.hide());i=c(b)};i=c(b)}),e.on("before:render",function(){l(i)}),e.on("destroy",function(){l(i)})}}},{"./drag":346}],346:[function(e,t,i){t.exports=function(e,t){t=t||{},e.each(function(){var e=0,i=0,n=function(n){return function(c){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();var l=Math.max(t.offset||0,c.clientX-e),a=Math.max(t.offset||0,c.clientY-i);n.parentNode&&(l=Math.min(l,n.parentNode.clientWidth-n.clientWidth),a=Math.min(a,n.parentNode.clientHeight-n.clientHeight)),1!=t.lockX&&(n.style.marginLeft=l+"px"),1!=t.lockY&&(n.style.marginTop=a+"px"),"function"==typeof t.move&&t.move.call(n)}}(this),c=function(e){return function(){jQuery(document).unbind("mousemove",n),jQuery(document).unbind("mouseup",c),document.all?(jQuery(e).unbind("losecapture",c),e.releaseCapture()):jQuery(window).unbind("blur",c),"function"==typeof t.stop&&t.stop.call(e)}}(this);jQuery(this).bind("mousedown",function(l){e=l.clientX-this.offsetLeft,i=l.clientY-this.offsetTop,jQuery(document).bind("mousemove",n),jQuery(document).bind("mouseup",c),document.all?(jQuery(this).bind("losecapture",c),this.setCapture()):(jQuery(window).bind("blur",c),l.preventDefault()),"function"==typeof t.start&&t.start.call(this)})})}},{}],2047:[function(e,t,i){t.exports=i=jQuery(".tpl-hero-newlook1").length?jQuery.Deferred().reject():jQuery.getScript("//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-55d5847455c942aa")},{}],2103:[function(e,t,i){var n=e("backbone"),c=e("underscore");i=t.exports=n.Model.extend({defaults:{page:0,perpage:10,itemsAttribute:"items"},initialize:function(e,t){var i=this;i.on("render:items",function(){Handlebars.registerHelper("display",function(e,t){return t[i.shouldDisplay(e)?"fn":"inverse"](this)})}).on("change:page",function(){i.get("page")>i.numPages()?i.set({page:i.numPages()?1:0},{silent:!0}):!i.get("page")&&i.numPages()&&i.set({page:1},{silent:!0}),1==i.get("page")&&i.set({perpage:t.view.perpage},{silent:!0})}).on("change:"+i.get("itemsAttribute"),function(){i.set({page:1})}).on("change:"+i.get("itemsAttribute"),function(){i.trigger("render:items")}).on("change:page change:perpage",function(){i.trigger("render:items")}).on("render:items",function(){i.UpdateAttributes(t.view.$el)}).set({perpage:t.view.perpage=t.view.$el.data("perpage")||i.get("perpage")}).trigger("change:page")},UpdateAttributes:function(e){e.attr({"data-page":this.get("page"),"data-perpage":this.get("perpage"),"data-count":this.getItems().length,"data-pages":this.numPages()})},getItems:function(){return this.get(this.get("itemsAttribute"))||[]},shouldDisplay:function(e){var t=c.indexOf(this.getItems(),e),i=(this.get("page")-1)*this.get("perpage");return!this.get("perpage")||t>=i&&t<i+this.get("perpage")},numPages:function(){return this.get("perpage")?Math.ceil(this.getItems().length/this.get("perpage")):this.getItems().length?1:0}})},{backbone:8,underscore:42}],777:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../ui/util"),o=e("./language/view"),s=e("./currency/view");t.exports=l.ItemView.extend({template:function(t){return Handlebars.compile(t.__renderPromiseResolved?e("./template.hbs"):"")(t)},ui:{gridView:"div.cl-container",language:".language",icon:"[data-icon='cl-icon']"},events:{"click [data-view]":function(e){var t=this.model.get("views")[jQuery(e.target).closest("[data-view]").data("view")];this.model.set("ICON_EL",jQuery(e.target).closest("[data-view]")),this.model.set({view:this.model.get("view")==t?null:t}),this.model.get("view")&&(this.ui.icon.addClass(t.iconName),this.ui.icon.show()),jQuery("#shopping-cart .tooltip").hide()},"click @ui.icon":function(){this.model.set({view:null}),this.ui.icon.hide()}},disableLanguage:function(){this.ui.language.attr("data-view","").addClass("disabled")},initialize:function(e){var t=this;a.tracker.on("click",function(e){jQuery(e.target).closest(t.el).length||t.model.set({view:null})}),t.model=new c.Model({views:{currency:new s,language:new o},view:null}).on("change:view",function(){t.removeIconClass(),t.model.previous("view")&&(t.model.previous("view").$el.detach(),jQuery('[data-icon="cl-icon"]').hide()),t.model.get("view")&&(t.trigger("cl-expanded"),t.ui.gridView.prepend(t.model.get("view").el)),t.model.get("ICON_EL").length&&t.model.get("ICON_EL").length>0&&t.__newLookAddFunction(),jQuery(".menu-wrapper").scrollTop(360),t.$el.attr("data-expanded",t.model.get("view")?t.model.get("view").className.replace(/show-/,""):"")}),t.model.set("_isIE",!!a.isIE()),t.model.on("change:_svgHTML",t.render),Handlebars.registerHelper("selected",function(e){return"currency"===e?t.model.get("views")[e].collection.selectedCode():t.model.get("views")[e].collection.displayCode()}),Handlebars.registerHelper("selectMark",function(e){return t.model.get("views")[e].collection.selectedMark()}),jQuery.when.apply(jQuery,n.map(n.values(t.model.get("views")),function(e){return e.collection.fetch().then(function(){e.render()})})).then(function(){t.model.set("__renderPromiseResolved",!0),t.render()}),a.isIE()||t.model.set("_svgHTML",jQuery("#currency-sprite").html())},removeIconClass:function(){this.ui.icon.removeClass("icon-currency icon-language"),this.ui.icon.hide()},__newLookAddFunction:function(){var e=this;e.model.get("ICON_EL").hasClass("show-icon")?(e.model.get("ICON_EL").removeClass("show-icon"),e.trigger("remove:nar:class",!1)):(e.$el.find(".user-cl").each(function(){jQuery(this).hasClass("show-icon")&&jQuery(this).removeClass("show-icon")}),e.trigger("remove:nar:class",!0),e.model.get("ICON_EL").addClass("show-icon"))}})},{"../ui/util":2122,"./currency/view":772,"./language/view":775,"./template.hbs":776,backbone:8,"backbone.marionette":6,underscore:42}],776:[function(e,t,i){t.exports='<!--<div data-view="currency" class="currency user-cl"><img class="flag" src="/assets/img/flags/{{code}}.svg" /> {{selected \'currency\'}}</div>-->\r\n<div data-view="sprite" style="display: none">{{{_svgHTML}}}</div>\r\n<div data-view="currency" class="currency user-cl">\r\n    {{#if _isIE}}\r\n        <img class="flag currency-icon" src="/assets/img/flags/{{selected \'currency\'}}.svg" />\r\n    {{else}}\r\n        <svg class="currency-icon" width="24px" height="25px" style="vertical-align: middle">\r\n            <use xlink:href="#{{selected \'currency\'}}"></use>\r\n        </svg>\r\n    {{/if}}\r\n    <!--Obtain national currency-->\r\n    <!--{{selectMark \'currency\'}}-->\r\n    <span class="cl-text" dir="ltr"><span>{{selected \'currency\'}}</span><span class="chervon-icon icon-icon_chervonUp"></span><span class="chervon-icon icon-icon_chervonDown"></span></span>\r\n</div>\r\n<div data-view="language" class="language user-cl">\r\n    <span class="icon-icon_A002 language-icon"></span>\r\n    <span class="cl-text" dir="ltr"><span>{{selected \'language\'}}</span><span class="chervon-icon icon-icon_chervonUp"></span><span class="chervon-icon icon-icon_chervonDown"></span></span>\r\n</div>\r\n<div class="cl-container">\r\n    <span data-icon="cl-icon" class="icon-icon_B017 cl-icon"></span>\r\n</div>'},{}],775:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("../../ui/util"),l=e("./collection");t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),collection:new l,tagName:"ul",className:"show-language",events:{"click li":function(e){var t=jQuery(e.target);"title"!=t.data("item")&&this.collection.at(t.index()).save().then(function(e){c.redirect(e.url)})}},initialize:function(){this.iconName="icon-language"}})},{"../../ui/util":2122,"./collection":773,"./template.hbs":774,"backbone.marionette":6,underscore:42}],774:[function(e,t,i){t.exports='{{#each items}}<li class="{{#if selected}}active{{/if}}">{{name}}</li>{{/each}}\r\n\r\n<li data-item="title" class="cl_title" style="width: 100%;font-size: 12px; color: #FFFFFF;height: 30px; line-height: 30px;text-transform: uppercase;position: absolute;top: 1rem;left: 0;">{{local \'signup.language_label\'}}</li>\r\n\r\n\r\n'},{}],773:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js"),l=function(){return c.getURL("api","account/preferences/lang")+(window.hotelId?"?hotel="+window.hotelId:"")};t.exports=n.Collection.extend({url:l,model:n.Model.extend({url:l}),selected:function(){return this.findWhere({selected:!0})?this.findWhere({selected:!0}).get("name"):"English"},selectedCode:function(){return this.findWhere({selected:!0})?this.findWhere({selected:!0}).get("code"):"EN"},displayCode:function(){return this.findWhere({selected:!0})?this.findWhere({selected:!0}).get("displaycode"):"EN"}})},{"../../../../config/host.js":45,backbone:8,underscore:42}],772:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("../../ui/util"),l=e("./collection");t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),tagName:"ul",className:"show-currency",collection:new l,events:{"click li":function(e){e.stopPropagation(),"title"!=jQuery(e.target).data("item")&&this.collection.find(function(t){return t.get("code")==jQuery(e.target).closest("li").data("code")&&t.get("mark")==jQuery(e.target).closest("li").data("mark")}).save().then(function(t){c.updateCurrencyInUrl(jQuery(e.target).closest("li").data("code"),!0)})}},initialize:function(){this.iconName="icon-currency"}})},{"../../ui/util":2122,"./collection":770,"./template.hbs":771,"backbone.marionette":6,underscore:42}],771:[function(e,t,i){t.exports='<li data-item="title" class="cl_title"\r\n    style="width: 100%;font-size: 12px; color: #FFFFFF;height: 30px; line-height: 30px;text-transform: uppercase;">{{local\r\n        \'signup.country_label\'}}</li>\r\n{{#each items}}\r\n    <li data-code="{{code}}" data-mark="{{mark}}" class="{{#if selected}}active{{/if}}">\r\n        {{#if _isIE}}\r\n            <img class="flag" src="{{media \'currency\' code}}" alt=""/>\r\n        {{else}}\r\n            {{#ifCond code \'==\' \'JPY\'}}\r\n                <img style="width: 25%; height: 2em" class="flag" src="{{media \'currency.JPY\'}}" alt=""/>\r\n            {{else}}\r\n                <svg width="25%" height="2em" style="vertical-align: middle">\r\n                    <use xlink:href="#{{code}}"></use>\r\n                </svg>\r\n            {{/ifCond}}\r\n        {{/if}}\r\n        <span style="width: 50%">{{code}}</span>\r\n        <!--<span>{{mark}}</span>-->\r\n    </li>\r\n{{/each}}\r\n'},{}],770:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../../config/host.js"),a=e("../../ui/util"),o=function(){return this.findWhere({selected:!0})?this.findWhere({selected:!0}).get("code"):"GBP"},s=function(){return this.findWhere({selected:!0})?this.findWhere({selected:!0}).get("mark"):"￡"};t.exports=c.Collection.extend({url:l.getURL("api","account/preferences/currency"),model:c.Model.extend({url:l.getURL("api","account/preferences/currency"),defaults:{_isIE:!!a.isIE()}}),selected:o,selectedCode:o,selectedMark:s,initialize:function(){var e=this;c.on("getCurrency",function(t){if("function"==typeof t)try{setTimeout(function(){try{t(e.findWhere({selected:!0}).get("code"))}catch(i){}},500)}catch(i){}})},parse:function(e){return c.trigger("sendCurrency",n.findWhere(e,{selected:!0}).code),e}})},{"../../../../config/host.js":45,"../../ui/util":2122,backbone:8,underscore:42}],174:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../abmb/stateful.js"),o=e("./room-lists.js"),s=e("./room-details/view"),r=e("./booking-hotel"),g=(e("../../booking/model"),e("../../user/model")),d=e("./booking-stickybar-view"),I=(e("../../../../config/host"),e("../../ui/util.js"));e("../assets/main-layout.hbs");e("../assets/available-room.sass");var b=c.Model.extend({});t.exports=l.LayoutView.extend(n.extend({},a,{el:".avaiable-room",template:!1,className:"tpl-booking",regions:{content:"#room-items-wrapper",details:"#room-details-wrapper"},ui:{content:"#room-items-wrapper",details:"#room-details-wrapper"},events:{},loadMore:function(){var e=this.$(".tpl-booking-room.hide");e.removeClass("hide"),this.$("#viewmore").remove(),this.showLowestICON(e)},showLowestICON:function(e){var t=this;e.each(function(){if(jQuery(this).hasClass("lowest")){var e=jQuery(this).find(".tpl-rooms-amenities span:nth-of-type(2)");e.tooltipster("open"),t.trigger("loadMoreHasLowest")}})},initialize:function(e){var t=this;t.bookingView=new r({rootView:t.options.rootView,model:e.bookingModel}),t.roomListView=new o({collection:t.collection,model:e.bookingModel}),t.roomListView.on("page:detail",function(e){t.setDetailPage(e)}),window.setTimeout(function(){t.setStickBar()},100)},setDetailPage:function(e){var t=this;jQuery(document.body).css("overflow","hidden");var i=this.$(this.ui.content).offset(),n={left:e.offset.left-i.left,top:e.offset.top-i.top},c=e.model.collection;c.map(function(e){return e.set("_old_property_gallery",!0)});var l=c.indexOf(e.model);e.model.set("_old_property_gallery",!0);var a=c.length,o=new s;o._data=e.model,o.on("book:now",function(e){window.location.href=jQuery("[data-id='"+e+"']>.tpl-book>[data-opt='book']").attr("href")}),o.on("view:prev",function(){l-1>-1&&(o.showPrev(c.at(--l)),o.pattern({index:l,count:a}))}),o.on("view:next",function(){a>l+1&&(o.showNext(c.at(++l)),o.pattern({index:l,count:a}))});var r=function(){I.ismobile()||(jQuery(window).scrollTop(i.top-82),t.bookingStickyBarView.$el.finish().hide())},g=jQuery(window).scrollTop();o.on("view:exit",function(){o.retract(n),jQuery(window).off("scroll",r),jQuery(document.body).css("overflow","auto"),jQuery("html,body").animate({scrollTop:g},500)}),t.getRegion("details").once("show",function(){o.pattern({index:l,count:a}),o.express(n),jQuery(window).on("scroll",r)}),o.on("view:express:floating",function(){t.$(t.ui.details).addClass("float"),o.showPrev(e.model)}),o.on("view:express:fastened",function(){t.$(t.ui.details).removeClass("float"),t.getRegion("content").empty({preventDestroy:!0})}),o.on("view:retract:floating",function(){t.$(t.ui.details).addClass("float")}),o.on("view:retract:fastened",function(){t.$(t.ui.details).removeClass("float"),t.getRegion("details").empty()}),o.once("view:express:fastened",function(){var e=function(){"#behavior=stopBack"!=window.location.hash&&o.trigger("view:exit")},n=function(e){0==t.$(t.ui.content).has(e.target).length&&0==t.$(t.ui.details).has(e.target).length&&o.trigger("view:exit")},c=window.location.hash;window.location.hash="#behavior=stopBack",jQuery(window).on("hashchange",e),jQuery(document).on("click",n),o.once("view:exit",function(){window.location.hash=c,jQuery(window).scrollTop(i.top-82),jQuery(window).off("hashchange",e),jQuery(document).off("click",n)})}),I.ismobile()||jQuery(window).scrollTop(i.top-82),t.getRegion("details").show(o)},setStickBar:function(){var e=this,t=new b,i=jQuery(jQuery.find('[data-module="booking-stickybar"]'));e.bookingStickyBarView=new d({model:t}),e.bookingStickyBarView.on("signon:click",function(){g.getInstance().trigger("req:login")}),i.append(e.bookingStickyBarView.render().el)},onRender:function(){this.loadMore()}}))},{"../../../../config/host":45,"../../abmb/stateful.js":72,"../../booking/model":406,"../../ui/util.js":2122,"../../user/model":2132,"../assets/available-room.sass":161,"../assets/main-layout.hbs":165,"./booking-hotel":170,"./booking-stickybar-view":171,"./room-details/view":183,"./room-lists.js":184,backbone:8,"backbone.marionette":6,underscore:42}],406:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("moment"),a=e("../ui/util");t.exports=c.Model.extend({hasValidDates:function(e){var t=this.get("dates");return t.checkin&&(t.checkout||e&&t.defaultCheckout)>t.checkin},isSearchable:function(){return this.get("hotel").code&&this.hasValidDates(!0)},isAmerican:function(){return/^US|United States$/i.test(this.get("hotel").country)},toQueryString:function(){return this.get("promocodeValid").packageurl?this.get("promocodeValid").packageurl:this.get("hotel").url+"?searchterm="+encodeURIComponent(this.get("searchTerm"))+"#rooms"},serialize:function(){return n.extend(n.pick(this.attributes,"hotel promocode promocodeValid dates cityid".split(" ")),{occupancy:this.get("occupancy").reduce(function(e,t){return t.get("value")&&(e[t.get("key")]=t.get("value")),e},{})})},flatten:function(e){var t=n.clone(this.get("promocode")),i=this.get("promocodeValid");if(e)for(p in i)i[p]||(t[p]="");return n.extend({hotelcode:this.get("hotel").code},{cityid:this.get("cityid")},{city:this.get("city")},this.get("dates"),t,this.serialize().occupancy)},getQueryParams:function(e){return jQuery.param(this.flatten(e))},set2:function(e,t,i){if(this.get(e)[t]!=i){var c={};c[e]=n.clone(this.get(e)),c[e][t]=i,this.set(c)}},save:function(){jQuery.cookie("booking.model",this.serialize(),{path:"/"})},fetch:function(){var e=this,t=jQuery.cookie("booking.model")||{occupancy:{},hotel:{},promocode:{},promocodeValid:{},dates:{}},i=a.queryparam();n.each(n.pairs(i),function(i){var n=i[0].split(".");2==n.length&&n[0]in t&&n[1]in t[n[0]]&&(t[n[0]][n[1]]=i[1]),i[0]in e.attributes.promocode&&(t.promocode[i[0]]="promo"==i[0]||"groupcode"==i[0]||"discountcode"==i[0]?i[1]:"true"==i[1]),i[0]in e.attributes.dates&&(t.dates[i[0]]=i[1]),"hotelcode"==i[0]&&(t.hotel.code=i[1]),e.get("occupancy").findWhere({key:i[0]})&&(t.occupancy[i[0]]=parseInt(i[1]))}),window.hotelcode&&(t.hotel.code=window.hotelcode);var c=l(t.dates.checkin),o=l(t.dates.checkout);c>o&&(t.dates.checkout=c.add(1,"days").format("YYYY-MM-DD")),e.set({hotel:n.extend(e.get("hotel"),t.hotel)}),e.set({promocode:n.extend(e.get("promocode"),t.promocode)}),e.set({promocodeValid:n.extend(e.get("promocodeValid"),t.promocodeValid)}),e.set({dates:n.extend(e.get("dates"),t.dates)}),n.each(n.pairs(t.occupancy),function(t){e.get("occupancy").findWhere({key:t[0]}).set({value:t[1]})})},search:function(){var e=this.get("bookingUrl");if(this.isSearchable()){if(e)return a.redirect(e);var t=this.get("dates");return t.checkout=t.checkout||t.defaultCheckout,this.set("dates",t),this.save(),a.redirect(this.toQueryString())}},initialize:function(e){var t=this;c.on("getBookingUrl",function(e){this.set("bookingUrl",e)}.bind(this)),t.set({hasCancel:e&&"hasCancel"in e?!!e.hasCancel:!1,persist:e&&"persist"in e?!!e.persist:!0,hotel:{code:"",url:"",name:""},promocode:{discountcode:"",groupcode:"",promo:"",AAA:!1,AARP:!1,GOV:!1,Accessible:!1},promocodeValid:e&&e.promocodeValid||{discountcode:!1,groupcode:!1,promo:!1,packageurl:""},dates:{checkin:l().add(7,"d").format("YYYY-MM-DD"),checkout:l().add(8,"d").format("YYYY-MM-DD")},occupancy:new c.Collection([{key:"rooms",name:"rooms",value:1,minValue:1,maxValue:4,label:i18n.t("booking.room"),labels:i18n.t("booking.rooms")},{key:"adults",name:"adults",value:1,minValue:1,maxValue:4,label:i18n.t("booking.adult"),labels:i18n.t("booking.adults")},{key:"children",name:"children",value:0,minValue:0,maxValue:4,label:i18n.t("booking.child"),labels:i18n.t("booking.children"),sublabel:i18n.t("booking.child_sublabel")}]),occupancySummary:"1 "+i18n.t("booking.adult")+" 0 "+i18n.t("booking.child"),adultCount:1,childCount:0}),t.on("change:hotel",function(){t.set({__searchable__:t.isSearchable()})}),t.on("change:hotel",function(){t.set({__us__:t.isAmerican()})}),t.on("change",function(){t.get("persist")&&t.save()}),t.get("occupancy").on("change",function(){var e=t.get("occupancy"),i=e.findWhere({key:"adults"}),n=i.get("value"),c=e.findWhere({key:"children"}),l=c.get("value");t.trigger("change",t,e),t.set({occupancySummary:n+" "+(n>1?i18n.t("booking.adults"):i18n.t("booking.adult"))+" "+l+" "+(l>1?i18n.t("booking.children"):i18n.t("booking.child")),adultCount:n,childCount:l})}),t.on("change:dates",function(){t.get("dates").checkin&&t.get("dates").checkout&&t.get("dates").checkout<=t.get("dates").checkin&&t.set2("dates","checkout",l(t.get("dates").checkin).add(1,"d").format("YYYY-MM-DD"))}),jQuery.cookie.json=!0,t.get("persist")&&t.fetch()}})},{"../ui/util":2122,backbone:8,moment:16,underscore:42}],184:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../model/room-collection"),a=e("../../abmb/stateful.js"),o=(e("../../../../config/host"),e("../../ui/util.js")),s=e("./item-small.js");e("../../quick-book-hotel/cookie-object"),c.CollectionView.extend({childView:s,childViewEventPrefix:"room:lists",onBeforeRender:function(){this.graySpaceImage&&this.graySpaceImage.remove()},onRender:function(){var e=jQuery("#graySpaceImage").val();e&&!o.ismobile()&&this.$el.children().length%2!=0&&(void 0==this.graySpaceImage&&(this.graySpaceImage=jQuery('<div class="tpl-booking-room"><div style="background-image: url(\''+e+'\')" class="tpl-booking-room-slider clearfix"><div class="tpl-holder"></div></div></div>')),this.$el.append(this.graySpaceImage))}}),t.exports=c.ItemView.extend(n.extend({},a,{el:".tpl-booking",template:!1,events:{"click .tpl-room-detail,h3":"viewDetail",'click [data-opt="book"]':"bookRoom","click .tpl-book-tip a":"login"},ui:{hasRooms:".tplbooking-roomselection",noRoom:".tplbooking-noroom",loadMore:".viewmore",compare:"#opt-compare"},login:function(){o.reqlogin()},bookRoom:function(e){var t=jQuery(e.currentTarget),i=t.parents(".tpl-booking-room"),n=i.data("id");window.location.href=urls.booking+"?categoryid="+n+"&"+self.model.getQueryParams(!0)},viewDetail:function(e){var t=this,i=jQuery(e.currentTarget),n=i.parents(".tpl-booking-room"),c=n.data("id"),l=this.collection.where({id:c});if(1==l.length&&t.trigger("page:detail",{model:l[0],offset:n.offset(),height:n.height(),width:n.width()}),o.ismobile()){var a=jQuery("#room-items-wrapper");a&&jQuery("html,body").animate({scrollTop:a.offset().top-40},500)}if(!o.ismobile()){var s=jQuery("#room-details-wrapper .room-details-view"),r="1"==window.PermanentlyDisplayOnHotel||"1"==PermanentlyDisplayOnHotel;r&&s.addClass("css-redefine")}},initialize:function(){},loadMore:function(){this.getPagination()},getPagination:function(){var e=this;e.pageIndex+=1,e.pageIndex+1>e.pageCount&&this.ui.loadMore.hide();var t=e.collection.slice(0,e.pageSize*e.pageIndex);e.collectionView.collection=new l(t),e.updateCompareButtonText(),e.collectionView.render()},onRender:function(){var e=this;e.totalCount=e.collection.length,e.pageCount=e.totalCount%e.pageSize==0?e.totalCount/e.pageSize:Math.floor(e.totalCount/e.pageSize)+1,e.getPagination();var t=this.collectionView.render().$el;e.ui.hasRooms.prepend(t),e.$el.find(".tpl-booking-header").hide()}}))},{"../../../../config/host":45,"../../abmb/stateful.js":72,"../../quick-book-hotel/cookie-object":1822,"../../ui/util.js":2122,"../model/room-collection":168,"./item-small.js":172,backbone:8,"backbone.marionette":6,underscore:42}],1822:[function(e,t,i){var n=e("underscore"),c=e("../ui/util"),l=e("moment");t.exports={resuming:!1,bookingWidgetResumed:!1,roomSectionResumed:!1,addOnResumed:!1,contentDefaults:{checkin:"",checkout:"",adult:"",child:"",promocode:"",groupcode:"",AAA:"",AARP:"",GOV:"",Accessible:"",categoryid:"",ratecode:"",roomtypecode:"",services:""},content:{checkin:"",checkout:"",adult:"",child:"",promocode:"",groupcode:"",AAA:"",AARP:"",GOV:"",Accessible:"",categoryid:"",ratecode:"",roomtypecode:"",services:""},save:function(e){this.content.softCache=e,jQuery.cookie("hotel-cookie",this.content,{path:"/"})},fetch:function(){var e=void 0;try{var t=jQuery.cookie("hotel-cookie")||jQuery.cookie()["hotel-cookie"];e=t&&JSON.parse(t)}catch(i){}this.content=e||n.clone(this.contentDefaults);var a=c.queryparam("checkin"),o=c.queryparam("checkout"),s=c.queryparam("adults"),r=c.queryparam("children"),g=c.queryparam("promo"),d=c.queryparam("groupcode"),I=c.queryparam("categoryid");if(a||o||s||r||g||d||I){a=a||l().add(7,"d").format("YYYY-MM-DD");var b=this;b.content.softCache?b.content=n.extend(b.content,{checkin:a||b.content.checkin,checkout:o||b.content.checkout||l(a).add(1,"d").format("YYYY-MM-DD"),adult:s||b.content.adult||1,child:r||b.content.child||0,promocode:g||b.content.promocode||"",groupcode:d||b.content.groupcode||"",categoryid:I||b.content.categoryid||""}):b.content=n.extend(b.content,{checkin:b.content.checkin||a,checkout:b.content.checkout||o||l(a).add(1,"d").format("YYYY-MM-DD"),adult:b.content.adult||s||1,child:b.content.child||r||0,promocode:b.content.promocode||g||"",groupcode:b.content.groupcode||d||"",categoryid:b.content.categoryid||I||""})}}}},{"../ui/util":2122,moment:16,underscore:42}],183:[function(e,t,i){var n=e("backbone.marionette"),c=e("../../../ui/util"),l=e("./item/view");t.exports=n.LayoutView.extend({ui:{prev:".room-details-tools-prev a",next:".room-details-tools-next a",exit:".room-details-tools-exit a",wrap:".room-details-body-view-wrapper"},events:{"click @ui.prev":function(){this.trigger("view:prev")},"click @ui.next":function(){this.trigger("view:next")},"click @ui.exit":function(){this.trigger("view:exit")}},regions:{prev:"[data-room-details-tabs-view='prev']",next:"[data-room-details-tabs-view='next']"},template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},className:function(){return"room-details-view"},pattern:function(e){this.ui.prev.removeClass("disabled"),this.ui.next.removeClass("disabled"),e.index<=0&&this.ui.prev.addClass("disabled"),e.index>=e.count-1&&this.ui.next.addClass("disabled")},express:function(e){var t=this;t.__floating("express"),t.__currentView?t.__currentView.express(e).then(function(){t.__fastened("express")}):t.__fastened("express")},retract:function(e){var t=this;t.__floating("retract"),t.__currentView?t.__currentView.retract(e).then(function(){t.__fastened("retract")}):t.__fastened("retract")},showPrev:function(e){var t=this,i=jQuery.Deferred(),n=new l({model:e});return n.on("book:now",function(e){t.trigger("book:now",e)}),this.__currentView?(t.getRegion("prev").empty({preventDestroy:!0}),t.getRegion("next").show(t.__currentView),t.getRegion("prev").show(t.__currentView=n),t.ui.wrap.finish(),c.ismobile()?(t.ui.wrap.css(c.isRTL()?"margin-right":"margin-left",0),i.resolve()):c.isRTL()?(t.ui.wrap.css("margin-right","-100%"),t.ui.wrap.animate({"margin-right":"0"},400,function(){i.resolve();
})):(t.ui.wrap.css("margin-left","-100%"),t.ui.wrap.animate({"margin-left":"0"},400,function(){i.resolve()}))):(this.showItem(t.__currentView=n),i.resolve()),i.promise()},showNext:function(e){var t=this,i=jQuery.Deferred(),n=new l({model:e});return n.on("book:now",function(e){t.trigger("book:now",e)}),this.__currentView?(t.getRegion("next").empty({preventDestroy:!0}),t.getRegion("prev").show(t.__currentView),t.getRegion("next").show(t.__currentView=n),t.ui.wrap.finish(),c.ismobile()?(t.ui.wrap.css(c.isRTL()?"margin-right":"margin-left","-100%"),i.resolve()):c.isRTL()?(t.ui.wrap.css("margin-right","0"),t.ui.wrap.animate({"margin-right":"-100%"},400,function(){i.resolve()})):(t.ui.wrap.css("margin-left","0"),t.ui.wrap.animate({"margin-left":"-100%"},400,function(){i.resolve()}))):(this.showItem(t.__currentView=n),i.resolve()),i.promise()},showItem:function(e){this.ui.wrap.finish(),this.ui.wrap.css(c.isRTL()?"margin-right":"margin-left","0"),this.getRegion("prev").show(e)},__floating:function(e){this.trigger("view:"+e+":floating")},__fastened:function(e){this.trigger("view:"+e+":fastened")},serializeData:function(){return window.lengsSonicalHotel&&!this._data?window.lengsSonicalHotel:this._data}})},{"../../../ui/util":2122,"./item/view":181,"./template.hbs":182,"backbone.marionette":6}],182:[function(e,t,i){t.exports='<div class="room-details-body-view-wrapper">\r\n    <div class="room-details-body-item" data-room-details-tabs-view="prev"></div>\r\n    <div class="room-details-body-item" data-room-details-tabs-view="next"></div>\r\n</div>\r\n<div class="room-details-zoom-view-wrapper">\r\n    <div class="room-details-tools">\r\n            {{#unless attributes._gbw_iftools}}\r\n                {{#if attributes._gbw_hotel_gallery}}\r\n                        <div class="room-details-tools-width pc-tools">\r\n                            <div class="room-details-tools-prev">\r\n                                <a href="javascript:void(0);"><span class="icon-icon_chervonLeft"></span>{{local "booking.previous_hotel"}}</a>\r\n                            </div>\r\n                            <div class="room-details-tools-next">\r\n                                <a href="javascript:void(0);">{{local "booking.next_hotel"}}<span class="icon-icon_chervonRight"></span></a>\r\n                            </div>\r\n                        </div>\r\n                        <div class="room-details-tools-width moble-tools">\r\n                            <div class="room-details-tools-prev">\r\n                                <a href="javascript:void(0);"><span class="icon-icon_chervonLeft"></span>{{local "general.prev"}}</a>\r\n                            </div>\r\n                            <div class="room-details-tools-next">\r\n                                <a href="javascript:void(0);">{{local "general.next"}}<span class="icon-icon_chervonRight"></span></a>\r\n                            </div>\r\n                        </div>\r\n                    {{else}}\r\n                     <div class="room-details-tools-width pc-tools">\r\n                         {{#if lengs_boolean}}\r\n                                 <div class="room-details-tools-prev">\r\n                                     <a href="javascript:void(0);"><span class="icon-icon_chervonLeft"></span>{{local \'Property.previous_suite\'}}</a>\r\n                                 </div>\r\n                                 <div class="room-details-tools-next">\r\n                                     <a href="javascript:void(0);">{{local \'Property.next_suite\'}}<span class="icon-icon_chervonRight"></span></a>\r\n                                 </div>\r\n                             {{else}}\r\n                                 <div class="room-details-tools-prev">\r\n                                     <a href="javascript:void(0);"><span class="icon-icon_chervonLeft"></span>{{local \'Property.previous_room\'}}</a>\r\n                                 </div>\r\n                                 <div class="room-details-tools-next">\r\n                                     <a href="javascript:void(0);">{{local \'Property.next_room\'}}<span class="icon-icon_chervonRight"></span></a>\r\n                                 </div>\r\n                         {{/if}}\r\n                    </div>\r\n                    <div class="room-details-tools-width moble-tools">\r\n                        <div class="room-details-tools-prev">\r\n                            <a href="javascript:void(0);"><span class="icon-icon_chervonLeft"></span>{{local "general.prev"}}</a>\r\n                        </div>\r\n                        <div class="room-details-tools-next">\r\n                            <a href="javascript:void(0);">{{local "general.next"}}<span class="icon-icon_chervonRight"></span></a>\r\n                        </div>\r\n                    </div>\r\n                {{/if}}\r\n            {{/unless}}\r\n            {{#if attributes._old_property_gallery}}\r\n            <div class="room-details-tools-exit">\r\n                <a href="javascript:void(0);"><span class="icon-icon_B017"></span></a>\r\n            </div>\r\n            {{else}}\r\n            <div class="room-details-tools-exit room-details-tools-exit-after">\r\n                <!--MHS-2667-->\r\n                <!--<a class="after-a" href="javascript:void(0);" style=""><span class="after-span icon-icon_B026"></span>{{local "booking.back_to_listing"}}</a>-->\r\n                <a class="after-a" href="javascript:void(0);" style=""><span class="after-span icon-icon_B017"></span></a>\r\n            </div>\r\n        {{/if}}\r\n    </div>\r\n</div>'},{}],181:[function(e,t,i){var n=e("backbone.marionette"),c=e("../../../../ui/util"),l=e("./album/view"),a=e("./rooms/view"),o=e("../../../model/gallery-imgs");e("backbone");e("../../../../ui/panoimage/jquery.drag"),t.exports=n.LayoutView.extend({ui:{album:".room-details-album-view",rooms:".room-details-rooms-view"},regions:{album:".room-details-album-view",rooms:".room-details-rooms-view"},template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},className:function(){return"room-details-rooms-view-item"},initialize:function(){var e=this;e.albumView=new l({model:this.model}),e.roomsView=new a({model:this.model}),e.roomsView.on("tab:change",function(t){e.albumView.tabChange(t)}),e.roomsView.on("book:now",function(t){e.trigger("book:now",t)})},onRender:function(){var e=this;this.model.attributes._gbw_hotel_gallery?o.search(e.model.attributes.hotelid).then(function(t){e.albumView.model.set("arc",t.arc),e.albumView.model.set("arc_first",t.arc[0]),e.getRegion("album").show(e.albumView),e.getRegion("rooms").show(e.roomsView)}):(e.getRegion("album").show(e.albumView),e.getRegion("rooms").show(e.roomsView))},express:function(e){return jQuery.when(this.__albumExpress(e),this.__roomsExpress(e))},retract:function(e){return jQuery.when(this.__albumRetract(e),this.__roomsRetract(e))},__albumExpress:function(e){var t=this,i=jQuery.Deferred();if(c.ismobile())setTimeout(function(){i.resolve()},0);else{if(t.ui.album.css({width:"94.34%",left:e.left,top:e.top,opacity:0}),c.isRTL()){var n=e.left-t.ui.album.width();t.ui.album.css({left:n}),t.ui.album.data("position",n)}t.ui.album.finish(),t.ui.album.animate({width:"100%",left:0,top:0,opacity:1},400,function(){t.albumView&&t.albumView.fadeIn(),i.resolve(),c.tracker.trigger("change:scrolltop")})}return i.promise()},__albumRetract:function(e){var t=this,i=jQuery.Deferred();return c.ismobile()?setTimeout(function(){i.resolve()},0):(t.ui.album.css({width:"100%",left:0,top:0,opacity:1}),t.ui.album.finish(),t.ui.album.animate({width:"94.34%",left:t.ui.album.data("position")||e.left,top:e.top,opacity:0},400,function(){i.resolve()})),i.promise()},__roomsExpress:function(e){var t=this,i=jQuery.Deferred();return c.ismobile()?setTimeout(function(){i.resolve()},0):(t.ui.rooms.css({left:c.isRTL()?"-100%":"100%",opacity:0}),t.ui.rooms.finish(),t.ui.rooms.animate({left:0,opacity:1},400,function(){i.resolve()})),i.promise()},__roomsRetract:function(e){var t=this,i=jQuery.Deferred();return c.ismobile()?setTimeout(function(){i.resolve()},0):(t.ui.rooms.css({left:0,opacity:1}),t.ui.rooms.finish(),t.ui.rooms.animate({left:c.isRTL()?"-100%":"100%",opacity:0},400,function(){i.resolve()})),i.promise()}})},{"../../../../ui/panoimage/jquery.drag":2105,"../../../../ui/util":2122,"../../../model/gallery-imgs":166,"./album/view":177,"./rooms/view":179,"./template.hbs":180,backbone:8,"backbone.marionette":6}],180:[function(e,t,i){t.exports='<div class="room-details-tabs-item album">\r\n    <div class="room-details-album-view"></div>\r\n</div>\r\n<div class="room-details-tabs-item rooms">\r\n    <div class="room-details-rooms-view"></div>\r\n</div>'},{}],179:[function(e,t,i){function n(e,t,i,n){return{x:e+i*Math.cos(n*Math.PI/180),y:t+i*Math.sin(n*Math.PI/180)}}var c=e("underscore"),l=e("backbone.marionette"),a=e("../../../../../ui/util"),o=e("../../../../../ui/readmore/view"),s=e("../../../../../booking-2.1/06-popping/view"),r=e("../../../../../booking-2.1/common/popup");t.exports=l.ItemView.extend({template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},ui:{readmore:"[data-component='readmore']",more:"[data-text='more']",menu:".room-details-rooms-menu",text:".room-details-rooms-text",body:".room-details-rooms-body",nano:".nano",svg:".svg-draw-gellery",maxocc:"[data-item='maxocc']",bookButton:".details-rooms-bot-bookbutton",roomFootBox:".room-details-rooms-foot"},events:{"click [data-button='amen']":function(){this.ui.menu.addClass("select-second"),this.trigger("tab:change","amen")},"click [data-button='info']":function(){this.ui.menu.removeClass("select-second"),this.trigger("tab:change","info")},"click .details-rooms-bot-bookbutton a":function(){window.lengsSonicalHotel&&window.lengsSonicalHotel.url?a.redirect(lengsSonicalHotel.url+"&categoryid="+this.model.get("id")):this.trigger("book:now",this.model.get("id"))},"mouseenter @ui.maxocc":function(e){e.stopPropagation(),r.addPopupTip(this,s.OCCUPANCY,this.getOccupancy(),jQuery(e.currentTarget),!0,!0)},"mouseleave @ui.maxocc":function(e){e.stopPropagation(),r.delPopupTip()}},className:function(){return"room-details-room-item-wrapper"},getOccupancy:function(){var e=c.assign({},this.model.get("occupancy")),t=this.model.get("_gbw_maxchildage");return e.maxocc=t&&(e.maxocc||"0"),e.adultocc=t&&(e.adultocc||0),e.childocc=t&&(e.childocc||0),e.adults=c.range(e.adultocc||0),e.children=c.range(e.childocc||0),e.hasocc=t&&(!!e.adultocc||!!e.childocc),e.maxchildage=t,e},serializeData:function(){var e=this.model.get("price"),t=0;return e&&(t=c.has(e,"memberprice")?e.memberprice?parseFloat(e.memberrate):parseFloat(e.memberrate)-parseFloat(e.ratesaved):e.memberrate),c.assign({},{priceloaded:!0,member_pay_price:t},this.model.toJSON(),{occupancy:this.getOccupancy()})},onRender:function(){var e=this;setTimeout(function(){o.autoCreate()}),e.__drawCircleSvg(),window.CRSNotice&&1===window.CRSNotice.tag&&e.ui.bookButton.hide(),window.disablereservation&&e.ui.roomFootBox.hide()},initialize:function(){this.model.get("_gbw_hotel_gallery")||!this.model.get("availability")||this.model.get("rateplan")&&!this.model.get("rateplan").loyaltymessageaboutpoints||/^[0\.,]+$/.test(this.model.get("earnpoints"))||this.model.set("_isearnpoints",!0),this.model.set("new_amenities",(this.model.get("amenities")||[]).slice(0,8)),this.model.set("_isloggedin",a.isloggedin()),this.model.set("_isRTL",a.isRTL()),window.CRSNotice&&1===window.CRSNotice.tag&&this.model.set("disable",1)},makeScroll:function(){this.ui.body.slick({speed:170,infinite:!0,variableWidth:!0,centerMode:!0,draggable:!1,arrows:!1,swipe:!1})},__drawCircleSvg:function(){var e=this,t=e.model.get("reevoo"),i=e.model.get("_gbw_hotel_gallery");if(i&&t&&2==t.ReviewFlag){var c=Math.floor(36*parseFloat(t.ReviewScore)),l=Math.abs(c%360)>180?1:0,a=-90,o=55,s=60,r=60,g=n(s,r,o,a),d=n(s,r,o,a+c),I=["M",g.x,g.y,"A",o,o,0,l,1,d.x,d.y].join(" ");e.ui.svg.attr({d:I})}}})},{"../../../../../booking-2.1/06-popping/view":343,"../../../../../booking-2.1/common/popup":348,"../../../../../ui/readmore/view":2110,"../../../../../ui/util":2122,"./template.hbs":178,"backbone.marionette":6,underscore:42}],2110:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../autocreator"),a=e("../util");t.exports=l.extend({template:!1,events:{"click @ui.toggle":function(){this.model.get("fixheight")?this.toggleReadMoreFixHeight():this.toggleReadMore()}},ui:{toggle:".readmore__toggle",content:".readmore__content"},initialize:function(){l.prototype.initialize.apply(this,arguments);var e=this;e.model=new c.Model(n.defaults(e.$el.data(),{animationspeed:500,maxlength:0,maxline:0,maxline_mobile:!1,maxheight:0,fixheight:!1,gradientcolor:"#FFFFFF",initmax_lineHeight:0,delayrender:0,showreadmore:!0,canreadmoretoggle:!0,bindscroller:!0,fitscrollerheight:!0,tailsymbol:"...",breakpoints:[],respondtoresize:!0,removehandlerwhendestoryed:!1,readmorestyle:"font-weight: bold; text-decoration: underline; cursor: pointer; text-transform: capitalize",readmoretext:"general.read_more",readlesstext:"general.read_less",forrichtext:!1,childdots:!0})),e.collapsed=!0,e.on("after:toggle",function(){e.scrollContent.length&&(e.scrollContainer.nanoScroller({destroy:!0}),e.scrollContainer.nanoScroller({alwaysVisible:!0})),e.$el.css("opacity",1)})},collapseContent:function(){this.collapsed=!1,this.ui.content.html(this.fulltext);var e=this.fulltext,t=this.model.get("maxlength"),i=a.ismobile()?this.model.get("maxline_mobile")||this.model.get("maxline"):this.model.get("maxline"),c=this.model.get("maxheight"),l=this.model.get("breakpoints"),o=this.model.get("fixheight");n.each(n.sortBy(l,"breakpoint").reverse(),function(e){a.getViewpointWidth()<=e.breakpoint&&(t=e.maxlength?e.maxlength:t,i=e.maxline?e.maxline:i,c=e.maxheight?e.maxheight:c)}),this.ui.content.css("line-height","");var s=Math.round(parseFloat(window.getComputedStyle(this.ui.content.get(0)).lineHeight));this.ui.content.css("line-height",s+"px");var r=o?"":this.model.get("tailsymbol");if(this.model.get("showreadmore")&&(r+="<a class='readmore__toggle read-more' style='"+this.model.get("readmorestyle")+"'>"+i18n.t(this.model.get("readmoretext"))+"</a>"),o)this.ui.content.height()>c&&(this.ui.content.html(e+r),this.$el.css("height",c),this.$el.addClass("content-wrap"),this.collapsed=!0);else for(;;){var g=!t||e.length<=t,d=!i||this.ui.content.height()<=s*i,I=!c||this.$el.height()<=c;this.model.get("forrichtext")&&(d=!i||this.getRichTextTotalLine(this.ui.content.get(0))<=i);var b=!this.model.get("fitscrollerheight")||!this.scrollContent.length||this.scrollContent[0].scrollHeight<=this.scrollContainer.height();if(g&&d&&I&&b)break;var C=e.replace(/((\s)*([a-zA-Z0-9\-&;]+|\W))(?=(<[^>]*>)*$)/,"");if(C=C.replace(/<([a-z]+?)(?:\s+?[^>]*?)?>\s*?<\/\1>/gi,""),this.model.get("forrichtext")||(C=C.replace(/<br\s*>|<\/br\s*>|<br\s*\/>/gi,"")),C=C.replace(/<img(.*?)>/gi,""),C=C.replace(/<a.*?>(.*?)<\/a>/gi,""),C===e)break;e=C,this.ui.content.children(":last-child").length>0&&!this.model.get("showreadmore")&&this.model.get("childdots")?(this.ui.content.html(e),this.ui.content.children(":last-child").append(r)):this.ui.content.html(e+r),this.collapsed=!0}this.collapsed&&this.siblingToggle.html(i18n.t("general.read_more")),this.bindUIElements(),this.collapsedHeight=this.$el.height(),this.trigger("after:toggle")},toggleReadMoreFixHeight:function(){var e=this,t=e.model.get("animationspeed");if(e.collapsed)e.$el.removeClass("content-wrap"),e.siblingToggle.html(i18n.t("general.read_less")),e.ui.toggle.html(i18n.t(this.model.get("readlesstext"))),e.$el.finish().animate({height:e.ui.content.height()},t,function(){e.trigger("after:toggle")}),e.collapsed=!1;else if(e.model.get("canreadmoretoggle")){var i=e.model.get("maxheight"),c=e.model.get("breakpoints");n.each(n.sortBy(c,"breakpoint").reverse(),function(e){a.getViewpointWidth()<=e.breakpoint&&(i=e.maxheight?e.maxheight:i)}),e.$el.addClass("content-wrap"),e.siblingToggle.html(i18n.t("general.read_more")),e.ui.toggle.html(i18n.t(this.model.get("readmoretext"))),e.$el.finish().animate({height:i},t,function(){e.trigger("after:toggle")}),e.collapsed=!0}},toggleReadMore:function(){var e=this,t=e.model.get("animationspeed");if(e.collapsed){e.$el.css("max-height",e.$el.height()+"px");var i=e.fulltext+(e.model.get("showreadmore")&&e.model.get("canreadmoretoggle")?" <a class='readmore__toggle read-less' style='"+e.model.get("readmorestyle")+"'>"+i18n.t(this.model.get("readlesstext"))+"</a>":"");e.ui.content.html(i),e.siblingToggle.html(i18n.t("general.read_less")),e.expandedHeight=e.ui.content.height(),e.$el.finish().animate({"max-height":e.expandedHeight},t,function(){e.$el.css("max-height","none"),e.trigger("after:toggle")}),e.collapsed=!1,e.bindUIElements()}else e.model.get("canreadmoretoggle")&&(e.$el.css("max-height",e.$el.height()+"px"),e.$el.finish().animate({"max-height":e.collapsedHeight},t,function(){e.$el.css("max-height","none"),e.collapseContent()}))},getRichTextTotalLine:function(e){var t=this,i=e.children,n=0;if(i.length)for(var c=0;c<i.length;c++)if(0==i[c].children.length&&""!=i[c].textContent){var l=parseFloat(jQuery(i[c]).height()),a=parseFloat(window.getComputedStyle(i[c]).lineHeight),o=Math.round(l/a);n+=o}else if(0!=i[c].children.length){var o=t.getRichTextTotalLine(i[c]);n+=o}return n},onRender:function(){function e(){o?setTimeout(n.bind(t.collapseContent,t),o):t.collapseContent()}var t=this;t.fulltext=t.ui.content.html(),t.lineHeight=Math.round(parseFloat(window.getComputedStyle(t.ui.content.get(0)).lineHeight)),t.maxLine=a.ismobile()?t.model.get("maxline_mobile")||t.model.get("maxline"):t.model.get("maxline"),t.model.set("initmax_lineHeight",t.lineHeight*t.maxLine);var i=t.model.get("bindscroller"),c=this.model.get("fixheight");t.scrollContainer=i?t.$el.closest(".nano"):jQuery([]),t.scrollContent=i?t.$el.closest(".nano-content"):jQuery([]);var l=t.model.get("removehandlerwhendestoryed");if(t.fulltext&&(t.$el.css("overflow","hidden"),t.siblingToggle=t.$el.siblings('[data-component="readmore-toggle"]'),t.siblingToggle.on("click",function(){c?t.toggleReadMoreFixHeight():t.toggleReadMore()}),t.model.get("respondtoresize"))){var o=t.model.get("delayrender");t.listenTo(a.tracker,"change:size",function(){return l&&!document.body.contains(t.el)?void t.destroy():void e()}),e()}},onDestroy:function(){this.stopListening(a.tracker)}},{selector:'[data-component="readmore"]'})},{"../autocreator":2052,"../util":2122,backbone:8,underscore:42}],348:[function(e,t,i){function n(e){e.stopPropagation();var t=jQuery(e.currentTarget),i=t.children(".x-popup-wrap"),n=i.children(".x-popup-body"),c=s.scrollTop(),l=s.height(),a=i.offset().top,o=i.height();a+o-(l-10)>c&&n.css("marginTop",2*(c-(a+o-(l-10)))+"px"),c>a-10&&n.css("marginTop",2*(c-(a-10))+"px"),r.trigger("enter:popup")}function c(e){e.stopPropagation();var t=jQuery(e.currentTarget),i=t.children(".x-popup-wrap"),n=i.children(".x-popup-body"),c=s.scrollTop();c>t.offset().top-i.prop("clientHeight")-10&&t.addClass("down");var l=n.offset();if(l.left<23)o.isRTL()?n.css("marginRight",l.left-23+"px"):n.css("marginLeft",23-l.left+"px");else{var a=s.width()-i.width()-23;a<l.left&&(o.isRTL()?n.css("marginRight",l.left-a+"px"):n.css("marginLeft",a-l.left+"px"))}r.trigger("enter:popup")}var l=e("underscore"),a=e("backbone"),o=e("../../ui/util"),s=jQuery(window),r=l.extend({traPopupTip:function(e,t,i,c){this.delPopupTip();var l=s.width(),a=t.offset();return this.element=jQuery(e),this.element.on("mouseenter",n),this.element.on("mouseleave",jQuery.proxy(this.delPopupTip,this)),!!o.isRTL()==!!i?(this.element.css({width:0,height:0,position:"absolute",zIndex:c?1e4:10001,left:a.left+t.width()+"px",top:t.height()/2+a.top+"px"}),this.element.addClass("right")):(this.element.css({width:0,height:0,position:"absolute",zIndex:c?1e4:10001,right:l-a.left+"px",top:t.height()/2+a.top+"px"}),this.element.addClass("left")),this.element.appendTo(jQuery(".main-wrapper")),this.element.trigger("mouseenter"),this.element},lonPopupTip:function(e,t,i,n){this.delPopupTip();var l=t.offset();return this.element=jQuery(e),this.element.on("mouseenter",c),this.element.on("mouseleave",jQuery.proxy(this.delPopupTip,this)),i&&this.element.addClass("down"),this.element.css({width:0,height:t.height(),position:"absolute",zIndex:n?1e4:10001,left:t.width()/2+l.left+"px",top:l.top+"px"}),this.element.appendTo(jQuery(".main-wrapper")),this.element.trigger("mouseenter"),this.element},delPopupTip:function(){this.element&&(this.element.remove(),this.element=null)}},a.Events);t.exports={autoCreate:function(e,t){jQuery(e).on("mouseenter",t.target,function(e){var i=jQuery(e.currentTarget),n=i.children(t.container),c=n.children(t.substance),l=s.scrollTop();if(l>i.offset().top-n.prop("clientHeight")-10?i.addClass("down"):i.removeClass("down"),c.length){c.css({marginLeft:"initial",marginRight:"initial"});var a=c.offset();if(a.left<36)a.left<=0&&c.css({marginLeft:-(2*a.left)+36});else{var o=s.width()-n.width()-70;o<a.left&&c.css({marginRight:a.left-o})}}})},addListener:function(e,t){e.stopListening(r),e.listenTo(r,"enter:popup",t)},addPopupTip:function(e,t,i,n,c,l,a){return r.stopListening(e),r.listenTo(e,"before:render",r.delPopupTip),r.listenTo(e,"destroy",r.delPopupTip),c?r.lonPopupTip(t(i),n,l,a):r.traPopupTip(t(i),n,l,a)},delPopupTip:function(){r.delPopupTip()}}},{"../../ui/util":2122,backbone:8,underscore:42}],343:[function(e,t,i){t.exports={MEMBER:Handlebars.compile(e("./member.hbs")),OCCUPANCY:Handlebars.compile(e("./occupancy.hbs")),PENALTY:Handlebars.compile(e("./penalty.hbs")),TIPSHORT:Handlebars.compile(e("./tipshort.hbs")),VOUCHER:Handlebars.compile(e("./voucher.hbs")),BOOKINGCART:Handlebars.compile(e("./bookingcart.hbs")),SAVINGSRATE:Handlebars.compile(e("./savingsrate.hbs")),LOYALTYROOMUPGRADE:Handlebars.compile(e("./loyaltyroomupgrade.hbs"))}},{"./bookingcart.hbs":336,"./loyaltyroomupgrade.hbs":337,"./member.hbs":338,"./occupancy.hbs":339,"./penalty.hbs":340,"./savingsrate.hbs":341,"./tipshort.hbs":342,"./voucher.hbs":344}],344:[function(e,t,i){t.exports='<div class="x-popup x-fs-00">\r\n    <div class="x-popup-wrap" style="width: 300px; display: block">\r\n        <div class="x-popup-body" style="padding: 15px 20px">\r\n            <!--{{#if voucherusage}}-->\r\n                <!--<div class="x-fs-20 x-ff-sm">-->\r\n                    <!--{{local "booking.you_are_saved_a_total_of"}} {{upgradeObject.upgradeddifference.currency}} {{price-format upgradeObject.upgradeddifference.savedprice.avgtotal}} {{#if isManyDays}}{{local "Property.avg_night"}}{{else}}/{{local "general.avg_night"}}{{/if}}-->\r\n                <!--</div>-->\r\n                <!--{{#if upgradeObject.upgradeddifference.savedprice.afterdetail.avgmember}}-->\r\n                    <!--<div class="x-fs-16 x-ff-sm x-mt-08">-->\r\n                        <!--{{local "booking.upgrade_loyalty_discount"}}: {{upgradeObject.upgradeddifference.currency}} {{price-format upgradeObject.upgradeddifference.savedprice.afterdetail.avgmember}}-->\r\n                    <!--</div>-->\r\n                <!--{{/if}}-->\r\n                <!--{{#if upgradeObject.upgradeddifference.savedprice.avgupgraded}}-->\r\n                    <!--<div class="x-fs-16 x-ff-sm x-mt-08">-->\r\n                        <!--{{local "booking.upgrade_upgrade_voucher"}}: {{upgradeObject.upgradeddifference.currency}} {{price-format upgradeObject.upgradeddifference.savedprice.avgupgraded}}-->\r\n                    <!--</div>-->\r\n                <!--{{/if}}-->\r\n                <!--{{#if upgradeObject.upgradeddifference.savedprice.beforeDetail.avgrategain}}-->\r\n                    <!--<div class="x-fs-16 x-ff-sm x-mt-08">-->\r\n                        <!--{{local "booking.upgrade_price_match_guarantee"}}: {{upgradeObject.upgradeddifference.currency}} {{price-format upgradeObject.upgradeddifference.savedprice.beforeDetail.avgrategain}}-->\r\n                    <!--</div>-->\r\n                <!--{{/if}}-->\r\n                <!--{{#if upgradeObject.upgradeddifference.savedprice.beforeDetail.avgusediscount}}-->\r\n                    <!--<div class="x-fs-16 x-ff-sm x-mt-08">-->\r\n                        <!--{{local "booking.upgrade_use_discount_code"}}: {{upgradeObject.upgradeddifference.currency}} {{price-format upgradeObject.upgradeddifference.savedprice.beforeDetail.avgusediscount}}-->\r\n                    <!--</div>-->\r\n                <!--{{/if}}-->\r\n            <!--{{else}}-->\r\n                <!--&lt;!&ndash;<div class="x-fs-20 x-ff-sm">{{local "booking.you_have_an_upgrade_voucher"}}</div>&ndash;&gt;-->\r\n                <!--<div class="x-fs-20 x-ff-sm">{{local \'rup.great_news\'}}</div>-->\r\n            <!--{{/if}}-->\r\n            <div class="x-fs-14 x-lh-16 x-ff-sm">{{local \'rup.great_news\'}}</div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],342:[function(e,t,i){t.exports='<div class="x-popup x-fs-00">\r\n    <div class="x-popup-wrap x-penalty" style="width: 525px; display: block">\r\n        <div class="x-popup-body x-penalty" style="padding: 15px 20px">\r\n            <div class="x-fs-20 x-penalty">{{desc}}</div>\r\n            <div class="x-fs-16 x-mt-08 book2-information x-penalty">{{{tipshort}}}</div>\r\n            <div class="x-fs-20 x-mt-20 x-penalty">{{local "policy.Guarantee_Policy"}}</div>\r\n            <div class="x-fs-16 x-mt-08 x-penalty">{{roomstay.RatePlan.guaranteeDesc}}</div>\r\n            <div class="x-fs-20 x-mt-20 x-penalty">{{local "policy.Cancellation_Policy"}}</div>\r\n            <div class="x-fs-16 x-mt-08 x-penalty">{{roomstay.CancelPenalty.penaltydescription}}</div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],341:[function(e,t,i){t.exports='<div class="x-popup x-fs-00">\r\n    <div class="x-popup-wrap" style="width: 210px; display: block; padding: 15px; background-color: #000000; box-sizing: border-box;">\r\n        {{#if isFinal}}\r\n            {{#equal data.comparenextdayrate null}}\r\n                {{#not-equal data.compareavgrate null}}\r\n                    {{#if isLogin}}\r\n                        <div class="popup-rate x-fs-14 x-di x-di-v-m x-ff-sm x-lh-15">{{{ILRateText}}}<em>{{local "booking.book_soon"}}</em></div>\r\n                    {{else}}\r\n                        <div class="popup-rate x-fs-14 x-di x-di-v-m x-ff-sm x-lh-15">{{{RateText}}}<em>{{local "booking.book_soon"}}</em></div>\r\n                    {{/if}}\r\n                {{/not-equal}}\r\n            {{else}}\r\n                {{#if isLogin}}\r\n                    <div class="popup-rate x-fs-14 x-di x-di-v-m x-ff-sm x-lh-15">{{{exILRateText}}}<em>{{local "booking.book_soon"}}</em></div>\r\n                {{else}}\r\n                    <div class="popup-rate x-fs-14 x-di x-di-v-m x-ff-sm x-lh-15">{{{exRateText}}}<em>{{local "booking.book_soon"}}</em></div>\r\n                {{/if}}\r\n            {{/equal}}\r\n        {{/if}}\r\n    </div>\r\n</div>'},{}],340:[function(e,t,i){t.exports='<div class="x-popup x-fs-00">\r\n    <div class="x-popup-wrap x-penalty" style="width: 350px; display: block">\r\n        <div class="x-popup-body x-fs-16 x-penalty" style="padding: 15px 20px">\r\n            <div class="x-fs-20 x-penalty">{{local "policy.Guarantee_Policy"}}</div>\r\n            <div class="x-fs-16 x-mt-08 x-penalty">{{roomstay.RatePlan.guaranteeDesc}}</div>\r\n            <div class="x-fs-20 x-mt-20 x-penalty">{{local "policy.Cancellation_Policy"}}</div>\r\n            <div class="x-fs-16 x-mt-08 x-penalty">{{roomstay.CancelPenalty.penaltydescription}}</div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],339:[function(e,t,i){t.exports='<span class="x-popup x-fs-00">\r\n	<div class="x-popup-wrap" style="width: 300px; display: block">\r\n        <div class="x-popup-body" style="padding: 15px 20px">\r\n            <div class="x-fs-20 x-ff-sm">{{local "booking.room_occupancy"}}</div>\r\n            <div class="x-fs-16 x-ff-sm x-mt-08">{{local "booking.room_accommodates"}}</div>\r\n            {{#if adults.length}}\r\n                <div class="x-fs-00 x-ff-sm x-mt-06">\r\n                    {{#each adults}}\r\n                        <span class="x-fs-16 x-di x-di-v-m icon-icon_J013"></span>\r\n                    {{/each}}\r\n                    {{#equal adults.length 1}}\r\n                        <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.adult"}}</span>\r\n                    {{else}}\r\n                        <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.adults"}}</span>\r\n                    {{/equal}}\r\n                </div>\r\n            {{/if}}\r\n            {{#if children.length}}\r\n                <div class="x-fs-00 x-ff-sm x-mt-06">\r\n                    {{#each children}}\r\n                        <span class="x-fs-16 x-di x-di-v-m icon-icon_J012"></span>\r\n                    {{/each}}\r\n                    {{#equal children.length 1}}\r\n                        <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.child"}} <span class="x-fs-13">({{local "booking.below_12" maxchildage}})</span></span>\r\n                    {{else}}\r\n                        <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.children"}} <span class="x-fs-13">({{local "booking.below_12" maxchildage}})</span></span>\r\n                    {{/equal}}\r\n                </div>\r\n            {{/if}}\r\n            <div class="x-fs-16 x-ff-sm x-mt-08">\r\n                {{local "booking.total_occupancy" maxocc}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n</span>'},{}],338:[function(e,t,i){t.exports='<div class="x-popup x-fs-00">\r\n    <div class="x-popup-wrap" style="width: 220px; display: block">\r\n        <div class="x-popup-body" style="padding: 15px 20px">\r\n            {{#if isLogin}}\r\n                {{#if vouchervisible}}\r\n                    <!--{{#if voucherusage}}-->\r\n                        <!--<div class="x-fs-20 x-ff-sm">-->\r\n                            <!--{{local "booking.you_are_saved_a_total_of"}} {{upgradeObject.upgradeddifference.currency}} {{price-format upgradeObject.upgradeddifference.savedprice.avgtotal}} {{#if isManyDays}}{{local "Property.avg_night"}}{{else}}/{{local "general.avg_night"}}{{/if}}-->\r\n                        <!--</div>-->\r\n                        <!--{{#if upgradeObject.upgradeddifference.savedprice.afterdetail.avgmember}}-->\r\n                            <!--<div class="x-fs-16 x-ff-sm x-mt-08">-->\r\n                                <!--{{local "booking.upgrade_loyalty_discount"}}: {{upgradeObject.upgradeddifference.currency}} {{price-format upgradeObject.upgradeddifference.savedprice.afterdetail.avgmember}}-->\r\n                            <!--</div>-->\r\n                        <!--{{/if}}-->\r\n                        <!--{{#if upgradeObject.upgradeddifference.savedprice.avgupgraded}}-->\r\n                            <!--<div class="x-fs-16 x-ff-sm x-mt-08">-->\r\n                                <!--{{local "booking.upgrade_upgrade_voucher"}}: {{upgradeObject.upgradeddifference.currency}} {{price-format upgradeObject.upgradeddifference.savedprice.avgupgraded}}-->\r\n                            <!--</div>-->\r\n                        <!--{{/if}}-->\r\n                        <!--{{#if upgradeObject.upgradeddifference.savedprice.beforeDetail.avgrategain}}-->\r\n                            <!--<div class="x-fs-16 x-ff-sm x-mt-08">-->\r\n                                <!--{{local "booking.upgrade_price_match_guarantee"}}: {{upgradeObject.upgradeddifference.currency}} {{price-format upgradeObject.upgradeddifference.savedprice.beforeDetail.avgrategain}}-->\r\n                            <!--</div>-->\r\n                        <!--{{/if}}-->\r\n                        <!--{{#if upgradeObject.upgradeddifference.savedprice.beforeDetail.avgusediscount}}-->\r\n                            <!--<div class="x-fs-16 x-ff-sm x-mt-08">-->\r\n                                <!--{{local "booking.upgrade_use_discount_code"}}: {{upgradeObject.upgradeddifference.currency}} {{price-format upgradeObject.upgradeddifference.savedprice.beforeDetail.avgusediscount}}-->\r\n                            <!--</div>-->\r\n                        <!--{{/if}}-->\r\n                    <!--{{else}}-->\r\n                        <!--<div class="x-fs-20 x-ff-sm">{{local "booking.you_have_an_upgrade_voucher"}}</div>-->\r\n                    <!--{{/if}}-->\r\n                    <div class="x-fs-20 x-ff-sm">{{local "booking.enjoying_loyalty_discount"}} {{loyalty}}%</div>\r\n                {{else}}\r\n                    <div class="x-fs-20 x-ff-sm">{{local "booking.enjoying_loyalty_discount"}} {{loyalty}}%</div>\r\n                {{/if}}\r\n            {{else}}\r\n                {{#if complete}}\r\n                    {{#if isUseMoney}}\r\n                        <div class="x-fs-14 x-ff-mm x-lh-12">{{local "booking.you_ve_saved" }} <span class="x-ff-wb">{{currency}} {{price-format ratesaved}}</span>!</div>\r\n                    {{/if}}\r\n                    {{#if isUsePoint}}\r\n                        <div class="x-fs-14 x-ff-mm x-lh-12">{{local "booking.you_ve_saved" }} <span class="x-ff-wb">{{num-format pointssaved}} {{local \'checkout.points\'}}</span>!</div>\r\n                    {{/if}}\r\n                    <div class="x-mt-08 x-fs-12 x-ff-sm">{{local "booking.member_discount"}}: {{loyalty}}%</div>\r\n                {{else}}\r\n                    {{#if isUseMoney}}\r\n                        <div class="x-fs-14 x-ff-mm x-lh-20 x-fc-azure x-default" data-item="sign">{{local "booking.sign_up_with_us_to_save_another"}} <span class="x-ff-wb">{{currency}} {{price-format ratesaved}}</span>!</div>\r\n                    {{/if}}\r\n                    {{#if isUsePoint}}\r\n                        <div class="x-fs-14 x-ff-mm x-lh-20 x-fc-azure x-default" data-item="sign">{{local "booking.sign_up_with_us_to_save_another"}} <span class="x-ff-wb">{{num-format pointssaved}}</span> {{local \'checkout.points\'}}!</div>\r\n                    {{/if}}\r\n                {{/if}}\r\n            {{/if}}\r\n        </div>\r\n    </div>\r\n</div>';
},{}],337:[function(e,t,i){t.exports='<div class="x-popup x-fs-00">\r\n    <div class="x-popup-wrap" style="width: 280px; display: block">\r\n        <div class="x-popup-body" style="padding: 15px 20px">\r\n            <div class="x-fs-16 x-ff-sm">{{local "booking.upgrade_prerequisite"}}</div>\r\n        </div>\r\n    </div>\r\n</div>'},{}],336:[function(e,t,i){t.exports='<div class="x-popup x-fs-00">\r\n    <div class="x-popup-wrap" style="display: block;width: 304px;">\r\n        <div class="x-popup-body x-fs-16 x-ff-sm" style="width: 304px; padding: 6px 10px;">\r\n            <span class="x-fs-13 x-mt-10 x-pb-10  x-db">{{local "booking.your_cart_rooms"}}</span>\r\n            {{#if listcheckoutroom}}\r\n                <span class="x-fs-13 x-pb-10">{{local "booking.rooms"}}</span>\r\n                {{#each listcheckoutroom}}\r\n                    <div class="x-flex x-pb-05 x-pt-05">\r\n                        <span class="x-cell top x-al-l x-fs-12 opacity7 width60">{{name}}</span>\r\n                        <span class="x-cell top x-al-r x-fs-12 opacity7">{{currency}} {{price-format price}}</span>\r\n                    </div>\r\n                {{/each}}\r\n            {{/if}}\r\n            {{#ifCond listcheckoutproduct "||" listcheckoutingresso}}\r\n                <span class="x-fs-13 x-pb-10 x-pt-05">{{local "tours.tours"}}</span>\r\n                {{#if listcheckoutproduct}}\r\n                    {{#each listcheckoutproduct}}\r\n                        <div class="x-flex x-pb-05 x-pt-05">\r\n                            <span class="x-cell top x-al-l x-fs-12 opacity7 width60">{{name}}</span>\r\n                            <span class="x-cell top x-al-r x-fs-12 opacity7">{{currency}} {{price-format price}}</span>\r\n                        </div>\r\n                    {{/each}}\r\n                {{/if}}\r\n                {{#if listcheckoutingresso}}\r\n                    {{#each listcheckoutingresso}}\r\n                        <div class="x-flex x-pb-05 x-pt-05">\r\n                            <span class="x-cell top x-al-l x-fs-12 opacity7 width60">{{name}}</span>\r\n                            <span class="x-cell top x-al-r x-fs-12 opacity7">{{currency}} {{price-format price}}</span>\r\n                        </div>\r\n                    {{/each}}\r\n                {{/if}}\r\n            {{/ifCond}}\r\n            {{#if ListCheckoutGiftModels}}\r\n                <span class="x-fs-13 x-pb-10">{{local "booking.gift"}}</span>\r\n                {{#each ListCheckoutGiftModels}}\r\n                    <div class="x-flex x-pb-05 x-pt-05">\r\n                        <span class="x-cell top x-al-l x-fs-12 opacity7 width60">{{name}}</span>\r\n                        <span class="x-cell top x-al-r x-fs-12 opacity7">{{currency}} {{price-format price}}</span>\r\n                    </div>\r\n                {{/each}}\r\n            {{/if}}\r\n        </div>\r\n    </div>\r\n</div>'},{}],178:[function(e,t,i){t.exports='<div class="room-details-rooms-head" >\r\n    <h3>{{type}}</h3 >\r\n</div >\r\n\r\n<div class="room-details-rooms-menu" >\r\n    <div data-button="info" class="menu-item" >{{local\r\n        \'maps.information\'}}</div >\r\n    <div data-button="amen" class="menu-item" >{{local\r\n        \'Property.amenities\'}}</div >\r\n</div >\r\n\r\n<div class="room-details-rooms-body" >\r\n    {{#if _gbw_hotel_gallery }}\r\n        <div class="gbw-title" >\r\n            <div class="hotel-page-redirects" >\r\n                <a href="{{hotelurl}}" ><h3 >{{local\r\n                    "quickbook.vist_hotel_page"}}<span\r\n                    class="icon-icon_B021" ></span ></h3 ></a >\r\n            </div >\r\n            <div class="hotel-locations" >\r\n                {{#if addressFormat}}\r\n                    <p ><span class="icon-icon_H001" ></span >{{addressFormat}}\r\n                    </p >\r\n                {{/if}}\r\n                {{#if close2locations}}\r\n                    <p ><span\r\n                        class="icon-icon_A010" ></span >{{close2locations}}</p >\r\n                {{/if}}\r\n            </div >\r\n        </div >\r\n        <div class="nano" >\r\n            <div class="nano-content" >\r\n                {{#if reevoo}}\r\n                    {{#equal reevoo.ReviewFlag 1}}\r\n                        <div class="room-details-rooms-info" >\r\n                            <div class="gbw-hotel-square" >\r\n                                <div class="square-num1" >\r\n                                    <span\r\n                                        class="icon-icon_E009" ></span >{{reevoo.ReviewScore}}\r\n                                </div >\r\n                                <div class="square-num2" >\r\n                                    {{reevoo.ReviewMessage}}\r\n                                </div >\r\n                                <div class="square-num3" >\r\n                                    {{#if reevoo.ReviewUrl}}\r\n                                        <a href="{{reevoo.ReviewUrl}}"\r\n                                           target="_blank" >{{local\r\n                                            "booking.view_reviews"}}</a >\r\n                                    {{/if}}\r\n                                </div >\r\n                            </div >\r\n                        </div >\r\n                    {{/equal}}\r\n                    {{#equal reevoo.ReviewFlag 2}}\r\n                        <div style=" position: relative; height: 20rem"\r\n                             class="room-details-rooms-info" >\r\n                            <div class="gbw-hotel-circle-svg" >\r\n                                <svg viewBox="0 0 120 120" width="100"\r\n                                     height="100" >\r\n                                    <circle r="55" cx="60" cy="60" ></circle >\r\n                                    <path class="svg-draw-gellery"\r\n                                          d="" ></path >\r\n                                    <text x="60" dy="55" class="circle-num1 font" >{{reevoo.ReviewScore}}</text >\r\n                                    <text x="60" dy="85" class="circle-num2 font" >{{local "booking.out_of_10"}}</text >\r\n                                </svg >\r\n                                {{#if reevoo.ReviewUrl}}\r\n                                    <div class="circle-num3" ><a\r\n                                        href="{{reevoo.ReviewUrl}}"\r\n                                        target="_blank" >{{reevoo.ReviewMessage}}</a >\r\n                                    </div >\r\n                                {{/if}}\r\n                            </div >\r\n                        </div >\r\n                    {{/equal}}\r\n                    {{#equal reevoo.ReviewFlag 3}}\r\n                        <div class="room-details-rooms-info" >\r\n                            <div class="gbw-hotel-size" >\r\n                                {{reevoo.ReviewMessage}}\r\n                            </div >\r\n                        </div >\r\n                    {{/equal}}\r\n                {{/if}}\r\n                <div class="room-details-rooms-text" >\r\n                    <p data-component="readmore" data-showreadmore="false"\r\n                       data-maxline=3 data-fitscrollerheight="false" data-childdots="false" >\r\n                        <span class="readmore__content" >{{{longdesc}}}</span >\r\n                    </p >\r\n                    <a data-component="readmore-toggle"\r\n                       href="javascript:void(0);" ></a >\r\n                </div >\r\n                <div class="room-details-rooms-wifi" >\r\n                    <p >{{local \'Property.amenities\'}}</p >\r\n                    <ul >\r\n                        {{#each new_amenities}}\r\n                            <li >\r\n                                <span class="icon {{fonticon}}"></span>\r\n                                <span >{{name}}</span >\r\n                            </li >\r\n                        {{/each}}\r\n                    </ul >\r\n                </div >\r\n            </div >\r\n        </div >\r\n    {{else}}\r\n        <div class="nano hotel-title-height" >\r\n            <div class="nano-content" >\r\n                {{#if _old_property_gallery}}\r\n                    <div class="room-details-rooms-info" >\r\n                        {{#if roomfeature}}\r\n                            <div class="title" >\r\n                                <span class="icon-icon_P003" ></span >\r\n                                <span\r\n                                    class="room-feature" >{{roomfeature}}</span >\r\n                            </div >\r\n                        {{/if}}\r\n                        <ul class="list" >\r\n                            {{#if _isearnpoints}}\r\n                                {{#if _isloggedin }}\r\n                                    <li ><span class="dot" ></span >{{local\r\n                                        \'Property.your_will_earn_points\'\r\n                                        earnpoints}}</li >\r\n                                {{else}}\r\n                                    <li ><span class="dot" ></span >{{local\r\n                                        \'Property.sign_on_to_earn_points\'\r\n                                        earnpoints}}</li >\r\n                                {{/if}}\r\n                            {{/if}}\r\n                            {{#if features.roomsize}}\r\n                                <li ><span\r\n                                    class="dot" ></span >{{{specialSymbolFix features.roomsize}}}\r\n                                </li >\r\n                            {{/if}}\r\n                            {{#if occupancy.hasocc}}\r\n                                <li>\r\n                                    <span class="dot"></span><span class="x-fs-00 txt">\r\n                                    {{#if occupancy.adults.length}}\r\n                                        {{#each occupancy.adults}}\r\n                                            <span class="x-fs-16 x-di x-di-v-m x-fc-black icon-icon_J013"></span>\r\n                                        {{/each}}\r\n                                        {{#equal occupancy.adults.length 1}}\r\n                                            <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.adult"}}</span>\r\n                                        {{else}}\r\n                                            <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.adults"}}</span>\r\n                                        {{/equal}}\r\n                                        <br>\r\n                                    {{/if}}\r\n                                    {{#if occupancy.children.length}}\r\n                                        {{#each occupancy.children}}\r\n                                            <span class="x-fs-16 x-di x-di-v-m x-fc-black icon-icon_J012"></span>\r\n                                        {{/each}}\r\n                                        {{#equal occupancy.children.length 1}}\r\n                                            <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.child"}}</span>\r\n                                        {{else}}\r\n                                            <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.children"}}</span>\r\n                                        {{/equal}}\r\n                                    {{/if}}\r\n                                    {{#if occupancy.hasocc}}\r\n                                        <span class="x-di x-di-v-m x-fs-16 x-ml-06 x-default x-popup icon-icon_B008" data-item="maxocc"></span>\r\n                                    {{/if}}\r\n                                </span>\r\n\r\n                                </li>\r\n                            {{/if}}\r\n                        </ul >\r\n                    </div >\r\n                {{/if}}\r\n                {{#if _gbw_room_gallery}}\r\n                    <div class="room-details-rooms-info" >\r\n                        {{#if roomfeature}}\r\n                            <div class="title" >\r\n                                <span class="icon-icon_P003" ></span >\r\n                                <span\r\n                                    class="room-feature" >{{roomfeature}}</span >\r\n                            </div >\r\n                        {{/if}}\r\n                        {{#if _isearnpoints}}\r\n                            <div class="title" >\r\n                                {{#if _isloggedin }}\r\n                                    <span class="dot" ></span > {{local\r\n                                    \'Property.your_will_earn_points\'\r\n                                    earnpoints}}\r\n                                {{else}}\r\n                                    <span class="dot" ></span > {{local\r\n                                    \'Property.sign_on_to_earn_points\'\r\n                                    earnpoints}}\r\n                                {{/if}}\r\n                            </div >\r\n                        {{/if}}\r\n                        <ul class="list" >\r\n                            {{#if features.roomsize}}\r\n                                <li ><span class="dot" ></span ><span\r\n                                    class="txt" >{{{specialSymbolFix features.roomsize}}}</span >\r\n                                </li >\r\n                            {{/if}}\r\n                            {{#if occupancy.hasocc}}\r\n                                <li>\r\n                                    <span class="dot"></span><span class="x-fs-00 txt">\r\n                                    {{#if occupancy.adults.length}}\r\n                                        {{#each occupancy.adults}}\r\n                                            <span class="x-fs-16 x-di x-di-v-m x-fc-black icon-icon_J013"></span>\r\n                                        {{/each}}\r\n                                        {{#equal occupancy.adults.length 1}}\r\n                                            <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.adult"}}</span>\r\n                                        {{else}}\r\n                                            <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.adults"}}</span>\r\n                                        {{/equal}}\r\n                                        <br>\r\n                                    {{/if}}\r\n                                    {{#if occupancy.children.length}}\r\n                                        {{#each occupancy.children}}\r\n                                            <span class="x-fs-16 x-di x-di-v-m x-fc-black icon-icon_J012"></span>\r\n                                        {{/each}}\r\n                                        {{#equal occupancy.children.length 1}}\r\n                                            <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.child"}}</span>\r\n                                        {{else}}\r\n                                            <span class="x-fs-16 x-di x-di-v-m x-ff-sm x-ml-06">{{local "booking.children"}}</span>\r\n                                        {{/equal}}\r\n                                    {{/if}}\r\n                                    {{#if occupancy.hasocc}}\r\n                                        <span class="x-di x-di-v-m x-fs-16 x-ml-06 x-default x-popup icon-icon_B008" data-item="maxocc"></span>\r\n                                    {{/if}}\r\n                                </span>\r\n\r\n                                </li>\r\n                            {{/if}}\r\n                        </ul >\r\n                    </div >\r\n                {{/if}}\r\n                <div class="room-details-rooms-text {{#unless\r\n                    _old_property_gallery}}\r\n            room-details-rooms-text--full-width{{/unless}}" >\r\n                    <p data-component="readmore" data-showreadmore="false"\r\n                       data-maxline=3 data-fitscrollerheight="false" data-childdots="false">\r\n                        <span class="readmore__content" >{{{longdesc}}}</span >\r\n                    </p >\r\n                    <a data-component="readmore-toggle" class="readmore__toggle"\r\n                       href="javascript:void(0);" ></a >\r\n                </div >\r\n                <div class="room-details-rooms-wifi" >\r\n                    <p >{{local \'Property.amenities\'}}</p >\r\n                    <ul >\r\n                        {{#each new_amenities}}\r\n                            <li >\r\n                                <span class="icon {{fonticon}}"></span>\r\n                                <span >{{name}}</span >\r\n                            </li >\r\n                        {{/each}}\r\n                    </ul >\r\n                </div >\r\n            </div >\r\n        </div >\r\n    {{/if}}\r\n</div >\r\n\r\n{{#unless _gbw_hide_button}}\r\n    <div class="room-details-rooms-foot" >\r\n    {{#if priceloaded}}\r\n        <div class="border-top-view"></div>\r\n        {{#if availability}}\r\n            <div class="rooms-bot-pricebox" >\r\n                {{#more-than price.ratesaved 0}}\r\n                    {{#if _isloggedin}}\r\n                        <div class="details-rooms-bot-user" >\r\n                            <label >{{local "booking.you_ve_saved"}}</label >&nbsp;&nbsp;\r\n                            <label >\r\n                                {{#if _gbw_hotel_gallery}}\r\n                                    {{currency}} {{price-format price.avgratesaved}}\r\n                                {{else}}\r\n                                    {{currency}} {{price-format price.ratesaved}}\r\n                                {{/if}}\r\n                            </label >\r\n                        </div >\r\n                    {{else}}\r\n                        <div class="details-rooms-bot-user" >\r\n                            <label >{{local "booking.members_save"}}</label >&nbsp;&nbsp;\r\n                            <label >\r\n                                {{#if _gbw_hotel_gallery}}\r\n                                    {{currency}} {{price-format price.avgratesaved}}\r\n                                {{else}}\r\n                                    {{currency}} {{price-format price.ratesaved}}\r\n                                {{/if}}\r\n                            </label >\r\n                        </div >\r\n                    {{/if}}\r\n                {{/more-than}}\r\n                {{#if _gbw_hotel_gallery}}\r\n                    <div style="margin-bottom: 0.5em;"\r\n                         class="details-rooms-bot-price" >\r\n                        {{#if _isloggedin}}\r\n                            <b class="price" >{{currency}} {{price-format\r\n                                price.memberAvgpriceTax}}</b >\r\n                        {{else}}\r\n                            <b class="price" >{{currency}} {{price-format\r\n                                    price.finalpriceAvgTax}}</b >\r\n                        {{/if}}\r\n                        {{#if _gbw_is_many_days}}\r\n                            <b class="time" >{{local \'Property.avg_night\'}}</b>\r\n                        {{else}}\r\n                            <b class="time" >{{local "general.avg_night"}}</b>\r\n                        {{/if}}\r\n                    </div >\r\n                {{else}}\r\n                    <div style="margin-bottom: 0.5em;"\r\n                         class="details-rooms-bot-price" >\r\n                        <!--<b style="font-size: 1.4rem" class="currency">{{currency}}</b>-->\r\n                        <b class="price" >\r\n                            {{currency}} {{price-format price.memberrate}}\r\n                        </b >\r\n                        {{#if _gbw_is_many_days}}\r\n                            <b class="time" >{{local \'Property.avg_night\'}}</b>\r\n                        {{else}}\r\n                            <b class="time" >{{local "general.avg_night"}}</b>\r\n                        {{/if}}\r\n                    </div >\r\n                {{/if}}\r\n            </div >\r\n            <div class="details-rooms-bot-bookbutton {{#equal disable \'1\'}}disable-crs{{/equal}}" >\r\n                {{#if _gbw_hotel_gallery}}\r\n                    <a href="javascript:void(0)" >{{local\r\n                        "booking.check_room"}}</a >\r\n                {{else}}\r\n                    {{#if lengs_boolean}}\r\n                            <a href="javascript:void(0)" >{{local \'Property.lengs_book_suite\'}}</a >\r\n                        {{else}}\r\n                            <a href="javascript:void(0)" >{{local \'Property.book_room\'}}</a >\r\n                    {{/if}}\r\n                {{/if}}\r\n            </div >\r\n        {{else}}\r\n            {{#if _gbw_room_gallery}}\r\n                <div class="details-rooms-bot-bookbutton-disabled" >\r\n                    <a href="javascript:void(0)" >{{local\r\n                        \'Property.not_avaliable\'}}</a >\r\n                </div >\r\n            {{else}}\r\n                <div class="details-rooms-bot-bookbutton {{#equal disable \'1\'}}disable-crs{{/equal}}" >\r\n                    {{#if lengs_boolean}}\r\n                        <a href="javascript:void(0)" >{{local \'Property.lengs_book_suite\'}}</a >\r\n                    {{else}}\r\n                        <a href="javascript:void(0)" >{{local \'Property.book_room\'}}</a >\r\n                    {{/if}}\r\n                </div >\r\n            {{/if}}\r\n        {{/if}}\r\n    {{else}}\r\n        <div style="position: relative; height: 100%" >\r\n            <div class="gbw-price-loading" style="left: 8%; right: initial;" >\r\n                <img src="/assets/img/card/Preloader3.2_RedIcon_300px.gif" alt="{{local "form.loading"}}">\r\n                <span >{{local "booking.price_loading"}}</span >\r\n            </div >\r\n        </div >\r\n    {{/if}}\r\n</div >\r\n{{/unless}}\r\n'},{}],177:[function(e,t,i){var n=e("backbone.marionette"),c=(e("../../../../../handlebar/helper"),e("swiper"),e("../../../../../ui/carousel-with-text/view")),l=(e("../../../../../ui/panoimage/jquery.drag"),e("../../../../../ui/util")),a=e("underscore");e("../../../../../ui/slick/slick"),e("./styles.sass"),t.exports=n.ItemView.extend({className:"room-detail-gallery-container",ui:{"switch":".carousel-switch",list:"li",li:".album-tab-widget>ul>li",a:".album-tab-widget>ul>li>a",tab:".album-tab-widget"},events:{"click video":"playVideo","click .dim-block-left":"doSwitchPrev","click .dim-block-right":"doSwitchNext","click @ui.li":function(e){this.__imageSwitcher(jQuery(e.currentTarget)),e.stopPropagation()}},template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},initialize:function(){this._deferred=jQuery.Deferred(),this.listenFullScreenChange()},onRender:function(){var e=this;this._deferred.resolve(),this.model.get("_gbw_hotel_gallery")&&a.map(this.ui.a,function(t){jQuery(t).data("key")==e.model.get("arc_first").categoryKey?jQuery(t).addClass("checked"):jQuery(t).removeClass("checked")}),this.showScroller(),jQuery(window).resize(function(){this.videoPlay||l.isFullScreen()||e.setSize()}),setTimeout(this.setSize.bind(this),0),this.initialSwitch(),this.modifyLabelPosition(),this.$("video").on("playing",function(t){e.playVideo(t)})},modifyLabelPosition:function(){var e=this,t=e.$(".desktop .room-gallery-item");$redLabel=e.$(".desktop .red-label"),t.length>2?($redLabel.css({right:"10px"}),e.ui.tab.css({width:"calc(100% - 10px)"})):($redLabel.css({right:0}),e.ui.tab.css({width:"100%"}))},initialSwitch:function(){var e=this.$(".desktop .room-gallery-item").length;e>1?(this.carouselSwitch=new c({el:this.ui["switch"]}),this.stopListening(this.carouselSwitch,"beginSwitch"),this.listenTo(this.carouselSwitch,"beginSwitch",this.doSwitch)):this.ui["switch"].empty()},doSwitchPrev:function(){this.$(".swiper-mobile").slick("slickPrev")},doSwitchNext:function(){this.$(".swiper-mobile").slick("slickNext")},doSwitch:function(e){"prev"==e&&this.$(".swiper-mobile").slick("slickPrev"),"next"==e&&this.$(".swiper-mobile").slick("slickNext")},tabChange:function(e){this.amenMode="amen"==e,this.setSize()},setSize:function(){var e,t=this,i=this.$(".room-gallery-swiper"),n=i.find(".swiper-slide"),c=jQuery("body").width(),l=this.$(".desktop .room-gallery-item").length;if(0!=l&&!(c>768)){1==l||this.amenMode?(e=c,this.$(".dim-block").hide()):(e=.6*c,this.$(".dim-block").show());var a=Math.round(e);n.css("width",a);var o=this.$(".dim-block");o.css("width",Math.ceil((c-a)/2)),1!=l&&setTimeout(function(){t.initialMobileSwiper(),t.$(".dragItem").drag()},0)}},initialMobileSwiper:function(){var e=this.$(".swiper-mobile");if(!e.is(":visible"))return this.rendered&&e.slick("unslick"),void(this.rendered=!1);if(this.rendered){var t=e.slick("slickCurrentSlide");return void e.slick("slickGoTo",t,!0)}e.slick({speed:800,infinite:!0,variableWidth:!0,centerMode:!0,draggable:!1,arrows:!1,swipe:!1,cssEase:"cubic-bezier(0,.96,.54,1.01)",rtl:"rtl"==jQuery("html").attr("dir")}),this.rendered=!0},fadeIn:function(){return jQuery.when(this._deferred).then(jQuery.proxy(this.__fadeIn,this))},express:function(){return jQuery.when(this._deferred).then(jQuery.proxy(this.__express,this))},retract:function(){return jQuery.when(this._deferred).then(jQuery.proxy(this.__retract,this))},__fadeIn:function(){this.ui.list.fadeIn(300)},__express:function(){this.ui.list.show()},__retract:function(){this.ui.list.hide()},showScroller:function(){var e,t=this;this.$(".dragItem").drag(),setTimeout(function(){l.lazyLoadImage();var i=t.$(".nano");i.nanoScroller({destroy:!0}),i.nanoScroller({alwaysVisible:!0});t.$(".room-gallery-item").not(".dimmed").eq(0);e=t.$(".room-gallery-item");var n=e.length;return 2>=n?void i.nanoScroller({destroy:!0}):(i.on("update",function(i,c){t.setActivePage(c,e,n,t.$("#nanoWrapper").height()),l.tracker.trigger("change:scrolltop")}),void t.setActivePage(void 0,e,n,t.$("#nanoWrapper").height()))},0)},setActivePage:function(e,t,i,n){if(i>2&&!e&&t.eq(0).siblings().addClass("dimmed"),i>2&&e){var c=.5*n;t.each(function(e,t,i){var n=jQuery(this),l=jQuery(this).position().top;c>=l&&l>=0?n.removeClass("dimmed"):n.addClass("dimmed")});var l=t.not(".dimmed");l.length>=2&&l.eq(1).addClass("dimmed"),e.maximum-e.position<10?t.eq(i-1).removeClass("dimmed").siblings().addClass("dimmed"):t.eq(i-1).addClass("dimmed")}},playVideo:function(e){this.scrolledTopBeforePlay=this.$(".nano-content").scrollTop(),this.$(e.target).removeClass("opacity-zero");var t=this.$(e.target)[0];t.play(),l.launchFullscreen(t),this.monitorPlayEnd(t),this.videoPlay=!0},monitorPlayEnd:function(e){var t=this.$(e);t.on("ended",function(){l.exitFullScreen(),t.addClass("opacity-zero")})},listenFullScreenChange:function(){var e=this;if(l.fullscreenSupport()){var t=l.fullscreenChangeType();t&&document.addEventListener(t,function(){var t=l.isFullScreen();if(!t){e.videoPlay=!1;var i=e.$("video");i.addClass("opacity-zero"),i.each(function(e,t){t.pause()}),jQuery("body").width()>768&&e.scrollToVideo()}})}},scrollToVideo:function(){this.$(".nano-content").scrollTop(this.scrolledTopBeforePlay)},__imageSwitcher:function(e){var t=a.findWhere(this.model.get("arc"),{categoryKey:e.children().data("key")});this.model.set("arc_first",t),this.render()}})},{"../../../../../handlebar/helper":1025,"../../../../../ui/carousel-with-text/view":2055,"../../../../../ui/panoimage/jquery.drag":2105,"../../../../../ui/slick/slick":2118,"../../../../../ui/util":2122,"./styles.sass":175,"./template.hbs":176,"backbone.marionette":6,swiper:40,underscore:42}],2118:[function(e,t,i){!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";var t=window.Slick||{};t=function(){function t(t,n){var c,l=this;l.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(t),appendDots:e(t),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,i){return e('<button type="button" data-role="none" role="button" tabindex="0" />').text(i+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},l.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},e.extend(l,l.initials),l.activeBreakpoint=null,l.animType=null,l.animProp=null,l.breakpoints=[],l.breakpointSettings=[],l.cssTransitions=!1,l.focussed=!1,l.interrupted=!1,l.hidden="hidden",l.paused=!0,l.positionProp=null,l.respondTo=null,l.rowCount=1,l.shouldClick=!0,l.$slider=e(t),l.$slidesCache=null,l.transformType=null,l.transitionType=null,l.visibilityChange="visibilitychange",l.windowWidth=0,l.windowTimer=null,c=e(t).data("slick")||{},l.options=e.extend({},l.defaults,n,c),l.currentSlide=l.options.initialSlide,l.originalSettings=l.options,"undefined"!=typeof document.mozHidden?(l.hidden="mozHidden",l.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(l.hidden="webkitHidden",l.visibilityChange="webkitvisibilitychange"),l.autoPlay=e.proxy(l.autoPlay,l),l.autoPlayClear=e.proxy(l.autoPlayClear,l),l.autoPlayIterator=e.proxy(l.autoPlayIterator,l),l.changeSlide=e.proxy(l.changeSlide,l),l.clickHandler=e.proxy(l.clickHandler,l),l.selectHandler=e.proxy(l.selectHandler,l),l.setPosition=e.proxy(l.setPosition,l),l.swipeHandler=e.proxy(l.swipeHandler,l),l.dragHandler=e.proxy(l.dragHandler,l),l.keyHandler=e.proxy(l.keyHandler,l),l.instanceUid=i++,l.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,l.registerBreakpoints(),l.init(!0)}var i=0;return t}(),t.prototype.activateADA=function(){var e=this;e.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},t.prototype.addSlide=t.prototype.slickAdd=function(t,i,n){var c=this;if("boolean"==typeof i)n=i,i=null;else if(0>i||i>=c.slideCount)return!1;c.unload(),"number"==typeof i?0===i&&0===c.$slides.length?e(t).appendTo(c.$slideTrack):n?e(t).insertBefore(c.$slides.eq(i)):e(t).insertAfter(c.$slides.eq(i)):n===!0?e(t).prependTo(c.$slideTrack):e(t).appendTo(c.$slideTrack),c.$slides=c.$slideTrack.children(this.options.slide),c.$slideTrack.children(this.options.slide).detach(),c.$slideTrack.append(c.$slides),c.$slides.each(function(t,i){e(i).attr("data-slick-index",t)}),c.$slidesCache=c.$slides,c.reinit()},t.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},t.prototype.animateSlide=function(t,i){var n={},c=this;
c.animateHeight(),c.options.rtl===!0&&c.options.vertical===!1&&(t=-t),c.transformsEnabled===!1?c.options.vertical===!1?c.$slideTrack.animate({left:t},c.options.speed,c.options.easing,i):c.$slideTrack.animate({top:t},c.options.speed,c.options.easing,i):c.cssTransitions===!1?(c.options.rtl===!0&&(c.currentLeft=-c.currentLeft),e({animStart:c.currentLeft}).animate({animStart:t},{duration:c.options.speed,easing:c.options.easing,step:function(e){e=Math.ceil(e),c.options.vertical===!1?(n[c.animType]="translate("+e+"px, 0px)",c.$slideTrack.css(n)):(n[c.animType]="translate(0px,"+e+"px)",c.$slideTrack.css(n))},complete:function(){i&&i.call()}})):(c.applyTransition(),t=Math.ceil(t),c.options.vertical===!1?n[c.animType]="translate3d("+t+"px, 0px, 0px)":n[c.animType]="translate3d(0px,"+t+"px, 0px)",c.$slideTrack.css(n),i&&setTimeout(function(){c.disableTransition(),i.call()},c.options.speed))},t.prototype.getNavTarget=function(){var t=this,i=t.options.asNavFor;return i&&null!==i&&(i=e(i).not(t.$slider)),i},t.prototype.asNavFor=function(t){var i=this,n=i.getNavTarget();null!==n&&"object"==typeof n&&n.each(function(){var i=e(this).slick("getSlick");i.unslicked||i.slideHandler(t,!0)})},t.prototype.applyTransition=function(e){var t=this,i={};t.options.fade===!1?i[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:i[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.autoPlay=function(){var e=this;e.autoPlayClear(),e.slideCount>e.options.slidesToShow&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this,t=e.currentSlide+e.options.slidesToScroll;e.paused||e.interrupted||e.focussed||(e.options.infinite===!1&&(1===e.direction&&e.currentSlide+1===e.slideCount-1?e.direction=0:0===e.direction&&(t=e.currentSlide-e.options.slidesToScroll,e.currentSlide-1===0&&(e.direction=1))),e.slideHandler(t))},t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&(t.$prevArrow=e(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=e(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},t.prototype.buildDots=function(){var t,i,n=this;if(n.options.dots===!0&&n.slideCount>n.options.slidesToShow){for(n.$slider.addClass("slick-dotted"),i=e("<ul />").addClass(n.options.dotsClass),t=0;t<=n.getDotCount();t+=1)i.append(e("<li />").append(n.options.customPaging.call(this,n,t)));n.$dots=i.appendTo(n.options.appendDots),n.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,i){e(i).attr("data-slick-index",t).data("originalStyling",e(i).attr("style")||"")}),t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),t.options.centerMode!==!0&&t.options.swipeToSlide!==!0||(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},t.prototype.buildRows=function(){var e,t,i,n,c,l,a,o=this;if(n=document.createDocumentFragment(),l=o.$slider.children(),o.options.rows>1){for(a=o.options.slidesPerRow*o.options.rows,c=Math.ceil(l.length/a),e=0;c>e;e++){var s=document.createElement("div");for(t=0;t<o.options.rows;t++){var r=document.createElement("div");for(i=0;i<o.options.slidesPerRow;i++){var g=e*a+(t*o.options.slidesPerRow+i);l.get(g)&&r.appendChild(l.get(g))}s.appendChild(r)}n.appendChild(s)}o.$slider.empty().append(n),o.$slider.children().children().children().css({width:100/o.options.slidesPerRow+"%",display:"inline-block"})}},t.prototype.checkResponsive=function(t,i){var n,c,l,a=this,o=!1,s=a.$slider.width(),r=window.innerWidth||e(window).width();if("window"===a.respondTo?l=r:"slider"===a.respondTo?l=s:"min"===a.respondTo&&(l=Math.min(r,s)),a.options.responsive&&a.options.responsive.length&&null!==a.options.responsive){c=null;for(n in a.breakpoints)a.breakpoints.hasOwnProperty(n)&&(a.originalSettings.mobileFirst===!1?l<a.breakpoints[n]&&(c=a.breakpoints[n]):l>a.breakpoints[n]&&(c=a.breakpoints[n]));null!==c?null!==a.activeBreakpoint?(c!==a.activeBreakpoint||i)&&(a.activeBreakpoint=c,"unslick"===a.breakpointSettings[c]?a.unslick(c):(a.options=e.extend({},a.originalSettings,a.breakpointSettings[c]),t===!0&&(a.currentSlide=a.options.initialSlide),a.refresh(t)),o=c):(a.activeBreakpoint=c,"unslick"===a.breakpointSettings[c]?a.unslick(c):(a.options=e.extend({},a.originalSettings,a.breakpointSettings[c]),t===!0&&(a.currentSlide=a.options.initialSlide),a.refresh(t)),o=c):null!==a.activeBreakpoint&&(a.activeBreakpoint=null,a.options=a.originalSettings,t===!0&&(a.currentSlide=a.options.initialSlide),a.refresh(t),o=c),t||o===!1||a.$slider.trigger("breakpoint",[a,o])}},t.prototype.changeSlide=function(t,i){var n,c,l,a=this,o=e(t.currentTarget);switch(o.is("a")&&t.preventDefault(),o.is("li")||(o=o.closest("li")),l=a.slideCount%a.options.slidesToScroll!==0,n=l?0:(a.slideCount-a.currentSlide)%a.options.slidesToScroll,t.data.message){case"previous":c=0===n?a.options.slidesToScroll:a.options.slidesToShow-n,a.slideCount>a.options.slidesToShow&&a.slideHandler(a.currentSlide-c,!1,i);break;case"next":c=0===n?a.options.slidesToScroll:n,a.slideCount>a.options.slidesToShow&&a.slideHandler(a.currentSlide+c,!1,i);break;case"index":var s=0===t.data.index?0:t.data.index||o.index()*a.options.slidesToScroll;a.slideHandler(a.checkNavigable(s),!1,i),o.children().trigger("focus");break;default:return}},t.prototype.checkNavigable=function(e){var t,i,n=this;if(t=n.getNavigableIndexes(),i=0,e>t[t.length-1])e=t[t.length-1];else for(var c in t){if(e<t[c]){e=i;break}i=t[c]}return e},t.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&e("li",t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",e.proxy(t.interrupt,t,!0)).off("mouseleave.slick",e.proxy(t.interrupt,t,!1)),t.$slider.off("focus.slick blur.slick"),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide)),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),e(document).off(t.visibilityChange,t.visibility),t.cleanUpSlideEvents(),t.options.accessibility===!0&&t.$list.off("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().off("click.slick",t.selectHandler),e(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),e(window).off("resize.slick.slick-"+t.instanceUid,t.resize),e("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),e(window).off("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).off("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.cleanUpSlideEvents=function(){var t=this;t.$list.off("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.off("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>1&&(e=t.$slides.children().children(),e.removeAttr("style"),t.$slider.empty().append(e))},t.prototype.clickHandler=function(e){var t=this;t.shouldClick===!1&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(t){var i=this;i.autoPlayClear(),i.touchObject={},i.cleanUpEvents(),e(".slick-cloned",i.$slider).detach(),i.$dots&&i.$dots.remove(),i.$prevArrow&&i.$prevArrow.length&&(i.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.prevArrow)&&i.$prevArrow.remove()),i.$nextArrow&&i.$nextArrow.length&&(i.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.nextArrow)&&i.$nextArrow.remove()),i.$slides&&(i.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){e(this).attr("style",e(this).data("originalStyling"))}),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.detach(),i.$list.detach(),i.$slider.append(i.$slides)),i.cleanUpRows(),i.$slider.removeClass("slick-slider"),i.$slider.removeClass("slick-initialized"),i.$slider.removeClass("slick-dotted"),i.unslicked=!0,t||i.$slider.trigger("destroy",[i])},t.prototype.disableTransition=function(e){var t=this,i={};i[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.fadeSlide=function(e,t){var i=this;i.cssTransitions===!1?(i.$slides.eq(e).css({zIndex:i.options.zIndex}),i.$slides.eq(e).animate({opacity:1},i.options.speed,i.options.easing,t)):(i.applyTransition(e),i.$slides.eq(e).css({opacity:1,zIndex:i.options.zIndex}),t&&setTimeout(function(){i.disableTransition(e),t.call()},i.options.speed))},t.prototype.fadeSlideOut=function(e){var t=this;t.cssTransitions===!1?t.$slides.eq(e).animate({opacity:0,zIndex:t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(e),t.$slides.eq(e).css({opacity:0,zIndex:t.options.zIndex-2}))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;null!==e&&(t.$slidesCache=t.$slides,t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.focusHandler=function(){var t=this;t.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",function(i){i.stopImmediatePropagation();var n=e(this);setTimeout(function(){t.options.pauseOnFocus&&(t.focussed=n.is(":focus"),t.autoPlay())},0)})},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){var e=this;return e.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,i=0,n=0;if(e.options.infinite===!0)for(;t<e.slideCount;)++n,t=i+e.options.slidesToScroll,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(e.options.centerMode===!0)n=e.slideCount;else if(e.options.asNavFor)for(;t<e.slideCount;)++n,t=i+e.options.slidesToScroll,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else n=1+Math.ceil((e.slideCount-e.options.slidesToShow)/e.options.slidesToScroll);return n-1},t.prototype.getLeft=function(e){var t,i,n,c=this,l=0;return c.slideOffset=0,i=c.$slides.first().outerHeight(!0),c.options.infinite===!0?(c.slideCount>c.options.slidesToShow&&(c.slideOffset=c.slideWidth*c.options.slidesToShow*-1,l=i*c.options.slidesToShow*-1),c.slideCount%c.options.slidesToScroll!==0&&e+c.options.slidesToScroll>c.slideCount&&c.slideCount>c.options.slidesToShow&&(e>c.slideCount?(c.slideOffset=(c.options.slidesToShow-(e-c.slideCount))*c.slideWidth*-1,l=(c.options.slidesToShow-(e-c.slideCount))*i*-1):(c.slideOffset=c.slideCount%c.options.slidesToScroll*c.slideWidth*-1,l=c.slideCount%c.options.slidesToScroll*i*-1))):e+c.options.slidesToShow>c.slideCount&&(c.slideOffset=(e+c.options.slidesToShow-c.slideCount)*c.slideWidth,l=(e+c.options.slidesToShow-c.slideCount)*i),c.slideCount<=c.options.slidesToShow&&(c.slideOffset=0,l=0),c.options.centerMode===!0&&c.options.infinite===!0?c.slideOffset+=c.slideWidth*Math.floor(c.options.slidesToShow/2)-c.slideWidth:c.options.centerMode===!0&&(c.slideOffset=0,c.slideOffset+=c.slideWidth*Math.floor(c.options.slidesToShow/2)),t=c.options.vertical===!1?e*c.slideWidth*-1+c.slideOffset:e*i*-1+l,c.options.variableWidth===!0&&(n=c.slideCount<=c.options.slidesToShow||c.options.infinite===!1?c.$slideTrack.children(".slick-slide").eq(e):c.$slideTrack.children(".slick-slide").eq(e+c.options.slidesToShow),t=c.options.rtl===!0?n[0]?-1*(c.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,c.options.centerMode===!0&&(n=c.slideCount<=c.options.slidesToShow||c.options.infinite===!1?c.$slideTrack.children(".slick-slide").eq(e):c.$slideTrack.children(".slick-slide").eq(e+c.options.slidesToShow+1),t=c.options.rtl===!0?n[0]?-1*(c.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,t+=(c.$list.width()-n.outerWidth())/2)),t},t.prototype.getOption=t.prototype.slickGetOption=function(e){var t=this;return t.options[e]},t.prototype.getNavigableIndexes=function(){var e,t=this,i=0,n=0,c=[];for(t.options.infinite===!1?e=t.slideCount:(i=-1*t.options.slidesToScroll,n=-1*t.options.slidesToScroll,e=2*t.slideCount);e>i;)c.push(i),i=n+t.options.slidesToScroll,n+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return c},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var t,i,n,c=this;return n=c.options.centerMode===!0?c.slideWidth*Math.floor(c.options.slidesToShow/2):0,c.options.swipeToSlide===!0?(c.$slideTrack.find(".slick-slide").each(function(t,l){return l.offsetLeft-n+e(l).outerWidth()/2>-1*c.swipeLeft?(i=l,!1):void 0}),t=Math.abs(e(i).attr("data-slick-index")-c.currentSlide)||1):c.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){var i=this;i.changeSlide({data:{message:"index",index:parseInt(e)}},t)},t.prototype.init=function(t){var i=this;e(i.$slider).hasClass("slick-initialized")||(e(i.$slider).addClass("slick-initialized"),i.buildRows(),i.buildOut(),i.setProps(),i.startLoad(),i.loadSlider(),i.initializeEvents(),i.updateArrows(),i.updateDots(),i.checkResponsive(!0),i.focusHandler()),t&&i.$slider.trigger("init",[i]),i.options.accessibility===!0&&i.initADA(),i.options.autoplay&&(i.paused=!1,i.autoPlay())},t.prototype.initADA=function(){var t=this;t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),t.$slideTrack.attr("role","listbox"),t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(i){e(this).attr({role:"option","aria-describedby":"slick-slide"+t.instanceUid+i})}),null!==t.$dots&&t.$dots.attr("role","tablist").find("li").each(function(i){e(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+t.instanceUid+i,id:"slick-slide"+t.instanceUid+i})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),t.activateADA()},t.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.off("click.slick").on("click.slick",{message:"next"},e.changeSlide))},t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&e("li",t.$dots).on("mouseenter.slick",e.proxy(t.interrupt,t,!0)).on("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.initSlideEvents=function(){var t=this;t.options.pauseOnHover&&(t.$list.on("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.on("mouseleave.slick",e.proxy(t.interrupt,t,!1)))},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.initSlideEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),e(document).on(t.visibilityChange,e.proxy(t.visibility,t)),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,e.proxy(t.orientationChange,t)),e(window).on("resize.slick.slick-"+t.instanceUid,e.proxy(t.resize,t)),e("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show()},t.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&t.options.accessibility===!0?t.changeSlide({data:{message:t.options.rtl===!0?"next":"previous"}}):39===e.keyCode&&t.options.accessibility===!0&&t.changeSlide({data:{message:t.options.rtl===!0?"previous":"next"}}))},t.prototype.lazyLoad=function(){function t(t){e("img[data-lazy]",t).each(function(){var t=e(this),i=e(this).attr("data-lazy"),n=document.createElement("img");n.onload=function(){t.animate({opacity:0},100,function(){t.attr("src",i).animate({opacity:1},200,function(){t.removeAttr("data-lazy").removeClass("slick-loading")}),a.$slider.trigger("lazyLoaded",[a,t,i])})},n.onerror=function(){t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),a.$slider.trigger("lazyLoadError",[a,t,i])},n.src=i})}var i,n,c,l,a=this;a.options.centerMode===!0?a.options.infinite===!0?(c=a.currentSlide+(a.options.slidesToShow/2+1),l=c+a.options.slidesToShow+2):(c=Math.max(0,a.currentSlide-(a.options.slidesToShow/2+1)),l=2+(a.options.slidesToShow/2+1)+a.currentSlide):(c=a.options.infinite?a.options.slidesToShow+a.currentSlide:a.currentSlide,l=Math.ceil(c+a.options.slidesToShow),a.options.fade===!0&&(c>0&&c--,l<=a.slideCount&&l++)),i=a.$slider.find(".slick-slide").slice(c,l),t(i),a.slideCount<=a.options.slidesToShow?(n=a.$slider.find(".slick-slide"),t(n)):a.currentSlide>=a.slideCount-a.options.slidesToShow?(n=a.$slider.find(".slick-cloned").slice(0,a.options.slidesToShow),t(n)):0===a.currentSlide&&(n=a.$slider.find(".slick-cloned").slice(-1*a.options.slidesToShow),t(n))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){var e=this;e.changeSlide({data:{message:"next"}})},t.prototype.orientationChange=function(){var e=this;e.checkResponsive(),e.setPosition()},t.prototype.pause=t.prototype.slickPause=function(){var e=this;e.autoPlayClear(),e.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){var e=this;e.autoPlay(),e.options.autoplay=!0,e.paused=!1,e.focussed=!1,e.interrupted=!1},t.prototype.postSlide=function(e){var t=this;t.unslicked||(t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.setPosition(),t.swipeLeft=null,t.options.autoplay&&t.autoPlay(),t.options.accessibility===!0&&t.initADA())},t.prototype.prev=t.prototype.slickPrev=function(){var e=this;e.changeSlide({data:{message:"previous"}})},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.progressiveLazyLoad=function(t){t=t||1;var i,n,c,l=this,a=e("img[data-lazy]",l.$slider);a.length?(i=a.first(),n=i.attr("data-lazy"),c=document.createElement("img"),c.onload=function(){i.attr("src",n).removeAttr("data-lazy").removeClass("slick-loading"),l.options.adaptiveHeight===!0&&l.setPosition(),l.$slider.trigger("lazyLoaded",[l,i,n]),l.progressiveLazyLoad()},c.onerror=function(){3>t?setTimeout(function(){l.progressiveLazyLoad(t+1)},500):(i.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),l.$slider.trigger("lazyLoadError",[l,i,n]),l.progressiveLazyLoad())},c.src=n):l.$slider.trigger("allImagesLoaded",[l])},t.prototype.refresh=function(t){var i,n,c=this;n=c.slideCount-c.options.slidesToShow,!c.options.infinite&&c.currentSlide>n&&(c.currentSlide=n),c.slideCount<=c.options.slidesToShow&&(c.currentSlide=0),i=c.currentSlide,c.destroy(!0),e.extend(c,c.initials,{currentSlide:i}),c.init(),t||c.changeSlide({data:{message:"index",index:i}},!1)},t.prototype.registerBreakpoints=function(){var t,i,n,c=this,l=c.options.responsive||null;if("array"===e.type(l)&&l.length){c.respondTo=c.options.respondTo||"window";for(t in l)if(n=c.breakpoints.length-1,i=l[t].breakpoint,l.hasOwnProperty(t)){for(;n>=0;)c.breakpoints[n]&&c.breakpoints[n]===i&&c.breakpoints.splice(n,1),n--;c.breakpoints.push(i),c.breakpointSettings[i]=l[t].settings}c.breakpoints.sort(function(e,t){return c.options.mobileFirst?e-t:t-e})}},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.cleanUpSlideEvents(),t.initSlideEvents(),t.checkResponsive(!1,!0),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.setPosition(),t.focusHandler(),t.paused=!t.options.autoplay,t.autoPlay(),t.$slider.trigger("reInit",[t])},t.prototype.resize=function(){var t=this;e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,i){var n=this;return"boolean"==typeof e?(t=e,e=t===!0?0:n.slideCount-1):e=t===!0?--e:e,n.slideCount<1||0>e||e>n.slideCount-1?!1:(n.unload(),i===!0?n.$slideTrack.children().remove():n.$slideTrack.children(this.options.slide).eq(e).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,void n.reinit())},t.prototype.setCSS=function(e){var t,i,n=this,c={};n.options.rtl===!0&&(e=-e),t="left"==n.positionProp?Math.ceil(e)+"px":"0px",i="top"==n.positionProp?Math.ceil(e)+"px":"0px",c[n.positionProp]=e,n.transformsEnabled===!1?n.$slideTrack.css(c):(c={},n.cssTransitions===!1?(c[n.animType]="translate("+t+", "+i+")",n.$slideTrack.css(c)):(c[n.animType]="translate3d("+t+", "+i+", 0px)",n.$slideTrack.css(c)))},t.prototype.setDimensions=function(){var e=this;e.options.vertical===!1?e.options.centerMode===!0&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),e.options.vertical===!1&&e.options.variableWidth===!1?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):e.options.variableWidth===!0?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();e.options.variableWidth===!1&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},t.prototype.setFade=function(){var t,i=this;i.$slides.each(function(n,c){t=i.slideWidth*n*-1,i.options.rtl===!0?e(c).css({position:"relative",right:t,top:0,zIndex:i.options.zIndex-2,opacity:0}):e(c).css({position:"relative",left:t,top:0,zIndex:i.options.zIndex-2,opacity:0})}),i.$slides.eq(i.currentSlide).css({zIndex:i.options.zIndex-1,opacity:1})},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setOption=t.prototype.slickSetOption=function(){var t,i,n,c,l,a=this,o=!1;if("object"===e.type(arguments[0])?(n=arguments[0],o=arguments[1],l="multiple"):"string"===e.type(arguments[0])&&(n=arguments[0],c=arguments[1],o=arguments[2],"responsive"===arguments[0]&&"array"===e.type(arguments[1])?l="responsive":"undefined"!=typeof arguments[1]&&(l="single")),"single"===l)a.options[n]=c;else if("multiple"===l)e.each(n,function(e,t){a.options[e]=t});else if("responsive"===l)for(i in c)if("array"!==e.type(a.options.responsive))a.options.responsive=[c[i]];else{for(t=a.options.responsive.length-1;t>=0;)a.options.responsive[t].breakpoint===c[i].breakpoint&&a.options.responsive.splice(t,1),t--;a.options.responsive.push(c[i])}o&&(a.unload(),a.reinit())},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),e.options.fade===!1?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=e.options.vertical===!0?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),void 0===t.WebkitTransition&&void 0===t.MozTransition&&void 0===t.msTransition||e.options.useCSS===!0&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&e.animType!==!1&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.options.useTransform&&null!==e.animType&&e.animType!==!1},t.prototype.setSlideClasses=function(e){var t,i,n,c,l=this;i=l.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),l.$slides.eq(e).addClass("slick-current"),l.options.centerMode===!0?(t=Math.floor(l.options.slidesToShow/2),l.options.infinite===!0&&(e>=t&&e<=l.slideCount-1-t?l.$slides.slice(e-t,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(n=l.options.slidesToShow+e,i.slice(n-t+1,n+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?i.eq(i.length-1-l.options.slidesToShow).addClass("slick-center"):e===l.slideCount-1&&i.eq(l.options.slidesToShow).addClass("slick-center")),l.$slides.eq(e).addClass("slick-center")):e>=0&&e<=l.slideCount-l.options.slidesToShow?l.$slides.slice(e,e+l.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):i.length<=l.options.slidesToShow?i.addClass("slick-active").attr("aria-hidden","false"):(c=l.slideCount%l.options.slidesToShow,n=l.options.infinite===!0?l.options.slidesToShow+e:e,l.options.slidesToShow==l.options.slidesToScroll&&l.slideCount-e<l.options.slidesToShow?i.slice(n-(l.options.slidesToShow-c),n+c).addClass("slick-active").attr("aria-hidden","false"):i.slice(n,n+l.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===l.options.lazyLoad&&l.lazyLoad()},t.prototype.setupInfinite=function(){var t,i,n,c=this;if(c.options.fade===!0&&(c.options.centerMode=!1),c.options.infinite===!0&&c.options.fade===!1&&(i=null,c.slideCount>c.options.slidesToShow)){for(n=c.options.centerMode===!0?c.options.slidesToShow+1:c.options.slidesToShow,t=c.slideCount;t>c.slideCount-n;t-=1)i=t-1,e(c.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i-c.slideCount).prependTo(c.$slideTrack).addClass("slick-cloned");for(t=0;n>t;t+=1)i=t,e(c.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i+c.slideCount).appendTo(c.$slideTrack).addClass("slick-cloned");c.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.interrupt=function(e){var t=this;e||t.autoPlay(),t.interrupted=e},t.prototype.selectHandler=function(t){var i=this,n=e(t.target).is(".slick-slide")?e(t.target):e(t.target).parents(".slick-slide"),c=parseInt(n.attr("data-slick-index"));return c||(c=0),i.slideCount<=i.options.slidesToShow?(i.setSlideClasses(c),void i.asNavFor(c)):void i.slideHandler(c)},t.prototype.slideHandler=function(e,t,i){var n,c,l,a,o,s=null,r=this;return t=t||!1,r.animating===!0&&r.options.waitForAnimate===!0||r.options.fade===!0&&r.currentSlide===e||r.slideCount<=r.options.slidesToShow?void 0:(t===!1&&r.asNavFor(e),n=e,s=r.getLeft(n),a=r.getLeft(r.currentSlide),r.currentLeft=null===r.swipeLeft?a:r.swipeLeft,r.options.infinite===!1&&r.options.centerMode===!1&&(0>e||e>r.getDotCount()*r.options.slidesToScroll)?void(r.options.fade===!1&&(n=r.currentSlide,i!==!0?r.animateSlide(a,function(){r.postSlide(n)}):r.postSlide(n))):r.options.infinite===!1&&r.options.centerMode===!0&&(0>e||e>r.slideCount-r.options.slidesToScroll)?void(r.options.fade===!1&&(n=r.currentSlide,i!==!0?r.animateSlide(a,function(){r.postSlide(n)}):r.postSlide(n))):(r.options.autoplay&&clearInterval(r.autoPlayTimer),c=0>n?r.slideCount%r.options.slidesToScroll!==0?r.slideCount-r.slideCount%r.options.slidesToScroll:r.slideCount+n:n>=r.slideCount?r.slideCount%r.options.slidesToScroll!==0?0:n-r.slideCount:n,r.animating=!0,r.$slider.trigger("beforeChange",[r,r.currentSlide,c]),l=r.currentSlide,r.currentSlide=c,r.setSlideClasses(r.currentSlide),r.options.asNavFor&&(o=r.getNavTarget(),o=o.slick("getSlick"),o.slideCount<=o.options.slidesToShow&&o.setSlideClasses(r.currentSlide)),r.updateDots(),r.updateArrows(),r.options.fade===!0?(i!==!0?(r.fadeSlideOut(l),r.fadeSlide(c,function(){r.postSlide(c)})):r.postSlide(c),void r.animateHeight()):void(i!==!0?r.animateSlide(s,function(){r.postSlide(c)}):r.postSlide(c))))},t.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,i,n,c=this;return e=c.touchObject.startX-c.touchObject.curX,t=c.touchObject.startY-c.touchObject.curY,i=Math.atan2(t,e),n=Math.round(180*i/Math.PI),0>n&&(n=360-Math.abs(n)),
45>=n&&n>=0?c.options.rtl===!1?"left":"right":360>=n&&n>=315?c.options.rtl===!1?"left":"right":n>=135&&225>=n?c.options.rtl===!1?"right":"left":c.options.verticalSwiping===!0?n>=35&&135>=n?"down":"up":"vertical"},t.prototype.swipeEnd=function(e){var t,i,n=this;if(n.dragging=!1,n.interrupted=!1,n.shouldClick=!(n.touchObject.swipeLength>10),void 0===n.touchObject.curX)return!1;if(n.touchObject.edgeHit===!0&&n.$slider.trigger("edge",[n,n.swipeDirection()]),n.touchObject.swipeLength>=n.touchObject.minSwipe){switch(i=n.swipeDirection()){case"left":case"down":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide+n.getSlideCount()):n.currentSlide+n.getSlideCount(),n.currentDirection=0;break;case"right":case"up":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide-n.getSlideCount()):n.currentSlide-n.getSlideCount(),n.currentDirection=1}"vertical"!=i&&(n.slideHandler(t),n.touchObject={},n.$slider.trigger("swipe",[n,i]))}else n.touchObject.startX!==n.touchObject.curX&&(n.slideHandler(n.currentSlide),n.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1||t.options.draggable===!1&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,t.options.verticalSwiping===!0&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,i,n,c,l,a=this;return l=void 0!==e.originalEvent?e.originalEvent.touches:null,!a.dragging||l&&1!==l.length?!1:(t=a.getLeft(a.currentSlide),a.touchObject.curX=void 0!==l?l[0].pageX:e.clientX,a.touchObject.curY=void 0!==l?l[0].pageY:e.clientY,a.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(a.touchObject.curX-a.touchObject.startX,2))),a.options.verticalSwiping===!0&&(a.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(a.touchObject.curY-a.touchObject.startY,2)))),i=a.swipeDirection(),"vertical"!==i?(void 0!==e.originalEvent&&a.touchObject.swipeLength>4&&e.preventDefault(),c=(a.options.rtl===!1?1:-1)*(a.touchObject.curX>a.touchObject.startX?1:-1),a.options.verticalSwiping===!0&&(c=a.touchObject.curY>a.touchObject.startY?1:-1),n=a.touchObject.swipeLength,a.touchObject.edgeHit=!1,a.options.infinite===!1&&(0===a.currentSlide&&"right"===i||a.currentSlide>=a.getDotCount()&&"left"===i)&&(n=a.touchObject.swipeLength*a.options.edgeFriction,a.touchObject.edgeHit=!0),a.options.vertical===!1?a.swipeLeft=t+n*c:a.swipeLeft=t+n*(a.$list.height()/a.listWidth)*c,a.options.verticalSwiping===!0&&(a.swipeLeft=t+n*c),a.options.fade===!0||a.options.touchMove===!1?!1:a.animating===!0?(a.swipeLeft=null,!1):void a.setCSS(a.swipeLeft)):void 0)},t.prototype.swipeStart=function(e){var t,i=this;return i.interrupted=!0,1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow?(i.touchObject={},!1):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=void 0!==t?t.pageX:e.clientX,i.touchObject.startY=i.touchObject.curY=void 0!==t?t.pageY:e.clientY,void(i.dragging=!0))},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},t.prototype.updateArrows=function(){var e,t=this;e=Math.floor(t.options.slidesToShow/2),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&!t.options.infinite&&(t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&t.options.centerMode===!1?(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-1&&t.options.centerMode===!0&&(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},t.prototype.visibility=function(){var e=this;e.options.autoplay&&(document[e.hidden]?e.interrupted=!0:e.interrupted=!1)},e.fn.slick=function(){var e,i,n=this,c=arguments[0],l=Array.prototype.slice.call(arguments,1),a=n.length;for(e=0;a>e;e++)if("object"==typeof c||"undefined"==typeof c?n[e].slick=new t(n[e],c):i=n[e].slick[c].apply(n[e].slick,l),"undefined"!=typeof i)return i;return n}})},{}],2105:[function(e,t,i){t.exports=function(e){e.fn.drag=function(t){var i={moveObj:"img",opacity:1};e.extend(i,t);this.each(function(){var t,i,n=!1,c=e(this);e(this).on("mousedown touchstart",function(l){c.width();n=!0,e(this).css("cursor","move"),e(this).parent().addClass("active"),t=l.pageX,void 0==t&&(t=l.originalEvent.touches[0].pageX);var a=e(c).css("background-position"),o=parseInt(a.replace(/px/g,"").split(" ")[0]);i=o}),e(this).on("mousemove touchmove",function(l){if(n){var a=(c.width(),l.pageX);void 0==a&&(a=l.originalEvent.touches[0].pageX);var o=a-t;o>=0?bgPosition=i+o:bgPosition=i-Math.abs(o),e(c).css({"background-position":bgPosition+"px 0"})}}),e(this).on("mouseup touchend touchcancel",function(){e(this).parent().removeClass("active"),n=!1})})}}(jQuery)},{}],2055:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("backbone.marionette")),c=(e("../util"),e("./template.hbs"));e("../carousel/view.js"),e("../../handlebar/helper");CarouselView=t.exports=n.ItemView.extend({template:Handlebars.compile(c),ui:{item:".switcher-item",indicators:".tpl-gallery-controller .wgt-indicator a"},events:{"click .wgt-gallerybtn-previous":function(e){this.trigger("beginSwitch","prev")},"click .wgt-gallerybtn-next":function(e){this.trigger("beginSwitch","next")}},initialize:function(e){this.render(),this.listenTo(this.model,"change:switchInfo",this.render)}})},{"../../handlebar/helper":1025,"../carousel/view.js":2057,"../util":2122,"./template.hbs":2054,backbone:8,"backbone.marionette":6,underscore:42}],2057:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=(e("../../../../assets/lib/jquery.hammer.js"),e("../autocreator")),a=e("../util"),o=Handlebars.compile(e("./template.hbs"));t.exports=a.registry.carousel=l.extend({events:{"click .wgt-gallerybtn-previous":function(e){this.move(-1)},"click .wgt-gallerybtn-next":function(e){this.move(1)},"click @ui.indicators":function(e){}},template:!1,ui:{item:".switcher-item",indicators:".tpl-gallery-controller .wgt-indicator"},move:function(e){this.model.set({index:this.model.get("index")+e})},onBeforeRender:function(){this.$(".tpl-gallery-controller, .switcher-item").remove(),this.$el.prepend(o(this.model.attributes))},onRender:function(){this.rendered=!0,this.model.set({index:0},{silent:!0}),n.each("index leftText rightText hasindexbutton hasrlbutton autoplay".split(" "),n.bind(function(e){this.trigger("change:"+e,this,this.get(e))},this.model))},renderIndicators:function(e){var t=local.general.more_photos;this.model.get("text")&&(t=this.model.get("text")),jQuery(e.get("items")[e.get("index")]).attr("data-text")&&(t=jQuery(e.get("items")[e.get("index")]).attr("data-text")),this.model.get("mobiletext")||a.ismobile()&&(t="");var i='<span class="indicators-no">'+(e.get("index")+1)+" / "+e.get("items").length+'</span><span class="indicators-des">'+t+"</span>";this.ui.indicators.html(i)},initialize:function(){l.prototype.initialize.apply(this,arguments);var e=this;e.$el.hammer({touchAction:"pan-y"}).on("swipeleft swiperight",function(t){e.move("swipeleft"==t.type?1:-1)}),e.model=new c.Model(n.defaults(e.$el.data(),{leftText:i18n.t("general.previous"),rightText:i18n.t("general.next"),hasindexbutton:!0,hasrlbutton:!0,autoplay:!1})).on("change:autoplay",function(t,i){var n=function(){e.move(1)};e.model.get("autoplay")?setInterval(n,5e3):clearInterval(n)}).on("change:items",function(t,i){e.render()}).on("change:leftText",function(t,i){e.$(".wgt-gallerybtn-previous button_text").html(i)}).on("change:rightText",function(t,i){e.$(".wgt-gallerybtn-next button_text").html(i)}).on("change:hasindexbutton",function(t,i){i&&t.get("items").length>1||e.$(".wgt-indicator").hide()}).on("change:hasrlbutton",function(t,i){i&&t.get("items").length>1||e.$(".wgt-gallerybtn").hide()}).on("change:index",function(t,i){n.each(t.get("items"),function(e){jQuery(e).detach()}),t.set({index:a.posmod(i,t.get("items").length)},{silent:!0}),e.renderIndicators(t),e.ui.item.append(t.get("items")[t.get("index")]),e.$(".tpl-gallery-controller")[t.get("items").length?"show":"hide"](),a.lazyLoadImage()}),e.model.set({items:e.$(".tpl-hero-slider,.tpl-slider").detach().get()}),e.$el.attr("data-num",e.model.get("items").length),e.renderIndicators(e.model)}},{selector:'[data-component="carousel"]'})},{"../../../../assets/lib/jquery.hammer.js":44,"../autocreator":2052,"../util":2122,"./template.hbs":2056,backbone:8,underscore:42}],2056:[function(e,t,i){t.exports='<div class="tpl-gallery-controller">\r\n\r\n    <a class="wgt-gallerybtn wgt-gallerybtn-next">\r\n\r\n        <div class="button_text">\r\n            <p>{{rightText}}</p>\r\n        </div>\r\n\r\n        <div class="wgt-gallerybtn-icon">\r\n            <span></span>\r\n        </div>\r\n\r\n    </a>\r\n\r\n    <a class="wgt-gallerybtn wgt-gallerybtn-previous">\r\n\r\n        <div class="wgt-gallerybtn-icon">\r\n            <span></span>\r\n        </div>\r\n\r\n        <div class="button_text">\r\n            <p>{{leftText}}</p>\r\n        </div>\r\n\r\n    </a>\r\n\r\n    <div class="wgt-indicator">\r\n    </div>\r\n\r\n</div>\r\n\r\n<div class="switcher-item state-active"></div>'},{}],2054:[function(e,t,i){t.exports='<div class="tpl-gallery-controller">\r\n    <a class="wgt-gallerybtn wgt-gallerybtn-next">\r\n        <span class="icon-only icon-icon_chervonRight"></span>\r\n        <div class="button_text">\r\n            <p>{{local \'general.next\'}}</p>\r\n        </div>\r\n\r\n        <div class="wgt-gallerybtn-icon">\r\n            <span></span>\r\n        </div>\r\n\r\n    </a>\r\n\r\n    <a class="wgt-gallerybtn wgt-gallerybtn-previous">\r\n        <span class="icon-only icon-icon_chervonLeft"></span>\r\n        <div class="wgt-gallerybtn-icon">\r\n            <span></span>\r\n        </div>\r\n\r\n        <div class="button_text">\r\n            <p>{{local \'general.prev\'}}</p>\r\n        </div>\r\n\r\n    </a>\r\n\r\n    <div class="text-intro">\r\n        {{#with switchInfo}}\r\n            <span>{{currentIndex}}/{{totalLength}}</span>\r\n            <span>{{title}}</span>\r\n        {{/with}}\r\n\r\n\r\n    </div>\r\n\r\n</div>\r\n\r\n\r\n'},{}],176:[function(e,t,i){t.exports='<div class="desktop">\r\n    <div class="nano" id="nanoWrapper">\r\n        {{#if _gbw_hotel_gallery}}\r\n            <div class="nano-content" style="overflow: auto">\r\n                {{#if arc_first.video}}\r\n                    {{#each arc_first.video}}\r\n                        {{#if url}}\r\n                            <div class="room-gallery-item">\r\n                                <div class="videoSlide">\r\n                                    <div class="play"></div>\r\n                                    <video src="{{encode url}}" class="opacity-zero" controls="controls"\r\n                                           width="100%" height="100%">\r\n                                    </video>\r\n                                    <div class="video-placeholder" data-backgroundurl-desktop="{{encode placeholder}}" style="background-image: url(\'{{encode placeholder}}\')"></div>\r\n                                </div>\r\n                            </div>\r\n                        {{/if}}\r\n                    {{/each}}\r\n                {{/if}}\r\n                {{#if arc_first.image360}}\r\n                    {{#each arc_first.image360}}\r\n                        <div class="room-gallery-item">\r\n                            <div class="panoimage">\r\n                                {{#if resourseurl}}\r\n                                    <iframe src="{{encode resourseurl}}" scrolling="auto" style=" width: 100%;height: 100%;"></iframe>\r\n                                {{else}}\r\n                                    <div class="dragItem" data-backgroundurl-desktop="{{encode url}}" style="background-image: url(\'{{encode url}}\')"></div>\r\n                                {{/if}}\r\n                                <span class="panoimageICON icon"></span>\r\n                            </div>\r\n                        </div>\r\n                    {{/each}}\r\n                {{/if}}\r\n                {{#if arc_first.images}}\r\n                    {{#each arc_first.images}}\r\n                        <div class="room-gallery-item">\r\n                            <div class="normalImage {{image_anchor}}" data-backgroundurl-desktop="{{encode desktopUrl}}" style="background-image: url(\'{{encode desktopUrl}}\')">\r\n                            </div>\r\n                        </div>\r\n                    {{/each}}\r\n                {{/if}}\r\n            </div>\r\n            <!--&lt;!&ndash;label&ndash;&gt;-->\r\n            {{#more-than badgetitle.length 0}}\r\n                <div class="red-label">\r\n                    <span class={{badgeicon}}></span>\r\n                    <span style="text-transform: uppercase">{{badgetitle}}</span>\r\n                </div>\r\n            {{/more-than}}\r\n            {{#if arc}}\r\n                <div class="album-tab-widget">\r\n                    <ul>\r\n                        {{#each arc}}\r\n                            <li><a data-key="{{categoryKey}}">{{categoryName}}</a></li>\r\n                        {{/each}}\r\n                    </ul>\r\n                </div>\r\n            {{/if}}\r\n            {{else}}\r\n            <div class="nano-content" style="overflow: auto">\r\n                <!--&lt;!&ndash;head-image&ndash;&gt;-->\r\n                <!--{{#not-equal imageurl.length 0}}-->\r\n                    <!--<div class="room-gallery-item">-->\r\n                        <!--<div class="album-head" data-backgroundurl-desktop="{{encode imageurl}}">-->\r\n                            <!--<div class="album-longdesc"></div>-->\r\n                        <!--</div>-->\r\n                    <!--</div>-->\r\n                <!--{{/not-equal}}-->\r\n                <!--normalimage-->\r\n                {{#each detailimages}}\r\n                    <div class="room-gallery-item">\r\n                        <div class="normalImage {{image_anchor}}" data-backgroundurl-desktop="{{encode mediaurl}}" style="background-image: url(\'{{encode mediaurl}}\')">\r\n                            <div class="album-longdesc">{{alt}}</div>\r\n                        </div>\r\n                    </div>\r\n                {{/each}}\r\n\r\n                <!--video-->\r\n\r\n\r\n                {{#each video}}\r\n                    {{#if url}}\r\n                    <div class="room-gallery-item">\r\n                        <div class="videoSlide">\r\n                            <div class="play"></div>\r\n                            <video src="{{encode url}}" class="opacity-zero" controls="controls"\r\n                                   width="100%" height="100%">\r\n                            </video>\r\n                            <div class="video-placeholder" data-backgroundurl-desktop="{{encode placeholder}}" style="background-image: url(\'{{encode placeholder}}\')"></div>\r\n                        </div>\r\n                    </div>\r\n                    {{/if}}\r\n                {{/each}}\r\n\r\n\r\n                <!--panoimage-->\r\n\r\n                <!--{{#each image360}}-->\r\n                    <!--<div class="room-gallery-item">-->\r\n                        <!--<div class="panoimage">-->\r\n                            <!--<div class="dragItem" data-backgroundurl-desktop="{{encode this}}">-->\r\n                            <!--</div>-->\r\n                            <!--<span class="panoimageICON icon"></span>-->\r\n\r\n                        <!--</div>-->\r\n                    <!--</div>-->\r\n\r\n                <!--{{/each}}-->\r\n\r\n                {{#each image360list}}\r\n                    <div class="room-gallery-item">\r\n                        <div class="panoimage">\r\n                            {{#if resourseurl}}\r\n                                <iframe src="{{encode resourseurl}}" scrolling="auto" style=" width: 100%;height: 100%;"></iframe>\r\n                            {{else}}\r\n                                <div class="dragItem" data-backgroundurl-desktop="{{encode mediaurl}}" style="background-image: url(\'{{encode mediaurl}}\')">\r\n                                    <div class="album-longdesc">{{alt}}</div>\r\n                                </div>\r\n                            {{/if}}\r\n                            <span class="panoimageICON icon"></span>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                {{/each}}\r\n\r\n            </div>\r\n            <!--label-->\r\n            {{#more-than badgetitle.length 0}}\r\n                <div class="red-label">\r\n                    <span class={{badgeicon}}></span>\r\n                    <span style="text-transform: uppercase">{{badgetitle}}</span>\r\n                </div>\r\n            {{/more-than}}\r\n        {{/if}}\r\n    </div>\r\n</div>\r\n\r\n\r\n<div class="mobile">\r\n    <div class="mobile-title">\r\n        <h3>{{type}}</h3>\r\n    </div>\r\n    <div class="slide-content">\r\n\r\n        <div class="swiper-container room-gallery-swiper">\r\n            <div class="swiper-wrapper swiper-mobile">\r\n                <!--head-image-->\r\n                {{#not-equal imageurl.length 0}}\r\n                    <div class="swiper-slide">\r\n                        <div class="room-gallery-item-mobile">\r\n                            <div class="normalImage {{image_anchor}}" data-backgroundurl-desktop="{{encode imageurl}}" style="background-image: url(\'{{encode imageurl}}\')">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                {{/not-equal}}\r\n\r\n                <!--video-->\r\n                {{#each video}}\r\n                    {{#not-equal this.length 0}}\r\n                        <div class="swiper-slide">\r\n                            <div class="room-gallery-item-mobile">\r\n                                <div class="videoSlide">\r\n                                    <div class="play"></div>\r\n                                    <video src="{{url}}" class="opacity-zero" controls="controls"\r\n                                           width="100%" height="100%">\r\n                                    </video>\r\n                                    <div class="video-placeholder" data-backgroundurl-desktop="{{encode placeholder}}"></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    {{/not-equal}}\r\n                {{/each}}\r\n\r\n                <!--panoimage-->\r\n\r\n                {{#each image360}}\r\n                    {{#not-equal this.length 0}}\r\n                        <div class="swiper-slide">\r\n                            <div class="room-gallery-item-mobile">\r\n                                <div class="panoimage">\r\n                                    <div class="dragItem {{image_anchor}}" data-backgroundurl-desktop="{{encode this}}" style="background-image: url(\'{{encode this}}\')"></div>\r\n                                    <span class="panoimageICON icon"></span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    {{/not-equal}}\r\n                {{/each}}\r\n                <!--normalimage-->\r\n                {{#each detailimage}}\r\n                    {{#not-equal this.length 0}}\r\n                        <div class="swiper-slide">\r\n                            <div class="room-gallery-item-mobile">\r\n                                <div class="normalImage {{image_anchor}}" data-backgroundurl-desktop="{{encode this}}" style="background-image: url(\'{{encode this}}\')">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    {{/not-equal}}\r\n                {{/each}}\r\n\r\n\r\n\r\n\r\n\r\n\r\n            </div>\r\n            <div class="dim-block-left dim-block"></div>\r\n            <div class="dim-block-right dim-block"></div>\r\n\r\n        </div>\r\n        <!--label-->\r\n        {{#more-than badgetitle.length 0}}\r\n\r\n            <div class="red-label">\r\n                <span class={{badgeicon}}></span>\r\n                <span>{{badgetitle}}</span>\r\n            </div>\r\n\r\n        {{/more-than}}\r\n\r\n\r\n    </div>\r\n</div>\r\n\r\n\r\n<div class="carousel-switch">\r\n\r\n</div>'},{}],175:[function(e,t,i){t.exports=e("sassify")('/**  *  * @param { 300 | bold } $font-weight  * @param { normal     } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal           } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { 300 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { normal } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ .rooms-details-album-head {   background-size: cover;   background-repeat: no-repeat;   background-color: #676767;   overflow: hidden; }   .rooms-details-album-head .tpl-holder {     margin-top: 50%; }  .rooms-details-album-list {   display: none; }   .rooms-details-album-list li {     background-size: cover;     background-repeat: no-repeat;     background-color: #676767;     overflow: hidden; }     .rooms-details-album-list li .tpl-holder {       margin-top: 50%; }  .room-detail-gallery-container {   height: 100%;   position: relative; }   .room-detail-gallery-container .carousel-switch {     display: none; }   @media screen and (max-width: 768px) {     .room-detail-gallery-container .carousel-switch {       display: block; }       .room-detail-gallery-container .carousel-switch .button_text {         display: none; } }   .room-detail-gallery-container .desktop {     height: 100%; }     @media screen and (max-width: 768px) {       .room-detail-gallery-container .desktop {         display: none; } }     .room-detail-gallery-container .desktop .room-gallery-item {       height: 50%;       position: relative; }       .room-detail-gallery-container .desktop .room-gallery-item.dimmed:after {         content: "";         display: block;         position: absolute;         left: 0;         top: 0;         width: 100%;         height: 100%;         background: black;         opacity: 0.5;         z-index: 1; }       .room-detail-gallery-container .desktop .room-gallery-item .videoSlide {         height: 100%;         cursor: pointer;         position: relative; }         .room-detail-gallery-container .desktop .room-gallery-item .videoSlide video {           position: relative;           z-index: 1;           width: 100%;           height: 100%;           background: black; }         .room-detail-gallery-container .desktop .room-gallery-item .videoSlide .opacity-zero {           opacity: 0; }         .room-detail-gallery-container .desktop .room-gallery-item .videoSlide .play {           width: 6.8rem;           height: 6.8rem;           border-radius: 100px;           border: 4px solid white;           position: absolute;           left: 50%;           top: 50%;           margin-top: -3.4rem;           margin-left: -3.4rem;           z-index: 1; }           .room-detail-gallery-container .desktop .room-gallery-item .videoSlide .play:after {             content: "";             width: 0;             border-left: 3.0rem solid white;             display: block;             border-top: 2rem solid transparent;             border-bottom: 2rem solid transparent;             position: absolute;             left: 50%;             margin-left: -1.25rem;             margin-top: 1.3rem; }         .room-detail-gallery-container .desktop .room-gallery-item .videoSlide .video-placeholder {           width: 100%;           height: 100%;           background-size: cover;           position: absolute;           left: 0;           top: 0; }       .room-detail-gallery-container .desktop .room-gallery-item .panoimage {         width: 100%;         height: 100%;         overflow: hidden;         position: relative; }         .room-detail-gallery-container .desktop .room-gallery-item .panoimage .icon {           position: absolute;           right: 2em;           top: 50%;           width: 3rem;           height: 3rem;           margin-top: -2rem;           background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAAEH5aXCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMzgwMTE3NDA3MjA2ODExODhDNjg2NjFGNjk2MjdGRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBN0MzOTNGQTg1NEMxMUU2OTdERkU1RjdCRUQwQkYzNSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBN0MzOTNGOTg1NEMxMUU2OTdERkU1RjdCRUQwQkYzNSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDY4MDExNzQwNzIwNjgxMTg4QzY4NjYxRjY5NjI3RkUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDM4MDExNzQwNzIwNjgxMTg4QzY4NjYxRjY5NjI3RkUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz42tcyaAAAkM0lEQVR42mJsaGhgAIGbN2+C6U+fPjH8+fNHcO/evdGSkpK3rK2td7GwsDD8//+fQV1dneHfv38MLAxIYPny5aXI/MePH+uvWLFCH8SOjo7uhokzoWsAmtiFrBFoczWIXrp0aWltbS1E0+fPnxmATgRryMjIUGRkZCxD1sTHx9cKYwPlSkHqWUBuhdmArgEGkOUWLFiQynTv3j1BqClYNUycOFE5MzNzOoz/9u1bAUZWVtac379/cyKb6uDgUL9q1ao4cXHxmcgGgJw/Y8aM+0xycnI30U0PCgqSQtcAAiAN4IAICAjYDWK8fPmyGObM/Pz8uwx4ABMvLy+YATS5F5/Ca9euJYLoxsbGbiZmZmaGjo6ObmwhhszX0tKaD7aFiYmB6e/fvww/fvwAKULR2NLSshiLQd0g9YzoaW/Pnj0Jr1+/FkVWDEtCsLQHEEBgTU+ePGEAxTQXFxc4wZ45cyYIGB8SPj4+0z98+PBfVlaW4fLlywweHh6IxCokJMQwffp0lMQKTKglMLaFhUU3PKH++vVLHKZ41qxZlsiagM70A9EnTpwAyzMWFRUx9PX1leILYlh6A4buP0YgH69ijIgEEc3NzbqwhIhLITDdOYOdBLIBV/KHRSSyHNiGf6AARgPA1N2IzSai/QBzBdOUKVO6saUjDJOhzmJ6//49XICQpqampm5wIoQlQGTPKSkpcaInQIy0JCIiwjB16lQUP5mZmR3W19c/AUtLAAEET7EgANL49etXcKoE5QGgqRLA9BRLTKDk5uZ2g7LLt2/fGO7evcvg5eXFAAt8lNJ19uzZDCEhIZJr166NQTcEmDVk5s2bl8bGxsYB4p89e/aCiYnJMpj85MmTS5G9DM3hkDBtb28HM6SkpBji4+NRvP3w4cNseXn5qaREL7IY0GxITvry5QvD06dPhZEtuH//fhaIJtYC5MhETgWVlZWloKKKCRQHwLSVBJNoa2vTV1RUnEZKBoMZDHSoHHpyKysrK2XaunVrMLLiqqqqiyA2sKKSQncZelpF5y9cuPARtpqG6fnz5+LYXAfM+c+Q+cA6IB1bkOACsbGxsnBLEhMT4UEDTC0tyBkdZFhdXd0EaJ0xEyYGswxUtcGqOGQLrl69mrB48eLHMD4LsPiESwKT5ad9+/b5Ozk5bQTWl/XorkMXO3jw4Hf0oCkuLlbT1tZeAOMDHXCYsaQEUnb39PSUEkqSpAKgY/cYGRmdZ+Lh4WEAYWDO70au3JAtAFkILJVNkPnANhMjgRTXbWdndx5kNtZiBdgIY9i1a1f+x48f2Uhxuaur614xMbFz6MUKQABSrC80qSiMX26C7kltOCSJIlB60Z5iDyrrwSZjL1HIfFricAthJNTAKBKiGNOMKJDqoT+yhxyuiT6shx4Cl4QvYhEISgQ+zYYwKoYPRb/vsiPn3l2d2w4c7jnnnvN9557zfb/v992uEsKqXC4nWK1WgRwI8CG0220yAGlyq9U6j8XnEFh1JpNpGyzwMwTWiUzQ3K2tLQFjAvUJGD0eT1e5pteuKFJnMpkbOzs7ovIdQv4Q6iXWB+J+HR4eft9LlqqScrnsbzQaJwc9pmq1StHUPj09/ZLYXF8lMGGJXaoJKhaLV1wu1yi1gXe/wXhWlpaWavycdDodNBgMHUS0JwyBZZyYGKtSwcTExAjzbrfbvUoWRxXnfo8UkFcrvR/kR4s7WmAMWFKi1WoFqrFYbI+frK+vt/r5Cnk1vY9Go2cR3C5waCFUKhUHky2SVeDzdEdxRLDOmt/v/7i2tnaRjeXzeS+MRrI6UafTCfF4fJ69RNy+e1hPR+T8omAQCyR/j3mGw+FXBxUOJrIIjDpeKBQ2lXdE2ChjT/D0RcDFrYMqQTZyJpVKXVM7ARzja1Gxo798f2xsbEgtxVGOYXP/eAXEDVg7m80GZEq8Xu8jvg+AM87MzEh5FT2x+CqftCDJdJNSsJwf/DpkSKe4DfQnm7C6iNFofMwsDphUBL/6QHGEf8e31axT0++sgU+yEOxwOApMADz7BBvn2z2ZPCtzc3On+b7NZluhI1JbuLy8/EatvS835z9TjfnTGAkEnHzrNWcX5y4Dht7tplK/NIgJ24gVehoolUpltcjYa0xtztTUlIUp2D2dZ2IoFHrBBpxOZxbO8+AocR0Ydp3vI2sURDAQ2SQg6G1YiuYwCsjz+a9DlvydOLbEhUFNZdlxMpkcBZwfUwoZHx839VOCsC1DC8T5VZIv6vV62oFgt9u7ASgYDH6yWCw69ueAFZCLn7i/m4N8FVKJBMmmKqVZVH0+X4HIBCu1Wu0P/WloNpvznU6nyyxhKA+B1Hf6KcDdvqW7YLKV2JUwm82b/BhS/KcIPJLQycnJEeTgVhzl/V4KIpHI842NjabMCtUokVoeOEiZnZ1NEJ0aiBJRahsIBBL0EwkxIrRP8kO+kKjX61K+yH7q8OW/AMxaX0hTURy+rkjJMk0k5x4MjDIjkxSnQkGI+JIkWIJ/mASCoWYZ7UGfwhDDURiYDyFCD3voz4tRgialgShtSIZzGQQyUvTBSagVRX++b+zK3TzHzc2sA5e5e+/OOb9zfn++7zv6IMi1XAOrXC6XMj4+viafeL3HAzhYt9k5FRR+Yv/OOJ3OLL9KEVTDvi9mZmYOAM5+8oaQAjpD6q2wfHO8mJgYYgaFciI8XBGoDcqmYo6TxkB7AVIuhTJpUUOUxPf19ZVp78Et3oEM9HP1g20BDaH1mHwEJn9d2aYGF0q3WCzp/Bu7NQWW8zxkQyhNYFUOAtZfCNRJWVmZobu7uxo0IJrfbTbbOAy3DQ0NLcDlVqOjo3eA3+0BKtGDwBxBOjipyhpWq/VZZWXla1nfAOdpvOhWgKU+MoePtwD/rtsBpn4w3g2jfX5+/hr8OxGdPkCcOcLdBeZCxEmM0WhsBW35LHsPyXYR4/UA1PvuiDbpMtCQrkygjULtAJhi9/T09A0AxSfIoXe20p20+ZawYXR01JaXl/fY/z1Q2PjGxkYz5mkhjl9LUNwyXsy51HNkRrDz6urqIyysdXV1b/5mjHAMGsExkcfjRe9gDmZw9DhmUs4/AtZ5KC54mZmA1b+VlJTogZYbw5UlQm10YUCn7wDWnaLn9fX19xAKX3TM1f39/fkiI0g4t8sI4G0zMcTg4GCRlkDRheFCS7Ozsw2i33V2dtYhmSg6Brfdbj8pegl0/PJ27YTb7V5CjO7Kz88/hUX9oX2G7GkFNjQ0NDQckoDVcxHZ2dlGZInT/g9nZmZqcf99aWnpy43URgz6VSS7kY8hJTfJIDm5GepDkaZ22ElQZIYyfU9OTkr5+E7Ai+OiB8nJyQfRugJxBhpGuVWrhvIeMOxH2aCqEf6EZ2xsbCknJ+eF6DcOh2PFqzHuR31yr4NVFMY26wYclBcVVU5GawQmU+BlVUlkw5R3VWM1emSRqF/UkIJAY+fm5gqzqg5p93Mo6ZEXXYqT1PJVvV6fpCq6pPmUkLk7LS0tV9V3+F3Ur+y+tvX29rqEhoDujIkeoCC9QRIoF4C8GlUAoSzAT5PJ9Ejjkg+0z7grYDEpqjau6uPad9RP0Smu2jCGR6CcmppaFS4uCouUfHC1AaGbAB9+Kv+4cS5w12YYva5OoHi+0hGaV1RUWGUuhBhq+x+MAOroERnhTQB2HbALJzyXmprqlBnDjjo6OjL/lREZGRk3qZ2KngOZWEDIFR1FCIPBoBQXFz9LS0tzyIxBZV0O5lBpqxoPSkZGRs5z7ImJiWXRO+3t7RYCXY+QQhrJizy4vLy8z2w23xf9CETnAzttbW1N9x5sHQtmNefm5q6EYggK7W9KVDKmCgRuoWyuzl/I2b1HTVdWVlY2PPVBkbqIXTxK4U02qGoQ+IM7Li7uVrg71dzc3IXUvkpjAjJEcmVkqrtejnIdlkdIYIOPut7W1naitrb2LFZon3oPi7EM8PotNjZ2Pw0aGBgYLiwsfL5ZA5CZHsLVXFKGGIyKQsyPgMoYHh4u2M5Aj4qK+lVTU3Ob/zaAOAlfRaEvAk6/RQy9JQ3G9wNAnCZRh+E2FOjplJSUpyR6NIAskDEQtori33i4EhkZuVBVVUVxzbM6jCnA8ESn02kEzDgMXhGwH0IjnqJmZWXZuVA8IIX7efQC6loJCQmbmtcfAZi5GpiqqjiOb2U+NiD3hrpCUEOBLBiC+MZwhksTUAQ/5heCI1TmB9NE27LN1TJlwlRy8Nx0fBgaYPKWJHM2NeeaBIrix1olUmLAMC2/Yrhpv9+Vy27Xc+59IB+d7crznXPvPf9z/h+//8d5UtYCLyspjtDQ0K5AnNVqdWtoaFCyrHw5bRC/Y8COK4fJDQKE8IfhGo3VHA6nzQMyorjT8ELbIex3YJ1vgoBfiUy4AJRHvo/sa7PZlIAcF4LvU2Nn7GctFvwSpmBePECn00TKlmOiPtBa0xloM1ClXAwrLuaMmJR6R41cBgUF1cIYn9KmOHtkd3pCAFbW7cyZMzM6s8c9blxxOEvhvLCzT2bPnl2CHWtxhTV7TAgJIA9De7138uTJ4N4Wcub2WQDFXVq6dKkDrHu/O/dbXB2IF9hg3TcynNmXKpe7VFhYmF5dXb2Q1YO9RggFEu5wHOsC+tOGsECCVY2MO7ui5oVaSxtGhTxksObAlZeDzy25ubmTYmJiwgFEn6vUaGpqugmH7QrA3gU4bS57pnPnzv3y8OHDzfwMt7r7Wgs6XRi00zfITHx0dHRUp7vaevz48R/x4rJTp07dhuA+hboebLfbbYAmozHu7ZqamhiVsPj4+KK6urp7Rs9njR9UbzmQRqPLwq6qQVZ9mBGBBy+BnQkBxL8J3PWJzA2Fym3Hdau0tPQW/ntW/b6qqioWz/i4E7dJ72cDsfNhhIth9VuFMsKJay9qJlypNHiytnz58lEEgPADhhPa+/j4fGE0CVkDCx7j/fv27asAkt5CNG00HnKarBpK/by7Kik1QYdgVq3IHgbeXhQWFhYKlshhfUhvCriaWjCLbhYVFe2An/PfHSF2Ui9aaiMiwP8bSARf1NtEqKkFyNUPZp7o5s2bk1Xcp14vEUexMRCckZGxQXYzPT0AueF9HQueOnWq88iRIw+M6qGY+mD9FGS4XXWwLDQ6hBwAeUPBe0K74nQ6p0PzvN5fAe05c+Z8d/ny5atGO8MaLQi+UnLPy0L0SQceHWky2wAM9G5/50eCg4OVQF9lZWWMbAzcBhvnryBo/gNv0F02GP3b9+zZUz4QoSAuXlxcXLSs3+FwpKquueIrHDp0aIlo4Nq1a9/o/FvT15MGwniLrHTjxo107fdgsSttbW2ZMvdAjaoo1Y0soxANBNxYOX/+/J39sfqARcm7d+8uHTVq1BgggzgNixXDYRsmu4/ZNmVHAM6EPqWfn5+SblAxTl+27OxsJWO2bt268/AEf8Lkx2r7iRxOnz6dILFrE5QCSnyIFA2Aq5ukLRTry5aZmXlBjX8FBAQELlq0qFiHAAqmTJkSaSDHbpbGxsZxos5xaDNnznSK+pi0MTqho29qeaTRcyjY+/fvd/KvPiMFOXlg9HwY6qHS8kmRQdLnBdmY99AfQugEiim+vr5KWBVO0gl9Sk1vI8zUO6B71ooVK/Lw/t/0fREREWeEhCQmJo6Adf3A7OGywkam5KANrWlpaduwynf19zGxw7JObREl2OMu0IU0hQG/PgUarWXWrFnH9X1jx45tEFpysNQYCFiTGcuIUmVkFRLRySp3RfeRCBbHavyZo+7u7kON3gV0fTMwMNBP1Nfa2jpUSAhYwtbc3NxmxvdMqelrWYHXVsLAXj1w4MB4pumYwRXdX15efl79fPDgwStmi4Zn3sUCeEoCF0OEhGCLrfDsOoxYirLClVTrZ3ULMT4kJGQMNN9ZZnBFmEkrV7Kd02mmx4BSr8hCukJXFwbyHuzIMCPooBL08OHDKD1vk21Y8szP0EDb9AqiJw3A1vpIUlIHH+aJRQLGWkaOHPma2cPJViLehk9xTb/aenWt/b8rqhxI1xsy+ackan9fSEhhYeEvzGeYPRyurnBMQkJClP47/Xlg7RjReEGU/o1Lly7dEPV5eXm1WCQaQuh/U3ApxOoqkv+pNrVj4GGWUUbUSgfRYVPaFXUMlQY/8zsjQnx8fEYChddLlFPjIDgl6Xfu3PEQCfSqVasc+fn5Dep39fX1s7Ayk7XqV5Tk1xbMyIputAbTrKBGZqA1KH3HoMjIyHBgqucwf15e3qTU1NRY8N8WtwFuO3fuDMOiJqrl2vq2evXqHRaAsVpRJ26sxo1Wt/9BAypesGzZsnxRH09DKOhXnx3VqdGrt2/f3jiQRMyYMUNxM+D83RL1T5s2rZJpCOVEF89Zyvxmm83mDVU8ZKAIqaqq2pieni495wtH7A8aRKWmMTQ09JxsINBtIeDBpwNBBE/VUM737t0rjPmy7ARK45k/wpAKw6Q8UyIaDChxjcl+XB/1JxGsbo2KirKD9T+UjVmzZk2lv78/jeWzHSFFEKavDeDBdhidV3m2uL8I8fT0fJnqX9bPuhmez+X8eXUdhYFNUI4MG+Er3PwmfOo0VycD4nucbC0oKPhda8P0LSkp6RijKF3HbRhlVK958+bVGWkxEkMXuL293VRmHA6HHez4OQzm4N7eLRb+MNmjnbtS96te1GC5ubk7zIJm169fb6Cl3bRpU4BsHDTNuYqKihMtLS2fsaa+t4jgSS1o0r+ZStDOvYu1eKnEsALH6GE8Ih8bG5udlZX1PglavHixjySGe6KkpORbHgwIDw/3elEiANc7UlJSjrK0Qzvv505yqVG7rVu3PuSRLxP9rhxNzsnJ+QqTzSBBdXV1SyBnNh0vf8/oSE1NzWZ9X3caqx9YsSQ75WOYDAUxvsBhC1x5EQyTtaysbPbEiRMnaEKaj6FRHnl4eHi5Gi0RNYDOpx0dHdmd5qD7yVDWR61fv37vrl27Vpq9rLGx8Z+IiAjuorKT0O/ugA8jgHA9ANFbnU5nS092gmf9mpubi00D3mZFNfC96YG5wbpuAG9a3PqxAdCeADy6SBkwK6qxuMKbVADJyck5/IGH/iAA9qeD0BzI9qJRUtZl1tLHV/38/C7ALeUvVcQDGQf0NgFctIULFxZDJlp54FJ7bKrXCFE1Gn9CCKj4GygC5tnt0EaTX7REydvbu81utzvBNn/xJ0HUeq3utB5BCL6EKwaLeg4reI5Vb7W1teGAORPAhqb2gjkZsM3PQUFB1Sxr4tlkPrM7Byj17V8B2rsSoKquMyxKghStUDFBhVRBFAwaGonUIBEa0EoMLkQqJi5kLFHBNTbaurQ6MujEZQZlcSPCGIexUVRQcVDQBI0lkjDEoICiyAugoMYkKNio/b7be5jn4y33PhYV88+84b3Hu+ee+//n/Ms55/9+vZPdkNjlFT8esukg9h779u0rec88ysfdLyoIPhgnJHeK2Un6cQQPE//jtXT0yHl+5pljSpXtwRNwgDPoCMn3xm9exN9u5pzfMsRA3Ou2tbX1Nfz93tHRUQOtWC1hR8ijjXOSv+PJQOaeSYt/eC6e9gbzpUNGHDXkh/gfn4sbskwpvHz5srRdzmsRZkjKSV6Eb72RZS6R6ewoHxhCscXodMMDuGE09mjuNFNCFCxeHPl89S8qKnpkttjb29dggF2An3sBs+YHnoHTzdtsbbJsbQFw1HMGEBwPCtsbodmA1jgt3BJ9JY6gjCXoK7QC3ONi+Nv/wTNc47O09sBpcYGQ2ZwFVEUlJSWv5uXl+arFh3pSiM9Cqy8sP90N4u0huPqa6kqg/z1xAhFp4zxFXVBQ4Jmenv5mWzuXbUEcWFlZWW/yxeQDb2/v456engXiWH2bC0SAwuoSwpXfHjhwYBwM8outzRTGbgxzevfubQN10p3ZS9yRg6H9BQxrgANxF6FLPRyPn8Go/7ZWPzjgmIHCF8MleGn7ExMTfzSwLNg2M4RBMPzeUEO5PuYQV5jnzJnj5u/v7+bq6toXasLOgM5/wDwheDj3YZAtIJhORJBg7rURO/GwvLz8Sn5+fsm+ffuKd+/erWmJPnMgMn6Oi4t7iCB/j8g5ajOVNXz4cKcvv/xyUktMU4JUIQwcAcPZmD5HKAEY//PJyclZR44cKc/MzKxp7n14zCk4OLj3yJEj+w0bNswjJCRk1Kef/j+BFAPqXm5u7ldr1qw5Tdgic+/BgclVGnpnuEeqLiBQi8Uh9CzoKSHWsImNjZ1hKp3PRDxjAfU2asyYMX8S3yFkvrhjx44vYmJizre1XUBU+tzq1auHjB8/3oenZ/kdl65SUlIyuUra3IXEuXPnbkeMUscYR0m0a2FMvwm3lQHe1q1b34a34WZu56AeRoSFhb0l1E1qauqRyZMnn3zSDDdnEmbmn8X5NsQt9Zg5ezBwz5nbJpepIyIi0hlQiiDUoECio6MNCoPRJwK3buvWrYswx/9mkgWm8AxCRvBzTk4Oj9YcfFq8KjoPGRkZYQOYS9rM/lMIixYt2orA8zZXNQwJpREpV5cojGPHjv0hOzs7QO3N4QFZwf2di8hX2k/+6KOPtjPl+ml2eeEEBEKtSXm9sA1ntOEI1RC3AgMCAr6hUPQKZPHixU0kSWHs3LkzqKio6GW1Nzx37tx0uKMD+X7evHlbYXMutqdYBEZ/TGBgoASCs3bt2t1LliwpUNsGN2+nT59+mELR1TyPGHUKg8FdfHx8CIThrOYmLPKQkJAwi+8PHTqUA6N9pEM7JkTpS3iMrba2tgbOwMdmCKVs9uzZexlUagvFYsqUKY02g8nWcDPHIKhyV9O4gGYm9u0rr7wSLZB92jvt2rVrxLvvvis5KuZkmfHQyejRozNqamoabUon+MvSEjIxOPLy8v549uxZVYAnxKsaPHiwR2Vl5fcYMdFo/F57YDb3z8PDw52trKwelpWV3TVgV8pLS0vPI6bxhgf5OqL3CgSFtUrvwVVuLsHAC9PQ+6JHa8k1KKbpgbG9Tpw44aum0xqNZg5zcItBkPaO9iAI1kdZtmxZk/obiE3qMHg36ILLMNpH9B8DQ/93uMfvQ4DJq1atUgzvSJ6Dh1fhblcy41DKRKK6ysrKGqOm40wIpTCuXr1a3l6EsWDBAlchjKSkpP0CNoyBq7W1tc3hw4fD9Z1Oway4JTK2Vq5cOY2g0GruS94LbNuOPI5y8uRJL4FSrYQ2bdr0GhNbGTTBOCW2F5sAA1sv3uP5XGAPux44cGCki4uLhD0I9VSRlpZWqe9aZp4heJZc4U8++WQG1I/i1W7ynjKgLDpyEwZG3EtNsBQZGSlVXlm+fPkuRJ/324tAUlJSKhwdHZdDfV+BMAYhlloOYx3AA5ww3rF+fn5pUF0PjKzLnUEgXcbZBEGOVnNvyoCysETc4KrvHLwhSkxMZI5uR7jFRUqCPR78hycxBBHqy0xP0hkZlzZv3pyuL7HMFDEZAGpiCEavh0jz0JeApo+YlDBhwoRg7fQQntfPz8/P5fVqawfpaI/jGzZscEasMrxPnz7ZPCGl5DrKgLKwwAMFQkd6Kl2IgyFfwWwg4tgZgoDT8dfn4/fWZ86cycUNJcajo3ZBQUFvCwEZSnDQJ4QVK1Z8oC1Ypm5dvHixjG0XFhbeNJbRxMHBdC/xmQLEq0y3P8wSGTt27FlzhcI0YmbgxsXFfRYVFaU4/xSyKLC8ffu2g4rgz5XCuHPnTh0eTtFSiHZFCl2/QGQeMk+OzDJW74+5cvydrMtNZpboE6YQhoHsxsb+QE2Foj+3TNUfNETffvttib+//wtDhw517tmzZ0FVVZWiUICyoFFXrK6gV3vJo7LCmC5VQsQLFdU9yCClwmBaqVphyNcFasUPBw3YkHTxftKkSQHmPhsGzHX+RWzXw8fHR/ERWsrCkshjSi/ADexkffej2k4KmFyizIocKuptuJLpxtQD9b0QBvMY161bN2379u1NUghNtSXuSdKX7CmvvV3CLJLei3uaQ1DBUlJdly5dujo7OzNrVVHuP2XRpJyJMUI0KWEpdOKWmJkEV/kumcf31NkBAQGB2tjFuvTGG280eoDu7u5eMJh7RHwgXrQjbIuqxlBJnLYk9EWUyLwPnin2QimLjnDR6lVE5tKaMQzw79R2kt4LX1Q3zD4UjKSnQwxmuIl6Xe/OPCMtU3x8fIo+j4yQyHBNK8VM0JcYq53eqa++lO73uumgasjJyambbBN+Ki4uVqxNKIuOYK7iG2dnZ1+RGdBn0KBBXZo7kvbv35+rJTC9a2j068V7Dw+PXkZm712tNaImriY8ycYdP3hqeoWv/T3Uo9lelpubW2+575qjR48q3qOnLJh+pPjkRVJSUjkMbDVPecyfP79ZCIAcjTC0oVo2Jt/QzBKjlTm++tQbZ5e2B6ZvFjGHXqhKfe3ws3YOsZJ4xgBTn+diK99nZmYWQ20p3mqlLCzGjRtnl5GRMUMJLh6J8Ncwfn+h68sChcZuKNxIY+3x4aGytpgKDktKSkJdXV0bR7BQUdrtK4kfTPWJ7Rpx1ZUMWp/w8PCxiEWusx6WCrtDXJDtFhEREVRFYxFc9Vd6MabiLARTfT///PMzGOkmtzKp06lu4Pt3lt3YW2DeJSWwFIba8/b2dq6rq6tnQGhOvMAZ4efn58I+sR1ifZjbH0E8Q1BRUfEv+DyWy5Yt2xkdHV2kYkmqhJVsqXp40KtHamrqdKUXc88c3sw/eeONGzemLly48OsOvxJTFqIcHR1fMlRAyBix0qWDg0NNJ09PTwI/EFLEurKysqeSi1lLATq/EP68Dw+dwZWtyM3NrX2WhVFYWDgNKtWVUES66OymyMvL62tE9eek/RCeVGfexKhRo453795dcTIET/j5+/tLePUxMTHvJyQkeD+rwoC6/4AnL6FpqjC4Y9VcS56T95QBZSFBrgqDHhYW9imNi1Ii7hgrfnBfZObMmSEYJVOfNWEQXdUFdB4EG6IKVpC8Js9l50baKJRmCF9yUHUHjE1S0ygrlyB2W5GXl5ePUSIBKQp8j/ZMLOXBZyXULQvbDRw4UHWJZvKaPOd7IYdHTi4KvHcYbDtDuKXGiMXjoMr+xv0StFEOTyyuvQmCxWvLysoW8hAgi587OzvHwMVVnfbAw4MIsG8x6Uf7FKPFhx8+it5LoTCxsb6+vvP69esjDaHiGiNu8UZFRU2UI97vBAjsryStAz4Az+OgVepF1q42NVbfES9WBObaIWZKfWxs7HoYKdVg0MSZ5VrVtm3b0mjsOLWrqqrm+/r62rXEQy1dutQdba7VaDRzza3r/DiIvCRPyVvymLzW5X8T+HFd4nmtvXv3GoUkN0XTpk17afPmzVOpb/n52LFjX/CAGEseNWMdbCQhn+VAsxqBYjyB559UYQQHBx8NCQkp1IVN16UmZWZ1iUk5POvL/AaosPdZHbU5HUtJSfF977333qKd4ef8/PxvVq9enWMu+saePXv8J06cKB0ouHnzZi2i73hTKLNtSSyLCxWVJOfXmIR1kBDZjL1ErjZtC/4mTZ06NUXNHoou4fov0Kklcp3HFLiKL6SlpS0UNSBLS0v/imntBa/FRkl7oaGhOWwrOTn5IAaOPVzvFRg0/0CkbPs4BUEekVfkmcw7iZem+K0KyUE76ZPVpjESJypdlFRCs2bNcsbsQdOvesDoPYLrxKOqCMAqSkpKqsD06xcuXLh96dKlOiZ2coHT1tb2OTc3ty6LFy8exvquvAYOyS9btmxJi4yM/KqtBMHYAnbzkcIhhsB/9F5v7o3lG378zjvv9Dx+/PhEpaVgjBFhy2Toss+03UyoJEeoot+7u7v3CgoKeg026QWMQL1pdffu3WuA8DTW1ta/gSNxLScnR9MWgsCAaMBA+HdzodqbjXUCX1rC86iurmalsCDWR3+W3FgWt4d6Pezg4PCQvCGE4mPFOqGg6E+jEw/RgUNDhw49VFdX1/306dOBrMrUHoXQr1+/CtioLBsbmxtcEKQAyAM1OEytJhBdklGBbsANTR0/fjwPjXU9derU64huB4v6eE9hMNcBEXmhj4/P6R49evxE15XPIhCQWtQGtcYD0FvgFKVn0dDQ8JOTk9PRwMDAo3wwCIgVHT1hnF9m5bknUQAs7de/f//vYLMKIIBqMp9qmiuywuNsidnQZgLRJyDaHHpkeNjqAQMGZGLaZ1JAFBz+5wj96wph9a2tre3eVjOJ97e3t78Bpl+Gri+F3teQ0bw//0fMLK41cRaoRVR7ogWiT0BE02HeNh/cyspKg1mk8fDwyBGlReXlGwswxBbekj0+20JYdmBYFwjQBqPVCsJ8npgjwvUm45iRhN/cQ5sNYHAdfvMzmH4LTP4BMU8tcbDQ5kMynUsXjBd4P+ZmEFSN30uZTJaPZ0Xmf+6jNDGM/WslAAAAAElFTkSuQmCC);           background-size: contain; }         .room-detail-gallery-container .desktop .room-gallery-item .panoimage.active .icon {           display: none; }         .room-detail-gallery-container .desktop .room-gallery-item .panoimage .dragItem {           width: 100%;           background-size: auto 100%;           background-repeat: repeat;           height: 100%;           position: relative; }           .room-detail-gallery-container .desktop .room-gallery-item .panoimage .dragItem .album-longdesc {             position: absolute;             width: 75%;             text-align: center;             font-size: 1.4rem;             color: #fff;             text-transform: uppercase;             bottom: 0;             margin-left: 12.5%;             margin-bottom: 2rem;             letter-spacing: 1px;             font-family: \'Whitney\', Helvetica, sans-serif;             font-weight: 300; }     .room-detail-gallery-container .desktop .nano {       width: 100%;       height: 100%; }     .room-detail-gallery-container .desktop #nanoWrapper .nano-slider {       background: #3F3939;       border-radius: 0;       margin: 0; }     .room-detail-gallery-container .desktop #nanoWrapper .nano-pane {       width: 12px;       background-color: #dcd7d2;       border-radius: 0;       z-index: 1; }     .room-detail-gallery-container .desktop #nanoWrapper .red-label {       line-height: 2rem;       background: #BA0C2F;       padding: 0 0.7rem;       position: absolute;       top: 0;       right: 10px;       z-index: 1;       text-transform: capitalize; }       .room-detail-gallery-container .desktop #nanoWrapper .red-label span {         font-size: 10px;         color: #FFFFFF;         letter-spacing: 1px;         vertical-align: middle; }     .room-detail-gallery-container .desktop .album-head {       background-size: cover;       background-repeat: no-repeat;       background-color: #676767;       overflow: hidden;       height: 100%; }     .room-detail-gallery-container .desktop .normalImage {       height: 100%;       background-size: cover;       background-position: center center;       background-repeat: no-repeat;       position: relative; }       .room-detail-gallery-container .desktop .normalImage .album-longdesc {         position: absolute;         width: 75%;         text-align: center;         font-size: 1.4rem;         color: #fff;         text-transform: uppercase;         bottom: 0;         margin-left: 12.5%;         margin-bottom: 2rem;         letter-spacing: 1px;         font-family: \'Whitney\', Helvetica, sans-serif;         font-weight: 300; }   .room-detail-gallery-container .mobile {     display: none; }     @media screen and (max-width: 768px) {       .room-detail-gallery-container .mobile {         display: block;         height: 100%; }         .room-detail-gallery-container .mobile .mobile-title {           height: 70px;           font-size: 2rem;           font-weight: bold;           line-height: 1.5rem; }           .room-detail-gallery-container .mobile .mobile-title h3 {             padding-top: 40px;             padding-left: 10px; }         .room-detail-gallery-container .mobile .slide-content {           height: calc(100% - 65px);           position: relative;           background-color: #e7e7e7; }         .room-detail-gallery-container .mobile .room-gallery-swiper {           height: 100%; }           .room-detail-gallery-container .mobile .room-gallery-swiper .swiper-wrapper .room-gallery-item-mobile {             height: 100%;             position: relative; }             .room-detail-gallery-container .mobile .room-gallery-swiper .swiper-wrapper .room-gallery-item-mobile .panoimage {               position: absolute;               width: 100%;               height: 100%; }             .room-detail-gallery-container .mobile .room-gallery-swiper .swiper-wrapper .room-gallery-item-mobile .normalImage, .room-detail-gallery-container .mobile .room-gallery-swiper .swiper-wrapper .room-gallery-item-mobile .dragItem {               height: 100%;               background-size: cover; }             .room-detail-gallery-container .mobile .room-gallery-swiper .swiper-wrapper .room-gallery-item-mobile iframe {               position: absolute;               display: block; }           .room-detail-gallery-container .mobile .room-gallery-swiper .swiper-wrapper .swiper-slide {             height: 100%; }             .room-detail-gallery-container .mobile .room-gallery-swiper .swiper-wrapper .swiper-slide.slick-center .dim-block-inner {               display: none; }             .room-detail-gallery-container .mobile .room-gallery-swiper .swiper-wrapper .swiper-slide .videoSlide {               height: 100%;               cursor: pointer;               position: relative; }               .room-detail-gallery-container .mobile .room-gallery-swiper .swiper-wrapper .swiper-slide .videoSlide video {                 position: relative;                 z-index: 1;                 width: 100%;                 height: 100%;                 background: black; }               .room-detail-gallery-container .mobile .room-gallery-swiper .swiper-wrapper .swiper-slide .videoSlide .opacity-zero {                 opacity: 0; }               .room-detail-gallery-container .mobile .room-gallery-swiper .swiper-wrapper .swiper-slide .videoSlide .play {                 width: 6.8rem;                 height: 6.8rem;                 border-radius: 100px;                 border: 4px solid white;                 position: absolute;                 left: 50%;                 top: 50%;                 margin-top: -3.4rem;                 margin-left: -3.4rem;                 z-index: 1; }                 .room-detail-gallery-container .mobile .room-gallery-swiper .swiper-wrapper .swiper-slide .videoSlide .play:after {                   content: "";                   width: 0;                   border-left: 3.0rem solid white;                   display: block;                   border-top: 2rem solid transparent;                   border-bottom: 2rem solid transparent;                   position: absolute;                   left: 50%;                   margin-left: -1.25rem;                   margin-top: 1.3rem; }               .room-detail-gallery-container .mobile .room-gallery-swiper .swiper-wrapper .swiper-slide .videoSlide .video-placeholder {                 width: 100%;                 height: 100%;                 background-size: cover;                 position: absolute;                 left: 0;                 top: 0; }             .room-detail-gallery-container .mobile .room-gallery-swiper .swiper-wrapper .swiper-slide .dim-block-inner {               width: 100%;               height: 100%;               position: absolute;               background: black;               opacity: 0.5;               top: 0;               right: 0; }         .room-detail-gallery-container .mobile .swiper-wrapper, .room-detail-gallery-container .mobile .slick-list, .room-detail-gallery-container .mobile .slick-track {           height: 100%; }         .room-detail-gallery-container .mobile .dim-block {           width: 20%;           height: 100%;           position: absolute;           background: black;           opacity: 0.5;           top: 0;           display: block;           cursor: pointer; }         .room-detail-gallery-container .mobile .dim-block-left {           left: 0; }         .room-detail-gallery-container .mobile .dim-block-right {           right: 0; }         .room-detail-gallery-container .mobile .red-label {           line-height: 2rem;           background: #BA0C2F;           padding: 0 0.7rem;           position: absolute;           top: 0;           right: 0;           z-index: 1;           text-transform: capitalize; }           .room-detail-gallery-container .mobile .red-label span {             font-size: 10px;             color: #FFFFFF;             letter-spacing: 1px;             vertical-align: middle; } }  .album-tab-widget {   background: rgba(0, 0, 0, 0.9);   color: #fff;   width: 100%;   position: absolute;   bottom: 0;   right: 0;   left: 0;   z-index: 99; }   .album-tab-widget ul {     display: block;     list-style: none;     margin-left: 5%;     padding-top: 1rem;     padding-bottom: 1rem; }     .album-tab-widget ul li {       display: inline-block !important;       vertical-align: middle; }       .album-tab-widget ul li a {         vertical-align: middle;         font-size: 1.5rem;         line-height: 2em;         text-transform: uppercase;         cursor: pointer;         padding: 0 .7em; }         .album-tab-widget ul li a:hover {           color: #31a2ac; }       .album-tab-widget ul li .checked {         color: #31a2ac;         text-decoration: underline; }       .album-tab-widget ul li:not(:last-child):after {         content: \'|\';         font-size: 1.5rem;         vertical-align: middle; }  .c-lengs-rooms .album-longdesc {   display: none; }  .c-lengs-rooms .room-details-tabs-item {   width: 50% !important; }  .c-lengs-rooms .room-details-zoom-view-wrapper {   width: 50%; }  @media screen and (max-width: 768px) {   html[dir="rtl"] .room-detail-gallery-container .mobile .mobile-title h3 {     padding-left: 0;     padding-right: 2rem; } }  ');
},{sassify:36}],173:[function(e,t,i){},{}],172:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("backbone.marionette")),c=e("../../ui/util.js"),l=e("../assets/item-small.hbs");t.exports=n.LayoutView.extend({attributes:function(){var e="tpl-booking-room";return 1==this.model.get("__compareOn")&&(e="tpl-booking-room compare"),{"class":e}},events:{"click #opt-book-room":"goBookRoom","click #opt-view-detail":"viewDetail","click h3":"viewDetail",'click [data-opt="single-compare"]':"toggleCompare",'click [data-opt="book"]':"bookRoom"},goBookRoom:function(){this.trigger("detail")},initialize:function(e){this.model.set("_isloginin",c.isloggedin())},bookRoom:function(e){var t=jQuery(e.currentTarget).data("id");window.isphone?this.trigger("quickbook",t):this.trigger("book",t)},toggleCompare:function(){this.$el.hasClass("compare")?(this.$el.removeClass("compare"),this.model.set("__compareOn",!1),this.model.collection.compareNumber--):(this.$el.addClass("compare"),this.model.set("__compareOn",!0),this.model.collection.compareNumber++),this.trigger("compareChange"),this.render()},getTemplate:function(){return Handlebars.compile(l)},viewDetail:function(e){var t=jQuery(e.currentTarget);if(this.trigger("detail",t.data("id")),c.ismobile()){var i=jQuery("#room-items-wrapper");i&&jQuery("html,body").animate({scrollTop:i.offset().top-40},500)}},onRender:function(){},onDestroy:function(){}})},{"../../ui/util.js":2122,"../assets/item-small.hbs":164,backbone:8,"backbone.marionette":6,underscore:42}],171:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("../../ui/util")),l=e("backbone.marionette");t.exports=l.LayoutView.extend({template:function(){return Handlebars.compile(jQuery("#booking-stickybar").html()||e("../assets/booking-stickybar.hbs"))},events:{"click #sticky-bar-book":function(){window.isphone&&(window.location.href=window.location.pathname.replace(/\/(\w{2})\//,function(e){return e}))}},initialize:function(){c.tracker.on("change:scrolltop",n.bind(function(){var e=jQuery("#hotel-booking-search-bar"),t=jQuery("#map"),i=jQuery("#withnav"),n=jQuery(window),l=c.tracker.get("scrolltop")+n.height(),a=c.tracker.previous("scrolltop")+n.height(),o=!0,s=!0,r=0,g=0,d=0,I=0,b=0,C=0;e.length&&(r=e.offset().top,g=r+e.height(),o=o&&!(l>r&&g>l),s=s&&!(a>r&&g>a)),t.length&&(d=t.offset().top,I=d+t.height(),o=o&&!(l>d&&I>l),s=s&&!(a>d&&I>a)),i.length&&(b=i.offset().top,withnavRegionBoottion=b+i.height(),o=o&&!(l>b&&C>l),s=s&&!(a>b&&C>a)),o!=s?this.$el.finish()[o?"fadeIn":"fadeOut"](300,function(){jQuery(this).toggle(o)}):o||this.$el.hide()},this))},onRender:function(){var e=this;e.$el.find("a#signon").bind("click",function(){e.trigger("signon:click")}),c.tracker.trigger("change:scrolltop")}})},{"../../ui/util":2122,"../assets/booking-stickybar.hbs":163,backbone:8,"backbone.marionette":6,underscore:42}],170:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../../booking/calendar/view"),a=e("../../booking/promocode/view.js"),o=e("../../ui/util.js"),s=e("../../booking/occupancy/view.js");t.exports=c.ItemView.extend({template:Handlebars.compile(e("../assets/booking-hotel.hbs")),className:"booking in-hotel",events:{"click #booking-search":"search","click #booking-cancel":"cancel"},onClose:function(){this.triggerMethod("req:booking:close")},search:function(){this.model.set("originalValues",this.model.serialize()),this.model.set("__current__",""),this.trigger("req:search")},cancel:function(){if(this.model.get("shouldReturnOnCancel")){var e=jQuery.cookie("booking_customization_return");e&&(window.location.href=e)}else{var t=this,i=this.model.get("originalValues");this.model.set({promocode:i.promocode},{silent:!0}),this.model.set({dates:i.dates},{silent:!0}),n.each(t.model.get("occupancy").models,function(e){e.set({value:0},{silent:!0})}),n.each(n.pairs(i.occupancy),function(e){t.model.get("occupancy").findWhere({key:e[0]}).set({value:e[1]},{silent:!0})}),this.render(),n.each(this.views,function(e){e.on("req:change",function(){t.lockScroll()})}),t.search()}this.unlockScroll()},lockFunction:function(e){var t=jQuery(".popupRegion");t.removeClass("popup-hide"),t.addClass("popup-show");var i=jQuery("#hotel-booking-search-bar"),n=jQuery(".booking").height(),c=e.toResult?0:o.ismobile()?40:107,l=(window.innerHeight||document.documentElement.clientHeight)>i.height()+c,a=window.innerHeight||document.documentElement.clientHeight,s=i.offset().top-c,r=document.documentElement.scrollTop||document.body.scrollTop,g=r+a,d=i.offset().top+i.height()+n+c;l?jQuery(window).scrollTop(s):s>r?jQuery(window).scrollTop(s):g>d&&jQuery(window).scrollTop(d-a)},lockScroll:function(e){this.options.rootView.getRegion("popup").switchState("popup:show"),jQuery("#hotel-booking-search-bar").css({"z-index":"10000",position:"relative"}),jQuery(".maps").css("visibility","hidden"),jQuery(window).on("scroll",{toResult:e},this.lockFunction)},unlockScroll:function(){this.options.rootView.getRegion("popup").switchState("popup:hide"),jQuery("#booking-cancel").hide(),jQuery("#hotel-booking-search-bar").css("z-index","1"),jQuery(".maps").css("visibility","visible"),jQuery(window).off("scroll",this.lockFunction)},onRender:function(){var e=this,t=n.map([l,s,a],function(t){return new t({model:e.model}).render()});this.views=t,n.each(t,function(i){e.$el.append(i.el),i.on("req:change",function(){var c=i.$el.hasClass("change");n.each(t,function(t){t.$el.hasClass("booking-occupancy")||(t.$el.hasClass("booking-calendar change")&&(e.model.get("promocode").discountcode?e.model.trigger("check:code",{forceCheck:!0}):e.search()),t.$el.removeClass("change"))}),c||i.$el.addClass("change")})}),e.model.get("occupancy").on("change:value",n.debounce(function(){e.search()},1e3)),e.model.on("code:valid change:checkbox",n.bind(e.search,this))}})},{"../../booking/calendar/view":400,"../../booking/occupancy/view.js":409,"../../booking/promocode/view.js":414,"../../ui/util.js":2122,"../assets/booking-hotel.hbs":162,backbone:8,"backbone.marionette":6,underscore:42}],414:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../ui/util"),o=e("./model"),s=e("./group-code-check-promise.js"),r=e("./discount-code-check-promise.js");t.exports=l.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"form booking-promocode",ui:{uspromo:".uspromo ",accessible:'label[for="accessible"]',msg:".promocode-error",groupCodeError:".groupcode-error",discountCodeError:".discount-error"},events:{"click input":function(){this.trigger("req:change")},"keyup input.promocheck":function(e){this.model.set2("promocode","promo",this.$(e.target).val())},"keyup input.group":function(e){this.model.set2("promocode","groupcode",this.$(e.target).val())},"keyup input.discount":function(e){this.model.set2("promocode","discountcode",this.$(e.target).val())},"change [type=checkbox]":function(e){this.model.trigger("change:checkbox"),this.model.set2("promocode",this.$(e.target).attr("name"),this.$(e.target).prop("checked"))}},msg:function(e,t){this.ui.msg.html(e||"").closest(".field")[e?"addClass":"removeClass"]("input-error not-null")[e&&t?"addClass":"removeClass"]("valid")},groupCodeMessage:function(e,t){this.ui.groupCodeError.html(e||"").closest(".field")[e?"addClass":"removeClass"]("input-error not-null")[e&&t?"addClass":"removeClass"]("valid")},discountCodeMessage:function(e,t){this.ui.discountCodeError.html(e||"").closest(".field")[e?"addClass":"removeClass"]("input-error not-null")[e&&t?"addClass":"removeClass"]("valid")},onRender:function(){var e=this;e.model.on("change:promocode pcv2",function(){e.ui.uspromo.each(function(){jQuery(this).prop("checked",e.model.get("promocode")[jQuery(this).attr("name")])})}).trigger("pcv2"),e.model.on("change:hotel pcv1",function(){e.ui.uspromo[e.model.isAmerican()?"show":"hide"](),e.ui.accessible[e.model.get("hotel").accessibleroom?"show":"hide"]()}).trigger("pcv1"),e.model.on("change:adultCount change:childCount",function(){var t=new r({checkin:e.model.get("dates").checkin,checkout:e.model.get("dates").checkout||e.model.get("dates").defaultCheckout,hotelcode:e.model.get("hotel").code,discountcode:e.model.get("promocode").discountcode,adults:e.model.get("adultCount").toString(),children:e.model.get("childCount").toString()});t.promise&&t.promise.error(function(t){e.discountCodeMessage(i18n.t("general.network_error"),!1)}).success(function(t){var i=!t.valid&&(t.message||i18n.t("booking.discount_code_invalid"));e.discountCodeMessage(i||t.message||i18n.t("booking.discount_code_valid"),!i),i||(e.model.set2("promocodeValid","discountcode",!0),e.model.trigger("code:valid"))})}),e.model.on("change:promocode change:hotel check:code",n.debounce(function(t){var i=e.model.changedAttributes().promocode,n=!!i;!n||i.promo||i.groupcode||i.discountcode||e.model.trigger("code:valid");var c=e.model.get("promocode");if(e.groupcode!=c.groupcode||e.model.changedAttributes().hotel){e.groupcode=c.groupcode,e.groupCodeMessage(""),e.model.set2("promocodeValid","groupcode",!1);var l=new s({hotelcode:e.model.get("hotel").code,groupcode:c.groupcode});l.promise&&l.promise.error(function(t){e.groupCodeMessage(i18n.t("general.network_error"),!1)}).success(function(t){var i=!t.valid&&i18n.t("booking.groupcode_invalid");e.groupCodeMessage(i||i18n.t("booking.groupcode_valid"),!i),i||(e.model.set2("promocodeValid","groupcode",!0),e.model.trigger("code:valid"))})}if(e.discountcode!=c.discountcode||e.model.changedAttributes().hotel||t.forceCheck){e.discountcode=c.discountcode,e.discountCodeMessage(""),e.model.set2("promocodeValid","discountcode",!1);var l=new r({checkin:e.model.get("dates").checkin,checkout:e.model.get("dates").checkout||e.model.get("dates").defaultCheckout,hotelcode:e.model.get("hotel").code,discountcode:c.discountcode,adults:e.model.get("adultCount").toString(),children:e.model.get("childCount").toString()});l.promise&&l.promise.error(function(t){e.discountCodeMessage(i18n.t("general.network_error"),!1)}).success(function(t){var i=!t.valid&&(t.message||i18n.t("booking.discount_code_invalid"));e.discountCodeMessage(i||t.message||i18n.t("booking.discount_code_valid"),!i),i||(e.model.set2("promocodeValid","discountcode",!0),e.model.trigger("code:valid"))})}},500)),e.model.on("change:promocode change:hotel change:dates",n.debounce(function(){var t=e.model.changedAttributes().promocode,i=!!t;!i||t.promo||t.groupcode||t.discountcode||e.model.trigger("code:valid"),e.msg(""),e.model.set2("promocodeValid","promo",!1),e.model.set2("promocodeValid","packageurl","");var n=function(){return a.getInstanceModel(o,{hotelcode:e.model.get("hotel").code,promocode:e.model.get("promocode").promo})},l=n();l.promise&&l.promise.error(function(){l==n()&&e.msg(i18n.t("general.network_error"),!1)}).success(function(){if(l==n()){var t=!l.get("valid")&&i18n.t("booking.promocode_invalid")||l.get("expiry")&&e.model.get("dates").checkout>l.get("expiry")&&i18n.t("booking.promocode_expired");e.msg(t||i18n.t("booking.promocode_valid"),!t);var o=jQuery(e.el).closest(".booking").find(".wgt-sqbutton-blue");0===o.length?t||(l.get("url")&&(e.model.set2("promocodeValid","packageurl",l.get("url")),a.redirect(l.get("url")),e.model.set2("promocode","promo","")),e.model.set2("promocodeValid","promo",!0),i&&e.model.trigger("code:valid")):t?(c.trigger("getBookingUrl",""),e.model.set2("promocodeValid","promo",!0),i&&e.model.trigger("code:valid")):l.get("url")?c.trigger("getBookingUrl",l.get("url")):c.trigger("getBookingUrl","")}})},500))}})},{"../../ui/util":2122,"./discount-code-check-promise.js":410,"./group-code-check-promise.js":411,"./model":412,"./template.hbs":413,backbone:8,"backbone.marionette":6,underscore:42}],413:[function(e,t,i){t.exports='<span class="heading">{{local "booking.enter_a_promo_code"}}</span>\r\n<form>\r\n<div class="field">\r\n    <div class="input-box">\r\n        <input type="text" class="promo promocheck" placeholder="{{local "booking.enter_a_promo_code"}}" value="{{ promocode.promo }}"/>\r\n    </div>\r\n    <span class="error-tip not-null promocode-error"> </span>\r\n</div>\r\n\r\n<div class="field" style="display: block;margin-top: 30px;">\r\n    <div class="input-box">\r\n        <input type="text" class="promo group" placeholder="{{local "booking.enter_a_group_code"}}" value="{{ promocode.groupcode }}"/>\r\n    </div>\r\n    <span class="error-tip not-null groupcode-error"> </span>\r\n</div>\r\n\r\n<div class="field" style="display: block;margin-top: 30px;">\r\n    <div class="input-box">\r\n        <input type="text" class="promo discount" placeholder="{{local "booking.enter_a_discount_code"}}" value="{{ promocode.discountcode }}"/>\r\n    </div>\r\n    <span class="error-tip not-null discount-error"> </span>\r\n</div>\r\n\r\n<div class="checkboxes">\r\n    <label for="AAA" class="uspromo">\r\n        <input id="AAA" name="AAA" type="checkbox" {{#if promocode.AAA}}checked="checked"{{/if}} />\r\n        {{local "booking.AAA_CAA"}}\r\n    </label>\r\n    <label for="AARP" class="uspromo">\r\n        <input id="AARP" name="AARP" type="checkbox" {{#if promocode.AARP}}checked="checked"{{/if}}/>\r\n        {{local "booking.Senior_AARP"}}\r\n    </label>\r\n    <label for="GOV" class="uspromo">\r\n        <input id="GOV" name="GOV"  type="checkbox" {{#if promocode.GOV}}checked="checked"{{/if}}/>\r\n        {{local "booking.Government"}}\r\n    </label>\r\n\r\n    <label for="accessible">\r\n        <input id="accessible" name="Accessible" type="checkbox" {{#if promocode.Accessible}}checked="checked"{{/if}}/>\r\n        {{local "booking.accessible_room"}}\r\n    </label>\r\n</div>\r\n</form>'},{}],412:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../ui/util");t.exports=c.Model.extend({url:l.getURL("api","promocheck"),initialize:function(){var e=n.pick(this.attributes,["promocode","hotelcode"]);this.promise=n.all(n.values(e))&&this.fetch({data:jQuery.param(e)})},defaults:{discountcode:"",groupcode:"",promocode:"",hotelcode:"",valid:null,expiry:""}})},{"../../ui/util":2122,backbone:8,underscore:42}],411:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("../../ui/util"));t.exports=function(e){this.promise=n.all(n.values(e))&&jQuery.ajax({url:c.getURL("api","groupcodecheck"),data:jQuery.param({groupcode:e.groupcode,hotelcode:e.hotelcode})})}},{"../../ui/util":2122,backbone:8,underscore:42}],410:[function(e,t,i){var n=e("underscore"),c=e("moment"),l=e("../../ui/util");t.exports=function(e){this.promise=n.all(n.values(e))&&jQuery.ajax({url:l.getURL("api","discountcodecheck"),data:jQuery.param({discountcode:e.discountcode,hotelcode:e.hotelcode,localdate:c().format("YYYY-MM-DD"),checkin:e.checkin,checkout:e.checkout,adults:e.adults,children:e.children})})}},{"../../ui/util":2122,moment:16,underscore:42}],409:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("underscore.string/sprintf"),e("backbone.marionette")),c=e("../../ui/counter/view/counter.js"),l=e("../../ui/util");e("./styles.sass"),t.exports=n.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"booking-occupancy change",ui:{counters:".counters",summary:".summary [data-index]",btn:".btn"},initialize:function(){var e=this;e.tip=i18n.t("booking.occupancy_tip"),e.maxocc={value:18},e.model.on("change:hotel",function(t){var i=t.get("hotel"),n=i.maxocc||18;t.get("occupancy").each(function(t){if("adults"==t.get("key")){var c=i.adultocc||9;t.set("maxoccupancy",c);var l=Math.min(t.get("value"),c);t.set("value",l),n-=l}else if("children"==t.get("key")){var a=i.childocc||9;t.set("maxoccupancy",a);var o=Math.min(t.get("value"),a,n);t.set("value",o),n-=o,e.maxocc.value=n,t.set("sublabel",i18n.t("booking.child_sublabel").replace(/\d+/,i.maxchildage||11))}}),e.render()})},onRender:function(){var e=this;l.agebands(e.model.get("occupancy").filter(function(e){return"rooms"!=e.get("name")}),9),e.model.on("change:dates",function(){e.model.hasValidDates()&&e.trigger("req:change")}),e.counters=[],e.model.get("occupancy").each(function(t){if("rooms"!=t.get("name")){var i=new c({model:t,maxocc:e.maxocc});e.ui.counters.append(i.render().el),e.counters.push(i)}t.on("change:value",function(){e.trigger("req:change"),e.counters.forEach(function(e){e.render()})})}),e.model.get("occupancy").on("change:value",function(t){var i=e.model.get("occupancy").indexOf(t);jQuery(e.ui.summary.get(i)).attr("data-value",t.get("value")).find(".value").text(t.get("value"))})}})},{"../../ui/counter/view/counter.js":2064,"../../ui/util":2122,"./styles.sass":407,"./template.hbs":408,backbone:8,"backbone.marionette":6,underscore:42,"underscore.string/sprintf":41}],2064:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette"));e("../assets/counter.sass"),t.exports=c.ItemView.extend({getTemplate:function(){return this.options.forCheckout?Handlebars.compile(e("../assets/counter-checkout.hbs")):Handlebars.compile(e("../assets/counter.hbs"))},className:function(){return this.options.forCheckout?"counter-checkout":"counter"},ui:{minusBtn:"a.mins-btn",addBtn:"a.add-btn"},events:{"click .minus-btn":"onMinus","click .add-btn":"onAdd"},initialize:function(e){if(this.maxocc=e&&e.maxocc,this.maxocc&&this.maxocc.events){var t=this;this.maxocc.events.on("change:maxocc",function(){t.render()})}else this.model.on("change",n.bind(this.render,this))},onBeforeRender:function(){var e=this.model,t=e.get("value"),i=e.get("minValue"),n=e.get("maxValue");e.set({reachMin:i>=t},{silent:!0}),e.set({reachMax:t>=n||this.maxocc&&this.maxocc.value-1<0},{silent:!0})},onMinus:function(e){var t=this.model,i=t.get("value"),n=t.get("minValue"),c=jQuery('[data-section="maximum_occupancy"]');if(!(n>=i)){var l=--i==n;this.maxocc&&(this.maxocc.value++,this.maxocc.events&&(t.set({value:i,reachMin:l,reachMax:!1}),this.maxocc.events.trigger("change:maxocc"))),this.maxocc&&this.maxocc.events||t.set({value:i,reachMin:l,reachMax:!1}),c.length&&c.hide()}},onAdd:function(e){var t=this.model,i=t.get("value"),n=t.get("maxValue"),c=jQuery('[data-section="maximum_occupancy"]');if(!(i>=n||this.maxocc&&this.maxocc.value-1<0)){var l=++i==n;this.maxocc&&(this.maxocc.value--,this.maxocc.events&&(t.set({value:i,reachMax:l,reachMin:!1}),this.maxocc.events.trigger("change:maxocc"))),this.maxocc&&this.maxocc.events||t.set({value:i,reachMax:l,reachMin:!1}),c.length&&i>=n&&c.show()}}})},{"../assets/counter-checkout.hbs":2061,"../assets/counter.hbs":2062,"../assets/counter.sass":2063,backbone:8,"backbone.marionette":6,underscore:42}],2063:[function(e,t,i){t.exports=e("sassify")("/**  *  * @param { 300 | bold } $font-weight  * @param { normal     } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal           } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { 300 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { normal } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ .counter {   color: #363636; }   .counter label {     font-size: 2rem;     width: 6rem;     vertical-align: middle;     display: inline-block; }     .counter label label.sublabel {       font-size: 1.2rem; }   .counter a.btn {     display: inline-block;     color: #363636;     border: solid 0.2rem #363636;     vertical-align: middle;     cursor: pointer; }     .counter a.btn span {       font-size: 2.8rem; }     .counter a.btn.btn-disable {       cursor: not-allowed;       opacity: .4; }   .counter .value {     font-size: 2.8rem;     display: inline-block;     margin: 0 0.4em;     vertical-align: middle; }  .counter-checkout {   color: black;   font-family: 'Whitney', Helvetica, sans-serif;   font-weight: 500;   line-height: 2.2rem;   font-size: 0; }   .counter-checkout .label-line label {     font-size: 1.4rem;     width: 8.7rem;     vertical-align: middle;     display: inline-block; }   .counter-checkout .label-line .counter-wrapper {     line-height: 1.6rem; }     .counter-checkout .label-line .counter-wrapper a.btn {       display: inline-block;       color: #363636;       border: solid 0.1rem #363636;       vertical-align: middle;       cursor: pointer;       line-height: 0; }       .counter-checkout .label-line .counter-wrapper a.btn.btn-disable {         cursor: not-allowed;         opacity: .4; }     .counter-checkout .label-line .counter-wrapper span {       font-size: 1.3rem; }     .counter-checkout .label-line .counter-wrapper .value {       font-size: 1.8rem;       display: inline-block;       vertical-align: middle;       text-align: center;       width: 3.1rem; }   .counter-checkout .sublabel {     font-size: 1rem;     line-height: 1.2rem; }  ");
},{sassify:36}],2062:[function(e,t,i){t.exports='{{#if hideLabel }}\r\n{{else}}\r\n    <label data-type="{{#if labels}}{{{labels}}}{{else}}{{{label}}}{{/if}}">\r\n        {{#if labels}} {{{labels}}} {{else}} {{{label}}} {{/if}}\r\n        {{#if sublabel}}<label class="sublabel">{{sublabel}}</label>{{/if}}\r\n    </label>\r\n{{/if}}\r\n\r\n\r\n{{#if reachMin}}\r\n    <a class="btn minus-btn btn-disable">\r\n        <span class="icon-icon_B024"></span>\r\n    </a>\r\n{{else}}\r\n    <a class="btn minus-btn">\r\n        <span class="icon-icon_B024"></span>\r\n    </a>\r\n{{/if}}\r\n<span class="value">{{ value }}</span>\r\n\r\n{{#if reachMax}}\r\n    <a class="btn add-btn btn-disable">\r\n        <span class="icon-icon_B023"></span>\r\n    </a>\r\n{{else}}\r\n    <a class="btn add-btn">\r\n        <span class="icon-icon_B023"></span>\r\n    </a>\r\n{{/if}}\r\n\r\n\r\n'},{}],2061:[function(e,t,i){t.exports='<span class="label-line">\r\n    {{#unless hideLabel }}\r\n        <label class="label">\r\n            {{#if labels}} {{{labels}}} {{else}} {{{label}}} {{/if}}\r\n        </label>\r\n    {{/unless}}\r\n\r\n    <span class="counter-wrapper">\r\n    {{#if reachMin}}\r\n        <a class="btn minus-btn btn-disable">\r\n        <span class="icon-icon_B024"></span>\r\n    </a>\r\n    {{else}}\r\n        <a class="btn minus-btn">\r\n        <span class="icon-icon_B024"></span>\r\n    </a>\r\n    {{/if}}\r\n    <span class="value">{{ value }}</span>\r\n\r\n    {{#if reachMax}}\r\n        <a class="btn add-btn btn-disable">\r\n        <span class="icon-icon_B023"></span>\r\n    </a>\r\n    {{else}}\r\n        <a class="btn add-btn">\r\n        <span class="icon-icon_B023"></span>\r\n    </a>\r\n    {{/if}}\r\n    </span>\r\n\r\n</span>\r\n\r\n\r\n{{#if sublabel}}<div class="sublabel">({{sublabel}})</div>{{/if}}\r\n\r\n\r\n\r\n\r\n\r\n'},{}],408:[function(e,t,i){t.exports='<span class="heading"><span class="icon-icon_I008"></span>{{local "booking.occupancy"}}<span class="per-room">{{local "booking.per_room"}}</span></span>\r\n<span class="summary">\r\n    {{#each occupancy.models}}\r\n        <span data-value="{{attributes.value}}" data-index="{{@index}}">\r\n            <span class="value">{{attributes.value}}</span>\r\n            <span class="label">{{attributes.label}}</span>\r\n            <span class="labels">{{attributes.labels}}</span>\r\n        </span>\r\n    {{/each}}\r\n    <a class="edit-btn" href="javascript:void(0)" data-opt="edit">{{local "booking.change"}}</a>\r\n</span>\r\n<div class="change counters"></div>\r\n'},{}],407:[function(e,t,i){t.exports=e("sassify")('.booking-occupancy [data-value="1"] .labels, .booking-occupancy .label, .booking-occupancy [data-value="0"] {   display: none !important; }  .booking-occupancy [data-value="1"] .label {   display: inline-block !important; }  .booking-occupancy.change .change, .booking-occupancy .summary {   display: block; }  .booking-occupancy.change .summary, .booking-occupancy .change {   display: none; }  .booking-occupancy .per-room {   display: block;   margin-left: calc(2em + 1rem);   font-size: 2rem;   line-height: 1.5em;   color: #eee; }   @media screen and (max-width: 768px) {     .booking-occupancy .per-room {       font-size: 1.6rem;       margin-left: 0.3em;       display: inline-block; } }  html[dir="rtl"] .booking-occupancy .per-room {   margin-right: calc(2em + 1rem);   margin-left: 0; }   @media screen and (max-width: 768px) {     html[dir="rtl"] .booking-occupancy .per-room {       margin-right: 0.3em;       margin-left: 0; } }  ')},{sassify:36}],400:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("moment"),a=e("../../abmb/stateful.js"),o=e("../../calendar/calendar-twins"),s=e("../../ui/util.js"),r=e("./template.hbs");t.exports=c.ItemView.extend(n.extend({},a,{template:Handlebars.compile(r),className:"booking-calendar",initialize:function(){this.tip=i18n.t("booking.date_tip")},triggers:{"click .trigger-calendar":"req:change"},ui:{calendars:".calendars-wrapper",summary:".summary .calendar-text",edit:".edit-btn",tips:".tips",checkinTip:".checkin"},onRender:function(){var e=this;e.ui.checkinTip.text(""),e.model.on("change:hotel",function(){e.model.get("hotel").code&&e.model.get("hotel").code!=e.model.previous("hotel").code&&e.trigger("req:change")}),e.calendarTwinsCheckIn=new o({limitTo:"after",noActiveDay:!0,keepCheckOutPosition:!0}),e.calendarTwinsCheckOut=new o({limitTo:"after",noActiveDay:!0,forceAhead:!0}),e.calendarTwinsCheckIn.on("select",function(t,i){e.model.set({dates:{checkin:t.format("YYYY-MM-DD"),checkout:"",defaultCheckout:t.add(1,"day").format("YYYY-MM-DD")}}).trigger("cv1",i)}),e.calendarTwinsCheckOut.on("select",function(t){e.model.set({dates:{checkout:t.format("YYYY-MM-DD"),checkin:e.model.get("dates").checkin}}).trigger("cv1")}),e.ui.calendars.append(e.calendarTwinsCheckIn.render().el,e.calendarTwinsCheckOut.render().el),e.on("req:change change",function(){e.ui.tips.text(i18n.t("booking.select_checkin_date")),e.calendarTwinsCheckIn.$el.show(),e.calendarTwinsCheckOut.$el.hide(),e.calendarTwinsCheckIn.unsetHover(),e.ui.checkinTip.text("")}),e.model.on("change:dates cv1",function(t){var i=e.model.get("dates");e.ui.summary.text(l(i.checkin).format(s.getDateFormat())+" - "+l(i.checkout||i.defaultCheckout).format(s.getDateFormat())),e.ui.tips.text(!i.checkin&&i18n.t("booking.select_checkin_date")||!i.checkout&&i18n.t("booking.select_checkout_date")||""),e.calendarTwinsCheckIn.$el[i.checkin?"hide":"show"]();var n=i.checkin;e.calendarTwinsCheckIn.$el[n?"hide":"show"](),e.calendarTwinsCheckOut.$el[n?"show":"hide"](),e.calendarTwinsCheckOut.setLimitBefore(l(e.model.get("dates").checkin)),n&&(e.ui.checkinTip.text(i18n.t("booking.checkin")+" "+l(i.checkin).format(s.getDateFormat())),t&&e.calendarTwinsCheckOut.older.prev())}).trigger("cv1")}}))},{"../../abmb/stateful.js":72,"../../calendar/calendar-twins":423,"../../ui/util.js":2122,"./template.hbs":399,"backbone.marionette":6,moment:16,underscore:42}],423:[function(e,t,i){var n=(e("backbone"),e("moment")),c=e("backbone.marionette"),l=(e("underscore"),e("./calendar.js")),a=e("../ui/util"),o=c.ItemView.extend({template:'<div> <div id="older"></div> <div id="younger"></div> </div>',className:"calendar-twins",initialize:function(e){var t=this;e&&e.activeDay&&(t.older=new l({limitTo:"after",activeDay:e.activeDay,setEndDay:!0}),t.younger=new l({limitTo:"after",noActiveDay:!0,setEndDay:!0})),e&&e.noActiveDay?(t.older=new l({limitTo:"after",noActiveDay:!0,maxAheadMonths:1,forceAhead:e.forceAhead,setEndDay:!0}),t.younger=new l({limitTo:"after",noActiveDay:!0,maxNextMonths:13,setEndDay:!0})):(t.older=new l({limitTo:"after",setEndDay:!0}),t.younger=new l({limitTo:"after",setEndDay:!0})),t.keepCheckOutPosition=e.keepCheckOutPosition,t.younger.next(),t.older.on("date-prev",function(){t.younger.prev(null,!0)}),t.younger.on("date-next",function(){t.older.next(null,!0)}),t.older.myEvent.on("select",function(e){t.selectWhich="older",t.trigger("select",e),e&&e.clone().subtract(1,"days").endOf("month").date()==e.clone().subtract(1,"days").date()&&a.ismobile()&&t.trigger("next:month")}),t.younger.myEvent.on("select",function(e){t.selectWhich="younger",t.trigger("select",e,t.keepCheckOutPosition),e&&e.clone().subtract(1,"days").endOf("month").date()==e.clone().subtract(1,"days").date()&&t.trigger("next:month")})},setMonthToStartPick:function(e){var t=n(e),i=n(t).diff(n(),"month");n(t).date()<=n().date()&&(i+=1),this.older.model.set("__maxAheadMonths",i+this.older.model.get("__maxAheadMonths")),this.older.model.get("__maxAheadMonths")>1&&this.older.model.set("__hidePrev",!1),this.older.setActiveDay(e),this.younger.setActiveDay(t.add(1,"month")),this.older.deActiveDay(),this.younger.deActiveDay()},setLimitBefore:function(e){var t=n(e);this.older.setLimitBefore(e),this.younger.setLimitBefore(e,t.add(1,"month")),this.older.setActiveDay(e,!0),this.younger.setActiveDay(e,!0)},unsetHover:function(){this.older.unsetHover(),this.younger.unsetHover()},onRender:function(){this.$el.find("#older").append(this.older.render().el),this.$el.find("#younger").append(this.younger.render().el)}});t.exports=o},{"../ui/util":2122,"./calendar.js":424,backbone:8,"backbone.marionette":6,moment:16,underscore:42}],424:[function(e,t,i){var n=e("backbone"),c=e("moment"),l=e("underscore");c.monthsShort("-MMM-");var a,o=!1,s={};s.Models={},s.Views={};var r=window.local.dates||{April:"April",August:"August",December:"December",February:"February",Friday:"Friday",January:"January",July:"July",June:"June",March:"March",May:"May",Monday:"Monday",November:"November",October:"October",Saturday:"Saturday",September:"September",Sunday:"Sunday",Thursday:"Thursday",Tuesday:"Tuesday",Wednesday:"Wednesday"},g=window.local.dates_short||{January:"Jan",February:"Feb",March:"Mar",April:"Apr",May:"May",June:"Jun",July:"Jul",August:"Aug",September:"Sep",October:"Oct",November:"Nov",December:"Dec",Sunday:"Sun",Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat"};c.locale("en",{months:[r.January,r.February,r.March,r.April,r.May,r.June,r.July,r.August,r.September,r.October,r.November,r.December],monthsShort:(g.January+"_"+g.February+"_"+g.March+"_"+g.April+"_"+g.May+"_"+g.June+"_"+g.July+"_"+g.August+"_"+g.September+"_"+g.October+"_"+g.November+"_"+g.December).split("_"),weekdays:[r.Sunday,r.Monday,r.Tuesday,r.Wednesday,r.Thursday,r.Friday,r.Saturday],weekdaysShort:(g.Sunday+"_"+g.Monday+"_"+g.Tuesday+"_"+g.Wednesday+"_"+g.Thursday+"_"+g.Friday+"_"+g.Saturday).split("_")}),s.Models.Month=n.Model.extend({defaults:{limitBefore:c(),year:c().year(),month:c().month(),date:c().date(),activeDay:"",weeksShowList:c.weekdaysShort(),limitTo:"before",allowYearButtons:!1},initialize:function(){var e=this.moment();this.set("name",e.format("MMMM")),this.set("days",e.daysInMonth()),this.set("weeks",6)},weekDates:function(e){var t=7,i=[],n=this.moment().day();0===e&&(t-=n,n=0);for(var c=7*e+1-n,l=c+t;l>c&&!(c>this.get("days"));c++)i.push(c);return i},moment:function(){return c([this.get("year"),this.get("month")])},localSet:function(e){this.get("collections")[e].set("active","active")}}),s.Models.Day=n.Model.extend({defaults:{moment:"",status:"normal",active:""}}),s.Views.Calendar=n.View.extend({template:Handlebars.compile(e("./assets/tel.hbs")),setHover:function(e){var t=jQuery(e.target),i=t.closest(".booking-calendar");if(i.length||(i=t.closest(".dates-selector")),i.length||(i=t.closest("#u-w-expand")),this.model.get("setEndDay")&&i.find(".change.checkin").text()&&i.find(".change.checkin").text()!=i18n.t("quickbook.select_date")){if(t.closest("span").hasClass("normal")){var n=c(t.closest(".calendar-twins,.date-popup").find(".date.start").data("date")),l=c(t.closest("span").data("date"));jQuery(".date").each(function(){var e=jQuery(this),t=c(e.data("date"));l>t&&(!n||t>n)?e.addClass("include"):l.format("YYYY-MM-DD")==t.format("YYYY-MM-DD")&&e.addClass("hover")})}}},unsetHover:function(e){this.model.get("setEndDay")&&jQuery(".date").removeClass("include hover")},initialize:function(e){var t=this.clean(e&&e.year,e&&e.month),i=this,r={year:t[0],month:t[1]};if(e&&e.activeDay){var g=c(e.activeDay,"YYYYMMDD");r.year=g.year(),r.month=g.month(),r.activeDay=g}this.model=new s.Models.Month(r),e&&e.limitTo&&this.model.set("limitTo",e.limitTo),e&&e.limitBefore&&this.model.set("limitBefore",e.limitBefore),e&&e.allowDate&&(a=e.allowDate,o=!0),e&&e.allowYearButtons&&this.model.set("allowYearButtons",e.allowYearButtons),e&&e.maxAheadMonths&&(this.model.set("__maxAheadMonths",e.maxAheadMonths),e.maxAheadMonths<=1&&this.model.set("__hidePrev",!0)),e&&e.setEndDay&&(this.model.set("setEndDay",!0),jQuery(document).on("mouseenter",".date",function(e){i.setHover(e)}).on("mouseleave",".date",function(e){i.unsetHover(e)})),this.model.set("__forceAhead",e.forceAhead),e&&e.maxNextMonths&&(this.model.set("__maxNextMonths",e.maxNextMonths),e.maxNextMonths<=0&&this.model.set("__hideNext",!0)),e&&e.noActiveDay&&this.model.set("__noActiveDay",!0),this.collection=[],this.listenTo(this.model,"change",function(){i.render()});var d={};l.extend(d,n.Events),this.myEvent=d,this.myEvent.on("select",function(e){i.model.set("date",e.date())}),this.myEvent.on("resetNumber",function(){i.render()})},events:{"click #prevYear":"prevYear","click #nextYear":"nextYear","click .prevMonth":"prev","click .nextMonth":"next"},setLimitBefore:function(e,t){var i=this;i.model.set("limitBefore",e),t?i.reset(c([t.year(),t.month()])):i.reset(c([e.year(),e.month()]))},setLimitBoth:function(e,t){var i=this;i.model.set("limitBefore",e),i.model.set("limitAfter",t),i.reset(c([e.year(),e.month()]))},setLimitAfter:function(e){},deActiveDay:function(){this.model.set("activeDay","")},setActiveDay:function(e,t){var i=c(e,"YYYY/MM/DD");t||this.reset(c([i.year(),i.month()])),this.model.set("activeDay",i)},reset:function(e){this.model.set("year",e.year()),this.model.set("month",e.month()),this.model.set("name",e.format("MMMM")),this.model.set("days",e.daysInMonth())},prev:function(e,t){var i=this.model.get("__maxAheadMonths")-1;i=Math.max(0,i);var n=this.model.get("__maxNextMonths")+1;if(this.model.set("__hideNext",!1),1==i&&this.model.set("__hidePrev",!0),0==i&&this.model.get("__forceAhead")&&this.model.set("__hidePrev",!0),0>=n&&this.model.set("__hideNext",!0),0==i&&!this.model.get("__forceAhead"))return!1;this.model.set("__maxAheadMonths",i),this.model.set("__maxNextMonths",n);var c=this.model.moment().subtract(1,"month");this.reset(c),t||this.trigger("date-prev"),e&&e.stopPropagation()},next:function(e,t){var i=this.model.moment().add(1,"month");this.model.set("__hidePrev",!1),this.model.set("__hideNext",!1);var n=this.model.get("__maxAheadMonths")+1,c=this.model.get("__maxNextMonths")-1;0>=c&&this.model.set("__hideNext",!0),this.model.set("__maxAheadMonths",n),this.model.set("__maxNextMonths",c),this.reset(i),t||this.trigger("date-next"),e&&e.stopPropagation()},prevYear:function(e){var t=this.model.moment().subtract(1,"year");this.reset(t),e.stopPropagation()},nextYear:function(e){var t=this.model.moment().add(1,"year");this.reset(t),e.stopPropagation()},clean:function(e,t,i){var n=c();return e=parseInt(e,10)||n.year(),t=(parseInt(t,10)-1)%12>=0?(parseInt(t,10)-1)%12:n.month(),i=parseInt(i,10)||n.day(),[e,t,i]},render:function(){this.collection=[],this.el.innerHTML=this.template(this.model.toJSON());for(var e=this.model.get("weeks"),t=0;e>t;t++)this.$("tbody").append(new s.Views.WeekRow({week:t,model:this.model,myEvent:this.myEvent,collection:this.collection}).render().el);return this},hide:function(){return this.$el.hide(),this},toggle:function(){return this.$el.toggle(),this},localSet:function(e){this.collection[e].set("active","active")}}),s.Views.WeekRow=n.View.extend({tagName:"tr",initialize:function(e){e&&(this.week=e.week,this.myEvent=e.myEvent)},render:function(){var e=this.model,t=this.myEvent;if(0===this.week)for(var i=e.moment().day(),n=0;i>n;n++)this.$el.append("<td></td>");var c=this;return e.weekDates(this.week).forEach(function(i){i=e.moment().date(i);var n=new s.Models.Day({moment:i});c.collection.push(n);var l=new s.Views.DayCell({model:n,monthModel:e,myEvent:t});this.$el.append(l.render().el)},this),this}}),s.Views.DayCell=n.View.extend({tagName:"td",template:Handlebars.compile('<span data-date="{{dateString}}" class="date {{ status }} {{ active }} {{ start }} {{ end }} {{include}}"><div class="number" style="display: inline-block">{{ num }}</div></span>'),events:{click:"setSelect","click .date":"localRender"},initialize:function(e){e&&(this.myEvent=e.myEvent,this.monthModel=e.monthModel);var t=this;this.listenTo(this.model,"change:active",function(){t.render()})},render:function(){var e=this,t=c(),i=this.model.get("moment"),n=(this.monthModel.get("hoverDay"),i.clone().subtract(1,"days")),l=this.monthModel.get("limitTo"),s=this.monthModel.get("setEndDay"),r=null,g=null,d=!1;switch(l){case"none":this.model.set("status","normal");break;case"after":r=this.monthModel.get("limitBefore"),g=parseInt(i.diff(r,"days",!0));var I=parseInt(i.diff(t,"days",!0))<0?"unable":"unable-after-today";if(0>g)this.model.set("status",I),i.format("YYYY/MM/DD")==t.format("YYYY/MM/DD")&&this.model.set("status",I);else if(this.model.set("status","normal"),i.format("YYYY/MM/DD")==t.format("YYYY/MM/DD")&&this.model.set("status","normal"),o){for(var b=i.format("YYYYMMDD"),C=0,u=a.length;u>C;C++)!function(t){var i=a[t].performance.date_yyyymmdd;return b==i?(e.model.set("status","normal"),d=!0):void 0}(C);d||e.model.set("status",I)}break;case"before":r=this.monthModel.get("limitAfter")||t,g=parseInt(i.diff(r,"days",!0)),g>=0?(this.model.set("status","unable"),i.format("YYYY/MM/DD")==t.format("YYYY/MM/DD")&&this.model.set("status","unable")):(this.model.set("status","normal"),i.format("YYYY/MM/DD")==t.format("YYYY/MM/DD")&&this.model.set("status","normal"));break;case"both":r=this.monthModel.get("limitBefore")||t,end=this.monthModel.get("limitAfter"),diffBefore=parseInt(i.diff(r,"days",!0)),diffAfter=parseInt(i.diff(end,"days",!0)),diffBefore<0||diffAfter>=0?(this.model.set("status","unable"),i.format("YYYY/MM/DD")==t.format("YYYY/MM/DD")&&this.model.set("status","unable")):(this.model.set("status","normal"),i.format("YYYY/MM/DD")==t.format("YYYY/MM/DD")&&this.model.set("status","normal"))}return i.format("YYYY/MM/DD")==(this.monthModel.get("activeDay")&&this.monthModel.get("activeDay").format("YYYY/MM/DD"))&&(this.model.set("status","active"),s&&this.model.set("start","start")),s&&n.format("YYYY/MM/DD")==(this.monthModel.get("activeDay")&&this.monthModel.get("activeDay").format("YYYY/MM/DD"))&&this.model.set("end","end"),this.el.innerHTML=this.template({num:this.model.get("moment").date(),status:this.model.get("status"),active:this.model.get("active"),start:this.model.get("start"),end:this.model.get("end"),include:this.model.get("include"),dateString:this.model.get("moment").format("YYYY-MM-DD")}),this},setSelect:function(e){var t=this;e.stopPropagation(),jQuery(e.target).closest("span").hasClass("normal")&&(this.myEvent.trigger("select",this.model.get("moment")),t.monthModel.get("__noActiveDay")||this.monthModel.set("activeDay",this.model.get("moment")))}}),t.exports=s.Views.Calendar},{"./assets/tel.hbs":422,backbone:8,moment:16,underscore:42}],422:[function(e,t,i){t.exports='<div class="clock-wrapper {{#if allowYearButtons}} allow-year-btn{{/if}}">\r\n    <h1>\r\n        <span class="opt-btn prev year" id="prevYear"></span>\r\n        {{#if __hidePrev}}\r\n        {{else}}\r\n            <span class="opt-btn prev month prevMonth" id="prevMonth"></span>\r\n        {{/if}}\r\n        <span>{{name}} {{year}}</span>\r\n\r\n        {{#if __hideNext}}\r\n        {{else}}\r\n            <span class="opt-btn next month nextMonth" id="nextMonth"></span>\r\n        {{/if}}\r\n        <span class="opt-btn next year" id="nextYear"></span>\r\n    </h1>\r\n    <table class=\'month\' cellspacing="10">\r\n        <thead>\r\n        <tr>\r\n            {{#each weeksShowList}}\r\n                <th>{{this}}</th>\r\n            {{/each}}\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n\r\n        </tbody>\r\n    </table>\r\n</div>\r\n'},{}],399:[function(e,t,i){t.exports='<div class="header">\r\n    <span class="heading">\r\n        <span class="icon-icon_D002"></span><span>{{local "booking.dates"}}</span>\r\n        <span class="change checkin"></span>\r\n        <span class="change tips"></span>\r\n    </span>\r\n</div>\r\n\r\n<span class="summary">\r\n    <span class="trigger-calendar">\r\n        <span class="calendar-text">{{local "booking.select_dates"}}</span>\r\n        {{#unless lengs}}\r\n            <a class="edit-btn" href="javascript:void(0)" data-opt="edit">{{local "booking.change"}}</a>\r\n        {{/unless}}\r\n    </span>\r\n</span>\r\n\r\n<div class="change calendars-wrapper"></div>'},{}],168:[function(e,t,i){function n(e){var t=jQuery.Deferred();return t.resolve(e),t.promise()}function c(e){return this.hotelcode=e.hotelcode,this.currency=e.currencymark,this.promoidentify=e.promoidentify,r.checkin=e.checkin,r.checkout=e.checkout,r.room=e.room,r.adult=e.adult,r.child=e.child,l.each(e.roomtypes,function(t){t.currency=e.currencymark,t.rateplan||(t.rateplan={loyaltymessageaboutpoints:!0}),t.price&&+t.price.memberrate||(t.earnpoints="")}),e.roomtypes}var l=e("underscore"),a=e("backbone"),o=e("moment"),s=e("./room-model.js"),r=e("./param-model"),g=e("../../../../config/host.js").host,d=e("../../booking-2.1/storage/book");t.exports=a.Collection.extend({initialize:function(e){var t=window.hotelPage,i="undefined"!=typeof t&&t;i&&(e.checkoutParam.attributes.dates.checkin=o().add(0,"d").format("YYYY-MM-DD"),e.checkoutParam.attributes.dates.checkout=o().add(1,"d").format("YYYY-MM-DD"),e.checkoutParam.attributes.promocode.Accessible=!0),e&&e.checkoutParam&&(this.checkoutParam=e.checkoutParam)},url:function(){var e=g+"/api/data/avaliableroomcategory?__random="+(new Date).getTime()+"&";return e+=this.checkoutParam.getQueryParams(!0)},parse:function(e){return this.hotelcode=e.hotelcode,this.currency=e.currencymark,this.promoidentify=e.promoidentify,r.checkin=e.checkin,r.checkout=e.checkout,r.room=e.room,r.adult=e.adult,r.child=e.child,l.each(e.roomtypes,function(t){t.currency=e.currencymark,t.rateplan||(t.rateplan={loyaltymessageaboutpoints:!0}),t.price&&+t.price.memberrate||(t.earnpoints="")}),e.roomtypes},fetch:function(){var e=this,t=l.omit(this.checkoutParam.flatten(!0),"packageurl");return t.children||(t.children=0),d.getRoomsByHotel(t).then(function(t){return e.reset(),e.set(c(t)),n()})},setCheckoutParam:function(e){this.checkoutParam=e.toJSON()},model:s,getElement:function(){return this.currentElement},setElement:function(e){this.currentElement=e},next:function(){return this.setElement(this.at(this.indexOf(this.getElement())+1)),this},prev:function(){var e=null;return this.indexOf(this.getElement())<=0?this.setElement(e):e=this.at(this.indexOf(this.getElement())-1),this.setElement(e),this}})},{"../../../../config/host.js":45,"../../booking-2.1/storage/book":353,"./param-model":167,"./room-model.js":169,backbone:8,moment:16,underscore:42}],353:[function(e,t,i){function n(e,t,i,n){return b.isEqual(e,m)?d(i(u,n)):t(n).then(function(t){return u=t,m=e,i(u,n)})}function c(e){var t=r(e);return{maxocc:e.hoteldetail.maxocc,adultocc:e.hoteldetail.adultocc,childocc:e.hoteldetail.childocc,childmessagetitle:e.hoteldetail.childmessagetitle,childmessage:e.hoteldetail.childmessage,roomtypes:g(e,t),discountcode:e.discountcode,maxchildage:e.hoteldetail.maxchildaage,promospecials:e.promospecialpist||[],promoidentify:null,hotelcode:String(e.hoteldetail.hotelid),disablereservation:e.hoteldetail.disablereservation,checkin:e.checkinstr,checkout:e.checkoutstr,rooms:e.rooms,adults:e.adults,children:e.children,promo:e.promocode,promodetail:e.promodetail,promospecial:null,currency:e.currencycode,currencymark:e.currencycode,hasRestrictedRate:b.reduce(e.roomcategorylist,function(e,t){return e||t.hasrestrictedrate},!1),inLoyaltyProgram:null,promocode:e.promocode,promomsg:e.promomsg}}function l(e,t){for(var i=b.where(r(e),{categoryid:t.categoryid}),n=b.findWhere(e.roomcategorylist,{roomcategoryid:t.categoryid}),c=b.uniq(b.map(i,function(e){return e.ratecode})),l=n?n.roomtypelist||[]:[],a=[],o=0;o<c.length;o++)for(var s=0;s<l.length;s++)b.findWhere(i,{ratecode:c[o],roomtypecode:l[s].roomtypecode})||a.push({bedTypeIcon:l[s].bedtypeicon,bedTypeName:l[s].bedtype,rateCode:c[o],roomBedCode:l[s].roomtypecode,roomCategoryId:n.roomcategoryid,roomTypeName:n.roomcategoryname});return n&&{city:e.hoteldetail.address.City,viatorhotel:e.hoteldetail.id,hotelname:e.hoteldetail.name,url:e.hoteldetail.hotelurl,categoryid:n.roomcategoryid,categoryname:n.roomcategoryname,roomrates:i,checkoutform:null,soldOutBedTypes:a,hotelcode:String(e.hoteldetail.hotelid),disablereservation:e.hoteldetail.disablereservation,checkin:e.checkinstr,checkout:e.checkoutstr,rooms:e.rooms,adults:e.adults,children:e.children,promo:e.promocode,promospecial:null,currency:e.currencycode,currencymark:e.currencycode,hasRestrictedRate:b.reduce(e.roomcategorylist,function(e,t){return e||t.hasrestrictedrate},!1),inLoyaltyProgram:null,promodetail:e.promodetail}}function a(e,t){var i=r(e),n=g(e,i),c=[],l=[];if(t.ratecode){c=b.where(i,{ratecode:t.ratecode});for(var a=0;a<n.length;a++)for(var o=n[a].bedtypes,s=0;s<o.length;s++)b.findWhere(c,{categoryid:n[a].id,roomtypecode:o[s].roomtypecode})||l.push({bedTypeIcon:o[s].bedtypeicon,bedTypeName:o[s].bedtype,rateCode:t.ratecode,roomBedCode:o[s].roomtypecode,roomCategoryId:n[a].id,roomTypeName:n[a].type})}else c=b.uniq(i,function(e){return e.ratecode});return{city:e.hoteldetail.address.City,viatorhotel:e.hoteldetail.id,hotelname:e.hoteldetail.name,url:e.hoteldetail.hotelurl,categoryid:"",categoryname:"",roomrates:c,checkoutform:null,roomtypes:n,soldOutBedTypes:l,hotelcode:String(e.hoteldetail.hotelid),disablereservation:e.hoteldetail.disablereservation,checkin:e.checkinstr,checkout:e.checkoutstr,rooms:e.rooms,adults:e.adults,children:e.children,promo:e.promocode,promospecial:null,currency:e.currencycode,currencymark:e.currencycode,hasRestrictedRate:b.reduce(e.roomcategorylist,function(e,t){return e||t.hasrestrictedrate},!1),inLoyaltyProgram:null,promodetail:e.promodetail}}function o(e){var t=c(e);return b.forEach(t.roomtypes,function(t){t.roomrates=l(e,{categoryid:t.id})}),t}function s(e){return{cityurl:e.data.cityinfo.cityurl,locationid:e.data.cityinfo.cityid,isAmerican:e.data.cityinfo.isamerican,accessibleroom:!!b.findWhere(b.map(e.data.hotellist,function(e){return e.hotelinfo.setting}),{accessibleroom:!0}),cityname:e.data.cityinfo.cityname,citytitle:e.data.cityinfo.citytitle,backgroundimage:e.data.cityinfo.backgroundimage,countrycode:e.data.cityinfo.countrycode,hotels:b.map(e.data.hotellist,function(t){return{key:t.hotelinfo.key,content:t.hotelinfo.id,id:t.hotelinfo.id,isAmerican:t.hotelinfo.isamerican,accessibleroom:t.hotelinfo.setting.accessibleroom,hotelid:t.hotelinfo.hotelid,name:t.hotelinfo.name,description:t.hotelinfo.shortdescription,lat:t.hotelinfo.geo.latitude,lng:t.hotelinfo.geo.longitude,isfavourite:t.hotelinfo.other.isfavourite,disablereservation:t.hotelinfo.setting.disablereservation,collectionid:t.hotelinfo.collection?t.hotelinfo.collection.id:null,infoimages:t.hotelinfo.propertyimages,total_guest_rooms:t.hotelinfo.setting.totalguestrooms,hotelurl:t.hotelinfo.url,url:t.hotelinfo.bookingurl,carouselimage:t.hotelinfo.backgroundimagelist.length>0?t.hotelinfo.backgroundimagelist[0].mediaurl:[],carouselimage3:t.hotelinfo.backgroundimagelist.length>0?t.hotelinfo.backgroundimagelist[0].mediaurlw3:[],video:{isvideo:t.hotelinfo.video.isvideo,url:t.hotelinfo.video.url,placehoder:t.hotelinfo.video.placehoder},address:{city:t.hotelinfo.contact.city,Country:t.hotelinfo.contact.country,Address1:t.hotelinfo.contact.address1,Address2:t.hotelinfo.contact.address2,PostalCode:t.hotelinfo.contact.postalcode},telphone:t.hotelinfo.contact.telphone,nearbytransport:t.hotelinfo.nearbytransport,distancetolocation:[],maxocc:t.hotelinfo.bookingsetting.maxocc,adultocc:t.hotelinfo.bookingsetting.adultocc,childocc:t.hotelinfo.bookingsetting.childocc,maxselectroomscount:t.hotelinfo.bookingsetting.maxselectroomscount,reevoo:t.hotelinfo.reevoo?{ReviewCount:t.hotelinfo.reevoo.ReviewCount,ReviewUrl:t.hotelinfo.reevoo.ReviewUrl,ReviewScore:t.hotelinfo.reevoo.ReviewScore,ReviewMessage:t.hotelinfo.reevoo.ReviewMessage,ReviewFlag:t.hotelinfo.reevoo.ReviewFlag}:null,price:t.roomprice?{currency:t.roomprice.finalprice.total.currencycode,rate:t.roomprice.showwithtax?t.roomprice.finalprice.total.aftertax:t.roomprice.finalprice.total.beforetax,points:t.roomprice.showwithtax?t.roomprice.finalprice.costpoints.aftertax:t.roomprice.finalprice.costpoints.beforetax,finalpriceAvgTax:t.roomprice.showwithtax?t.roomprice.finalprice.avgprice.aftertax:t.roomprice.finalprice.avgprice.beforetax,guestrate:t.roomprice.showwithtax?t.roomprice.guestprice.total.beforetax:t.roomprice.guestprice.total.beforetax,memberrate:t.roomprice.showwithtax?t.roomprice.memberprice.total.aftertax:t.roomprice.memberprice.total.beforetax,ratesaved:t.roomprice.showwithtax?t.roomprice.savedprice.aftertax:t.roomprice.savedprice.beforetax,avgratesaved:t.roomprice.showwithtax?t.roomprice.savedprice.avgaftertax:t.roomprice.savedprice.avgbeforetax,pointssaved:t.roomprice.showwithtax?t.roomprice.savedpoints.aftertax:t.roomprice.savedpoints.beforetax,memberAvgpriceTax:t.roomprice.showwithtax?t.roomprice.memberprice.avgprice.aftertax:t.roomprice.memberprice.avgprice.beforetax,memberCostpointTax:t.roomprice.showwithtax?t.roomprice.memberprice.costpoints.aftertax:t.roomprice.memberprice.costpoints.beforetax}:null,topseller:t.hotelinfo.topseller,badgetitle:t.hotelinfo.badgetitle,testimonial:t.hotelinfo.testimonial,close2locations:t.hotelinfo.close2locations,availability:!!t.roomprice,amenities:b.map(t.hotelinfo.amenitielist,function(e){return{name:e.name,fonticon:e.fonticon,icon:e.icon}}),email:t.hotelinfo.contact.email,loyaltydiscount:t.hotelinfo.setting.loyaltydiscount,
samecityhotelcount:t.hotelinfo.other.samecityhotelcount,locationbookingurl:t.hotelinfo.bookingurl,locationtitle:e.data.cityinfo.citytitle,locationname:e.data.cityinfo.cityname,showdestinationeditbuttonfornewbookingflow:t.hotelinfo.setting.showdestinationeditbuttonfornewbookingflow,enableratecalendar:t.hotelinfo.setting.enableratecalendar,childmessagetitle:t.hotelinfo.bookingsetting.childmessagetitle,childmessage:t.hotelinfo.bookingsetting.childmessage,maxchildaage:t.hotelinfo.bookingsetting.maxchildaage,bookingflowgreenbarcontent:t.hotelinfo.bookingflowgreenbarcontent,compareavgrate:t.hotelinfo.compareavgrate?t.hotelinfo.compareavgrate:null,comparenextdayrate:null,loyaltyroomupgradeenable:t.hotelinfo.other.loyaltyroomupgradeenable,enableslashprice:t.hotelinfo.setting.enableslashprice,paywithpoints:t.hotelinfo.setting.paywithpoints,roomprice:t.roomprice}})}}function r(e){return b.flatten(b.map(e.roomcategorylist,function(t){return b.map(t.roomtypelist,function(i){return b.map(i.rateplanlist,function(n){return{sortorder:n.sort,key:[n.hotelcode,e.checkinstr,e.checkoutstr,e.rooms,e.adults,e.children,i.roomtypecode,n.rateCode,i.roomview,n.roomprice.ismember].join("_"),maxocc:i.totaloccupancy,childocc:i.childrenoccupancy,adultocc:i.adultoccupancy,promocode:e.promocode,groupcode:e.groupcode,ratecode:n.rateCode,ratename:n.name,image:n.image,desc:n.desc,tiptitle:"",tip:n.originaldesc,tipshort:n.tipshort,roomid:n.roomid,roomtypecode:i.roomtypecode,roomtypename:i.roomtypename,roomtypeimg:i.roomtypeimg,roomtypedesc:i.shortdecription,categoryid:t.roomcategoryid,categoryname:t.roomcategoryname,categoryicon:t.categoryicon,categoryorder:t.categoryorder,categorygroup:t.categorygroup,bedtype:i.bedtype,roomview:i.roomview,bedtypeicon:i.bedtypeicon,roomviewicon:i.roomviewicon,roomleft:n.roomleft,islowest:t.islowest&&i.islowest&&n.islowest,currency:e.currencycode,memberprice:n.roomprice.ismember,earnpoints:n.roomprice.earnpoints.total,avgdisplaymemberrate:n.roomprice.showwithtax?n.roomprice.finalprice.avgprice.aftertax:n.roomprice.finalprice.avgprice.beforetax,avgdisplaypoints:n.roomprice.showwithtax?n.roomprice.finalprice.costpoints.avgaftertax:n.roomprice.finalprice.costpoints.avgbeforetax,ratesaved:n.roomprice.showwithtax?n.roomprice.savedprice.avgaftertax:n.roomprice.savedprice.avgbeforetax,pointssaved:n.roomprice.showwithtax?n.roomprice.savedpoints.avgaftertax:n.roomprice.savedpoints.avgbeforetax,avgdisplayoriginalprice:n.roomprice.showwithtax?n.roomprice.originalprice.avgprice.aftertax:n.roomprice.originalprice.avgprice.beforetax,avgdisplayoriginalpoints:n.roomprice.showwithtax?n.roomprice.originalprice.costpoints.avgaftertax:n.roomprice.originalprice.costpoints.avgbeforetax,displaymemberrate:n.roomprice.showwithtax?n.roomprice.finalprice.total.aftertax:n.roomprice.finalprice.total.beforetax,displaypoints:n.roomprice.showwithtax?n.roomprice.finalprice.costpoints.aftertax:n.roomprice.finalprice.costpoints.beforetax,displaymemberratesaved:n.roomprice.showwithtax?n.roomprice.savedprice.aftertax:n.roomprice.savedprice.beforetax,displaypointssaved:n.roomprice.showwithtax?n.roomprice.savedpoints.aftertax:n.roomprice.savedpoints.beforetax,lowestroomprice:t.roomtypelist&&i.islowest&&i.rateplanlist&&n.islowest&&n.roomprice&&n.roomprice.showwithtax?n.roomprice.finalprice.total.aftertax:n.roomprice.finalprice.total.beforetax,rategainresult:null!=n.roomprice.finalprice.rategainresult?n.roomprice.finalprice.rategainresult:null,displayrate:null,avgdisplayrate:null,avgdisplaymemberratesaved:null,displayrateformat:null,displaymemberrateformat:null,amountbeforetax:null,amountaftertax:null,amounttax:null,memberAmountBeforeTax:null,memberAmountAfterTax:null,memberAmountTax:null,pricecurrency:null,price:null,tax:null,rate:null,memberrate:n.roomprice.showwithtax?n.roomprice.finalprice.avgprice.aftertax:n.roomprice.finalprice.avgprice.beforetax,addtional:i.addtional,badgetitle:n.badgetitle,loyaltytip:null,roomstay:{HotelCode:n.hotelcode,RoomTypeCode:i.roomtypecode,RoomID:n.roomid,RatePlan:{hotelcode:n.hotelcode,type:n.type,rateCode:n.rateCode,name:n.name,desc:n.originaldesc,image:n.image,restricted:n.restricted,priceviewableind:n.priceviewableind,marketcode:n.marketcode,guaranteecode:n.guaranteecode,guaranteeDesc:n.guaranteeDesc,guaranteecopy:n.guaranteecopy,policymatchcopy:n.policymatchcopy,paymentType:n.paymenttype},NumberOfUnits:n.numberofunits,CheckinDate:e.checkin,CheckoutDate:e.checkout,CancelPenalty:n.cancelpenalty,CurrencyCode:e.currencycode,Channel:n.roomprice.finalprice.channel,ShortPolicyDesc:n.ShortPolicyDesc},rates:n.roomprice.finalprice.dailyrates,cancelpenalty:n.cancelpenalty,dailyrates:n.roomprice.finalprice.dailyrates,paymentType:n.paymenttype,taxdetail:n.roomprice.finalprice.taxdetaillist,guaranteecode:n.guaranteecode,discountcode:n.roomprice.finalprice.discountcode,marketcode:n.marketcode,loyaltymessageaboutpoints:n.loyaltymessageaboutpoints,shortpolicy:n.ShortPolicyDesc,roomupgradeavailabled:n.roomupgradeavailabled,priceratio:!n.roomprice.finalprice.rategainresult||"2"!=n.roomprice.finalprice.rategainresult.status&&"3"!=n.roomprice.finalprice.rategainresult.status&&"4"!=n.roomprice.finalprice.rategainresult.status?null:{status:n.roomprice.finalprice.rategainresult.status,title:n.roomprice.finalprice.rategainresult.title,list:b.map(n.roomprice.finalprice.currentrategainprice,function(e){return{website:e.website,currency:e.origincurrency,price:n.roomprice.showwithtax?e.originpricewithtax:e.originprice}}),rategainDisclaimer:n.roomprice.finalprice.rategainresult.rategainDisclaimer}}})})}))}function g(e,t){return b.map(e.roomcategorylist,function(i){var n=b.where(t,{categoryid:i.roomcategoryid});return e.hoteldetail&&(15098!=e.hoteldetail.hotelid&&15099!=e.hoteldetail.hotelid||(window.makkahHotelId=e.hoteldetail.hotelid)),{id:i.roomcategoryid,type:i.roomcategoryname,availability:i.availability,bedtypes:i.roomtypelist||[],bookingurl:e.hoteldetail&&e.hoteldetail.url,price:{memberprice:n[0]&&n[0].memberprice,rate:null,memberrate:n[0]&&n[0].avgdisplaymemberrate,points:n[0]&&n[0].avgdisplaypoints,ratesaved:n[0]&&n[0].ratesaved,pointssaved:n[0]&&n[0].pointssaved,avgdisplayoriginalprice:n[0]&&n[0].avgdisplayoriginalprice,avgdisplayoriginalpoints:n[0]&&n[0].avgdisplayoriginalpoints,lowestroomprice:n[0]&&n[0].lowestroomprice},rategainresult:i.roomtypelist[0]&&i.roomtypelist[0].rateplanlist[0]?i.roomtypelist[0].rateplanlist[0].roomprice.finalprice.rategainresult:null,rateplan:n[0]&&n[0].roomstay&&n[0].roomstay.RatePlan,roomdesc:i.shortdecription,longdesc:i.longdecription,categorygroup:i.categorygroup,imageurl:i.imagelist&&i.imagelist[0]&&i.imagelist[0].mediaurl,imageurl3:i.imagelist&&i.imagelist[0]&&i.imagelist[0].mediaurlw3,video:null,image360:i.panoramaimagelist&&i.panoramaimagelist[0]&&i.panoramaimagelist[0].mediaurl,image360list:i.panoramaimagelist||[],detailimage:b.map(i.imagelist&&i.imagelist.slice(1),function(e){return e.mediaurl}),detailimages:i.imagelist||[],features:{title:i.featurestitle,list:i.features,roomsize:i.roomsize,maxocc:[i18n.t("Property.max_occupancy"),i.maxoccupancy,i18n.t("Property.guests")].join(" ")},roomfeature:i.roomfeature,amenities:i.amenitielist,badgeicon:i.badgeicon,badgetitle:i.badgetitle,earnpoints:n[0]&&n[0].earnpoints,hasRestrictedRate:i.hasRestrictedRate,differentiator:i.differentiator,NumberOfUnits:n[0]&&n[0].roomstay.NumberOfUnits,roomtagline:i.roomtagline}})}function d(e){var t=jQuery.Deferred();return t.resolve(e),t.promise()}function I(e){var t=jQuery.Deferred();return t.reject(e),t.promise()}var b=e("underscore"),C=e("../../../../config/host"),u=(e("../states"),{}),m={},p=["hotelcode","checkin","checkout","discountcode","groupcode","promo","adults","children","rooms","AAA","AARP","GOV","Accessible","promodetail"],h=function(e){var t=[];return t.push(jQuery.getJSON(C.getURL("api","room/gethotel"),b.assign({ischeckroomupgrade:!0},e)).then(function(e){return e.success?d(e.data):I(e)})),e.promocode&&t.push(jQuery.getJSON(C.getURL("api","promodetail"),e).then(function(e){return e})),jQuery.when.apply(jQuery,t).then(function(e,t){return e.promodetail=t,e})};t.exports={getHotelsByGroup:function(e){var t=window.hotels;return t?(window.hotels=null,d(t)):jQuery.getJSON(C.getURL("mapi","City/GetCity"),e).then(function(e){return e.success?d(s(e)):I(e)})},getHotelsByVille:function(e){var t=window.hotels;return t?(window.hotels=null,d(t)):jQuery.getJSON(C.getURL("mapi","City/GetCity"),e).then(function(e){return e.success?d(s(e)):I(e)})},getHotelDetails:function(e){var t=window.categories&&window.categories.hotel;return t?(window.categories.hotel=null,d(t)):jQuery.getJSON(C.getURL("api","book2/gethoteldetail"),e).then(function(e){return e.success?d(e.data):I(e)})},getRoomsByHotel:function(e){return n(b.pick(e,p),h,c,e)},getRatesByRoom:function(e){return n(b.pick(e,p),h,l,e)},getRatesByCode:function(e){return n(b.pick(e,p),h,a,e)},getAllRoomsAllRates:function(e){return n(b.pick(e,p),h,o,e)},getRateCalendar:function(e){return jQuery.getJSON(C.getURL("api","ratecalendar/list"),e).then(function(e){return b.forEach(e,function(e){e&&e.roomPrice&&(e.roomPrice.guestprice&&e.roomPrice.guestprice.rategainresult&&"2"!=e.roomPrice.guestprice.rategainresult.status&&"3"!=e.roomPrice.guestprice.rategainresult.status&&"4"!=e.roomPrice.guestprice.rategainresult.status&&(e.roomPrice.guestprice.rategainresult=null),e.roomPrice.memberprice&&e.roomPrice.memberprice.rategainresult&&"2"!=e.roomPrice.memberprice.rategainresult.status&&"3"!=e.roomPrice.memberprice.rategainresult.status&&"4"!=e.roomPrice.memberprice.rategainresult.status&&(e.roomPrice.memberprice.rategainresult=null))}),d(e)})},getStaysByRate:function(e){return jQuery.getJSON(C.getURL("api","room/getroomservicelist"),e).then(function(e){return d(e)})},getBookingCartData:function(){return jQuery.getJSON(C.getURL("api","shoppingcart/payinfo")).then(function(e){return e.success?d(e.data):I(e)})},getUpgradeRate:function(e){return jQuery.getJSON(C.getURL("mapi","room/getcategoryupgrade"),e).then(function(e){if(e.success){var t=r({roomcategorylist:[e.data.roomcategory]}),i=g({roomcategorylist:[e.data.roomcategory]},t),n=e.data.roomcategory.roomtypelist[0].rateplanlist[0]&&e.data.roomcategory.roomtypelist[0].rateplanlist[0].roomprice.finalprice.total.points;return e.data.upgradeddifference.totalUpgradePoints=n,d({roomtype:i[0],roomrate:b.assign({roomupgradeavailabled:!0,voucherusage:!0},t[0]),upgradeddifference:e.data.upgradeddifference,upgradedroomadvantage:e.data.roomcategory&&e.data.roomcategory.upgradedroomadvantage})}return I(e)})},getIGVouchers:function(e){return jQuery.getJSON(C.getURL("mapi","/redeemrewards/getbookinglist"),e).then(function(e){if(e.success){var t=e.data;return t.length&&(t=b.filter(t,function(e){return e.checked=!1,!!e.available})),d(t)}return I(e)})},unionRates:r,unionRooms:g}},{"../../../../config/host":45,"../states":352,underscore:42}],352:[function(e,t,i){function n(e){o.forEach(e,function(e){var t=o.findIndex(m,{id:e.id});-1!==t?m[t]=o.assign(m[t],e):m.push(e)})}function c(e){o.forEach(e,function(e){var t=o.findIndex(p,{roomtypecode:e.roomtypecode,ratecode:e.ratecode,roomid:e.roomid});-1!==t?p[t]=o.assign(p[t],e):p.push(e)})}function l(e){o.forEach(e,function(e){var t=o.findIndex(h,{categoryid:e.categoryid,roomtypecode:e.roomtypecode,ratecode:e.ratecode,roomid:e.roomid,key:e.key});-1!==t?h[t]=o.assign(h[t],e):h.push(e)})}function a(e,t){t.$("[data-bed-type='"+e+"'].book2-updated-tip").fadeIn(200).delay(5e3).fadeOut(400)}var o=e("underscore"),s=e("backbone"),r=e("../ui/util"),g=null,d=0,I=!1,b={},C={},u={},m=[],p=[],h=[],G={},A=[],y=[],Z=[],B="",x="",v="",W=!1,X=!1,F="",Q="",R={},L=0,H=null,k=null,f=[],V=null,J={},w={},U=0,Y=0,N=!1;t.exports=o.extend({VIEW_STYLES:{VILLE_BY_CITY:0,VILLE_BY_MAPS:1,HOTEL_BY_ROOM:2,HOTEL_BY_RATE:3,HOTEL_BY_CALENDAR:4,HOTEL_BY_ALL:5},VIEW_TRADES:{USE_MONEY:0,USE_POINT:1},delCache:function(){I=!1,b={},C={},u={},m=[],p=[],h=[],A=[],y=[],Z=[],X=!1,F="",Q="",B="",R={},L=0,V=null,J={},k=null,f=[],w={}},isStyle:function(e){return g===e},isTrade:function(e){return d===e},isFinal:function(){return I},isLogin:function(){return r.isloggedin()},isManyDays:function(){return b.checkin&&b.checkout?b.checkout-b.checkin>864e5:void 0},hasRateCalendar:function(){return u.enableratecalendar},setStyle:function(e){g=e},setLastStyle:function(e){H=e},setTrade:function(e){d=e},setParam:function(e){b=o.assign(b,e)},setFinal:function(e){I=e},setVille:function(e){C=o.assign(C,e)},setBookingCart:function(e){G=e},setHotel:function(e){u=o.assign(u,e)},setChild:function(e,t){jQuery.isEmptyObject(e)||(F=e.currency||F,Q=e.currencymark||Q,B=e.maxchildage||B,x=e.childmessage||x,V=e.promodetail||V,J={code:e.promocode,mode:e.promomsg},v=e.childmessagetitle||v,o.has(e,"hasRestrictedRate")&&(X=X||e.hasRestrictedRate),n(o.map(e.roomtypes||[],function(t){return o.assign(t,{hotelcode:e.hotelcode})})),c(o.map(e.roomrates||[],function(t){return o.assign(t,{hotelcode:e.hotelcode})})),t&&(p=[],c(o.flatten(o.map(e.roomtypes||[],function(t){return o.map(t.roomrates&&t.roomrates.roomrates||[],function(t){return o.assign(t,{hotelcode:e.hotelcode})})})))),o.has(e,"vouchervisible")&&(u.vouchervisible=e.vouchervisible))},setStays:function(e){o.has(e,"hotelcode")&&L++,l(o.map(e.services||[],function(t){return o.assign(t,{hotelcode:e.hotelcode,categoryid:e.categoryid,roomtypecode:e.roomtypecode,ratecode:e.rateplancode,roomid:e.roomid})}))},setAllah:function(e){A=e.categoryid?o.difference(A,o.where(A,{byAll:e.byAll||"",categoryid:e.categoryid})):o.difference(A,o.where(A,{byAll:e.byAll||"",categoryid:"",ratecode:e.ratecode})),A.push(o.assign({byAll:"",categoryid:""},e))},setCalendarRate:function(e){k=jQuery.isEmptyObject(e)?k:e},setUpgradeRateByRate:function(e,t,i){var n=JSON.parse(JSON.stringify(e));n.pointsupgrademinuspoints=i;var c=o.findWhere(p,e),l=o.findWhere(f,n);c&&(c=t,l?l.upgradeRate=o.assign(l.upgradeRate,c):f.push(o.assign({upgradeRate:c},n)))},getUpgradeRateByRate:function(e){e.pointsupgrademinuspoints=this.getIGPointsWhenRup();var t=o.findWhere(f,e);return t&&t.upgradeRate},getPromoMsg:function(){return J},getParam:function(){return b},getStyle:function(){return g},getLastStyle:function(){return H},getVille:function(){return C},getHotel:function(){return u},getRooms:function(e){return o.where(m,e)},getRates:function(e){return o.where(p,e)},getStays:function(e){return o.where(h,e)},getValidStays:function(e){var t=this;return o.map(o.where(h,e),function(e){return o.assign({},e,{quantity:t.getStayCount({key:e.key,categoryid:e.categoryid})||0})})},getAllah:function(e){var t=this,i=null,n=null,c=t.getRates(o.omit(e,["byAll"]));return c.length?(n=o.findWhere(A,o.assign({byAll:"",categoryid:""},e)),n&&(i=o.findWhere(c,o.pick(o.omit(n,["byAll"]),function(e){return!!e}))),i||(i=c[0]),i):void 0},getMaxOCC:function(){return u.maxocc||18},getAdultOCC:function(){return u.adultocc||9},getMaxRoom:function(){return u.maxselectroomscount||9},getBookingCart:function(){var e={},t=G||{},i=t.currencycode;return t.listcheckoutroom&&t.listcheckoutroom[0]&&(e.listcheckoutroom=o.map(t.listcheckoutroom,function(e){return{name:e.roomtypename,price:e.onlineprice+e.offlineprice,points:e.onlinepoints+e.offlinepoints,currency:i}})),t.listcheckoutproduct&&t.listcheckoutproduct[0]&&(e.listcheckoutproduct=o.map(t.listcheckoutproduct,function(e){return{name:e.title,price:e.onlineprice+e.offlineprice,points:e.onlinepoints+e.offlinepoints,currency:i}})),t.listcheckoutingresso&&t.listcheckoutingresso[0]&&(e.listcheckoutingresso=o.map(t.listcheckoutingresso,function(e){return{name:e.event_desc,price:e.onlineprice+e.offlineprice,points:e.onlinepoints+e.offlinepoints,currency:i}})),t.ListCheckoutGiftModels&&t.ListCheckoutGiftModels[0]&&(e.ListCheckoutGiftModels=o.map(t.ListCheckoutGiftModels,function(e){return{name:e.Title,price:e.Price,points:e.ChangePoints,currency:i}})),e.totalprice=t.totalprice,e.currencycode=i,e},getChildOCC:function(){return u.childocc||9},getLoyalty:function(){if(I){var e=u.loyaltydiscount;return e&&(e=Math.max(0,100-100*e)),e}return 0},addSummary:function(){},getSummary:function(){var e=this,t=Array.prototype.slice.call(y);if(e.isStyle(e.VIEW_STYLES.HOTEL_BY_ROOM)&&b.defaultRoom){var i=e.getAllah({categoryid:b.defaultRoom});if(i){var n={categoryid:i.categoryid,roomtypecode:i.roomtypecode,ratecode:i.ratecode,roomid:i.roomid};-1===o.findIndex(t,n)&&t.push(n)}}if(e.isStyle(e.VIEW_STYLES.HOTEL_BY_RATE)&&b.defaultRate){var i=e.getAllah({ratecode:b.defaultRate});if(i){var n={categoryid:i.categoryid,roomtypecode:i.roomtypecode,ratecode:i.ratecode,roomid:i.roomid};-1===o.findIndex(t,n)&&t.push(n)}}if(e.isStyle(e.VIEW_STYLES.HOTEL_BY_ALL)&&b.defaultRoomInAll){var i=e.getAllah({categoryid:b.defaultRoomInAll,byAll:!0});if(i){var n={categoryid:i.categoryid,roomtypecode:i.roomtypecode,ratecode:i.ratecode,roomid:i.roomid};-1===o.findIndex(t,n)&&t.push(n)}}var c=e.getRates();return o.compact(o.map(t,function(e){return o.findWhere(c,e)}))},getMaxChildAge:function(){return B},getChildMessage:function(){return x},getChildMessageTitle:function(){return v},getErrorMessage:function(){return null==g||"hotel"!==b.type||p&&0!=p.length||0!==o.filter(m,{availability:!0}).length?void 0:i18n.t("booking.not_enough_rooms_available")},getComplete:function(){return W},setComplete:function(){W=!0},getCurrency:function(){return F},getCurrencyMark:function(){return Q},getCalendarRate:function(){return k},storeUpdatedTip:function(e){R=e},glintUpdatedTip:function(e,t){o.isMatch(R,e)&&(a(R.name,t),R={})},changeRateValue:function(e){var t=o.findIndex(p,{categoryid:e.categoryid,roomtypecode:e.roomtypecode,ratecode:e.ratecode,roomid:e.roomid});-1!==t&&(p[t]=o.assign(p[t],e))},changeStayValue:function(e){var t=o.findIndex(h,{roomtypecode:e.roomtypecode,ratecode:e.ratecode,roomid:e.roomid,key:e.key});-1!==t&&(h[t]=o.assign(h[t],e))},isBestDealRoom:function(e){return this.isFinal()?o.isMatch(o.first(o.sortBy(this.getRooms(),function(e){return e.price&&parseFloat(e.price.memberrate)})),e):!1},isBestDealRate:function(e){return o.isMatch(o.first(o.sortBy(this.getRates(),function(e){return parseFloat(e.memberrate)})),e)},setStayCount:function(e){var t=o.findWhere(Z,{categoryid:e.categoryid,key:e.key});t?t.quantity=e.quantity:Z.push(e)},getStayCount:function(e){var t=o.findWhere(Z,e);return t?t.quantity:0},isStayModified:function(e){return!!o.findWhere(Z,e)},isFirstLoad:function(){return 2>L},setFirstValidRes:function(e,t){w[e]=t},getFirstValidRes:function(){return w},getPromoDetail:function(){return V},getIGPoints:function(){return U},getIGPointsWhenRup:function(){return Y},setIGPoints:function(e){U=e},setIGPointsWhenRup:function(e){Y=e},getIGViewed:function(){return N},setIGViewed:function(e){N=e}},s.Events)},{"../ui/util":2122,backbone:8,underscore:42}],169:[function(e,t,i){var n=(e("underscore"),e("backbone"));t.exports=n.Model.extend({defaults:{price:0,room_name:"",room_desc:"",amenities:[],room_image:[],slide_image:[]},attributes:{}})},{backbone:8,underscore:42}],167:[function(e,t,i){var n={};t.exports=n},{}],166:[function(e,t,i){var n=e("../../../../config/host.js");t.exports={fetch:function(e){return jQuery.getJSON(n.getURL("api","data/vscapeimage"),e).then(function(e){return e})},search:function(e){return this.fetch({propertyid:e}).then(function(e){return e})}}},{"../../../../config/host.js":45}],165:[function(e,t,i){t.exports='<div class="tpl-booking-content">\r\n    <div id="room-details-wrapper" class="room-details-wrapper"></div>\r\n    <div id="room-items-wrapper"></div>\r\n</div>\r\n\r\n\r\n'},{}],164:[function(e,t,i){t.exports='{{ currency }}\r\n<div style="background-image: url(\'{{ imageurl }}\')" class="tpl-booking-room-slider clearfix {{image_anchor}}">\r\n    <div class="tpl-holder"></div>\r\n</div>\r\n\r\n<div class="corner-mark">\r\n    {{#if badgeicon}}\r\n        <div class="red-label">\r\n            <span class="{{ badgeicon }}"></span>\r\n            {{#if badgetitle}}<span>{{ badgetitle }}</span>{{/if}}\r\n        </div>\r\n    {{else}}\r\n        {{#if badgetitle}}\r\n            <div class="red-label">\r\n                <span>{{ badgetitle }}</span>\r\n            </div>\r\n        {{/if}}\r\n    {{/if}}\r\n</div>\r\n\r\n<!--<a class="compare-button" data-opt="single-compare">-->\r\n<!--&lt;!&ndash;<span class="icon-icon_I014"></span><span class="icon-icon_I013"></span>&ndash;&gt;-->\r\n<!--<i class="compare-checkbox"></i>-->\r\n<!--<span>  {{local \'Property.compare_features\'}} </span>-->\r\n<!--</a>-->\r\n{{#if __compareOn}}\r\n    <div class="tpl-content-compare">\r\n        <h5>{{ features.title }}</h5>\r\n        <ul>\r\n            {{#each features.list }}\r\n                <li>{{ this }}</li>\r\n            {{/each}}\r\n        </ul>\r\n    </div>\r\n{{else}}\r\n    <div class="tpl-content">\r\n        {{#if availability}}\r\n            <div class="tpl-price-offer">\r\n                {{#not-equal price.memberrate price.rate }}\r\n                    <p>{{local \'booking.non_loyalty\'}} <span\r\n                            class=\'line-through\'>{{ currency }}{{#price-format price.rate}}{{/price-format}}</span></p>\r\n                {{/not-equal}}\r\n                <p class="tpl-price-nosale">\r\n                    {{#if __viewInPointsOn }}\r\n                        <label>{{ price.points }}</label><span>{{local "Property.room_section_night"}}</span>\r\n                    {{else}}\r\n                        <label>{{ currency }}{{#price-format price.memberrate}}{{/price-format}}</label><span>{{local "Property.room_section_night"}}</span>\r\n                    {{/if}}\r\n                </p>\r\n            </div>\r\n        {{/if}}\r\n        <h3>{{ type }}</h3>\r\n        <!--<p class="room-description">{{ roomdesc }}</p>-->\r\n        {{#if availability}}\r\n            {{#if earnpoints}}\r\n                {{#if rateplan.loyaltymessageaboutpoints }}\r\n                    <p class="room-description">\r\n                        {{#if _isloginin }}\r\n                            {{ local "Property.your_will_earn_points" earnpoints }}\r\n                        {{else}}\r\n                            {{ local "Property.sign_on_to_earn_points" earnpoints }}\r\n                        {{/if}}\r\n                    </p>\r\n                {{/if}}\r\n            {{/if}}\r\n        {{/if}}\r\n    </div>\r\n{{/if}}\r\n<div class="room-info">\r\n    <div class="info">\r\n        <div>\r\n            <p>{{local "Property.room_size"}} {{{specialSymbolFix features.roomsize }}}</p>\r\n            <p>{{local "Property.max_occupancy"}} {{ features.maxocc }}</p>\r\n        </div>\r\n        <div class="tpl-price-offer">\r\n            {{#if availability}}\r\n                <p class="tpl-price-nosale">\r\n                    {{#if __viewInPointsOn }}\r\n                        <label>{{ price.points }}</label><span>{{local "Property.room_section_night"}}</span>\r\n                    {{else}}\r\n                        <label>{{ currency }}{{#price-format price.memberrate}}{{/price-format}}</label><span>{{local "Property.room_section_night"}}</span>\r\n                    {{/if}}\r\n                </p>\r\n            {{/if}}\r\n        </div>\r\n    </div>\r\n<div class="tpl-cta">\r\n    {{#if availability}}\r\n\r\n        <a class="wgt-sqbutton-blue" href="javascript:void(0);" data-opt="book"\r\n           data-id="{{ id }}">{{local "Property.book_room"}}</a>\r\n    </div>\r\n    {{else}}\r\n        <a class="wgt-sqbutton-blue disabled">{{local "Property.not_avaliable"}}</a>\r\n    {{/if}}\r\n</div>\r\n</div>\r\n<a class="view" id="opt-view-detail" data-id="{{ id }}" href="javascript:void(0);">\r\n    <span class="icon-icon_I0153"></span>\r\n    <span class="text">{{local "Property.view_more"}}</span>\r\n</a>\r\n'},{}],163:[function(e,t,i){t.exports='<div class="tplbooking-stickybar">\r\n    <div class="stickybar-guarantee">\r\n        <div class="wgt-guarantee red">\r\n            <span class="icon-icon_B012 guarantee-label"></span>\r\n            <p>{{local "general.best_price_guarantee"}}</p>\r\n            <span class="icon-icon_B008 guarantee-detail">\r\n                <span class="label-popup">\r\n                    <div class="content">\r\n                        <p>{{local "general.best_prices_online_text"}}</p>\r\n                    </div>\r\n                </span>\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class="stickybar-content">\r\n        <div class="stickybar-price">\r\n            {{#if isLogin}}\r\n                <p>{{local "Property.from"}} <span>{{ currencymark }} {{#price-format rate}}{{/price-format}}</span> <b>{{ currencymark }} {{#price-format memberrate}}{{/price-format}}</b>/{{local "Property.night"}}</p>\r\n            {{else}}\r\n                <p>{{local "Property.from"}} <b>{{ currencymark }} {{#price-format memberrate}}{{/price-format}}</b>/{{local "Property.night"}}</p>\r\n                <!--<p>{{local "Property.sign_up_tip"}} <a href="{{ signUpUrl }}?returnUrl={{ callBackUrl }}">{{local "Property.sign_up"}}</a></p>-->\r\n                <p>{{local "Property.sign_up_tip"}} <a href="javascript:void(0);" id="signon">{{local "Property.sign_up"}}</a></p>\r\n            {{/if}}\r\n        </div>\r\n        <a class="stickybar-currency" style="visibility: hidden;"><span>SGD</span></a>\r\n        <a href="javascript:void(0);" class="wgt-sqbutton-blue-inverse" id="sticky-bar-book">{{local "Property.book_now"}}</a>\r\n    </div>\r\n</div>'},{}],162:[function(e,t,i){t.exports='<!--<a class="wgt-sqbutton-blue disabled search-trigger" >SEARCH</a>-->\r\n<!--<div class="search-trigger"><a class="wgt-sqbutton" id="booking-cancel" style="display: none;">{{local "Property.cancel"}}</a><a class="wgt-sqbutton-blue" id="booking-search">{{local "Property.search"}}</a></div>-->\r\n\r\n'},{}],161:[function(e,t,i){t.exports=e("sassify")('.booking.in-hotel {   padding: 5px 0;   top: 0; }   .booking.in-hotel .booking-occupancy, .booking.in-hotel .booking-calendar {     margin: 15px 0; }   .booking.in-hotel .booking-occupancy .heading, .booking.in-hotel .booking-calendar .heading {     margin-left: 5%;     font-size: 3.2rem; }   .booking.in-hotel .booking-occupancy .summary, .booking.in-hotel .booking-calendar .summary {     font-size: 2.4rem; }   .booking.in-hotel .booking-promocode {     padding-left: 5%; }   .booking.in-hotel .search-trigger {     position: absolute;     bottom: 20px;     display: none; }     .booking.in-hotel .search-trigger a:nth-of-type(2) {       margin-left: 1rem; }   @media screen and (max-width: 768px) {     .booking.in-hotel .booking-occupancy .heading, .booking.in-hotel .booking-calendar .heading {       margin: 0 1.5rem;       font-size: 2.8rem; }     .booking.in-hotel .booking-occupancy .summary, .booking.in-hotel .booking-calendar .summary {       font-size: 1.6rem; }     .booking.in-hotel .booking-promocode {       padding-left: 5.3rem;       padding-bottom: 0; }       .booking.in-hotel .booking-promocode .checkboxes {         margin-bottom: 1rem; }     .booking.in-hotel .search-trigger {       position: absolute;       bottom: 20px;       margin-left: 0;       margin-right: 0;       text-align: center; }       .booking.in-hotel .search-trigger a {         width: 49%;         padding: 0; }         .booking.in-hotel .search-trigger a:nth-of-type(2) {           margin-left: 2%; } }  html[dir="rtl"] .booking.in-hotel .booking-occupancy .heading, html[dir="rtl"] .booking.in-hotel .booking-calendar .heading {   margin-right: 5%;   margin-left: 5%; }  html[dir="rtl"] .booking.in-hotel .booking-promocode {   padding-right: 5.3rem;   padding-left: 0; }   html[dir="rtl"] .booking.in-hotel .booking-promocode .checkboxes {     margin-right: 0; }  html[dir="rtl"] .booking.in-hotel .search-trigger a:nth-of-type(2) {   margin-right: 1rem;   margin-left: 0; }   @media screen and (max-width: 768px) {     html[dir="rtl"] .booking.in-hotel .search-trigger a:nth-of-type(2) {       margin-right: 2%;       margin-left: 0; } }  .edit-occupancy .booking-occupancy-popup {   z-index: 1;   background-color: #363636;   width: 100%;   height: 100%; }   .edit-occupancy .booking-occupancy-popup .rooms {     float: left; }   .edit-occupancy .booking-occupancy-popup .people {     float: left; }   .edit-occupancy .booking-occupancy-popup h5.head {     line-height: 40px;     font-size: 1.6rem; }   .edit-occupancy .booking-occupancy-popup .booking-selector {     color: white;     padding: 0 10px;     overflow: hidden;     position: relative; }     .edit-occupancy .booking-occupancy-popup .booking-selector a.selector-label {       display: block;       color: white;       font-size: 1.6rem;       line-height: 46px; }       .edit-occupancy .booking-occupancy-popup .booking-selector a.selector-label:after {         display: inline-block;         content: \' \';         width: 0;         height: 0;         border: 6px solid transparent;         vertical-align: sub;         position: absolute;         right: 40px;         top: 20px; }     .edit-occupancy .booking-occupancy-popup .booking-selector ul.selector-items li.selector-item {       float: left;       margin: 0 10px;       line-height: 30px; }       .edit-occupancy .booking-occupancy-popup .booking-selector ul.selector-items li.selector-item a {         display: inline-block;         width: 20px;         line-height: 20px;         height: 20px;         overflow: hidden;         text-align: center;         border: 1px white solid;         font-size: 1.4rem; }         .edit-occupancy .booking-occupancy-popup .booking-selector ul.selector-items li.selector-item a:hover {           color: #282828;           background-color: white; }       .edit-occupancy .booking-occupancy-popup .booking-selector ul.selector-items li.selector-item.selected-select a {         color: #282828;         background-color: white; }       .edit-occupancy .booking-occupancy-popup .booking-selector ul.selector-items li.selector-item.selected-unselect a {         color: white; }         .edit-occupancy .booking-occupancy-popup .booking-selector ul.selector-items li.selector-item.selected-unselect a:hover {           color: #282828;           background-color: white; }     .edit-occupancy .booking-occupancy-popup .booking-selector.state-fold {       height: 45px; }       .edit-occupancy .booking-occupancy-popup .booking-selector.state-fold a.selector-label:after {         border-top-color: white; }     .edit-occupancy .booking-occupancy-popup .booking-selector.state-expand {       height: 92px; }       .edit-occupancy .booking-occupancy-popup .booking-selector.state-expand a.selector-label:after {         border-bottom-color: white; }  .edit-occupancy.popup-show .booking-occupancy-popup {   display: block; }  .edit-occupancy.popup-hide .booking-occupancy-popup {   display: none; }  ');
},{sassify:36}],160:[function(e,t,i){var n=e("backbone.marionette");t.exports=n.ItemView.extend({template:function(t){return Handlebars.compile(e("./template.hbs"))(t)}})},{"./template.hbs":159,"backbone.marionette":6}],159:[function(e,t,i){t.exports='{{#if __ONE}}\r\n    <div style="background-image: url(\'{{__ONE.attributes.bigimage}}\');" class="tpl-hero-attraction-section {{__ONE.attributes.image_anchor}}">\r\n        <div class="wgt-corner-label-twolines">\r\n            <p>{{date-with-format __ONE.attributes.st_date "DD MMM"}} - {{date-with-format __ONE.attributes.end_date "DD MMM"}}</p>\r\n            <p>{{__ONE.attributes.name}}</p>\r\n        </div>\r\n        <div class="tpl-content">\r\n            <div class="tpl-text">\r\n                <h3><span>{{__ONE.attributes.eventtitle}}</span><a data-component="scratchpad" data-id="{{__ONE.id}}" data-content="{{__ONE.id}}" data-type="Attractions" data-title="{{__ONE.attributes.name}}" class="wgt-scratchpad-off" data-favourite="false"><span class="icon-icon_B013"></span></a>\r\n                </h3>\r\n                <p>{{__ONE.attributes.description}}</p>\r\n            </div><a class="wgt-sqbutton" href="{{__ONE.attributes.url}}?destinationid={{__OS_ID}}">Explore</a>\r\n        </div>\r\n    </div>\r\n{{/if}}\r\n<div class="tpl-half-line">\r\n    {{#if __TWO}}\r\n        <div style="background-image: url(\'{{__TWO.attributes.bigimage}}\');" class="tpl-half-attraction-section clearfix {{__TWO.attributes.image_anchor}}">\r\n            <div class="wgt-corner-label-twolines">\r\n                <p>{{date-with-format __TWO.attributes.st_date "DD MMM"}} - {{date-with-format __TWO.attributes.end_date "DD MMM"}}</p>\r\n                <p>{{__TWO.attributes.name}}</p>\r\n            </div>\r\n            <div class="tpl-content">\r\n                <div class="tpl-text">\r\n                    <h3><span>{{__TWO.attributes.eventtitle}}</span><a data-component="scratchpad" data-id="{{__TWO.id}}" data-content="{{__TWO.id}}" data-type="Attractions" data-title="{{__TWO.attributes.name}}" class="wgt-scratchpad-off" data-favourite="false"><span class="icon-icon_B013"></span></a>\r\n                    </h3>\r\n                    <p>{{__TWO.attributes.description}}</p>\r\n                </div>\r\n                <div class="tpl-cta"><a class="wgt-sqbutton" href="{{__TWO.attributes.url}}?destinationid={{__OS_ID}}">book now</a></div>\r\n            </div>\r\n            <div class="tpl-holder"></div>\r\n        </div>\r\n    {{/if}}\r\n    {{#if __THR}}\r\n        <div style="background-image: url(\'{{__THR.attributes.bigimage}}\');" class="tpl-half-attraction-section clearfix {{__THR.attributes.image_anchor}}">\r\n            <div class="wgt-corner-label-twolines">\r\n                <p>{{date-with-format __THR.attributes.st_date "DD MMM"}} - {{date-with-format __THR.attributes.end_date "DD MMM"}}</p>\r\n                <p>{{__THR.attributes.name}}</p>\r\n            </div>\r\n            <div class="tpl-content">\r\n                <div class="tpl-text">\r\n                    <h3><span>{{__THR.attributes.eventtitle}}</span><a data-component="scratchpad" data-id="{{__THR.id}}" data-content="{{__THR.id}}" data-type="Attractions" data-title="{{__THR.attributes.name}}" class="wgt-scratchpad-off" data-favourite="false"><span class="icon-icon_B013"></span></a>\r\n                    </h3>\r\n                    <p>{{__THR.attributes.description}}</p>\r\n                </div>\r\n                <div class="tpl-cta"><a class="wgt-sqbutton" href="{{__THR.attributes.url}}?destinationid={{__OS_ID}}">book now</a></div>\r\n            </div>\r\n            <div class="tpl-holder"></div>\r\n        </div>\r\n    {{/if}}\r\n</div>'},{}],157:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../config/host.js").host,l=e("../ui/validator.js"),a=l.latinRegex3;t.exports=n.Model.extend({url:function(){return c+"/api/request/viewbooking"},defaults:{},validation:{last_name:{pattern:a,required:!0},confirmation_number:{required:!0}},initialize:function(e){},parse:function(e,t){return e}})},{"../../../config/host.js":45,"../ui/validator.js":2123,backbone:8,underscore:42}],148:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=(e("backbone-validation"),e("../../../ui/validator.js")),a=e("../../../ui/date3selects/view"),o=e("../../../ui/util"),s=e("../../../user/model"),r=e("../../../form/address/view");t.exports=c.ItemView.extend(n.extend({},{template:Handlebars.compile(e("./template.hbs")),className:"form profile-form",events:{"click .wgt-sqbutton-black":"onUpdateBtnClick"},ui:{title:"[data-bind=title]",gender:"[data-bind=gender]",country:"[data-bind=country]",dateFormat:"[data-bind=dateFormat]",dob:"input[data-bind=birthday]",dobbinder:"[data-bind-to=birthday]",error:"p.server-error",message:"p.submit-message",city:"[data-bind=city]",province:"[data-bind=province],[data-bind=state]",postcode:"[data-bind=postal_code]",address:"[data-bind=address]"},initialize:function(e){this.model=o.getUser(),this.model.set("isForCheckOut",e&&e.isForCheckOut),this.model.fetchPromise.then(n.bind(this.render,this))},onRender:function(){var e=this;e.addressView=new r({formView:e,countryDropDown:e.ui.country,addressInput:e.ui.address,cityInput:e.ui.city,provinceInput:e.ui.province,postcodeInput:e.ui.postcode}),a.autoCreate(this.ui.dobbinder),o.titlegender(this.ui.title,this.ui.gender),o.country(this.ui.country,this.model.get("country"));var t=o.getUser().get("dateFormat");t&&this.ui.dateFormat.val(t),e.disableDOBselects(),this.options&&this.options.isForCheckOut&&(e.model.validation.birthday={required:!1}),l.bind(this)},onUpdateBtnClick:function(){var e=this;e.ui.message.hide(),e.trigger("save:form"),e.model.isValid(!0)&&o.loading({container:e.el,errortimeout:5e3,promise:e.userModelSavePromise()})},userModelSavePromise:function(e){var t=this,i=n.pick(t.model.attributes,["id"].concat(t.$("[data-bind]").map(function(){return jQuery(this).data("bind")}).get()));return e&&(i.birthday=e),(new s).save(i,{emulateForm:!0,emulateJSON:!0,success:function(e,i){o.usernotify(i18n.t("account.notification_profile_updated")),t.model.get("isForCheckOut")||t.ui.message.show(),t.disableDOBselects()}})},disableDOBselects:function(){var e=this;e.model.get("birthday")&&!e.model.get("isForCheckOut")&&e.ui.dobbinder.find("select").each(function(e,t){jQuery(t).attr("disabled","disabled")})}}))},{"../../../form/address/view":838,"../../../ui/date3selects/view":2071,"../../../ui/util":2122,"../../../ui/validator.js":2123,"../../../user/model":2132,"./template.hbs":147,"backbone-validation":3,"backbone.marionette":6,underscore:42}],147:[function(e,t,i){t.exports='{{#if isForCheckOut}}\r\n    <h4 class="item-title">{{local "checkout.complete_profile"}}</h4>\r\n{{/if}}\r\n<form>\r\n<div class="field field-half">\r\n    <label for="">{{local "form.title"}}</label>\r\n    <div class="input-box">\r\n        <select name="title" data-bind="title" data-value="{{title}}"></select>\r\n        <i class="input-select"></i>\r\n    </div>\r\n    <span class="error-tip null"> {{local "form_error.choose_title"}}</span>\r\n</div>\r\n<div class="field field-half field-half-right">\r\n    <label for="">{{local "form.gender"}}</label>\r\n    <div class="input-box">\r\n        <select name="gender" data-bind="gender" data-value="{{gender}}"></select>\r\n        <i class="input-select"></i>\r\n    </div>\r\n    <span class="error-tip null"> {{local "form_error.choose_gender"}}</span>\r\n</div>\r\n<div class="field">\r\n    <label for="">{{local "form.first_name"}}</label>\r\n    <div class="input-box">\r\n        <input type="text" data-bind="first_name" placeholder="{{local \'checkout.guest_first_name_placeholder\'}}"\r\n               value="{{first_name}}" name="first_name" required autocomplete="given-name" maxlength=50>\r\n        <i class="input-status"></i>\r\n    </div>\r\n    <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n    <span class="error-tip not-null"> {{local "form_error.only_accepts_latin"}}</span>\r\n</div>\r\n<div class="field">\r\n    <label for="">{{local "form.last_name"}}</label>\r\n    <div class="input-box">\r\n        <input type="text" data-bind="last_name" placeholder="{{local \'checkout.guest_last_name_placeholder\'}}"\r\n               value="{{last_name}}" name="last_name" required autocomplete="family-name" maxlength=50>\r\n        <i class="input-status"></i>\r\n    </div>\r\n    <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n    <span class="error-tip not-null"> {{local "form_error.only_accepts_latin"}}</span>\r\n</div>\r\n<div class="field">\r\n    <label>{{local "form.phone"}}</label>\r\n    <div class="input-box">\r\n        <input type="text" data-bind="phone" placeholder="{{local \'form.phone_placeholder\'}}" name="phone" maxlength=15\r\n               value="{{phone}}"><i class="input-status"></i>\r\n    </div>\r\n    <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n    <span class="error-tip not-null"> {{local "form_error.invalid_phone"}}</span>\r\n</div>\r\n<div class="field">\r\n    <label>{{local "form.secondary_phone"}}</label>\r\n    <div class="input-box">\r\n        <input type="text" data-bind="secondaryphone" placeholder="{{local \'form.phone_placeholder\'}}"\r\n               name="secondaryphone" maxlength="15" value="{{secondaryphone}}"><i class="input-status"></i>\r\n    </div>\r\n</div>\r\n{{#unless isForCheckOut}}\r\n    <div class="separator">\r\n        <span class="text">{{local "account.address_info"}}</span>\r\n    </div>\r\n{{/unless}}\r\n{{#unless isForCheckOut}}\r\n<div class="field field-third">\r\n    <label>{{local "form.date_of_birth"}}</label>\r\n    <div data-component="date3selects" data-allow-incomplete="true" data-parent-container="true" data-bind-to="birthday"\r\n         data-value="{{birthday}}"></div>\r\n    <span class="error-tip null">{{local "form_error.cannot_be_empty"}}</span>\r\n    <span data-content-key-prefix="error_birthdate_" class="error-tip not-null"> </span>\r\n</div>\r\n{{/unless}}\r\n<div class="field">\r\n    <label for="">{{local "form.country"}}</label>\r\n    <div class="input-box">\r\n        <select name="country" data-bind="country">\r\n            <option value="{{country}}">{{country}}</option>\r\n        </select>\r\n        <i class="input-select"></i>\r\n    </div>\r\n    <span class="error-tip null"> {{local "form_error.choose_country"}}</span>\r\n</div>\r\n<div class="field">\r\n    <label for="">{{local "form.address"}}</label>\r\n    <div class="input-box">\r\n        <input type="text" data-bind="address" placeholder="{{local \'form.address_placeholder\'}}" value="{{address}}"\r\n               name="address" autocomplete="street-address">\r\n        <i class="input-status"></i>\r\n    </div>\r\n    <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n    <span class="error-tip not-null">{{local "form_error.only_accepts_alphanumerics"}}</span>\r\n</div>\r\n<div class="field">\r\n    <label for="">{{local "form.city"}}</label>\r\n    <div class="input-box">\r\n        <input type="text" data-bind="city" placeholder="{{local \'form.city_placeholder\'}}" value="{{city}}" name="city"\r\n               autocomplete="city">\r\n        <i class="input-status"></i>\r\n    </div>\r\n    <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n    <span class="error-tip not-null"> {{local "form_error.only_accepts_latin"}}</span>\r\n</div>\r\n<div class="field field-half">\r\n    <label for="">{{local "form.state_province"}}</label>\r\n    <div class="input-box">\r\n        <select name="province" data-bind="province" class="__select"></select>\r\n        <i class="input-select"></i>\r\n        <!--<input type="text" data-bind="province" placeholder="{{local \'form.state_province_placeholder\'}}"-->\r\n               <!--value="{{province}}" name="province" autocomplete="province">-->\r\n        <!--<i class="input-status"></i>-->\r\n    </div>\r\n    <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n    <span class="error-tip not-null"> {{local "form_error.only_accepts_latin"}}</span>\r\n</div>\r\n<div class="field field-half field-half-right">\r\n    <label for="">{{local "form.postal_zip_code"}}</label>\r\n    <div class="input-box">\r\n        <input type="text" data-bind="postal_code" placeholder="{{local \'form.postal_zip_code_placeholder\'}}"\r\n               value="{{postal_code}}" name="postal_code" autocomplete="postal-code" maxlength="16">\r\n        <i class="input-status"></i>\r\n    </div>\r\n    <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n    <span class="error-tip not-null"> {{local "form_error.error_invalid_postal"}}</span>\r\n</div>\r\n\r\n{{#unless isForCheckOut}}\r\n\r\n    <div class="separator">\r\n        <span class="text">{{local "account.website_settings"}}</span>\r\n    </div>\r\n\r\n    <div class="field">\r\n        <label for="">{{local "form.date_format"}}</label>\r\n        <div class="input-box">\r\n            <select name="dateFormat" data-bind="dateFormat">\r\n                <option value="">{{local "form.select"}}</option>\r\n                <option value="DD/MMM/YYYY">DD/MMM/YYYY</option>\r\n                <option value="MMM/DD/YYYY">MMM/DD/YYYY</option>\r\n                <option value="YYYY/MMM/DD">YYYY/MMM/DD</option>\r\n            </select>\r\n            <i class="input-select"></i>\r\n        </div>\r\n        <span class="error-tip null"> {{local "form_error.choose_country"}}</span>\r\n    </div>\r\n\r\n\r\n    <div class="field">\r\n        <a class="wgt-sqbutton-black">{{local "form.update_profile"}}</a>\r\n    </div>\r\n{{/unless}}\r\n\r\n<div class="form-wide-error">\r\n    <p class="input-error"> {{local "form_error.check_your_input"}} </p>\r\n    <p class="network-error"> network error </p>\r\n    <p class="server-error"> server error </p>\r\n</div>\r\n\r\n{{#unless isForCheckOut}}\r\n    <p class="submit-message"\r\n       style="display: none; color: #36a3ad; text-align: center;font-size: 1.6rem; line-height: 1.2em; margin-top: .5rem; white-space: inherit;">{{local \'form.profile_updated\'}}</p>\r\n    {{#unless accountRelated.logontype}}\r\n        <!--<a href="/api/account/{{#if accountRelated.linkfacebook}}updatelink/1{{else}}login/facebook{{/if}}"-->\r\n           <!--class="profile-link link-facebook">-->\r\n            <!--<span class="icon-icon_B004"></span>-->\r\n            <!--&lt;!&ndash; {{#if accountRelated.linkfacebook}}Unlink{{else}}Link{{/if}} your Facebook account &ndash;&gt;-->\r\n            <!--{{#if accountRelated.linkfacebook}}-->\r\n                <!--{{local "preferences.profile_unlink_facebook"}}-->\r\n            <!--{{else}}-->\r\n                <!--{{local "preferences.profile_link_facebook"}}-->\r\n            <!--{{/if}}-->\r\n        <!--</a>-->\r\n        <!--<a href="/api/account/{{#if accountRelated.linkgoogle}}updatelink/2{{else}}login/google-plus{{/if}}"-->\r\n           <!--class="profile-link link-google">-->\r\n            <!--<span class="icon-icon_B006"></span>-->\r\n            <!--&lt;!&ndash; {{#if accountRelated.linkgoogle}}Unlink{{else}}Link{{/if}} your Google account &ndash;&gt;-->\r\n            <!--{{#if accountRelated.linkgoogle}}-->\r\n                <!--{{local "preferences.profile_unlink_google"}}-->\r\n            <!--{{else}}-->\r\n                <!--{{local "preferences.profile_link_google"}}-->\r\n            <!--{{/if}}-->\r\n        <!--</a>-->\r\n        <div style="padding-top: 1.5rem">\r\n            <div class="link-social-accounts">\r\n                {{#if accountRelated.linkfacebook}}\r\n                    <span>{{local "preferences.profile_linked_to_facebook"}}</span>\r\n                    <a class="wgt-sqbutton-dark" href="/mapi/account/updatelink/1">\r\n                        {{local "preferences.profile_unlink"}}\r\n                    </a>\r\n                {{else}}\r\n                    <a class="wgt-sqbutton-facebook" href="/mapi/account/login/facebook">\r\n                        <span class="icon-icon_B028"></span><span>{{local "preferences.profile_link_with_facebook"}}</span>\r\n                    </a>\r\n                {{/if}}\r\n            </div>\r\n            <div class="link-social-accounts">\r\n                {{#if accountRelated.linkgoogle}}\r\n                    <span>{{local "preferences.profile_linked_to_google"}}</span>\r\n                    <a class="wgt-sqbutton-dark" href="/api/account/updatelink/2">\r\n                        {{local "preferences.profile_unlink"}}\r\n                    </a>\r\n                {{else}}\r\n                    <a class="wgt-sqbutton-google" href="/api/account/login/google-plus">\r\n                        <span class="icon-icon_B048"></span><span>{{local "preferences.profile_link_with_google"}}</span>\r\n                    </a>\r\n                {{/if}}\r\n            </div>\r\n        </div>\r\n    {{/unless}}\r\n{{/unless}}\r\n</form>'},{}],2091:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=Handlebars.compile(e("./template.hbs")),a=e("./view-model.js"),o=e("./item-model"),s=e("../../ui/util");Handlebars.registerPartial("sublist",Handlebars.compile(e("./template-sublist.hbs"))),Handlebars.registerPartial("listitem",Handlebars.compile(e("./template-listitem.hbs"))),Handlebars.registerHelper("ifEquals",function(e,t,i){return i[e==t?"fn":"inverse"](this)});var r=t=t.exports=c.ItemView.extend(n.extend({},{template:!1,ui:{label:"label",container:"fieldset",div:"div",list:"ul",items:"li.item",content:"div>i"},events:{click:function(e){return this.model.get("disabled")?e.preventDefault():void 0},"click li.back":"onBackClick","click li.item":"onItemClick","click div":"onDropDownClick"},initialize:function(e){var t=this;r.instances.push(t),t.model=t.model||new a(e),t.model.set(n.pick(t.$el.data(),"fulllist multiselect label allownull disabled selecttext noneselectedtext disabled".split(" "))),jQuery("body").on("click",function(e){var i=jQuery(e.target).parents("body").length,n=t.$el.length>0&&jQuery.contains(t.$el.get(0),e.target);i&&!n&&t.collapse()}),t.model.on("change",t.render,t),t.render()},render:function(){var e=this;return Handlebars.registerHelper("ifSelected",function(t,i){return i[e.model.isSelected(t)?"fn":"inverse"](this)}),Handlebars.registerHelper("ifFulllist",function(t){return t[e.model.get("fulllist")?"fn":"inverse"](this)}),Handlebars.registerHelper("ifMultiselect",function(t){return t[e.model.get("multiselect")?"fn":"inverse"](this)}),Handlebars.registerHelper("ifFulllistAnd",function(t,i){return i[t&&e.model.get("fulllist")?"fn":"inverse"](this)}),Handlebars.registerHelper("isSelectableItem",function(t,i){return i[e.model.get("fulllist")&&0!=t.get("children").length?"inverse":"fn"](this)}),e.$el.html(l(e.model.attributes)),e.bindUIElements(),e.textOverflow(),jQuery(window).resize(function(){e.textOverflow()}),e},textOverflow:function(){var e=this;e.ui.div.hasClass("text_overflow")&&e.ui.div.removeClass("text_overflow"),e.ui.content.width()>.91*e.ui.container.parent().width()&&e.ui.div.addClass("text_overflow")},setItem:function(e){this.model.setItem(e)},setItems:function(e,t){this.model.setItems(e,t)},getSelectedItem:function(){return this.model.getSelectedItem()},getSelectedItemValue:function(){return this.model.getSelectedItemValue()},getSelectedItemItem:function(){return this.model.getSelectedItemItem()},collapse:function(){this.ui.container.removeClass("expanded")},expand:function(){this.ui.container.addClass("expanded")},toggleExpanded:function(){this.ui.container.toggleClass("expanded")},onDropDownClick:function(e){this.toggleExpanded()},onBackClick:function(){if("destination"==this.options.dropdownType){var e=s.getParamsFromHash();delete e[this.getSelectedItemItem().getLevel()],s.updateHash(e)}this.model.back(),this.expand()},onItemClick:function(e){var t=jQuery(e.target).closest("[data-instanceindex]").data("instanceindex"),i=o.instances[t];if(!(this.model.get("fulllist")&&i.get("children").length||i.get("disabled"))){var n=this.ui.list.scrollTop();if(this.collapse(),"destination"==this.options.dropdownType){var c=s.getParamsFromHash();c[i.get("item").getLevel()]=i.get("item").get("key"),s.updateHash(c)}this.model.setItem(i),(this.model.get("multiselect")||this.model.get("selected")&&this.model.get("selected").get("children").length)&&this.expand(),this.$el.data("restore-scrolltop")&&this.ui.list.scrollTop(n),this.trigger("item:click")}}}),{instances:[],getInstance:function(e){return n.find(this.instances,function(t){return t.$el.is(e)})},autoCreate:function(){jQuery("[data-dropdown-autocreate]").each(function(){r.createFromDOM(this)})},createFromLocations:function(e,t){var t=t||{},i=t.el&&this.createFromDOM(t.el)||new r;return i.setItems(o.createFromLocations(e,t)),i.render()},createFromDOM:function(e){var t=jQuery(e),e=t.get(0),i=t.is("select"),n=this.getInstance(e);if(!n){var c={el:i?null:t,items:t.children().map(function(){return o.createFromDOMElement(this,null,!0)}).get()};i&&(c.multiselect=t.prop("multiple")),n=new r(c),t.data("selecttext")&&n.model.set({selecttext:t.data("selecttext")}),n.model.on("change",function(){t.val(n.model.getSelectedItemValue()),t.attr("data-dropdown-value",n.model.getSelectedItemValue()),t.trigger("change")}),i?t.hide().after(n.render().el):n.render()}return n}});r.autoCreate()},{"../../ui/util":2122,"./item-model":2086,"./template-listitem.hbs":2087,"./template-sublist.hbs":2088,"./template.hbs":2089,"./view-model.js":2090,"backbone.marionette":6,underscore:42}],2090:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("./item-collection"),a=e("./item-model"),o=e("../../ui/util");t.exports=c.Model.extend({defaults:{label:"",collection:null,selected:null,allownull:!0,multiselect:!1,selecttext:i18n.t("general.select"),selectedtext:i18n.t("general.selected"),selecteditems:null,fulllist:!1,disabled:!1},initialize:function(e){var t=this;this.set({collection:new l,selecteditems:[]}),this.listenTo(this.get("collection"),"change reset add remove",function(){t.trigger("change:collection change")}),this.on("change:collection",function(){var e=this.get("selecteditems"),i=this.getItems(),c=n.difference(e,i);c.length&&t.set({selecteditems:n.without.apply(n,[e].concat(c))})}),e&&e.items&&this.setItems(e.items)},getAvailableOptions:function(){return this.get("selected").children.length?this.get("selected").children:this.get("selected").parent.children},filterBy:function(e){this.get("collection").set(n.filter(this.getAvailableOptions(),function(t){return!t.get("item").matches||t.get("item").matches(e)}))},getSelectedItem:function(){return this.get("multiselect")?n.map(this.get("selecteditems"),function(e){return e.get("item")}):this.get("selected")},getSelectedItemItem:function(){return this.get("multiselect")?n.map(this.get("selecteditems"),function(e){return e.get("item")}):this.get("selected")&&this.get("selected").get("item")},getSelectedItemValue:function(){return this.get("multiselect")?n.map(this.get("selecteditems"),function(e){return e.get("value")}):this.get("selected")&&this.get("selected").get("value")},isSelected:function(e){var t=this.get("multiselect")?n.contains(this.get("selecteditems"),e):this.get("selected")==e;return t},setItems:function(e,t){function i(e,t,i){return n.find(e,function(e){return t&&e.get("key").toUpperCase()==t.toUpperCase()&&(!i||(e.get("parentid")||"").toUpperCase()==i.toUpperCase())})}if(t&&this.set({selected:null}),e=n.map(e,function(e){return e instanceof a?e:new a(e)}),n.any(e,function(e){return!e.get("parent")})&&n.any(e,function(e){return e.get("children").length})){var c=new a({className:"adoptedParent",children:e,text:this.get("selecttext")});n.each(e,function(e){e.set({parent:c})})}if(this.set({selecteditems:[]},{silent:!0}),this.get("collection").set(e),!t){var e=this.getItems(!0);0!=e.length&&n.contains(e,this.get("selected"))||this.set({selected:null})}if(!this.getSelectedItem()&&!this.get("allownull")&&this.get("collection").length&&"destination"==this.get("dropdownType")){var l=o.queryParamFromHash("regionallevel"),s=o.queryParamFromHash("countrylevel"),r=o.queryParamFromHash("citylevel"),g=o.queryParamFromHash("hotellevel"),d=!!l,I=!!s,b=!!r,C=!!g,u=n.map(n.filter(this.getItems(!0),function(e){return"location"==e.get("className")}),function(e){return e.get("item")});if((d||I)&&u.length){var m;d&&(m=i(u,l),m&&this.setItem(m.get("id"))),(d&&I&&m||s)&&(m=i(u,s,m&&m.get("id")),m&&this.setItem(m.get("id")),b&&m&&(m=i(u,r,m.get("id")),m&&this.setItem(m.get("id"))),(b&&C&&m||C)&&(m=i(m.destinations,g),m&&this.setItem(m.get("id"))))}m||this.setItem(this.get("collection").at(0))}},getItems:function(e){for(var t=this,i=e&&!this.get("fulllist"),c=this.get("selected");i&&c&&c.get("parent");)c=c.get("parent");for(var l=this.get("fulllist")||!c||t.get("collection").contains(c)?n.clone(this.get("collection").models):[c].concat(c.get("children")),a=[];l.length;){var o=l.shift();a.push(o),l.push.apply(l,o.get("children"))}return a},setItem:function(e,t){if(!(e instanceof a)){var i=this.getItems(t);e=n.find(i,function(t){return t.get("value")==e})||n.find(i,function(t){return t.get("item")==e})||n.find(a.instances,function(t){return t.get("value")==e})}if(e)if(this.get("multiselect")&&0==e.get("children").length){var c=this.get("selecteditems");this.set({selecteditems:n.contains(c,e)?n.without(c,e):[e].concat(c)})}else this.get("selected")==e&&this.get("allownull")?(this.set({selected:null}),e.get("parent")&&this.get("collection").set(e.get("parent").get("children"))):(e.get("children").length>0&&this.get("collection").set(e.get("children")),this.set("selected",e));else this.set({selected:this.get("allownull")||0==this.get("collection").length?e:this.get("collection").at(0),selecteditems:[]})},back:function(){var e=this.get("selected");if(e){var t=e.get("parent");t&&this.setItem(t)}}})},{"../../ui/util":2122,"./item-collection":2085,"./item-model":2086,backbone:8,underscore:42}],2085:[function(e,t,i){arguments[4][2077][0].apply(i,arguments)},{"./item-model.js":2086,backbone:8,dup:2077,underscore:42}],2077:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("./item-model.js");t.exports=n.Collection.extend({model:c})},{"./item-model.js":2078,backbone:8,underscore:42}],2078:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../component/destination/models/location-model"),a=e("../../../component/destination/models/destination-model");jQuery.fn.justtext=function(){return jQuery(this).clone().children().remove().end().text()};var o=i=t.exports=c.Model.extend({defaults:{item:null,className:"",value:"",text:"",parent:null,children:null,disabled:!1},initialize:function(){this.set({children:this.get("children")||[]}),this.instanceindex=o.instances.push(this)-1},setChildren:function(e){var e=n.map(e,function(e){return e instanceof o?e:e instanceof a?o.createFromDestination(e):e instanceof l?o.createFromLocation(e):e instanceof c.Model?o.createFromModel(e):e instanceof HTMLElement?o.createFromDOMElement(e):new o({item:e,text:e.toString()})}),t=this.get("children"),i=t.length==e.length&&0==n.difference(t,e).length;i||this.set({children:e})}},{instances:[],getInstance:function(e){return n.find(this.instances,function(t){return t.get("item")==e})},createFromModel:function(e){return this.getInstance(e)||new o({item:e,text:e.get("name")||e.toString(),value:e.id})},createFromDOMElement:function(e,t,i){var e=jQuery(e),n=e.get(0),c=this.getInstance(e),l=e.data(),a=(e.attr("value"),c||new o({item:n,text:l.text||e.justtext(),value:l.value||e.attr("value"),className:l["class"]||e.className,disabled:!!l.disabled,parent:t}));return!c&&i&&a.set({children:jQuery(e).children().map(function(e,t,n){return o.createFromDOMElement(this,a,i)}).get()}),a},createFromDestination:function(e){var t=this.getInstance(e)||new o({value:e.get("id"),text:e.get("name"),item:e,className:"destination",children:[]});return t.set({parent:t.get("parent")||o.createFromLocation(e.location)}),t},createFromLocations:function(e,t){return n.map(e.getTopLevel?e.getTopLevel():e,function(e){return o.createFromLocation(e,t&&t.includedestinations)})},createFromLocation:function(e,t){var i=e.parent&&this.createFromLocation(e.parent,t),c=this.getInstance(e),l=c||new o({value:e.get("id"),text:e.get("name"),item:e,className:"location",parent:i});return c||l.set({children:n.map(e.children,function(e){return o.createFromLocation(e,t)}).concat(t?n.map(e.destinations,function(e){return o.createFromDestination(e)}):[])}),l}})},{"../../../component/destination/models/destination-model":817,"../../../component/destination/models/location-model":823,backbone:8,underscore:42}],2089:[function(e,t,i){t.exports='<fieldset\r\n	class="custom-dropdown{{#if disabled}} disabled{{/if}}{{#if fulllist}} fulllist{{/if}}{{#if multiselect}} multiselect{{/if}}{{#if selected}} has-selected{{else}} nothing-selected{{/if}}"\r\n	data-count="{{collection.length}}"\r\n>\r\n    <label>{{label}}</label>\r\n    <div>\r\n        <i>\r\n		{{#if multiselect}}\r\n			{{#if selecteditems.length}}\r\n                {{selectedtext}} <span class="selected-count">{{selecteditems.length}}</span>\r\n			{{else}}\r\n				{{ selecttext }}\r\n			{{/if}}\r\n		{{else}}\r\n			{{#if selected}}\r\n				{{selected.attributes.text}}\r\n			{{else}}\r\n				{{ selecttext }}\r\n			{{/if}}\r\n		{{/if}}\r\n		&nbsp;\r\n        </i>\r\n	</div>\r\n    <ul class="items-list">\r\n		{{#if selected.attributes.parent}}{{#unless fulllist}}\r\n            <li class="back"> back </li>\r\n		{{/unless}}{{/if}}\r\n		{{#each collection.models}}\r\n            {{> listitem}}\r\n		{{/each}}\r\n    </ul>\r\n</fieldset>'},{}],2088:[function(e,t,i){arguments[4][2081][0].apply(i,arguments)},{dup:2081}],2081:[function(e,t,i){t.exports='<div class="sub-head">{{attributes.text}}</div>\r\n<ul class="subitems-list">\r\n	{{#each attributes.children}}\r\n		{{> listitem}}\r\n	{{/each}}\r\n</ul>'},{}],2087:[function(e,t,i){t.exports='<li class="{{#if attributes.disabled}}disabled{{/if}}{{#isSelectableItem this}} item{{/isSelectableItem}}{{#ifSelected this}} selected{{/ifSelected}}{{#if attributes.children.length}} has-children{{/if}}{{#if attributes.className}} {{attributes.className}}{{/if}}"\r\n    data-instanceindex="{{instanceindex}}"\r\n    data-value="{{attributes.value}}"\r\n>\r\n	{{#ifFulllistAnd attributes.children.length}}\r\n		{{> sublist}}\r\n	{{else}}\r\n        {{#ifMultiselect}}{{#unless attributes.children.length}}{{#unless attributes.disabled}}\r\n			<i class="checkbox {{#ifSelected this}}checked{{/ifSelected}}"></i>\r\n		{{/unless}}{{/unless}}{{/ifMultiselect}}\r\n		{{attributes.text}}\r\n	{{/ifFulllistAnd}}\r\n</li>'},{}],2086:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../component/destination/models/location-model"),a=e("../../../component/destination/models/destination-model");jQuery.fn.justtext=function(){return jQuery(this).clone().children().remove().end().text()};var o=i=t.exports=c.Model.extend({defaults:{item:null,className:"",value:"",text:"",parent:null,children:null,disabled:!1},initialize:function(){this.set({children:this.get("children")||[]}),this.instanceindex=o.instances.push(this)-1},setChildren:function(e){var e=n.map(e,function(e){return e instanceof o?e:e instanceof a?o.createFromDestination(e):e instanceof l?o.createFromLocation(e):e instanceof c.Model?o.createFromModel(e):e instanceof HTMLElement?o.createFromDOMElement(e):new o({item:e,text:e.toString()})}),t=this.get("children"),i=t.length==e.length&&0==n.difference(t,e).length;i||this.set({children:e})}},{instances:[],getInstance:function(e){return n.find(this.instances,function(t){return t.get("item")==e})},createFromModel:function(e){return this.getInstance(e)||new o({item:e,text:e.get("name")||e.toString(),value:e.id
})},createFromDOMElement:function(e,t,i){var e=jQuery(e),n=e.get(0),c=this.getInstance(e),l=e.data(),a=(e.attr("value"),c||new o({item:n,text:l.text||e.justtext(),value:l.value||e.attr("value"),className:l["class"]||e.className,disabled:!!l.disabled,parent:t}));return!c&&i&&a.set({children:jQuery(e).children().map(function(e,t,n){return o.createFromDOMElement(this,a,i)}).get()}),a},createFromDestination:function(e){var t=this.getInstance(e)||new o({value:e.get("id"),text:e.get("name"),item:e,className:"destination",children:[]});return t.set({parent:t.get("parent")||o.createFromLocation(e.location)}),t},createFromLocations:function(e,t){return n.map(e.getTopLevel?e.getTopLevel():e,function(e){return o.createFromLocation(e,t&&t.includedestinations)})},createFromLocation:function(e,t){var i=e.parent&&this.createFromLocation(e.parent,t),c=this.getInstance(e),l=c||new o({value:e.get("id"),text:e.get("name"),item:e,className:"location",parent:i});return c||l.set({children:n.map(e.children,function(e){return o.createFromLocation(e,t)}).concat(t?n.map(e.destinations,function(e){return o.createFromDestination(e)}):[])}),l}})},{"../../../component/destination/models/destination-model":817,"../../../component/destination/models/location-model":823,backbone:8,underscore:42}],822:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js"),l=e("./location-model.js");t.exports=n.Collection.extend({url:c.getURL("data","locations"),model:l,createRelationalLinks:function(){this.each(function(e){e.setParent(this.get(e.get("parentid"))),e._name=e.get("name")},this)},getTopLevel:function(){return this.where({parentid:""})},getApplicable:function(e){return e.destination?e.destination.location.children:e.location?e.location.children:this.getTopLevel()}})},{"../../../../config/host.js":45,"./location-model.js":823,backbone:8,underscore:42}],823:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("./cityprices-model");t.exports=c.Model.extend({defaults:{id:"",name:"",intromessage:"",parentid:"",url:"",destinationid:""},initialize:function(){this.parent=null,this.children=[],this.allchildren=[],this.destinations=[],this.alldestinations=[]},getStartingAtPrices:function(){var e=this;return this.prices||(this.prices=new l({locationid:this.id}),this.prices.promise=this.prices.fetch().success(function(t){n.each(e.destinations,function(e){t[e.id]&&e.set({startingat:t[e.id]})})})),this.prices},getParents:function(){for(var e=[],t=this;t.parent;)e.push(t.parent),t=t.parent;return e},addDestination:function(e){this.destinations.push(e),this.addDestinationToAll(e)},addDestinationToAll:function(e){this.alldestinations.push(e),this.parent&&this.parent.addDestinationToAll(e)},setParent:function(e){if(this.parent=e)for(this.parent.children.push(this);e;)e.allchildren.push(this),e=e.parent;else this.set({oldParentId:this.get("parentid")}),this.set({parentid:""})},addLocationToAll:function(e){this.alldestinations.push(e),this.parent&&this.parent.addDestinationToAll(e)},matches:function(t){var i=t.DAO||e("./DAO");return(!t.interest||i.matches(this.alldestinations,{interest:t.interest,DAO:i}))&&(!t.interests||i.matches(this.alldestinations,{interests:t.interests,DAO:i}))&&(!t.weddings||i.matches(this.alldestinations,{weddings:t.weddings,DAO:i}))&&(!t.weddingss||i.matches(this.alldestinations,{weddingss:t.weddingss,DAO:i}))&&(!t.meetings||i.matches(this.alldestinations,{meetings:t.meetings,DAO:i}))&&(!t.meetingss||i.matches(this.alldestinations,{meetingss:t.meetingss,DAO:i}))&&(!t.products||i.matches(this.alldestinations,{products:t.products,DAO:i}))&&(!t.product||i.matches(this.alldestinations,{product:t.product,DAO:i}))&&(!t.location||n.contains(this.getParents().concat([this]),t.location)||n.contains(t.location.getParents().concat([t.location]),this))&&(!t.locations||i.matches(t.locations,{location:this,DAO:i}))&&(!t.collection||i.matches(this.alldestinations,{collection:t.collection,DAO:i}))&&(!t.collections||i.matches(t.collections,{location:this,DAO:i}))&&(!t.hasdestinations||this.alldestinations.length)&&(!t.destination||n.contains(this.alldestinations,t.destination))},getLevel:function(){switch(this.get("level")){case"region":return"regionallevel";case"country":return"countrylevel";case"city":return"citylevel"}},parse:function(e){return e.url&&(e.destinationid=e.id),e}})},{"./DAO":809,"./cityprices-model":812,backbone:8,underscore:42}],812:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js"),l=e("underscore.string/sprintf");t.exports=n.Model.extend({url:function(){return c.getURL("api",l("data/city/%s/startingatprices",this.get("locationid")))},defaults:{locationid:""}})},{"../../../../config/host.js":45,backbone:8,underscore:42,"underscore.string/sprintf":41}],809:[function(e,t,i){var n=e("underscore"),c=e("./collection-collection.js"),l=e("./location-collection"),a=e("./destination-collection.js"),o=e("../../maps/models/categories"),s=e("./interest-collection"),r=i=t.exports={collections:new c,locations:new l,destinations:new a,categories:new o,interests:new s,filter:function(e,t){return n.filter(e,function(e){return e.matches(t)})},matches:function(e,t){return 0==e.length&&!t.hasitems||n.any(e,function(e){return e.matches(t)})}};r.promise=jQuery.when(r.collections.fetch(),r.locations.fetch(),r.destinations.fetch(),r.interests.fetch(),r.categories.fetch()).then(function(){r.locations.createRelationalLinks(r),r.destinations.createRelationalLinks(r)})},{"../../maps/models/categories":1152,"./collection-collection.js":813,"./destination-collection.js":815,"./interest-collection":820,"./location-collection":822,underscore:42}],1152:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("./category"),a=e("../../../../config/host");t.exports=c.Collection.extend({model:l,url:function(){return a.getURL("api","neighbor/categories")},figure:function(e){var t=this,i=(t.map(function(e){return e.get("parent")}),[]);e.map(function(t){for(var n={category:t.category,parent:t.parent,count:0},c=0;c<e.length;c++)e[c].category!==n.category&&e[c].parent!==n.parent||(n.count=parseInt(n.count)+1);i.push(n)});for(var l=[],a={},o=0;o<i.length;o++){var s=i[o].parent;a[s]||(l.push(i[o]),a[s]=!0)}var r=n.sortBy(n.map(l,function(e){return{model:t.get(e.parent),count:e.count}}),function(e){return t.indexOf(e.model)});return new c.Model({area:n.filter(r,function(e){return e.model})})}})},{"../../../../config/host":45,"./category":1153,backbone:8,underscore:42}],1153:[function(e,t,i){var n=e("backbone");t.exports=n.Model.extend({})},{backbone:8}],820:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../../config/host.js"),a=e("./interest-model.js");t.exports=c.Collection.extend({url:l.getURL("data","interests"),model:a,parse:function(e){return n.sortBy(e,"name")}})},{"../../../../config/host.js":45,"./interest-model.js":821,backbone:8,underscore:42}],821:[function(e,t,i){var n=(e("underscore"),e("backbone"));e("../../../../config/host.js"),t.exports=n.Model.extend({defaults:{id:"",name:"",iconindex:""},matches:function(t){var i=e("./DAO");return(!t.destination||t.destination.matches({interest:this}))&&(!t.destinations||i.matches(t.destinations,{interest:this}))&&(!t.location||t.location.matches({interest:this}))&&(!t.locations||i.matches(t.locations,{interest:this}))&&(!t.weddingss||i.matches(t.weddingss,{interest:this}))&&(!t.products||i.matches(t.products,{interest:this}))&&(!t.collections||i.matches(t.collections,{interest:this}))&&(!t.collection||t.collection.matches({interest:this}))&&(!t.meetingss||i.matches(t.meetingss,{interest:this}))}})},{"../../../../config/host.js":45,"./DAO":809,backbone:8,underscore:42}],815:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../../config/host.js"),a=e("../../ui/util"),o=e("./destination-model.js");t.exports=c.Collection.extend({url:l.getURL("data","destinations"),model:o,parse:function(e){return n.sortBy(e,"name")},createRelationalLinks:function(e){this.each(function(t){t.interests=n.map(t.get("interestids"),e.interests.get,e.interests),t.collection=e.collections.get(t.get("collectionid"))||e.collections.findWhere({codename:"millennium"}),t.location=e.locations.get(t.get("locationid"))},this),a.QA.Collection(this,"interests collection location","Destinations"),this.each(function(e){e.location.addDestination(e)})},getApplicable:function(e){return e.destination?e.destination.location.destinations:e.location?e.location.destinations:[]}})},{"../../../../config/host.js":45,"../../ui/util":2122,"./destination-model.js":817,backbone:8,underscore:42}],817:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../../config/host.js"),a=e("./attraction-collection"),o=e("./destination-otherinfo"),s=e("./destination-tours"),r=e("./destination-heart");t.exports=c.Model.extend({defaults:{id:"",contentid:"",type:"Hotels",name:"",richtextname:"",description:"",lat:"",lng:"",isfavourite:!1,collectionid:"",locationid:"",interestids:null,infoimages:null,carouselimage:"",startingat:"",total_guest_rooms:"",propertyinfo:null},parse:function(e){return e.lat=parseFloat(e.lat),e.lng=parseFloat(e.lng),e.richtextname||(e.richtextname=e.name),(e.lat>90||e.lat<-90||e.lng>180||e.lng<-180)&&(e.lat=e.lng=0),l.adjustURLs(e,"carouselimage infoimages url".split(" "))},hasValidPosition:function(){var e=this.attributes;return e.lat>=-90&&e.lat<=90&&e.lng>=-180&&e.lng<=180&&!(0==e.lat&&0==e.lng)},getAttractions:function(){var e=this;return window.ATTRACTIONS_DATA?(e.attractions=new a(window.ATTRACTIONS_DATA,{destination:e,parse:!0}),e.set({attractions:e.attractions}),e.attractions.promise=jQuery.when()):e.attractions||(e.attractions=new a([],{destination:e}),e.attractions.promise=e.attractions.fetch().then(function(){e.set({attractions:e.attractions})})),e.attractions},getOtherInfo:function(){var e=this;return e.otherinfo||(e.otherinfo=new o({hotelid:e.get("id")}),e.otherinfo.promise=e.otherinfo.fetch().then(function(){e.set({otherinfo:e.otherinfo})})),e.otherinfo},getTours:function(){var t=this;if(!t.tours){var i=t.location;i||(i=e("./DAO").locations.get(t.get("locationid")));var n=i?i.get("name"):"";t.tours=new s({cityname:n,hotelid:t.get("hotelid")}),t.tours.promise=t.tours.fetch().then(function(){t.set({tours:t.tours})})}return t.tours},getHeart:function(){var e=this;return e.heart||(e.heart=new r({hotelid:e.get("hotelid")}),e.heart.promise=e.heart.fetch().then(function(){e.set({heart:e.heart})})),e.heart},matches:function(t){var i=t.DAO||e("./DAO");return(!t.interest||n.contains(this.interests,t.interest))&&(!t.interests||0==t.interests.length||n.intersection(this.interests,t.interests).length>0)&&(!t.products||0==t.products.length||n.contains(n.flatten(n.pluck(t.products,"destinations")),this))&&(!t.weddingss||n.contains(n.pluck(t.weddingss,"destination"),this))&&(!t.meetingss||n.contains(n.pluck(t.meetingss,"destination"),this))&&(!t.product||n.contains(t.product.destinations,this))&&(!t.locations||i.matches(t.locations,{destination:this,DAO:i}))&&(!t.collections||i.matches(t.collections,{destination:this,DAO:i}))&&(!t.collection||this.collection==t.collection)&&(!t.location||this.location.matches({location:t.location,DAO:i}))&&(!t.weddings||this==t.weddings.destination)&&(!t.meetings||this==t.meetings.destination)},getLevel:function(){return"hotellevel"}})},{"../../../../config/host.js":45,"./DAO":809,"./attraction-collection":810,"./destination-heart":816,"./destination-otherinfo":818,"./destination-tours":819,backbone:8,underscore:42}],819:[function(e,t,i){var n=e("backbone"),c=e("../../../../config/host.js");t.exports=n.Model.extend({url:function(){return c.getURL("api","shops/product/topbycity?hotelid="+encodeURIComponent(this.get("hotelid"))+"&city="+encodeURIComponent(this.get("cityname"))+"&top=10")},parse:function(e){return Array.isArray(e)&&e.forEach(function(e){e.rating=Math.min(5,Math.round(e.rating))}),{items:e}}})},{"../../../../config/host.js":45,backbone:8}],818:[function(e,t,i){var n=e("backbone"),c=e("../../../../config/host.js");t.exports=n.Model.extend({url:function(){return c.getURL("api","data/property/"+this.get("hotelid")+"/otherInfo")},parse:function(e){return e._hasPrice=e.startprice&&/\d/.test(e.startprice),e}})},{"../../../../config/host.js":45,backbone:8}],816:[function(e,t,i){var n=e("backbone"),c=e("../../../../config/host.js");t.exports=n.Model.extend({url:function(){return c.getURL("api","property/heart-beat?hotel="+this.get("hotelid"))}})},{"../../../../config/host.js":45,backbone:8}],810:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js"),l=e("./attraction-model.js");t.exports=n.Collection.extend({model:l,initialize:function(e,t){var i=this;i.destination=t.destination,i.url=c.getURL("destination.attractions",i.destination.id),i.on("reset add",function(){i.each(function(e){e.destination=i.destination})})}})},{"../../../../config/host.js":45,"./attraction-model.js":811,backbone:8,underscore:42}],811:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js");t.exports=n.Model.extend({defaults:{id:"",type:"",content:"",isfavourite:!1,iconindex:"",lng:"",lat:"",name:"",thumbnailimage:"",mapicon:"",infoimages:null,description:"",propertyinfo:null,url:""},parse:function(e){return e.mapicon&&"string"!=jQuery.type(e.mapicon)&&(e.iconindex=e.iconindex||e.mapicon.iconindex,delete e.mapicon),e.lat=parseFloat(e.lat),e.lng=parseFloat(e.lng),/^</.test(e.url)&&(e.url=""),c.adjustURLs(e,"thumbnailimage mapicon infoimages url".split(" "))}})},{"../../../../config/host.js":45,backbone:8,underscore:42}],813:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../../../config/host.js"),l=e("./collection-model.js");t.exports=n.Collection.extend({url:c.getURL("data","collections"),model:l})},{"../../../../config/host.js":45,"./collection-model.js":814,backbone:8,underscore:42}],814:[function(e,t,i){var n=e("underscore"),c=e("backbone");e("../../../../config/host.js"),t.exports=c.Model.extend({defaults:{id:"",name:"",codename:"millenium",iconindex:"001"},parse:function(e){return n.pick(n.extend({iconindex:e.icon_index},e),n.keys(this.defaults))},matches:function(t){var i=e("./DAO");return(!t.destination||t.destination.collection==this)&&(!t.location||t.location.matches({collection:this}))&&(!t.locations||i.matches(t.locations,{collection:this}))&&(!t.interest||i.matches(i.destinations.where({collectionid:this.id}),{interest:t.interest,hasitems:!0}))&&(!t.interests||i.matches(t.interests,{collection:this}))}})},{"../../../../config/host.js":45,"./DAO":809,backbone:8,underscore:42}],118:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("../model/events.js"),a=e("../../../ui/util"),o=e("../../../../../config/host.js").host,s=e("../../../abmb/stateful.js");e("../assets/styles.sass");t.exports=c.ItemView.extend(n.extend({},s,{template:Handlebars.compile(e("../assets/remove-confirm.hbs")),ui:{removeTips:".remove-tips",overLayer:"#overlayer-wrapper"},initialize:function(){this.switchState("confirm:hide"),this.getSelectData()},getSelectData:function(){var e=this;jQuery.ajax({type:"get",url:o+"/api/shops/order/canceloptions",success:function(t){e.selectData=t,e.cancelCode=t[0].code}}).always(function(){})},serializeData:function(){var e={};return"room"==this.removeType&&(e=this.findRoomById(this.removeId)),{removeType:this.removeType,cancelPenalty:e.cancelpenalty,selectData:this.selectData,privacyUrl:e.privacyurl||this.collection&&this.collection.models[0]&&this.collection.models[0].get("privacyurl"),modifyUrl:this.collection&&this.collection.models[0]&&this.collection.models[0].get("modifyurl")}},setRoom:function(e){this.room=e},findRoomById:function(e){if(this.room)return this.room;var t={};return n.each(this.collection.toJSON(),function(i){n.each(i.entries,function(i){i.id==e&&(t=i)})}),t},events:{'click a[data-opt="cancel"]':"cancel",'click a[data-opt="remove"]':"remove","change #cancel-code":"selectChange"},selectChange:function(e){this.cancelCode=jQuery(e.currentTarget).val()},remove:function(e){var t="We are unable to process your cancellation request at this time.  Please try again later.";e.stopPropagation();var i=this;l.trigger("toggle:loading","show"),i.trigger("toggle:loading","show"),i.switchState("confirm:hide"),this.ui.overLayer.show(),"room"==i.removeType&&jQuery.ajax({type:"get",url:o+"/api/room/orders/cancel?roomorderid="+i.removeId,success:function(e){l.trigger("req:remove-success",i.removeId),i.trigger("req:remove-success",i.removeId),l.trigger("toggle:loading","hide"),i.cancel(),window.Adobe_Data=e.adobeData,a.addStatisticsScript(),window.location.href="#transaction_history=1",window.location.reload()},error:function(){i.switchState("confirm:show"),i.$el.find('[data-opt="remove"]').hide(),i.ui.removeTips.text(t).css({color:"#ba0c2f"})}}).always(function(){l.trigger("toggle:loading","hide"),i.trigger("toggle:loading","hide")}),"product"==i.removeType&&jQuery.ajax({type:"get",url:o+"/api/shops/order/cancel?id="+i.removeId+"&code="+i.cancelCode,success:function(){l.trigger("req:remove-success",i.removeId),i.trigger("req:remove-success",i.removeId),l.trigger("toggle:loading","hide"),i.cancel()},error:function(e){i.switchState("confirm:show"),i.$el.find(".select").hide(),i.$el.find("#opt-cancel-btn").show(),i.$el.find("#opt-remove-btn").hide(),i.ui.removeTips.text(t).css({color:"#ba0c2f"})}}).always(function(){l.trigger("toggle:loading","hide")})},cancel:function(){this.switchState("confirm:hide"),this.ui.overLayer.hide()},onRender:function(){}}))},{"../../../../../config/host.js":45,"../../../abmb/stateful.js":72,"../../../ui/util":2122,"../assets/remove-confirm.hbs":110,"../assets/styles.sass":111,"../model/events.js":114,backbone:8,"backbone.marionette":6,underscore:42}],114:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l={};n.extend(l,c.Events),t.exports=l},{backbone:8,underscore:42}],111:[function(e,t,i){t.exports=e("sassify")("/**  *  * @param { 300 | bold } $font-weight  * @param { normal     } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal           } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { 300 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { normal } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ .transaction div.bookingitem {   margin-bottom: 2rem; }  .transaction div.other-controll-button {   margin-bottom: 4rem;   text-align: right; }   .transaction div.other-controll-button a {     margin-right: 1.5rem; }     .transaction div.other-controll-button a:last-of-type {       margin-right: 0; }   @media screen and (max-width: 768px) {     .transaction div.other-controll-button a {       width: 100%;       margin-left: 0;       margin-right: 0; }       .transaction div.other-controll-button a:not(:first-child) {         margin-top: 1rem; } }  .block-transactions .confirm-hide #removeConfirmWrapper, .checkout .confirm-hide #removeConfirmWrapper {   display: none; }  .block-transactions .confirm-hide #overlayer-wrapper, .checkout .confirm-hide #overlayer-wrapper {   display: none; }  .block-transactions .confirm-show #removeConfirmWrapper, .checkout .confirm-show #removeConfirmWrapper {   display: block; }  .block-transactions .confirm-show #overlayer-wrapper, .checkout .confirm-show #overlayer-wrapper {   display: block; }  .block-transactions #overlayer-wrapper, .checkout #overlayer-wrapper {   position: fixed;   top: 0;   bottom: 0;   left: 0;   right: 0;   z-index: 9999;   background-color: rgba(0, 0, 0, 0.6); }  .block-transactions #removeConfirmWrapper, .checkout #removeConfirmWrapper {   width: 62rem;   box-sizing: border-box;   position: fixed;   left: 50%;   -webkit-transform: translate(-50%, -50%);   -moz-transform: translate(-50%, -50%);   -ms-transform: translate(-50%, -50%);   -o-transform: translate(-50%, -50%);   transform: translate(-50%, -50%);   top: 50%;   z-index: 2; }   .block-transactions #removeConfirmWrapper .wgt-sqbutton-black, .checkout #removeConfirmWrapper .wgt-sqbutton-black {     padding: 0; }   .block-transactions #removeConfirmWrapper .wgt-sqbutton-blue, .checkout #removeConfirmWrapper .wgt-sqbutton-blue {     padding: 0; }   .block-transactions #removeConfirmWrapper .inner, .checkout #removeConfirmWrapper .inner {     background-color: #E7E7E7;     padding-bottom: 4rem;     position: relative;     font-size: 1.8rem;     line-height: 2.8rem; }     .block-transactions #removeConfirmWrapper .inner .font-whitney-bold, .checkout #removeConfirmWrapper .inner .font-whitney-bold {       font-family: 'Whitney', Helvetica, sans-serif;       font-weight: bold; }     .block-transactions #removeConfirmWrapper .inner a, .checkout #removeConfirmWrapper .inner a {       width: 22rem;       line-height: 5rem;       font-family: 'Museo Sans', Helvetica, sans-serif;       font-weight: 500;       font-size: 1.4rem;       letter-spacing: 0.1rem; }       .block-transactions #removeConfirmWrapper .inner a.underline, .checkout #removeConfirmWrapper .inner a.underline {         text-decoration: underline;         color: #333; }       .block-transactions #removeConfirmWrapper .inner a.wgt-sqbutton, .checkout #removeConfirmWrapper .inner a.wgt-sqbutton {         background-color: #7D7D7D;         border-color: #7D7D7D; }         .block-transactions #removeConfirmWrapper .inner a.wgt-sqbutton:hover, .checkout #removeConfirmWrapper .inner a.wgt-sqbutton:hover {           background-color: transparent; }     .block-transactions #removeConfirmWrapper .inner .remove-confirm-close, .checkout #removeConfirmWrapper .inner .remove-confirm-close {       position: absolute;       top: 0px;       right: 10px;       font-size: 5rem;       cursor: pointer; }       @media screen and (max-width: 768px) {         .block-transactions #removeConfirmWrapper .inner .remove-confirm-close, .checkout #removeConfirmWrapper .inner .remove-confirm-close {           right: -80px; } }     .block-transactions #removeConfirmWrapper .inner p, .checkout #removeConfirmWrapper .inner p {       font-family: 'Whitney', Helvetica, sans-serif;       font-weight: 300;       text-align: center;       padding: 4rem 5.5rem;       margin: auto;       font-size: 1.8rem;       line-height: 2.8rem;       width: 100%;       box-sizing: border-box; }     .block-transactions #removeConfirmWrapper .inner h6, .checkout #removeConfirmWrapper .inner h6 {       font-family: 'Museo Sans', Helvetica, sans-serif;       font-weight: 500;       padding: 1.9rem 0;       font-size: 1.8rem;       line-height: 2.2rem;       background-color: #363636;       text-align: center;       text-transform: uppercase;       letter-spacing: 0.02rem;       color: #fff; }     .block-transactions #removeConfirmWrapper .inner .btn-wrapper, .checkout #removeConfirmWrapper .inner .btn-wrapper {       text-align: center; }       .block-transactions #removeConfirmWrapper .inner .btn-wrapper :nth-child(1), .checkout #removeConfirmWrapper .inner .btn-wrapper :nth-child(1) {         margin-right: 2rem; }       .block-transactions #removeConfirmWrapper .inner .btn-wrapper a.wgt-sqbutton, .checkout #removeConfirmWrapper .inner .btn-wrapper a.wgt-sqbutton {         margin-right: 10px; }     .block-transactions #removeConfirmWrapper .inner .select-box, .checkout #removeConfirmWrapper .inner .select-box {       width: 92%;       margin: auto; }       .block-transactions #removeConfirmWrapper .inner .select-box .select, .checkout #removeConfirmWrapper .inner .select-box .select {         position: relative;         display: inline-block;         width: 63%;         border: solid 1px #363636;         vertical-align: middle;         box-sizing: border-box;         margin-right: 2rem;         overflow: hidden; }         .block-transactions #removeConfirmWrapper .inner .select-box .select select, .checkout #removeConfirmWrapper .inner .select-box .select select {           border: 0;           font-size: 1.6rem;           height: 4rem;           width: calc(100% + 17px);           padding-left: 1rem;           background-color: #fff;           word-break: keep-all;           box-sizing: border-box;           padding-right: calc(22px + 2.2rem);           appearance: none;           -moz-appearance: none;           -webkit-appearance: none; }         .block-transactions #removeConfirmWrapper .inner .select-box .select:after, .checkout #removeConfirmWrapper .inner .select-box .select:after {           position: absolute;           top: 50%;           right: 1rem;           display: inline-block;           content: '';           width: 0;           height: 0;           border: 0.6rem solid transparent;           border-top-color: #363636; }       .block-transactions #removeConfirmWrapper .inner .select-box .wgt-sqbutton-black, .checkout #removeConfirmWrapper .inner .select-box .wgt-sqbutton-black {         width: calc(37% - 2rem - 4px) !important;         line-height: calc(4rem + 2px);         padding: 0; }   @media (max-width: 1024px) {     .block-transactions #removeConfirmWrapper, .checkout #removeConfirmWrapper {       -webkit-transform: translate(-50%, 0);       -moz-transform: translate(-50%, 0);       -ms-transform: translate(-50%, 0);       -o-transform: translate(-50%, 0);       transform: translate(-50%, 0);       max-width: 500px;       position: absolute;       left: 50%;       top: 100px; } }   @media (max-width: 570px) {     .block-transactions #removeConfirmWrapper, .checkout #removeConfirmWrapper {       top: 30px;       width: 100%; }       .block-transactions #removeConfirmWrapper .inner div.select-box, .checkout #removeConfirmWrapper .inner div.select-box {         text-align: inherit; }         .block-transactions #removeConfirmWrapper .inner div.select-box div.select, .checkout #removeConfirmWrapper .inner div.select-box div.select {           width: 100%;           margin-right: 0; }         .block-transactions #removeConfirmWrapper .inner div.select-box .wgt-sqbutton-black, .checkout #removeConfirmWrapper .inner div.select-box .wgt-sqbutton-black {           max-width: inherit;           width: 100% !important;           margin-top: 1rem; }       .block-transactions #removeConfirmWrapper .inner .btn-wrapper a, .checkout #removeConfirmWrapper .inner .btn-wrapper a {         width: 86%; }         .block-transactions #removeConfirmWrapper .inner .btn-wrapper a.wgt-sqbutton, .checkout #removeConfirmWrapper .inner .btn-wrapper a.wgt-sqbutton {           margin-right: 0;           margin-bottom: 1rem; } }  .block-transactions .bookingitem .bookingitem-price .daily-price, .checkout .bookingitem .bookingitem-price .daily-price {   width: 100%;   right: 0; }   .block-transactions .bookingitem .bookingitem-price .daily-price h6, .checkout .bookingitem .bookingitem-price .daily-price h6 {     position: relative; }     .block-transactions .bookingitem .bookingitem-price .daily-price h6 .hide-tips, .checkout .bookingitem .bookingitem-price .daily-price h6 .hide-tips {       cursor: pointer;       position: absolute;       top: 5px;       right: 10px;       font-size: 4rem;       color: #fff; }  .block-transactions .sub-title, .checkout .sub-title {   font-size: 2rem;   line-height: 1.5em;   padding: 1em 2em;   font-family: 'Verlag', Helvetica, sans-serif;   font-weight: 300; }   .block-transactions .sub-title + .loading-hide, .checkout .sub-title + .loading-hide {     margin-top: -60px; }  html[dir=\"rtl\"] .block-transactions #removeConfirmWrapper .inner .remove-confirm-close {   right: inherit;   left: 10px; }  html[dir=\"rtl\"] .block-transactions #removeConfirmWrapper .inner .btn-wrapper a.wgt-sqbutton {   margin-right: 0;   margin-left: 10px; }   @media (max-width: 570px) {     html[dir=\"rtl\"] .block-transactions #removeConfirmWrapper .inner .btn-wrapper a.wgt-sqbutton {       margin-left: 0; } }  html[dir=\"rtl\"] .block-transactions #removeConfirmWrapper .inner .btn-wrapper .select-box .select {   margin-right: 0;   margin-left: 2rem; }   html[dir=\"rtl\"] .block-transactions #removeConfirmWrapper .inner .btn-wrapper .select-box .select select {     padding-left: calc(22px + 2.2rem);     padding-right: 1rem; }   html[dir=\"rtl\"] .block-transactions #removeConfirmWrapper .inner .btn-wrapper .select-box .select:after {     left: 1rem;     right: inherit; }  ");
},{sassify:36}],110:[function(e,t,i){t.exports='{{#equal-relax removeType "room" }}\r\n    <div id="overlayer-wrapper">\r\n        <div id="removeConfirmWrapper">\r\n            <div class="inner">\r\n                <h6>{{local "account.transaction_history_title_remove"}} <a class="icon-icon_B017 remove-confirm-close"\r\n                                                                            data-opt="cancel"></a></h6>\r\n                <p class="remove-tips">\r\n                    {{local "account.transaction_history_subtitle_remove"}}\r\n                    <a href="{{ privacyUrl }}" class="underline" target="_blank">{{local "account.privacy_policy"}}</a>.\r\n                    <span style="color:#ba0c2f;">\r\n                        {{local "account.transaction_history_undo_title"}}\r\n                        {{#cancelPenalty}}\r\n                            {{#if refundprice }}\r\n                                {{#if refundpoints }}\r\n                                    {{local "checkout.previous_booking"}} {{ currency }} {{#price-format refundprice }}{{/price-format}} {{local "scratchpad.add"}} {{#num-format refundpoints \'number\'}} {{/num-format}}{{local "checkout.points"}} {{local "checkout.refund"}}\r\n                                {{else}}\r\n                                    {{local "checkout.previous_booking"}} {{ currency }} {{#price-format refundprice }}{{/price-format}} {{local "checkout.refund"}}\r\n                                {{/if}}\r\n                            {{else}}\r\n                                {{#if refundpoints }}\r\n                                    {{local "checkout.previous_booking"}} {{#num-format refundpoints }}{{/num-format}} {{local "checkout.points"}} {{local "checkout.refund"}}\r\n                                {{/if}}\r\n                            {{/if}}\r\n                        {{/cancelPenalty}}\r\n                    </span>\r\n                </p>\r\n                <div class="btn-wrapper">\r\n                    <a class="wgt-sqbutton" data-opt="cancel">{{local "general.close"}}</a>\r\n                    <a class="wgt-sqbutton-black" data-opt="remove">{{local "account.cancel_booking"}}</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n{{/equal-relax}}\r\n\r\n\r\n{{#equal-relax removeType "product" }}\r\n    <div id="overlayer-wrapper">\r\n        <div id="removeConfirmWrapper">\r\n            <div class="inner">\r\n                <h6>{{local "account.transaction_history_remove_order_title"}} <a\r\n                        class="icon-icon_B017 remove-confirm-close" data-opt="cancel"></a></h6>\r\n                <p class="remove-tips">\r\n                    {{local "account.transaction_history_remove_order_subtitle1"}} <a href="{{ privacyUrl }}"\r\n                                                                                      class="underline"\r\n                                                                                      target="_blank">{{local "account.privacy_policy"}}</a>.\r\n                    <span style="color:#ba0c2f;">{{local "account.transaction_history_cannot_undo"}}</span>\r\n                </p>\r\n                <div class="btn-wrapper">\r\n                    <div class="select-box">\r\n                        <div class="select">\r\n                            <select id="cancel-code">\r\n                                {{#each selectData}}\r\n                                    <option value="{{ code }}">{{ text }}</option>\r\n                                {{/each}}\r\n                            </select>\r\n                        </div>\r\n                        <a class="wgt-sqbutton-black" data-opt="remove"\r\n                           id="opt-remove-btn">{{local "account.cancel_booking"}}</a>\r\n                        <a class="wgt-sqbutton" data-opt="cancel" style="display: none"\r\n                           id="opt-cancel-btn">{{local "general.close"}}</a>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n{{/equal-relax}}\r\n'},{}],89:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../../abmb/stateful.js"),a=e("../assets/choose-creditcard.hbs"),o=e("../../../form/creditcard/view/creditcard-layout.js"),s=e("../model/creditcard-collection.js"),r=e("../../../form/creditcard/model/creditcard.js"),g=e("./add.js");e("../assets/choose-creditcard.sass");var d=c.CollectionView.extend({childView:o});t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(a),events:{"click #retry-layer":"retry"},ui:{retry:"#retry-wrapper",wait:"#wait-wrapper"},className:"block block-credit-card",initialize:function(e){var t=this;t.allowAdd=e&&e.allowAdd,t.loadingParent=e&&e.loadingParent||t,t.loadingParent.switchState("loading:show"),t.collection=new s,t.collection.on("sync",function(){t.loadingParent.switchState("loading:hide")}),t.collection.on("remove",function(){t.loadingParent.switchState("loading:hide")}),t.collection.on("error",function(){t.fetchError||t.loadingParent.switchState("loading:hide")}),t.collection.on("request",function(){t.loadingParent.switchState("loading:show"),t.trigger("select:card")}),t.allowAdd||t.fetch(),t.addView=new g({model:new r})},serializeData:function(){return{allowAdd:this.allowAdd}},fetch:function(){var e=this;e.allowAdd||e.collection.fetch({timeout:15e3,success:function(t){e.loadingParent.switchState("loading:hide"),e.collection=t,e.render()},error:function(){e.ui.retry.show(),e.ui.wait.hide(),e.loadingParent.switchState("loading:show"),e.fetchError=!0}}).always(function(){})},retry:function(){window.location.reload()},onRender:function(){this.collectionView=new d({collection:this.collection}),this.$el.append(this.collectionView.render().el),this.allowAdd&&(this.addView.delegateEvents(),this.$el.append(this.addView.render().el),this.collection.findWhere({display:!1})&&this.addView.add())},getSelectedCard:function(){var e=this.collectionView.collection.findWhere({Selected:!0});return e?this.collectionView.children.findByModel(e):void 0},unselectAll:function(){this.$(".exist-card").removeClass("selected"),this.$(".radio").removeClass("selected")}}))},{"../../../abmb/stateful.js":72,"../../../form/creditcard/model/creditcard.js":841,"../../../form/creditcard/view/creditcard-layout.js":844,"../assets/choose-creditcard.hbs":85,"../assets/choose-creditcard.sass":86,"../model/creditcard-collection.js":87,"./add.js":88,"backbone.marionette":6,underscore:42}],844:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../../abmb/stateful.js"),a=e("../../../form/creditcard/view/creditcard-chooseable.js");e("../../../form/creditcard/view/creditcard-editable.js"),t.exports=c.LayoutView.extend(n.extend({},l,{template:'<div><div class="creditcard-wrapper"></div></div>',regions:{content:".creditcard-wrapper"},initialize:function(e){this.setChooseView()},setChooseView:function(){var e=this;e.chooseableView=new a({model:this.model}),e.chooseableView.on("req:page-edit",function(){e.content.show(e.editableView,{preventDestroy:!0})}),e.chooseableView.on("req:page-remove",function(){e.content.show(e.removeView,{preventDestroy:!0})}),e.chooseableView.on("req:confirm-remove",function(){e.triggerMethod("confirm-remove")}),e.chooseableView.on("chosen",function(){e.triggerMethod("chosen")})},validate:function(){var e=this;return e.trigger("save:form"),jQuery("input").blur(),!!e.model.get("security_code")},onRender:function(){this.content.show(this.chooseableView,{preventDestroy:!0})}}))},{"../../../abmb/stateful.js":72,"../../../form/creditcard/view/creditcard-chooseable.js":842,"../../../form/creditcard/view/creditcard-editable.js":843,"backbone.marionette":6,underscore:42}],843:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../../abmb/stateful.js"),a=(e("backbone-validation"),e("../../../ui/validator.js")),o=e("../../../ui/util"),s=e("../assets/creditcard-editable.hbs");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(s),initialize:function(e){var t=this;a.bind(this),e&&e.editable?t.switchState("edit:editable"):t.switchState("edit:uneditable")},events:{"click #opt-update":"update","click #opt-cancel":"cancel","focusout input":"blurTips","click #opt-checked":"ifAddress"},ui:{address:".address-wrapper",error_tips:"#form-server-error"},onRender:function(){var e=this;o.country(this.ui.country,e.model.get("country"))},ifAddress:function(e){jQuery(e.target).parent().hide(),this.ui.address.show()},update:function(){var e=this;e.trigger("save:form"),e.model.isValid(!0)&&e.model.save({},{emulateForm:!0,emulateJSON:!0,success:function(t){e.model=t,e.triggerMethod("req:update")},error:function(t,i,n){e.ui.error_tips.text(o.usernotify(i18n.t(i.responseJSON[0].msg))).show()}})},cancel:function(){this.triggerMethod("req:cancel")},onShow:function(){this.render()}}))},{"../../../abmb/stateful.js":72,"../../../ui/util":2122,"../../../ui/validator.js":2123,"../assets/creditcard-editable.hbs":840,"backbone-validation":3,"backbone.marionette":6,underscore:42}],840:[function(e,t,i){t.exports='<h3 class="edit-form-head">Edit {{ type }} ending in {{ ending }}</h3>\r\n<div class="form">\r\n    <div class="field">\r\n        <label>{{local "form.cardholder_name"}}</label>\r\n        <div class="input-box">\r\n            <input id="" type="text" placeholder="Full name on the credit card" value="{{ name }}" name="name" maxlength="75"><i class="input-status"></i>\r\n        </div>\r\n        <span class="error-tip null">{{local "form_error.cardholder_name_empty"}}</span>\r\n    </div>\r\n    <div class="field">\r\n        <label>{{local "form.credit_card_number"}}</label>\r\n        <div class="input-box">\r\n            <input type="text" placeholder="0000 0000 0000 0000" value="{{ number }}" name="number" maxlength="25"><i class="input-status"></i>\r\n        </div>\r\n        <span class="error-tip null">{{local "form_error.credit_card_number_empty"}}</span>\r\n        <span class="error-tip not-null">{{local "form_error.credit_card_number_invalid"}}</span>\r\n    </div>\r\n    <div class="field">\r\n        <label>{{local "form.credit_card_expiry"}}</label>\r\n        <div class="input-box">\r\n            <input type="text" placeholder="mm/yyyy" value="{{ expire }}" name="expire" maxlength="5"><i class="input-status" ></i>\r\n        </div>\r\n        <span class="error-tip null">{{local "form_error.credit_card_expiry_empty"}}</span>\r\n        <span class="error-tip not-null">{{local "form_error.credit_card_expiry_invalid"}}</span>\r\n        <span class="error-tip not-null">{{local "form_error.credit_card_expiry_expired"}}</span>\r\n    </div>\r\n    <div class="field">\r\n        <label>{{local "form.security_code"}}</label>\r\n        <div class="input-box">\r\n            <input type="text" placeholder="xxxx" value="{{ security_code }}" name="security_code" maxlength="4"><i class="input-status"></i>\r\n        </div>\r\n        <span class="error-tip null">{{local "form_error.security_code_empty"}}</span>\r\n        <span class="error-tip not-null">{{local "form_error.security_code_invalid"}}</span>\r\n    </div>\r\n    <div class="field edit-checkbox">\r\n        <i class="checkbox" id="opt-checked"></i>\r\n        <p>Billing address is different from above</p>\r\n    </div>\r\n\r\n    <div class="address-wrapper">\r\n        <div class="field">\r\n            <label for="">{{local "form.city"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="city" placeholder="New York" name="city">\r\n                <i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip not-null"> {{local "form_error.error_invalid_city"}}</span>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        </div>\r\n        <div class="field">\r\n            <label for="">{{local "form.country_of_residence"}}</label>\r\n            <div class="input-box">\r\n                <select name="country" autocomplete="country" data-bind="country">\r\n                    <option value="">{{local "form.select"}}</option>\r\n                    <option value="{{country}}">{{country}}</option>\r\n                </select>\r\n                <i class="input-select"></i>\r\n            </div>\r\n            <span class="error-tip null"> {{local "form_error.choose_country"}}</span>\r\n        </div>\r\n        <div class="field field-half">\r\n            <label for="">{{local "form.state_province"}}</label>\r\n            <div class="input-box">\r\n                <select name="state" data-bind="state" class="__select"></select>\r\n                <!--<input type="text" data-bind="state" placeholder="SomeState" name="state">-->\r\n                <i class="input-select"></i>\r\n            </div>\r\n            <span class="error-tip not-null"> {{local "form_error.error_invalid_country"}}</span>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        </div>\r\n        <div class="field field-half field-half-right">\r\n            <label for="">{{local "form.postal_zip_code"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="postal" placeholder="NY12345" name="postal" maxlength="16">\r\n                <i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip not-null"> {{local "form_error.error_invalid_postal"}}</span>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        </div>\r\n        <div class="field">\r\n            <label for="">{{local "form.address"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="address" placeholder="Some Area Some Street" name="address">\r\n                <i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n            <span class="error-tip not-null">{{local "form_error.only_accepts_alphanumerics"}}</span>\r\n        </div>\r\n    </div>\r\n    <div class="field input-error">\r\n        <span class="error-tip" id="form-server-error">Error</span>\r\n    </div>\r\n    <div class="field">\r\n        <a class="wgt-sqbutton-black" id="opt-cancel" style="width: 49%;">CANCEL</a>\r\n        <a class="wgt-sqbutton-black" id="opt-update" style="width: 49%;">UPDATE CARD</a>\r\n    </div>\r\n</div>\r\n\r\n\r\n'},{}],842:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../../abmb/stateful.js"),a=e("../../../../../config/host.js").host,o=e("../../../ui/validator.js"),s=e("../assets/creditcard-chooseable.hbs");t.exports=c.ItemView.extend(n.extend({},l,{template:function(e){return Handlebars.compile(s)(e)},initialize:function(e){o.bind(this),this.switchState("confirm:hide"),e&&e.editable?this.switchState("edit:editable"):this.switchState("edit:uneditable")},events:{"click #opt-edit":"edit","click #opt-remove":"remove",click:"setChoose","click #opt-cancel":"cancel","click #opt-confirm":"confirm"},ui:{radio:".radio"},cancel:function(){this.switchState("confirm:hide")},confirm:function(){var e=this;e.model.collection.trigger("request"),jQuery.ajax({type:"POST",url:a+"/api/booking/checkout/deletecards",data:{TokenID:e.model.get("TokenID")}}).always(function(){e.model.collection.fetch({cache:!1})})},setChoose:function(e){if(!this.ui.radio.hasClass("selected")){var t=this;t.model.collection.trigger("request"),jQuery.ajax({type:"POST",url:a+"/api/booking/checkout/setdefault",data:{TokenID:t.model.get("TokenID")}}).always(function(){t.model.collection.fetch({cache:!1})})}},remove:function(e){e&&e.stopPropagation(),this.switchState("confirm:show")},onShow:function(){this.render()}}))},{"../../../../../config/host.js":45,"../../../abmb/stateful.js":72,"../../../ui/validator.js":2123,"../assets/creditcard-chooseable.hbs":839,"backbone.marionette":6,underscore:42}],839:[function(e,t,i){t.exports='{{#if display}}\r\n    <div class="card e-wallets bg-grey exist-card{{#if Selected }} selected{{/if}} delete-show">\r\n        <div class="position-relative e-wallets-name" style="padding-bottom: 2rem;"><i class="radio{{#if Selected }} selected{{/if}}"></i>\r\n            <div class="card-info"><img style="max-width: 54px; max-height: 36px; width: 3.8em; margin-right: 1rem; vertical-align: middle; display: inline-block;" src="{{CardIcon}}" alt=""><div class="unionpay-main">\r\n                    <h6 style="font-size: 24px">{{local "checkout.pay_with_ending_with" CardTypes CardNum}}</h6>\r\n                    <!--<p style="font-size: 2.6rem">Pay with {{CardTypes}} ending with {{CardNum}}</p>-->\r\n                    <!--<p>XXXX XXXX XXXX {{CardNum}}</p><a class="remove-trigger"\r\n                                                        id="opt-remove">{{local "account.guest_remove"}}</a>-->\r\n                </div>\r\n            </div>\r\n        </div>\r\n        {{#if Selected }}\r\n            <div class="form e-wallets-body">\r\n                <div class="field">\r\n                    <label>\r\n                        <span>{{local "form.security_code"}}</span>\r\n                        <span class="icon-icon_B008 security-tooltip">\r\n                            <div class="security-tooltip-popup">\r\n                                <div class="content">\r\n                                    <p>{{local "checkout.security_code_tooltip_header"}}</p>\r\n                                    <div><span>{{local "checkout.security_code_tooltip_visa"}}</span><img\r\n                                            src=\'/assets/img/checkout/visa_card.svg\' alt=""/></div>\r\n                                    <div><span>{{local "checkout.security_code_tooltip_amex"}}</span><img\r\n                                            src=\'/assets/img/checkout/amex_card.svg\' alt=""/></div>\r\n                                </div>\r\n                            </div>\r\n                        </span>\r\n                    </label>\r\n                    <div class="input-box">\r\n                        <input type="text" placeholder="xxxx" data-bind="security_code" name="security_code"\r\n                               maxlength="4">\r\n                        <i class="input-status"></i>\r\n                    </div>\r\n                    <span class="error-tip null">{{local "form_error.security_code_empty"}}</span>\r\n                    <span class="error-tip not-null">{{local "form_error.security_code_invalid"}}</span>\r\n                </div>\r\n            </div>\r\n        {{/if}}\r\n        <div class="delete-info">\r\n            <div class="delete-content"><span class="icon-icon_J003" style="font-size: 3em;\r\n    margin-left: 2rem;"></span>\r\n                <p>{{local \'account.remove_credit_card_tip\'}}</p>\r\n            </div>\r\n            <div class="buttons">\r\n                <a class="wgt-sqbutton-white credit-button" href="javascript:void(0);"\r\n                   id="opt-cancel">{{local \'general.cancel\'}}</a>\r\n                <a class="wgt-sqbutton credit-button" href="javascript:void(0);"\r\n                   id="opt-confirm">{{local \'general.confirm\'}}</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n{{/if}}'},{}],88:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=(e("backbone-validation"),e("../../../abmb/stateful.js")),a=e("../../../ui/validator.js"),o=e("../../../ui/util"),s=e("../assets/add.hbs"),r=e("moment");e("underscore.string/sprintf"),t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(s),initialize:function(){this.switchState("form:hide"),a.bind(this)},events:{"blur [data-bind=expire]":"onLeaveExpiry",click:"add","click #opt-save":"save","click #opt-cancel":"cancel"},add:function(){this.trigger("form-show"),this.$el.hide()},ui:{errorTips:"#error-tips",addForm:".form"},onLeaveExpiry:function(e){var t=jQuery(e.target);"no"!=t.data("validate-expire")&&this.model.isValid("expire",t.val())&&t.closest(".field")[r(t.val(),"MM/YY")>=r()?"removeClass":"addClass"]("input-error date_expire")},validate:function(){var e=this;return e.trigger("save:form"),e.model.isValid(!0)},save:function(){var e=this;e.trigger("save:form"),e.model.isValid(!0)&&e.model.save({},{emulateForm:!0,emulateJSON:!0,success:function(t,i){e.triggerMethod("req:save-success",i)},error:function(t,i){e.ui.errorTips.html(o.usernotify(i18n.t(i.msg)))}})},cancel:function(){this.$el.show(),this.hideForm()},hideForm:function(){this.trigger("form-hide"),this.switchState("form:hide")},toggleState:function(){"show"==this.getState("form")?this.switchState("form:hide"):this.switchState("form:show")}}))},{"../../../abmb/stateful.js":72,"../../../ui/util":2122,"../../../ui/validator.js":2123,"../assets/add.hbs":84,"backbone-validation":3,"backbone.marionette":6,moment:16,underscore:42,"underscore.string/sprintf":41}],87:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../form/creditcard/model/creditcard.js"),a=e("../../../../../config/host.js").host;t.exports=c.Collection.extend({url:function(){return a+"/api/booking/checkout/getcards"},parse:function(e){return e&&0!=e.length?n.map(e,function(e){return e.display=!0,e}):[new l({display:!1})]},model:l})},{"../../../../../config/host.js":45,"../../../form/creditcard/model/creditcard.js":841,backbone:8,underscore:42}],841:[function(e,t,i){var n=(e("underscore"),e("backbone"));t.exports=n.Model.extend({parse:function(e){return e},defaults:{number:"",name:"",expire:"",security_code:"",primary:""},validation:{name:{required:!0,maxLength:75},number:{required:!0,minLength:14,maxLength:25},expire:{pattern:/^(0[1-9]|1[0-2])\/?([0-9]{4}|[0-9]{2})$/,required:!0,maxLength:5},security_code:{required:!0,maxLength:4}}})},{backbone:8,underscore:42}],86:[function(e,t,i){t.exports=e("sassify")(".block-credit-card #form-server-error {   display: none; }  .block-credit-card .address-wrapper {   display: none; }  .block-credit-card .creditcard-wrapper {   margin-top: 10px; }   .block-credit-card .creditcard-wrapper .form .field .input-box {     width: 18rem; }   .block-credit-card .creditcard-wrapper .edit-form-head {     font-size: 3.8rem;     padding: 20px 0;     position: relative;     text-indent: 4rem; }   .block-credit-card .creditcard-wrapper .confirm-show .delete-show .delete-info {     display: block; }   .block-credit-card .creditcard-wrapper .confirm-hide .delete-show .delete-info {     display: none; }  .block-credit-card .detail-payment-item {   background-color: gray; }   .block-credit-card .detail-payment-item > div {     margin-top: 1rem; }   .block-credit-card .detail-payment-item p {     line-height: 1.3em; }   .block-credit-card .detail-payment-item i.icon {     display: inline-block;     vertical-align: middle;     width: 3rem;     height: 3rem;     background-color: wheat; }   .block-credit-card .detail-payment-item i.checkbox, .block-credit-card .detail-payment-item i.add, .block-credit-card .detail-payment-item a.detail-edit {     font-size: 1.8rem;     z-index: 2;     position: absolute;     top: 20px;     right: 0; }  .block-credit-card .detail-payment-item, .block-credit-card .detail-guests-item {   padding: 2rem 1.5rem 2rem 4rem;   position: relative;   margin-bottom: 2rem; }   .block-credit-card .detail-payment-item h6, .block-credit-card .detail-guests-item h6 {     line-height: 1.4em;     display: inline-block;     vertical-align: middle; }  .block-credit-card .form-show .form {   display: block; }  .block-credit-card .form-show #opt-add {   display: none; }  .block-credit-card .form-hide .form {   display: none; }  .block-credit-card .form-hide #opt-add {   display: block; }  .block-credit-card .edit-checkbox p {   display: inline-block;   vertical-align: middle;   line-height: 2em;   margin-left: 1rem; }  ")},{sassify:36}],85:[function(e,t,i){t.exports='\r\n<!--{{#if allowAdd}}-->\r\n    <!--<h4>{{local "checkout.pay_info"}}</h4>-->\r\n<!--{{else}}-->\r\n<!--<h3 class="block-head accordion-trigger">{{local \'account.choose_primary_credit_card\'}}</h3>-->\r\n<!--{{/if}}-->\r\n<!--<div class="loading-block">-->\r\n    <!--<p id="wait-wrapper" class="loading-gif"></p>-->\r\n    <!--<p id="retry-wrapper" style="display: none;">Network issue, please reload the page<a href="javascript:window.location.reload();">Retry</a></p>-->\r\n<!--</div>-->'},{}],84:[function(e,t,i){t.exports='<div class="card e-wallets bg-grey creditcard-payment">\r\n    <div class="position-relative e-wallets-name"><i class="radio"></i>\r\n        <div class="card-info"><img style="max-width: 54px; max-height: 36px; width: 3.8em; margin-right: 1rem; vertical-align: middle; display: inline-block;" src="/assets/img/checkout/card/png/icon-cc.png"\r\n        ><h6 style="font-size: 24px;">{{local "checkout.pay_with_new_card"}}</h6>\r\n        </div>\r\n    </div>\r\n    <div class="e-wallets-body" style="white-space: nowrap; cursor: pointer;"><span style="max-width: 54px; width: 3.8em; margin-right: 1rem; vertical-align: middle; display: inline-block;"></span><ul class="e-wallets-list"  style="white-space: normal;">\r\n            <li class="icon-visa" data-card-bank="visa"></li>\r\n            <li class="icon-master" data-card-bank="master"></li>\r\n            <li class="icon-discover" data-card-bank="discover"></li>\r\n            <!--<li class="icon-cirrus" data-card-bank="cirrus"></li>-->\r\n            <li class="icon-maestro" data-card-bank="maestro"></li>\r\n            <li class="icon-jcb" data-card-bank="jcb"></li>\r\n            <li class="icon-diners" data-card-bank="diners"></li>\r\n            <li class="icon-amex" data-card-bank="amex"></li>\r\n        </ul>\r\n    </div>\r\n</div>'},{}],2108:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("backbone-validation"),a=e("./template.hbs"),o=e("./model.js"),s=e("../util");e("../../handlebar/helper.js");t=t.exports=c.ItemView.extend(n.extend({},{template:Handlebars.compile(a),className:"passwordui-wrapper",events:{"click .password-input-box a":"onShowClick","focusout input":"validate"},ui:{wrapper:".field",password:"input",strength:".password-status span",show:".input-show",success:".success-tip p",error:".error-tip.not-null span"},initialize:function(e){var t=this;t.model=new o(n.reduce("name value label placeholder validatestrength required errortip successtip maxlength nullerror errorkeyprefix ism4b".split(" "),function(e,i){
var n=t.$el.data("passwordui-"+i);return"undefined"!=jQuery.type(n)&&(e[i]=n),e},{})),e&&e.bind&&t.model.on("change:value",function(){e.bind.model.set(e.bind.attribute,t.model.get("value"))}),e&&e.onInput&&t.delegateEvents(n.extend({"keyup input":n.debounce(t.validate)},t.events)),l.bind(t)},validateAndGetValue:function(){return this.validate().getValue()},getValue:function(){return this.model.get("value")},setValue:function(e){return this.ui.password.val(e),this.validate()},focus:function(){return this.ui.password.focus(),this},setEnabled:function(e){return this.ui.password.prop("disabled",!e),this},onShowClick:function(e){var t="password"!=this.ui.password.attr("type");this.ui.password.attr("type",t?"password":"text"),this.ui.show.attr("data-show",!!t)},validate:function(){var e=this,t=e.ui.password.val(),i=e.model.preValidate("value",t),n=o.isStrongPassword(t);return s.isM4B()&&(e.ui.password.val(e.ui.password.val().trim()),t=e.ui.password.val()),e.ui.success.text(i?"":e.model.get("successtip")),e.ui.wrapper.removeClass("input-error null not-null"),e.ui.wrapper.addClass(i?"input-error "+(t?"not-null":"null"):""),e.ui.error.html(e.model.get("errortip")||i18n.t(e.model.get("errorkeyprefix")+i)),e.ui.strength.html(i18n.t("form_error.password_"+(n?"strong":"weak")))[n?"removeClass":"addClass"]("password-weak"),e.model.set({value:i?"":t}),e.trigger("validate"),e.$el.find(".notice").hide(),this}}))},{"../../handlebar/helper.js":1025,"../util":2122,"./model.js":2106,"./template.hbs":2107,"backbone-validation":3,"backbone.marionette":6,underscore:42}],2107:[function(e,t,i){t.exports='<form>\r\n<div class="field">\r\n    <div class="clearfix password-status">\r\n        {{#if validatestrength}}<p>{{local "form.password_status"}} <span></span></p>{{/if}}\r\n		<label>{{label}}</label>\r\n    </div>\r\n    <div class="input-box password-input-box">\r\n        <input name="{{name}}" type="password" placeholder="{{placeholder}}" value="{{value}}"{{#if maxlength}} maxlength="{{maxlength}}"{{/if}}>\r\n        <a class="input-show" data-show="true">\r\n            <span class="show icon-icon_K003"></span>\r\n            <span class="hide icon-icon_K002"></span>\r\n            <span class="show description ">{{local "general.show"}}</span>\r\n            <span class="hide description">{{local "general.hide"}}</span>\r\n        </a>\r\n    </div>\r\n	<div class="clearfix password-status success-tip"><p></p></div>\r\n    {{#if ism4b}}\r\n        <div class="error-tip null">\r\n            <i class="icon-icon_I010"></i>\r\n            <span>{{nullerror}}</span>\r\n        </div>\r\n        <div class="error-tip not-null">\r\n            <i class="icon-icon_I010"></i>\r\n            <span></span>\r\n        </div>\r\n        <div class="error-tip notice">\r\n            <i class="icon-icon_B015"></i>\r\n            <span></span>\r\n        </div>\r\n    {{else}}\r\n        <span class="error-tip null">{{nullerror}}</span>\r\n        <span class="error-tip not-null"><span></span></span>\r\n    {{/if}}\r\n\r\n</div>\r\n</form>'},{}],2106:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../validator");t=t.exports=n.Model.extend({defaults:{name:"password",value:"",label:i18n.t("general.password"),placeholder:i18n.t("general.password"),nullerror:i18n.t("form_error.cannot_be_empty"),validatestrength:!0,required:!0,errortip:"",successtip:"",maxlength:20,errorkeyprefix:"form_error.error_password_",ism4b:!1},validation:{value:function(e){return!e&&"null"||e.length<8&&"length"||!/[0-9]/.test(e)&&"number"||!(/[a-z]/i.test(e)&&/[0-9]/.test(e))&&"letters_numbers"||!c.patterns.keyboard.test(e)&&"must_contain"}}},{isStrongPassword:function(e){return/[A-Z]/.test(e)&&/[a-z]/.test(e)&&/[0-9]/.test(e)}})},{"../validator":2123,backbone:8,underscore:42}],1025:[function(e,t,i){var n=e("underscore"),c=e("../ui/util"),l=e("moment"),a=function(e){var e=c.args(e);return e.options=e.pop(),e};Handlebars.registerHelper("media",function(e,t){return e.indexOf(".")>-1?c.getStaticMedia(e.split(".")[0],e.split(".")[1]):c.getStaticMedia(e,t)}),Handlebars.registerHelper("mediaUrl",function(e,t){return e.indexOf(".")>-1?c.getStaticMediaUrl(e.split(".")[0],e.split(".")[1]):c.getStaticMediaUrl(e,t)}),Handlebars.registerHelper("mediaAlt",function(e,t){return e.indexOf(".")>-1?c.getStaticMediaAlt(e.split(".")[0],e.split(".")[1]):c.getStaticMediaAlt(e,t)}),Handlebars.registerHelper("local",function(e){var t=a(arguments);return new Handlebars.SafeString(i18n.t(e).replace(/\{(\d+)\}/g,function(e,i){return t[1+parseInt(i)]}))}),Handlebars.registerHelper("local-replace",function(e,t){return new Handlebars.SafeString(i18n.t(e).replace("{0}",t))}),Handlebars.registerHelper("date",function(e){return"number"==typeof e?l.unix(e).format(c.getDateFormat()):l(e).format(c.getDateFormat())}),Handlebars.registerHelper("date-with-format",function(e,t){return"number"==typeof e?l.unix(e).format(t):l(e).format(t)}),Handlebars.registerHelper("math-sum",function(e,t){return e+t}),Handlebars.registerHelper("equal",function(e,t,i){return i[e==t?"fn":"inverse"](this)}),Handlebars.registerHelper("not-equal",function(e,t,i){return i[e!=t?"fn":"inverse"](this)}),Handlebars.registerHelper("more-than",function(e,t,i){return i[e>t?"fn":"inverse"](this)}),Handlebars.registerHelper("gte",function(e,t,i){return i[e>=t?"fn":"inverse"](this)}),Handlebars.registerHelper("less-than",function(e,t,i){return i[t>e?"fn":"inverse"](this)}),Handlebars.registerHelper("lte",function(e,t,i){return i[t>=e?"fn":"inverse"](this)}),Handlebars.registerHelper("equal-relax",function(e,t,i){return i[e==t?"fn":"inverse"](this)}),Handlebars.registerHelper("not-equal-relax",function(e,t,i){return i[e!=t?"fn":"inverse"](this)}),Handlebars.registerHelper("compare",function(e,t,i){return i[e==t?"fn":"inverse"](this)}),Handlebars.registerHelper("or",function(e,t,i,n){return n[e==t||e==i?"fn":"inverse"](this)}),Handlebars.registerHelper("contains",function(e,t,i){return i[n.contains(e,t)?"fn":"inverse"](this)}),Handlebars.registerHelper("any",function(){return a(arguments).options[n.any(optargs(arguments))?"fn":"inverse"](this)}),Handlebars.registerHelper("all",function(){return a(arguments).options[n.all(optargs(arguments))?"fn":"inverse"](this)}),Handlebars.registerHelper("from",function(e,t,i){var l=c.args(arguments),a=l.pop();return n.range(l.shift(),l.pop()+1).map(function(e){return a[0==l.length||e<=Math.round(l[0])?"fn":"inverse"](this)}).join("")}),Handlebars.registerHelper("_",function(){var e=c.args(arguments),t=(e.pop(),e.shift());return e.options[n[t].apply(n,e)?"fn":"inverse"](this)}),Handlebars.registerHelper("upper",function(e){return String(e).toUpperCase()}),Handlebars.registerHelper("lower",function(e){return String(e).toLowerCase()}),Handlebars.registerHelper("for",function(e,t,i,n){for(var c="",l=e;t>=l;l+=i)c+=n.fn(l);return c}),Handlebars.registerHelper("num-format",function(e,t){try{return accounting.formatNumber(e)}catch(i){return e}}),Handlebars.registerHelper("price-format",function(e){try{return accounting.formatNumber(e,2)}catch(t){return e}}),Handlebars.registerHelper("rc-price-format",function(e){if(e.toString().length>=10){e=e.toString().split(".")[0];try{return accounting.formatNumber(e)}catch(t){return e}}else try{return accounting.formatNumber(e,2)}catch(t){return e}}),Handlebars.registerHelper("encode",function(e){return encodeURI(e)}),Handlebars.registerHelper("show-date-format",function(e,t){try{var i="number"===e?l.unix(e):l(e);return t&&n.isString(t)?i.format(t):i.format(c.getDateFormat())}catch(a){return e}}),Handlebars.registerHelper("absolute-value",function(e){try{return Math.abs(e)}catch(t){return e}}),Handlebars.registerHelper("isLoggedIn",function(e){return c.isloggedin()?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("ifCond",function(e,t,i,n){switch(t){case"!=":return e!=i?n.fn(this):n.inverse(this);case"==":return e==i?n.fn(this):n.inverse(this);case"===":return e===i?n.fn(this):n.inverse(this);case"!==":return e!==i?n.fn(this):n.inverse(this);case"<":return i>e?n.fn(this):n.inverse(this);case"<=":return i>=e?n.fn(this):n.inverse(this);case">":return e>i?n.fn(this):n.inverse(this);case">=":return e>=i?n.fn(this):n.inverse(this);case"&&":return e&&i?n.fn(this):n.inverse(this);case"||":return e||i?n.fn(this):n.inverse(this);case"isArray":return Array.isArray(e)?n.fn(this):n.inverse(this);case"isObject":return"object"==typeof e?n.fn(this):n.inverse(this);default:return n.inverse(this)}}),Handlebars.registerHelper("ifMena",function(e,t,i,n){switch(t){case"!=":return e!=i?n.fn(this):n.inverse(this);case"==":return e==i?n.fn(this):n.inverse(this);default:return n.inverse(this)}}),Handlebars.registerHelper("debug",function(e){}),Handlebars.registerHelper("specialSymbolFix",function(e){return e.replace(/m²/gi,'m<span style="vertical-align: super">2</span>')}),Handlebars.registerHelper("isDisplayable",function(e,t){return"number"==typeof e&&(e=e.toString()),"string"==typeof e&&e.trim()?t.fn(this):t.inverse(this)})},{"../ui/util":2122,moment:16,underscore:42}],78:[function(e,t,i){var n=e("underscore"),c=e("../../abmb/stateful.js"),l=e("backbone.marionette"),a=e("./template.hbs"),o=e("./choose/view.js"),s=e("./collection.js"),r=e("../../form/guest/view/guest-add.js");t.exports=l.ItemView.extend(n.extend({},c,{template:Handlebars.compile(a),className:"block block-account",initialize:function(e){var t=this;t.isForCheckOut=e&&e.isForCheckOut,t.chooseGuest=new o({collection:new s,isForCheckOut:t.isForCheckOut}),t.guestAdd=new r({isForCheckOut:t.isForCheckOut}),t.guestAdd.on("guest:added",function(e){t.chooseGuest.collection.fetch({reset:!0})})},onRender:function(){var e=this;e.isForCheckOut&&e.$("h3").hide(),e.$el.append(e.chooseGuest.render().el,e.guestAdd.render().el),e.chooseGuest.collection.fetch()}}))},{"../../abmb/stateful.js":72,"../../form/guest/view/guest-add.js":855,"./choose/view.js":75,"./collection.js":76,"./template.hbs":77,"backbone.marionette":6,underscore:42}],855:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../../abmb/stateful.js"),a=e("../assets/guest-add.hbs"),o=(e("../assets/guest-add.sass"),e("backbone-validation"),e("../model/guest.js")),s=e("../../../ui/date3selects/view"),r=e("../../../ui/util"),g=e("../../../form/address/view"),d=e("../../../checkout/model/view-event.js"),I=e("../../../ui/validator.js"),b=e("../avatar/view"),C=e("../../../profile-page2.0/page-public/view");t.exports=c.ItemView.extend(n.extend({},l,{template:Handlebars.compile(a),className:"guest-add detail-guests-new",ui:{title:"[data-bind=title]",gender:"[data-bind=gender]",country:"[data-bind=country]",guest:".guest-add",dobbinder:"[data-bind-to=birthday]",dob:"input[data-bind=birthday]",error:".invalid-form>span.error-tip",formWrapper:".detail-edit-controller .form",city:"[data-bind=city]",province:"[data-bind=state],[data-bind=province]",postcode:"[data-bind=postal]",address:"[data-bind=address]",guestImg:".avatar",btn:".save-btn"},events:{"click     .add-btn":"onAddBtn","click     .save-btn":"onFormSave","click     .cancel-btn":"onFormCancel",'click [data-opt="opt-select-checkbox"]':"selectCheckBox"},modelEvents:{change:"modelChanged"},modelChanged:function(){var e=this;0!=e.$("[data-bind]").length&&e.$("[data-bind]").length-e.$("[data-bind]").parents(".pass").length<=2&&(e.trigger("save:form"),e.model.isValid(!0)?e.ui.btn.removeClass("wgt-sqbutton-defalut"):e.ui.btn.addClass("wgt-sqbutton-defalut"))},initialize:function(e){var t=this;t.model=new o,t.switchState("form:hide"),t.$el.addClass(t.className),t.model.set("guestImg",e&&e.guestImg),t.model.set("isForCheckOut",e&&e.isForCheckOut),t.model.set("noBirthday",e&&(e.noBirthday||e.isForCheckOut))},onRender:function(){var e=this;e.model.set("inviteGuest",e.$el.find("[data-bind=inviteGuest]").hasClass("checked")),e.model.get("guestImg")&&(e.avatar=new b({el:e.ui.guestImg})),e.addressView=new g({formView:e,countryDropDown:e.ui.country,addressInput:e.ui.address,cityInput:e.ui.city,provinceInput:e.ui.province,postcodeInput:e.ui.postcode}),s.autoCreate(e.ui.dobbinder),r.titlegender(this.ui.title,this.ui.gender),r.country(this.ui.country,e.model.get("country")),this.options&&(this.options.noBirthday||this.options.isForCheckOut)&&e.model&&e.model.validation&&(e.model.validation.birthday={required:!1}),I.bind(e,{onInput:!0})},reset:function(){this.model.set("birthday","null"),this.model.get("avatarurl")&&this.model.set("avatarurl",""),this.model.get("baseImg")&&this.model.set("baseImg",""),this.render(),this.$("[data-bind]").val(""),this.$(".input-error").removeClass("input-error"),this.$("[data-bind]").parents(".field").removeClass("pass"),this.ui.btn.addClass("wgt-sqbutton-defalut"),this.avatar.reset()},onAddBtn:function(){this.switchState("form:show"),this.triggerMethod("open:add")},onFormCancel:function(){this.switchState("form:hide"),this.trigger("form-hide"),this.reset()},onFormSave:function(){var e=this;if(e.trigger("save:form"),e.model.isValid()){if(e.model.get("birthday")||e.model.set("birthday","01/01/1900"),e.ui.guestImg.find(".avatar-img").attr("data-id")){var t=e.ui.guestImg.find(".avatar-img").attr("data-id");e.model.set("avatarurl",t)}else{var i=e.ui.guestImg.find(".avatar-img").attr("src");if(i){var n=i.indexOf("base64,")+7;i=i.substring(n,i.length),e.model.set("baseImg",i)}}e.model.set("phone",e.model.get("phone").replace("+","")),r.loading({errortimeout:5e3,showerror:!1,container:e.el,promise:e.model.save({},{emulateForm:!0,emulateJSON:!0,success:function(t,i){e.switchState("form:hide"),e.triggerMethod("guest:added",e.model),e.reset(),d.trigger("guest_view:change","default"),jQuery("html, body").animate({scrollTop:0},{duration:500,easing:"swing"})},error:function(t,i){var n=i.responseJSON.msg,t={type:1,status:"false",content:n};e.pagePublic=new C({el:jQuery(".publicTip"),config:t}).render()}})})}}}))},{"../../../abmb/stateful.js":72,"../../../checkout/model/view-event.js":670,"../../../form/address/view":838,"../../../profile-page2.0/page-public/view":1747,"../../../ui/date3selects/view":2071,"../../../ui/util":2122,"../../../ui/validator.js":2123,"../assets/guest-add.hbs":845,"../assets/guest-add.sass":846,"../avatar/view":853,"../model/guest.js":854,"backbone-validation":3,"backbone.marionette":6,underscore:42}],846:[function(e,t,i){t.exports=e("sassify")("/**  *  * @param { 300 | bold } $font-weight  * @param { normal     } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal           } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { 300 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { normal } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ .guest-add .form-wrapper {   background-color: #ffffff;   padding: 40px; }   .guest-add .form-wrapper .wgt-sqbutton-defalut {     cursor: not-allowed;     background: #868686;     border-color: #868686;     color: #fff; }   .guest-add .form-wrapper .form-head {     font-size: 2.2rem;     display: inline-block;     margin-right: 2rem;     margin-bottom: 2rem;     font-family: 'Whitney', Helvetica, sans-serif;     font-weight: bold; }   .guest-add .form-wrapper .form-head-note {     font-size: 1.6rem;     font-family: 'Whitney', Helvetica, sans-serif;     font-weight: 500; }  .guest-add.form-hide .add-guest {   display: block; }  .guest-add.form-hide .form-wrapper {   display: none; }  .guest-add.form-show .add-guest {   display: none; }  .guest-add.form-show .form-wrapper {   display: block; }   .guest-add.form-show .form-wrapper .invalid-form span.error-tip {     display: block; }  @media (max-width: 768px) {   .guest-add .form-wrapper {     padding: 40px 15px; }     .guest-add .form-wrapper .form-head {       font-size: 1.6rem;       font-family: 'Whitney', Helvetica, sans-serif;       font-weight: bold;       margin: 0; }     .guest-add .form-wrapper .form-head-note {       display: none; }     .guest-add .form-wrapper .form .field label {       font-size: 1.2rem; }     .guest-add .form-wrapper .form .field select, .guest-add .form-wrapper .form .field a, .guest-add .form-wrapper .form .field input, .guest-add .form-wrapper .form .field textarea {       height: 3.4rem;       line-height: 3.4rem;       font-size: 1.2rem;       margin-top: 0;       margin-bottom: 0; }     .guest-add .form-wrapper .form .field a {       height: 4rem;       line-height: 4rem; } }  ");
},{sassify:36}],845:[function(e,t,i){t.exports='<div class="card bg-white add-guest"><i class="add add-btn"></i>\r\n    <div class="card-info">\r\n        <span class="icon-icon_I008"></span>\r\n        <h6>{{local "account.add_new_guest"}}</h6>\r\n    </div>\r\n</div>\r\n<div class="form-wrapper">\r\n    <h4 class="form-head">{{local "account.add_new_guest"}}</h4>\r\n    <div class="form-head-note">{{local "account.information_must_be_english"}}</div>\r\n    <form>\r\n    <div class="form guest-add-form">\r\n        <div class="avatar"></div>\r\n        <!--<div class="field" style= "display: none;">-->\r\n            <!--<label for="">{{local "form.existing_loyalty_number"}}</label>-->\r\n            <!--<div class="input-box">-->\r\n                <!--<input type="text" data-bind="loyalty_id" placeholder="{{local \'checkout.guest_loyalty_number_placeholder\'}}" name="loyalty_id" maxlength=\'20\'>-->\r\n                <!--<i class="input-status"></i>-->\r\n            <!--</div>-->\r\n            <!--<span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>-->\r\n            <!--<span class="error-tip not-null"> {{local "form_error.invalid_confirmation_number"}}</span>-->\r\n        <!--</div>-->\r\n        <div class="field field-half">\r\n            <label for="">{{local "form.title"}}</label>\r\n            <div class="input-box">\r\n                <select data-bind="title" name="title"></select>\r\n                <i class="input-select"></i>\r\n            </div>\r\n            <span class="error-tip null"> {{local "form_error.choose_title"}}</span>\r\n        </div>\r\n        <div class="field field-half field-half-right">\r\n            <label for="">{{local "form.gender"}}</label>\r\n            <div class="input-box">\r\n                <select data-bind="gender" name="title"></select>\r\n                <i class="input-select"></i>\r\n            </div>\r\n            <span class="error-tip null"> {{local "form_error.choose_gender"}}</span>\r\n        </div>\r\n        <div class="field">\r\n            <label for="">{{local "form.first_name"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="first_name" placeholder="{{local \'checkout.guest_first_name_placeholder\'}}" name="first_name" maxlength=\'254\' autocomplete="given-name">\r\n                <i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip not-null"> {{local "form_error.only_accepts_latin"}}</span>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        </div>\r\n        <div class="field">\r\n            <label for="">{{local "form.last_name"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="last_name" placeholder="{{local \'checkout.guest_last_name_placeholder\'}}" name="last_name" maxlength=\'254\' autocomplete="family-name">\r\n                <i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip not-null"> {{local "form_error.only_accepts_latin"}}</span>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        </div>\r\n        <div class="field">\r\n            <label>{{local "form.phone"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="phone" placeholder="{{local \'form.phone\'}}" name="phone" maxlength=15 ><i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n            <span class="error-tip not-null"> {{local "form_error.invalid_phone"}}</span>\r\n        </div>\r\n        <div class="field">\r\n            <label>{{local "form.secondary_phone"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="secondaryphone" placeholder="{{local \'form.secondary_phone\'}}"\r\n                       name="secondaryphone" maxlength="15"><i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n            <span class="error-tip not-null"> {{local "form_error.invalid_phone"}}</span>\r\n        </div>\r\n        {{#unless noBirthday}}\r\n        <div class="field field-third">\r\n            <label>{{local "form.date_of_birth"}}</label>\r\n            <div data-component="date3selects" data-bind-to="birthday" data-parent-container="true"></div>\r\n            <span class="error-tip null">{{local "form_error.cannot_be_empty"}}</span>\r\n            <span data-content-key-prefix="error_birthdate_" class="error-tip not-null"> </span>\r\n        </div>\r\n        {{/unless}}\r\n        <div class="field">\r\n            <label for="">{{local "form.email_address"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="email" placeholder="{{local \'form.email_placeholder\'}}" name="address" autocomplete="email" maxlength="254">\r\n                <i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip not-null"> {{local "form_error.invalid_email"}}</span>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        </div>\r\n        <div class="field">\r\n            <label for="">{{local "form.country_of_residence"}}</label>\r\n            <div class="input-box">\r\n                <select data-bind="country" name="country" autocomplete="country">\r\n                    <option value="">{{local "form.select"}}</option>\r\n                    <option value="{{country}}">{{country}}</option>\r\n                </select>\r\n                <i class="input-select"></i>\r\n            </div>\r\n            <span class="error-tip null"> {{local "form_error.choose_country"}}</span>\r\n        </div>\r\n        <div class="field">\r\n            <label for="">{{local "form.address"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="address" placeholder="{{local \'form.address_placeholder\'}}" name="address" maxlength="254" autocomplete="street-address">\r\n                <i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n            <span class="error-tip not-null">{{local "form_error.only_accepts_alphanumerics"}}</span>\r\n        </div>\r\n        <div class="field">\r\n            <label for="">{{local "form.city"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="city" placeholder="{{local \'form.city_placeholder\'}}" name="city" maxlength=\'254\' autocomplete="city">\r\n                <i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip not-null"> {{local "form_error.error_invalid_city"}}</span>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        </div>\r\n        <div class="field field-half">\r\n            <label for="">{{local "form.state_province"}}</label>\r\n            <div class="input-box">\r\n                <select name="state" data-bind="state" class="__select"></select>\r\n                <!--<input type="text" data-bind="state" placeholder="{{local \'form.state_province_placeholder\'}}" name="state" maxlength=\'254\' autocomplete="administrative-area">-->\r\n                <i class="input-select"></i>\r\n            </div>\r\n            <span class="error-tip not-null"> {{local "form_error.error_invalid_country"}}</span>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        </div>\r\n        <div class="field field-half field-half-right">\r\n            <label for="">{{local "form.postal_zip_code"}}</label>\r\n            <div class="input-box">\r\n                <input type="text" data-bind="postal" placeholder="{{local \'form.postal_zip_code_placeholder\'}}" name="postal" maxlength=\'16\' autocomplete="postal-code">\r\n                <i class="input-status"></i>\r\n            </div>\r\n            <span class="error-tip not-null"> {{local "form_error.error_invalid_postal"}}</span>\r\n            <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        </div>\r\n        <!--<div class="field checkbox-container" style="display: none">-->\r\n            <!--<i data-bind="inviteGuest" class="checkbox checked"></i>-->\r\n            <!--<label class="checkbox-label">{{local "form.invite_guest_to_join"}}</label>-->\r\n        <!--</div>-->\r\n        <div class="field">\r\n            <a class="wgt-sqbutton-defalut wgt-sqbutton-black save-btn">{{local "form.save_guest"}}</a>\r\n        </div>\r\n        <div class="field">\r\n            <a class="wgt-sqbutton-dark cancel-btn">{{local "form.cancel"}}</a>\r\n        </div>\r\n\r\n\r\n    </div>\r\n    </form>\r\n</div>'},{}],77:[function(e,t,i){t.exports='<h3 class="block-head accordion-trigger">{{local "account.manage_accounts"}}</h3>\r\n\r\n'},{}],76:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("../../form/guest/model/guest.js"),l=e("../../../../config/host.js");t.exports=n.Collection.extend({model:c,url:l.host+"/api/account/guest",fetch:function(e){return e=e||{},e.cache=!1,n.Collection.prototype.fetch.call(this,e)}})},{"../../../../config/host.js":45,"../../form/guest/model/guest.js":854,backbone:8,underscore:42}],854:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=(e("moment"),e("../../../../../config/host.js")),a=e("../../../ui/validator.js"),o=e("../../../../../data/country.json"),s=(a.latinNumericsSymbols,a.alphaNumerics2,a.latinRegex3);t.exports=c.Model.extend({urlRoot:l.getURL("api","account/guest"),defaults:{id:null,loyalty_id:void 0,title:void 0,gender:void 0,first_name:void 0,last_name:void 0,other_first_name:void 0,other_last_name:void 0,birthday:void 0,email:void 0,address:void 0,city:void 0,country:void 0,state:void 0,postal:void 0,__otherGuest:!1,inviteGuest:!1},initialize:function(){var e=jQuery.cookie("client_country"),t=n.find(o,function(t){return t.key.indexOf("("+e+")")>-1});!this.get("country")&&t&&this.set("country",t.key)},validation:{first_name:function(e){return this.get("__otherGuest")||e&&e.trim()&&s.test(e)?void 0:"error"},last_name:function(e){return this.get("__otherGuest")||e&&e.trim()&&s.test(e)?void 0:"error"},other_first_name:function(e){return!this.get("__otherGuest")||e&&e.trim()&&s.test(e)?void 0:"error"},other_last_name:function(e){return!this.get("__otherGuest")||e&&e.trim()&&s.test(e)?void 0:"error"},email:{pattern:"email"},title:{required:!0},gender:{required:!0},phone:{required:!0,pattern:/^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/},address:{required:!0},country:{required:!0},city:{required:!0},state:{required:!0},postal:{required:!1},birthday:function(e){return a.validators.date(e,18)}},transformFirstLastName:function(){}})},{"../../../../../config/host.js":45,"../../../../../data/country.json":47,"../../../ui/validator.js":2123,backbone:8,moment:16,underscore:42}],75:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../../abmb/stateful.js"),a=e("./../view/guest-wrapper.js"),o=e("../../../checkout/model/view-event.js"),s=e("./template.hbs");t.exports=c.CollectionView.extend(n.extend({},l,{className:"choose-guest",template:Handlebars.compile(s),childView:a,collectionEvents:{"change:primary":"onPrimaryChange",request:"onRequest",sync:"onSync",error:"onError"},initialize:function(e){var t=this;t.childViewOptions=e,t.isForCheckOut=e&&e.isForCheckOut,t.on("remove:child",function(e){t.switchState("loading:hide")})},onBeforeRender:function(){html=c.Renderer.render(this.template,{isForCheckOut:this.isForCheckOut},this),this.$el.html(html)},onPrimaryChange:function(){var e=this;e.collection.fetch({reset:!0}).then(function(){o.trigger("guest_view:change","default")})},onRequest:function(){var e=this;e.switchState("loading:show")},onSync:function(){var e=this;e.switchState("loading:hide")},onError:function(){var e=this;e.switchState("loading:hide")}}))},{"../../../abmb/stateful.js":72,"../../../checkout/model/view-event.js":670,"./../view/guest-wrapper.js":80,"./template.hbs":74,"backbone.marionette":6,underscore:42}],670:[function(e,t,i){arguments[4][649][0].apply(i,arguments)},{backbone:8,dup:649,underscore:42}],649:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l={};n.extend(l,c.Events),t.exports=l},{backbone:8,underscore:42}],80:[function(e,t,i){var n=(e("underscore"),e("backbone.Marionette")),c=e("../assets/guest-wrapper.hbs"),l=e("./guest-choose.js"),a=e("../../../form/guest/view/guest-edit.js");Handlebars.registerHelper("stringJoin",function(e){var t=Array.prototype.slice.call(arguments,1,-1);return t.filter(function(e){return null!=e&&""!=e}).join(e)});t.exports=n.LayoutView.extend({template:Handlebars.compile(c),className:"guest-wrapper",regions:{card:".card-region"},initialize:function(e){var t=this;t.model.get("isowner")?t.choose=new l({model:t.model,editable:!1,isForCheckOut:e&&e.isForCheckOut}):t.choose=new l({model:t.model,editable:!0,isForCheckOut:e&&e.isForCheckOut}),t.edit=new a({model:t.model,isForCheckOut:e&&e.isForCheckOut}),t.choose.on("req:edit",function(){t.getRegion("card").show(t.edit,{preventDestroy:!0})}),t.edit.on("req:choose",function(){t.getRegion("card").show(t.choose,{preventDestroy:!0})}),t.choose.on("req:delete",function(){t.destroy()})},onRender:function(){var e=this;e.getRegion("card").show(e.choose,{preventDestroy:!0})}})},{"../../../form/guest/view/guest-edit.js":857,"../assets/guest-wrapper.hbs":73,"./guest-choose.js":79,"backbone.Marionette":4,underscore:42}],857:[function(e,t,i){var n=e("underscore"),c=e("../../../abmb/stateful.js"),l=e("backbone.marionette"),a=e("../../../ui/validator.js"),o=e("../../../ui/date3selects/view"),s=(e("backbone-validation"),e("../../../ui/util")),r=e("../../../form/address/view"),g=e("../assets/guest-edit.hbs"),d=e("../avatar/view"),I=e("../../../profile-page2.0/page-public/view");Handlebars.registerHelper("compare",function(e,t,i){return e===t?i.fn(this):""});t.exports=l.ItemView.extend(n.extend({},c,{className:"guest-edit card bg-white",template:Handlebars.compile(g),ui:{editBox:"[data-bind]",title:"[data-bind=title]",gender:"[data-bind=gender]",country:"[data-bind=country]",errorResponse:"div.request-error>span.error-tip",dobbinder:"[data-bind-to=birthday]",dob:"input[data-bind=birthday]",city:"[data-bind=city]",province:"[data-bind=state],[data-bind=province]",postcode:"[data-bind=postal]",address:"[data-bind=address]",guestImg:".avatar",btn:".save-btn"},events:{"click .cancel-btn":"onViewCancle","click .save-btn":"onModelSave"},modelEvents:{change:"modelChanged"},initialize:function(e){this.model&&this.model.set("isForCheckOut",e&&e.isForCheckOut)},modelChanged:function(){var e=this;setTimeout(function(){"function"==typeof e.ui.btn.addClass&&(e.model.isValid(!0)?e.ui.btn.removeClass("wgt-sqbutton-default"):e.ui.btn.addClass("wgt-sqbutton-default"))},0)},onRender:function(){var e=this;new d({el:e.ui.guestImg,model:e.model}),this.$("[data-bind]").parents(".field").addClass("pass"),e.addressView=new r({formView:e,countryDropDown:e.ui.country,addressInput:e.ui.address,cityInput:e.ui.city,provinceInput:e.ui.province,postcodeInput:e.ui.postcode}),o.autoCreate(e.ui.dobbinder),o.getInstance(e.ui.dobbinder).model.on("change",function(){e.trigger("blur:input",{target:e.ui.dob})}),s.titlegender(this.ui.title,this.ui.gender),s.country(this.ui.country,e.model.get("country"));var t=s.titleCase(this.ui.gender.data("value"));this.ui.gender.find("option[value='"+t+"']").attr("selected","selected"),e.model.get("noBirthday")||this.options&&this.options.isForCheckOut&&e.model&&e.model.validation&&(e.model.validation.birthday={required:!1}),a.bind(e,{onInput:!0})},onViewCancle:function(){this.triggerMethod("req:choose",self.model)},onModelSave:function(){var e=this;if(e.trigger("save:form"),!e.model.isValid(!0))return!1;if(e.model.get("noBirthday")||e.model.get("birthday")||e.model.set("birthday","01/01/1900"),e.ui.guestImg.find(".avatar-img").attr("data-id")){var t=e.ui.guestImg.find(".avatar-img").attr("data-id");e.model.set("avatarurl",t)}else{var i=e.ui.guestImg.find(".avatar-img").attr("src");if(i&&-1!=i.indexOf("base64,")){var n=i.indexOf("base64,")+7;i=i.substring(n,i.length),e.model.set("baseImg",i)}}e.model.set("phone",e.model.get("phone").replace("+","")),s.loading({errortimeout:5e3,showerror:!1,container:e.el,promise:e.model.save({},{emulateForm:!0,emulateJSON:!0,success:function(t,i){"Male"==e.model.get("gender")?e.model.set("guestavatar","icon-icon_K005"):e.model.set("guestavatar","icon-icon_K004"),jQuery("html, body").animate({scrollTop:e.$el.offset().top+"px"},{duration:500,easing:"swing"}),e.triggerMethod("req:choose",e.model)},error:function(t,i){var n=i.responseJSON.msg,c={type:1,status:"false",content:n};e.pagePublic=new I({el:jQuery(".publicTip"),config:c}).render()}})})}}))},{"../../../abmb/stateful.js":72,"../../../form/address/view":838,"../../../profile-page2.0/page-public/view":1747,"../../../ui/date3selects/view":2071,"../../../ui/util":2122,"../../../ui/validator.js":2123,"../assets/guest-edit.hbs":848,"../avatar/view":853,"backbone-validation":3,"backbone.marionette":6,underscore:42}],2071:[function(e,t,i){function n(){return jQuery(".m4b-register").length||jQuery(".m4b-up-form").length?dateTemplateM4B:dateTemplate}var c=e("underscore"),l=e("backbone"),a=(e("backbone.marionette"),e("moment")),o=e("underscore.string/sprintf"),s=e("../autocreator");dateTemplate=e("./template.hbs"),dateTemplateM4B=e("./templateM4B.hbs"),DateView=t.exports=s.extend({template:Handlebars.compile(n()),ui:{selects:"select",yyyy:"select[name=yyyy]",mm:"select[name=mm]",dd:"select[name=dd]"},events:{"change select[name=mm]":function(){this.model.set({mm:this.ui.mm.val()})},"change select[name=dd]":function(){this.model.set({dd:this.ui.dd.val()})},"change select[name=yyyy]":function(){this.model.set({yyyy:this.ui.yyyy.val()})}},initialize:function(){var e=this;s.prototype.initialize.apply(this,arguments),e.model=new l.Model({mm:e.$el.data("month"),dd:e.$el.data("day"),yyyy:e.$el.data("year"),bindto:e.$el.data("bind-to")&&(e.$el.data("parent-container")?e.$el.parent():jQuery("body")).find(o("[data-bind=%s]",e.$el.data("bind-to"))),format:e.$el.data("format")||"DD/MM/YYYY",incomplete:e.$el.data("allow-incomplete"),moment:null}),e.model.get("bindto")&&!e.model.get("bindto").length&&e.model.set({bindto:jQuery(o('<input type="hidden" data-bind="%s"/>',e.$el.data("bind-to"))).insertAfter(e.$el)}),e.model.on("change:mm change:dd change:yyyy",function(){var t=[e.model.get("dd"),e.model.get("mm"),e.model.get("yyyy")].join("/");e.model.set({moment:/^\d+\/\d+\/\d+$/.test(t)&&a(t,"DD/MM/YYYY")}),e.$el.attr({"data-value":t})}),e.model.on("change:moment change:format change:bindto change:mm change:dd change:yyyy",function(){e.model.get("bindto")&&e.model.get("bindto").val(e.model.get("moment")?e.model.get("moment").format(e.model.get("format")):e.model.get("incomplete")&&e.model.get("format").replace(/DD/g,e.model.get("dd")).replace(/YYYY/g,e.model.get("yyyy")).replace(/MM/g,e.model.get("mm"))||"").trigger("focusout")}),e.setValue(e.$el.data("value")||"")},setValue:function(e){var t=this,i=/^\d+\/\d+\/\d+$/.test(e)&&e.split("/")||[];3==i.length&&t.model.set({dd:i[0],mm:i[1],yyyy:i[2]})},onRender:function(){var e=this,t=Handlebars.compile('<option value="{{value}}"{{#if selected}} selected{{/if}}>{{text}}</option>');e.ui.yyyy.html([t({value:"",text:i18n.t("signup.select_year")})].concat(c.range((new Date).getFullYear(),1899,-1).map(function(i){return t({value:i,text:i,selected:e.model.get("yyyy")==i})})).join("")),e.ui.mm.html([t({value:"",text:i18n.t("signup.select_month")})].concat(c.map("January February March April May June July August September October November December".split(" "),function(i,n){return t({value:o("%02d",n+1),text:i18n.t("dates."+i),selected:e.model.get("mm")==n+1})})).join("")),e.model.on("change:yyyy change:mm popday",function(){e.ui.dd.html([t({value:"",text:i18n.t("signup.select_day")})].concat(e.ui.mm.val()&&e.ui.yyyy.val()?c.map(c.range(1,a(e.ui.yyyy.val()+"-"+e.ui.mm.val(),"YYYY-MM").daysInMonth()+1),function(i){return t({value:o("%02d",i),text:i,selected:e.model.get("dd")==i})}):[]).join(""))}).trigger("popday")}},{selector:"[data-component=date3selects]"})},{"../autocreator":2052,"./template.hbs":2069,"./templateM4B.hbs":2070,backbone:8,"backbone.marionette":6,moment:16,underscore:42,"underscore.string/sprintf":41}],2070:[function(e,t,i){t.exports='<div class="input-box">\r\n    <select name="yyyy"></select>\r\n    <i class="icon-icon_chervonDown"></i>\r\n    <i class="input-select"></i>\r\n</div>\r\n\r\n<div class="input-box input-box-middle">\r\n    <select name="mm"></select>\r\n    <i class="icon-icon_chervonDown"></i>\r\n    <i class="input-select"></i>\r\n</div>\r\n\r\n<div class="input-box">\r\n    <select name="dd"></select>\r\n    <i class="icon-icon_chervonDown"></i>\r\n    <i class="input-select"></i>\r\n</div>'},{}],2069:[function(e,t,i){t.exports='<div class="input-box">\r\n    <select name="yyyy"></select>\r\n    <i class="input-select"></i>\r\n</div>\r\n\r\n<div class="input-box">\r\n    <select name="mm"></select>\r\n    <i class="input-select"></i>\r\n</div>\r\n\r\n<div class="input-box">\r\n    <select name="dd"></select>\r\n    <i class="input-select"></i>\r\n</div>'},{}],2052:[function(e,t,i){var n=e("underscore"),c=(e("backbone"),e("backbone.marionette")),l=e("./util");i=t.exports=c.ItemView.extend({rendered:0,template:!1,initialize:function(){this.constructor.instances.push(this)},onRender:function(){this.rendered++}},{getInstance:function(e){return l.getInstance(this,{el:jQuery(e).get(0)})},autoCreate:function(e){return n.each(jQuery(e||this.selector).get(),this.getInstance,this)&&this},extend:function(){return this.instances=[],c.ItemView.extend.apply(this,arguments).autoCreate()}})},{"./util":2122,backbone:8,"backbone.marionette":6,underscore:42}],853:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("./template.hbs"),l=(e("../../../../../config/host.js").host,e("./model")),a=e("./default-avatar.js"),o=e("./change-avatar.js");t.exports=n.ItemView.extend({template:Handlebars.compile(c),className:"avatar",modelEvents:{sync:"render"},events:{"click .change-btn > .change-text":"onBtnClick","change @ui.inputFile":"changeFile"},ui:{avatar:".avatar-img",inputFile:"#file-add",tips:"#upload-error-tips",images:".default-img",tooltip:".tooltip"},defaultAvatar:new a,changeAvatar:new o,initialize:function(e){var t=this;t.model||(t.model=new l({guestavatar:"icon-icon_K005"})),this.defaultAvatar.fetch().then(function(){t.render()});var i=t.model.get("avatar");if(i){var n=new Image;n.src=i,n.onload=function(e){t.model.set("isavatar",!0)}}},reset:function(){this.model.set("isavatar",!1),this.render()},changeFile:function(e){var t=this,i=t.ui.inputFile[0],n=i.value;if(!/.(gif|jpg|jpeg|png|GIF|JPG|png|BMP|bmp)$/.test(n))return!1;var c=/msie/i.test(navigator.userAgent)&&!window.opera;if(c&&!i.files){var l=i.value,a=new ActiveXObject("Scripting.FileSystemObject"),o=a.GetFile(l);fileSize=o.Size}else fileSize=i.files[0].size;if(fileSize=Math.round(fileSize/1024*100)/100,fileSize>=100)return alert("Filesize is too big"),!1;var s=new FileReader;s.onload=function(e){return function(e){t.model.set("avatarId",""),t.model.set("isavatar",!0),t.model.set("avatar",this.result),t.render()}}(e.target.files[0]),s.readAsDataURL(e.target.files[0])},onRender:function(){var e=this;e.ui.images.empty().append(this.defaultAvatar.get("items").map(function(t){return jQuery('<li><img src="'+t.url+'" alt=""></li>').bind("click",function(t){return function(i){e.model.set("isavatar",!0),e.model.set("avatar",i.target.src),e.model.set("avatarId",t),e.render()}}(t.id))})),e.ui.tooltip.removeClass("show"),jQuery("body").on("click",function(t){0==jQuery(t.target).parents(".tooltip").length&&"change-text wgt-sqbutton-dark"!=jQuery(t.target).attr("class")&&e.ui.tooltip.removeClass("show")}),e.ui.tooltip.find(".close").unbind("click").bind("click",function(){e.ui.tooltip.removeClass("show")}),e.$el.find(".change-btn>a").unbind("click").bind("click",function(){e.ui.tooltip.addClass("show")})}})},{"../../../../../config/host.js":45,"./change-avatar.js":849,"./default-avatar.js":850,"./model":851,"./template.hbs":852,"backbone.marionette":6,underscore:42}],852:[function(e,t,i){t.exports='{{#if isavatar}}\r\n    <img src="{{avatar}}" alt="" class="avatar-img "{{#if avatarId}}data-id="{{avatarId}}"{{/if}}/>\r\n{{else}}\r\n    <span class="{{guestavatar}}" style="font-size: 5rem;vertical-align: middle;\r\n    margin-right: 10px;\r\n    width: 58px;\r\n    height: 58px;\r\n    line-height: 58px;\r\n    display: inline-block;"></span>\r\n {{/if}}\r\n<!--<span class="icon-icon_I008"></span>-->\r\n<span class="change-btn">\r\n    <a href="javascript:void(0);" class="change-text wgt-sqbutton-dark">{{local "account.change_display_picture"}}</a>\r\n\r\n</span>\r\n<div class="tooltip show">\r\n    <a class="close icon-icon_B017"></a>\r\n    <p class="describe">Pick a display picture below</p>\r\n    <ul class="default-img">\r\n        <li><img src="/assets/img/checkout/checkout-guest.png"/></li>\r\n        <li><img src="/assets/img/checkout/checkout-guest.png"/></li>\r\n        <li><img src="/assets/img/checkout/checkout-guest.png"/></li>\r\n        <li><img src="/assets/img/checkout/checkout-guest.png"/></li>\r\n        <li><img src="/assets/img/checkout/checkout-guest.png"/></li>\r\n        <li><img src="/assets/img/checkout/checkout-guest.png"/></li>\r\n        <li><img src="/assets/img/checkout/checkout-guest.png"/></li>\r\n        <li><img src="/assets/img/checkout/checkout-guest.png"/></li>\r\n        <li><img src="/assets/img/checkout/checkout-guest.png"/></li>\r\n        <li><img src="/assets/img/checkout/checkout-guest.png"/></li>\r\n    </ul>\r\n    <p class="describe">Or upload your own</p>\r\n    <div style="position: relative">\r\n        <a class="wgt-sqbutton">upload image</a>\r\n        <input type="file" name="file"  accept="image/png,image/gif,image/jpeg" style="position: absolute; top: 0; left: 0; width: 100%; height: 5rem; opacity: 0; cursor: pointer" id="file-add">\r\n    </div>\r\n</div>\r\n<p id="upload-error-tips">\r\n    {{local "account.file_upload_error"}}\r\n</p>\r\n\r\n\r\n'},{}],851:[function(e,t,i){var n=(e("underscore"),e("backbone"));e("../../../../../config/host.js"),t.exports=n.Model.extend({})},{"../../../../../config/host.js":45,backbone:8,underscore:42}],850:[function(e,t,i){arguments[4][143][0].apply(i,arguments)},{"../../../../../config/host.js":45,backbone:8,dup:143}],143:[function(e,t,i){var n=e("backbone"),c=e("../../../../../config/host.js");t.exports=n.Model.extend({url:c.getURL("/defaultavatars"),defaults:{items:[]},parse:function(e){return{items:e||[]}}})},{"../../../../../config/host.js":45,backbone:8}],849:[function(e,t,i){arguments[4][142][0].apply(i,arguments)},{"../../../../../config/host.js":45,backbone:8,dup:142}],142:[function(e,t,i){var n=e("backbone"),c=e("../../../../../config/host.js");t.exports=n.Model.extend({url:c.getURL("/changedefaultavatar"),defaults:{avatarurl:""}})},{"../../../../../config/host.js":45,backbone:8}],848:[function(e,t,i){t.exports='<div class="form guest-add-form">\r\n    <form>\r\n    <div class="avatar"></div>\r\n    <div class="field" style= "display: none;">\r\n        <label for="">{{local "form.existing_loyalty_number"}}</label>\r\n        <div class="input-box">\r\n            <input type="text" data-bind="loyalty_id" value="{{loyalty_id}}" name="loyalty_id" maxlength=\'20\'>\r\n            <i class="input-status"></i>\r\n        </div>\r\n        <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        <span class="error-tip not-null"> {{local "form_error.invalid_confirmation_number"}}</span>\r\n    </div>\r\n    <div class="field field-half">\r\n        <label for="">{{local "form.title"}}</label>\r\n        <div class="input-box">\r\n            <select name="title" data-bind="title" data-value="{{title}}"></select>\r\n            <i class="input-select"></i>\r\n        </div>\r\n        <span class="error-tip null"> {{local "form_error.choose_title"}}</span>\r\n    </div>\r\n    <div class="field field-half field-half-right">\r\n        <label for="">{{local "form.gender"}}</label>\r\n        <div class="input-box">\r\n            <select name="gender" data-bind="gender" data-value="{{gender}}"></select>\r\n            <i class="input-select"></i>\r\n        </div>\r\n        <span class="error-tip null"> {{local "form_error.choose_gender"}}</span>\r\n    </div>\r\n    <div class="field">\r\n        <label for="">{{local "form.first_name"}}</label>\r\n        <div class="input-box">\r\n            <input type="text" data-bind="first_name"  placeholder="{{local \'checkout.guest_first_name_placeholder\'}}" value="{{first_name}}" name="first_name" maxlength=\'254\' autocomplete="given-name">\r\n            <i class="input-status"></i>\r\n        </div>\r\n        <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        <span class="error-tip not-null"> {{local "form_error.only_accepts_latin"}}</span>\r\n    </div>\r\n    <div class="field">\r\n        <label for="">{{local "form.last_name"}}</label>\r\n        <div class="input-box">\r\n            <input type="text" data-bind="last_name" placeholder="{{local \'checkout.guest_last_name_placeholder\'}}" value="{{last_name}}" name="last_name" maxlength=\'254\' autocomplete="family-name"/>\r\n            <i class="input-status"></i>\r\n        </div>\r\n        <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        <span class="error-tip not-null"> {{local "form_error.only_accepts_latin"}}</span>\r\n    </div>\r\n    <div class="field">\r\n        <label>{{local "form.phone"}}</label>\r\n        <div class="input-box">\r\n            <input type="text" data-bind="phone" placeholder="{{local \'form.phone_placeholder\'}}" name="phone" maxlength=15 value="{{phone}}"><i class="input-status"></i>\r\n        </div>\r\n        <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        <span class="error-tip not-null"> {{local "form_error.invalid_phone"}}</span>\r\n    </div>\r\n    <div class="field">\r\n        <label>{{local "form.secondary_phone"}}</label>\r\n        <div class="input-box">\r\n            <input type="text" data-bind="secondaryphone" placeholder="{{local \'form.secondary_phone\'}}"\r\n                   name="secondaryphone" maxlength="15" value="{{secondaryphone}}"><i class="input-status"></i>\r\n        </div>\r\n        <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        <span class="error-tip not-null"> {{local "form_error.invalid_phone"}}</span>\r\n    </div>\r\n    {{#unless isForCheckOut}}\r\n    <div class="field field-third">\r\n        <label>{{local "form.date_of_birth"}}</label>\r\n        <div data-component="date3selects" data-bind-to="birthday" data-value="{{birthday}}" data-parent-container="true"></div>\r\n        <span class="error-tip null">{{local "form_error.cannot_be_empty"}}</span>\r\n        <span data-content-key-prefix="error_birthdate_" class="error-tip not-null"> </span>\r\n    </div>\r\n    {{/unless}}\r\n    <div class="field">\r\n        <label for="">{{local "form.email_address"}}</label>\r\n        <div class="input-box">\r\n            <input type="text" data-bind="email" placeholder="{{local \'form.email_placeholder\'}}" value="{{email}}" name="email" maxlength="254" autocomplete="email">\r\n            <i class="input-status"></i>\r\n        </div>\r\n        <span class="error-tip not-null"> {{local "form_error.invalid_email"}}</span>\r\n        <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n    </div>\r\n    <div class="field">\r\n        <label for="">{{local "form.country_of_residence"}}</label>\r\n        <div class="input-box">\r\n            <select name="country" data-bind="country">\r\n                <option value="">{{local "form.select"}}</option>\r\n                {{#each countries}}\r\n                    <option value="{{key}}" {{#compare key ../country}}selected="selected"{{/compare}}>{{value}}</option>\r\n                {{/each}}\r\n            </select>\r\n            <i class="input-select"></i>\r\n        </div>\r\n        <span class="error-tip null"> {{local "form_error.choose_country"}}</span>\r\n    </div>\r\n    <div class="field">\r\n        <label for="">{{local "form.address"}}</label>\r\n        <div class="input-box">\r\n            <input type="text" data-bind="address"  placeholder="{{local \'form.address_placeholder\'}}" value="{{address}}" name="address" maxlength="254" autocomplete="street-address">\r\n            <i class="input-status"></i>\r\n        </div>\r\n        <span class="error-tip not-null">{{local "form_error.only_accepts_alphanumerics"}}</span>\r\n        <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n    </div>\r\n    <div class="field">\r\n        <label for="">{{local "form.city"}}</label>\r\n        <div class="input-box">\r\n            <input type="text" data-bind="city" placeholder="{{local \'form.city_placeholder\'}}" name="city" value="{{city}}" maxlength=\'254\' autocomplete="city">\r\n            <i class="input-status"></i>\r\n        </div>\r\n        <span class="error-tip not-null"> {{local "form_error.error_invalid_city"}}</span>\r\n        <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n    </div>\r\n    <div class="field field-half">\r\n        <label for="">{{local "form.state_province"}}</label>\r\n        <div class="input-box">\r\n            <select name="state" data-bind="state" class="__select"></select>\r\n            <!--<input type="text" data-bind="state" placeholder="{{local \'form.state_province_placeholder\'}}" name="state" value="{{state}}" maxlength=\'254\' autocomplete="administrative-area">-->\r\n            <i class="input-select"></i>\r\n        </div>\r\n        <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        <span class="error-tip not-null"> {{local "form_error.error_invalid_country"}}</span>\r\n    </div>\r\n    <div class="field field-half field-half-right">\r\n        <label for="">{{local "form.postal_zip_code"}}</label>\r\n        <div class="input-box">\r\n            <input type="text" data-bind="postal" placeholder="{{local \'form.postal_zip_code_placeholder\'}}" value="{{postal}}" name="postal" maxlength=\'16\' autocomplete="postal-code">\r\n            <i class="input-status"></i>\r\n        </div>\r\n        <span class="error-tip null"> {{local "form_error.cannot_be_empty"}}</span>\r\n        <span class="error-tip not-null"> {{local "form_error.error_invalid_postal"}}</span>\r\n    </div>\r\n    <div class="field">\r\n        <a class="wgt-sqbutton-black save-btn">{{local "form.save_guest"}}</a>\r\n    </div>\r\n    <div class="field">\r\n        <a class="wgt-sqbutton-dark wgt-sqbutton-defalut cancel-btn">{{local "form.cancel"}}</a>\r\n    </div>\r\n    </form>\r\n</div>';
},{}],838:[function(e,t,i){var n=e("underscore"),c=e("backbone.marionette"),l=e("../../../../data/country.json"),a=e("../../../../data/state.json"),o=e("./model");AddressView=t.exports=c.ItemView.extend({events:{"click .address-item":"retrieveAddressInfo"},className:"address-search",template:Handlebars.compile(e("./template.hbs")),initialize:function(e){var t=this;t.flag=!1,t.model=new o,t.__getData(),e.addressInput.on("keyup",n.debounce(function(i){if(n.all([13,38,40],function(e){return i.keyCode!=e})){var c=e.countryDropDown.length&&e.countryDropDown.val();c&&(c=c.substr(c.length-3,2)),t.model.search(e.addressInput.val(),c).then(function(i){i.Items&&i.Items.length&&void 0==i.Items[0].Error&&(e.addressInput.closest(".field").append(t.render().$el),t.$el.show())})}},200)),e.countryDropDown.change(function(){t.__getData()}),e.addressInput.on("keyup",function(e){if(t.$(".search-list").length){var i=t.$(".address-item.selected"),n=t.$(".address-item"),c=Math.min(void 0===i.data("sortindex")?-1:i.data("sortindex"),n.length-1);switch(e.keyCode){case 38:return-1!=c&&(i.removeClass("selected"),c--,t.$('.address-item[data-sortindex="'+c+'"]').addClass("selected")),!1;case 40:return c!=n.length-1&&(i.removeClass("selected"),c++,t.$('.address-item[data-sortindex="'+c+'"]').addClass("selected")),!1;case 13:i.length&&i.click()}}}),jQuery("html").click(function(){t.$el.hide()})},retrieveAddressInfo:function(e){var t=this;t.$el.show();var i=jQuery(e.target).data("id");if(i)this.model.retrieve(i).then(function(e){if(e.Items&&e.Items.length&&void 0==e.Items[0].Error){var i=e.Items[0],c=i.Line1;i.Line2&&(c+=", "+i.Line2),i.Line3&&(c+=", "+i.Line3),i.Line4&&(c+=", "+i.Line4),c&&t.fillAddress(c);var o=n.find(l,function(e){return e.key.indexOf("("+i.CountryIso2+")")>-1});t.options.countryDropDown.length&&o&&t.options.countryDropDown.val(o.key),t.options.cityInput.length&&t.options.cityInput.val(i.City||"");var s=a[i.CountryIso2]&&a[i.CountryIso2][i.Province];if(t.options.provinceInput.length){var r=t.options.provinceInput.closest(".__select");r.val(s||r.children()[0].value)}t.options.postcodeInput.length&&t.options.postcodeInput.val(i.PostalCode||""),t.options.formView.trigger("save:form")}},function(){t.fillAddress(jQuery(e.target).text()),t.options.cityInput.length&&t.options.cityInput.val(""),t.options.provinceInput.length&&t.options.provinceInput.val(""),t.options.postcodeInput.length&&t.options.postcodeInput.val(""),t.options.formView.trigger("save:form")});else{if(t.fillAddress(jQuery(e.target).text()),t.options.cityInput.length&&t.options.cityInput.val(""),t.options.provinceInput.length){var c=t.options.provinceInput.closest(".__select").children()[0].value;t.options.provinceInput.closest(".__select").val(c)}t.options.postcodeInput.length&&t.options.postcodeInput.val(""),t.options.formView.trigger("save:form")}},fillAddress:function(e){e?this.options.addressInput.val(e):this.options.addressInput.val("")},onRender:function(){var e=this;e.$(".address-item").each(function(e,t){jQuery(t).attr("data-sortindex",e)})},__getData:function(){var e=this;if(e.__country=e.options.countryDropDown.length&&e.options.countryDropDown.val(),e.__country&&(e.__country=e.__country.substr(e.__country.length-3,2)),e.options.provinceInput.length){e.options.provinceInput.closest(".__select").html(" "),a[e.__country]?n.map(n.keys(a[e.__country],function(e){}),function(t){e.options.provinceInput.closest(".__select").append("<option value='"+a[e.__country][t]+"("+t+")' selected='selected'>"+a[e.__country][t]+"</option>")}):e.options.provinceInput.closest(".__select").append("<option value='others'>"+i18n.t("general.others")+"</option>");var t="";if(e.options.formView&&e.options.formView.model){var i=e.options.formView.model.get("province")||e.options.formView.model.get("state");t=n.values(a[e.__country]).indexOf(i)>-1&&i}e.options.provinceInput.closest(".__select").val(t||e.options.provinceInput.closest(".__select").children()[0].value)}e.$el.show()}})},{"../../../../data/country.json":47,"../../../../data/state.json":48,"./model":836,"./template.hbs":837,"backbone.marionette":6,underscore:42}],837:[function(e,t,i){t.exports='\r\n    <div class="input-box search-list">\r\n        <ul>\r\n            {{#each Items}}\r\n\r\n                <li class="address-item" {{#not-equal-relax Next \'Find\'}} data-id="{{Id}}" {{/not-equal-relax}} >{{Text}}</li>\r\n\r\n            {{/each}}\r\n        </ul>\r\n    </div>\r\n'},{}],836:[function(e,t,i){var n=e("backbone");t.exports=n.Model.extend({key:"GM79-PU49-MT93-UK91",parse:function(e){return e},search:function(e,t){return t?(this.hasCountry=!0,this.url="https://services.postcodeanywhere.co.uk/CapturePlus/Interactive/Find/v2.10/json3.ws?Key="+this.key+"&SearchTerm="+encodeURIComponent(e)+"&Country="+encodeURIComponent(t)):this.url="https://services.postcodeanywhere.co.uk/Capture/Interactive/Find/v1.00/json3.ws?Key="+this.key+"&Text="+encodeURIComponent(e),this.fetch({xhrFields:{withCredentials:!1}})},retrieve:function(e){return this.hasCountry?this.url="https://services.postcodeanywhere.co.uk/CapturePlus/Interactive/Retrieve/v2.10/json3.ws?Key="+this.key+"&Id="+encodeURIComponent(e):this.url="https://services.postcodeanywhere.co.uk/Capture/Interactive/Retrieve/v1.00/json3.ws?Key="+this.key+"&Id="+encodeURIComponent(e),this.fetch({xhrFields:{withCredentials:!1}})}})},{backbone:8}],79:[function(e,t,i){var n=(e("underscore"),e("../../../form/guest/view/guest-choose.js"));t.exports=n.extend({onChoose:function(){var e=this;if(!e.model.get("primary")){e.model.save({primary:!0},{patch:!0,wait:!0})}}})},{"../../../form/guest/view/guest-choose.js":856,underscore:42}],856:[function(require,module,exports){var _=require("underscore"),Marionette=require("backbone.marionette"),Stateful=require("../../../abmb/stateful.js"),template=require("../assets/guest-choose.hbs"),Util=require("../../../ui/util"),confirmView=require("../../../profile-page2.0/page-public/view"),GuestChooseView=module.exports=Marionette.ItemView.extend(_.extend({},Stateful,{template:Handlebars.compile(template),className:"guest-choose card guest",events:{"click .choose-btn":"onChoose","click .edit-btn":"onEdit","click .remove-btn":"onRemove"},modelEvents:{change:"render",destroy:"onModelDestroy"},ui:{tip:".confirm-tip"},initialize:function(e){this.model.set("phone",jQuery.trim(this.model.get("phone"))),e&&e.isForCheckOut?this.$el.addClass("bg-white"):this.$el.addClass("bg-white");var t=this,i=t.getOption("editable");i?t.switchState("edit:show"):t.switchState("edit:hide");var n=t.model.get("avatar");if(n){var c=new Image;c.src=n,c.onload=function(e){t.model.set("isavatar",!0)}}},onRender:function(){},onChoose:function(){var e=this;e.triggerMethod("chosen",e.model)},onEdit:function(){var e=this;e.triggerMethod("req:edit",e.model)},onRemove:function(){var e=this,t="<b>"+e.model.get("first_name")+" "+e.model.get("last_name")+"</b>",i=i18n.t("account.fullcard_about_remove").replace("{0}",t).replace("{1}",""),n={type:2,closeText:i18n.t("account.remove_cancel"),sureText:i18n.t("account.guest_remove"),title:i18n.t("account.remove_guest"),content:i};e.confirmView=new confirmView({el:e.ui.tip,config:n}).render(),e.confirmView.on("sure:click",e.onRemoveConfirm,this)},onRemoveConfirm:function(){var e=this;e.triggerMethod("req:delete",e.model),Util.loading({container:e.el,errortimeout:1e4,promise:e.destroyPromise()})},destroyPromise:function(){var self=this,deferred=jQuery.Deferred();return self.model.destroy().then(function(e){var t=self.model.get("title")+" "+self.model.get("first_name")+" "+self.model.get("last_name"),i=i18n.t("account.remove_guest_suc").replace("{0}",t).replace("{1}",""),e={type:1,status:"true",content:i};self.pagePublic=new confirmView({el:jQuery(".publicTip"),config:e}).render(),deferred.resolve()},function(data){var errMsg=eval(data.responseText)[0].msg,data={type:1,status:"false",content:errMsg};self.pagePublic=new confirmView({el:jQuery(".publicTip"),config:data}).render(),deferred.resolve()}),deferred},onModelDestroy:function(){var e=this;e.destroy()}}))},{"../../../abmb/stateful.js":72,"../../../profile-page2.0/page-public/view":1747,"../../../ui/util":2122,"../assets/guest-choose.hbs":847,"backbone.marionette":6,underscore:42}],1747:[function(e,t,i){var n=e("underscore"),c=e("../../abmb/stateful.js"),l=e("backbone.marionette"),a=e("./model");e("./style.sass"),ProfilePulicView=t.exports=l.LayoutView.extend(n.extend({},c,{template:Handlebars.compile(e("./template.hbs")),events:{"click .close":"closeConfirm","click .sure":"sureClick","click .closeTip":"closeTip"},initialize:function(e){this.model=new a(e.config)},closeConfirm:function(){this.$(".confirm").remove()},sureClick:function(){var e=this;e.trigger("sure:click",e),e.closeConfirm()},closeTip:function(){this.$(".tips").remove()},onRender:function(){var e=this;1==e.model.get("type")&&jQuery("html, body").animate({scrollTop:0},{duration:500,easing:"swing"})}}))},{"../../abmb/stateful.js":72,"./model":1744,"./style.sass":1745,"./template.hbs":1746,"backbone.marionette":6,underscore:42}],1746:[function(e,t,i){t.exports='{{#equal type 1}}\r\n    {{#equal status \'true\'}}\r\n        <div class="reset-succeed tips"><span class="icon-icon_I009"></span><div class="tipContent">{{content}}{{#if link}} <a href="{{link}}">{{linkcontent}}</a>{{/if}}</div><span class="icon-icon_B017 closeTip"></span></div>\r\n    {{else}}\r\n        <div class="reset-error tips"><span class="icon-icon_B015"></span>{{content}}<span class="icon-icon_B017 closeTip"></span></div>\r\n    {{/equal}}\r\n{{/equal}}\r\n{{#equal type 2}}\r\n     <div class="confirm">\r\n           <div class="confirm-content">\r\n               <div class="title">{{title}}</div>\r\n               <div class="info">\r\n                   <p>{{{content}}}</p>\r\n                   <div class="buttons">\r\n                       <span class="close">{{closeText}}</span>\r\n                       <span class="sure">{{sureText}}</span>\r\n                   </div>\r\n               </div>\r\n           </div>\r\n     </div>\r\n{{/equal}}'},{}],1745:[function(e,t,i){t.exports=e("sassify")("/**  *  * @param { 300 | bold } $font-weight  * @param { normal     } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal           } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { 300 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { normal } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ .reset-succeed span:nth-child(1) {   border: solid 1.5px #fff;   border-radius: 50%; }  .tips {   width: 100%;   margin: auto;   padding: 1rem;   font-size: 1.4rem;   font-family: 'Whitney', Helvetica, sans-serif;   font-weight: bold;   color: #ffffff;   box-sizing: border-box;   position: relative; }   .tips .tipContent {     width: 70%;     display: inline-block;     vertical-align: middle; }     .tips .tipContent a {       color: #FFFFFF;       text-decoration: underline; }   .tips span {     vertical-align: middle; }     .tips span:nth-child(1) {       font-size: 2rem !important;       margin-right: 1rem; }   .tips .closeTip {     font-size: 3rem;     position: absolute;     top: 5px;     right: 1rem; }  @media screen and (max-width: 768px) {   .tips {     font-size: 1.2rem; }     .tips .tipContent {       vertical-align: top; }     .tips span:nth-child(1) {       font-size: 1rem !important; }     .tips .closeTip {       font-size: 2.5rem;       top: 4px; } }  .reset-succeed {   background: #2EB025; }  .reset-error {   background: #BA0C2F; }  .confirm {   position: fixed;   top: 0;   left: 0;   height: 100vh;   width: 100%;   z-index: 1000;   background-color: rgba(27, 27, 27, 0.8); }   .confirm .confirm-content {     width: 60rem;     position: fixed;     top: 50%;     left: 50%;     z-index: 1001;     -webkit-transform: translate(-50%, -50%);     -moz-transform: translate(-50%, -50%);     -ms-transform: translate(-50%, -50%);     -o-transform: translate(-50%, -50%);     transform: translate(-50%, -50%); }     .confirm .confirm-content .title {       width: 100%;       height: 6rem;       line-height: 6rem;       background: #282828;       text-transform: uppercase;       font-family: 'Museo Sans', Helvetica, sans-serif;       font-weight: 500;       font-size: 1.8rem;       color: #FFFFFF;       letter-spacing: 0.2px;       text-align: center; }     .confirm .confirm-content .info {       background: #e7e7e7;       padding: 4rem 0 5rem 0;       text-align: center; }       .confirm .confirm-content .info p {         width: 70%;         margin: auto;         font-family: 'Whitney', Helvetica, sans-serif;         font-weight: 300;         font-size: 1.8rem;         line-height: 2.8rem;         color: #000000; }         .confirm .confirm-content .info p b, .confirm .confirm-content .info p span {           font-family: 'Whitney', Helvetica, sans-serif;           font-weight: bold;           font-size: 2rem; }         .confirm .confirm-content .info p span {           display: block;           width: 150%;           position: relative;           left: -25%;           text-align: center; }       .confirm .confirm-content .info .buttons {         margin-top: 4rem; }         .confirm .confirm-content .info .buttons span {           width: 20rem;           height: 5rem;           line-height: 5rem;           text-align: center;           font-family: 'Museo Sans', Helvetica, sans-serif;           font-weight: 500;           font-size: 1.4rem !important;           color: #FFFFFF;           letter-spacing: 1px;           text-transform: uppercase;           display: inline-block;           cursor: pointer; }         .confirm .confirm-content .info .buttons .close {           background: #363636;           margin-right: 2rem;           border-radius: 0;           border: none; }         .confirm .confirm-content .info .buttons .sure {           background: #31A2AC; }   @media screen and (max-width: 768px) {     .confirm .confirm-content {       width: 80%; }       .confirm .confirm-content .title {         font-size: 1.4rem;         height: inherit;         line-height: inherit;         padding: 1.7rem 0; }       .confirm .confirm-content .info {         padding: 2rem 0 2rem 0; }         .confirm .confirm-content .info p {           width: 80%;           line-height: 2.4rem;           font-size: 1.6rem; }           .confirm .confirm-content .info p b, .confirm .confirm-content .info p span {             font-size: 1.8rem; }           .confirm .confirm-content .info p span {             display: inline;             position: inherit; }         .confirm .confirm-content .info .buttons {           margin-top: 2rem;           position: relative;           height: 12rem; }           .confirm .confirm-content .info .buttons span {             width: 80%;             display: block;             margin: auto;             font-size: 1.2rem !important;             height: 4rem;             line-height: 4rem; }           .confirm .confirm-content .info .buttons .close {             margin: 0 auto 1rem auto;             position: absolute;             top: 5rem;             left: 0;             right: 0; } }  html[dir=\"rtl\"] .tips .closeTip {   right: inherit !important;   left: 1rem !important; }  html[dir=\"rtl\"] .tips span:nth-child(1) {   margin-right: inherit;   margin-left: 1rem; }  html[dir=\"rtl\"] .confirm .confirm-content .close {   margin-right: inherit !important;   margin-left: 2rem !important; }  ");
},{sassify:36}],1744:[function(e,t,i){arguments[4][185][0].apply(i,arguments)},{backbone:8,dup:185,underscore:42}],185:[function(e,t,i){var n=(e("underscore"),e("backbone"));t.exports=n.Model.extend({defaults:""})},{backbone:8,underscore:42}],847:[function(e,t,i){t.exports='<div class="confirm-tip"></div>\r\n<i class="radio choose-btn {{#if primary}}checked{{/if}}"></i>\r\n<div class="card-info">\r\n    {{#if isavatar}}\r\n        <img src="{{avatar}}" alt="{{first_name}} {{last_name}}"/>\r\n        {{else}}\r\n        <span class="{{guestavatar}}"></span>\r\n    {{/if}}\r\n\r\n    <div>\r\n        <h6>{{first_name}} {{last_name}}\r\n            <div class="card-edit card-edit-pc">\r\n                <span>\r\n                    <span class="icon-icon_J006"></span>\r\n                    <a class="edit-btn">{{local "account.guest_edit"}}</a>\r\n                </span>\r\n                {{#unless primary}}\r\n                    <span>\r\n                    <span class="icon-icon_J016"></span>\r\n                    <a class="remove-btn">{{local "account.guest_remove"}}</a>\r\n                </span>\r\n                {{/unless}}\r\n            </div>\r\n        </h6>\r\n        <!--<p>{{address}}, {{city}}, {{postal}}, {{country}}</p>-->\r\n        <p>{{stringJoin \', \' address city postal country}}</p>\r\n\r\n    </div>\r\n</div>\r\n<div class="card-edit card-edit-mobile">\r\n                <span>\r\n                    <span class="icon-icon_J006"></span>\r\n                    <a class="edit-btn">{{local "account.guest_edit"}}</a>\r\n                </span>\r\n    {{#unless primary}}\r\n        <span>\r\n                    <span class="icon-icon_J016"></span>\r\n                    <a class="remove-btn">{{local "account.guest_remove"}}</a>\r\n                </span>\r\n    {{/unless}}\r\n</div>\r\n<div class="delete-info">\r\n    <div class="delete-content"><span class="icon-icon_K007"></span>\r\n        <p>{{local "account.remove_guest_form_guests" first_name last_name }}</p>\r\n    </div>\r\n    <div class="buttons"><a class="wgt-sqbutton-white remove-cancel-btn">{{local "account.remove_cancel"}}</a><a class="wgt-sqbutton remove-confirm-btn">{{local "account.remove_confirm"}}</a></div>\r\n</div>'},{}],74:[function(e,t,i){t.exports='{{#if isForCheckOut}} <h4 class="item-title">{{local "account.choose_primary_guest"}}</h4>\r\n{{else}}<h6 class=\'sub-block-head\'>{{local "account.choose_primary_guest"}}</h6>{{/if}}\r\n<div class="loading-block"><p class="loading-gif"></p></div>\r\n<div class="loading-error-block"><p>{{local "general.loading_error"}}</p></div>'},{}],73:[function(e,t,i){t.exports='<div class="card-region"></div>'},{}],70:[function(e,t,i){var n=(e("underscore"),e("backbone")),c=e("./select-item.js");t.exports=n.Collection.extend({model:c})},{"./select-item.js":71,backbone:8,underscore:42}],71:[function(e,t,i){var n=(e("underscore"),e("backbone"));t.exports=n.Model.extend({defaults:{name:"Unknown",value:null,__selected:!1}})},{backbone:8,underscore:42}],68:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("./template.hbs"),l=e("../ui/util"),a=e("moment"),o=e("./model");e("./style.sass"),PromocodeView=t.exports=n.LayoutView.extend({template:function(e){return Handlebars.compile(c)(e)},ui:{imgLink:".imgLink"},events:{"click .icon-icon_B017":"closePopup","click .imgLink":"setCook"},initialize:function(){l.disableScroll(),this.model=new o(promoPopup);var e=this.model.get("expireDate");null!=e&&(this.model.set("expireDate",a(e).format("DD/MM/YY")),this.setTime())},onRender:function(){},closePopup:function(){l.enableScroll(),jQuery.cookie("popupShow","true",{path:"/"}),this.remove()},setCook:function(){jQuery.cookie("popupShow","true",{path:"/"}),url=this.ui.imgLink.attr("data-url"),window.location.href=url},timeFormat:function(e){return 10>e?"0"+e:e},setTime:function(){clearTimeout(this.timer),this.timer=null;var e=this,t=this.model.get("dateDiffSecond");1>=l&&e.closePopup();var i=Math.floor(t/60/60/24),n=Math.floor((t-60*i*60*24)/60/60),c=Math.floor((t-60*i*60*24-60*n*60)/60),l=Math.floor(t-60*i*60*24-60*n*60-60*c);e.model.set({days:e.timeFormat(i),hours:e.timeFormat(n),mins:e.timeFormat(c),sec:e.timeFormat(l),dateDiffSecond:--t}),e.render(),e.timer=setTimeout(function(){e.$el.is(":visible")&&e.setTime()},1e3)}})},{"../ui/util":2122,"./model":65,"./style.sass":66,"./template.hbs":67,"backbone.marionette":6,moment:16,underscore:42}],67:[function(e,t,i){t.exports='<div class="promo_popup">\r\n    <div class="content">\r\n        <div class="header">\r\n              <div class="info">\r\n                  <span>{{name}}</span>\r\n                  {{#not-equal expireDate null}}<span>{{local "general.until"}} {{expireDate}}</span>{{/not-equal}}\r\n              </div>\r\n              {{#not-equal expireDate null}}\r\n\r\n              {{/not-equal}}\r\n              <span class="icon-icon_B017"></span>\r\n        </div>\r\n        <div>\r\n            <a href="javascript:void(0)" class="imgLink" data-url="{{imageLinkAddress}}"><img src="{{imageUrl}}" alt=""></a>\r\n        </div>\r\n    </div>\r\n</div>'},{}],66:[function(e,t,i){t.exports=e("sassify")("/**  *  * @param { 300 | bold } $font-weight  * @param { normal     } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal           } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { 300 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { normal } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ .promo_popup {   position: fixed;   top: 0;   left: 0;   height: 100vh;   width: 100%;   z-index: 10000;   background-color: rgba(27, 27, 27, 0.5); }   .promo_popup .content {     width: 41rem;     position: fixed;     top: 50%;     left: 50%;     z-index: 1001;     -webkit-transform: translate(-50%, -50%);     -moz-transform: translate(-50%, -50%);     -ms-transform: translate(-50%, -50%);     -o-transform: translate(-50%, -50%);     transform: translate(-50%, -50%); }     .promo_popup .content .header {       padding: 1.3rem 2rem;       background: #8DCABB;       color: #ffffff;       position: relative;       font-family: 'Whitney', Helvetica, sans-serif;       font-weight: bold;       width: 100%;       box-sizing: border-box; }       .promo_popup .content .header .info {         display: inline-block;         vertical-align: middle;         margin-right: 2.8rem; }         .promo_popup .content .header .info span {           font-size: 1.4rem;           text-transform: uppercase; }           .promo_popup .content .header .info span:nth-child(2) {             display: block;             margin-top: 0.1rem; }       .promo_popup .content .header .time {         display: inline-block;         vertical-align: middle;         font-size: 2.4rem; }         .promo_popup .content .header .time em {           display: inline-block;           vertical-align: top; }         .promo_popup .content .header .time span {           position: relative;           display: inline-block;           padding: 0 0.8rem; }           .promo_popup .content .header .time span i {             font-size: 1rem;             font-family: 'Whitney', Helvetica, sans-serif;             font-weight: 300;             color: #f3f3f3;             left: 0;             display: block;             width: 100%;             text-align: center;             text-transform: uppercase; }       .promo_popup .content .header .icon-icon_B017 {         font-size: 4.5rem;         position: absolute;         top: 0;         right: 0;         cursor: pointer; }   .promo_popup img {     width: 100%;     height: auto; }   @media (max-width: 768px) {     .promo_popup .content {       width: 90%; }       .promo_popup .content .header .info {         margin-right: 5%; }         .promo_popup .content .header .info span {           font-size: 1rem; }       .promo_popup .content .header .time {         font-size: 2rem; }         .promo_popup .content .header .time span {           padding: 0 1rem; } }       @media (max-width: 768px) and (max-width: 400px) {         .promo_popup .content .header .time span {           padding: 0 0.3rem; } }  .quick-book-popup .promo_popup .content {   width: 30rem; }   .quick-book-popup .promo_popup .content .header {     padding: 0.5rem; }     .quick-book-popup .promo_popup .content .header .info {       margin-right: 5%; }       .quick-book-popup .promo_popup .content .header .info span {         font-size: 0.8rem; }     .quick-book-popup .promo_popup .content .header .time {       font-size: 1.6rem; }       .quick-book-popup .promo_popup .content .header .time em {         display: inline-block;         vertical-align: top;         font-style: inherit; }       .quick-book-popup .promo_popup .content .header .time span {         padding: 0 1rem; }         .quick-book-popup .promo_popup .content .header .time span i {           font-size: 0.4rem;           font-style: inherit; }     .quick-book-popup .promo_popup .content .header .icon-icon_B017 {       font-size: 2.7rem; }  .quick-book-popup .promo_popup img {   width: 100%;   height: auto; }  @media (max-width: 768px) {   .quick-book-popup .promo_popup .content {     width: 90%; }     .quick-book-popup .promo_popup .content .header .info {       margin-right: 2%; }     .quick-book-popup .promo_popup .content .header .time {       font-size: 1rem; }       .quick-book-popup .promo_popup .content .header .time span {         padding: 0 1rem; } }       @media (max-width: 768px) and (max-width: 400px) {         .quick-book-popup .promo_popup .content .header .time span {           padding: 0 0.3rem; } }  html[dir=rtl] .promo_popup .content .header .info {   margin: 0 0 0 2.8rem; }  html[dir=rtl] .promo_popup .content .header .icon-icon_B017 {   left: 0;   right: auto; }  ");
},{sassify:36}],65:[function(e,t,i){var n=e("backbone");t.exports=n.Model.extend({})},{backbone:8}],64:[function(e,t,i){var n=(e("underscore"),e("backbone.marionette")),c=e("backbone"),l=e("./template.hbs"),a=e("../ui/util"),o=e("moment"),s=e("./model");e("./style.sass"),t.exports=PromoCodeHotelView=n.LayoutView.extend({template:function(e){return Handlebars.compile(l)(e)},ui:{imgLink:".imgLink",content:".content"},events:{"click .icon-icon_B017":"closePopup","click .imgLink":"setCook"},initialize:function(){var e=this;e.height=0,c.on("changePromoPopup",this.changePromoPopup,this),this.model=new s(promoPopupHotel);this.model.get("hotelId");a.ismobile()&&a.disableScroll();var t=this.model.get("expireDate");null!=t&&(this.model.set("expireDate",o(t).format("DD/MM/YY")),this.setTime())},onRender:function(){},changePromoPopup:function(e){var t=this;t.height=75,"change"==e&&(t.height=parseInt(jQuery(".count-down").css("top").replace("px",""))+parseInt(jQuery(".count-down").height())+10),t.ui.content.finish().animate({top:t.height},500,function(){t.model.set("top",t.height+"px")})},closePopup:function(){a.enableScroll();var e=this.model.get("hotelId");jQuery.cookie("popupShow"+e,"true",{path:"/"}),this.remove()},setCook:function(){var e=this.model.get("hotelId");jQuery.cookie("popupShow"+e,"true",{path:"/"}),url=this.ui.imgLink.attr("data-url"),window.location.href=url},timeFormat:function(e){return 10>e?"0"+e:e},setTime:function(){clearTimeout(this.timer),this.timer=null;var e=this,t=this.model.get("dateDiffSecond");1>=l&&e.closePopup();var i=Math.floor(t/60/60/24),n=Math.floor((t-60*i*60*24)/60/60),c=Math.floor((t-60*i*60*24-60*n*60)/60),l=Math.floor(t-60*i*60*24-60*n*60-60*c);e.model.set({days:e.timeFormat(i),hours:e.timeFormat(n),mins:e.timeFormat(c),sec:e.timeFormat(l),dateDiffSecond:--t}),e.render(),e.timer=setTimeout(function(){e.$el.is(":visible")&&e.setTime()},1e3)}})},{"../ui/util":2122,"./model":61,"./style.sass":62,"./template.hbs":63,backbone:8,"backbone.marionette":6,moment:16,underscore:42}],63:[function(e,t,i){t.exports='<div class="promo_popup_hotel">\r\n    <div class="content" style="top:{{top}}">\r\n        <div class="header">\r\n              <div class="info">\r\n                  <span>{{name}}</span>\r\n                  {{#not-equal expireDate null}}<span>{{local "general.until"}} {{expireDate}}</span>{{/not-equal}}\r\n              </div>\r\n              {{#not-equal expireDate null}}\r\n\r\n              {{/not-equal}}\r\n              <span class="icon-icon_B017"></span>\r\n        </div>\r\n        <div>\r\n            <a href="javascript:void(0)" class="imgLink" data-url="{{imageLinkAddress}}"><img src="{{imageUrl}}" alt=""></a>\r\n        </div>\r\n    </div>\r\n</div>'},{}],62:[function(e,t,i){t.exports=e("sassify")("/**  *  * @param { 300 | bold } $font-weight  * @param { normal     } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal           } $font-style  */ /**  *  * @param { 300 | 500 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { 300 | bold } $font-weight  * @param { normal          } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { normal } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**  *  * @param { bold } $font-weight  * @param { normal } $font-style  */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ /**     *     * @param { bold } $font-weight     * @param { normal } $font-style     */ .promo_popup_hotel .content {   width: calc(258px + 3.4rem);   position: fixed;   right: 2.8rem;   top: 75px;   z-index: 1001; }   .promo_popup_hotel .content .header {     padding: 1.3rem 2rem;     background: #8DCABB;     color: #ffffff;     position: relative;     font-family: 'Whitney', Helvetica, sans-serif;     font-weight: bold;     width: 100%;     box-sizing: border-box; }     .promo_popup_hotel .content .header .info {       display: inline-block;       vertical-align: middle;       margin-right: 2.8rem; }       .promo_popup_hotel .content .header .info span {         font-size: 1.4rem;         text-transform: uppercase; }         .promo_popup_hotel .content .header .info span:nth-child(2) {           display: block;           margin-top: 0.1rem; }     .promo_popup_hotel .content .header .time {       display: inline-block;       vertical-align: middle;       font-size: 2.4rem; }       .promo_popup_hotel .content .header .time em {         display: inline-block;         vertical-align: top; }       .promo_popup_hotel .content .header .time span {         position: relative;         display: inline-block;         padding: 0 0.8rem; }         .promo_popup_hotel .content .header .time span i {           font-size: 1rem;           font-family: 'Whitney', Helvetica, sans-serif;           font-weight: 300;           color: #f3f3f3;           left: 0;           display: block;           width: 100%;           text-align: center;           text-transform: uppercase; }     .promo_popup_hotel .content .header .icon-icon_B017 {       font-size: 4.5rem;       position: absolute;       top: 0;       right: 0;       cursor: pointer; }  .promo_popup_hotel img {   width: 100%;   height: auto; }  @media (max-width: 768px) {   .promo_popup_hotel {     position: fixed;     top: 0;     left: 0;     height: 100vh;     width: 100%;     z-index: 10000;     background-color: rgba(27, 27, 27, 0.5); }     .promo_popup_hotel .content {       position: fixed;       top: 50%  !important;       left: 50% !important;       z-index: 1001;       -webkit-transform: translate(-50%, -50%);       -moz-transform: translate(-50%, -50%);       -ms-transform: translate(-50%, -50%);       -o-transform: translate(-50%, -50%);       transform: translate(-50%, -50%);       width: 90%; }       .promo_popup_hotel .content .header .info {         margin-right: 5%; }         .promo_popup_hotel .content .header .info span {           font-size: 1rem; }       .promo_popup_hotel .content .header .time {         font-size: 2rem; }         .promo_popup_hotel .content .header .time span {           padding: 0 1rem; } }         @media (max-width: 768px) and (max-width: 400px) {           .promo_popup_hotel .content .header .time span {             padding: 0 0.3rem; } }  .PromoHotelPopup-cro.PromoHotelPopup-cro-for-edit .content {   position: relative;   top: 0;   left: auto;   right: auto; }  html[dir=rtl] .promo_popup_hotel .content .header .info {   margin: 0 0 0 2.8rem; }  html[dir=rtl] .promo_popup_hotel .content .header .icon-icon_B017 {   left: 0;   right: auto; }  ");
},{sassify:36}],61:[function(e,t,i){var n=e("backbone");t.exports=n.Model.extend({})},{backbone:8}],2122:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("./confirmation/view"),o=e("./alert/view"),s=e("../user/model"),r=e("../../../data/country.json"),g=e("../../../config/host"),d=e("./loading/view"),I=function(e){return n.extend([],c.Events,{acquire:function(e){this.scrollTop=jQuery(document).scrollTop(),n.contains(this,e)||this.trigger("change",!!this.push(e))},release:function(e){n.contains(this,e)&&this.trigger("change",!!this.splice(n.indexOf(this,e),1)),this.scrollTop&&jQuery(document).scrollTop(this.scrollTop)}}).on("change",function(){e(this.length)})},b=i=t.exports=window.MHBUtil={registry:{require:e},posmod:function(e,t){return(e%t+t)%t},addremove:function(e,t){return n.contains(e,t)?n.without(e,t):[t].concat(e)},isinrange:function(e,t,i){return e>=t&&i>=e},getCookie:function(e){var t,i=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(i))?unescape(t[2]):null},inrange:function(e,t,i){return Math.max(t,Math.min(/^\d+$/.test(e)?e:0,i))},encodeHtml:function(e){return e.replace(/[<>]/g,function(e){return{"<":"&lt;",">":"&gt;"}[e]})},args:function(e){return n.flatten(Array.prototype.slice.call(e),!0)},translate:function(){return i18n.t.apply(i18n,arguments)},getURL:function(){return g.getURL.apply(g,arguments)},locationhash:function(){return window.location.hash.split("#").pop()},getViewpointWidth:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},getViewpointHeight:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},ismobile:function(){return this.tracker.get("mobile")},ismobileOS:function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)},isIE:function(){return navigator.userAgent.match(/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/)},isRTL:function(){return"rtl"==document.documentElement.getAttribute("dir")},getUser:function(){return s.getInstance()},reqlogin:function(){return this.getUser().trigger("req:login")},usernotify:function(e){return this.getUser().trigger("notification",e)},isloggedin:function(){return this.getUser().isLoggedIn()||this.loginMark},getDateFormat:function(){return this.getUser().get("dateFormat")||window.dateFormat||"DD/MMM/YYYY"},setDateFormat:function(e){var t=b.getDateFormat();switch(e){case 1:return t.replace(/([\W]*)DD([\W]*)/gi,function(e,t,i){return t||i||""});case 2:return t.replace(/([\W]*)yy([\W]*)/gi,function(e,t,i){return t||i||""});default:return t}},redirect:function(e){window.location.href=e},reload:function(){window.location.reload()},strs2obj:function(){var e=n.flatten(Array.prototype.slice.call(arguments),!0);return n.reduce(n.range(0,e.length,2),function(t,i){return t[e[i]]=e[i+1],t},{})},container:function(e,t){return t.container=jQuery(t.container||"body").get(0),this.getInstance(e,function(e){return jQuery(e.model.get("container")).get(0)==t.container},{container:t.container,screenCenter:t.screenCenter})},alert:function(e){return this.container(o,e).alert(e)},confirm:function(e){return this.container(a,e).confirm(e)},error:function(e){return this.container(d,e).error(e)},loading:function(e){return this.container(d,e).set(e)},scroll:function(e){var t="string"==jQuery.type(e)?jQuery("#"+e.split("#").pop()).offset():jQuery.isNumeric(e)?{top:e}:jQuery(e).offset(),i=(t?t.top:0)-(this.ismobile()?jQuery(".headbar.mobile").height():0);t&&jQuery("body,html").stop().animate({scrollTop:i},350)},clickout:function(e,t){jQuery(document).click(function(i){jQuery(i.target).closest(e).length||t(i)})},renderNavbar:function(){this.tracker.trigger("change:mobile")},sendBaynote:function(e){window.bnOrderId=e.orderid,window.bnOrderTotal=e.bnOrderTotal,window.bnOrderDetails=e.bnOrderDetails,window.bnRoomType=e.bnRoomType,window.bnRoomTypeIdentifier=e.bnRoomTypeIdentifier;var t=setInterval(function(){"function"==typeof sendPurchaseInfo&&(sendPurchaseInfo(window.bnOrderId,window.bnOrderTotal,window.bnOrderDetails,window.bnRoomType,window.bnRoomTypeIdentifier),clearInterval(t))},500)},fitInViewpoint:function(e,t){if(e.offset&&e.length){var i=Math.max(document.documentElement.clientHeight,window.innerHeight||0),n=e.offset().top+e.outerHeight()+(t||30);window.scrollY+i<n&&jQuery("html, body").animate({scrollTop:n-i},500)}},lazyLoadImage:function(){function e(){for(var e=0;e<l.bgs.length;){var n=l.bgs.eq(e);if(!n.hasClass("image-loaded")&&n.offset().top<=c.scrollTop()+c.height()||n.hasClass(".always-show-image")){var a=c.width()<=t&&n.data("backgroundurl-mobile")||c.width()<=i&&n.data("backgroundurl-pad")||n.data("backgroundurl-desktop");!function(e,t){function i(){"IMG"===e.prop("tagName")?e.attr("src",t):e.css("background-image","url('"+t+"')"),e.addClass("image-loaded"),e.hide().fadeIn()}var n=l.images[t]||new Image;l.images[t]=n,l.images[t].complete?i():(n.onload=function(){i()},n.src=t)}(n,a),l.bgs.splice(e,1)}else e++}}var t=414,i=768,c=jQuery(window),l=this;l.bgs=jQuery("[data-backgroundurl-desktop]").not(".image-loaded"),l.images=l.images||{},l.lazyLoadHandler||(l.lazyLoadHandler=n.throttle(e,500),b.tracker.on("change:scrolltop",l.lazyLoadHandler)),e()},tracker:function(){var e=new c.Model({mobile:null,scrolltop:null,loggedin:null,focus:null,size:null}).on("change:mobile",function(){jQuery("body").attr("data-mobile",e.get("mobile")),e.trigger("mobile:"+e.get("mobile"))}).on("change:loggedin",function(){jQuery("body").attr("data-loggedin",e.get("loggedin")),e.trigger("loggedin:"+e.get("loggedin"))}).on("change:scrolltop",function(){jQuery("body").attr("data-scrolltop",e.get("scrolltop"))});jQuery(document).on("focus blur","*",function(t){e.set({focus:"focusin"==t.type?t.target:null})});var t=function(){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=Math.max(document.documentElement.clientHeight,window.innerHeight||0);e.set({size:{width:t,height:i},mobile:768>=t})};return jQuery(window).on("orientationchange",t).trigger("resize"),jQuery(window).resize(t).trigger("resize"),jQuery(".m4b").length&&e.get("mobile")||jQuery(document).scroll(function(){e.set({scrolltop:jQuery(document).scrollTop()})}).trigger("scroll"),jQuery(document).on("click",function(t){e.trigger("click",t)}),s.getInstance().on("change:id",function(){e.set({loggedin:s.getInstance().isLoggedIn()})}).trigger("change:id"),e}(),getInstanceModel:function(e,t,i){return this.getInstance(e,function(e){return n.isMatch(e.attributes,t)},i||t)},getInstanceView:function(e,t,i){return this.getInstance(e,function(e){return n.isMatch(e.model.attributes,t)},i||t)},getInstance:function(){var e=Array.prototype.slice.call(arguments),t=e.shift(),i="function"==typeof e[0]&&e.shift(),c=e.length&&"object"==typeof e[e.length-1]&&e.pop()||{},l=e.shift()||c,a=i?n.find(t.instances,i):n.findWhere(t.instances,l),o=t.instances=t.instances||[];return a||(a=new t(c),n.contains(o,a)||o.push(a),!a.render||a.rendered||a.norender||a.render()),a},keys:{37:1,38:1,39:1,40:1},preventDefault:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1},preventDefaultForScrollKeys:function(e){return this.keys[e.keyCode]?(this.preventDefault(e),!1):void 0},disableScroll:function(){window.addEventListener&&window.addEventListener("DOMMouseScroll",this.preventDefault,!1),window.onwheel=this.preventDefault,window.onmousewheel=document.onmousewheel=this.preventDefault,window.ontouchmove=this.preventDefault,window.addEventListener("touchmove",this.preventDefault,{passive:!1}),document.onkeydown=jQuery.proxy(this.preventDefaultForScrollKeys,this)},enableScroll:function(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",this.preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,window.removeEventListener("touchmove",this.preventDefault,{passive:!1}),document.onkeydown=null},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=i.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},getUrlParamQuestion:function(e){var t=location.href.split("?")[1];if(!t)return{};var i=t.split("#")[0],c=n.reduce(i.slice(0,i.length).split("&"),function(e,t){return t=t.split("="),2==t.length&&(e[t[0]]=decodeURIComponent(t[1].replace(/\+/g," "))),e},{});return e?c[e]:c},getLastpushstate:function(){return this.LastPushState},updateCurrencyInUrl:function(e,t){if(location.href.indexOf("currency=")>-1){var i=location.href.replace(/(currency=).*?(&|$)/,"$1"+e+"$2");history&&history.pushState?history.pushState(null,null,i):this.redirect(i)}t&&this.reload()},updateParamHistor:function(e,t){var i=location.href.split("?")[0]||"",c=location.href.split("?")[1]&&location.href.split("?")[1].split("#")[1]||"",l=i,a="";if(n.each(e,function(e,t){a+=t+"="+e+"&"}),t)return a.substring(0,a.length-1);if(a.substring(0,a.length-1)&&(l+="?"+a.substring(0,a.length-1)),c&&(l+="#"+c),history.pushState){if(this.LastPushState==e||this.popstateEvent)return;return history.pushState(e,null,l),void(this.LastPushState=e)}location.href=l},queryparam:function(e){var t=n.reduce(location.search.substr(1).split("&"),function(e,t){return t=t.split("="),2==t.length&&(e[t[0]]=decodeURIComponent(t[1].replace(/\+/g," "))),e},{});return t.promocode=t.promo=t.promocode||t.promo,e?t[e]:t},queryParamFromHash:function(e,t){var i=this.getParamsFromHash(t);return e?i[e]:i},getParamsFromHash:function(e){var t=void 0==e?window.location.hash:e;return n.reduce(t.slice(1,window.location.hash.length).split("&"),function(e,t){return t=t.split("="),2==t.length&&(e[t[0]]=decodeURIComponent(t[1].replace(/\+/g," "))),e},{})},getHashUrl:function(e,t){var i=[],n=e,c=null;for(var l in t)c=t[l],c&&i.push(l+"="+c);return i.length&&(n+=-1===n.indexOf("#")?"#":"&"),n+i.join("&")},updateHash:function(e,t){delete e.holdPosition;var i="holdPosition=true&";return n.each(e,function(e,t){i+=t+"="+e+"&"}),t?i.substring(0,i.length-1):void(window.location.hash=i.substring(0,i.length-1))},optiontemplate:Handlebars.compile('<option value="{{value}}"{{#if selected}} selected{{/if}}>{{text}}</option>'),populateselect:function(e,t){return e?(e.html(t.map(this.optiontemplate).join("")),e.trigger("change")):void 0},titleCase:function(e){for(var t=e.toLowerCase().split(" "),i=0;i<t.length;i++)t[i]=t[i][0].toUpperCase()+t[i].substring(1,t[i].length);var n=t.join(" ");return n},titlegender:function(e,t){var i=this,n="Select Mr Ms Mrs Dr".split(" "),c="Select Male Female".split(" ");this.populateselect(e,n.map(function(t){return{value:"Select"!=t?t:"",text:i18n.t("form."+t),selected:t==(e.val()||e.data("value"))}})).on("change",function(){var n=/^Mr\.?$/i.test(e.val())&&[c[1]]||/^Mr?s/i.test(e.val())&&[c[2]]||c;t&&i.populateselect(t,n.map(function(e){return{value:"Select"!=e?e:"",text:i18n.t("form."+e),selected:e==(t.val()||t.data("value"))}}))}).trigger("change")},Semaphore:I,modal:new I(function(e){jQuery("body").first()[e?"addClass":"removeClass"]("has-modal-view")}),modald:new I(function(e){jQuery("body").first()[e?"addClass":"removeClass"]("has-modal-view-desktop")}),sectionmenu:function(e){var t=jQuery('div[data-type="mobile"]'),i=jQuery('div[data-type="pc"]');t.length&&i.length&&(b.ismobile()?(t.attr("id","about"),i.attr("id","")):(i.attr("id","about"),t.attr("id","")));var c=n.where(e.filter(function(){return jQuery(this).prop("href").indexOf("#")>-1||jQuery(this).attr("data-anchor")}).map(function(){var e=jQuery(this),t=e.attr("data-anchor")||e.prop("href").split("#").pop(),i=null,n=null;try{i=jQuery("#"+t)}catch(c){}return i?(n=!!i.offset(),{el:e,id:t,anchor:i,exists:n,fromtop:function(){return Math.abs(i.offset().top-jQuery(document).scrollTop())}}):void 0}).get(),{exists:!0});return c.length&&jQuery(document).scroll(function(){n.invoke(n.pluck(c,"el"),"removeClass","inview"),n.sortBy(c,function(e){return e.fromtop()}).shift().el.addClass("inview")}).trigger("scroll"),c},justshowmenu:function(e){var t=n.where(e.filter(function(){return jQuery(this).prop("href").indexOf("#")>-1}).map(function(){var e=jQuery(this),t=e.attr("data-anchor")||e.prop("href").split("#").pop(),i=jQuery("#"+t),n=!!i.offset();return{el:e,id:t,anchor:i,exists:n}}).get(),{});return t},country:function(e,t){e&&this.populateselect(e,[{text:i18n.t("form.select")}].concat(r.map(function(i){var n=/\((..)\)/.exec(i.key)[1];return{text:i18n.t("countries."+n),value:i.key,selected:i.key==(t||e.val())}})))},country_x:function(e,t,i){e&&this.populateselect(e,[{text:i18n.t(t)}].concat(r.map(function(t){var n=/\((..)\)/.exec(t.key)[1];return{text:i18n.t("countries."+n),value:t.key,selected:t.key==(i||e.val())}})))},agebands:function(e,t){n.each(e,function(e){e.set({maxValue:e.get("maxoccupancy")||t})})},sendStatisticsReq:function(){},addStatisticsScript:function(){"undefined"!=typeof _satellite&&_satellite.pageBottom()},QA:{Collection:function(e,t,i){var t=n.isString(t)?t.split(" "):t,c=e.filter(function(e){return n.some(t,function(t){return!(n.isArray(e)?n.every(e[t]):e[t])})});e.remove(c)}},measure:function(e,t,i,n){var c={lat:(i-e)*Math.PI/180,lng:(n-t)*Math.PI/180},l=Math.sin(c.lat/2)*Math.sin(c.lat/2)+Math.cos(e*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(c.lng/2)*Math.sin(c.lng/2),a=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return 6378137*a},TEST:function(e){if(e||n.each("getInstance strs2obj".split(" "),this.TEST,this),"getInstance"==e){var t=function(e){n.extend(this,e||{})},i=c.Model.extend(),a=c.View.extend(),o=l.ItemView.extend({template:!1}),s={};[[1.1,!!(s.i1=this.getInstance(t,{name:"John"}))],[1,!(s.i1!=this.getInstance(t,{name:"John"}))],[3,!!(s.i3=this.getInstance(c.Model,{name:"John"}))],[3.1,!(s.i3!=this.getInstance(c.Model,{name:"John"})),s.i3,this.getInstance(c.Model,{name:"John"})],[3.2,!!(s.i3 instanceof c.Model)],[3.2,!(s.i3 instanceof i)],[4,!!(s.i4=this.getInstance(i,{name:"Bob"}))],[4.1,!(s.i4!=this.getInstance(i,{name:"Bob"}))],[4.2,!!(s.i4 instanceof c.Model)],[4.3,!!(s.i4 instanceof i)],[5,!!(s.i5=this.getInstance(c.View,{model:new c.Model({name:"John"})}))],[5.1,!(s.i5!=this.getInstance(c.View,{name:"John"}))],[5.2,!!(s.i5 instanceof c.View)],[5.3,!(s.i5 instanceof a)],[6,!!(s.i6=this.getInstance(a,{model:new c.Model({name:"John"})}))],[6.1,!(s.i6!=this.getInstance(a,{name:"John"}))],[6.2,!!(s.i6 instanceof c.View)],[6.2,!!(s.i6 instanceof a)],[7,!!(s.i7=this.getInstance(o,{model:new c.Model({name:"John"})}))],[7.1,!(s.i7!=this.getInstance(o,{name:"John"}))],[7.2,!!(s.i7 instanceof c.View)],[7.2,!!(s.i7 instanceof l.ItemView)],[7.2,!!(s.i7 instanceof o)],[7.2,!(s.i7 instanceof c.Model)]]}},generateUUID:function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)});return t},exitFullScreen:function(){document.cancelFullScreen?document.cancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},launchFullscreen:function(e){this.isFullScreen()||(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen())},isFullScreen:function(){var e=document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement;return e},fullscreenChangeType:function(){return document.fullscreenEnabled?"fullscreenChange":document.msFullscreenEnabled?"MSFullscreenChange":document.webkitFullscreenEnabled?"webkitfullscreenchange":document.mozFullScreenEnabled?"mozfullscreenchange":!1},fullscreenSupport:function(){var e=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;return e},isFullScreen:function(){var e=document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement;return e},urlEncode:function(e){for(var t=e.length,i=0;t>i;i++)e[i].url&&(e[i].url=encodeURI(e[i].url)),e[i].desktopUrl&&(e[i].desktopUrl=encodeURI(e[i].desktopUrl)),e[i].mobileUrl&&(e[i].mobileUrl=encodeURI(e[i].mobileUrl)),e[i].placeholder&&(e[i].placeholder=encodeURI(e[i].placeholder));return e},highLightSearchTerm:function(e,t,i){return t.replace(new RegExp(e.trim(),"ig"),function(e){return jQuery("<em>"+e+"</em>").css(i||{"font-weight":"bold"}).prop("outerHTML")})},toTree:function(e,t){var i={},n=[],t=t||"pid";return e.forEach(function(e){delete e.children}),e.forEach(function(e){i[e.id]=e}),e.forEach(function(e){var c=i[e[t]];c?(c.children||(c.children=[])).push(e):n.push(e)}),n},getRatingScoreKey:function(e,t){switch(parseInt(e.score_flag,10)){case 0:return e.score=e.score||"88%",{isKey:!0,text:t||"maps.would_book_with_us_again"};case 1:return e.score=e.score||"8.8",{isKey:!1,text:e.reviewmessage};case 2:return e.score=(e.score||"8.8")+" / 10 ",{isKey:!1,text:e.reviewmessage};case 3:return e.score="",{isKey:!1,text:e.reviewmessage}}},getStaticMediaUrl:function(e,t){return window.staticMediaObjects&&window.staticMediaObjects[e]&&window.staticMediaObjects[e][t].url},getStaticMediaAlt:function(e,t){return window.staticMediaObjects&&window.staticMediaObjects[e]&&window.staticMediaObjects[e][t].alt},getStaticMedia:function(e,t){return window.staticMediaObjects&&window.staticMediaObjects[e]&&window.staticMediaObjects[e][t]},getCursortPosition:function(e){var t=0;if(document.selection){e.focus();var i=document.selection.createRange();i.moveStart("character",-e.value.length),t=i.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t},setCaretPosition:function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}},isM4B:function(){return!!jQuery(".m4b").length}}},{"../../../config/host":45,"../../../data/country.json":47,"../user/model":2132,"./alert/view":2051,"./confirmation/view":2060,"./loading/view":2096,backbone:8,"backbone.marionette":6,underscore:42}],2132:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("../../../config/host.js"),a=(e("moment"),e("../ui/scratchpad-item/collection")),o=e("../ui/validator.js"),s=o.latinRegex3,r=(o.latinNumericsSymbols,o.alphaNumerics2,t.exports=c.Model.extend({url:l.getURL("api","account/profile"),defaults:{shopping_cart:window.cartNumber||0},validation:{title:{required:!0},gender:{required:!0},country:{required:!0},phone:{pattern:/^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/,required:!0},address:{required:!0},email:{required:!0,pattern:"email"},postal_code:{required:!1,maxLength:16},first_name:{required:!0,pattern:s,maxLength:254},last_name:{required:!0,pattern:s,maxLength:254},province:{required:!0,maxLength:254},city:{required:!0,maxLength:254},dateFormat:{required:!1},birthday:function(e){return o.validators.date(e,18)}},isLoggedIn:function(){return!!this.id},canChangePassword:function(){return!(this.get("accountRelated")&&(this.get("accountRelated").linkfacebook||this.get("accountRelated").linkgoogle))},parse:function(e){var t=this;return n.each(e.scratchpad,function(e){e.favourite=!0}),e.scratchpad=new a(e.scratchpad),t.listenTo(e.scratchpad,"add",function(e){e.get("favourite")&&t.trigger("add:scratchpad",e)}),t.listenTo(e.scratchpad,"change:favourite",function(e){t.trigger((e.get("favourite")?"add":"remove")+":scratchpad",e)}),t.listenTo(e.scratchpad,"change reset add remove",function(){t.trigger("change:scratchpad change")}),t.listenTo(e.scratchpad,"reset",function(){t.trigger("notification",i18n.t("scratchpad.notification_cleared"))}),t.on("change:password",function(){t.trigger("notification",i18n.t("user_panel.notification_password_changed"))}),t.on("add:scratchpad",function(e){t.trigger("notification",i18n.t("scratchpad.item_added"),e)}),t.on("remove:scratchpad",function(e){t.trigger("notification",i18n.t("scratchpad.item_removed"),e)}),e},getScratchPad:function(e){if(this.get("scratchpad")){var t=this.get("scratchpad").get(e.id);t?e=t:this.get("scratchpad").add(e,{at:0})}return e}},{getInstance:function(){var e=this;return e.instance||(e.instance=new r,e.instance.deferredPromise=new jQuery.Deferred,e.instance.fetchPromise=e.instance.fetch(),e.instance.fetchPromise.always(function(){var t=e.instance.fetchPromise;t.responseJSON=t.responseJSON||{},"Server"===t.responseJSON.Field&&jQuery.cookie("beforeLoginFlag",t.responseJSON.flag,{path:"/"}),e.instance.set({flag:t.responseJSON.flag,loginWithDifferentAccountType:jQuery.cookie("beforeLoginFlag")^t.responseJSON.flag}),e.instance.deferredPromise.resolve(e.instance)})),this.instance}}))},{"../../../config/host.js":45,"../ui/scratchpad-item/collection":2111,"../ui/validator.js":2123,backbone:8,moment:16,underscore:42}],2111:[function(e,t,i){var n=e("backbone"),c=e("./model");i=t.exports=n.Collection.extend({model:c})},{"./model":2112,backbone:8}],2112:[function(e,t,i){var n=e("backbone"),c=e("../../../../config/host.js");e("moment"),i=t.exports=n.Model.extend({urlRoot:c.getURL("api","scratchpad"),isValid:function(){return!!this.id},defaults:{id:"",type:"",content:"",favourite:!1,timestamp:"",title:"",msg:"",url:""},initialize:function(){var e=this;e.set({content:e.get("content")||e.get("id"),url:c.adjustURL(e.get("url"))}).on("change:favourite",function(){e.get("favourite")&&e.set({timestamp:Date.now()}),e.clone()[e.get("favourite")?"save":"destroy"]()})}})},{"../../../../config/host.js":45,backbone:8,moment:16}],2096:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../../abmb/stateful"),o=e("../../millennium-for-business/m4b-add-member/m4b-tip-bar/view");t=t.exports=l.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"loading-container",ui:{loading:".loading-block p",error:".loading-error-block p"},hide:function(){this.switchState("loading:hide")},switchState:function(e){return n.extend({$el:jQuery(this.model.get("container"))},a).switchState(e),this},attach:function(){var t=e("../../ui/util"),i=Array.prototype.slice.call(arguments),n="loading:"+i.shift(),c=i.shift(),l="string"==jQuery.type(i[0])&&i[0]?t.strs2obj(c,i.shift()):i.shift()||{};return this.model.get("appendElement")?jQuery(this.model.get("container")).append(this.el):jQuery(this.model.get("container")).prepend(this.el),this.set(l).switchState(n)},loading:function(){this.attach("show","loading",arguments[0])},error:function(){this.attach("error","error",arguments[0])},set:function(e){return this.model.set(n.pick(e,n.keys(this.model.attributes))),this},initialize:function(t){var i=this,t=t||{};i.model=new c.Model({container:jQuery(t.container||"body").get(0),loading:""==t.loading?t.loading:t.loading||i18n.t("general.loading_wait"),error:t.error||i18n.t("general.loading_error"),appendElement:t.appendElement,screenCenter:t.screenCenter,forM4BInline:t.forM4BInline,forM4BNoLayerError:t.forM4BNoLayerError,M4BTipToTop:t.M4BTipToTop,M4BGeneralInline:t.M4BGeneralInline,promise:null,showerror:!0,errortimeout:0,errorreload:0}).on("change:loading",function(){i.ui.loading.html(i.model.get("loading"))}).on("change:error",function(){i.ui.error.html(i.model.get("error"))}).on("change:promise",function(){i.model.get("promise")?(i.loading(),i.model.get("promise").then(function(){i.hide()},function(){var t="string"==jQuery.type(arguments[0])?arguments[0]:n.pluck(n.flatten([arguments[0]?arguments[0].responseJSON:""],!0),"msg").join("<hr>");t&&i.model.set({error:t});var c=e("../../ui/util");if(c.isM4B())if(i.model.get("forM4BInline")){if(i.model.get("M4BGeneralInline")){var l="string"==jQuery.type(arguments[0])?arguments[0]:n.pluck(n.flatten([arguments[0]?arguments[0].responseJSON:""],!0),"field"),a=jQuery('[data-bind="'+l+'"]').closest(".field");if(!a.length)return void(jQuery(".m4b-tip-bar-container").length&&(i.tipView=new o({el:jQuery(".m4b-tip-bar-container").get(0),renderContent:t,isError:!0}).render(),setTimeout(function(){i.model.get("M4BTipToTop")&&jQuery(".m4b-modify-error").css({zIndex:19999,top:0})},0),i.hide()));a&&!a.find(".notice").length&&a.append("<div class='error-tip notice'><i class='icon-icon_B015'></i><span></span></div>"),a.find(".notice").find("span").text(t),a.addClass("input-error"),a.find(".notice").show(),jQuery('[data-bind="'+l+'"]').one("focusout",function(){a.find(".notice").hide()})}else jQuery(".m4b-login-verify-container").find(".field").addClass("input-error"),jQuery(".verifyPasswordContainer").find(".notice").show(),jQuery(".verifyPasswordContainer").find(".notice").find("span").text(t);i.hide()}else if(i.model.get("forM4BNoLayerError"))i.hide();else if(jQuery(".m4b-tip-bar-container").length)i.tipView=new o({el:jQuery(".m4b-tip-bar-container").get(0),renderContent:t,isError:!0}).render(),setTimeout(function(){i.model.get("M4BTipToTop")&&jQuery(".m4b-modify-error").css({zIndex:19999,top:0})},0),i.hide();else if(i.model.get("showerror")){i.error(t);var s=i.model.get("errorreload")||i.model.get("errortimeout");s&&setTimeout(function(){i.model.get("errorreload")?window.location.reload():i.hide()},s)}else i.hide();else if(i.model.get("showerror")){i.error(t);var s=i.model.get("errorreload")||i.model.get("errortimeout");s&&setTimeout(function(){i.model.get("errorreload")?window.location.reload():i.hide()},s)}else i.hide()})):i.hide()}),i.render()},onRender:function(){}})},{"../../abmb/stateful":72,"../../millennium-for-business/m4b-add-member/m4b-tip-bar/view":1226,"../../ui/util":2122,"./template.hbs":2095,backbone:8,"backbone.marionette":6,underscore:42}],2095:[function(e,t,i){t.exports='<div class="loading-block"><p class="loading-gif" {{#if screenCenter}}style="position:fixed" {{/if}}> <span>{{loading}}</span> </p></div>\r\n<div class="loading-error-block" {{#if screenCenter}}style="position:fixed" {{/if}}><p> {{error}} </p></div>'},{}],1226:[function(e,t,i){var n=(e("underscore"),e("backbone"),e("backbone.marionette")),c=e("./template.hbs"),l=5e3;t.exports=n.ItemView.extend({template:Handlebars.compile(c),ui:{tip:".m4b-stick-tip",cancelButton:".icon-icon_B017"},events:{"click @ui.cancelButton":function(){this.ui.tip.remove()}},initialize:function(){this.options.closeTime&&(l=this.options.closeTime)},serializeData:function(){var e=this;return{renderContent:e.options.renderContent,error:e.options.isError}},onRender:function(){var e=this;e.options.isError||setTimeout(function(){e.ui.tip.remove()},l)}})},{"./template.hbs":1225,backbone:8,"backbone.marionette":6,underscore:42}],1225:[function(e,t,i){t.exports='{{#if error}}\r\n    <div class="m4b-modify-error m4b-stick-tip">\r\n        <span class="icon-icon_B015"></span>\r\n        <span class="">{{renderContent}}</span>\r\n        <span class="icon-icon_B017"></span>\r\n    </div>\r\n{{else}}\r\n    <div class="m4b-modify-tip m4b-stick-tip">\r\n        <span class="icon-icon_I009"></span>\r\n        <span class="">{{renderContent}}</span>\r\n        <span class="icon-icon_B017"></span>\r\n    </div>\r\n{{/if}}\r\n\r\n'},{}],72:[function(e,t,i){var n=e("underscore"),c=e("backbone");i=t.exports=n.extend({_classes:function(){return this.$el.length?this.$el.get(0).className.split(" "):[]},_parse:function(e){var t=e.split(":"),i=t.shift(),n=t.shift()||"";return{key:i,value:n}},hasState:function(e){return this.getState(e)==this._parse(e).value},getState:function(e){return this.getStates()[this._parse(e).key]},getStates:function(){return n.reduce(this._classes(),function(e,t){var i=t.split("-"),n=i.shift(),c=i.join("-");return c&&(e[n]=c),e},{})},toggleState:function(e,t,i){this.switchState(this._parse(e).key+":"+(this.getState(e)==t?i:t))},switchState:function(e,t){return this.switchLock?void 0:this.setState(e,t)},setState:function(e,t){var i=this._parse(e),n=this.hasState(e);return this.removeState(e),this.$el.addClass([i.key,i.value].join("-")),t||n||this.trigger("state:enter",e),n},removeState:function(e,t){var i=this._parse(e),c=0;return n.each(this._classes(),function(e){var t=e.split("-"),n=t.shift(),l=t.join("-");n==i.key&&(this.$el.removeClass(e),i.value==l&&c++)},this),!t&&c&&this.trigger("state:leave",e),c}},c.Events)},{backbone:8,underscore:42}],2060:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette"),a=e("../validator");t.exports=l.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"tpl-full-screen-mask",ui:{input:".input",ok:"a.ok",cancel:"a.cancel",title:"h4",message:"p"},attach:function(){jQuery(this.model.get("container")).prepend(this.el)},initialize:function(e){var t=this;t.model=new c.Model(n.extend({ok:i18n.t("general.ok"),cancel:i18n.t("general.cancel"),title:i18n.t("general.confirm"),message:i18n.t("general.are_you_sure"),promise:jQuery.Deferred().resolve(),container:jQuery(e&&e.container||"body").get(0),alternateTheme:e&&e.alternateTheme,inputTemplate:e&&e.inputTemplate},n.pick(e||{},"ok cancel title message".split(" ")))).on("change:ok",function(){t.ui.ok.html(t.model.get("ok"))}).on("change:cancel",function(){t.ui.cancel.html(t.model.get("cancel"))}).on("change:title",function(){t.ui.title.html(t.model.get("title"))}).on("change:message",function(){t.ui.message.html(t.model.get("message"))}),t.model.validation=e.inputModelValidation},onRender:function(){this.model.validation&&a.bind(this)},confirm:function(e){var t=this,i="string"==jQuery.type(e)?{message:e}:"object"==jQuery.type(e)?n.pick(e,n.keys(t.model.attributes)):{},c=jQuery.Deferred(),l=c.promise().always(function(){t.$el.hide()});return t.model.get("promise").always(function(){t.attach(),t.$el.show(),t.model.set(i),t.ui.ok.on("click",function(){t.model.validation?(t.trigger("save:form"),t.model.isValid(!0)&&c.resolve(t.model.toJSON())):c.resolve()}),t.ui.cancel.one("click",function(){c.reject()})}),t.model.set({promise:l}),l}})},{"../validator":2123,"./template.hbs":2059,backbone:8,"backbone.marionette":6,underscore:42}],2123:[function(e,t,i){var n=e("underscore"),c=e("moment"),l=e("underscore.string/sprintf"),a=(e("backbone"),e("../../../config/host")),o=e("backbone-validation");t.exports={patterns:{latin:/^[A-z\u00C0-\u00ff ]+$/,keyboard:/^[A-z 0-9\`\-\=\~\!\@\#\$\%\^\&\*\(\)\_\+\{\}\|\[\]\\\:\"\;\'\<\>\?\,\.\r\n\/]+$/i,latinNumericSym:/^([A-z 0-9\u00C0-\u00ff\-\~\!\@\#\$\%\^\&\*\(\)\_\+\{\}\[\:\"\;\'\`\,\.\<\>\?\]\/])+$/i,alphanumeric:/^[a-z0-9 ]+$/i,alphanumeric2:/^[a-z0-9 -]+$/i},latinRegex:/^[A-z\u00C0-\u00ff]+$/,latinRegex2:/^[A-z\u00C0-\u00ff \-\'\`]+$/,latinRegex3:/^[A-Za-z\d,_\u00C0-\u00ff\ \-\'\`]+$/,latinRegex4:/^[0-9a-zA-Z]+$/,latinRegex5:/^[0-9a-zA-Z ]+$/,latinRegex6:/^[A-Za-z\d,_\u00C0-\u00ff\ \-\'\`\&\!\/\.\(\)\@\+\-]+$/,latinNumericsSymbols:/^([A-z0-9\u00C0-\u00ff \-\~\!\@\#\$\%\^\&\*\(\)\_\+\{\}\[\:\"\;\'\`\,\.\<\>\?\]\/])+$/,alphaNumerics:/^[a-z0-9 ]+$/i,alphaNumerics2:/^[a-z0-9 -]+$/i,bind:function(t,i){var s=function(){return t.$("[data-bind]")},r=function(){return n.uniq(n.map(s(),function(){return jQuery(this).data("bind")}))},g=function(e){return s().filter(function(){return jQuery(this).data("bind")==e})},d=function(e){return g(e).closest(".field")},I=t.$el.closest(".form").length?t.$el.closest(".form"):t.$(".form"),b=s().map(function(){return{$el:jQuery(this),val:jQuery(this).val()}}),C=t.$("img.captcha");if(CAPTCHA_PATH=a.host+"/layouts/Captcha/CaptchaImage.aspx",i&&i.populateuserinfo){var u=e("./util");u.getUser().fetchPromise.then(function(){n.each(n.pairs(u.getUser().attributes),function(e){t.$(l('[data-bind="%s"]',e[0])).val(e[1])})})}return C.attr("src",CAPTCHA_PATH+"?rand="+Math.random()),i&&i.onInput?t.delegateEvents(n.extend({"input [data-bind]":function(e){t.trigger("blur:input",e)},"click i.checkbox[data-bind]":function(e){jQuery(e.target).closest(".field").addBack().toggleClass("checked"),t.trigger("blur:input",e)},"focusout [data-bind]":function(e){
t.trigger("blur:input",e)},"change   [data-bind]":function(e){t.trigger("blur:input",e)},"click img.captcha":function(){C.attr("src",CAPTCHA_PATH+"?rand="+Math.random())}},t.events)):t.delegateEvents(n.extend({"click i.checkbox[data-bind]":function(e){jQuery(e.target).hasClass("disabled")||(jQuery(e.target).closest(".field").addBack().toggleClass("checked"),t.trigger("blur:input",e))},"focusout [data-bind]":function(e){t.trigger("blur:input",e)},"change   [data-bind]":function(e){t.trigger("blur:input",e)},"click img.captcha":function(){C.attr("src",CAPTCHA_PATH+"?rand="+Math.random())}},t.events)),t.on("reset:form",function(){b.each(function(){this.$el.val(this.val).trigger("change")}),t.$(".field.input-error").removeClass("input-error")}),t.on("save:form",function(){s().each(function(){t.trigger("blur:input",{target:this})}),n.each(r(),function(e){t.model.isValid(e)||(g(e).filter(function(){return t.model.preValidate(e,jQuery(this).val())}).first()||g(e)).focus()}),I[t.model.isValid(!0)?"removeClass":"addClass"]("has-error input-error")}),t.on("save:error",function(e){var t=I.addClass("has-error server-error").find(".form-wide-error .server-error"),i=n.filter(n.flatten([e],!0),function(e){return e.field}),c=n.filter(n.pluck(i,"msg")).join("<hr>");c&&t.html(c),n.each(i.reverse(),function(e){var t=d(e.field).addClass("input-error server"),i=t.find(".error-tip.null"),n=t.find(".error-tip.server");n.length||(n=jQuery('<span class="error-tip server"></span>').insertAfter(i)),n.html(e.msg),g(e.field).focus(),"captcha"===e.field&&C.attr("src",CAPTCHA_PATH+"?rand="+Math.random())})}),t.on("blur:input",function(i){I.removeClass("has-error input-error network-error server-error");var l=jQuery(i.target),a=l.data("bind"),o={},s=l.attr("skip-date-convert"),r=e("./util");if(r.isM4B()&&"INPUT"==l[0].nodeName&&l.val(l.val().trim()),l.val()&&!t.model.preValidate(a,l.val())&&!s&&("bday"==l.attr("autocomplete")||/date|birthday/.test(a))){var d=c(l.val(),"DD/MM/YYYY");d.isValid()&&l.val(d.format("DD/MM/YYYY"))}/phone/.test(a)&&!/^\+/.test(l.val())&&(l.val("+"+l.val()),"+"===l.val()&&l.val("")),a&&(o[a]=n.filter(n.flatten(g(a).filter(function(){return!jQuery(this).parents().filter(function(){return"none"==jQuery(this).css("display")}).length}).map(function(){return jQuery(this).is("i.checkbox")?jQuery(this).hasClass("checked")?jQuery(this).data("value")||1:"":!s&&jQuery(this).val()||s&&jQuery(this).data("date-value")}).get()),function(e){return e}).join("|"),t.model.set(o),t.model.isValid(a))}),o.bind(t,{valid:function(e,t){i&&i.lazeModifyStyle?setTimeout(function(){return d(t).removeClass("input-error server null not-null").addClass("pass")},100):d(t).removeClass("input-error server null not-null").addClass("pass")},invalid:function(e,t,n){g(t).each(function(){var n=jQuery(this),c=n.closest(".field"),l=jQuery(".m4b-register").length?c.find(".error-tip.not-null span"):c.find(".error-tip.not-null"),a=l.data("content-key-prefix"),o=l.data("use-error-string"),s=n.val(),r=e.model.preValidate(t,s);i&&i.lazeModifyStyle?setTimeout(function(){c[s?"addClass":"removeClass"]("not-null")[s?"removeClass":"addClass"]("null")[r?"addClass":"removeClass"]("input-error")[r?"removeClass":"addClass"]("pass")},100):c[s?"addClass":"removeClass"]("not-null")[s?"removeClass":"addClass"]("null")[r?"addClass":"removeClass"]("input-error")[r?"removeClass":"addClass"]("pass"),a?l.html(i18n.t("form_error."+a+r)):o&&l.html(r)})}}),this},validators:{date:function(e,t,i){var n=(e||"").split("/"),l=n.pop(),a=n.pop(),o=n.pop(),s=c().diff(c(e,"DD/MM/YYYY"),"years"),r=function(e){return e%4==0&&e%100!=0||e%400==0};if(isNaN(s)&&(new Date).getFullYear()-l<t&&(s=0),!/^\d+$/.test(l)||0>s||s>150)return"year";if(!i){if(!/^\d+$/.test(a)||a.length>2||a>12||1>a)return"month";if(!/^\d+$/.test(o)||o.length>2||1>o||/^0?(1|3|5|7|8|10|12)$/.test(a)&&o>31||/^0?(4|6|9|11)$/.test(a)&&o>30||2==a&&o>(r(l)?29:28))return"day"}return t&&t>s?"minage":void 0}}}},{"../../../config/host":45,"./util":2122,backbone:8,"backbone-validation":3,moment:16,underscore:42,"underscore.string/sprintf":41}],2059:[function(e,t,i){t.exports='<div class="tpl-button-click-tips large-alert-box">\r\n    <h4>{{title}}</h4>\r\n    <div class="content-error-tips">\r\n        {{#if inputTemplate}}\r\n            <div class="input">\r\n                {{{inputTemplate}}}\r\n            </div>\r\n        {{else}}\r\n            <p>{{{message}}}</p>\r\n        {{/if}}\r\n        <div class="clearfix">\r\n            {{#if alternateTheme}}\r\n                <a class="ok wgt-sqbutton">{{ok}}</a>\r\n                <a class="cancel wgt-sqbutton-black">{{cancel}}</a>\r\n            {{else}}\r\n                <a class="cancel wgt-sqbutton-black">{{cancel}}</a>\r\n                <a class="ok wgt-sqbutton-dark">{{ok}}</a>\r\n            {{/if}}\r\n        </div>\r\n    </div>\r\n</div>\r\n'},{}],2051:[function(e,t,i){var n=e("underscore"),c=e("backbone"),l=e("backbone.marionette");t.exports=l.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"tpl-full-screen-mask",ui:{ok:"a",message:"p"},initialize:function(){var e=this,t=arguments[0]||{};e.$el.hide(),e.model=new c.Model(n.extend({ok:i18n.t("general.ok"),message:"",container:jQuery(t.container||"body").get(0),promise:jQuery.Deferred().resolve()},t)).on("change:message",function(){e.ui.message.html(e.model.get("message"))}).on("change:ok",function(){e.ui.ok.html(e.model.get("ok"))})},attach:function(){jQuery(this.model.get("container")).prepend(this.el)},alert:function(e){var t=this,i="string"==jQuery.type(e)?{message:e}:"object"==jQuery.type(e)?n.pick(e,["ok","message"]):{},c=jQuery.Deferred(),l=c.promise().always(function(){t.$el.hide()}),a=function(){c.resolve()};return t.model.get("promise").then(function(){t.attach(),t.$el.show(),t.model.set(i),t.ui.ok.one("click",a),e&&e.timeout&&setTimeout(a,e.timeout)}),t.model.set({promise:l}),l}})},{"./template.hbs":2050,backbone:8,"backbone.marionette":6,underscore:42}],2050:[function(e,t,i){t.exports='<div class="tpl-button-click-tips">\r\n    <div class="content-error-tips">\r\n        <!-- TODO: add title bar == \'Alert!\' -->\r\n        <p>{{message}}</p>\r\n        <div class="clearfix"><a class="wgt-sqbutton-black">{{ok}}</a></div>\r\n    </div>\r\n</div>'},{}],1343:[function(e,t,i){var n=(e("underscore"),e("elfjs"));t.exports=n.Component("m4b-tip-bar",{render:n.redactElement(e("./temp.html")),constructor:function(){},onInitial:function(){var e=this;this.isError&&!this.props.closeError||n.setTimeout(function(){e.onClose()},5e3)},onClose:function(){n.dispatchEvent(this,n.createEvent("Close",!0))},get isError(){return this.props.isError},get displayContent(){return this.props.displayContent}})},{"./temp.html":1342,elfjs:10,underscore:42}],1342:[function(e,t,i){t.exports='<div>\r\n    <div class="m4b-modify-tip" e-if="!isError">\r\n        <span class="icon-icon_I009"></span>\r\n        <span class="">{{ displayContent }}</span>\r\n        <span class="icon-icon_B017" onclick="onClose();"></span>\r\n    </div>\r\n    <div class="m4b-modify-error" e-if="isError">\r\n        <span class="icon-icon_B015"></span>\r\n        <span class="">{{ displayContent }}</span>\r\n        <span class="icon-icon_B017" onclick="onClose();"></span>\r\n    </div>\r\n</div>'},{}],1399:[function(e,t,i){function n(e){return"offsetY"in e?e.offsetY:e.clientY-e.target.getBoundingClientRect().top}var c=e("elfjs"),l=e("iscroll");t.exports=c.Component("vertical-container",{render:function(){return c.createElement("div",{ref:"container",onClick:this,className:this.props["class"]||this.props.className||"m4b-scroll-container"},[c.createElement("div",{ref:"content"},this.props.children)])},onInitial:function(){var e=this;e.scrollbar=new l(e.refs.container,{interactiveScrollbars:!0,resizeScrollbars:!0,fadeScrollbars:!1,mouseWheel:"mouseWheel"in e.props?e.props.scrollbars:!0,scrollbars:"scrollbars"in e.props?e.props.scrollbars:!0,bounce:!1,tap:!0}),e.scrollbar.on("scrollStart",function(){e.refs.container.classList.add("active")}),e.scrollbar.on("scrollEnd",function(){setTimeout(function(){e.refs.container.classList.remove("active")},100)}),e.shouldShowScrollBar(),c.attachEvent(window,"resize",this),setTimeout(function(){e.refs.container&&(e.shouldShowScrollBar(),e.scrollbar&&e.scrollbar.refresh())})},onDispose:function(){c.detachEvent(window,"resize",this),this.scrollbar&&this.scrollbar.destroy()},handleEvent:function(e){if(e.stopPropagation(),"resize"===e.type&&this.shouldShowScrollBar(),"click"===e.type){e.stopPropagation();var t=e.target.className.split(/\s/g);if(t.indexOf("iScrollVerticalScrollbar")>=0){var i=this.refs.container,c=this.refs.content,l=e.target,a=l.children[0];if(i&&c&&a){var o=n(e.originalEvent),s=l.clientHeight,r=a.clientHeight,g=i.clientHeight,d=c.clientHeight;if(s>0&&r>0&&g>0&&d>0&&s>r&&d>g){var I=Math.max(0,Math.min(s-r,o-r/2)),b=I/(s-r)*(d-g);this.scrollbar.scrollTo(0,0-b,300)}}}}},refresh:function(){this.shouldShowScrollBar(),this.scrollbar&&this.scrollbar.refresh()},scrollToTop:function(){this.scrollbar.scrollTo(0,0,300)},shouldShowScrollBar:function(){var e=this,t=this.refs.container,i=this.refs.content;if(t&&i){var n=t.clientHeight,c=i.clientHeight;n>=c?this.scrollbar&&(this.scrollbar.destroy(),this.scrollbar=null):this.scrollbar||(e.scrollbar=new l(e.refs.container,{interactiveScrollbars:!0,resizeScrollbars:!0,fadeScrollbars:!1,mouseWheel:"mouseWheel"in e.props?e.props.scrollbars:!0,scrollbars:"scrollbars"in e.props?e.props.scrollbars:!0,bounce:!1,tap:!0}),e.scrollbar.on("scrollStart",function(){e.refs.container.classList.add("active")}),e.scrollbar.on("scrollEnd",function(){setTimeout(function(){e.refs.container.classList.remove("active")},100)}))}}})},{elfjs:10,iscroll:14}],1374:[function(e,t,i){var n=e("elfjs"),c=e("swiper");t.exports=n.Component("dynamic-swiper",{render:function(){return n.createElement("div",{ref:"swiper",className:"swiper-container"},n.createElement("div",{className:"swiper-wrapper"},this.props.children))},onInitial:function(){this.swiper=new c(this.refs.swiper,{loop:!this.props.disableLoop,noSwiping:this.props.enableNoSwiping,slidesPerView:this.props.slidesPerView||1,calculateHeight:this.props.calculateHeight||!1,onSlideTouch:function(){n.forceUpdate()},onTouchStart:function(){n.forceUpdate()},onTouchEnd:function(){n.forceUpdate()},pagination:this.props.pagination||null,paginationClickable:this.props.paginationClickable||!1}),n.attachEvent(window,"resize",this)},onDispose:function(){this.swiper.destroy(),n.detachEvent(window,"resize",this)},handleEvent:function(e){e.stopPropagation(),"resize"===e.type&&this.props.enableResizeRefresh&&this.swiper.resizeFix()},swipeNext:function(){this.swiper.swipeNext()},swipePrev:function(){this.swiper.swipePrev()},reInit:function(){this.swiper.reInit()},get activeIndex(){return this.swiper?this.swiper.activeLoopIndex:0}})},{elfjs:10,swiper:40}],48:[function(e,t,i){t.exports={AU:{ACT:"Australian Capital Territory",NT:"Northern Territory",QLD:"Queensland",NSW:"New South Wales",TAS:"Tasmania",VIC:"Victoria",WA:"Western Australia",SA:"South Australia"},CA:{SK:"Saskatchewan",QC:"Quebec",PE:"Prince Edward Island",ON:"Ontario",NT:"Northwest Territories",YT:"Yukon Territories",NL:"Newfoundland & Labrador",NB:"New Brunswick",MB:"Manitoba",BC:"British Columbia",AB:"Alberta",NS:"Nova Scotia"},CN:{AHS:"Anhui Province",CQS:"Chongqing",FJS:"Fujian Province",GDS:"Guangdong Province",GSS:"Gansu Province",GXZ:"Guangxi Province",GZS:"Guizhou",HBS:"Hebei Province",HEN:"Henan Province",HLJ:"Heilongjiang Province",HNS:"Hainan",HUN:"Hunan",HUS:"Hubei Province",JLS:"Jilin Province",JSS:"Jiangsu Province",JXS:"Jiangxi Province",LNS:"Liaoning Province",NMA:"Neimenggu",NXZ:"Ningxia",PEK:"Beijing",QHS:"Qinghai Province",SCS:"Sichuan Province",SDS:"Shandong Province",SHA:"Shanghai",SIS:"Shanxi Prov (Datong)",SXS:"Shanxi Prov (Xian)",TSN:"Tianjin",XJW:"Xinjiang",XZZ:"Xizang",YNS:"Yunan",ZJS:"Zhejiang Province"},DE:{BA:"Bayern (Bavaria)",TH:"Thueringen",BR:"Brandenburg",BW:"Baden-Wuerttemberg",HB:"Bremen",HE:"Hessen",HH:"Hamburg",MV:"Mecklenburg-Vorpommern",NS:"Niedersachsen",NW:"Nordrhein-Westfalen",RP:"Rheinland-Pfalz",SA:"Sachsen",SAA:"Sachsen-Anhalt",SH:"Schleswig-Holstein",SL:"Saarland",BE:"Berlin"},ID:{AC:"Banda Aceh",YO:"Yogyakarta",BB:"Pangkal Pinang",BT:"Serang",BE:"Bengkulu",JT:"Semarang",KT:"Palangkaraya",ST:"Palu",JI:"Surabaya",KI:"Samarinda",NT:"Kupang",GO:"Gorontalo",JK:"Jakarta",JA:"Jambi",LA:"Bandar Lampung",MA:"Ambon",KU:"Tanjung Selor",MU:"Sofifi",SA:"Manado",SU:"Medan",PA:"Jayapura",RI:"Pekanbaru",KR:"Tanjung Pinang",SG:"Kendari",KS:"Banjarmasin",SN:"Makassar",SS:"Palembang",JB:"Bandung",KB:"Pontianak",NB:"Mataram",PB:"Manokwari",SR:"Mamuju",SB:"Padang",BA:"Denpasar"},JP:{AA:"Akita",NI:"Niigata",AO:"Aomori",CB:"Chiba",EH:"Ehime",FK:"Fukui",FO:"Fukuoka",FS:"Fukushima",GF:"Gifu",GN:"Gunma",HO:"Hokkaido",HS:"Hiroshima",HY:"Hyogo",IB:"Ibaraki",IK:"Ishikawa",IW:"Iwate",KA:"Kagawa",KC:"Kochi",KG:"Kagoshima",KN:"Kanagawa",KT:"Kyoto",KU:"Kumamoto",MG:"Miyagi",MM:"Mie",MZ:"Miyazaki",NG:"Nagano",NK:"Nagasaki",NR:"Nara",OI:"Ohita",OS:"Osaka",OW:"Okinawa",OY:"Okayama",SH:"Shimane",SI:"Shiga",SS:"Saga",ST:"Saitama",SZ:"Shizuoka",TC:"Tochigi",TK:"Tokyo",TS:"Tokushima",TT:"Tottori",TY:"Toyama",WK:"Wakayama",YC:"Yamaguchi",YG:"Yamagata",YN:"Yamanashi",AI:"Aichi"},MY:{KUL:"Kuala Lumpur",TRG:"Terengganu",PJY:"Federal Territory of Putrajaya",JHR:"Johor",KDH:"Kedah",KTN:"Kelantan",MLK:"Malacca",NSN:"Negeri Sembilan",PHG:"Pahang",PRK:"Perak",PLS:"Perlis",PNG:"Penang",SBH:"Sabah",SRW:"Sarawak",SGR:"Selangor",LBN:"Federal Territory of Labuan"},ES:{ZA:"Zamora",Z:"Zaragoza",A:"Alicante",AB:"Albacete",AL:"Almeria",AV:"Avila",B:"Barcelona",BA:"Badajoz",BI:"Vizcaya",BU:"Burgos",C:"La Coruna",CA:"Cadiz",CC:"Caceres",CE:"Ceuta",CO:"Cordoba",CR:"Ciudad Real",CS:"Castellon",CU:"Cuenca",GC:"Las Palmas",GI:"Gerona",GR:"Granada",GU:"Guadalajara",H:"Huelva",HU:"Huesca",J:"Jaen",L:"Lerida",LE:"Leon",LO:"La Rioja",LU:"Lugo",M:"Madrid",MA:"Malaga",ML:"Melilla",MU:"Murcia",NA:"Navarra",O:"Asturias",OR:"Orense",P:"Palencia",PM:"Islas Baleares",PO:"Pontevedra",S:"Cantabria",SA:"Salamanca",SE:"Sevilla",SG:"Segovia",SO:"Soria",SS:"Guipuzcoa",T:"Tarragona",TE:"Teruel",TF:"Santa Cruz de Tenerife",TO:"Toledo",V:"Valencia",VA:"Valladolid",VI:"Alava"},TH:{STI:"Sukhothai",SPB:"Suphan Buri",SNI:"Surat Thani",SRN:"Surin",TAK:"Tak",TRG:"Trang",TRT:"Trat",UBN:"Ubon Ratchathani",UDN:"Udon Thani",UTI:"Uthai Thani",UTD:"Uttaradit",YLA:"Yala",YST:"Yasothon",BKK:"Bangkok",ACR:"Amnat Charoen",ATG:"Ang Thong","---":"Bueng Kan",BRM:"Buriram",CCO:"Chachoengsao",CNT:"Chainat",CPM:"Chaiyaphum",CTI:"Chanthaburi",CMI:"Chiang Mai",CRI:"Chiang Rai",CBI:"Chonburi",CPN:"Chumphon",KSN:"Kalasin",KPT:"Kamphaeng Phet",KRI:"Kanchanaburi",KKN:"Khon Kaen",KBI:"Krabi",LPG:"Lampang",LPN:"Lamphun",LEI:"Loei",LRI:"Lopburi",MSN:"Mae Hong Son",MKM:"Maha Sarakham",MDH:"Mukdahan",NYK:"Nakhon Nayok",NPT:"Nakhon Pathom",NPM:"Nakhon Phanom",NMA:"Nakhon Ratchasima",NSN:"Nakhon Sawan",NRT:"Nakhon Si Thammarat",NAN:"Nan",NWT:"Narathiwat",NBP:"Nong Bua Lamphu",NKI:"Nong Khai City",NBI:"Nonthaburi",PTE:"Pathum Thani",PTN:"Pattani",PNA:"Phang Nga",PLG:"Phatthalung",PYO:"Phayao",PNB:"Phetchabun",PBI:"Phetchaburi",PCT:"Phichit",PLK:"Phitsanulok",AYA:"Phra Nakhon Si Ayutthaya",PRE:"Phrae",PKT:"Phuket",PRI:"Prachinburi",PKN:"Prachuap Khiri Khan",RNG:"Ranong",RBR:"Ratchaburi",RYG:"Rayong",RET:"Roi Et",SKW:"Sa Kaeo",SNK:"Sakon Nakhon",SPK:"Samut Prakan",SKN:"Samut Sakhon",SKM:"Samut Songkhram",SRI:"Saraburi",STN:"Satun",SBR:"Sing Buri",SSK:"Sisaket",SKA:"Songkhla"},US:{AK:"Alaska",PW:"Palau",AR:"Arkansas",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",FM:"Federated States of Micronesia",GA:"Georgia",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",ME:"Maine",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennslyvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VI:"Virgin Islands",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming",MD:"Maryland",AS:"American Samoa",GU:"Guam",MH:"Marshall Islands",MP:"Northern Mariana Islands",PR:"Puerto Rico",AL:"Alabama"}}},{}],47:[function(e,t,i){t.exports=[{key:"Afghanistan(AF)",value:"Afghanistan"},{key:"Albania(AL)",value:"Albania"},{key:"Algeria(DZ)",value:"Algeria"},{key:"Andorra(AD)",value:"Andorra"},{key:"Angola(AO)",value:"Angola"},{key:"Anguilla/St Kitts(AI)",value:"Anguilla/St Kitts"},{key:"Antarctica(AQ)",value:"Antarctica"},{key:"Antigua and Barbuda(AG)",value:"Antigua and Barbuda"},{key:"Argentina(AR)",value:"Argentina"},{key:"Armenia(AM)",value:"Armenia"},{key:"Aruba(AW)",value:"Aruba"},{key:"Australia(AU)",value:"Australia"},{key:"Austria(AT)",value:"Austria"},{key:"Azerbaijan(AZ)",value:"Azerbaijan"},{key:"Bahamas(BS)",value:"Bahamas"},{key:"Bahrain(BH)",value:"Bahrain"},{key:"Bangladesh(BD)",value:"Bangladesh"},{key:"Barbados(BB)",value:"Barbados"},{key:"Belarus(BY)",value:"Belarus"},{key:"Belgium(BE)",value:"Belgium"},{key:"Belize(BZ)",value:"Belize"},{key:"Benin(BJ)",value:"Benin"},{key:"Bermuda(BM)",value:"Bermuda"},{key:"Bhutan(BT)",value:"Bhutan"},{key:"Bolivia(BO)",value:"Bolivia"},{key:"Bonaire,Saba,St Eustatius(BQ)",value:"Bonaire,Saba,St Eustatius"},{key:"Bosnia Herzegovina(BA)",value:"Bosnia Herzegovina"},{key:"Botswana(BW)",value:"Botswana"},{key:"Bouvet Island(BV)",value:"Bouvet Island"},{key:"Brazil(BR)",value:"Brazil"},{key:"British Indian Ocean Territory(IO)",value:"British Indian Ocean Territory"},{key:"British West Indies(WN)",value:"British West Indies"},{key:"Brunei Darussalam(BN)",value:"Brunei Darussalam"},{key:"Bulgaria(BG)",value:"Bulgaria"},{key:"Burkina Fasa(BF)",value:"Burkina Fasa"},{key:"Burma(B1)",value:"Burma(B1)"},{key:"Burundi(BI)",value:"Burundi"},{key:"Cambodia(KH)",value:"Cambodia"},{key:"Cameroon(CM)",value:"Cameroon"},{key:"Canada(CA)",value:"Canada"},{key:"Canary Islands(C1)",value:"Canary Islands(C1)"},{key:"Cape Verde(CV)",value:"Cape Verde"},{key:"Cayman Islands(KY)",value:"Cayman Islands"},{key:"Central African Republic(CF)",value:"Central African Republic"},{key:"Chad(TD)",value:"Chad"},{key:"Chile(CL)",value:"Chile"},{key:"China(CN)",value:"China"},{key:"Christmas Island(CX)",value:"Christmas Island"},{key:"Cocos (Keeling) Islands(CC)",value:"Cocos (Keeling) Islands"},{key:"Colombia(CO)",value:"Colombia"},{key:"Comoros(KM)",value:"Comoros"},{key:"Congo(CG)",value:"Congo"},{key:"Congo, The Democratic Republic of the(CD)",value:"Congo, The Democratic Republic of the"},{key:"Cook Island(CK)",value:"Cook Island"},{key:"Costa Rica(CR)",value:"Costa Rica"},{key:"Cote D*Ivoire(CI)",value:"Cote D*Ivoire"},{key:"Croatia(HR)",value:"Croatia"},{key:"Cuba(CU)",value:"Cuba"},{key:"Curacao(CW)",value:"Curacao"},{key:"Cyprus(CY)",value:"Cyprus"},{key:"Czech Republic(CZ)",value:"Czech Republic"},{key:"Denmark(DK)",value:"Denmark"},{key:"Djibouti(DJ)",value:"Djibouti"},{key:"Dominica(DM)",value:"Dominica"},{key:"Dominican Republic(DO)",value:"Dominican Republic"},{key:"East Timor(TP)",value:"East Timor"},{key:"Ecuador(EC)",value:"Ecuador"},{key:"Egypt(EG)",value:"Egypt"},{key:"El Salvador(SV)",value:"El Salvador"},{key:"Equatorial Guinea(GQ)",value:"Equatorial Guinea"},{key:"Eritrea(ER)",value:"Eritrea"},{key:"Estonia(EE)",value:"Estonia"},{key:"Ethiopia(ET)",value:"Ethiopia"},{key:"Falkland Islands(FK)",value:"Falkland Islands"},{key:"Faroe Islands(FO)",value:"Faroe Islands"},{key:"Fiji(FJ)",value:"Fiji"},{key:"Finland(FI)",value:"Finland"},{key:"France(FR)",value:"France"},{key:"French Guiana(GF)",value:"French Guiana"},{key:"French Polynesia(PF)",value:"French Polynesia"},{key:"French Southern Territories(TF)",value:"French Southern Territories"},{key:"Gabon(GA)",value:"Gabon"},{key:"Gambia(GM)",value:"Gambia"},{key:"Georgia(GE)",value:"Georgia"},{key:"Germany(DE)",value:"Germany"},{key:"Ghana(GH)",value:"Ghana"},{key:"Gibraltar(GI)",value:"Gibraltar"},{key:"Greece(GR)",value:"Greece"},{key:"Greenland(GL)",value:"Greenland"},{key:"Grenada(GD)",value:"Grenada"},{key:"Guadeloupe/St Martin(GP)",value:"Guadeloupe/St Martin"},{key:"Guatemala(GT)",value:"Guatemala"},{key:"Guinea Bissau(GW)",value:"Guinea Bissau"},{key:"Guinea(GN)",value:"Guinea"},{key:"Guyana(GY)",value:"Guyana"},{key:"Haiti(HT)",value:"Haiti"},{key:"Heard and McDonald Islands(HM)",value:"Heard and McDonald Islands"},{key:"Honduras(HN)",value:"Honduras"},{key:"Hong Kong (People Republic of China)(HK)",value:"Hong Kong (People's Republic of China)"},{key:"Hungary(HU)",value:"Hungary"},{key:"Iceland(IS)",value:"Iceland"},{key:"India(IN)",value:"India"},{key:"Indonesia(ID)",value:"Indonesia"},{key:"Iran(IR)",value:"Iran"},{key:"Iraq(IQ)",value:"Iraq"},{key:"Ireland(IE)",value:"Ireland"},{key:"Isle Of Man(IM)",value:"Isle Of Man"},{key:"Israel(IL)",value:"Israel"},{key:"Italy(IT)",value:"Italy"},{key:"Ivory Coast(IV)",value:"Ivory Coast"},{key:"Jamaica(JM)",value:"Jamaica"},{key:"Japan(JP)",value:"Japan"},{key:"Jordan(JO)",value:"Jordan"},{key:"Kazakhstan(KZ)",value:"Kazakhstan"},{key:"Kenya(KE)",value:"Kenya"},{key:"Kiribati(KI)",value:"Kiribati"},{key:"Korea  Republic Of(KR)",value:"Republic Of Korea"},{key:"Korea Democratic People Republic of(KP)",value:"Democratic People's Republic of Korea"},{key:"Kuwait(KW)",value:"Kuwait"},{key:"Kyrgzstan(KG)",value:"Kyrgzstan"},{key:"Laos(LA)",value:"Laos"},{key:"Latvia(LV)",value:"Latvia"},{key:"Lebanon(LB)",value:"Lebanon"},{key:"Lesotho(LS)",value:"Lesotho"},{key:"Liberia(LR)",value:"Liberia"},{key:"Libyan Arab Jamahiriya(LY)",value:"Libyan Arab Jamahiriya"},{key:"Liechtenstein(LI)",value:"Liechtenstein"},{key:"Lithuania(LT)",value:"Lithuania"},{key:"Luxembourg(LU)",value:"Luxembourg"},{key:"Macau(MO)",value:"Macau"},{key:"Macedonia(MK)",value:"Macedonia"},{key:"Madagascar(MG)",value:"Madagascar"},{key:"Malawi(MW)",value:"Malawi"},{key:"Malaysia(MY)",value:"Malaysia"},{key:"Maldives(MV)",value:"Maldives"},{key:"Mali(ML)",value:"Mali"},{key:"Malta(MT)",value:"Malta"},{key:"Martinique(MQ)",value:"Martinique"},{key:"Mauritania(MR)",value:"Mauritania"},{key:"Mauritius(MU)",value:"Mauritius"},{key:"Mayotte(YT)",value:"Mayotte"},{key:"Mexico(MX)",value:"Mexico"},{key:"Micronesia, Federated States of(FM)",value:"Micronesia, Federated States of"},{key:"Midway Islands(MI)",value:"Midway Islands"},{key:"Moldova(MD)",value:"Moldova"},{key:"Monaco(MC)",value:"Monaco"},{key:"Mongolia(MN)",value:"Mongolia"},{key:"Montenegro(ME)",value:"Montenegro"},{key:"Montserrat(MS)",value:"Montserrat"},{key:"Morocco(MA)",value:"Morocco"},{key:"Mozambique(MZ)",value:"Mozambique"},{key:"Myanmar(MM)",value:"Myanmar"},{key:"Namibia(NA)",value:"Namibia"},{key:"Nauru(NR)",value:"Nauru"},{key:"Nepal(NP)",value:"Nepal"},{key:"Netherlands Antilles(AN)",value:"Netherlands Antilles"},{key:"Netherlands(NL)",value:"Netherlands"},{key:"New Caledonia(NC)",value:"New Caledonia"},{key:"New Zealand(NZ)",value:"New Zealand"},{key:"Nicaragua(NI)",value:"Nicaragua"},{key:"Niger(NE)",value:"Niger"},{key:"Nigeria(NG)",value:"Nigeria"},{key:"Niue(NU)",value:"Niue"},{key:"Norfolk Island(NF)",value:"Norfolk Island"},{key:"Norway(NO)",value:"Norway"},{key:"Oman(OM)",value:"Oman"},{key:"Pakistan(PK)",value:"Pakistan"},{key:"Palestine(PS)",value:"Palestine"},{key:"Panama(PA)",value:"Panama"},{key:"Papua New Guinea(PG)",value:"Papua New Guinea"},{key:"Paraguay(PY)",value:"Paraguay"},{key:"Peru(PE)",value:"Peru"},{key:"Philippines(PH)",value:"Philippines"},{key:"Pitcairn(PN)",value:"Pitcairn"},{key:"Poland(PL)",value:"Poland"},{key:"Portugal(PT)",value:"Portugal"},{key:"Qatar(QA)",value:"Qatar"},{key:"Reunion(RE)",value:"Reunion"},{key:"Romania(RO)",value:"Romania"},{key:"Russia(RU)",value:"Russia"},{key:"Russian Federation(RQ)",value:"Russian Federation"},{key:"Rwanda(RW)",value:"Rwanda"},{key:"Saint Helena(SH)",value:"Saint Helena"},{key:"Saint Kitts and Nevis(KN)",value:"Saint Kitts and Nevis"},{key:"Saint Lucia(LC)",value:"Saint Lucia"},{key:"Saint Pierre And Miquelon(PM)",value:"Saint Pierre And Miquelon"},{key:"Saint Vincent And The Grenadines(VC)",value:"Saint Vincent And The Grenadines"},{key:"Samoa(WS)",value:"Samoa"},{key:"San Marino(SM)",value:"San Marino"},{key:"Sao Tome and Principe(ST)",value:"Sao Tome and Principe"},{key:"Saudi Arabia(SA)",value:"Saudi Arabia"},{key:"Senegal(SN)",value:"Senegal"},{key:"Serbia and Montenegro(CS)",value:"Serbia and Montenegro"},{key:"Serbia(RS)",value:"Serbia"},{key:"Seychelles(SC)",value:"Seychelles"},{key:"Sierra Leone(SL)",value:"Sierra Leone"},{key:"Singapore(SG)",value:"Singapore"},{key:"Sint Maarten(SX)",value:"Sint Maarten"},{key:"Slovakia(SK)",value:"Slovakia"},{key:"Slovenia(SI)",value:"Slovenia"},{key:"Solomon Islands(SB)",value:"Solomon Islands"},{key:"Somalia(SO)",value:"Somalia"},{key:"South Africa(ZA)",value:"South Africa"},{key:"South Georgia and the South Sandwich Islands(GS)",value:"South Georgia and the South Sandwich Islands"},{key:"South Sudan(SS)",value:"South Sudan"},{key:"Spain(ES)",value:"Spain"},{key:"Sri Lanka(LK)",value:"Sri Lanka"},{key:"Sudan(SD)",value:"Sudan"},{key:"Suriname(SR)",value:"Suriname"},{key:"Svalbard and Jan Mayen Islands(SJ)",value:"Svalbard and Jan Mayen Islands"},{key:"Swaziland(SZ)",value:"Swaziland"},{key:"Sweden(SE)",value:"Sweden"},{key:"Switzerland(CH)",value:"Switzerland"},{key:"Syria(SY)",value:"Syria"},{key:"Tahiti(TI)",value:"Tahiti"},{key:"Taiwan(TW)",value:"Taiwan(China)"},{key:"Tajikistan(TJ)",value:"Tajikistan"},{key:"Tanzania(TZ)",value:"Tanzania"},{key:"Thailand(TH)",value:"Thailand"},{key:"Togo(TG)",value:"Togo"},{key:"Tokelau(TK)",value:"Tokelau"},{key:"Tonga(TO)",value:"Tonga"},{key:"Trinidad And Tobago(TT)",value:"Trinidad And Tobago"},{key:"Tunisia(TN)",value:"Tunisia"},{key:"Turkey(TR)",value:"Turkey"},{key:"Turkmenistan(TM)",value:"Turkmenistan"},{key:"Turks and Caicos Islands(TC)",value:"Turks and Caicos Islands"},{key:"Tuvalu(TV)",value:"Tuvalu"},{key:"Uganda(UG)",value:"Uganda"},{key:"Ukraine(UA)",value:"Ukraine"},{key:"United Arab Emirates(AE)",value:"United Arab Emirates"},{key:"Great Britain(GB)",value:"Great Britain"},{key:"United States Minor Outlying Islands(UM)",value:"United States Minor Outlying Islands"},{key:"United States(US)",value:"United States"},{key:"Upper Volta(UV)",value:"Upper Volta"},{key:"Uruguay(UY)",value:"Uruguay"},{key:"Uzbekistan(UZ)",value:"Uzbekistan"},{key:"Vanuatu(VU)",value:"Vanuatu"},{key:"Vatican City State(VA)",value:"Vatican City State"},{key:"Venezuela(VE)",value:"Venezuela"},{key:"Vietnam(VN)",value:"Vietnam"},{key:"Virgin Islands, British(VG)",value:"Virgin Islands, British"},{key:"Virgin Islands, US(VI)",value:"Virgin Islands, US"},{key:"Wallis and Futuna Islands(WF)",value:"Wallis and Futuna Islands"},{key:"Western Sahara(EH)",value:"Western Sahara"},{key:"Yemen(YE)",value:"Yemen"},{key:"Zaire(ZR)",value:"Zaire"},{key:"Zambia(ZM)",value:"Zambia"},{key:"Zimbabwe(ZW)",value:"Zimbabwe"}]},{}],45:[function(e,t,i){i=t.exports=e("./hosts-base.js")()},{"./hosts-base.js":46}],46:[function(e,t,i){function n(){return window.document.body.lang||"en"}var c=e("underscore"),l=e("underscore.string/sprintf"),a={host:window.location.href.split("/").slice(0,3).join("/"),urls:{api:"/api/%s",mapi:"/mapi/%s",data:"/api/data/%s",lang:function(e){return"/"+n()+"/"+e},my:function(e){return"/"+n()+"/my-millennium/"+e},m4b:function(e){return"/"+n()+"/m4b/"+e},sign_up:"/"+n()+"/my-millennium/sign-up",sign_in:"/"+n()+"/my-millennium/sign-in",forget_pwd:"/"+n()+"/my-millennium/forgot-password",profile:"/"+n()+"/my-millennium/profile",checkout:"/"+n()+"/checkout",booking:"/"+n()+"/booking/room",fb_login:"/mapi/account/login/facebook",google_login:"/mapi/account/login/google-plus",weather:"/api/weather?location=%s",convert:"/api/convert/%s/%.02d/%s",meetings_REST:"/api/meetings/all",meeting_rooms_REST:"/api/meetings/rooms/%s",meeting_eventsetups_REST:"/api/meetings/eventsetups/%s",wedding_rooms_REST:"/api/meetings/rooms/%s",careersall:"/api/careers/all",careersproperties:"/api/careers/properties","destination.attractions":"/api/data/destination/%s/attractions",attractions:"/api/data/destination/%s/attractions",blogs:"/api/blog/all",blog_categories:"/api/blog/category",map_icon_mixed_collection:"/assets/img/maps/placeholder-mixed-collection.png",map_icon_destination_with_no_collection:"/assets/img/maps/placeholder-mixed-collection.png",map_icon_millennium_unselected:"/assets/img/maps/location/Map Marker Millennium Teardrop Unselected.png",map_icon_millennium_selected:"/assets/img/maps/location/Map Marker Millennium Teardrop Selected.png",map_icon_millennium_round:"/assets/img/maps/location/Map Marker Millennium Round.png",map_icon_lengs_unselected:"/assets/img/maps/location/Map Marker Lengs Teardrop Unselected.png",map_icon_lengs_selected:"/assets/img/maps/location/Map Marker Lengs Teardrop Selected.png",map_icon_lengs_round:"/assets/img/maps/location/Map Marker Lengs Round.png",map_icon_copthorne_unselected:"/assets/img/maps/location/Map Marker Copthorne Teardrop Unselected.png",map_icon_copthorne_selected:"/assets/img/maps/location/Map Marker Copthorne Teardrop Selected.png",map_icon_copthorne_round:"/assets/img/maps/location/Map Marker Copthorne Round.png",map_icon_attraction_unselected:"/assets/img/maps/location/Map Marker Attraction Teardrop Unselected.png",map_icon_attraction_selected:"/assets/img/maps/location/Map Marker Attraction Teardrop Selected.png",map_icon_m_unselected:"/assets/img/maps/location/M collection-deafult pin.svg",map_icon_m_selected:"/assets/img/maps/location/M collection-hover pin.svg",map_icon_m_round:"/assets/img/maps/location/M collection-circular.svg",search_url:function(e){return"/api/search/all?keyword="+encodeURI(e)},search_booking:function(e){return"/api/search/hotel?keyword="+encodeURI(e)}},nohostfor:/^$/,adjustURL:function(e){var t=!this.nohostfor.test(e)&&this.host;return e&&t&&!/:\/\//.test(e)?t+"/"+e.replace(/^\//,""):e},adjustURLs:function(e,t){return c.each(t,function(t){jQuery.isArray(e[t])?e[t]=c.map(e[t],this.adjustURL,this):e[t]=this.adjustURL(e[t])},this),e},getURL:function(e){var t=this.urls[e]||e,i=c.keys(arguments).sort(),n=c.map(i,function(e){return this[e]},arguments),a=n.slice(1);return t?(a.length&&"string"==typeof t?t=l.apply(l,[t].concat(a)):"function"==typeof t&&(t=t.apply(this,a)),this.adjustURL(t)):void 0}};i=t.exports=function(e){return e&&e.host&&(a.host=e.host),e&&e.urls&&(a.urls=c.extend(a.urls,e.urls)),e&&e.nohostfor&&(a.nohostfor=e.nohostfor),e&&e.adjustURL&&(a.adjustURL=e.adjustURL),e&&e.getURL&&(a.getURL=e.getURL),a.getLanguage=n,a}},{underscore:42,"underscore.string/sprintf":41}],44:[function(e,t,i){!function(t){"function"==typeof define&&define.amd?define(["jquery","hammerjs"],t):"object"==typeof i?t(jQuery,e("hammerjs")):t(jQuery,Hammer)}(function(e,t){function i(i,n){var c=e(i);c.data("hammer")||c.data("hammer",new t(c[0],n))}e.fn.hammer=function(e){return this.each(function(){i(this,e)})},t.Manager.prototype.emit=function(t){return function(i,n){t.call(this,i,n),e(this.element).trigger({type:i,gesture:n})}}(t.Manager.prototype.emit)})},{hammerjs:12}],41:[function(e,t,i){var n=e("util-deprecate");t.exports=n(e("sprintf-js").sprintf,"sprintf() will be removed in the next major release, use the sprintf-js package instead.")},{"sprintf-js":38,"util-deprecate":43}],43:[function(e,t,i){(function(e){function i(e,t){function i(){if(!c){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation"),c=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var c=!1;return i}function n(t){try{if(!e.localStorage)return!1}catch(i){return!1}var n=e.localStorage[t];return null==n?!1:"true"===String(n).toLowerCase();
}t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],40:[function(e,t,i){var n=function(e,t){"use strict";function i(e,t){return document.querySelectorAll?(t||document).querySelectorAll(e):jQuery(e,t)}function n(e){return"[object Array]"===Object.prototype.toString.apply(e)}function c(){var e=H-V;return t.freeMode&&(e=H-V),t.slidesPerView>Q.slides.length&&!t.centeredSlides&&(e=0),0>e&&(e=0),e}function l(){function e(e){var i,n,c=function(){"undefined"!=typeof Q&&null!==Q&&(void 0!==Q.imagesLoaded&&Q.imagesLoaded++,Q.imagesLoaded===Q.imagesToLoad.length&&(Q.reInit(),t.onImagesReady&&Q.fireCallback(t.onImagesReady,Q)))};e.complete?c():(n=e.currentSrc||e.getAttribute("src"),n?(i=new Image,i.onload=c,i.onerror=c,i.src=n):c())}var n=Q.h.addEventListener,c="wrapper"===t.eventTarget?Q.wrapper:Q.container;if(Q.browser.ie10||Q.browser.ie11?(n(c,Q.touchEvents.touchStart,u),n(document,Q.touchEvents.touchMove,m),n(document,Q.touchEvents.touchEnd,p)):(Q.support.touch&&(n(c,"touchstart",u),n(c,"touchmove",m),n(c,"touchend",p)),t.simulateTouch&&(n(c,"mousedown",u),n(document,"mousemove",m),n(document,"mouseup",p))),t.autoResize&&n(window,"resize",Q.resizeFix),a(),Q._wheelEvent=!1,t.mousewheelControl){if(void 0!==document.onmousewheel&&(Q._wheelEvent="mousewheel"),!Q._wheelEvent)try{new WheelEvent("wheel"),Q._wheelEvent="wheel"}catch(l){}Q._wheelEvent||(Q._wheelEvent="DOMMouseScroll"),Q._wheelEvent&&n(Q.container,Q._wheelEvent,r)}if(t.keyboardControl&&n(document,"keydown",s),t.updateOnImagesReady){Q.imagesToLoad=i("img",Q.container);for(var o=0;o<Q.imagesToLoad.length;o++)e(Q.imagesToLoad[o])}}function a(){var e,n=Q.h.addEventListener;if(t.preventLinks){var c=i("a",Q.container);for(e=0;e<c.length;e++)n(c[e],"click",b)}if(t.releaseFormElements){var l=i("input, textarea, select",Q.container);for(e=0;e<l.length;e++)n(l[e],Q.touchEvents.touchStart,C,!0),Q.support.touch&&t.simulateTouch&&n(l[e],"mousedown",C,!0)}if(t.onSlideClick)for(e=0;e<Q.slides.length;e++)n(Q.slides[e],"click",g);if(t.onSlideTouch)for(e=0;e<Q.slides.length;e++)n(Q.slides[e],Q.touchEvents.touchStart,d)}function o(){var e,n=Q.h.removeEventListener;if(t.onSlideClick)for(e=0;e<Q.slides.length;e++)n(Q.slides[e],"click",g);if(t.onSlideTouch)for(e=0;e<Q.slides.length;e++)n(Q.slides[e],Q.touchEvents.touchStart,d);if(t.releaseFormElements){var c=i("input, textarea, select",Q.container);for(e=0;e<c.length;e++)n(c[e],Q.touchEvents.touchStart,C,!0),Q.support.touch&&t.simulateTouch&&n(c[e],"mousedown",C,!0)}if(t.preventLinks){var l=i("a",Q.container);for(e=0;e<l.length;e++)n(l[e],"click",b)}}function s(e){var t=e.keyCode||e.charCode;if(!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)){if(37===t||39===t||38===t||40===t){for(var i=!1,n=Q.h.getOffset(Q.container),c=Q.h.windowScroll().left,l=Q.h.windowScroll().top,a=Q.h.windowWidth(),o=Q.h.windowHeight(),s=[[n.left,n.top],[n.left+Q.width,n.top],[n.left,n.top+Q.height],[n.left+Q.width,n.top+Q.height]],r=0;r<s.length;r++){var g=s[r];g[0]>=c&&g[0]<=c+a&&g[1]>=l&&g[1]<=l+o&&(i=!0)}if(!i)return}Y?(37!==t&&39!==t||(e.preventDefault?e.preventDefault():e.returnValue=!1),39===t&&Q.swipeNext(),37===t&&Q.swipePrev()):(38!==t&&40!==t||(e.preventDefault?e.preventDefault():e.returnValue=!1),40===t&&Q.swipeNext(),38===t&&Q.swipePrev())}}function r(e){var i=Q._wheelEvent,n=0;if(e.detail)n=-e.detail;else if("mousewheel"===i)if(t.mousewheelControlForceToAxis)if(Y){if(!(Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)))return;n=e.wheelDeltaX}else{if(!(Math.abs(e.wheelDeltaY)>Math.abs(e.wheelDeltaX)))return;n=e.wheelDeltaY}else n=e.wheelDelta;else if("DOMMouseScroll"===i)n=-e.detail;else if("wheel"===i)if(t.mousewheelControlForceToAxis)if(Y){if(!(Math.abs(e.deltaX)>Math.abs(e.deltaY)))return;n=-e.deltaX}else{if(!(Math.abs(e.deltaY)>Math.abs(e.deltaX)))return;n=-e.deltaY}else n=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX:-e.deltaY;if(t.freeMode){var l=Q.getWrapperTranslate()+n;if(l>0&&(l=0),l<-c()&&(l=-c()),Q.setWrapperTransition(0),Q.setWrapperTranslate(l),Q.updateActiveSlide(l),0===l||l===-c())return}else(new Date).getTime()-T>60&&(0>n?Q.swipeNext():Q.swipePrev()),T=(new Date).getTime();return t.autoplay&&Q.stopAutoplay(!0),e.preventDefault?e.preventDefault():e.returnValue=!1,!1}function g(e){Q.allowSlideClick&&(I(e),Q.fireCallback(t.onSlideClick,Q,e))}function d(e){I(e),Q.fireCallback(t.onSlideTouch,Q,e)}function I(e){if(e.currentTarget)Q.clickedSlide=e.currentTarget;else{var i=e.srcElement;do{if(i.className.indexOf(t.slideClass)>-1)break;i=i.parentNode}while(i);Q.clickedSlide=i}Q.clickedSlideIndex=Q.slides.indexOf(Q.clickedSlide),Q.clickedSlideLoopIndex=Q.clickedSlideIndex-(Q.loopedSlides||0)}function b(e){return Q.allowLinks?void 0:(e.preventDefault?e.preventDefault():e.returnValue=!1,t.preventLinksPropagation&&"stopPropagation"in e&&e.stopPropagation(),!1)}function C(e){return e.stopPropagation?e.stopPropagation():e.returnValue=!1,!1}function u(e){if(t.preventLinks&&(Q.allowLinks=!0),Q.isTouched||t.onlyExternal)return!1;var i=e.target||e.srcElement;document.activeElement&&document.activeElement!==document.body&&document.activeElement!==i&&document.activeElement.blur();var n="input select textarea".split(" ");if(t.noSwiping&&i&&G(i))return!1;if($=!1,Q.isTouched=!0,q="touchstart"===e.type,!q&&"which"in e&&3===e.which)return Q.isTouched=!1,!1;if(!q||1===e.targetTouches.length){Q.callPlugins("onTouchStartBegin"),!q&&!Q.isAndroid&&n.indexOf(i.tagName.toLowerCase())<0&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var c=q?e.targetTouches[0].pageX:e.pageX||e.clientX,l=q?e.targetTouches[0].pageY:e.pageY||e.clientY;Q.touches.startX=Q.touches.currentX=c,Q.touches.startY=Q.touches.currentY=l,Q.touches.start=Q.touches.current=Y?c:l,Q.setWrapperTransition(0),Q.positions.start=Q.positions.current=Q.getWrapperTranslate(),Q.setWrapperTranslate(Q.positions.start),Q.times.start=(new Date).getTime(),f=void 0,t.moveStartThreshold>0&&(D=!1),t.onTouchStart&&Q.fireCallback(t.onTouchStart,Q,e),Q.callPlugins("onTouchStartEnd")}}function m(e){if(Q.isTouched&&!t.onlyExternal&&(!q||"mousemove"!==e.type)){var i=q?e.targetTouches[0].pageX:e.pageX||e.clientX,n=q?e.targetTouches[0].pageY:e.pageY||e.clientY;if("undefined"==typeof f&&Y&&(f=!!(f||Math.abs(n-Q.touches.startY)>Math.abs(i-Q.touches.startX))),"undefined"!=typeof f||Y||(f=!!(f||Math.abs(n-Q.touches.startY)<Math.abs(i-Q.touches.startX))),f)return void(Q.isTouched=!1);if(Y){if(!t.swipeToNext&&i<Q.touches.startX||!t.swipeToPrev&&i>Q.touches.startX)return}else if(!t.swipeToNext&&n<Q.touches.startY||!t.swipeToPrev&&n>Q.touches.startY)return;if(e.assignedToSwiper)return void(Q.isTouched=!1);if(e.assignedToSwiper=!0,t.preventLinks&&(Q.allowLinks=!1),t.onSlideClick&&(Q.allowSlideClick=!1),t.autoplay&&Q.stopAutoplay(!0),!q||1===e.touches.length){if(Q.isMoved||(Q.callPlugins("onTouchMoveStart"),t.loop&&(Q.fixLoop(),Q.positions.start=Q.getWrapperTranslate()),t.onTouchMoveStart&&Q.fireCallback(t.onTouchMoveStart,Q)),Q.isMoved=!0,e.preventDefault?e.preventDefault():e.returnValue=!1,Q.touches.current=Y?i:n,Q.positions.current=(Q.touches.current-Q.touches.start)*t.touchRatio+Q.positions.start,Q.positions.current>0&&t.onResistanceBefore&&Q.fireCallback(t.onResistanceBefore,Q,Q.positions.current),Q.positions.current<-c()&&t.onResistanceAfter&&Q.fireCallback(t.onResistanceAfter,Q,Math.abs(Q.positions.current+c())),t.resistance&&"100%"!==t.resistance){var l;if(Q.positions.current>0&&(l=1-Q.positions.current/V/2,.5>l?Q.positions.current=V/2:Q.positions.current=Q.positions.current*l),Q.positions.current<-c()){var a=(Q.touches.current-Q.touches.start)*t.touchRatio+(c()+Q.positions.start);l=(V+a)/V;var o=Q.positions.current-a*(1-l)/2,s=-c()-V/2;s>o||0>=l?Q.positions.current=s:Q.positions.current=o}}if(t.resistance&&"100%"===t.resistance&&(Q.positions.current>0&&(!t.freeMode||t.freeModeFluid)&&(Q.positions.current=0),Q.positions.current<-c()&&(!t.freeMode||t.freeModeFluid)&&(Q.positions.current=-c())),!t.followFinger)return;if(t.moveStartThreshold)if(Math.abs(Q.touches.current-Q.touches.start)>t.moveStartThreshold||D){if(!D)return D=!0,void(Q.touches.start=Q.touches.current);Q.setWrapperTranslate(Q.positions.current)}else Q.positions.current=Q.positions.start;else Q.setWrapperTranslate(Q.positions.current);return(t.freeMode||t.watchActiveIndex)&&Q.updateActiveSlide(Q.positions.current),t.grabCursor&&(Q.container.style.cursor="move",Q.container.style.cursor="grabbing",Q.container.style.cursor="-moz-grabbin",Q.container.style.cursor="-webkit-grabbing"),K||(K=Q.touches.current),P||(P=(new Date).getTime()),Q.velocity=(Q.touches.current-K)/((new Date).getTime()-P)/2,Math.abs(Q.touches.current-K)<2&&(Q.velocity=0),K=Q.touches.current,P=(new Date).getTime(),Q.callPlugins("onTouchMoveEnd"),t.onTouchMove&&Q.fireCallback(t.onTouchMove,Q,e),!1}}}function p(e){if(f&&Q.swipeReset(),!t.onlyExternal&&Q.isTouched){Q.isTouched=!1,t.grabCursor&&(Q.container.style.cursor="move",Q.container.style.cursor="grab",Q.container.style.cursor="-moz-grab",Q.container.style.cursor="-webkit-grab"),Q.positions.current||0===Q.positions.current||(Q.positions.current=Q.positions.start),t.followFinger&&Q.setWrapperTranslate(Q.positions.current),Q.times.end=(new Date).getTime(),Q.touches.diff=Q.touches.current-Q.touches.start,Q.touches.abs=Math.abs(Q.touches.diff),Q.positions.diff=Q.positions.current-Q.positions.start,Q.positions.abs=Math.abs(Q.positions.diff);var i=Q.positions.diff,n=Q.positions.abs,l=Q.times.end-Q.times.start;5>n&&300>l&&Q.allowLinks===!1&&(t.freeMode||0===n||Q.swipeReset(),t.preventLinks&&(Q.allowLinks=!0),t.onSlideClick&&(Q.allowSlideClick=!0)),setTimeout(function(){"undefined"!=typeof Q&&null!==Q&&(t.preventLinks&&(Q.allowLinks=!0),t.onSlideClick&&(Q.allowSlideClick=!0))},100);var a=c();if(!Q.isMoved&&t.freeMode)return Q.isMoved=!1,t.onTouchEnd&&Q.fireCallback(t.onTouchEnd,Q,e),void Q.callPlugins("onTouchEnd");if(!Q.isMoved||Q.positions.current>0||Q.positions.current<-a)return Q.swipeReset(),t.onTouchEnd&&Q.fireCallback(t.onTouchEnd,Q,e),void Q.callPlugins("onTouchEnd");if(Q.isMoved=!1,t.freeMode){if(t.freeModeFluid){var o,s=1e3*t.momentumRatio,r=Q.velocity*s,g=Q.positions.current+r,d=!1,I=20*Math.abs(Q.velocity)*t.momentumBounceRatio;-a>g&&(t.momentumBounce&&Q.support.transitions?(-I>g+a&&(g=-a-I),o=-a,d=!0,$=!0):g=-a),g>0&&(t.momentumBounce&&Q.support.transitions?(g>I&&(g=I),o=0,d=!0,$=!0):g=0),0!==Q.velocity&&(s=Math.abs((g-Q.positions.current)/Q.velocity)),Q.setWrapperTranslate(g),Q.setWrapperTransition(s),t.momentumBounce&&d&&Q.wrapperTransitionEnd(function(){$&&(t.onMomentumBounce&&Q.fireCallback(t.onMomentumBounce,Q),Q.callPlugins("onMomentumBounce"),Q.setWrapperTranslate(o),Q.setWrapperTransition(300))}),Q.updateActiveSlide(g)}return(!t.freeModeFluid||l>=300)&&Q.updateActiveSlide(Q.positions.current),t.onTouchEnd&&Q.fireCallback(t.onTouchEnd,Q,e),void Q.callPlugins("onTouchEnd")}k=0>i?"toNext":"toPrev","toNext"===k&&300>=l&&(30>n||!t.shortSwipes?Q.swipeReset():Q.swipeNext(!0,!0)),"toPrev"===k&&300>=l&&(30>n||!t.shortSwipes?Q.swipeReset():Q.swipePrev(!0,!0));var b=0;if("auto"===t.slidesPerView){for(var C,u=Math.abs(Q.getWrapperTranslate()),m=0,p=0;p<Q.slides.length;p++)if(C=Y?Q.slides[p].getWidth(!0,t.roundLengths):Q.slides[p].getHeight(!0,t.roundLengths),m+=C,m>u){b=C;break}b>V&&(b=V)}else b=L*t.slidesPerView;"toNext"===k&&l>300&&(n>=b*t.longSwipesRatio?Q.swipeNext(!0,!0):Q.swipeReset()),"toPrev"===k&&l>300&&(n>=b*t.longSwipesRatio?Q.swipePrev(!0,!0):Q.swipeReset()),t.onTouchEnd&&Q.fireCallback(t.onTouchEnd,Q,e),Q.callPlugins("onTouchEnd")}}function h(e,t){return e&&e.getAttribute("class")&&e.getAttribute("class").indexOf(t)>-1}function G(e){var i=!1;do h(e,t.noSwipingClass)&&(i=!0),e=e.parentElement;while(!i&&e.parentElement&&!h(e,t.wrapperClass));return!i&&h(e,t.wrapperClass)&&h(e,t.noSwipingClass)&&(i=!0),i}function A(e,t){var i,n=document.createElement("div");return n.innerHTML=t,i=n.firstChild,i.className+=" "+e,i.outerHTML}function y(e,i,n){function c(){var l=+new Date,d=l-a;o+=s*d/(1e3/60),g="toNext"===r?o>e:e>o,g?(Q.setWrapperTranslate(Math.ceil(o)),Q._DOMAnimating=!0,window.setTimeout(function(){c()},1e3/60)):(t.onSlideChangeEnd&&("to"===i?n.runCallbacks===!0&&Q.fireCallback(t.onSlideChangeEnd,Q,r):Q.fireCallback(t.onSlideChangeEnd,Q,r)),Q.setWrapperTranslate(e),Q._DOMAnimating=!1)}var l="to"===i&&n.speed>=0?n.speed:t.speed,a=+new Date;if(Q.support.transitions||!t.DOMAnimation)Q.setWrapperTranslate(e),Q.setWrapperTransition(l);else{var o=Q.getWrapperTranslate(),s=Math.ceil((e-o)/l*(1e3/60)),r=o>e?"toNext":"toPrev",g="toNext"===r?o>e:e>o;if(Q._DOMAnimating)return;c()}Q.updateActiveSlide(e),t.onSlideNext&&"next"===i&&n.runCallbacks===!0&&Q.fireCallback(t.onSlideNext,Q,e),t.onSlidePrev&&"prev"===i&&n.runCallbacks===!0&&Q.fireCallback(t.onSlidePrev,Q,e),t.onSlideReset&&"reset"===i&&n.runCallbacks===!0&&Q.fireCallback(t.onSlideReset,Q,e),"next"!==i&&"prev"!==i&&"to"!==i||n.runCallbacks!==!0||Z(i)}function Z(e){if(Q.callPlugins("onSlideChangeStart"),t.onSlideChangeStart)if(t.queueStartCallbacks&&Q.support.transitions){if(Q._queueStartCallbacks)return;Q._queueStartCallbacks=!0,Q.fireCallback(t.onSlideChangeStart,Q,e),Q.wrapperTransitionEnd(function(){Q._queueStartCallbacks=!1})}else Q.fireCallback(t.onSlideChangeStart,Q,e);if(t.onSlideChangeEnd)if(Q.support.transitions)if(t.queueEndCallbacks){if(Q._queueEndCallbacks)return;Q._queueEndCallbacks=!0,Q.wrapperTransitionEnd(function(i){Q.fireCallback(t.onSlideChangeEnd,i,e)})}else Q.wrapperTransitionEnd(function(i){Q.fireCallback(t.onSlideChangeEnd,i,e)});else t.DOMAnimation||setTimeout(function(){Q.fireCallback(t.onSlideChangeEnd,Q,e)},10)}function B(){var e=Q.paginationButtons;if(e)for(var t=0;t<e.length;t++)Q.h.removeEventListener(e[t],"click",v)}function x(){var e=Q.paginationButtons;if(e)for(var t=0;t<e.length;t++)Q.h.addEventListener(e[t],"click",v)}function v(e){for(var i,n=e.target||e.srcElement,c=Q.paginationButtons,l=0;l<c.length;l++)n===c[l]&&(i=l);t.autoplay&&Q.stopAutoplay(!0),Q.swipeTo(i)}function W(){ee=setTimeout(function(){t.loop?(Q.fixLoop(),Q.swipeNext(!0,!0)):Q.swipeNext(!0,!0)||(t.autoplayStopOnLast?(clearTimeout(ee),ee=void 0):Q.swipeTo(0)),Q.wrapperTransitionEnd(function(){"undefined"!=typeof ee&&W()})},t.autoplay)}function X(){Q.calcSlides(),t.loader.slides.length>0&&0===Q.slides.length&&Q.loadSlides(),t.loop&&Q.createLoop(),Q.init(),l(),t.pagination&&Q.createPagination(!0),t.loop||t.initialSlide>0?Q.swipeTo(t.initialSlide,0,!1):Q.updateActiveSlide(0),t.autoplay&&Q.startAutoplay(),Q.centerIndex=Q.activeIndex,t.onSwiperCreated&&Q.fireCallback(t.onSwiperCreated,Q),Q.callPlugins("onSwiperCreated")}if(!document.body.outerHTML&&document.body.__defineGetter__&&HTMLElement){var F=HTMLElement.prototype;F.__defineGetter__&&F.__defineGetter__("outerHTML",function(){return(new XMLSerializer).serializeToString(this)})}if(window.getComputedStyle||(window.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var i=/(\-([a-z]){1})/g;return"float"===t&&(t="styleFloat"),i.test(t)&&(t=t.replace(i,function(){return arguments[2].toUpperCase()})),e.currentStyle[t]?e.currentStyle[t]:null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var i=t||0,n=this.length;n>i;i++)if(this[i]===e)return i;return-1}),(document.querySelectorAll||window.jQuery)&&"undefined"!=typeof e&&(e.nodeType||0!==i(e).length)){var Q=this;Q.touches={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,diff:0,abs:0},Q.positions={start:0,abs:0,diff:0,current:0},Q.times={start:0,end:0},Q.id=(new Date).getTime(),Q.container=e.nodeType?e:i(e)[0],Q.isTouched=!1,Q.isMoved=!1,Q.activeIndex=0,Q.centerIndex=0,Q.activeLoaderIndex=0,Q.activeLoopIndex=0,Q.previousIndex=null,Q.velocity=0,Q.snapGrid=[],Q.slidesGrid=[],Q.imagesToLoad=[],Q.imagesLoaded=0,Q.wrapperLeft=0,Q.wrapperRight=0,Q.wrapperTop=0,Q.wrapperBottom=0,Q.isAndroid=navigator.userAgent.toLowerCase().indexOf("android")>=0;var R,L,H,k,f,V,J={eventTarget:"wrapper",mode:"horizontal",touchRatio:1,speed:300,freeMode:!1,freeModeFluid:!1,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,slidesPerView:1,slidesPerGroup:1,slidesPerViewFit:!0,simulateTouch:!0,followFinger:!0,shortSwipes:!0,longSwipesRatio:.5,moveStartThreshold:!1,onlyExternal:!1,createPagination:!0,pagination:!1,paginationElement:"span",paginationClickable:!1,paginationAsRange:!0,resistance:!0,scrollContainer:!1,preventLinks:!0,preventLinksPropagation:!1,noSwiping:!1,noSwipingClass:"swiper-no-swiping",initialSlide:0,keyboardControl:!1,mousewheelControl:!1,mousewheelControlForceToAxis:!1,useCSS3Transforms:!0,autoplay:!1,autoplayDisableOnInteraction:!0,autoplayStopOnLast:!1,loop:!1,loopAdditionalSlides:0,roundLengths:!1,calculateHeight:!1,cssWidthAndHeight:!1,updateOnImagesReady:!0,releaseFormElements:!0,watchActiveIndex:!1,visibilityFullFit:!1,offsetPxBefore:0,offsetPxAfter:0,offsetSlidesBefore:0,offsetSlidesAfter:0,centeredSlides:!1,queueStartCallbacks:!1,queueEndCallbacks:!1,autoResize:!0,resizeReInit:!1,DOMAnimation:!0,loader:{slides:[],slidesHTMLType:"inner",surroundGroups:1,logic:"reload",loadAllSlides:!1},swipeToPrev:!0,swipeToNext:!0,slideElement:"div",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",wrapperClass:"swiper-wrapper",paginationElementClass:"swiper-pagination-switch",paginationActiveClass:"swiper-active-switch",paginationVisibleClass:"swiper-visible-switch"};t=t||{};for(var w in J)if(w in t&&"object"==typeof t[w])for(var U in J[w])U in t[w]||(t[w][U]=J[w][U]);else w in t||(t[w]=J[w]);Q.params=t,t.scrollContainer&&(t.freeMode=!0,t.freeModeFluid=!0),t.loop&&(t.resistance="100%");var Y="horizontal"===t.mode,N=["mousedown","mousemove","mouseup"];Q.browser.ie10&&(N=["MSPointerDown","MSPointerMove","MSPointerUp"]),Q.browser.ie11&&(N=["pointerdown","pointermove","pointerup"]),Q.touchEvents={touchStart:Q.support.touch||!t.simulateTouch?"touchstart":N[0],touchMove:Q.support.touch||!t.simulateTouch?"touchmove":N[1],touchEnd:Q.support.touch||!t.simulateTouch?"touchend":N[2]};for(var S=Q.container.childNodes.length-1;S>=0;S--)if(Q.container.childNodes[S].className)for(var z=Q.container.childNodes[S].className.split(/\s+/),M=0;M<z.length;M++)z[M]===t.wrapperClass&&(R=Q.container.childNodes[S]);Q.wrapper=R,Q._extendSwiperSlide=function(e){return e.append=function(){return t.loop?e.insertAfter(Q.slides.length-Q.loopedSlides):(Q.wrapper.appendChild(e),Q.reInit()),e},e.prepend=function(){return t.loop?(Q.wrapper.insertBefore(e,Q.slides[Q.loopedSlides]),Q.removeLoopedSlides(),Q.calcSlides(),Q.createLoop()):Q.wrapper.insertBefore(e,Q.wrapper.firstChild),Q.reInit(),e},e.insertAfter=function(i){if("undefined"==typeof i)return!1;var n;return t.loop?(n=Q.slides[i+1+Q.loopedSlides],n?Q.wrapper.insertBefore(e,n):Q.wrapper.appendChild(e),Q.removeLoopedSlides(),Q.calcSlides(),Q.createLoop()):(n=Q.slides[i+1],Q.wrapper.insertBefore(e,n)),Q.reInit(),e},e.clone=function(){return Q._extendSwiperSlide(e.cloneNode(!0))},e.remove=function(){Q.wrapper.removeChild(e),Q.reInit()},e.html=function(t){return"undefined"==typeof t?e.innerHTML:(e.innerHTML=t,e)},e.index=function(){for(var t,i=Q.slides.length-1;i>=0;i--)e===Q.slides[i]&&(t=i);return t},e.isActive=function(){return e.index()===Q.activeIndex},e.swiperSlideDataStorage||(e.swiperSlideDataStorage={}),e.getData=function(t){return e.swiperSlideDataStorage[t]},e.setData=function(t,i){return e.swiperSlideDataStorage[t]=i,e},e.data=function(t,i){return"undefined"==typeof i?e.getAttribute("data-"+t):(e.setAttribute("data-"+t,i),e)},e.getWidth=function(t,i){return Q.h.getWidth(e,t,i)},e.getHeight=function(t,i){return Q.h.getHeight(e,t,i)},e.getOffset=function(){return Q.h.getOffset(e)},e},Q.calcSlides=function(e){var i=Q.slides?Q.slides.length:!1;Q.slides=[],Q.displaySlides=[];for(var n=0;n<Q.wrapper.childNodes.length;n++)if(Q.wrapper.childNodes[n].className)for(var c=Q.wrapper.childNodes[n].className,l=c.split(/\s+/),s=0;s<l.length;s++)l[s]===t.slideClass&&Q.slides.push(Q.wrapper.childNodes[n]);for(n=Q.slides.length-1;n>=0;n--)Q._extendSwiperSlide(Q.slides[n]);i!==!1&&(i!==Q.slides.length||e)&&(o(),a(),Q.updateActiveSlide(),Q.params.pagination&&Q.createPagination(),Q.callPlugins("numberOfSlidesChanged"))},Q.createSlide=function(e,i,n){i=i||Q.params.slideClass,n=n||t.slideElement;var c=document.createElement(n);return c.innerHTML=e||"",c.className=i,Q._extendSwiperSlide(c)},Q.appendSlide=function(e,t,i){return e?e.nodeType?Q._extendSwiperSlide(e).append():Q.createSlide(e,t,i).append():void 0},Q.prependSlide=function(e,t,i){return e?e.nodeType?Q._extendSwiperSlide(e).prepend():Q.createSlide(e,t,i).prepend():void 0},Q.insertSlideAfter=function(e,t,i,n){return"undefined"==typeof e?!1:t.nodeType?Q._extendSwiperSlide(t).insertAfter(e):Q.createSlide(t,i,n).insertAfter(e)},Q.removeSlide=function(e){if(Q.slides[e]){if(t.loop){if(!Q.slides[e+Q.loopedSlides])return!1;Q.slides[e+Q.loopedSlides].remove(),Q.removeLoopedSlides(),Q.calcSlides(),Q.createLoop()}else Q.slides[e].remove();return!0}return!1},Q.removeLastSlide=function(){return Q.slides.length>0?(t.loop?(Q.slides[Q.slides.length-1-Q.loopedSlides].remove(),Q.removeLoopedSlides(),Q.calcSlides(),Q.createLoop()):Q.slides[Q.slides.length-1].remove(),!0):!1},Q.removeAllSlides=function(){for(var e=Q.slides.length,t=Q.slides.length-1;t>=0;t--)Q.slides[t].remove(),t===e-1&&Q.setWrapperTranslate(0)},Q.getSlide=function(e){return Q.slides[e]},Q.getLastSlide=function(){return Q.slides[Q.slides.length-1]},Q.getFirstSlide=function(){return Q.slides[0]},Q.activeSlide=function(){return Q.slides[Q.activeIndex]},Q.fireCallback=function(){var e=arguments[0];if("[object Array]"===Object.prototype.toString.call(e))for(var i=0;i<e.length;i++)"function"==typeof e[i]&&e[i](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);else"[object String]"===Object.prototype.toString.call(e)?t["on"+e]&&Q.fireCallback(t["on"+e],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]):e(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},Q.addCallback=function(e,t){var i,c=this;return c.params["on"+e]?n(this.params["on"+e])?this.params["on"+e].push(t):"function"==typeof this.params["on"+e]?(i=this.params["on"+e],this.params["on"+e]=[],this.params["on"+e].push(i),this.params["on"+e].push(t)):void 0:(this.params["on"+e]=[],this.params["on"+e].push(t))},Q.removeCallbacks=function(e){Q.params["on"+e]&&(Q.params["on"+e]=null)};var _=[];for(var E in Q.plugins)if(t[E]){var j=Q.plugins[E](Q,t[E]);j&&_.push(j)}Q.callPlugins=function(e,t){t||(t={});for(var i=0;i<_.length;i++)e in _[i]&&_[i][e](t)},!Q.browser.ie10&&!Q.browser.ie11||t.onlyExternal||Q.wrapper.classList.add("swiper-wp8-"+(Y?"horizontal":"vertical")),t.freeMode&&(Q.container.className+=" swiper-free-mode"),Q.initialized=!1,Q.init=function(e,i){var n=Q.h.getWidth(Q.container,!1,t.roundLengths),c=Q.h.getHeight(Q.container,!1,t.roundLengths);if(n!==Q.width||c!==Q.height||e){Q.width=n,Q.height=c;var l,a,o,s,r,g,d;V=Y?n:c;var I=Q.wrapper;if(e&&Q.calcSlides(i),"auto"===t.slidesPerView){var b=0,C=0;t.slidesOffset>0&&(I.style.paddingLeft="",I.style.paddingRight="",I.style.paddingTop="",I.style.paddingBottom=""),I.style.width="",I.style.height="",t.offsetPxBefore>0&&(Y?Q.wrapperLeft=t.offsetPxBefore:Q.wrapperTop=t.offsetPxBefore),t.offsetPxAfter>0&&(Y?Q.wrapperRight=t.offsetPxAfter:Q.wrapperBottom=t.offsetPxAfter),t.centeredSlides&&(Y?(Q.wrapperLeft=(V-this.slides[0].getWidth(!0,t.roundLengths))/2,Q.wrapperRight=(V-Q.slides[Q.slides.length-1].getWidth(!0,t.roundLengths))/2):(Q.wrapperTop=(V-Q.slides[0].getHeight(!0,t.roundLengths))/2,Q.wrapperBottom=(V-Q.slides[Q.slides.length-1].getHeight(!0,t.roundLengths))/2)),Y?(Q.wrapperLeft>=0&&(I.style.paddingLeft=Q.wrapperLeft+"px"),Q.wrapperRight>=0&&(I.style.paddingRight=Q.wrapperRight+"px")):(Q.wrapperTop>=0&&(I.style.paddingTop=Q.wrapperTop+"px"),Q.wrapperBottom>=0&&(I.style.paddingBottom=Q.wrapperBottom+"px")),g=0;var u=0;for(Q.snapGrid=[],Q.slidesGrid=[],o=0,d=0;d<Q.slides.length;d++){l=Q.slides[d].getWidth(!0,t.roundLengths),a=Q.slides[d].getHeight(!0,t.roundLengths),t.calculateHeight&&(o=Math.max(o,a));var m=Y?l:a;if(t.centeredSlides){var p=d===Q.slides.length-1?0:Q.slides[d+1].getWidth(!0,t.roundLengths),h=d===Q.slides.length-1?0:Q.slides[d+1].getHeight(!0,t.roundLengths),G=Y?p:h;if(m>V){if(t.slidesPerViewFit)Q.snapGrid.push(g+Q.wrapperLeft),Q.snapGrid.push(g+m-V+Q.wrapperLeft);else for(var A=0;A<=Math.floor(m/(V+Q.wrapperLeft));A++)0===A?Q.snapGrid.push(g+Q.wrapperLeft):Q.snapGrid.push(g+Q.wrapperLeft+V*A);Q.slidesGrid.push(g+Q.wrapperLeft)}else Q.snapGrid.push(u),Q.slidesGrid.push(u);u+=m/2+G/2}else{if(m>V)if(t.slidesPerViewFit)Q.snapGrid.push(g),Q.snapGrid.push(g+m-V);else if(0!==V)for(var y=0;y<=Math.floor(m/V);y++)Q.snapGrid.push(g+V*y);else Q.snapGrid.push(g);else Q.snapGrid.push(g);Q.slidesGrid.push(g)}g+=m,b+=l,C+=a}t.calculateHeight&&(Q.height=o),Y?(H=b+Q.wrapperRight+Q.wrapperLeft,t.cssWidthAndHeight&&"height"!==t.cssWidthAndHeight||(I.style.width=b+"px"),t.cssWidthAndHeight&&"width"!==t.cssWidthAndHeight||(I.style.height=Q.height+"px")):(t.cssWidthAndHeight&&"height"!==t.cssWidthAndHeight||(I.style.width=Q.width+"px"),t.cssWidthAndHeight&&"width"!==t.cssWidthAndHeight||(I.style.height=C+"px"),H=C+Q.wrapperTop+Q.wrapperBottom)}else if(t.scrollContainer)I.style.width="",I.style.height="",s=Q.slides[0].getWidth(!0,t.roundLengths),r=Q.slides[0].getHeight(!0,t.roundLengths),H=Y?s:r,I.style.width=s+"px",I.style.height=r+"px",L=Y?s:r;else{if(t.calculateHeight){for(o=0,r=0,Y||(Q.container.style.height=""),I.style.height="",d=0;d<Q.slides.length;d++)Q.slides[d].style.height="",o=Math.max(Q.slides[d].getHeight(!0),o),Y||(r+=Q.slides[d].getHeight(!0));a=o,Q.height=a,Y?r=a:(V=a,Q.container.style.height=V+"px")}else a=Y?Q.height:Q.height/t.slidesPerView,t.roundLengths&&(a=Math.ceil(a)),r=Y?Q.height:Q.slides.length*a;for(l=Y?Q.width/t.slidesPerView:Q.width,t.roundLengths&&(l=Math.ceil(l)),s=Y?Q.slides.length*l:Q.width,L=Y?l:a,t.offsetSlidesBefore>0&&(Y?Q.wrapperLeft=L*t.offsetSlidesBefore:Q.wrapperTop=L*t.offsetSlidesBefore),t.offsetSlidesAfter>0&&(Y?Q.wrapperRight=L*t.offsetSlidesAfter:Q.wrapperBottom=L*t.offsetSlidesAfter),t.offsetPxBefore>0&&(Y?Q.wrapperLeft=t.offsetPxBefore:Q.wrapperTop=t.offsetPxBefore),t.offsetPxAfter>0&&(Y?Q.wrapperRight=t.offsetPxAfter:Q.wrapperBottom=t.offsetPxAfter),t.centeredSlides&&(Y?(Q.wrapperLeft=(V-L)/2,Q.wrapperRight=(V-L)/2):(Q.wrapperTop=(V-L)/2,Q.wrapperBottom=(V-L)/2)),Y?(Q.wrapperLeft>0&&(I.style.paddingLeft=Q.wrapperLeft+"px"),Q.wrapperRight>0&&(I.style.paddingRight=Q.wrapperRight+"px")):(Q.wrapperTop>0&&(I.style.paddingTop=Q.wrapperTop+"px"),Q.wrapperBottom>0&&(I.style.paddingBottom=Q.wrapperBottom+"px")),H=Y?s+Q.wrapperRight+Q.wrapperLeft:r+Q.wrapperTop+Q.wrapperBottom,parseFloat(s)>0&&(!t.cssWidthAndHeight||"height"===t.cssWidthAndHeight)&&(I.style.width=s+"px"),parseFloat(r)>0&&(!t.cssWidthAndHeight||"width"===t.cssWidthAndHeight)&&(I.style.height=r+"px"),g=0,Q.snapGrid=[],Q.slidesGrid=[],d=0;d<Q.slides.length;d++)Q.snapGrid.push(g),Q.slidesGrid.push(g),g+=L,parseFloat(l)>0&&(!t.cssWidthAndHeight||"height"===t.cssWidthAndHeight)&&(Q.slides[d].style.width=l+"px"),parseFloat(a)>0&&(!t.cssWidthAndHeight||"width"===t.cssWidthAndHeight)&&(Q.slides[d].style.height=a+"px")}Q.initialized?(Q.callPlugins("onInit"),t.onInit&&Q.fireCallback(t.onInit,Q)):(Q.callPlugins("onFirstInit"),t.onFirstInit&&Q.fireCallback(t.onFirstInit,Q)),Q.initialized=!0}},Q.reInit=function(e){Q.init(!0,e)},Q.resizeFix=function(e){Q.callPlugins("beforeResizeFix"),Q.init(t.resizeReInit||e),t.freeMode?Q.getWrapperTranslate()<-c()&&(Q.setWrapperTransition(0),Q.setWrapperTranslate(-c())):(Q.swipeTo(t.loop?Q.activeLoopIndex:Q.activeIndex,0,!1),t.autoplay&&(Q.support.transitions&&"undefined"!=typeof ee?"undefined"!=typeof ee&&(clearTimeout(ee),ee=void 0,Q.startAutoplay()):"undefined"!=typeof te&&(clearInterval(te),te=void 0,Q.startAutoplay()))),Q.callPlugins("afterResizeFix")},Q.destroy=function(e){var i=Q.h.removeEventListener,n="wrapper"===t.eventTarget?Q.wrapper:Q.container;if(Q.browser.ie10||Q.browser.ie11?(i(n,Q.touchEvents.touchStart,u),i(document,Q.touchEvents.touchMove,m),i(document,Q.touchEvents.touchEnd,p)):(Q.support.touch&&(i(n,"touchstart",u),i(n,"touchmove",m),i(n,"touchend",p)),t.simulateTouch&&(i(n,"mousedown",u),i(document,"mousemove",m),i(document,"mouseup",p))),t.autoResize&&i(window,"resize",Q.resizeFix),o(),t.paginationClickable&&B(),t.mousewheelControl&&Q._wheelEvent&&i(Q.container,Q._wheelEvent,r),t.keyboardControl&&i(document,"keydown",s),t.autoplay&&Q.stopAutoplay(),e){Q.wrapper.removeAttribute("style");for(var c=0;c<Q.slides.length;c++)Q.slides[c].removeAttribute("style")}Q.callPlugins("onDestroy"),window.jQuery&&window.jQuery(Q.container).data("swiper")&&window.jQuery(Q.container).removeData("swiper"),window.Zepto&&window.Zepto(Q.container).data("swiper")&&window.Zepto(Q.container).removeData("swiper"),Q=null},Q.disableKeyboardControl=function(){t.keyboardControl=!1,Q.h.removeEventListener(document,"keydown",s)},Q.enableKeyboardControl=function(){t.keyboardControl=!0,Q.h.addEventListener(document,"keydown",s)};var T=(new Date).getTime();if(Q.disableMousewheelControl=function(){return Q._wheelEvent?(t.mousewheelControl=!1,Q.h.removeEventListener(Q.container,Q._wheelEvent,r),!0):!1},Q.enableMousewheelControl=function(){return Q._wheelEvent?(t.mousewheelControl=!0,Q.h.addEventListener(Q.container,Q._wheelEvent,r),!0):!1},t.grabCursor){var O=Q.container.style;O.cursor="move",O.cursor="grab",O.cursor="-moz-grab",O.cursor="-webkit-grab"}Q.allowSlideClick=!0,Q.allowLinks=!0;var D,K,P,q=!1,$=!0;Q.swipeNext=function(e,i){"undefined"==typeof e&&(e=!0),!i&&t.loop&&Q.fixLoop(),!i&&t.autoplay&&Q.stopAutoplay(!0),Q.callPlugins("onSwipeNext");var n=Q.getWrapperTranslate().toFixed(2),l=n;if("auto"===t.slidesPerView){for(var a=0;a<Q.snapGrid.length;a++)if(-n>=Q.snapGrid[a].toFixed(2)&&-n<Q.snapGrid[a+1].toFixed(2)){l=-Q.snapGrid[a+1];break}}else{var o=L*t.slidesPerGroup;l=-(Math.floor(Math.abs(n)/Math.floor(o))*o+o)}return l<-c()&&(l=-c()),l===n?!1:(y(l,"next",{runCallbacks:e}),!0)},Q.swipePrev=function(e,i){"undefined"==typeof e&&(e=!0),!i&&t.loop&&Q.fixLoop(),!i&&t.autoplay&&Q.stopAutoplay(!0),Q.callPlugins("onSwipePrev");var n,c=Math.ceil(Q.getWrapperTranslate());if("auto"===t.slidesPerView){n=0;for(var l=1;l<Q.snapGrid.length;l++){if(-c===Q.snapGrid[l]){n=-Q.snapGrid[l-1];break}if(-c>Q.snapGrid[l]&&-c<Q.snapGrid[l+1]){n=-Q.snapGrid[l];break}}}else{var a=L*t.slidesPerGroup;n=-(Math.ceil(-c/a)-1)*a}return n>0&&(n=0),n===c?!1:(y(n,"prev",{runCallbacks:e}),!0)},Q.swipeReset=function(e){"undefined"==typeof e&&(e=!0),Q.callPlugins("onSwipeReset");var i,n=Q.getWrapperTranslate(),l=L*t.slidesPerGroup;-c();if("auto"===t.slidesPerView){i=0;for(var a=0;a<Q.snapGrid.length;a++){if(-n===Q.snapGrid[a])return;if(-n>=Q.snapGrid[a]&&-n<Q.snapGrid[a+1]){i=Q.positions.diff>0?-Q.snapGrid[a+1]:-Q.snapGrid[a];break}}-n>=Q.snapGrid[Q.snapGrid.length-1]&&(i=-Q.snapGrid[Q.snapGrid.length-1]),n<=-c()&&(i=-c())}else i=0>n?Math.round(n/l)*l:0,n<=-c()&&(i=-c());return t.scrollContainer&&(i=0>n?n:0),i<-c()&&(i=-c()),t.scrollContainer&&V>L&&(i=0),i===n?!1:(y(i,"reset",{runCallbacks:e}),!0)},Q.swipeTo=function(e,i,n){e=parseInt(e,10),Q.callPlugins("onSwipeTo",{index:e,speed:i}),t.loop&&(e+=Q.loopedSlides);var l=Q.getWrapperTranslate();if(!(!isFinite(e)||e>Q.slides.length-1||0>e)){var a;return a="auto"===t.slidesPerView?-Q.slidesGrid[e]:-e*L,a<-c()&&(a=-c()),a===l?!1:("undefined"==typeof n&&(n=!0),y(a,"to",{index:e,speed:i,runCallbacks:n}),!0)}},Q._queueStartCallbacks=!1,Q._queueEndCallbacks=!1,Q.updateActiveSlide=function(e){if(Q.initialized&&0!==Q.slides.length){Q.previousIndex=Q.activeIndex,"undefined"==typeof e&&(e=Q.getWrapperTranslate()),e>0&&(e=0);var i;if("auto"===t.slidesPerView){if(Q.activeIndex=Q.slidesGrid.indexOf(-e),
Q.activeIndex<0){for(i=0;i<Q.slidesGrid.length-1&&!(-e>Q.slidesGrid[i]&&-e<Q.slidesGrid[i+1]);i++);var n=Math.abs(Q.slidesGrid[i]+e),c=Math.abs(Q.slidesGrid[i+1]+e);c>=n?Q.activeIndex=i:Q.activeIndex=i+1}}else Q.activeIndex=Math[t.visibilityFullFit?"ceil":"round"](-e/L);if(Q.activeIndex===Q.slides.length&&(Q.activeIndex=Q.slides.length-1),Q.activeIndex<0&&(Q.activeIndex=0),Q.slides[Q.activeIndex]){if(Q.calcVisibleSlides(e),Q.support.classList){var l;for(i=0;i<Q.slides.length;i++)l=Q.slides[i],l.classList.remove(t.slideActiveClass),Q.visibleSlides.indexOf(l)>=0?l.classList.add(t.slideVisibleClass):l.classList.remove(t.slideVisibleClass);Q.slides[Q.activeIndex].classList.add(t.slideActiveClass)}else{var a=new RegExp("\\s*"+t.slideActiveClass),o=new RegExp("\\s*"+t.slideVisibleClass);for(i=0;i<Q.slides.length;i++)Q.slides[i].className=Q.slides[i].className.replace(a,"").replace(o,""),Q.visibleSlides.indexOf(Q.slides[i])>=0&&(Q.slides[i].className+=" "+t.slideVisibleClass);Q.slides[Q.activeIndex].className+=" "+t.slideActiveClass}if(t.loop){var s=Q.loopedSlides;Q.activeLoopIndex=Q.activeIndex-s,Q.activeLoopIndex>=Q.slides.length-2*s&&(Q.activeLoopIndex=Q.slides.length-2*s-Q.activeLoopIndex),Q.activeLoopIndex<0&&(Q.activeLoopIndex=Q.slides.length-2*s+Q.activeLoopIndex),Q.activeLoopIndex<0&&(Q.activeLoopIndex=0)}else Q.activeLoopIndex=Q.activeIndex;t.pagination&&Q.updatePagination(e)}}},Q.createPagination=function(e){if(t.paginationClickable&&Q.paginationButtons&&B(),Q.paginationContainer=t.pagination.nodeType?t.pagination:i(t.pagination)[0],t.createPagination){var n="",c=Q.slides.length,l=c;t.loop&&(l-=2*Q.loopedSlides);for(var a=0;l>a;a++)n+="<"+t.paginationElement+' class="'+t.paginationElementClass+'"></'+t.paginationElement+">";Q.paginationContainer.innerHTML=n}Q.paginationButtons=i("."+t.paginationElementClass,Q.paginationContainer),e||Q.updatePagination(),Q.callPlugins("onCreatePagination"),t.paginationClickable&&x()},Q.updatePagination=function(e){if(t.pagination&&!(Q.slides.length<1)){var n=i("."+t.paginationActiveClass,Q.paginationContainer);if(n){var c=Q.paginationButtons;if(0!==c.length){for(var l=0;l<c.length;l++)c[l].className=t.paginationElementClass;var a=t.loop?Q.loopedSlides:0;if(t.paginationAsRange){Q.visibleSlides||Q.calcVisibleSlides(e);var o,s=[];for(o=0;o<Q.visibleSlides.length;o++){var r=Q.slides.indexOf(Q.visibleSlides[o])-a;t.loop&&0>r&&(r=Q.slides.length-2*Q.loopedSlides+r),t.loop&&r>=Q.slides.length-2*Q.loopedSlides&&(r=Q.slides.length-2*Q.loopedSlides-r,r=Math.abs(r)),s.push(r)}for(o=0;o<s.length;o++)c[s[o]]&&(c[s[o]].className+=" "+t.paginationVisibleClass);t.loop?void 0!==c[Q.activeLoopIndex]&&(c[Q.activeLoopIndex].className+=" "+t.paginationActiveClass):c[Q.activeIndex]&&(c[Q.activeIndex].className+=" "+t.paginationActiveClass)}else t.loop?c[Q.activeLoopIndex]&&(c[Q.activeLoopIndex].className+=" "+t.paginationActiveClass+" "+t.paginationVisibleClass):c[Q.activeIndex]&&(c[Q.activeIndex].className+=" "+t.paginationActiveClass+" "+t.paginationVisibleClass)}}}},Q.calcVisibleSlides=function(e){var i=[],n=0,c=0,l=0;Y&&Q.wrapperLeft>0&&(e+=Q.wrapperLeft),!Y&&Q.wrapperTop>0&&(e+=Q.wrapperTop);for(var a=0;a<Q.slides.length;a++){n+=c,c="auto"===t.slidesPerView?Y?Q.h.getWidth(Q.slides[a],!0,t.roundLengths):Q.h.getHeight(Q.slides[a],!0,t.roundLengths):L,l=n+c;var o=!1;t.visibilityFullFit?(n>=-e&&-e+V>=l&&(o=!0),-e>=n&&l>=-e+V&&(o=!0)):(l>-e&&-e+V>=l&&(o=!0),n>=-e&&-e+V>n&&(o=!0),-e>n&&l>-e+V&&(o=!0)),o&&i.push(Q.slides[a])}0===i.length&&(i=[Q.slides[Q.activeIndex]]),Q.visibleSlides=i};var ee,te;Q.startAutoplay=function(){if(Q.support.transitions){if("undefined"!=typeof ee)return!1;if(!t.autoplay)return;Q.callPlugins("onAutoplayStart"),t.onAutoplayStart&&Q.fireCallback(t.onAutoplayStart,Q),W()}else{if("undefined"!=typeof te)return!1;if(!t.autoplay)return;Q.callPlugins("onAutoplayStart"),t.onAutoplayStart&&Q.fireCallback(t.onAutoplayStart,Q),te=setInterval(function(){t.loop?(Q.fixLoop(),Q.swipeNext(!0,!0)):Q.swipeNext(!0,!0)||(t.autoplayStopOnLast?(clearInterval(te),te=void 0):Q.swipeTo(0))},t.autoplay)}},Q.stopAutoplay=function(e){if(Q.support.transitions){if(!ee)return;ee&&clearTimeout(ee),ee=void 0,e&&!t.autoplayDisableOnInteraction&&Q.wrapperTransitionEnd(function(){W()}),Q.callPlugins("onAutoplayStop"),t.onAutoplayStop&&Q.fireCallback(t.onAutoplayStop,Q)}else te&&clearInterval(te),te=void 0,Q.callPlugins("onAutoplayStop"),t.onAutoplayStop&&Q.fireCallback(t.onAutoplayStop,Q)},Q.loopCreated=!1,Q.removeLoopedSlides=function(){if(Q.loopCreated)for(var e=0;e<Q.slides.length;e++)Q.slides[e].getData("looped")===!0&&Q.wrapper.removeChild(Q.slides[e])},Q.createLoop=function(){if(0!==Q.slides.length){"auto"===t.slidesPerView?Q.loopedSlides=t.loopedSlides||1:Q.loopedSlides=Math.floor(t.slidesPerView)+t.loopAdditionalSlides,Q.loopedSlides>Q.slides.length&&(Q.loopedSlides=Q.slides.length);var e,i="",n="",c="",l=Q.slides.length,a=Math.floor(Q.loopedSlides/l),o=Q.loopedSlides%l;for(e=0;a*l>e;e++){var s=e;if(e>=l){var r=Math.floor(e/l);s=e-l*r}c+=Q.slides[s].outerHTML}for(e=0;o>e;e++)n+=A(t.slideDuplicateClass,Q.slides[e].outerHTML);for(e=l-o;l>e;e++)i+=A(t.slideDuplicateClass,Q.slides[e].outerHTML);var g=i+c+R.innerHTML+c+n;for(R.innerHTML=g,Q.loopCreated=!0,Q.calcSlides(),e=0;e<Q.slides.length;e++)(e<Q.loopedSlides||e>=Q.slides.length-Q.loopedSlides)&&Q.slides[e].setData("looped",!0);Q.callPlugins("onCreateLoop")}},Q.fixLoop=function(){var e;Q.activeIndex<Q.loopedSlides?(e=Q.slides.length-3*Q.loopedSlides+Q.activeIndex,Q.swipeTo(e,0,!1)):("auto"===t.slidesPerView&&Q.activeIndex>=2*Q.loopedSlides||Q.activeIndex>Q.slides.length-2*t.slidesPerView)&&(e=-Q.slides.length+Q.activeIndex+Q.loopedSlides,Q.swipeTo(e,0,!1))},Q.loadSlides=function(){var e="";Q.activeLoaderIndex=0;for(var i=t.loader.slides,n=t.loader.loadAllSlides?i.length:t.slidesPerView*(1+t.loader.surroundGroups),c=0;n>c;c++)e+="outer"===t.loader.slidesHTMLType?i[c]:"<"+t.slideElement+' class="'+t.slideClass+'" data-swiperindex="'+c+'">'+i[c]+"</"+t.slideElement+">";Q.wrapper.innerHTML=e,Q.calcSlides(!0),t.loader.loadAllSlides||Q.wrapperTransitionEnd(Q.reloadSlides,!0)},Q.reloadSlides=function(){var e=t.loader.slides,i=parseInt(Q.activeSlide().data("swiperindex"),10);if(!(0>i||i>e.length-1)){Q.activeLoaderIndex=i;var n=Math.max(0,i-t.slidesPerView*t.loader.surroundGroups),c=Math.min(i+t.slidesPerView*(1+t.loader.surroundGroups)-1,e.length-1);if(i>0){var l=-L*(i-n);Q.setWrapperTranslate(l),Q.setWrapperTransition(0)}var a;if("reload"===t.loader.logic){Q.wrapper.innerHTML="";var o="";for(a=n;c>=a;a++)o+="outer"===t.loader.slidesHTMLType?e[a]:"<"+t.slideElement+' class="'+t.slideClass+'" data-swiperindex="'+a+'">'+e[a]+"</"+t.slideElement+">";Q.wrapper.innerHTML=o}else{var s=1e3,r=0;for(a=0;a<Q.slides.length;a++){var g=Q.slides[a].data("swiperindex");n>g||g>c?Q.wrapper.removeChild(Q.slides[a]):(s=Math.min(g,s),r=Math.max(g,r))}for(a=n;c>=a;a++){var d;s>a&&(d=document.createElement(t.slideElement),d.className=t.slideClass,d.setAttribute("data-swiperindex",a),d.innerHTML=e[a],Q.wrapper.insertBefore(d,Q.wrapper.firstChild)),a>r&&(d=document.createElement(t.slideElement),d.className=t.slideClass,d.setAttribute("data-swiperindex",a),d.innerHTML=e[a],Q.wrapper.appendChild(d))}}Q.reInit(!0)}},X()}};n.prototype={plugins:{},wrapperTransitionEnd:function(e,t){"use strict";function i(o){if(o.target===l&&(e(c),c.params.queueEndCallbacks&&(c._queueEndCallbacks=!1),!t))for(n=0;n<a.length;n++)c.h.removeEventListener(l,a[n],i)}var n,c=this,l=c.wrapper,a=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"];if(e)for(n=0;n<a.length;n++)c.h.addEventListener(l,a[n],i)},getWrapperTranslate:function(e){"use strict";var t,i,n,c,l=this.wrapper;return"undefined"==typeof e&&(e="horizontal"===this.params.mode?"x":"y"),this.support.transforms&&this.params.useCSS3Transforms?(n=window.getComputedStyle(l,null),window.WebKitCSSMatrix?c=new WebKitCSSMatrix("none"===n.webkitTransform?"":n.webkitTransform):(c=n.MozTransform||n.OTransform||n.MsTransform||n.msTransform||n.transform||n.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),t=c.toString().split(",")),"x"===e&&(i=window.WebKitCSSMatrix?c.m41:16===t.length?parseFloat(t[12]):parseFloat(t[4])),"y"===e&&(i=window.WebKitCSSMatrix?c.m42:16===t.length?parseFloat(t[13]):parseFloat(t[5]))):("x"===e&&(i=parseFloat(l.style.left,10)||0),"y"===e&&(i=parseFloat(l.style.top,10)||0)),i||0},setWrapperTranslate:function(e,t,i){"use strict";var n,c=this.wrapper.style,l={x:0,y:0,z:0};3===arguments.length?(l.x=e,l.y=t,l.z=i):("undefined"==typeof t&&(t="horizontal"===this.params.mode?"x":"y"),l[t]=e),this.support.transforms&&this.params.useCSS3Transforms?(n=this.support.transforms3d?"translate3d("+l.x+"px, "+l.y+"px, "+l.z+"px)":"translate("+l.x+"px, "+l.y+"px)",c.webkitTransform=c.MsTransform=c.msTransform=c.MozTransform=c.OTransform=c.transform=n):(c.left=l.x+"px",c.top=l.y+"px"),this.callPlugins("onSetWrapperTransform",l),this.params.onSetWrapperTransform&&this.fireCallback(this.params.onSetWrapperTransform,this,l)},setWrapperTransition:function(e){"use strict";var t=this.wrapper.style;t.webkitTransitionDuration=t.MsTransitionDuration=t.msTransitionDuration=t.MozTransitionDuration=t.OTransitionDuration=t.transitionDuration=e/1e3+"s",this.callPlugins("onSetWrapperTransition",{duration:e}),this.params.onSetWrapperTransition&&this.fireCallback(this.params.onSetWrapperTransition,this,e)},h:{getWidth:function(e,t,i){"use strict";var n=window.getComputedStyle(e,null).getPropertyValue("width"),c=parseFloat(n);return(isNaN(c)||n.indexOf("%")>0||0>c)&&(c=e.offsetWidth-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-left"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"))),t&&(c+=parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-left"))+parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"))),i?Math.ceil(c):c},getHeight:function(e,t,i){"use strict";if(t)return e.offsetHeight;var n=window.getComputedStyle(e,null).getPropertyValue("height"),c=parseFloat(n);return(isNaN(c)||n.indexOf("%")>0||0>c)&&(c=e.offsetHeight-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-top"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-bottom"))),t&&(c+=parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-top"))+parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-bottom"))),i?Math.ceil(c):c},getOffset:function(e){"use strict";var t=e.getBoundingClientRect(),i=document.body,n=e.clientTop||i.clientTop||0,c=e.clientLeft||i.clientLeft||0,l=window.pageYOffset||e.scrollTop,a=window.pageXOffset||e.scrollLeft;return document.documentElement&&!window.pageYOffset&&(l=document.documentElement.scrollTop,a=document.documentElement.scrollLeft),{top:t.top+l-n,left:t.left+a-c}},windowWidth:function(){"use strict";return window.innerWidth?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:void 0},windowHeight:function(){"use strict";return window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:void 0},windowScroll:function(){"use strict";return"undefined"!=typeof pageYOffset?{left:window.pageXOffset,top:window.pageYOffset}:document.documentElement?{left:document.documentElement.scrollLeft,top:document.documentElement.scrollTop}:void 0},addEventListener:function(e,t,i,n){"use strict";"undefined"==typeof n&&(n=!1),e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i)},removeEventListener:function(e,t,i,n){"use strict";"undefined"==typeof n&&(n=!1),e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on"+t,i)}},setTransform:function(e,t){"use strict";var i=e.style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=t},setTranslate:function(e,t){"use strict";var i=e.style,n={x:t.x||0,y:t.y||0,z:t.z||0},c=this.support.transforms3d?"translate3d("+n.x+"px,"+n.y+"px,"+n.z+"px)":"translate("+n.x+"px,"+n.y+"px)";i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=c,this.support.transforms||(i.left=n.x+"px",i.top=n.y+"px")},setTransition:function(e,t){"use strict";var i=e.style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=t+"ms"},support:{touch:window.Modernizr&&Modernizr.touch===!0||function(){"use strict";return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){"use strict";var e=document.createElement("div").style;return"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e}(),transforms:window.Modernizr&&Modernizr.csstransforms===!0||function(){"use strict";var e=document.createElement("div").style;return"transform"in e||"WebkitTransform"in e||"MozTransform"in e||"msTransform"in e||"MsTransform"in e||"OTransform"in e}(),transitions:window.Modernizr&&Modernizr.csstransitions===!0||function(){"use strict";var e=document.createElement("div").style;return"transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"MsTransition"in e||"OTransition"in e}(),classList:function(){"use strict";var e=document.createElement("div");return"classList"in e}()},browser:{ie8:function(){"use strict";var e=-1;if("Microsoft Internet Explorer"===navigator.appName){var t=navigator.userAgent,i=new RegExp(/MSIE ([0-9]{1,}[\.0-9]{0,})/);null!==i.exec(t)&&(e=parseFloat(RegExp.$1))}return-1!==e&&9>e}(),ie10:window.navigator.msPointerEnabled,ie11:window.navigator.pointerEnabled}},(window.jQuery||window.Zepto)&&!function(e){"use strict";e.fn.swiper=function(t){var i;return this.each(function(c){var l=e(this),a=new n(l[0],t);c||(i=a),l.data("swiper",a)}),i}}(window.jQuery||window.Zepto),"undefined"!=typeof t?t.exports=n:"function"==typeof define&&define.amd&&define([],function(){"use strict";return n})},{}],38:[function(e,t,i){!function(){"use strict";function e(e){return n(c(e),arguments)}function t(t,i){return e.apply(null,[t].concat(i||[]))}function n(t,i){var n,c,a,o,s,r,g,d,I,b=1,C=t.length,u="";for(c=0;C>c;c++)if("string"==typeof t[c])u+=t[c];else if(Array.isArray(t[c])){if(o=t[c],o[2])for(n=i[b],a=0;a<o[2].length;a++){if(!n.hasOwnProperty(o[2][a]))throw new Error(e('[sprintf] property "%s" does not exist',o[2][a]));n=n[o[2][a]]}else n=o[1]?i[o[1]]:i[b++];if(l.not_type.test(o[8])&&l.not_primitive.test(o[8])&&n instanceof Function&&(n=n()),l.numeric_arg.test(o[8])&&"number"!=typeof n&&isNaN(n))throw new TypeError(e("[sprintf] expecting number but found %T",n));switch(l.number.test(o[8])&&(d=n>=0),o[8]){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,o[6]?parseInt(o[6]):0);break;case"e":n=o[7]?parseFloat(n).toExponential(o[7]):parseFloat(n).toExponential();break;case"f":n=o[7]?parseFloat(n).toFixed(o[7]):parseFloat(n);break;case"g":n=o[7]?String(Number(n.toPrecision(o[7]))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=o[7]?n.substring(0,o[7]):n;break;case"t":n=String(!!n),n=o[7]?n.substring(0,o[7]):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=o[7]?n.substring(0,o[7]):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=o[7]?n.substring(0,o[7]):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}l.json.test(o[8])?u+=n:(!l.number.test(o[8])||d&&!o[3]?I="":(I=d?"+":"-",n=n.toString().replace(l.sign,"")),r=o[4]?"0"===o[4]?"0":o[4].charAt(1):" ",g=o[6]-(I+n).length,s=o[6]&&g>0?r.repeat(g):"",u+=o[5]?I+n+s:"0"===r?I+s+n:s+I+n)}return u}function c(e){if(a[e])return a[e];for(var t,i=e,n=[],c=0;i;){if(null!==(t=l.text.exec(i)))n.push(t[0]);else if(null!==(t=l.modulo.exec(i)))n.push("%");else{if(null===(t=l.placeholder.exec(i)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){c|=1;var o=[],s=t[2],r=[];if(null===(r=l.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o.push(r[1]);""!==(s=s.substring(r[0].length));)if(null!==(r=l.key_access.exec(s)))o.push(r[1]);else{if(null===(r=l.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");o.push(r[1])}t[2]=o}else c|=2;if(3===c)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push(t)}i=i.substring(t[0].length)}return a[e]=n}var l={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/},a=Object.create(null);"undefined"!=typeof i&&(i.sprintf=e,i.vsprintf=t),"undefined"!=typeof window&&(window.sprintf=e,window.vsprintf=t,"function"==typeof define&&define.amd&&define(function(){return{sprintf:e,vsprintf:t}}))}()},{}],37:[function(e,t,i){var n,c,l=e("query-string");"undefined"!=typeof window&&(n=window&&window.history&&window.history.replaceState,c=window&&window.history&&window.history.pushState),n?t.exports=function(e,t){t||(t={});var i,a=!e,o=!a&&"string"==typeof e,s=t.clear||o,r=t.pushState?c:n,g=s?{}:l.parse(window.location.search);if(a||o)i=e||"";else{for(var d in e){var I=e[d];I||0===I?g[d]=e[d]:delete g[d]}i=l.stringify(g)}i.length&&"?"!==i.charAt(0)&&(i="?"+i),r.call(window.history,window.history.state,"",window.location.pathname+(i||""))}:t.exports=function(){}},{"query-string":35}],36:[function(e,t,i){t.exports=e("cssify")},{cssify:9}],35:[function(e,t,i){"use strict";var n=e("strict-uri-encode");i.extract=function(e){return e.split("?")[1]||""},i.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#|&)/,""),e?e.split("&").reduce(function(e,t){var i=t.replace(/\+/g," ").split("="),n=i.shift(),c=i.length>0?i.join("="):void 0;return n=decodeURIComponent(n),c=void 0===c?null:decodeURIComponent(c),e.hasOwnProperty(n)?Array.isArray(e[n])?e[n].push(c):e[n]=[e[n],c]:e[n]=c,e},{}):{})},i.stringify=function(e){return e?Object.keys(e).sort().map(function(t){var i=e[t];return Array.isArray(i)?i.sort().map(function(e){return n(t)+"="+n(e)}).join("&"):n(t)+"="+n(i)}).filter(function(e){return e.length>0}).join("&"):""}},{"strict-uri-encode":39}],39:[function(e,t,i){"use strict";t.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},{}],19:[function(e,t,i){"use strict";var n=e("./lib/utils/common").assign,c=e("./lib/deflate"),l=e("./lib/inflate"),a=e("./lib/zlib/constants"),o={};n(o,c,l,a),t.exports=o},{"./lib/deflate":20,"./lib/inflate":21,"./lib/utils/common":22,"./lib/zlib/constants":25}],21:[function(e,t,i){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var i=a.inflateInit2(this.strm,t.windowBits);if(i!==r.Z_OK)throw new Error(g[i]);this.header=new I,a.inflateGetHeader(this.strm,this.header)}function c(e,t){var i=new n(t);if(i.push(e,!0),i.err)throw i.msg;return i.result}function l(e,t){return t=t||{},t.raw=!0,c(e,t)}var a=e("./zlib/inflate"),o=e("./utils/common"),s=e("./utils/strings"),r=e("./zlib/constants"),g=e("./zlib/messages"),d=e("./zlib/zstream"),I=e("./zlib/gzheader"),b=Object.prototype.toString;n.prototype.push=function(e,t){var i,n,c,l,g,d,I=this.strm,C=this.options.chunkSize,u=this.options.dictionary,m=!1;if(this.ended)return!1;n=t===~~t?t:t===!0?r.Z_FINISH:r.Z_NO_FLUSH,"string"==typeof e?I.input=s.binstring2buf(e):"[object ArrayBuffer]"===b.call(e)?I.input=new Uint8Array(e):I.input=e,I.next_in=0,I.avail_in=I.input.length;do{if(0===I.avail_out&&(I.output=new o.Buf8(C),I.next_out=0,I.avail_out=C),i=a.inflate(I,r.Z_NO_FLUSH),i===r.Z_NEED_DICT&&u&&(d="string"==typeof u?s.string2buf(u):"[object ArrayBuffer]"===b.call(u)?new Uint8Array(u):u,i=a.inflateSetDictionary(this.strm,d)),i===r.Z_BUF_ERROR&&m===!0&&(i=r.Z_OK,m=!1),i!==r.Z_STREAM_END&&i!==r.Z_OK)return this.onEnd(i),this.ended=!0,!1;I.next_out&&(0!==I.avail_out&&i!==r.Z_STREAM_END&&(0!==I.avail_in||n!==r.Z_FINISH&&n!==r.Z_SYNC_FLUSH)||("string"===this.options.to?(c=s.utf8border(I.output,I.next_out),l=I.next_out-c,g=s.buf2string(I.output,c),I.next_out=l,I.avail_out=C-l,l&&o.arraySet(I.output,I.output,c,l,0),this.onData(g)):this.onData(o.shrinkBuf(I.output,I.next_out)))),0===I.avail_in&&0===I.avail_out&&(m=!0)}while((I.avail_in>0||0===I.avail_out)&&i!==r.Z_STREAM_END);return i===r.Z_STREAM_END&&(n=r.Z_FINISH),n===r.Z_FINISH?(i=a.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===r.Z_OK):n===r.Z_SYNC_FLUSH?(this.onEnd(r.Z_OK),I.avail_out=0,!0):!0},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===r.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=n,i.inflate=c,i.inflateRaw=l,i.ungzip=c},{"./utils/common":22,"./utils/strings":23,"./zlib/constants":25,"./zlib/gzheader":28,"./zlib/inflate":30,"./zlib/messages":32,"./zlib/zstream":34}],30:[function(e,t,i){"use strict";function n(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=w,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new h.Buf32(ue),t.distcode=t.distdyn=new h.Buf32(me),t.sane=1,t.back=-1,Q):H}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,l(e)):H}function o(e,t){var i,n;return e&&e.state?(n=e.state,0>t?(i=0,t=-t):(i=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?H:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,a(e))):H}function s(e,t){var i,n;return e?(n=new c,e.state=n,n.window=null,i=o(e,t),i!==Q&&(e.state=null),i):H}function r(e){return s(e,he)}function g(e){if(Ge){var t;for(m=new h.Buf32(512),p=new h.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(Z(x,e.lens,0,288,m,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;Z(v,e.lens,0,32,p,0,e.work,{bits:5}),Ge=!1}e.lencode=m,e.lenbits=9,e.distcode=p,e.distbits=5}function d(e,t,i,n){var c,l=e.state;return null===l.window&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new h.Buf8(l.wsize)),n>=l.wsize?(h.arraySet(l.window,t,i-l.wsize,l.wsize,0),l.wnext=0,l.whave=l.wsize):(c=l.wsize-l.wnext,c>n&&(c=n),h.arraySet(l.window,t,i-n,c,l.wnext),n-=c,n?(h.arraySet(l.window,t,i-n,n,0),l.wnext=n,l.whave=l.wsize):(l.wnext+=c,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=c))),0}function I(e,t){var i,c,l,a,o,s,r,I,b,C,u,m,p,ue,me,pe,he,Ge,Ae,ye,Ze,Be,xe,ve,We=0,Xe=new h.Buf8(4),Fe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return H;i=e.state,i.mode===O&&(i.mode=D),o=e.next_out,l=e.output,r=e.avail_out,a=e.next_in,c=e.input,s=e.avail_in,I=i.hold,b=i.bits,C=s,u=r,Be=Q;e:for(;;)switch(i.mode){case w:if(0===i.wrap){i.mode=D;break}for(;16>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}if(2&i.wrap&&35615===I){i.check=0,Xe[0]=255&I,Xe[1]=I>>>8&255,i.check=A(i.check,Xe,2,0),I=0,b=0,i.mode=U;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&I)<<8)+(I>>8))%31){e.msg="incorrect header check",i.mode=Ie;break}if((15&I)!==J){e.msg="unknown compression method",i.mode=Ie;break}if(I>>>=4,b-=4,Ze=(15&I)+8,0===i.wbits)i.wbits=Ze;else if(Ze>i.wbits){e.msg="invalid window size",i.mode=Ie;break}i.dmax=1<<Ze,e.adler=i.check=1,i.mode=512&I?j:O,I=0,b=0;break;case U:for(;16>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}if(i.flags=I,(255&i.flags)!==J){e.msg="unknown compression method",i.mode=Ie;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=Ie;break}i.head&&(i.head.text=I>>8&1),512&i.flags&&(Xe[0]=255&I,Xe[1]=I>>>8&255,i.check=A(i.check,Xe,2,0)),I=0,b=0,i.mode=Y;case Y:for(;32>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}i.head&&(i.head.time=I),512&i.flags&&(Xe[0]=255&I,Xe[1]=I>>>8&255,Xe[2]=I>>>16&255,Xe[3]=I>>>24&255,i.check=A(i.check,Xe,4,0)),I=0,b=0,i.mode=N;case N:for(;16>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}i.head&&(i.head.xflags=255&I,i.head.os=I>>8),512&i.flags&&(Xe[0]=255&I,Xe[1]=I>>>8&255,i.check=A(i.check,Xe,2,0)),I=0,b=0,i.mode=S;case S:if(1024&i.flags){for(;16>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}i.length=I,i.head&&(i.head.extra_len=I),512&i.flags&&(Xe[0]=255&I,Xe[1]=I>>>8&255,i.check=A(i.check,Xe,2,0)),I=0,b=0}else i.head&&(i.head.extra=null);i.mode=z;case z:if(1024&i.flags&&(m=i.length,m>s&&(m=s),m&&(i.head&&(Ze=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),h.arraySet(i.head.extra,c,a,m,Ze)),512&i.flags&&(i.check=A(i.check,c,m,a)),s-=m,a+=m,i.length-=m),i.length))break e;i.length=0,i.mode=M;case M:if(2048&i.flags){if(0===s)break e;m=0;do Ze=c[a+m++],i.head&&Ze&&i.length<65536&&(i.head.name+=String.fromCharCode(Ze));while(Ze&&s>m);if(512&i.flags&&(i.check=A(i.check,c,m,a)),s-=m,a+=m,Ze)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=_;case _:if(4096&i.flags){if(0===s)break e;m=0;do Ze=c[a+m++],i.head&&Ze&&i.length<65536&&(i.head.comment+=String.fromCharCode(Ze));while(Ze&&s>m);if(512&i.flags&&(i.check=A(i.check,c,m,a)),s-=m,a+=m,Ze)break e}else i.head&&(i.head.comment=null);i.mode=E;case E:if(512&i.flags){for(;16>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}if(I!==(65535&i.check)){e.msg="header crc mismatch",i.mode=Ie;break}I=0,b=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=O;break;case j:for(;32>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}e.adler=i.check=n(I),I=0,b=0,i.mode=T;case T:if(0===i.havedict)return e.next_out=o,e.avail_out=r,e.next_in=a,e.avail_in=s,i.hold=I,i.bits=b,L;e.adler=i.check=1,i.mode=O;case O:if(t===X||t===F)break e;case D:if(i.last){I>>>=7&b,b-=7&b,i.mode=re;break}for(;3>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}switch(i.last=1&I,I>>>=1,b-=1,3&I){case 0:i.mode=K;break;case 1:if(g(i),i.mode=ie,t===F){I>>>=2,b-=2;break e}break;case 2:i.mode=$;break;case 3:e.msg="invalid block type",i.mode=Ie}I>>>=2,b-=2;break;case K:for(I>>>=7&b,b-=7&b;32>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}if((65535&I)!==(I>>>16^65535)){e.msg="invalid stored block lengths",i.mode=Ie;break}if(i.length=65535&I,I=0,b=0,i.mode=P,t===F)break e;case P:i.mode=q;case q:if(m=i.length){if(m>s&&(m=s),m>r&&(m=r),0===m)break e;h.arraySet(l,c,a,m,o),s-=m,a+=m,r-=m,o+=m,i.length-=m;break}i.mode=O;break;case $:for(;14>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}if(i.nlen=(31&I)+257,I>>>=5,b-=5,i.ndist=(31&I)+1,I>>>=5,b-=5,i.ncode=(15&I)+4,I>>>=4,b-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=Ie;break}i.have=0,i.mode=ee;case ee:for(;i.have<i.ncode;){for(;3>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}i.lens[Fe[i.have++]]=7&I,I>>>=3,b-=3}for(;i.have<19;)i.lens[Fe[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,xe={bits:i.lenbits},Be=Z(B,i.lens,0,19,i.lencode,0,i.work,xe),i.lenbits=xe.bits,Be){e.msg="invalid code lengths set",i.mode=Ie;break}i.have=0,i.mode=te;case te:for(;i.have<i.nlen+i.ndist;){for(;We=i.lencode[I&(1<<i.lenbits)-1],me=We>>>24,pe=We>>>16&255,he=65535&We,!(b>=me);){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}if(16>he)I>>>=me,b-=me,i.lens[i.have++]=he;else{if(16===he){for(ve=me+2;ve>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}if(I>>>=me,b-=me,0===i.have){e.msg="invalid bit length repeat",i.mode=Ie;break}Ze=i.lens[i.have-1],m=3+(3&I),I>>>=2,b-=2}else if(17===he){for(ve=me+3;ve>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}I>>>=me,b-=me,Ze=0,m=3+(7&I),I>>>=3,b-=3}else{for(ve=me+7;ve>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}I>>>=me,b-=me,Ze=0,m=11+(127&I),I>>>=7,b-=7}if(i.have+m>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=Ie;break}for(;m--;)i.lens[i.have++]=Ze}}if(i.mode===Ie)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=Ie;break}if(i.lenbits=9,xe={bits:i.lenbits},Be=Z(x,i.lens,0,i.nlen,i.lencode,0,i.work,xe),i.lenbits=xe.bits,Be){e.msg="invalid literal/lengths set",i.mode=Ie;break}if(i.distbits=6,i.distcode=i.distdyn,xe={bits:i.distbits},Be=Z(v,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,xe),i.distbits=xe.bits,Be){e.msg="invalid distances set",i.mode=Ie;break}if(i.mode=ie,t===F)break e;case ie:i.mode=ne;case ne:if(s>=6&&r>=258){e.next_out=o,e.avail_out=r,e.next_in=a,e.avail_in=s,i.hold=I,i.bits=b,y(e,u),o=e.next_out,l=e.output,r=e.avail_out,a=e.next_in,c=e.input,s=e.avail_in,I=i.hold,b=i.bits,i.mode===O&&(i.back=-1);break}for(i.back=0;We=i.lencode[I&(1<<i.lenbits)-1],me=We>>>24,pe=We>>>16&255,he=65535&We,!(b>=me);){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}if(pe&&0===(240&pe)){for(Ge=me,Ae=pe,ye=he;We=i.lencode[ye+((I&(1<<Ge+Ae)-1)>>Ge)],me=We>>>24,pe=We>>>16&255,he=65535&We,!(b>=Ge+me);){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}I>>>=Ge,b-=Ge,i.back+=Ge}if(I>>>=me,b-=me,i.back+=me,i.length=he,0===pe){i.mode=se;break}if(32&pe){i.back=-1,i.mode=O;break}if(64&pe){e.msg="invalid literal/length code",i.mode=Ie;break}i.extra=15&pe,i.mode=ce;case ce:if(i.extra){for(ve=i.extra;ve>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}i.length+=I&(1<<i.extra)-1,I>>>=i.extra,b-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=le;case le:for(;We=i.distcode[I&(1<<i.distbits)-1],me=We>>>24,pe=We>>>16&255,he=65535&We,!(b>=me);){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}if(0===(240&pe)){for(Ge=me,Ae=pe,ye=he;We=i.distcode[ye+((I&(1<<Ge+Ae)-1)>>Ge)],me=We>>>24,pe=We>>>16&255,he=65535&We,!(b>=Ge+me);){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}I>>>=Ge,b-=Ge,i.back+=Ge}if(I>>>=me,b-=me,i.back+=me,64&pe){e.msg="invalid distance code",i.mode=Ie;break}i.offset=he,i.extra=15&pe,i.mode=ae;case ae:if(i.extra){for(ve=i.extra;ve>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}i.offset+=I&(1<<i.extra)-1,I>>>=i.extra,b-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=Ie;break}i.mode=oe;case oe:if(0===r)break e;if(m=u-r,i.offset>m){if(m=i.offset-m,m>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=Ie;break}m>i.wnext?(m-=i.wnext,p=i.wsize-m):p=i.wnext-m,m>i.length&&(m=i.length),ue=i.window}else ue=l,p=o-i.offset,m=i.length;m>r&&(m=r),r-=m,i.length-=m;do l[o++]=ue[p++];while(--m);0===i.length&&(i.mode=ne);break;case se:if(0===r)break e;l[o++]=i.length,r--,i.mode=ne;break;case re:if(i.wrap){for(;32>b;){if(0===s)break e;s--,I|=c[a++]<<b,b+=8}if(u-=r,e.total_out+=u,i.total+=u,u&&(e.adler=i.check=i.flags?A(i.check,l,u,o-u):G(i.check,l,u,o-u)),u=r,(i.flags?I:n(I))!==i.check){e.msg="incorrect data check",i.mode=Ie;break}I=0,b=0}i.mode=ge;
case ge:if(i.wrap&&i.flags){for(;32>b;){if(0===s)break e;s--,I+=c[a++]<<b,b+=8}if(I!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=Ie;break}I=0,b=0}i.mode=de;case de:Be=R;break e;case Ie:Be=k;break e;case be:return f;case Ce:default:return H}return e.next_out=o,e.avail_out=r,e.next_in=a,e.avail_in=s,i.hold=I,i.bits=b,(i.wsize||u!==e.avail_out&&i.mode<Ie&&(i.mode<re||t!==W))&&d(e,e.output,e.next_out,u-e.avail_out)?(i.mode=be,f):(C-=e.avail_in,u-=e.avail_out,e.total_in+=C,e.total_out+=u,i.total+=u,i.wrap&&u&&(e.adler=i.check=i.flags?A(i.check,l,u,e.next_out-u):G(i.check,l,u,e.next_out-u)),e.data_type=i.bits+(i.last?64:0)+(i.mode===O?128:0)+(i.mode===ie||i.mode===P?256:0),(0===C&&0===u||t===W)&&Be===Q&&(Be=V),Be)}function b(e){if(!e||!e.state)return H;var t=e.state;return t.window&&(t.window=null),e.state=null,Q}function C(e,t){var i;return e&&e.state?(i=e.state,0===(2&i.wrap)?H:(i.head=t,t.done=!1,Q)):H}function u(e,t){var i,n,c,l=t.length;return e&&e.state?(i=e.state,0!==i.wrap&&i.mode!==T?H:i.mode===T&&(n=1,n=G(n,t,l,0),n!==i.check)?k:(c=d(e,t,l,l))?(i.mode=be,f):(i.havedict=1,Q)):H}var m,p,h=e("../utils/common"),G=e("./adler32"),A=e("./crc32"),y=e("./inffast"),Z=e("./inftrees"),B=0,x=1,v=2,W=4,X=5,F=6,Q=0,R=1,L=2,H=-2,k=-3,f=-4,V=-5,J=8,w=1,U=2,Y=3,N=4,S=5,z=6,M=7,_=8,E=9,j=10,T=11,O=12,D=13,K=14,P=15,q=16,$=17,ee=18,te=19,ie=20,ne=21,ce=22,le=23,ae=24,oe=25,se=26,re=27,ge=28,de=29,Ie=30,be=31,Ce=32,ue=852,me=592,pe=15,he=pe,Ge=!0;i.inflateReset=a,i.inflateReset2=o,i.inflateResetKeep=l,i.inflateInit=r,i.inflateInit2=s,i.inflate=I,i.inflateEnd=b,i.inflateGetHeader=C,i.inflateSetDictionary=u,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":22,"./adler32":24,"./crc32":26,"./inffast":29,"./inftrees":31}],31:[function(e,t,i){"use strict";var n=e("../utils/common"),c=15,l=852,a=592,o=0,s=1,r=2,g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],I=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,i,C,u,m,p,h){var G,A,y,Z,B,x,v,W,X,F=h.bits,Q=0,R=0,L=0,H=0,k=0,f=0,V=0,J=0,w=0,U=0,Y=null,N=0,S=new n.Buf16(c+1),z=new n.Buf16(c+1),M=null,_=0;for(Q=0;c>=Q;Q++)S[Q]=0;for(R=0;C>R;R++)S[t[i+R]]++;for(k=F,H=c;H>=1&&0===S[H];H--);if(k>H&&(k=H),0===H)return u[m++]=20971520,u[m++]=20971520,h.bits=1,0;for(L=1;H>L&&0===S[L];L++);for(L>k&&(k=L),J=1,Q=1;c>=Q;Q++)if(J<<=1,J-=S[Q],0>J)return-1;if(J>0&&(e===o||1!==H))return-1;for(z[1]=0,Q=1;c>Q;Q++)z[Q+1]=z[Q]+S[Q];for(R=0;C>R;R++)0!==t[i+R]&&(p[z[t[i+R]]++]=R);if(e===o?(Y=M=p,x=19):e===s?(Y=g,N-=257,M=d,_-=257,x=256):(Y=I,M=b,x=-1),U=0,R=0,Q=L,B=m,f=k,V=0,y=-1,w=1<<k,Z=w-1,e===s&&w>l||e===r&&w>a)return 1;for(var E=0;;){E++,v=Q-V,p[R]<x?(W=0,X=p[R]):p[R]>x?(W=M[_+p[R]],X=Y[N+p[R]]):(W=96,X=0),G=1<<Q-V,A=1<<f,L=A;do A-=G,u[B+(U>>V)+A]=v<<24|W<<16|X|0;while(0!==A);for(G=1<<Q-1;U&G;)G>>=1;if(0!==G?(U&=G-1,U+=G):U=0,R++,0===--S[Q]){if(Q===H)break;Q=t[i+p[R]]}if(Q>k&&(U&Z)!==y){for(0===V&&(V=k),B+=L,f=Q-V,J=1<<f;H>f+V&&(J-=S[f+V],!(0>=J));)f++,J<<=1;if(w+=1<<f,e===s&&w>l||e===r&&w>a)return 1;y=U&Z,u[y]=k<<24|f<<16|B-m|0}}return 0!==U&&(u[B+U]=Q-V<<24|64<<16|0),h.bits=k,0}},{"../utils/common":22}],29:[function(e,t,i){"use strict";var n=30,c=12;t.exports=function(e,t){var i,l,a,o,s,r,g,d,I,b,C,u,m,p,h,G,A,y,Z,B,x,v,W,X,F;i=e.state,l=e.next_in,X=e.input,a=l+(e.avail_in-5),o=e.next_out,F=e.output,s=o-(t-e.avail_out),r=o+(e.avail_out-257),g=i.dmax,d=i.wsize,I=i.whave,b=i.wnext,C=i.window,u=i.hold,m=i.bits,p=i.lencode,h=i.distcode,G=(1<<i.lenbits)-1,A=(1<<i.distbits)-1;e:do{15>m&&(u+=X[l++]<<m,m+=8,u+=X[l++]<<m,m+=8),y=p[u&G];t:for(;;){if(Z=y>>>24,u>>>=Z,m-=Z,Z=y>>>16&255,0===Z)F[o++]=65535&y;else{if(!(16&Z)){if(0===(64&Z)){y=p[(65535&y)+(u&(1<<Z)-1)];continue t}if(32&Z){i.mode=c;break e}e.msg="invalid literal/length code",i.mode=n;break e}B=65535&y,Z&=15,Z&&(Z>m&&(u+=X[l++]<<m,m+=8),B+=u&(1<<Z)-1,u>>>=Z,m-=Z),15>m&&(u+=X[l++]<<m,m+=8,u+=X[l++]<<m,m+=8),y=h[u&A];i:for(;;){if(Z=y>>>24,u>>>=Z,m-=Z,Z=y>>>16&255,!(16&Z)){if(0===(64&Z)){y=h[(65535&y)+(u&(1<<Z)-1)];continue i}e.msg="invalid distance code",i.mode=n;break e}if(x=65535&y,Z&=15,Z>m&&(u+=X[l++]<<m,m+=8,Z>m&&(u+=X[l++]<<m,m+=8)),x+=u&(1<<Z)-1,x>g){e.msg="invalid distance too far back",i.mode=n;break e}if(u>>>=Z,m-=Z,Z=o-s,x>Z){if(Z=x-Z,Z>I&&i.sane){e.msg="invalid distance too far back",i.mode=n;break e}if(v=0,W=C,0===b){if(v+=d-Z,B>Z){B-=Z;do F[o++]=C[v++];while(--Z);v=o-x,W=F}}else if(Z>b){if(v+=d+b-Z,Z-=b,B>Z){B-=Z;do F[o++]=C[v++];while(--Z);if(v=0,B>b){Z=b,B-=Z;do F[o++]=C[v++];while(--Z);v=o-x,W=F}}}else if(v+=b-Z,B>Z){B-=Z;do F[o++]=C[v++];while(--Z);v=o-x,W=F}for(;B>2;)F[o++]=W[v++],F[o++]=W[v++],F[o++]=W[v++],B-=3;B&&(F[o++]=W[v++],B>1&&(F[o++]=W[v++]))}else{v=o-x;do F[o++]=F[v++],F[o++]=F[v++],F[o++]=F[v++],B-=3;while(B>2);B&&(F[o++]=F[v++],B>1&&(F[o++]=F[v++]))}break}}break}}while(a>l&&r>o);B=m>>3,l-=B,m-=B<<3,u&=(1<<m)-1,e.next_in=l,e.next_out=o,e.avail_in=a>l?5+(a-l):5-(l-a),e.avail_out=r>o?257+(r-o):257-(o-r),i.hold=u,i.bits=m}},{}],28:[function(e,t,i){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=n},{}],25:[function(e,t,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],20:[function(e,t,i){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.options=s.assign({level:h,method:A,chunkSize:16384,windowBits:15,memLevel:8,strategy:G,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var i=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==u)throw new Error(g[i]);if(t.header&&o.deflateSetHeader(this.strm,t.header),t.dictionary){var c;if(c="string"==typeof t.dictionary?r.string2buf(t.dictionary):"[object ArrayBuffer]"===I.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,i=o.deflateSetDictionary(this.strm,c),i!==u)throw new Error(g[i]);this._dict_set=!0}}function c(e,t){var i=new n(t);if(i.push(e,!0),i.err)throw i.msg;return i.result}function l(e,t){return t=t||{},t.raw=!0,c(e,t)}function a(e,t){return t=t||{},t.gzip=!0,c(e,t)}var o=e("./zlib/deflate"),s=e("./utils/common"),r=e("./utils/strings"),g=e("./zlib/messages"),d=e("./zlib/zstream"),I=Object.prototype.toString,b=0,C=4,u=0,m=1,p=2,h=-1,G=0,A=8;n.prototype.push=function(e,t){var i,n,c=this.strm,l=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:t===!0?C:b,"string"==typeof e?c.input=r.string2buf(e):"[object ArrayBuffer]"===I.call(e)?c.input=new Uint8Array(e):c.input=e,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=new s.Buf8(l),c.next_out=0,c.avail_out=l),i=o.deflate(c,n),i!==m&&i!==u)return this.onEnd(i),this.ended=!0,!1;0!==c.avail_out&&(0!==c.avail_in||n!==C&&n!==p)||("string"===this.options.to?this.onData(r.buf2binstring(s.shrinkBuf(c.output,c.next_out))):this.onData(s.shrinkBuf(c.output,c.next_out)))}while((c.avail_in>0||0===c.avail_out)&&i!==m);return n===C?(i=o.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===u):n===p?(this.onEnd(u),c.avail_out=0,!0):!0},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=n,i.deflate=c,i.deflateRaw=l,i.gzip=a},{"./utils/common":22,"./utils/strings":23,"./zlib/deflate":27,"./zlib/messages":32,"./zlib/zstream":34}],34:[function(e,t,i){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=n},{}],27:[function(e,t,i){"use strict";function n(e,t){return e.msg=f[t],t}function c(e){return(e<<1)-(e>4?9:0)}function l(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(R.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function o(e,t){L._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function s(e,t){e.pending_buf[e.pending++]=t}function r(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function g(e,t,i,n){var c=e.avail_in;return c>n&&(c=n),0===c?0:(e.avail_in-=c,R.arraySet(t,e.input,e.next_in,c,i),1===e.state.wrap?e.adler=H(e.adler,t,c,i):2===e.state.wrap&&(e.adler=k(e.adler,t,c,i)),e.next_in+=c,e.total_in+=c,c)}function d(e,t){var i,n,c=e.max_chain_length,l=e.strstart,a=e.prev_length,o=e.nice_match,s=e.strstart>e.w_size-de?e.strstart-(e.w_size-de):0,r=e.window,g=e.w_mask,d=e.prev,I=e.strstart+ge,b=r[l+a-1],C=r[l+a];e.prev_length>=e.good_match&&(c>>=2),o>e.lookahead&&(o=e.lookahead);do if(i=t,r[i+a]===C&&r[i+a-1]===b&&r[i]===r[l]&&r[++i]===r[l+1]){l+=2,i++;do;while(r[++l]===r[++i]&&r[++l]===r[++i]&&r[++l]===r[++i]&&r[++l]===r[++i]&&r[++l]===r[++i]&&r[++l]===r[++i]&&r[++l]===r[++i]&&r[++l]===r[++i]&&I>l);if(n=ge-(I-l),l=I-ge,n>a){if(e.match_start=t,a=n,n>=o)break;b=r[l+a-1],C=r[l+a]}}while((t=d[t&g])>s&&0!==--c);return a<=e.lookahead?a:e.lookahead}function I(e){var t,i,n,c,l,a=e.w_size;do{if(c=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-de)){R.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,i=e.hash_size,t=i;do n=e.head[--t],e.head[t]=n>=a?n-a:0;while(--i);i=a,t=i;do n=e.prev[--t],e.prev[t]=n>=a?n-a:0;while(--i);c+=a}if(0===e.strm.avail_in)break;if(i=g(e.strm,e.window,e.strstart+e.lookahead,c),e.lookahead+=i,e.lookahead+e.insert>=re)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+re-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<re)););}while(e.lookahead<de&&0!==e.strm.avail_in)}function b(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(I(e),0===e.lookahead&&t===V)return Ae;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+i;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,o(e,!1),0===e.strm.avail_out))return Ae;if(e.strstart-e.block_start>=e.w_size-de&&(o(e,!1),0===e.strm.avail_out))return Ae}return e.insert=0,t===U?(o(e,!0),0===e.strm.avail_out?Ze:Be):e.strstart>e.block_start&&(o(e,!1),0===e.strm.avail_out)?Ae:Ae}function C(e,t){for(var i,n;;){if(e.lookahead<de){if(I(e),e.lookahead<de&&t===V)return Ae;if(0===e.lookahead)break}if(i=0,e.lookahead>=re&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+re-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-de&&(e.match_length=d(e,i)),e.match_length>=re)if(n=L._tr_tally(e,e.strstart-e.match_start,e.match_length-re),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=re){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+re-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=L._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(o(e,!1),0===e.strm.avail_out))return Ae}return e.insert=e.strstart<re-1?e.strstart:re-1,t===U?(o(e,!0),0===e.strm.avail_out?Ze:Be):e.last_lit&&(o(e,!1),0===e.strm.avail_out)?Ae:ye}function u(e,t){for(var i,n,c;;){if(e.lookahead<de){if(I(e),e.lookahead<de&&t===V)return Ae;if(0===e.lookahead)break}if(i=0,e.lookahead>=re&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+re-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=re-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-de&&(e.match_length=d(e,i),e.match_length<=5&&(e.strategy===j||e.match_length===re&&e.strstart-e.match_start>4096)&&(e.match_length=re-1)),e.prev_length>=re&&e.match_length<=e.prev_length){c=e.strstart+e.lookahead-re,n=L._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-re),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=c&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+re-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=re-1,e.strstart++,n&&(o(e,!1),0===e.strm.avail_out))return Ae}else if(e.match_available){if(n=L._tr_tally(e,0,e.window[e.strstart-1]),n&&o(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return Ae}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=L._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<re-1?e.strstart:re-1,t===U?(o(e,!0),0===e.strm.avail_out?Ze:Be):e.last_lit&&(o(e,!1),0===e.strm.avail_out)?Ae:ye}function m(e,t){for(var i,n,c,l,a=e.window;;){if(e.lookahead<=ge){if(I(e),e.lookahead<=ge&&t===V)return Ae;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=re&&e.strstart>0&&(c=e.strstart-1,n=a[c],n===a[++c]&&n===a[++c]&&n===a[++c])){l=e.strstart+ge;do;while(n===a[++c]&&n===a[++c]&&n===a[++c]&&n===a[++c]&&n===a[++c]&&n===a[++c]&&n===a[++c]&&n===a[++c]&&l>c);e.match_length=ge-(l-c),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=re?(i=L._tr_tally(e,1,e.match_length-re),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=L._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(o(e,!1),0===e.strm.avail_out))return Ae}return e.insert=0,t===U?(o(e,!0),0===e.strm.avail_out?Ze:Be):e.last_lit&&(o(e,!1),0===e.strm.avail_out)?Ae:ye}function p(e,t){for(var i;;){if(0===e.lookahead&&(I(e),0===e.lookahead)){if(t===V)return Ae;break}if(e.match_length=0,i=L._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(o(e,!1),0===e.strm.avail_out))return Ae}return e.insert=0,t===U?(o(e,!0),0===e.strm.avail_out?Ze:Be):e.last_lit&&(o(e,!1),0===e.strm.avail_out)?Ae:ye}function h(e,t,i,n,c){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=c}function G(e){e.window_size=2*e.w_size,l(e.head),e.max_lazy_match=Q[e.level].max_lazy,e.good_match=Q[e.level].good_length,e.nice_match=Q[e.level].nice_length,e.max_chain_length=Q[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=re-1,e.match_available=0,e.ins_h=0}function A(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new R.Buf16(2*oe),this.dyn_dtree=new R.Buf16(2*(2*le+1)),this.bl_tree=new R.Buf16(2*(2*ae+1)),l(this.dyn_ltree),l(this.dyn_dtree),l(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new R.Buf16(se+1),this.heap=new R.Buf16(2*ce+1),l(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new R.Buf16(2*ce+1),l(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function y(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=P,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?be:he,e.adler=2===t.wrap?0:1,t.last_flush=V,L._tr_init(t),N):n(e,z)}function Z(e){var t=y(e);return t===N&&G(e.state),t}function B(e,t){return e&&e.state?2!==e.state.wrap?z:(e.state.gzhead=t,N):z}function x(e,t,i,c,l,a){if(!e)return z;var o=1;if(t===E&&(t=6),0>c?(o=0,c=-c):c>15&&(o=2,c-=16),1>l||l>$||i!==q||8>c||c>15||0>t||t>9||0>a||a>D)return n(e,z);8===c&&(c=9);var s=new A;return e.state=s,s.strm=e,s.wrap=o,s.gzhead=null,s.w_bits=c,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=l+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+re-1)/re),s.window=new R.Buf8(2*s.w_size),s.head=new R.Buf16(s.hash_size),s.prev=new R.Buf16(s.w_size),s.lit_bufsize=1<<l+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new R.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=a,s.method=i,Z(e)}function v(e,t){return x(e,t,q,ee,te,K)}function W(e,t){var i,o,g,d;if(!e||!e.state||t>Y||0>t)return e?n(e,z):z;if(o=e.state,!e.output||!e.input&&0!==e.avail_in||o.status===Ge&&t!==U)return n(e,0===e.avail_out?_:z);if(o.strm=e,i=o.last_flush,o.last_flush=t,o.status===be)if(2===o.wrap)e.adler=0,s(o,31),s(o,139),s(o,8),o.gzhead?(s(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),s(o,255&o.gzhead.time),s(o,o.gzhead.time>>8&255),s(o,o.gzhead.time>>16&255),s(o,o.gzhead.time>>24&255),s(o,9===o.level?2:o.strategy>=T||o.level<2?4:0),s(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(s(o,255&o.gzhead.extra.length),s(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=k(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=Ce):(s(o,0),s(o,0),s(o,0),s(o,0),s(o,0),s(o,9===o.level?2:o.strategy>=T||o.level<2?4:0),s(o,xe),o.status=he);else{var I=q+(o.w_bits-8<<4)<<8,b=-1;b=o.strategy>=T||o.level<2?0:o.level<6?1:6===o.level?2:3,I|=b<<6,0!==o.strstart&&(I|=Ie),I+=31-I%31,o.status=he,r(o,I),0!==o.strstart&&(r(o,e.adler>>>16),r(o,65535&e.adler)),e.adler=1}if(o.status===Ce)if(o.gzhead.extra){for(g=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>g&&(e.adler=k(e.adler,o.pending_buf,o.pending-g,g)),a(e),g=o.pending,o.pending!==o.pending_buf_size));)s(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>g&&(e.adler=k(e.adler,o.pending_buf,o.pending-g,g)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=ue)}else o.status=ue;if(o.status===ue)if(o.gzhead.name){g=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>g&&(e.adler=k(e.adler,o.pending_buf,o.pending-g,g)),a(e),g=o.pending,o.pending===o.pending_buf_size)){d=1;break}d=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,s(o,d)}while(0!==d);o.gzhead.hcrc&&o.pending>g&&(e.adler=k(e.adler,o.pending_buf,o.pending-g,g)),0===d&&(o.gzindex=0,o.status=me)}else o.status=me;if(o.status===me)if(o.gzhead.comment){g=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>g&&(e.adler=k(e.adler,o.pending_buf,o.pending-g,g)),a(e),g=o.pending,o.pending===o.pending_buf_size)){d=1;break}d=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,s(o,d)}while(0!==d);o.gzhead.hcrc&&o.pending>g&&(e.adler=k(e.adler,o.pending_buf,o.pending-g,g)),0===d&&(o.status=pe)}else o.status=pe;if(o.status===pe&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&a(e),o.pending+2<=o.pending_buf_size&&(s(o,255&e.adler),s(o,e.adler>>8&255),e.adler=0,o.status=he)):o.status=he),0!==o.pending){if(a(e),0===e.avail_out)return o.last_flush=-1,N}else if(0===e.avail_in&&c(t)<=c(i)&&t!==U)return n(e,_);if(o.status===Ge&&0!==e.avail_in)return n(e,_);if(0!==e.avail_in||0!==o.lookahead||t!==V&&o.status!==Ge){var C=o.strategy===T?p(o,t):o.strategy===O?m(o,t):Q[o.level].func(o,t);if(C!==Ze&&C!==Be||(o.status=Ge),C===Ae||C===Ze)return 0===e.avail_out&&(o.last_flush=-1),N;if(C===ye&&(t===J?L._tr_align(o):t!==Y&&(L._tr_stored_block(o,0,0,!1),t===w&&(l(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),a(e),0===e.avail_out))return o.last_flush=-1,N}return t!==U?N:o.wrap<=0?S:(2===o.wrap?(s(o,255&e.adler),s(o,e.adler>>8&255),s(o,e.adler>>16&255),s(o,e.adler>>24&255),s(o,255&e.total_in),s(o,e.total_in>>8&255),s(o,e.total_in>>16&255),s(o,e.total_in>>24&255)):(r(o,e.adler>>>16),r(o,65535&e.adler)),a(e),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?N:S)}function X(e){var t;return e&&e.state?(t=e.state.status,t!==be&&t!==Ce&&t!==ue&&t!==me&&t!==pe&&t!==he&&t!==Ge?n(e,z):(e.state=null,t===he?n(e,M):N)):z}function F(e,t){var i,n,c,a,o,s,r,g,d=t.length;if(!e||!e.state)return z;if(i=e.state,a=i.wrap,2===a||1===a&&i.status!==be||i.lookahead)return z;for(1===a&&(e.adler=H(e.adler,t,d,0)),i.wrap=0,d>=i.w_size&&(0===a&&(l(i.head),i.strstart=0,i.block_start=0,i.insert=0),g=new R.Buf8(i.w_size),R.arraySet(g,t,d-i.w_size,i.w_size,0),t=g,d=i.w_size),o=e.avail_in,s=e.next_in,r=e.input,e.avail_in=d,e.next_in=0,e.input=t,I(i);i.lookahead>=re;){n=i.strstart,c=i.lookahead-(re-1);do i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+re-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++;while(--c);i.strstart=n,i.lookahead=re-1,I(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=re-1,i.match_available=0,e.next_in=s,e.input=r,e.avail_in=o,i.wrap=a,N}var Q,R=e("../utils/common"),L=e("./trees"),H=e("./adler32"),k=e("./crc32"),f=e("./messages"),V=0,J=1,w=3,U=4,Y=5,N=0,S=1,z=-2,M=-3,_=-5,E=-1,j=1,T=2,O=3,D=4,K=0,P=2,q=8,$=9,ee=15,te=8,ie=29,ne=256,ce=ne+1+ie,le=30,ae=19,oe=2*ce+1,se=15,re=3,ge=258,de=ge+re+1,Ie=32,be=42,Ce=69,ue=73,me=91,pe=103,he=113,Ge=666,Ae=1,ye=2,Ze=3,Be=4,xe=3;Q=[new h(0,0,0,0,b),new h(4,4,8,4,C),new h(4,5,16,8,C),new h(4,6,32,32,C),new h(4,4,16,16,u),new h(8,16,32,32,u),new h(8,16,128,128,u),new h(8,32,128,256,u),new h(32,128,258,1024,u),new h(32,258,258,4096,u)],i.deflateInit=v,i.deflateInit2=x,i.deflateReset=Z,i.deflateResetKeep=y,i.deflateSetHeader=B,i.deflate=W,i.deflateEnd=X,i.deflateSetDictionary=F,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":22,"./adler32":24,"./crc32":26,"./messages":32,"./trees":33}],33:[function(e,t,i){"use strict";function n(e){for(var t=e.length;--t>=0;)e[t]=0}function c(e,t,i,n,c){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=c,this.has_stree=e&&e.length}function l(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e){return 256>e?se[e]:se[256+(e>>>7)]}function o(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function s(e,t,i){e.bi_valid>D-i?(e.bi_buf|=t<<e.bi_valid&65535,o(e,e.bi_buf),e.bi_buf=t>>D-e.bi_valid,e.bi_valid+=i-D):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function r(e,t,i){s(e,i[2*t],i[2*t+1])}function g(e,t){var i=0;do i|=1&e,e>>>=1,i<<=1;while(--t>0);return i>>>1}function d(e){16===e.bi_valid?(o(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function I(e,t){var i,n,c,l,a,o,s=t.dyn_tree,r=t.max_code,g=t.stat_desc.static_tree,d=t.stat_desc.has_stree,I=t.stat_desc.extra_bits,b=t.stat_desc.extra_base,C=t.stat_desc.max_length,u=0;for(l=0;O>=l;l++)e.bl_count[l]=0;for(s[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;T>i;i++)n=e.heap[i],l=s[2*s[2*n+1]+1]+1,l>C&&(l=C,u++),s[2*n+1]=l,n>r||(e.bl_count[l]++,a=0,n>=b&&(a=I[n-b]),o=s[2*n],e.opt_len+=o*(l+a),d&&(e.static_len+=o*(g[2*n+1]+a)));if(0!==u){do{for(l=C-1;0===e.bl_count[l];)l--;e.bl_count[l]--,e.bl_count[l+1]+=2,e.bl_count[C]--,u-=2}while(u>0);for(l=C;0!==l;l--)for(n=e.bl_count[l];0!==n;)c=e.heap[--i],c>r||(s[2*c+1]!==l&&(e.opt_len+=(l-s[2*c+1])*s[2*c],s[2*c+1]=l),n--)}}function b(e,t,i){var n,c,l=new Array(O+1),a=0;for(n=1;O>=n;n++)l[n]=a=a+i[n-1]<<1;for(c=0;t>=c;c++){var o=e[2*c+1];0!==o&&(e[2*c]=g(l[o]++,o))}}function C(){var e,t,i,n,l,a=new Array(O+1);for(i=0,n=0;z-1>n;n++)for(ge[n]=i,e=0;e<1<<te[n];e++)re[i++]=n;for(re[i-1]=n,l=0,n=0;16>n;n++)for(de[n]=l,e=0;e<1<<ie[n];e++)se[l++]=n;for(l>>=7;E>n;n++)for(de[n]=l<<7,e=0;e<1<<ie[n]-7;e++)se[256+l++]=n;for(t=0;O>=t;t++)a[t]=0;for(e=0;143>=e;)ae[2*e+1]=8,e++,a[8]++;for(;255>=e;)ae[2*e+1]=9,e++,a[9]++;for(;279>=e;)ae[2*e+1]=7,e++,a[7]++;for(;287>=e;)ae[2*e+1]=8,e++,a[8]++;for(b(ae,_+1,a),e=0;E>e;e++)oe[2*e+1]=5,oe[2*e]=g(e,5);Ie=new c(ae,te,M+1,_,O),be=new c(oe,ie,0,E,O),Ce=new c(new Array(0),ne,0,j,K)}function u(e){var t;for(t=0;_>t;t++)e.dyn_ltree[2*t]=0;for(t=0;E>t;t++)e.dyn_dtree[2*t]=0;for(t=0;j>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*P]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function m(e){e.bi_valid>8?o(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function p(e,t,i,n){m(e),n&&(o(e,i),o(e,~i)),H.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}function h(e,t,i,n){var c=2*t,l=2*i;return e[c]<e[l]||e[c]===e[l]&&n[t]<=n[i]}function G(e,t,i){for(var n=e.heap[i],c=i<<1;c<=e.heap_len&&(c<e.heap_len&&h(t,e.heap[c+1],e.heap[c],e.depth)&&c++,!h(t,n,e.heap[c],e.depth));)e.heap[i]=e.heap[c],i=c,c<<=1;e.heap[i]=n}function A(e,t,i){var n,c,l,o,g=0;if(0!==e.last_lit)do n=e.pending_buf[e.d_buf+2*g]<<8|e.pending_buf[e.d_buf+2*g+1],c=e.pending_buf[e.l_buf+g],g++,0===n?r(e,c,t):(l=re[c],r(e,l+M+1,t),o=te[l],0!==o&&(c-=ge[l],s(e,c,o)),n--,l=a(n),r(e,l,i),o=ie[l],0!==o&&(n-=de[l],s(e,n,o)));while(g<e.last_lit);r(e,P,t)}function y(e,t){var i,n,c,l=t.dyn_tree,a=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.elems,r=-1;for(e.heap_len=0,e.heap_max=T,i=0;s>i;i++)0!==l[2*i]?(e.heap[++e.heap_len]=r=i,e.depth[i]=0):l[2*i+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=2>r?++r:0,l[2*c]=1,e.depth[c]=0,e.opt_len--,o&&(e.static_len-=a[2*c+1]);for(t.max_code=r,i=e.heap_len>>1;i>=1;i--)G(e,l,i);c=s;do i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],G(e,l,1),n=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=n,l[2*c]=l[2*i]+l[2*n],e.depth[c]=(e.depth[i]>=e.depth[n]?e.depth[i]:e.depth[n])+1,l[2*i+1]=l[2*n+1]=c,e.heap[1]=c++,G(e,l,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],I(e,t),b(l,r,e.bl_count)}function Z(e,t,i){var n,c,l=-1,a=t[1],o=0,s=7,r=4;for(0===a&&(s=138,r=3),t[2*(i+1)+1]=65535,n=0;i>=n;n++)c=a,a=t[2*(n+1)+1],++o<s&&c===a||(r>o?e.bl_tree[2*c]+=o:0!==c?(c!==l&&e.bl_tree[2*c]++,e.bl_tree[2*q]++):10>=o?e.bl_tree[2*$]++:e.bl_tree[2*ee]++,o=0,l=c,0===a?(s=138,r=3):c===a?(s=6,r=3):(s=7,r=4))}function B(e,t,i){var n,c,l=-1,a=t[1],o=0,g=7,d=4;for(0===a&&(g=138,d=3),n=0;i>=n;n++)if(c=a,a=t[2*(n+1)+1],!(++o<g&&c===a)){if(d>o){do r(e,c,e.bl_tree);while(0!==--o)}else 0!==c?(c!==l&&(r(e,c,e.bl_tree),o--),r(e,q,e.bl_tree),s(e,o-3,2)):10>=o?(r(e,$,e.bl_tree),s(e,o-3,3)):(r(e,ee,e.bl_tree),s(e,o-11,7));o=0,l=c,0===a?(g=138,d=3):c===a?(g=6,d=3):(g=7,d=4)}}function x(e){var t;for(Z(e,e.dyn_ltree,e.l_desc.max_code),Z(e,e.dyn_dtree,e.d_desc.max_code),y(e,e.bl_desc),t=j-1;t>=3&&0===e.bl_tree[2*ce[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function v(e,t,i,n){var c;for(s(e,t-257,5),s(e,i-1,5),s(e,n-4,4),c=0;n>c;c++)s(e,e.bl_tree[2*ce[c]+1],3);B(e,e.dyn_ltree,t-1),B(e,e.dyn_dtree,i-1)}function W(e){var t,i=4093624447;for(t=0;31>=t;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return f;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return V;for(t=32;M>t;t++)if(0!==e.dyn_ltree[2*t])return V;return f}function X(e){ue||(C(),ue=!0),e.l_desc=new l(e.dyn_ltree,Ie),e.d_desc=new l(e.dyn_dtree,be),e.bl_desc=new l(e.bl_tree,Ce),e.bi_buf=0,e.bi_valid=0,u(e)}function F(e,t,i,n){s(e,(w<<1)+(n?1:0),3),p(e,t,i,!0)}function Q(e){s(e,U<<1,3),r(e,P,ae),d(e)}function R(e,t,i,n){var c,l,a=0;e.level>0?(e.strm.data_type===J&&(e.strm.data_type=W(e)),y(e,e.l_desc),y(e,e.d_desc),a=x(e),c=e.opt_len+3+7>>>3,l=e.static_len+3+7>>>3,c>=l&&(c=l)):c=l=i+5,c>=i+4&&-1!==t?F(e,t,i,n):e.strategy===k||l===c?(s(e,(U<<1)+(n?1:0),3),A(e,ae,oe)):(s(e,(Y<<1)+(n?1:0),3),v(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),A(e,e.dyn_ltree,e.dyn_dtree)),u(e),n&&m(e)}function L(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(re[i]+M+1)]++,e.dyn_dtree[2*a(t)]++),e.last_lit===e.lit_bufsize-1}var H=e("../utils/common"),k=4,f=0,V=1,J=2,w=0,U=1,Y=2,N=3,S=258,z=29,M=256,_=M+1+z,E=30,j=19,T=2*_+1,O=15,D=16,K=7,P=256,q=16,$=17,ee=18,te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ie=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],le=512,ae=new Array(2*(_+2));n(ae);var oe=new Array(2*E);n(oe);var se=new Array(le);n(se);var re=new Array(S-N+1);n(re);var ge=new Array(z);n(ge);var de=new Array(E);n(de);var Ie,be,Ce,ue=!1;i._tr_init=X,i._tr_stored_block=F,i._tr_flush_block=R,i._tr_tally=L,i._tr_align=Q},{"../utils/common":22}],32:[function(e,t,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],26:[function(e,t,i){"use strict";function n(){for(var e,t=[],i=0;256>i;i++){e=i;for(var n=0;8>n;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}function c(e,t,i,n){var c=l,a=n+i;e^=-1;for(var o=n;a>o;o++)e=e>>>8^c[255&(e^t[o])];return-1^e}var l=n();t.exports=c},{}],24:[function(e,t,i){"use strict";function n(e,t,i,n){for(var c=65535&e|0,l=e>>>16&65535|0,a=0;0!==i;){a=i>2e3?2e3:i,i-=a;do c=c+t[n++]|0,l=l+c|0;while(--a);c%=65521,l%=65521}return c|l<<16|0}t.exports=n},{}],23:[function(e,t,i){"use strict";function n(e,t){if(65537>t&&(e.subarray&&a||!e.subarray&&l))return String.fromCharCode.apply(null,c.shrinkBuf(e,t));for(var i="",n=0;t>n;n++)i+=String.fromCharCode(e[n]);return i}var c=e("./common"),l=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(o){l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(o){a=!1}for(var s=new c.Buf8(256),r=0;256>r;r++)s[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;s[254]=s[254]=1,i.string2buf=function(e){var t,i,n,l,a,o=e.length,s=0;for(l=0;o>l;l++)i=e.charCodeAt(l),55296===(64512&i)&&o>l+1&&(n=e.charCodeAt(l+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),l++)),s+=128>i?1:2048>i?2:65536>i?3:4;for(t=new c.Buf8(s),a=0,l=0;s>a;l++)i=e.charCodeAt(l),55296===(64512&i)&&o>l+1&&(n=e.charCodeAt(l+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),l++)),128>i?t[a++]=i:2048>i?(t[a++]=192|i>>>6,t[a++]=128|63&i):65536>i?(t[a++]=224|i>>>12,t[a++]=128|i>>>6&63,t[a++]=128|63&i):(t[a++]=240|i>>>18,t[a++]=128|i>>>12&63,t[a++]=128|i>>>6&63,t[a++]=128|63&i);return t},i.buf2binstring=function(e){return n(e,e.length)},i.binstring2buf=function(e){for(var t=new c.Buf8(e.length),i=0,n=t.length;n>i;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){var i,c,l,a,o=t||e.length,r=new Array(2*o);for(c=0,i=0;o>i;)if(l=e[i++],128>l)r[c++]=l;else if(a=s[l],a>4)r[c++]=65533,i+=a-1;else{for(l&=2===a?31:3===a?15:7;a>1&&o>i;)l=l<<6|63&e[i++],a--;a>1?r[c++]=65533:65536>l?r[c++]=l:(l-=65536,r[c++]=55296|l>>10&1023,r[c++]=56320|1023&l)}return n(r,c)},
i.utf8border=function(e,t){var i;for(t=t||e.length,t>e.length&&(t=e.length),i=t-1;i>=0&&128===(192&e[i]);)i--;return 0>i?t:0===i?t:i+s[e[i]]>t?i:t}},{"./common":22}],22:[function(e,t,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var c={arraySet:function(e,t,i,n,c){if(t.subarray&&e.subarray)return void e.set(t.subarray(i,i+n),c);for(var l=0;n>l;l++)e[c+l]=t[i+l]},flattenChunks:function(e){var t,i,n,c,l,a;for(n=0,t=0,i=e.length;i>t;t++)n+=e[t].length;for(a=new Uint8Array(n),c=0,t=0,i=e.length;i>t;t++)l=e[t],a.set(l,c),c+=l.length;return a}},l={arraySet:function(e,t,i,n,c){for(var l=0;n>l;l++)e[c+l]=t[i+l]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,c)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,l))},i.setTyped(n)},{}],18:[function(e,t,i){"use strict";function n(e,t){return"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='"+e+"' height='"+t+"'%3E%3C/svg%3E"}function c(e){if(e.srcset&&!h&&window.picturefill){var t=window.picturefill._;e[t.ns]&&e[t.ns].evaled||t.fillImg(e,{reselect:!0}),e[t.ns].curSrc||(e[t.ns].supported=!1,t.fillImg(e,{reselect:!0})),e.currentSrc=e[t.ns].curSrc||e.src}}function l(e){for(var t,i=getComputedStyle(e).fontFamily,n={};null!==(t=b.exec(i));)n[t[1]]=t[2];return n}function a(e,t,i){var c=n(t||1,i||0);G.call(e,"src")!==c&&A.call(e,"src",c)}function o(e,t){e.naturalWidth?t(e):setTimeout(o,100,e,t)}function s(e){var t=l(e),i=e[I];if(t["object-fit"]=t["object-fit"]||"fill",!i.img){if("fill"===t["object-fit"])return;if(!i.skipTest&&u&&!t["object-position"])return}if(!i.img){i.img=new Image(e.width,e.height),i.img.srcset=G.call(e,"data-ofi-srcset")||e.srcset,i.img.src=G.call(e,"data-ofi-src")||e.src,A.call(e,"data-ofi-src",e.src),e.srcset&&A.call(e,"data-ofi-srcset",e.srcset),a(e,e.naturalWidth||e.width,e.naturalHeight||e.height),e.srcset&&(e.srcset="");try{r(e)}catch(n){window.console}}c(i.img),e.style.backgroundImage='url("'+(i.img.currentSrc||i.img.src).replace(/"/g,'\\"')+'")',e.style.backgroundPosition=t["object-position"]||"center",e.style.backgroundRepeat="no-repeat",e.style.backgroundOrigin="content-box",/scale-down/.test(t["object-fit"])?o(i.img,function(){i.img.naturalWidth>e.width||i.img.naturalHeight>e.height?e.style.backgroundSize="contain":e.style.backgroundSize="auto"}):e.style.backgroundSize=t["object-fit"].replace("none","auto").replace("fill","100% 100%"),o(i.img,function(t){a(e,t.naturalWidth,t.naturalHeight)})}function r(e){var t={get:function(t){return e[I].img[t?t:"src"]},set:function(t,i){return e[I].img[i?i:"src"]=t,A.call(e,"data-ofi-"+i,t),s(e),t}};Object.defineProperty(e,"src",t),Object.defineProperty(e,"currentSrc",{get:function(){return t.get("currentSrc")}}),Object.defineProperty(e,"srcset",{get:function(){return t.get("srcset")},set:function(e){return t.set(e,"srcset")}})}function g(){function e(e,t){return e[I]&&e[I].img&&("src"===t||"srcset"===t)?e[I].img:e}m||(HTMLImageElement.prototype.getAttribute=function(t){return G.call(e(this,t),t)},HTMLImageElement.prototype.setAttribute=function(t,i){return A.call(e(this,t),t,String(i))})}function d(e,t){var i=!y&&!e;if(t=t||{},e=e||"img",m&&!t.skipTest||!p)return!1;"img"===e?e=document.getElementsByTagName("img"):"string"==typeof e?e=document.querySelectorAll(e):"length"in e||(e=[e]);for(var n=0;n<e.length;n++)e[n][I]=e[n][I]||{skipTest:t.skipTest},s(e[n]);i&&(document.body.addEventListener("load",function(e){"IMG"===e.target.tagName&&d(e.target,{skipTest:t.skipTest})},!0),y=!0,e="img"),t.watchMQ&&window.addEventListener("resize",d.bind(null,e,{skipTest:t.skipTest}))}var I="bfred-it:object-fit-images",b=/(object-fit|object-position)\s*:\s*([-.\w\s%]+)/g,C="undefined"==typeof Image?{style:{"object-position":1}}:new Image,u="object-fit"in C.style,m="object-position"in C.style,p="background-size"in C.style,h="string"==typeof C.currentSrc,G=C.getAttribute,A=C.setAttribute,y=!1;d.supportsObjectFit=u,d.supportsObjectPosition=m,g(),t.exports=d},{}],16:[function(e,t,i){!function(e,n){"object"==typeof i&&"undefined"!=typeof t?t.exports=n():"function"==typeof define&&define.amd?define(n):e.moment=n()}(this,function(){"use strict";function i(){return sn.apply(null,arguments)}function n(e){sn=e}function c(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function a(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function s(e,t){for(var i in t)o(t,i)&&(e[i]=t[i]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function r(e,t,i,n){return we(e,t,i,n,!0).utc()}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function d(e){return null==e._pf&&(e._pf=g()),e._pf}function I(e){if(null==e._isValid){var t=d(e),i=rn.call(t.parsedDateParts,function(e){return null!=e});e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function b(e){var t=r(NaN);return null!=e?s(d(t),e):d(t).userInvalidated=!0,t}function C(e){return void 0===e}function u(e,t){var i,n,c;if(C(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),C(t._i)||(e._i=t._i),C(t._f)||(e._f=t._f),C(t._l)||(e._l=t._l),C(t._strict)||(e._strict=t._strict),C(t._tzm)||(e._tzm=t._tzm),C(t._isUTC)||(e._isUTC=t._isUTC),C(t._offset)||(e._offset=t._offset),C(t._pf)||(e._pf=d(t)),C(t._locale)||(e._locale=t._locale),gn.length>0)for(i in gn)n=gn[i],c=t[n],C(c)||(e[n]=c);return e}function m(e){u(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),dn===!1&&(dn=!0,i.updateOffset(this),dn=!1)}function p(e){return e instanceof m||null!=e&&null!=e._isAMomentObject}function h(e){return 0>e?Math.ceil(e):Math.floor(e)}function G(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=h(t)),i}function A(e,t,i){var n,c=Math.min(e.length,t.length),l=Math.abs(e.length-t.length),a=0;for(n=0;c>n;n++)(i&&e[n]!==t[n]||!i&&G(e[n])!==G(t[n]))&&a++;return a+l}function y(e){i.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn}function Z(e,t){var n=!0;return s(function(){return null!=i.deprecationHandler&&i.deprecationHandler(null,e),n&&(y(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function B(e,t){null!=i.deprecationHandler&&i.deprecationHandler(e,t),In[e]||(y(t),In[e]=!0)}function x(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function v(e){return"[object Object]"===Object.prototype.toString.call(e)}function W(e){var t,i;for(i in e)t=e[i],x(t)?this[i]=t:this["_"+i]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function X(e,t){var i,n=s({},e);for(i in t)o(t,i)&&(v(e[i])&&v(t[i])?(n[i]={},s(n[i],e[i]),s(n[i],t[i])):null!=t[i]?n[i]=t[i]:delete n[i]);return n}function F(e){null!=e&&this.set(e)}function Q(e){return e?e.toLowerCase().replace("_","-"):e}function R(e){for(var t,i,n,c,l=0;l<e.length;){for(c=Q(e[l]).split("-"),t=c.length,i=Q(e[l+1]),i=i?i.split("-"):null;t>0;){if(n=L(c.slice(0,t).join("-")))return n;if(i&&i.length>=t&&A(c,i,!0)>=t-1)break;t--}l++}return null}function L(i){var n=null;if(!mn[i]&&"undefined"!=typeof t&&t&&t.exports)try{n=Cn._abbr,e("./locale/"+i),H(n)}catch(c){}return mn[i]}function H(e,t){var i;return e&&(i=C(t)?V(e):k(e,t),i&&(Cn=i)),Cn._abbr}function k(e,t){return null!==t?(t.abbr=e,null!=mn[e]?(B("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),t=X(mn[e]._config,t)):null!=t.parentLocale&&(null!=mn[t.parentLocale]?t=X(mn[t.parentLocale]._config,t):B("parentLocaleUndefined","specified parentLocale is not defined yet")),mn[e]=new F(t),H(e),mn[e]):(delete mn[e],null)}function f(e,t){if(null!=t){var i;null!=mn[e]&&(t=X(mn[e]._config,t)),i=new F(t),i.parentLocale=mn[e],mn[e]=i,H(e)}else null!=mn[e]&&(null!=mn[e].parentLocale?mn[e]=mn[e].parentLocale:null!=mn[e]&&delete mn[e]);return mn[e]}function V(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Cn;if(!c(e)){if(t=L(e))return t;e=[e]}return R(e)}function J(){return bn(mn)}function w(e,t){var i=e.toLowerCase();pn[i]=pn[i+"s"]=pn[t]=e}function U(e){return"string"==typeof e?pn[e]||pn[e.toLowerCase()]:void 0}function Y(e){var t,i,n={};for(i in e)o(e,i)&&(t=U(i),t&&(n[t]=e[i]));return n}function N(e,t){return function(n){return null!=n?(z(this,e,n),i.updateOffset(this,t),this):S(this,e)}}function S(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function z(e,t,i){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](i)}function M(e,t){var i;if("object"==typeof e)for(i in e)this.set(i,e[i]);else if(e=U(e),x(this[e]))return this[e](t);return this}function _(e,t,i){var n=""+Math.abs(e),c=t-n.length,l=e>=0;return(l?i?"+":"":"-")+Math.pow(10,Math.max(0,c)).toString().substr(1)+n}function E(e,t,i,n){var c=n;"string"==typeof n&&(c=function(){return this[n]()}),e&&(yn[e]=c),t&&(yn[t[0]]=function(){return _(c.apply(this,arguments),t[1],t[2])}),i&&(yn[i]=function(){return this.localeData().ordinal(c.apply(this,arguments),e)})}function j(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function T(e){var t,i,n=e.match(hn);for(t=0,i=n.length;i>t;t++)yn[n[t]]?n[t]=yn[n[t]]:n[t]=j(n[t]);return function(t){var c,l="";for(c=0;i>c;c++)l+=n[c]instanceof Function?n[c].call(t,e):n[c];return l}}function O(e,t){return e.isValid()?(t=D(t,e.localeData()),An[t]=An[t]||T(t),An[t](e)):e.localeData().invalidDate()}function D(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(Gn.lastIndex=0;n>=0&&Gn.test(e);)e=e.replace(Gn,i),Gn.lastIndex=0,n-=1;return e}function K(e,t,i){Yn[e]=x(t)?t:function(e,n){return e&&i?i:t}}function P(e,t){return o(Yn,e)?Yn[e](t._strict,t._locale):new RegExp(q(e))}function q(e){return $(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,c){return t||i||n||c}))}function $(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ee(e,t){var i,n=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(n=function(e,i){i[t]=G(e)}),i=0;i<e.length;i++)Nn[e[i]]=n}function te(e,t){ee(e,function(e,i,n,c){n._w=n._w||{},t(e,n._w,n,c)})}function ie(e,t,i){null!=t&&o(Nn,e)&&Nn[e](t,i._a,i,e)}function ne(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function ce(e,t){return c(this._months)?this._months[e.month()]:this._months[Kn.test(t)?"format":"standalone"][e.month()]}function le(e,t){return c(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Kn.test(t)?"format":"standalone"][e.month()]}function ae(e,t,i){var n,c,l,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;12>n;++n)l=r([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(l,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(l,"").toLocaleLowerCase();return i?"MMM"===t?(c=un.call(this._shortMonthsParse,a),-1!==c?c:null):(c=un.call(this._longMonthsParse,a),-1!==c?c:null):"MMM"===t?(c=un.call(this._shortMonthsParse,a),-1!==c?c:(c=un.call(this._longMonthsParse,a),-1!==c?c:null)):(c=un.call(this._longMonthsParse,a),-1!==c?c:(c=un.call(this._shortMonthsParse,a),-1!==c?c:null))}function oe(e,t,i){var n,c,l;if(this._monthsParseExact)return ae.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(c=r([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(c,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(c,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(l="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[n]=new RegExp(l.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}}function se(e,t){var i;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=G(t);else if(t=e.localeData().monthsParse(t),"number"!=typeof t)return e;return i=Math.min(e.date(),ne(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function re(e){return null!=e?(se(this,e),i.updateOffset(this,!0),this):S(this,"Month")}function ge(){return ne(this.year(),this.month())}function de(e){return this._monthsParseExact?(o(this,"_monthsRegex")||be.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}function Ie(e){return this._monthsParseExact?(o(this,"_monthsRegex")||be.call(this),e?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}function be(){function e(e,t){return t.length-e.length}var t,i,n=[],c=[],l=[];for(t=0;12>t;t++)i=r([2e3,t]),n.push(this.monthsShort(i,"")),c.push(this.months(i,"")),l.push(this.months(i,"")),l.push(this.monthsShort(i,""));for(n.sort(e),c.sort(e),l.sort(e),t=0;12>t;t++)n[t]=$(n[t]),c[t]=$(c[t]),l[t]=$(l[t]);this._monthsRegex=new RegExp("^("+l.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Ce(e){var t,i=e._a;return i&&-2===d(e).overflow&&(t=i[zn]<0||i[zn]>11?zn:i[Mn]<1||i[Mn]>ne(i[Sn],i[zn])?Mn:i[_n]<0||i[_n]>24||24===i[_n]&&(0!==i[En]||0!==i[jn]||0!==i[Tn])?_n:i[En]<0||i[En]>59?En:i[jn]<0||i[jn]>59?jn:i[Tn]<0||i[Tn]>999?Tn:-1,d(e)._overflowDayOfYear&&(Sn>t||t>Mn)&&(t=Mn),d(e)._overflowWeeks&&-1===t&&(t=On),d(e)._overflowWeekday&&-1===t&&(t=Dn),d(e).overflow=t),e}function ue(e){var t,i,n,c,l,a,o=e._i,s=tc.exec(o)||ic.exec(o);if(s){for(d(e).iso=!0,t=0,i=cc.length;i>t;t++)if(cc[t][1].exec(s[1])){c=cc[t][0],n=cc[t][2]!==!1;break}if(null==c)return void(e._isValid=!1);if(s[3]){for(t=0,i=lc.length;i>t;t++)if(lc[t][1].exec(s[3])){l=(s[2]||" ")+lc[t][0];break}if(null==l)return void(e._isValid=!1)}if(!n&&null!=l)return void(e._isValid=!1);if(s[4]){if(!nc.exec(s[4]))return void(e._isValid=!1);a="Z"}e._f=c+(l||"")+(a||""),Re(e)}else e._isValid=!1}function me(e){var t=ac.exec(e._i);return null!==t?void(e._d=new Date(+t[1])):(ue(e),void(e._isValid===!1&&(delete e._isValid,i.createFromInputFallback(e))))}function pe(e,t,i,n,c,l,a){var o=new Date(e,t,i,n,c,l,a);return 100>e&&e>=0&&isFinite(o.getFullYear())&&o.setFullYear(e),o}function he(e){var t=new Date(Date.UTC.apply(null,arguments));return 100>e&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Ge(e){return Ae(e)?366:365}function Ae(e){return e%4===0&&e%100!==0||e%400===0}function ye(){return Ae(this.year())}function Ze(e,t,i){var n=7+t-i,c=(7+he(e,0,n).getUTCDay()-t)%7;return-c+n-1}function Be(e,t,i,n,c){var l,a,o=(7+i-n)%7,s=Ze(e,n,c),r=1+7*(t-1)+o+s;return 0>=r?(l=e-1,a=Ge(l)+r):r>Ge(e)?(l=e+1,a=r-Ge(e)):(l=e,a=r),{year:l,dayOfYear:a}}function xe(e,t,i){var n,c,l=Ze(e.year(),t,i),a=Math.floor((e.dayOfYear()-l-1)/7)+1;return 1>a?(c=e.year()-1,n=a+ve(c,t,i)):a>ve(e.year(),t,i)?(n=a-ve(e.year(),t,i),c=e.year()+1):(c=e.year(),n=a),{week:n,year:c}}function ve(e,t,i){var n=Ze(e,t,i),c=Ze(e+1,t,i);return(Ge(e)-n+c)/7}function We(e,t,i){return null!=e?e:null!=t?t:i}function Xe(e){var t=new Date(i.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Fe(e){var t,i,n,c,l=[];if(!e._d){for(n=Xe(e),e._w&&null==e._a[Mn]&&null==e._a[zn]&&Qe(e),e._dayOfYear&&(c=We(e._a[Sn],n[Sn]),e._dayOfYear>Ge(c)&&(d(e)._overflowDayOfYear=!0),i=he(c,0,e._dayOfYear),e._a[zn]=i.getUTCMonth(),e._a[Mn]=i.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=l[t]=n[t];for(;7>t;t++)e._a[t]=l[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[_n]&&0===e._a[En]&&0===e._a[jn]&&0===e._a[Tn]&&(e._nextDay=!0,e._a[_n]=0),e._d=(e._useUTC?he:pe).apply(null,l),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[_n]=24)}}function Qe(e){var t,i,n,c,l,a,o,s;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(l=1,a=4,i=We(t.GG,e._a[Sn],xe(Ue(),1,4).year),n=We(t.W,1),c=We(t.E,1),(1>c||c>7)&&(s=!0)):(l=e._locale._week.dow,a=e._locale._week.doy,i=We(t.gg,e._a[Sn],xe(Ue(),l,a).year),n=We(t.w,1),null!=t.d?(c=t.d,(0>c||c>6)&&(s=!0)):null!=t.e?(c=t.e+l,(t.e<0||t.e>6)&&(s=!0)):c=l),1>n||n>ve(i,l,a)?d(e)._overflowWeeks=!0:null!=s?d(e)._overflowWeekday=!0:(o=Be(i,n,c,l,a),e._a[Sn]=o.year,e._dayOfYear=o.dayOfYear)}function Re(e){if(e._f===i.ISO_8601)return void ue(e);e._a=[],d(e).empty=!0;var t,n,c,l,a,o=""+e._i,s=o.length,r=0;for(c=D(e._f,e._locale).match(hn)||[],t=0;t<c.length;t++)l=c[t],n=(o.match(P(l,e))||[])[0],n&&(a=o.substr(0,o.indexOf(n)),a.length>0&&d(e).unusedInput.push(a),o=o.slice(o.indexOf(n)+n.length),r+=n.length),yn[l]?(n?d(e).empty=!1:d(e).unusedTokens.push(l),ie(l,n,e)):e._strict&&!n&&d(e).unusedTokens.push(l);d(e).charsLeftOver=s-r,o.length>0&&d(e).unusedInput.push(o),d(e).bigHour===!0&&e._a[_n]<=12&&e._a[_n]>0&&(d(e).bigHour=void 0),d(e).parsedDateParts=e._a.slice(0),d(e).meridiem=e._meridiem,e._a[_n]=Le(e._locale,e._a[_n],e._meridiem),Fe(e),Ce(e)}function Le(e,t,i){var n;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?(n=e.isPM(i),n&&12>t&&(t+=12),n||12!==t||(t=0),t):t}function He(e){var t,i,n,c,l;if(0===e._f.length)return d(e).invalidFormat=!0,void(e._d=new Date(NaN));for(c=0;c<e._f.length;c++)l=0,t=u({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[c],Re(t),I(t)&&(l+=d(t).charsLeftOver,l+=10*d(t).unusedTokens.length,d(t).score=l,(null==n||n>l)&&(n=l,i=t));s(e,i||t)}function ke(e){if(!e._d){var t=Y(e._i);e._a=a([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Fe(e)}}function fe(e){var t=new m(Ce(Ve(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Ve(e){var t=e._i,i=e._f;return e._locale=e._locale||V(e._l),null===t||void 0===i&&""===t?b({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),p(t)?new m(Ce(t)):(c(i)?He(e):i?Re(e):l(t)?e._d=t:Je(e),I(e)||(e._d=null),e))}function Je(e){var t=e._i;void 0===t?e._d=new Date(i.now()):l(t)?e._d=new Date(t.valueOf()):"string"==typeof t?me(e):c(t)?(e._a=a(t.slice(0),function(e){return parseInt(e,10)}),Fe(e)):"object"==typeof t?ke(e):"number"==typeof t?e._d=new Date(t):i.createFromInputFallback(e)}function we(e,t,i,n,c){var l={};return"boolean"==typeof i&&(n=i,i=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=c,l._l=i,l._i=e,l._f=t,l._strict=n,fe(l)}function Ue(e,t,i,n){return we(e,t,i,n,!1)}function Ye(e,t){var i,n;if(1===t.length&&c(t[0])&&(t=t[0]),!t.length)return Ue();for(i=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](i)||(i=t[n]);return i}function Ne(){var e=[].slice.call(arguments,0);return Ye("isBefore",e)}function Se(){var e=[].slice.call(arguments,0);return Ye("isAfter",e)}function ze(e){var t=Y(e),i=t.year||0,n=t.quarter||0,c=t.month||0,l=t.week||0,a=t.day||0,o=t.hour||0,s=t.minute||0,r=t.second||0,g=t.millisecond||0;this._milliseconds=+g+1e3*r+6e4*s+1e3*o*60*60,this._days=+a+7*l,this._months=+c+3*n+12*i,this._data={},this._locale=V(),this._bubble()}function Me(e){return e instanceof ze}function _e(e,t){E(e,0,0,function(){var e=this.utcOffset(),i="+";return 0>e&&(e=-e,i="-"),i+_(~~(e/60),2)+t+_(~~e%60,2)})}function Ee(e,t){var i=(t||"").match(e)||[],n=i[i.length-1]||[],c=(n+"").match(dc)||["-",0,0],l=+(60*c[1])+G(c[2]);return"+"===c[0]?l:-l}function je(e,t){var n,c;return t._isUTC?(n=t.clone(),c=(p(e)||l(e)?e.valueOf():Ue(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+c),i.updateOffset(n,!1),n):Ue(e).local()}function Te(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Oe(e,t){var n,c=this._offset||0;return this.isValid()?null!=e?("string"==typeof e?e=Ee(Jn,e):Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=Te(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),c!==e&&(!t||this._changeInProgress?dt(this,lt(e-c,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?c:Te(this):null!=e?this:NaN}function De(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ke(e){return this.utcOffset(0,e)}function Pe(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Te(this),"m")),this}function qe(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ee(Vn,this._i)),this}function $e(e){return this.isValid()?(e=e?Ue(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function et(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function tt(){if(!C(this._isDSTShifted))return this._isDSTShifted;var e={};if(u(e,this),e=Ve(e),e._a){var t=e._isUTC?r(e._a):Ue(e._a);this._isDSTShifted=this.isValid()&&A(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function it(){return this.isValid()?!this._isUTC:!1}function nt(){return this.isValid()?this._isUTC:!1}function ct(){return this.isValid()?this._isUTC&&0===this._offset:!1}function lt(e,t){var i,n,c,l=e,a=null;return Me(e)?l={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(l={},t?l[t]=e:l.milliseconds=e):(a=Ic.exec(e))?(i="-"===a[1]?-1:1,l={y:0,d:G(a[Mn])*i,h:G(a[_n])*i,m:G(a[En])*i,s:G(a[jn])*i,ms:G(a[Tn])*i}):(a=bc.exec(e))?(i="-"===a[1]?-1:1,l={y:at(a[2],i),M:at(a[3],i),w:at(a[4],i),d:at(a[5],i),h:at(a[6],i),m:at(a[7],i),s:at(a[8],i)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(c=st(Ue(l.from),Ue(l.to)),l={},l.ms=c.milliseconds,l.M=c.months),n=new ze(l),Me(e)&&o(e,"_locale")&&(n._locale=e._locale),n}function at(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function ot(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function st(e,t){var i;return e.isValid()&&t.isValid()?(t=je(t,e),e.isBefore(t)?i=ot(e,t):(i=ot(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function rt(e){return 0>e?-1*Math.round(-1*e):Math.round(e)}function gt(e,t){return function(i,n){var c,l;return null===n||isNaN(+n)||(B(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),l=i,i=n,n=l),i="string"==typeof i?+i:i,c=lt(i,n),dt(this,c,e),this}}function dt(e,t,n,c){var l=t._milliseconds,a=rt(t._days),o=rt(t._months);e.isValid()&&(c=null==c?!0:c,l&&e._d.setTime(e._d.valueOf()+l*n),a&&z(e,"Date",S(e,"Date")+a*n),o&&se(e,S(e,"Month")+o*n),c&&i.updateOffset(e,a||o))}function It(e,t){var i=e||Ue(),n=je(i,this).startOf("day"),c=this.diff(n,"days",!0),l=-6>c?"sameElse":-1>c?"lastWeek":0>c?"lastDay":1>c?"sameDay":2>c?"nextDay":7>c?"nextWeek":"sameElse",a=t&&(x(t[l])?t[l]():t[l]);return this.format(a||this.localeData().calendar(l,this,Ue(i)))}function bt(){return new m(this)}function Ct(e,t){var i=p(e)?e:Ue(e);return this.isValid()&&i.isValid()?(t=U(C(t)?"millisecond":t),"millisecond"===t?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf()):!1}function ut(e,t){var i=p(e)?e:Ue(e);return this.isValid()&&i.isValid()?(t=U(C(t)?"millisecond":t),"millisecond"===t?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf()):!1}function mt(e,t,i,n){return n=n||"()",("("===n[0]?this.isAfter(e,i):!this.isBefore(e,i))&&(")"===n[1]?this.isBefore(t,i):!this.isAfter(t,i))}function pt(e,t){var i,n=p(e)?e:Ue(e);return this.isValid()&&n.isValid()?(t=U(t||"millisecond"),"millisecond"===t?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf())):!1}function ht(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Gt(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function At(e,t,i){var n,c,l,a;return this.isValid()?(n=je(e,this),n.isValid()?(c=6e4*(n.utcOffset()-this.utcOffset()),t=U(t),"year"===t||"month"===t||"quarter"===t?(a=yt(this,n),"quarter"===t?a/=3:"year"===t&&(a/=12)):(l=this-n,a="second"===t?l/1e3:"minute"===t?l/6e4:"hour"===t?l/36e5:"day"===t?(l-c)/864e5:"week"===t?(l-c)/6048e5:l),i?a:h(a)):NaN):NaN}function yt(e,t){var i,n,c=12*(t.year()-e.year())+(t.month()-e.month()),l=e.clone().add(c,"months");return 0>t-l?(i=e.clone().add(c-1,"months"),n=(t-l)/(l-i)):(i=e.clone().add(c+1,"months"),n=(t-l)/(i-l)),-(c+n)||0}function Zt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Bt(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?x(Date.prototype.toISOString)?this.toDate().toISOString():O(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):O(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function xt(e){e||(e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var t=O(this,e);return this.localeData().postformat(t)}function vt(e,t){return this.isValid()&&(p(e)&&e.isValid()||Ue(e).isValid())?lt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Wt(e){return this.from(Ue(),e)}function Xt(e,t){return this.isValid()&&(p(e)&&e.isValid()||Ue(e).isValid())?lt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Ft(e){return this.to(Ue(),e)}function Qt(e){var t;return void 0===e?this._locale._abbr:(t=V(e),null!=t&&(this._locale=t),this)}function Rt(){return this._locale}function Lt(e){switch(e=U(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function Ht(e){return e=U(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function kt(){return this._d.valueOf()-6e4*(this._offset||0)}function ft(){return Math.floor(this.valueOf()/1e3)}function Vt(){return this._offset?new Date(this.valueOf()):this._d}function Jt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function wt(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ut(){return this.isValid()?this.toISOString():null}function Yt(){return I(this)}function Nt(){return s({},d(this))}function St(){return d(this).overflow}function zt(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Mt(e,t){E(0,[e,e.length],0,t)}function _t(e){return Ot.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Et(e){return Ot.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function jt(){return ve(this.year(),1,4)}function Tt(){var e=this.localeData()._week;return ve(this.year(),e.dow,e.doy)}function Ot(e,t,i,n,c){var l;return null==e?xe(this,n,c).year:(l=ve(e,n,c),t>l&&(t=l),Dt.call(this,e,t,i,n,c))}function Dt(e,t,i,n,c){var l=Be(e,t,i,n,c),a=he(l.year,0,l.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Kt(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Pt(e){return xe(e,this._week.dow,this._week.doy).week}function qt(){return this._week.dow}function $t(){return this._week.doy}function ei(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function ti(e){var t=xe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function ii(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function ni(e,t){return c(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}function ci(e){return this._weekdaysShort[e.day()]}function li(e){return this._weekdaysMin[e.day()]}function ai(e,t,i){var n,c,l,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;7>n;++n)l=r([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(l,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(l,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(l,"").toLocaleLowerCase();return i?"dddd"===t?(c=un.call(this._weekdaysParse,a),-1!==c?c:null):"ddd"===t?(c=un.call(this._shortWeekdaysParse,a),-1!==c?c:null):(c=un.call(this._minWeekdaysParse,a),-1!==c?c:null):"dddd"===t?(c=un.call(this._weekdaysParse,a),-1!==c?c:(c=un.call(this._shortWeekdaysParse,a),-1!==c?c:(c=un.call(this._minWeekdaysParse,a),-1!==c?c:null))):"ddd"===t?(c=un.call(this._shortWeekdaysParse,a),-1!==c?c:(c=un.call(this._weekdaysParse,a),-1!==c?c:(c=un.call(this._minWeekdaysParse,a),-1!==c?c:null))):(c=un.call(this._minWeekdaysParse,a),-1!==c?c:(c=un.call(this._weekdaysParse,a),-1!==c?c:(c=un.call(this._shortWeekdaysParse,a),-1!==c?c:null)))}function oi(e,t,i){var n,c,l;if(this._weekdaysParseExact)return ai.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;7>n;n++){if(c=r([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(c,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(c,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(c,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(l="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[n]=new RegExp(l.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(i&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(i&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!i&&this._weekdaysParse[n].test(e))return n}}function si(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ii(e,this.localeData()),this.add(e-t,"d")):t}function ri(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function gi(e){return this.isValid()?null==e?this.day()||7:this.day(this.day()%7?e:e-7):null!=e?this:NaN}function di(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Ci.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}function Ii(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Ci.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}function bi(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Ci.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;
}function Ci(){function e(e,t){return t.length-e.length}var t,i,n,c,l,a=[],o=[],s=[],g=[];for(t=0;7>t;t++)i=r([2e3,1]).day(t),n=this.weekdaysMin(i,""),c=this.weekdaysShort(i,""),l=this.weekdays(i,""),a.push(n),o.push(c),s.push(l),g.push(n),g.push(c),g.push(l);for(a.sort(e),o.sort(e),s.sort(e),g.sort(e),t=0;7>t;t++)o[t]=$(o[t]),s[t]=$(s[t]),g[t]=$(g[t]);this._weekdaysRegex=new RegExp("^("+g.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function ui(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function mi(){return this.hours()%12||12}function pi(){return this.hours()||24}function hi(e,t){E(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Gi(e,t){return t._meridiemParse}function Ai(e){return"p"===(e+"").toLowerCase().charAt(0)}function yi(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}function Zi(e,t){t[Tn]=G(1e3*("0."+e))}function Bi(){return this._isUTC?"UTC":""}function xi(){return this._isUTC?"Coordinated Universal Time":""}function vi(e){return Ue(1e3*e)}function Wi(){return Ue.apply(null,arguments).parseZone()}function Xi(e,t,i){var n=this._calendar[e];return x(n)?n.call(t,i):n}function Fi(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function Qi(){return this._invalidDate}function Ri(e){return this._ordinal.replace("%d",e)}function Li(e){return e}function Hi(e,t,i,n){var c=this._relativeTime[i];return x(c)?c(e,t,i,n):c.replace(/%d/i,e)}function ki(e,t){var i=this._relativeTime[e>0?"future":"past"];return x(i)?i(t):i.replace(/%s/i,t)}function fi(e,t,i,n){var c=V(),l=r().set(n,t);return c[i](l,e)}function Vi(e,t,i){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return fi(e,t,i,"month");var n,c=[];for(n=0;12>n;n++)c[n]=fi(e,n,i,"month");return c}function Ji(e,t,i,n){"boolean"==typeof e?("number"==typeof t&&(i=t,t=void 0),t=t||""):(t=e,i=t,e=!1,"number"==typeof t&&(i=t,t=void 0),t=t||"");var c=V(),l=e?c._week.dow:0;if(null!=i)return fi(t,(i+l)%7,n,"day");var a,o=[];for(a=0;7>a;a++)o[a]=fi(t,(a+l)%7,n,"day");return o}function wi(e,t){return Vi(e,t,"months")}function Ui(e,t){return Vi(e,t,"monthsShort")}function Yi(e,t,i){return Ji(e,t,i,"weekdays")}function Ni(e,t,i){return Ji(e,t,i,"weekdaysShort")}function Si(e,t,i){return Ji(e,t,i,"weekdaysMin")}function zi(){var e=this._data;return this._milliseconds=Nc(this._milliseconds),this._days=Nc(this._days),this._months=Nc(this._months),e.milliseconds=Nc(e.milliseconds),e.seconds=Nc(e.seconds),e.minutes=Nc(e.minutes),e.hours=Nc(e.hours),e.months=Nc(e.months),e.years=Nc(e.years),this}function Mi(e,t,i,n){var c=lt(t,i);return e._milliseconds+=n*c._milliseconds,e._days+=n*c._days,e._months+=n*c._months,e._bubble()}function _i(e,t){return Mi(this,e,t,1)}function Ei(e,t){return Mi(this,e,t,-1)}function ji(e){return 0>e?Math.floor(e):Math.ceil(e)}function Ti(){var e,t,i,n,c,l=this._milliseconds,a=this._days,o=this._months,s=this._data;return l>=0&&a>=0&&o>=0||0>=l&&0>=a&&0>=o||(l+=864e5*ji(Di(o)+a),a=0,o=0),s.milliseconds=l%1e3,e=h(l/1e3),s.seconds=e%60,t=h(e/60),s.minutes=t%60,i=h(t/60),s.hours=i%24,a+=h(i/24),c=h(Oi(a)),o+=c,a-=ji(Di(c)),n=h(o/12),o%=12,s.days=a,s.months=o,s.years=n,this}function Oi(e){return 4800*e/146097}function Di(e){return 146097*e/4800}function Ki(e){var t,i,n=this._milliseconds;if(e=U(e),"month"===e||"year"===e)return t=this._days+n/864e5,i=this._months+Oi(t),"month"===e?i:i/12;switch(t=this._days+Math.round(Di(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}}function Pi(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*G(this._months/12)}function qi(e){return function(){return this.as(e)}}function $i(e){return e=U(e),this[e+"s"]()}function en(e){return function(){return this._data[e]}}function tn(){return h(this.days()/7)}function nn(e,t,i,n,c){return c.relativeTime(t||1,!!i,e,n)}function cn(e,t,i){var n=lt(e).abs(),c=il(n.as("s")),l=il(n.as("m")),a=il(n.as("h")),o=il(n.as("d")),s=il(n.as("M")),r=il(n.as("y")),g=c<nl.s&&["s",c]||1>=l&&["m"]||l<nl.m&&["mm",l]||1>=a&&["h"]||a<nl.h&&["hh",a]||1>=o&&["d"]||o<nl.d&&["dd",o]||1>=s&&["M"]||s<nl.M&&["MM",s]||1>=r&&["y"]||["yy",r];return g[2]=t,g[3]=+e>0,g[4]=i,nn.apply(null,g)}function ln(e,t){return void 0===nl[e]?!1:void 0===t?nl[e]:(nl[e]=t,!0)}function an(e){var t=this.localeData(),i=cn(this,!e,t);return e&&(i=t.pastFuture(+this,i)),t.postformat(i)}function on(){var e,t,i,n=cl(this._milliseconds)/1e3,c=cl(this._days),l=cl(this._months);e=h(n/60),t=h(e/60),n%=60,e%=60,i=h(l/12),l%=12;var a=i,o=l,s=c,r=t,g=e,d=n,I=this.asSeconds();return I?(0>I?"-":"")+"P"+(a?a+"Y":"")+(o?o+"M":"")+(s?s+"D":"")+(r||g||d?"T":"")+(r?r+"H":"")+(g?g+"M":"")+(d?d+"S":""):"P0D"}var sn,rn;rn=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),i=t.length>>>0,n=0;i>n;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};var gn=i.momentProperties=[],dn=!1,In={};i.suppressDeprecationWarnings=!1,i.deprecationHandler=null;var bn;bn=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)o(e,t)&&i.push(t);return i};var Cn,un,mn={},pn={},hn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Gn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,An={},yn={},Zn=/\d/,Bn=/\d\d/,xn=/\d{3}/,vn=/\d{4}/,Wn=/[+-]?\d{6}/,Xn=/\d\d?/,Fn=/\d\d\d\d?/,Qn=/\d\d\d\d\d\d?/,Rn=/\d{1,3}/,Ln=/\d{1,4}/,Hn=/[+-]?\d{1,6}/,kn=/\d+/,fn=/[+-]?\d+/,Vn=/Z|[+-]\d\d:?\d\d/gi,Jn=/Z|[+-]\d\d(?::?\d\d)?/gi,wn=/[+-]?\d+(\.\d{1,3})?/,Un=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Yn={},Nn={},Sn=0,zn=1,Mn=2,_n=3,En=4,jn=5,Tn=6,On=7,Dn=8;un=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},E("M",["MM",2],"Mo",function(){return this.month()+1}),E("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),E("MMMM",0,0,function(e){return this.localeData().months(this,e)}),w("month","M"),K("M",Xn),K("MM",Xn,Bn),K("MMM",function(e,t){return t.monthsShortRegex(e)}),K("MMMM",function(e,t){return t.monthsRegex(e)}),ee(["M","MM"],function(e,t){t[zn]=G(e)-1}),ee(["MMM","MMMM"],function(e,t,i,n){var c=i._locale.monthsParse(e,n,i._strict);null!=c?t[zn]=c:d(i).invalidMonth=e});var Kn=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Pn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),qn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),$n=Un,ec=Un,tc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ic=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,nc=/Z|[+-]\d\d(?::?\d\d)?/,cc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],lc=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ac=/^\/?Date\((\-?\d+)/i;i.createFromInputFallback=Z("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),E("Y",0,0,function(){var e=this.year();return 9999>=e?""+e:"+"+e}),E(0,["YY",2],0,function(){return this.year()%100}),E(0,["YYYY",4],0,"year"),E(0,["YYYYY",5],0,"year"),E(0,["YYYYYY",6,!0],0,"year"),w("year","y"),K("Y",fn),K("YY",Xn,Bn),K("YYYY",Ln,vn),K("YYYYY",Hn,Wn),K("YYYYYY",Hn,Wn),ee(["YYYYY","YYYYYY"],Sn),ee("YYYY",function(e,t){t[Sn]=2===e.length?i.parseTwoDigitYear(e):G(e)}),ee("YY",function(e,t){t[Sn]=i.parseTwoDigitYear(e)}),ee("Y",function(e,t){t[Sn]=parseInt(e,10)}),i.parseTwoDigitYear=function(e){return G(e)+(G(e)>68?1900:2e3)};var oc=N("FullYear",!0);i.ISO_8601=function(){};var sc=Z("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Ue.apply(null,arguments);return this.isValid()&&e.isValid()?this>e?this:e:b()}),rc=Z("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Ue.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:b()}),gc=function(){return Date.now?Date.now():+new Date};_e("Z",":"),_e("ZZ",""),K("Z",Jn),K("ZZ",Jn),ee(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Ee(Jn,e)});var dc=/([\+\-]|\d\d)/gi;i.updateOffset=function(){};var Ic=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,bc=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;lt.fn=ze.prototype;var Cc=gt(1,"add"),uc=gt(-1,"subtract");i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var mc=Z("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});E(0,["gg",2],0,function(){return this.weekYear()%100}),E(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Mt("gggg","weekYear"),Mt("ggggg","weekYear"),Mt("GGGG","isoWeekYear"),Mt("GGGGG","isoWeekYear"),w("weekYear","gg"),w("isoWeekYear","GG"),K("G",fn),K("g",fn),K("GG",Xn,Bn),K("gg",Xn,Bn),K("GGGG",Ln,vn),K("gggg",Ln,vn),K("GGGGG",Hn,Wn),K("ggggg",Hn,Wn),te(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=G(e)}),te(["gg","GG"],function(e,t,n,c){t[c]=i.parseTwoDigitYear(e)}),E("Q",0,"Qo","quarter"),w("quarter","Q"),K("Q",Zn),ee("Q",function(e,t){t[zn]=3*(G(e)-1)}),E("w",["ww",2],"wo","week"),E("W",["WW",2],"Wo","isoWeek"),w("week","w"),w("isoWeek","W"),K("w",Xn),K("ww",Xn,Bn),K("W",Xn),K("WW",Xn,Bn),te(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=G(e)});var pc={dow:0,doy:6};E("D",["DD",2],"Do","date"),w("date","D"),K("D",Xn),K("DD",Xn,Bn),K("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),ee(["D","DD"],Mn),ee("Do",function(e,t){t[Mn]=G(e.match(Xn)[0],10)});var hc=N("Date",!0);E("d",0,"do","day"),E("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),E("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),E("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),E("e",0,0,"weekday"),E("E",0,0,"isoWeekday"),w("day","d"),w("weekday","e"),w("isoWeekday","E"),K("d",Xn),K("e",Xn),K("E",Xn),K("dd",function(e,t){return t.weekdaysMinRegex(e)}),K("ddd",function(e,t){return t.weekdaysShortRegex(e)}),K("dddd",function(e,t){return t.weekdaysRegex(e)}),te(["dd","ddd","dddd"],function(e,t,i,n){var c=i._locale.weekdaysParse(e,n,i._strict);null!=c?t.d=c:d(i).invalidWeekday=e}),te(["d","e","E"],function(e,t,i,n){t[n]=G(e)});var Gc="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ac="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),yc="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Zc=Un,Bc=Un,xc=Un;E("DDD",["DDDD",3],"DDDo","dayOfYear"),w("dayOfYear","DDD"),K("DDD",Rn),K("DDDD",xn),ee(["DDD","DDDD"],function(e,t,i){i._dayOfYear=G(e)}),E("H",["HH",2],0,"hour"),E("h",["hh",2],0,mi),E("k",["kk",2],0,pi),E("hmm",0,0,function(){return""+mi.apply(this)+_(this.minutes(),2)}),E("hmmss",0,0,function(){return""+mi.apply(this)+_(this.minutes(),2)+_(this.seconds(),2)}),E("Hmm",0,0,function(){return""+this.hours()+_(this.minutes(),2)}),E("Hmmss",0,0,function(){return""+this.hours()+_(this.minutes(),2)+_(this.seconds(),2)}),hi("a",!0),hi("A",!1),w("hour","h"),K("a",Gi),K("A",Gi),K("H",Xn),K("h",Xn),K("HH",Xn,Bn),K("hh",Xn,Bn),K("hmm",Fn),K("hmmss",Qn),K("Hmm",Fn),K("Hmmss",Qn),ee(["H","HH"],_n),ee(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),ee(["h","hh"],function(e,t,i){t[_n]=G(e),d(i).bigHour=!0}),ee("hmm",function(e,t,i){var n=e.length-2;t[_n]=G(e.substr(0,n)),t[En]=G(e.substr(n)),d(i).bigHour=!0}),ee("hmmss",function(e,t,i){var n=e.length-4,c=e.length-2;t[_n]=G(e.substr(0,n)),t[En]=G(e.substr(n,2)),t[jn]=G(e.substr(c)),d(i).bigHour=!0}),ee("Hmm",function(e,t,i){var n=e.length-2;t[_n]=G(e.substr(0,n)),t[En]=G(e.substr(n))}),ee("Hmmss",function(e,t,i){var n=e.length-4,c=e.length-2;t[_n]=G(e.substr(0,n)),t[En]=G(e.substr(n,2)),t[jn]=G(e.substr(c))});var vc=/[ap]\.?m?\.?/i,Wc=N("Hours",!0);E("m",["mm",2],0,"minute"),w("minute","m"),K("m",Xn),K("mm",Xn,Bn),ee(["m","mm"],En);var Xc=N("Minutes",!1);E("s",["ss",2],0,"second"),w("second","s"),K("s",Xn),K("ss",Xn,Bn),ee(["s","ss"],jn);var Fc=N("Seconds",!1);E("S",0,0,function(){return~~(this.millisecond()/100)}),E(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),E(0,["SSS",3],0,"millisecond"),E(0,["SSSS",4],0,function(){return 10*this.millisecond()}),E(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),E(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),E(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),E(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),E(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),w("millisecond","ms"),K("S",Rn,Zn),K("SS",Rn,Bn),K("SSS",Rn,xn);var Qc;for(Qc="SSSS";Qc.length<=9;Qc+="S")K(Qc,kn);for(Qc="S";Qc.length<=9;Qc+="S")ee(Qc,Zi);var Rc=N("Milliseconds",!1);E("z",0,0,"zoneAbbr"),E("zz",0,0,"zoneName");var Lc=m.prototype;Lc.add=Cc,Lc.calendar=It,Lc.clone=bt,Lc.diff=At,Lc.endOf=Ht,Lc.format=xt,Lc.from=vt,Lc.fromNow=Wt,Lc.to=Xt,Lc.toNow=Ft,Lc.get=M,Lc.invalidAt=St,Lc.isAfter=Ct,Lc.isBefore=ut,Lc.isBetween=mt,Lc.isSame=pt,Lc.isSameOrAfter=ht,Lc.isSameOrBefore=Gt,Lc.isValid=Yt,Lc.lang=mc,Lc.locale=Qt,Lc.localeData=Rt,Lc.max=rc,Lc.min=sc,Lc.parsingFlags=Nt,Lc.set=M,Lc.startOf=Lt,Lc.subtract=uc,Lc.toArray=Jt,Lc.toObject=wt,Lc.toDate=Vt,Lc.toISOString=Bt,Lc.toJSON=Ut,Lc.toString=Zt,Lc.unix=ft,Lc.valueOf=kt,Lc.creationData=zt,Lc.year=oc,Lc.isLeapYear=ye,Lc.weekYear=_t,Lc.isoWeekYear=Et,Lc.quarter=Lc.quarters=Kt,Lc.month=re,Lc.daysInMonth=ge,Lc.week=Lc.weeks=ei,Lc.isoWeek=Lc.isoWeeks=ti,Lc.weeksInYear=Tt,Lc.isoWeeksInYear=jt,Lc.date=hc,Lc.day=Lc.days=si,Lc.weekday=ri,Lc.isoWeekday=gi,Lc.dayOfYear=ui,Lc.hour=Lc.hours=Wc,Lc.minute=Lc.minutes=Xc,Lc.second=Lc.seconds=Fc,Lc.millisecond=Lc.milliseconds=Rc,Lc.utcOffset=Oe,Lc.utc=Ke,Lc.local=Pe,Lc.parseZone=qe,Lc.hasAlignedHourOffset=$e,Lc.isDST=et,Lc.isDSTShifted=tt,Lc.isLocal=it,Lc.isUtcOffset=nt,Lc.isUtc=ct,Lc.isUTC=ct,Lc.zoneAbbr=Bi,Lc.zoneName=xi,Lc.dates=Z("dates accessor is deprecated. Use date instead.",hc),Lc.months=Z("months accessor is deprecated. Use month instead",re),Lc.years=Z("years accessor is deprecated. Use year instead",oc),Lc.zone=Z("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",De);var Hc=Lc,kc={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},fc={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Vc="Invalid date",Jc="%d",wc=/\d{1,2}/,Uc={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Yc=F.prototype;Yc._calendar=kc,Yc.calendar=Xi,Yc._longDateFormat=fc,Yc.longDateFormat=Fi,Yc._invalidDate=Vc,Yc.invalidDate=Qi,Yc._ordinal=Jc,Yc.ordinal=Ri,Yc._ordinalParse=wc,Yc.preparse=Li,Yc.postformat=Li,Yc._relativeTime=Uc,Yc.relativeTime=Hi,Yc.pastFuture=ki,Yc.set=W,Yc.months=ce,Yc._months=Pn,Yc.monthsShort=le,Yc._monthsShort=qn,Yc.monthsParse=oe,Yc._monthsRegex=ec,Yc.monthsRegex=Ie,Yc._monthsShortRegex=$n,Yc.monthsShortRegex=de,Yc.week=Pt,Yc._week=pc,Yc.firstDayOfYear=$t,Yc.firstDayOfWeek=qt,Yc.weekdays=ni,Yc._weekdays=Gc,Yc.weekdaysMin=li,Yc._weekdaysMin=yc,Yc.weekdaysShort=ci,Yc._weekdaysShort=Ac,Yc.weekdaysParse=oi,Yc._weekdaysRegex=Zc,Yc.weekdaysRegex=di,Yc._weekdaysShortRegex=Bc,Yc.weekdaysShortRegex=Ii,Yc._weekdaysMinRegex=xc,Yc.weekdaysMinRegex=bi,Yc.isPM=Ai,Yc._meridiemParse=vc,Yc.meridiem=yi,H("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=1===G(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),i.lang=Z("moment.lang is deprecated. Use moment.locale instead.",H),i.langData=Z("moment.langData is deprecated. Use moment.localeData instead.",V);var Nc=Math.abs,Sc=qi("ms"),zc=qi("s"),Mc=qi("m"),_c=qi("h"),Ec=qi("d"),jc=qi("w"),Tc=qi("M"),Oc=qi("y"),Dc=en("milliseconds"),Kc=en("seconds"),Pc=en("minutes"),qc=en("hours"),$c=en("days"),el=en("months"),tl=en("years"),il=Math.round,nl={s:45,m:45,h:22,d:26,M:11},cl=Math.abs,ll=ze.prototype;ll.abs=zi,ll.add=_i,ll.subtract=Ei,ll.as=Ki,ll.asMilliseconds=Sc,ll.asSeconds=zc,ll.asMinutes=Mc,ll.asHours=_c,ll.asDays=Ec,ll.asWeeks=jc,ll.asMonths=Tc,ll.asYears=Oc,ll.valueOf=Pi,ll._bubble=Ti,ll.get=$i,ll.milliseconds=Dc,ll.seconds=Kc,ll.minutes=Pc,ll.hours=qc,ll.days=$c,ll.weeks=tn,ll.months=el,ll.years=tl,ll.humanize=an,ll.toISOString=on,ll.toString=on,ll.toJSON=on,ll.locale=Qt,ll.localeData=Rt,ll.toIsoString=Z("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",on),ll.lang=mc,E("X",0,0,"unix"),E("x",0,0,"valueOf"),K("x",fn),K("X",wn),ee("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),ee("x",function(e,t,i){i._d=new Date(G(e))}),i.version="2.13.0",n(Ue),i.fn=Hc,i.min=Ne,i.max=Se,i.now=gc,i.utc=r,i.unix=vi,i.months=wi,i.isDate=l,i.locale=H,i.invalid=b,i.duration=lt,i.isMoment=p,i.weekdays=Yi,i.parseZone=Wi,i.localeData=V,i.isDuration=Me,i.monthsShort=Ui,i.weekdaysMin=Si,i.defineLocale=k,i.updateLocale=f,i.locales=J,i.weekdaysShort=Ni,i.normalizeUnits=U,i.relativeTimeThreshold=ln,i.prototype=Hc;var al=i;return al})},{}],14:[function(e,t,i){!function(e,i,n){function c(t,n){this.wrapper="string"==typeof t?i.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,disablePointer:!s.hasPointer,disableTouch:s.hasPointer||!s.hasTouch,disableMouse:s.hasPointer||s.hasTouch,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:"undefined"==typeof e.onmousedown};for(var c in n)this.options[c]=n[c];this.translateZ=this.options.HWCompositing&&s.hasPerspective?" translateZ(0)":"",this.options.useTransition=s.hasTransition&&this.options.useTransition,this.options.useTransform=s.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?s.ease[this.options.bounceEasing]||s.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function l(e,t,n){var c=i.createElement("div"),l=i.createElement("div");return n===!0&&(c.style.cssText="position:absolute;z-index:9999",l.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),l.className="iScrollIndicator","h"==e?(n===!0&&(c.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",l.style.height="100%"),c.className="iScrollHorizontalScrollbar"):(n===!0&&(c.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",l.style.width="100%"),c.className="iScrollVerticalScrollbar"),c.style.cssText+=";overflow:hidden",t||(c.style.pointerEvents="none"),c.appendChild(l),c}function a(t,n){this.wrapper="string"==typeof n.el?i.querySelector(n.el):n.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=t,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var c in n)this.options[c]=n[c];if(this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(s.addEvent(this.indicator,"touchstart",this),s.addEvent(e,"touchend",this)),this.options.disablePointer||(s.addEvent(this.indicator,s.prefixPointerEvent("pointerdown"),this),s.addEvent(e,s.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(s.addEvent(this.indicator,"mousedown",this),s.addEvent(e,"mouseup",this))),this.options.fade){this.wrapperStyle[s.style.transform]=this.scroller.translateZ;var l=s.style.transitionDuration;this.wrapperStyle[l]=s.isBadAndroid?"0.0001ms":"0ms";var a=this;s.isBadAndroid&&o(function(){"0.0001ms"===a.wrapperStyle[l]&&(a.wrapperStyle[l]="0s")}),this.wrapperStyle.opacity="0"}}var o=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},s=function(){function t(e){return a===!1?!1:""===a?e:a+e.charAt(0).toUpperCase()+e.substr(1)}var c={},l=i.createElement("div").style,a=function(){for(var e,t=["t","webkitT","MozT","msT","OT"],i=0,n=t.length;n>i;i++)if(e=t[i]+"ransform",e in l)return t[i].substr(0,t[i].length-1);return!1}();c.getTime=Date.now||function(){return(new Date).getTime()},c.extend=function(e,t){for(var i in t)e[i]=t[i]},c.addEvent=function(e,t,i,n){e.addEventListener(t,i,!!n)},c.removeEvent=function(e,t,i,n){e.removeEventListener(t,i,!!n)},c.prefixPointerEvent=function(t){return e.MSPointerEvent?"MSPointer"+t.charAt(7).toUpperCase()+t.substr(8):t},c.momentum=function(e,t,i,c,l,a){var o,s,r=e-t,g=n.abs(r)/i;return a=void 0===a?6e-4:a,o=e+g*g/(2*a)*(0>r?-1:1),s=g/a,c>o?(o=l?c-l/2.5*(g/8):c,r=n.abs(o-e),s=r/g):o>0&&(o=l?l/2.5*(g/8):0,r=n.abs(e)+o,s=r/g),{destination:n.round(o),duration:s}};var o=t("transform");return c.extend(c,{hasTransform:o!==!1,hasPerspective:t("perspective")in l,hasTouch:"ontouchstart"in e,hasPointer:!(!e.PointerEvent&&!e.MSPointerEvent),hasTransition:t("transition")in l}),c.isBadAndroid=function(){var t=e.navigator.appVersion;if(/Android/.test(t)&&!/Chrome\/\d/.test(t)){var i=t.match(/Safari\/(\d+.\d)/);return i&&"object"==typeof i&&i.length>=2?parseFloat(i[1])<535.19:!0}return!1}(),c.extend(c.style={},{transform:o,transitionTimingFunction:t("transitionTimingFunction"),transitionDuration:t("transitionDuration"),transitionDelay:t("transitionDelay"),transformOrigin:t("transformOrigin")}),c.hasClass=function(e,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)");return i.test(e.className)},c.addClass=function(e,t){if(!c.hasClass(e,t)){var i=e.className.split(" ");i.push(t),e.className=i.join(" ")}},c.removeClass=function(e,t){if(c.hasClass(e,t)){var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(i," ")}},c.offset=function(e){for(var t=-e.offsetLeft,i=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,i-=e.offsetTop;return{left:t,top:i}},c.preventDefaultException=function(e,t){for(var i in t)if(t[i].test(e[i]))return!0;return!1},c.extend(c.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),c.extend(c.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return n.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e-=1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){var t=.22,i=.4;return 0===e?0:1==e?1:i*n.pow(2,-10*e)*n.sin((e-t/4)*(2*n.PI)/t)+1}}}),c.tap=function(e,t){var n=i.createEvent("Event");n.initEvent(t,!0,!0),n.pageX=e.pageX,n.pageY=e.pageY,e.target.dispatchEvent(n)},c.click=function(e){var t,n=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||(t=i.createEvent("MouseEvents"),t.initMouseEvent("click",!0,!0,e.view,1,n.screenX,n.screenY,n.clientX,n.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),t._constructed=!0,n.dispatchEvent(t))},c}();c.prototype={version:"5.2.0",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if(1!=s.eventType[e.type]){var t;if(t=e.which?e.button:e.button<2?0:4==e.button?1:2,0!==t)return}if(this.enabled&&(!this.initiated||s.eventType[e.type]===this.initiated)){!this.options.preventDefault||s.isBadAndroid||s.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var i,c=e.touches?e.touches[0]:e;this.initiated=s.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=s.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,i=this.getComputedPosition(),this._translate(n.round(i.x),n.round(i.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=c.pageX,this.pointY=c.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&s.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var t,i,c,l,a=e.touches?e.touches[0]:e,o=a.pageX-this.pointX,r=a.pageY-this.pointY,g=s.getTime();if(this.pointX=a.pageX,this.pointY=a.pageY,this.distX+=o,this.distY+=r,c=n.abs(this.distX),l=n.abs(this.distY),!(g-this.endTime>300&&10>c&&10>l)){if(this.directionLocked||this.options.freeScroll||(c>l+this.options.directionLockThreshold?this.directionLocked="h":l>=c+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);r=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);o=0}o=this.hasHorizontalScroll?o:0,r=this.hasVerticalScroll?r:0,t=this.x+o,i=this.y+r,(t>0||t<this.maxScrollX)&&(t=this.options.bounce?this.x+o/3:t>0?0:this.maxScrollX),(i>0||i<this.maxScrollY)&&(i=this.options.bounce?this.y+r/3:i>0?0:this.maxScrollY),this.directionX=o>0?-1:0>o?1:0,this.directionY=r>0?-1:0>r?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(t,i),g-this.startTime>300&&(this.startTime=g,this.startX=this.x,this.startY=this.y)}}},_end:function(e){if(this.enabled&&s.eventType[e.type]===this.initiated){this.options.preventDefault&&!s.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t,i,c=(e.changedTouches?e.changedTouches[0]:e,s.getTime()-this.startTime),l=n.round(this.x),a=n.round(this.y),o=n.abs(l-this.startX),r=n.abs(a-this.startY),g=0,d="";if(this.isInTransition=0,this.initiated=0,this.endTime=s.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(l,a),!this.moved)return this.options.tap&&s.tap(e,this.options.tap),this.options.click&&s.click(e),void this._execEvent("scrollCancel");if(this._events.flick&&200>c&&100>o&&100>r)return void this._execEvent("flick");if(this.options.momentum&&300>c&&(t=this.hasHorizontalScroll?s.momentum(this.x,this.startX,c,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:l,duration:0},i=this.hasVerticalScroll?s.momentum(this.y,this.startY,c,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:a,duration:0},l=t.destination,a=i.destination,g=n.max(t.duration,i.duration),this.isInTransition=1),this.options.snap){var I=this._nearestSnap(l,a);this.currentPage=I,g=this.options.snapSpeed||n.max(n.max(n.min(n.abs(l-I.x),1e3),n.min(n.abs(a-I.y),1e3)),300),l=I.x,a=I.y,this.directionX=0,this.directionY=0,d=this.options.bounceEasing}return l!=this.x||a!=this.y?((l>0||l<this.maxScrollX||a>0||a<this.maxScrollY)&&(d=s.ease.quadratic),void this.scrollTo(l,a,g,d)):void this._execEvent("scrollEnd")}}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,i=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),t==this.x&&i==this.y?!1:(this.scrollTo(t,i,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=s.offset(this.wrapper),this._execEvent("refresh"),
this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var i=this._events[e].indexOf(t);i>-1&&this._events[e].splice(i,1)}},_execEvent:function(e){if(this._events[e]){var t=0,i=this._events[e].length;if(i)for(;i>t;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,i,n){e=this.x+e,t=this.y+t,i=i||0,this.scrollTo(e,t,i,n)},scrollTo:function(e,t,i,n){n=n||s.ease.circular,this.isInTransition=this.options.useTransition&&i>0;var c=this.options.useTransition&&n.style;!i||c?(c&&(this._transitionTimingFunction(n.style),this._transitionTime(i)),this._translate(e,t)):this._animate(e,t,i,n.fn)},scrollToElement:function(e,t,i,c,l){if(e=e.nodeType?e:this.scroller.querySelector(e)){var a=s.offset(e);a.left-=this.wrapperOffset.left,a.top-=this.wrapperOffset.top,i===!0&&(i=n.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),c===!0&&(c=n.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),a.left-=i||0,a.top-=c||0,a.left=a.left>0?0:a.left<this.maxScrollX?this.maxScrollX:a.left,a.top=a.top>0?0:a.top<this.maxScrollY?this.maxScrollY:a.top,t=void 0===t||null===t||"auto"===t?n.max(n.abs(this.x-a.left),n.abs(this.y-a.top)):t,this.scrollTo(a.left,a.top,t,l)}},_transitionTime:function(e){e=e||0;var t=s.style.transitionDuration;if(this.scrollerStyle[t]=e+"ms",!e&&s.isBadAndroid){this.scrollerStyle[t]="0.0001ms";var i=this;o(function(){"0.0001ms"===i.scrollerStyle[t]&&(i.scrollerStyle[t]="0s")})}if(this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].transitionTime(e)},_transitionTimingFunction:function(e){if(this.scrollerStyle[s.style.transitionTimingFunction]=e,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){if(this.options.useTransform?this.scrollerStyle[s.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=n.round(e),t=n.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].updatePosition()},_initEvents:function(t){var i=t?s.removeEvent:s.addEvent,n=this.options.bindToWrapper?this.wrapper:e;i(e,"orientationchange",this),i(e,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(n,"mousemove",this),i(n,"mousecancel",this),i(n,"mouseup",this)),s.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,s.prefixPointerEvent("pointerdown"),this),i(n,s.prefixPointerEvent("pointermove"),this),i(n,s.prefixPointerEvent("pointercancel"),this),i(n,s.prefixPointerEvent("pointerup"),this)),s.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(n,"touchmove",this),i(n,"touchcancel",this),i(n,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t,i,n=e.getComputedStyle(this.scroller,null);return this.options.useTransform?(n=n[s.style.transform].split(")")[0].split(", "),t=+(n[12]||n[4]),i=+(n[13]||n[5])):(t=+n.left.replace(/[^-\d.]/g,""),i=+n.top.replace(/[^-\d.]/g,"")),{x:t,y:i}},_initIndicators:function(){function e(e){if(o.indicators)for(var t=o.indicators.length;t--;)e.call(o.indicators[t])}var t,i=this.options.interactiveScrollbars,n="string"!=typeof this.options.scrollbars,c=[],o=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:l("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),c.push(t)),this.options.scrollX&&(t={el:l("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),c.push(t))),this.options.indicators&&(c=c.concat(this.options.indicators));for(var s=c.length;s--;)this.indicators.push(new a(this,c[s]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){e(function(){this.fade()})}),this.on("scrollCancel",function(){e(function(){this.fade()})}),this.on("scrollStart",function(){e(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){e(function(){this.fade(1,!0)})})),this.on("refresh",function(){e(function(){this.refresh()})}),this.on("destroy",function(){e(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){s.addEvent(this.wrapper,"wheel",this),s.addEvent(this.wrapper,"mousewheel",this),s.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){clearTimeout(this.wheelTimeout),this.wheelTimeout=null,s.removeEvent(this.wrapper,"wheel",this),s.removeEvent(this.wrapper,"mousewheel",this),s.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(e){if(this.enabled){e.preventDefault();var t,i,c,l,a=this;if(void 0===this.wheelTimeout&&a._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){a.options.snap||a._execEvent("scrollEnd"),a.wheelTimeout=void 0},400),"deltaX"in e)1===e.deltaMode?(t=-e.deltaX*this.options.mouseWheelSpeed,i=-e.deltaY*this.options.mouseWheelSpeed):(t=-e.deltaX,i=-e.deltaY);else if("wheelDeltaX"in e)t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,i=e.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in e)t=i=e.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in e))return;t=i=-e.detail/3*this.options.mouseWheelSpeed}if(t*=this.options.invertWheelDirection,i*=this.options.invertWheelDirection,this.hasVerticalScroll||(t=i,i=0),this.options.snap)return c=this.currentPage.pageX,l=this.currentPage.pageY,t>0?c--:0>t&&c++,i>0?l--:0>i&&l++,void this.goToPage(c,l);c=this.x+n.round(this.hasHorizontalScroll?t:0),l=this.y+n.round(this.hasVerticalScroll?i:0),this.directionX=t>0?-1:0>t?1:0,this.directionY=i>0?-1:0>i?1:0,c>0?c=0:c<this.maxScrollX&&(c=this.maxScrollX),l>0?l=0:l<this.maxScrollY&&(l=this.maxScrollY),this.scrollTo(c,l,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var e,t,i,c,l,a,o=0,s=0,r=0,g=this.options.snapStepX||this.wrapperWidth,d=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(i=n.round(g/2),c=n.round(d/2);r>-this.scrollerWidth;){for(this.pages[o]=[],e=0,l=0;l>-this.scrollerHeight;)this.pages[o][e]={x:n.max(r,this.maxScrollX),y:n.max(l,this.maxScrollY),width:g,height:d,cx:r-i,cy:l-c},l-=d,e++;r-=g,o++}else for(a=this.options.snap,e=a.length,t=-1;e>o;o++)(0===o||a[o].offsetLeft<=a[o-1].offsetLeft)&&(s=0,t++),this.pages[s]||(this.pages[s]=[]),r=n.max(-a[o].offsetLeft,this.maxScrollX),l=n.max(-a[o].offsetTop,this.maxScrollY),i=r-n.round(a[o].offsetWidth/2),c=l-n.round(a[o].offsetHeight/2),this.pages[s][t]={x:r,y:l,width:a[o].offsetWidth,height:a[o].offsetHeight,cx:i,cy:c},r>this.maxScrollX&&s++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var e=this.options.snapSpeed||n.max(n.max(n.min(n.abs(this.x-this.startX),1e3),n.min(n.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)})},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var i=0,c=this.pages.length,l=0;if(n.abs(e-this.absStartX)<this.snapThresholdX&&n.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);c>i;i++)if(e>=this.pages[i][0].cx){e=this.pages[i][0].x;break}for(c=this.pages[i].length;c>l;l++)if(t>=this.pages[0][l].cy){t=this.pages[0][l].y;break}return i==this.currentPage.pageX&&(i+=this.directionX,0>i?i=0:i>=this.pages.length&&(i=this.pages.length-1),e=this.pages[i][0].x),l==this.currentPage.pageY&&(l+=this.directionY,0>l?l=0:l>=this.pages[0].length&&(l=this.pages[0].length-1),t=this.pages[0][l].y),{x:e,y:t,pageX:i,pageY:l}},goToPage:function(e,t,i,c){c=c||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:0>e&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:0>t&&(t=0);var l=this.pages[e][t].x,a=this.pages[e][t].y;i=void 0===i?this.options.snapSpeed||n.max(n.max(n.min(n.abs(l-this.x),1e3),n.min(n.abs(a-this.y),1e3)),300):i,this.currentPage={x:l,y:a,pageX:e,pageY:t},this.scrollTo(l,a,i,c)},next:function(e,t){var i=this.currentPage.pageX,n=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,n++),this.goToPage(i,n,e,t)},prev:function(e,t){var i=this.currentPage.pageX,n=this.currentPage.pageY;i--,0>i&&this.hasVerticalScroll&&(i=0,n--),this.goToPage(i,n,e,t)},_initKeys:function(t){var i,n={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(i in this.options.keyBindings)"string"==typeof this.options.keyBindings[i]&&(this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(i in n)this.options.keyBindings[i]=this.options.keyBindings[i]||n[i];s.addEvent(e,"keydown",this),this.on("destroy",function(){s.removeEvent(e,"keydown",this)})},_key:function(e){if(this.enabled){var t,i=this.options.snap,c=i?this.currentPage.pageX:this.x,l=i?this.currentPage.pageY:this.y,a=s.getTime(),o=this.keyTime||0,r=.25;switch(this.options.useTransition&&this.isInTransition&&(t=this.getComputedPosition(),this._translate(n.round(t.x),n.round(t.y)),this.isInTransition=!1),this.keyAcceleration=200>a-o?n.min(this.keyAcceleration+r,50):0,e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?c+=i?1:this.wrapperWidth:l+=i?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?c-=i?1:this.wrapperWidth:l-=i?1:this.wrapperHeight;break;case this.options.keyBindings.end:c=i?this.pages.length-1:this.maxScrollX,l=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:c=0,l=0;break;case this.options.keyBindings.left:c+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:l+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:c-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:l-=i?1:5+this.keyAcceleration>>0;break;default:return}if(i)return void this.goToPage(c,l);c>0?(c=0,this.keyAcceleration=0):c<this.maxScrollX&&(c=this.maxScrollX,this.keyAcceleration=0),l>0?(l=0,this.keyAcceleration=0):l<this.maxScrollY&&(l=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(c,l,0),this.keyTime=a}},_animate:function(e,t,i,n){function c(){var I,b,C,u=s.getTime();return u>=d?(l.isAnimating=!1,l._translate(e,t),void(l.resetPosition(l.options.bounceTime)||l._execEvent("scrollEnd"))):(u=(u-g)/i,C=n(u),I=(e-a)*C+a,b=(t-r)*C+r,l._translate(I,b),void(l.isAnimating&&o(c)))}var l=this,a=this.x,r=this.y,g=s.getTime(),d=g+i;this.isAnimating=!0,c()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":this.enabled&&!e._constructed&&(e.preventDefault(),e.stopPropagation())}}},a.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.fadeScrollbars&&(clearTimeout(this.fadeTimeout),this.fadeTimeout=null),this.options.interactive&&(s.removeEvent(this.indicator,"touchstart",this),s.removeEvent(this.indicator,s.prefixPointerEvent("pointerdown"),this),s.removeEvent(this.indicator,"mousedown",this),s.removeEvent(e,"touchmove",this),s.removeEvent(e,s.prefixPointerEvent("pointermove"),this),s.removeEvent(e,"mousemove",this),s.removeEvent(e,"touchend",this),s.removeEvent(e,s.prefixPointerEvent("pointerup"),this),s.removeEvent(e,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var i=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=s.getTime(),this.options.disableTouch||s.addEvent(e,"touchmove",this),this.options.disablePointer||s.addEvent(e,s.prefixPointerEvent("pointermove"),this),this.options.disableMouse||s.addEvent(e,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t,i,n,c,l=e.touches?e.touches[0]:e;s.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,t=l.pageX-this.lastPointX,this.lastPointX=l.pageX,i=l.pageY-this.lastPointY,this.lastPointY=l.pageY,n=this.x+t,c=this.y+i,this._pos(n,c),e.preventDefault(),e.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),s.removeEvent(e,"touchmove",this),s.removeEvent(e,s.prefixPointerEvent("pointermove"),this),s.removeEvent(e,"mousemove",this),this.scroller.options.snap){var i=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),c=this.options.snapSpeed||n.max(n.max(n.min(n.abs(this.scroller.x-i.x),1e3),n.min(n.abs(this.scroller.y-i.y),1e3)),300);this.scroller.x==i.x&&this.scroller.y==i.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=i,this.scroller.scrollTo(i.x,i.y,c,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(e){e=e||0;var t=s.style.transitionDuration;if(this.indicatorStyle[t]=e+"ms",!e&&s.isBadAndroid){this.indicatorStyle[t]="0.0001ms";var i=this;o(function(){"0.0001ms"===i.indicatorStyle[t]&&(i.indicatorStyle[t]="0s")})}},transitionTimingFunction:function(e){this.indicatorStyle[s.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(s.addClass(this.wrapper,"iScrollBothScrollbars"),s.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(s.removeClass(this.wrapper,"iScrollBothScrollbars"),s.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=n.max(n.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=n.max(n.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&n.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&n.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=n.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=n.max(this.indicatorWidth-(e-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",e=this.maxPosX+this.indicatorWidth-this.width):e=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=n.max(this.indicatorHeight+3*t,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=n.max(this.indicatorHeight-3*(t-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[s.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){0>e?e=0:e>this.maxPosX&&(e=this.maxPosX),0>t?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?n.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?n.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(!t||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=e?250:500,n=e?0:300;e=e?"1":"0",this.wrapperStyle[s.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),n)}}},c.utils=s,"undefined"!=typeof t&&t.exports?t.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):e.IScroll=c}(window,document,Math)},{}],12:[function(e,t,i){!function(e,i,n,c){"use strict";function l(e,t,i){return setTimeout(g(e,i),t)}function a(e,t,i){return Array.isArray(e)?(o(e,i[t],i),!0):!1}function o(e,t,i){var n;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==c)for(n=0;n<e.length;)t.call(i,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&t.call(i,e[n],n,e)}function s(t,i,n){var c="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",l=e.console&&(e.console.warn||e.console.log);return l&&l.call(e.console,c,n),t.apply(this,arguments)}}function r(e,t,i){var n,c=t.prototype;n=e.prototype=Object.create(c),n.constructor=e,n._super=c,i&&Ie(n,i)}function g(e,t){return function(){return e.apply(t,arguments)}}function d(e,t){return typeof e==ue?e.apply(t?t[0]||c:c,t):e}function I(e,t){return e===c?t:e}function b(e,t,i){o(p(t),function(t){e.addEventListener(t,i,!1)})}function C(e,t,i){o(p(t),function(t){e.removeEventListener(t,i,!1)})}function u(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function m(e,t){return e.indexOf(t)>-1}function p(e){return e.trim().split(/\s+/g)}function h(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var n=0;n<e.length;){if(i&&e[n][i]==t||!i&&e[n]===t)return n;n++}return-1}function G(e){return Array.prototype.slice.call(e,0)}function A(e,t,i){for(var n=[],c=[],l=0;l<e.length;){var a=t?e[l][t]:e[l];h(c,a)<0&&n.push(e[l]),c[l]=a,l++}return i&&(n=t?n.sort(function(e,i){return e[t]>i[t]}):n.sort()),n}function y(e,t){for(var i,n,l=t[0].toUpperCase()+t.slice(1),a=0;a<be.length;){if(i=be[a],n=i?i+l:t,n in e)return n;a++}return c}function Z(){return ye++}function B(t){var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||e}function x(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){d(e.options.enable,[e])&&i.handler(t)},this.init()}function v(e){var t,i=e.options.inputClass;return new(t=i?i:xe?Y:ve?z:Be?_:U)(e,W)}function W(e,t,i){var n=i.pointers.length,c=i.changedPointers.length,l=t&Le&&n-c===0,a=t&(ke|fe)&&n-c===0;i.isFirst=!!l,i.isFinal=!!a,l&&(e.session={}),i.eventType=t,X(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function X(e,t){var i=e.session,n=t.pointers,c=n.length;i.firstInput||(i.firstInput=R(t)),c>1&&!i.firstMultiple?i.firstMultiple=R(t):1===c&&(i.firstMultiple=!1);var l=i.firstInput,a=i.firstMultiple,o=a?a.center:l.center,s=t.center=L(n);t.timeStamp=he(),t.deltaTime=t.timeStamp-l.timeStamp,t.angle=V(o,s),t.distance=f(o,s),F(i,t),t.offsetDirection=k(t.deltaX,t.deltaY);var r=H(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=r.x,t.overallVelocityY=r.y,t.overallVelocity=pe(r.x)>pe(r.y)?r.x:r.y,t.scale=a?w(a.pointers,n):1,t.rotation=a?J(a.pointers,n):0,t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length,Q(i,t);var g=e.element;u(t.srcEvent.target,g)&&(g=t.srcEvent.target),t.target=g}function F(e,t){var i=t.center,n=e.offsetDelta||{},c=e.prevDelta||{},l=e.prevInput||{};t.eventType!==Le&&l.eventType!==ke||(c=e.prevDelta={x:l.deltaX||0,y:l.deltaY||0},n=e.offsetDelta={x:i.x,y:i.y}),t.deltaX=c.x+(i.x-n.x),t.deltaY=c.y+(i.y-n.y)}function Q(e,t){var i,n,l,a,o=e.lastInterval||t,s=t.timeStamp-o.timeStamp;if(t.eventType!=fe&&(s>Re||o.velocity===c)){var r=t.deltaX-o.deltaX,g=t.deltaY-o.deltaY,d=H(s,r,g);n=d.x,l=d.y,i=pe(d.x)>pe(d.y)?d.x:d.y,a=k(r,g),e.lastInterval=t}else i=o.velocity,n=o.velocityX,l=o.velocityY,a=o.direction;t.velocity=i,t.velocityX=n,t.velocityY=l,t.direction=a}function R(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:me(e.pointers[i].clientX),clientY:me(e.pointers[i].clientY)},i++;return{timeStamp:he(),pointers:t,center:L(t),deltaX:e.deltaX,deltaY:e.deltaY}}function L(e){var t=e.length;if(1===t)return{x:me(e[0].clientX),y:me(e[0].clientY)};for(var i=0,n=0,c=0;t>c;)i+=e[c].clientX,n+=e[c].clientY,c++;return{x:me(i/t),y:me(n/t)}}function H(e,t,i){return{x:t/e||0,y:i/e||0}}function k(e,t){return e===t?Ve:pe(e)>=pe(t)?0>e?Je:we:0>t?Ue:Ye}function f(e,t,i){i||(i=Me);var n=t[i[0]]-e[i[0]],c=t[i[1]]-e[i[1]];return Math.sqrt(n*n+c*c)}function V(e,t,i){i||(i=Me);var n=t[i[0]]-e[i[0]],c=t[i[1]]-e[i[1]];return 180*Math.atan2(c,n)/Math.PI}function J(e,t){return V(t[1],t[0],_e)+V(e[1],e[0],_e)}function w(e,t){return f(t[0],t[1],_e)/f(e[0],e[1],_e)}function U(){this.evEl=je,this.evWin=Te,this.pressed=!1,x.apply(this,arguments)}function Y(){this.evEl=Ke,this.evWin=Pe,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$e,this.evWin=et,this.started=!1,x.apply(this,arguments)}function S(e,t){var i=G(e.touches),n=G(e.changedTouches);return t&(ke|fe)&&(i=A(i.concat(n),"identifier",!0)),[i,n]}function z(){this.evTarget=it,this.targetIds={},x.apply(this,arguments)}function M(e,t){var i=G(e.touches),n=this.targetIds;if(t&(Le|He)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var c,l,a=G(e.changedTouches),o=[],s=this.target;if(l=i.filter(function(e){return u(e.target,s)}),t===Le)for(c=0;c<l.length;)n[l[c].identifier]=!0,c++;for(c=0;c<a.length;)n[a[c].identifier]&&o.push(a[c]),t&(ke|fe)&&delete n[a[c].identifier],c++;return o.length?[A(l.concat(o),"identifier",!0),o]:void 0}function _(){x.apply(this,arguments);var e=g(this.handler,this);this.touch=new z(this.manager,e),this.mouse=new U(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function E(e,t){e&Le?(this.primaryTouch=t.changedPointers[0].identifier,j.call(this,t)):e&(ke|fe)&&j.call(this,t)}function j(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var n=this.lastTouches,c=function(){var e=n.indexOf(i);e>-1&&n.splice(e,1)};setTimeout(c,nt)}}function T(e){for(var t=e.srcEvent.clientX,i=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var c=this.lastTouches[n],l=Math.abs(t-c.x),a=Math.abs(i-c.y);if(ct>=l&&ct>=a)return!0}return!1}function O(e,t){this.manager=e,this.set(t)}function D(e){if(m(e,gt))return gt;var t=m(e,dt),i=m(e,It);return t&&i?gt:t||i?t?dt:It:m(e,rt)?rt:st}function K(){if(!at)return!1;var t={},i=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=i?e.CSS.supports("touch-action",n):!0}),t}function P(e){this.options=Ie({},this.defaults,e||{}),this.id=Z(),this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=Ct,this.simultaneous={},this.requireFail=[]}function q(e){return e&Gt?"cancel":e&pt?"end":e&mt?"move":e&ut?"start":""}function $(e){return e==Ye?"down":e==Ue?"up":e==Je?"left":e==we?"right":""}function ee(e,t){var i=t.manager;return i?i.get(e):e}function te(){P.apply(this,arguments)}function ie(){te.apply(this,arguments),this.pX=null,this.pY=null}function ne(){te.apply(this,arguments)}function ce(){P.apply(this,arguments),this._timer=null,this._input=null}function le(){te.apply(this,arguments)}function ae(){te.apply(this,arguments)}function oe(){P.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function se(e,t){return t=t||{},t.recognizers=I(t.recognizers,se.defaults.preset),new re(e,t)}function re(e,t){this.options=Ie({},se.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=v(this),this.touchAction=new O(this,this.options.touchAction),ge(this,!0),o(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function ge(e,t){var i=e.element;if(i.style){var n;o(e.options.cssProps,function(c,l){n=y(i.style,l),t?(e.oldCssProps[n]=i.style[n],i.style[n]=c):i.style[n]=e.oldCssProps[n]||""}),t||(e.oldCssProps={})}}function de(e,t){var n=i.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}var Ie,be=["","webkit","Moz","MS","ms","o"],Ce=i.createElement("div"),ue="function",me=Math.round,pe=Math.abs,he=Date.now;Ie="function"!=typeof Object.assign?function(e){if(e===c||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==c&&null!==n)for(var l in n)n.hasOwnProperty(l)&&(t[l]=n[l])}return t}:Object.assign;var Ge=s(function(e,t,i){for(var n=Object.keys(t),l=0;l<n.length;)(!i||i&&e[n[l]]===c)&&(e[n[l]]=t[n[l]]),l++;return e},"extend","Use `assign`."),Ae=s(function(e,t){return Ge(e,t,!0)},"merge","Use `assign`."),ye=1,Ze=/mobile|tablet|ip(ad|hone|od)|android/i,Be="ontouchstart"in e,xe=y(e,"PointerEvent")!==c,ve=Be&&Ze.test(navigator.userAgent),We="touch",Xe="pen",Fe="mouse",Qe="kinect",Re=25,Le=1,He=2,ke=4,fe=8,Ve=1,Je=2,we=4,Ue=8,Ye=16,Ne=Je|we,Se=Ue|Ye,ze=Ne|Se,Me=["x","y"],_e=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(B(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(B(this.element),this.evWin,this.domHandler)}};var Ee={mousedown:Le,mousemove:He,mouseup:ke},je="mousedown",Te="mousemove mouseup";r(U,x,{handler:function(e){var t=Ee[e.type];t&Le&&0===e.button&&(this.pressed=!0),t&He&&1!==e.which&&(t=ke),this.pressed&&(t&ke&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Fe,srcEvent:e}))}});var Oe={pointerdown:Le,pointermove:He,pointerup:ke,pointercancel:fe,pointerout:fe},De={2:We,3:Xe,4:Fe,5:Qe},Ke="pointerdown",Pe="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Ke="MSPointerDown",Pe="MSPointerMove MSPointerUp MSPointerCancel"),r(Y,x,{handler:function(e){var t=this.store,i=!1,n=e.type.toLowerCase().replace("ms",""),c=Oe[n],l=De[e.pointerType]||e.pointerType,a=l==We,o=h(t,e.pointerId,"pointerId");c&Le&&(0===e.button||a)?0>o&&(t.push(e),o=t.length-1):c&(ke|fe)&&(i=!0),0>o||(t[o]=e,this.callback(this.manager,c,{pointers:t,changedPointers:[e],pointerType:l,srcEvent:e}),i&&t.splice(o,1))}});var qe={touchstart:Le,touchmove:He,touchend:ke,touchcancel:fe},$e="touchstart",et="touchstart touchmove touchend touchcancel";r(N,x,{handler:function(e){var t=qe[e.type];if(t===Le&&(this.started=!0),this.started){var i=S.call(this,e,t);t&(ke|fe)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:We,srcEvent:e})}}});var tt={touchstart:Le,touchmove:He,touchend:ke,touchcancel:fe},it="touchstart touchmove touchend touchcancel";r(z,x,{handler:function(e){var t=tt[e.type],i=M.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:We,srcEvent:e})}});var nt=2500,ct=25;r(_,x,{handler:function(e,t,i){var n=i.pointerType==We,c=i.pointerType==Fe;if(!(c&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)E.call(this,t,i);else if(c&&T.call(this,i))return;this.callback(e,t,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var lt=y(Ce.style,"touchAction"),at=lt!==c,ot="compute",st="auto",rt="manipulation",gt="none",dt="pan-x",It="pan-y",bt=K();O.prototype={set:function(e){e==ot&&(e=this.compute()),at&&this.manager.element.style&&bt[e]&&(this.manager.element.style[lt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return o(this.manager.recognizers,function(t){d(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),D(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var n=this.actions,c=m(n,gt)&&!bt[gt],l=m(n,It)&&!bt[It],a=m(n,dt)&&!bt[dt];if(c){var o=1===e.pointers.length,s=e.distance<2,r=e.deltaTime<250;if(o&&s&&r)return}return a&&l?void 0:c||l&&i&Ne||a&&i&Se?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,
e.preventDefault()}};var Ct=1,ut=2,mt=4,pt=8,ht=pt,Gt=16,At=32;P.prototype={defaults:{},set:function(e){return Ie(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(a(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ee(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return a(e,"dropRecognizeWith",this)?this:(e=ee(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(a(e,"requireFailure",this))return this;var t=this.requireFail;return e=ee(e,this),-1===h(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(a(e,"dropRequireFailure",this))return this;e=ee(e,this);var t=h(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){i.manager.emit(t,e)}var i=this,n=this.state;pt>n&&t(i.options.event+q(n)),t(i.options.event),e.additionalEvent&&t(e.additionalEvent),n>=pt&&t(i.options.event+q(n))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=At)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(At|Ct)))return!1;e++}return!0},recognize:function(e){var t=Ie({},e);return d(this.options.enable,[this,t])?(this.state&(ht|Gt|At)&&(this.state=Ct),this.state=this.process(t),void(this.state&(ut|mt|pt|Gt)&&this.tryEmit(t))):(this.reset(),void(this.state=At))},process:function(e){},getTouchAction:function(){},reset:function(){}},r(te,P,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,n=t&(ut|mt),c=this.attrTest(e);return n&&(i&fe||!c)?t|Gt:n||c?i&ke?t|pt:t&ut?t|mt:ut:At}}),r(ie,te,{defaults:{event:"pan",threshold:10,pointers:1,direction:ze},getTouchAction:function(){var e=this.options.direction,t=[];return e&Ne&&t.push(It),e&Se&&t.push(dt),t},directionTest:function(e){var t=this.options,i=!0,n=e.distance,c=e.direction,l=e.deltaX,a=e.deltaY;return c&t.direction||(t.direction&Ne?(c=0===l?Ve:0>l?Je:we,i=l!=this.pX,n=Math.abs(e.deltaX)):(c=0===a?Ve:0>a?Ue:Ye,i=a!=this.pY,n=Math.abs(e.deltaY))),e.direction=c,i&&n>t.threshold&&c&t.direction},attrTest:function(e){return te.prototype.attrTest.call(this,e)&&(this.state&ut||!(this.state&ut)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=$(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),r(ne,te,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[gt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&ut)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),r(ce,P,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[st]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,c=e.deltaTime>t.time;if(this._input=e,!n||!i||e.eventType&(ke|fe)&&!c)this.reset();else if(e.eventType&Le)this.reset(),this._timer=l(function(){this.state=ht,this.tryEmit()},t.time,this);else if(e.eventType&ke)return ht;return At},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===ht&&(e&&e.eventType&ke?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=he(),this.manager.emit(this.options.event,this._input)))}}),r(le,te,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[gt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&ut)}}),r(ae,te,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ne|Se,pointers:1},getTouchAction:function(){return ie.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return i&(Ne|Se)?t=e.overallVelocity:i&Ne?t=e.overallVelocityX:i&Se&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&pe(t)>this.options.velocity&&e.eventType&ke},emit:function(e){var t=$(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),r(oe,P,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[rt]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,c=e.deltaTime<t.time;if(this.reset(),e.eventType&Le&&0===this.count)return this.failTimeout();if(n&&c&&i){if(e.eventType!=ke)return this.failTimeout();var a=this.pTime?e.timeStamp-this.pTime<t.interval:!0,o=!this.pCenter||f(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,o&&a?this.count+=1:this.count=1,this._input=e;var s=this.count%t.taps;if(0===s)return this.hasRequireFailures()?(this._timer=l(function(){this.state=ht,this.tryEmit()},t.interval,this),ut):ht}return At},failTimeout:function(){return this._timer=l(function(){this.state=At},this.options.interval,this),At},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ht&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),se.VERSION="2.0.7",se.defaults={domEvents:!1,touchAction:ot,enable:!0,inputTarget:null,inputClass:null,preset:[[le,{enable:!1}],[ne,{enable:!1},["rotate"]],[ae,{direction:Ne}],[ie,{direction:Ne},["swipe"]],[oe],[oe,{event:"doubletap",taps:2},["tap"]],[ce]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var yt=1,Zt=2;re.prototype={set:function(e){return Ie(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?Zt:yt},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var i,n=this.recognizers,c=t.curRecognizer;(!c||c&&c.state&ht)&&(c=t.curRecognizer=null);for(var l=0;l<n.length;)i=n[l],t.stopped===Zt||c&&i!=c&&!i.canRecognizeWith(c)?i.reset():i.recognize(e),!c&&i.state&(ut|mt|pt)&&(c=t.curRecognizer=i),l++}},get:function(e){if(e instanceof P)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(a(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(a(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,i=h(t,e);-1!==i&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){if(e!==c&&t!==c){var i=this.handlers;return o(p(e),function(e){i[e]=i[e]||[],i[e].push(t)}),this}},off:function(e,t){if(e!==c){var i=this.handlers;return o(p(e),function(e){t?i[e]&&i[e].splice(h(i[e],t),1):delete i[e]}),this}},emit:function(e,t){this.options.domEvents&&de(e,t);var i=this.handlers[e]&&this.handlers[e].slice();if(i&&i.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](t),n++}},destroy:function(){this.element&&ge(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Ie(se,{INPUT_START:Le,INPUT_MOVE:He,INPUT_END:ke,INPUT_CANCEL:fe,STATE_POSSIBLE:Ct,STATE_BEGAN:ut,STATE_CHANGED:mt,STATE_ENDED:pt,STATE_RECOGNIZED:ht,STATE_CANCELLED:Gt,STATE_FAILED:At,DIRECTION_NONE:Ve,DIRECTION_LEFT:Je,DIRECTION_RIGHT:we,DIRECTION_UP:Ue,DIRECTION_DOWN:Ye,DIRECTION_HORIZONTAL:Ne,DIRECTION_VERTICAL:Se,DIRECTION_ALL:ze,Manager:re,Input:x,TouchAction:O,TouchInput:z,MouseInput:U,PointerEventInput:Y,TouchMouseInput:_,SingleTouchInput:N,Recognizer:P,AttrRecognizer:te,Tap:oe,Pan:ie,Swipe:ae,Pinch:ne,Rotate:le,Press:ce,on:b,off:C,each:o,merge:Ae,extend:Ge,assign:Ie,inherit:r,bindFn:g,prefixed:y});var Bt="undefined"!=typeof e?e:"undefined"!=typeof self?self:{};Bt.Hammer=se,"function"==typeof define&&define.amd?define(function(){return se}):"undefined"!=typeof t&&t.exports?t.exports=se:e[n]=se}(window,document,"Hammer")},{}],10:[function(e,t,i){t.exports=e("./src/elf")},{"./src/elf":11}],11:[function(e,t,i){"use strict";!function(e,t,i){function n(e){return e.trim()}function c(e){return e[e.length-1]}function l(e){return(e.slice||Array.prototype.slice).apply(e,Array.prototype.slice.call(arguments,1))}function a(e){return e.toLowerCase()}function o(e){throw e}function s(e,t){for(;e.length;)t(e.pop())}function r(e,t){e.splice.apply(e,[0,e.length].concat(t))}function g(e,t){return v(e)&&!W(e)&&t in e}function d(e,t){if(e===t)return!0;if(F(e)&&F(t)){for(var i in e){if(!g(t,i))return!1;if(!d(e[i],t[i]))return!1}for(var i in t)if(!g(e,i))return!1;return!0}return!1}function I(e,t,i){return Object.defineProperty(e,t,i)}function b(e){for(var t=[],i=e.length,n=0;i>n;n++){var c=e[n];Array.isArray(c)?c.length&&t.push.apply(t,b(c)):v(c)&&t.push(c)}return t}function C(e,t){return e.indexOf(t)<0?1===e.push(t):!1}function u(e,t){var i=e.indexOf(t);return i>=0?(e.splice(i,1),!e.length):!1}function m(t,i){return function(){var n=e.createEvent("async");t.apply(this,[n].concat(i)),n.refreshPrevented||A()}}function p(e,t){return{configurable:!0,enumerable:!!t,writable:!0,value:e}}function h(e){return JSON.stringify(e)}function G(e){return C(oe,e),{dispose:u.bind(null,oe,e)}}function A(){return i?!1:(se&&(se=!1,requestAnimationFrame(function(){try{oe.forEach(function(e){e.duplex&&e.forceUpdate()})}finally{se=!0}})),!se)}function y(e){return"undefined"!=typeof Symbol?Symbol(e):e}function Z(t){return"undefined"!=typeof Proxy&&e.$safeScope?new Proxy(t,{has:function(e,t){return g(e,t)||!(g(pe,t)||o(new Error(t+" is not defined")))}}):t}function B(e,t,i){for(var n=i||0,c=t.length,l=0;c>l;l++)if(t.charAt(l)!==e.charAt(n+l))return!1;return!0}function x(e){return function(t){return t.prototype=e,t}(function(e){return function(){e.apply(this,arguments)}}(e.constructor||z))}function v(e){return null!==e&&void 0!==e}function W(e){return X(e)||"number"==typeof e||"boolean"==typeof e}function X(e){return"string"==typeof e}function F(e){return v(e)&&"object"==typeof e}function Q(e,t){return e.length===t.length&&a(e)===t}function R(t){return B(t,e.$eventStart)}function L(e,t){return e instanceof t}function H(e,t,i){e.addEventListener(t,i,!1)}function k(e,t,i){e.removeEventListener(t,i,!1)}function f(e,t,i){switch(be[t]||0){case 0:e.setAttribute(t,i);break;case 1:e[t].cssText=U(i);break;case 2:e[t]=i===!1?i:!0;break;case 3:e[t]=Y(i);break;case 4:e[t]=i}}function V(e,t){switch(be[t]||0){case 0:e.removeAttribute(t);break;case 1:e[t].cssText="";break;case 2:e[t]=!1;break;case 3:case 4:e[t]=""}}function J(e,t,i){e.insertBefore(t,i||null)}function w(e){e.parentNode&&e.parentNode.removeChild(e)}function U(t){return F(t)?e.$map(t,function(e,t){return t.replace(/[A-Z]/g,function(e){return"-"+a(e)})+":"+e}).join("; "):t}function Y(t){return F(t)?b(e.$map(t,function(e,t){return e?t:null})).join(" "):t}function N(e){var t=new rt(e);this[Le].dispatchEvent(t),t.refreshPrevented||A(),e.stopImmediatePropagation()}function S(e){return e[Le]||(e[Le]=new T(e))}function z(){}var M,_,E,j,T,O="pending",D="resolved",K="rejected",P="onInitial",q="onDispose",$=/\S/,ee=/[:A-Za-z0-9][-:\w]*/,te=/(\S.*)(\s+(?:in|of)\s+)(.*\S)/,ie=/([^\s"'<>\/=]+)(?:(\s*=\s*)(?:"([^"]*)"|'([^']*)'|([^\s"'<>\/=]+)))?/,ne=/&(?:([a-zA-Z][0-9a-zA-Z]*)|#([0-9]+)|#[Xx]([0-9a-fA-F]+));/g,ce=/[,\s]+/,le=/\s/,ae=/\|/,oe=[],se=!0,re="http://www.w3.org/2000/svg",ge="http://www.w3.org/1998/Math/MathML",de={autoFocus:"autofocus",autoPlay:"autoplay","class":"className","for":"htmlFor",novalidate:"noValidate",formnovalidate:"formNoValidate",readonly:"readOnly",accentHeight:"accent-height",acceptCharset:"accept-charset",alignmentBaseline:"alignment-baseline",altimgHeight:"altimg-height",altimgValign:"altimg-valign",altimgWidth:"altimg-width",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",httpEquiv:"http-equiv",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlSpace:"xml:space"},Ie={quot:'"',amp:"&",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ"},be={async:2,autofocus:2,autoplay:2,checked:2,className:3,controls:2,"default":2,defaultValue:4,defaultChecked:2,defer:2,disabled:2,hidden:2,htmlFor:4,innerHTML:4,loop:2,multiple:2,muted:2,noValidate:2,formNoValidate:2,open:2,readOnly:2,required:2,reversed:2,scoped:2,selected:2,style:1,value:4,children:9},Ce={area:0,base:0,br:0,col:0,embed:0,hr:0,img:0,input:0,keygen:0,link:0,menuitem:0,meta:0,param:0,source:0,track:0,wbr:0},ue={altKey:0,animationName:0,button:0,buttons:0,changedTouches:0,charCode:0,clientX:0,clientY:0,clipboardData:0,ctrlKey:0,data:0,dataTransfer:0,deltaMode:0,deltaX:0,deltaY:0,deltaZ:0,detail:0,elapsedTime:0,key:0,keyCode:0,locale:0,location:0,metaKey:0,pageX:0,pageY:0,propertyName:0,relatedTarget:0,repeat:0,screenX:0,screenY:0,shiftKey:0,targetTouches:0,timeStamp:0,touches:0,which:0},me={email:0,number:0,password:0,search:0,text:0,tel:0,url:0},pe={Array:0,Boolean:0,Date:0,Infinity:0,Intl:0,JSON:0,Map:0,Math:0,NaN:0,Number:0,Object:0,RegExp:0,Set:0,String:0,decodeURI:0,decodeURIComponent:0,encodeURI:0,encodeURIComponent:0,escape:0,isFinite:0,isNaN:0,parseFloat:0,parseInt:0,undefined:0,unescape:0,Elf:0},he={},Ge={},Ae={},ye=[],Ze=[],Be=[],xe=[],ve=y("Promise.status"),We=y("Promise.result"),Xe=y("Promise.observe"),Fe=y("Promise.capture"),Qe=y("Promise.dispose"),Re=y("Display.instance"),Le=y("Display.renderer"),He=y("Display.component"),ke=y("Display.directive"),fe=y("Display.transform"),Ve=y("Event.tracker"),Je=y("Event.contact"),we=y("Event.current"),Ue=y("Event.product"),Ye=function(e){return{E:{},M:function(e){return this.E[a(e)]||(this.E[a(e)]=[])},attachEvent:function(t,i){C(this.M(t),i)&&e.connate&&H(e.product,t,N)},detachEvent:function(t,i){u(this.M(t),i)&&e.connate&&k(e.product,t,N)},replace:function(e,t){var i=this.M(e),n=i.indexOf(t.hoary);n>=0&&i.splice(n,1,t.newly)},trigger:function(t){for(var i=e.product,n=l(this.M(t.type)),c=n.length,a=0;c>a;a++){var o=n[a],s=new rt(t,null,i);if(o.handleEvent?o.handleEvent(s):o.call(i,s),s.cancelEntire)break}},dispose:function(){if(e.connate)for(var t in this.E)k(e.product,t,N);this.E={}}}},Ne=function(e,t){return{value:e,newly:t}},Se=function(e,t){return v(e)?F(e)?X(e.type)?new j(t,e):new E(t,e):new _(t,e):new M(t)},ze=function(e,t){var i={hoary:{},newly:{},alter:{}};if(e!==t){for(var n in t)g(e,n)?d(e[n],t[n])||(i.alter[n]={hoary:t[n],newly:e[n]}):i.hoary[n]=t[n];for(var n in e)g(t,n)||(i.newly[n]=e[n])}return i},Me=function(e){return e[Re]||(e[Re]=new e)},_e=function(e){xe.push(e);try{return e.render()}finally{xe.pop()}},Ee=function(t){return a(l(t,e.$eventStart.length))},je=function(e){return de[e]||e},Te=function(e){return e.bubbles&&!e.cancelBubble},Oe=function(e,t){if(e===t)return!0;if(F(e)&&F(t)){var i=e.type;if(e.key!==t.key||i!==t.type)return!1;if(X(i)&&Q(i,"input")){var n=e.props.type,c=t.props.type;return n===c||g(me,n)&&g(me,c)}return!0}return v(e)===v(t)&&W(e)===W(t)},De=function(e,t,i,n,c,l,a){for(var o=0,s=n.length;s>o;o++){var r=Se(n[o],i),g=r.initial(c,l,a);g.newly&&J(t,g.value),e.push(r)}},Ke=function(e,t,i,n,c,l,a){function o(e){return e?e.draught?o(e.draught):e.product:null}function s(e,t){var n=Se(e.element,i),o=n.initial(c,l,a);return e.product=o.value,y[t]=n,o}function g(t,i){if(v(G)){var n=e[G];if(d(n,t))return e[G]=null,I(n,t,i)}return s(t,i)}function d(e,t){return Oe(e.element,t.element)}function I(e,t,i){var n=e.renewal(c,l,a,t.element);return t.product=n.value,y[i]=e,n}function b(e,i,n){(i.newly||n)&&J(t,i.value,e)}function C(e,t,i){A=A||h(t,i),G=e.element.key?A[e.element.key]:u(e,t,i)}function u(t,i,n){for(var c=i;n>=c;c++)if(e[c]&&Oe(e[c].element,t.element))return c}function m(e,t,i){for(var n=t;i>=n;n++)b(e,s(Z[n],n),!0)}function p(t,i){for(var n=t;i>=n;n++)e[n]&&e[n].dispose()}function h(t,i){for(var n={},c=t;i>=c;c++){var l=e[c].element.key;l&&(n[l]=c)}return n}for(var G,A,y=new Array(n.length),Z=n.map(function(e){return{element:e,product:null}}),B=0,x=0,W=e.length-1,X=e[0],F=e[W],Q=Z.length-1,R=Z[0],L=Z[Q];W>=B&&Q>=x;)v(X)?v(F)?d(X,R)?(b(o(X).nextSibling,I(X,R,x),!1),X=e[++B],R=Z[++x]):d(F,L)?(b(o(F).nextSibling,I(F,L,Q),!1),F=e[--W],L=Z[--Q]):d(X,L)?(b(o(F).nextSibling,I(X,L,Q),!0),X=e[++B],L=Z[--Q]):d(F,R)?(b(o(X),I(F,R,x),!0),F=e[--W],R=Z[++x]):(C(R,B,W),b(o(X),g(R,x),!0),R=Z[++x]):F=e[--W]:X=e[++B];B>W?m(o(Z[Q+1]),x,Q):x>Q&&p(B,W),r(e,y)},Pe=function(e){s(e,function(e){e.dispose()})},qe=function(e,t){for(var i in e)R(i)?t.attachEvent(Ee(i),e[i]):t.connate&&f(t.product,je(i),e[i])},$e=function(e,t){et(e.hoary,t),qe(e.newly,t);for(var i in e.alter)R(i)?t.emitter.replace(Ee(i),e.alter[i]):t.connate&&f(t.product,je(i),e.alter[i].newly)},et=function(e,t){for(var i in e)R(i)?t.detachEvent(Ee(i),e[i]):t.connate&&V(t.product,je(i))},tt=i?z:function(e,t,i,n,c){for(var l=0,a=n.length;a>l;l++){var o=Me(n[l]);o[P]&&c.push(o[P].bind(o,t,i)),e.push(o)}},it=i?z:function(e,t,i,n,c){function l(e){for(var t=0,i=n.length;i>t;t++)if(L(e,n[t]))return t;return-1}function a(t){for(var i=0,n=e.length;n>i;i++)if(L(e[i],t))return i;return-1}for(var o=[],s=0,g=e.length;g>s;s++){var d=l(e[s]);0>d&&e[s][q]&&e[s][q](t,i)}for(var s=0,g=n.length;g>s;s++){var d=a(n[s]);if(0>d){var I=Me(n[s]);I[P]&&c.push(I[P].bind(I,t,i)),o.push(I)}else o.push(e[d])}r(e,o)},nt=i?z:function(e,t,i){s(e,function(e){e[q]&&e[q](t,i)})},ct=i?z:function(e,t){e.owner&&e.ref&&(e.owner.refs[e.ref]=t)},lt=i?z:function(e,t,i){e.ref===i.ref&&e.owner===i.owner||(at(e,t),ct(i,t))},at=i?z:function(e,t){e.owner&&e.ref&&e.owner.refs[e.ref]===t&&delete e.owner.refs[e.ref]},ot=i?z:function(e,t){e[P]&&t.push(e[P].bind(e))},st=i?z:function(e){e[q]&&e[q]()};M=x({constructor:function(e){this.parent=e},initial:function(e,t,i){return Ne(this.product=e.createComment(""),!0)},renewal:function(e,t,i,n){return Ne(this.product,!1)},dispose:function(){w(this.product)}}),_=x({constructor:function(e,t){this.parent=e,this.element=t},initial:function(e,t,i){return Ne(this.product=e.createTextNode(this.element),!0)},renewal:function(e,t,i,n){return this.element!==n&&(this.product.textContent=this.element=n),Ne(this.product,!1)},dispose:function(){w(this.product)}}),E=x({constructor:function(e,t){this.parent=e,this.element=t,this.emitter=Ye(this),this.connate=!1},initial:function(e,t,i){var n,c,l,a=this,o=a.element,s=o.props,r=o.type,g=o.cmd,d=[];return n=Object.create(r.prototype),n[Le]=a,n.props=s,n.state={},n.refs={},n.constructor&&n.constructor(),c=Se(_e(n),a),l=c.initial(e,t,i),a.behests=d,a.product=n,a.draught=c,qe(s,a),tt(d,n,s,g,i),ct(o,n),ot(n,i),l},renewal:function(e,t,i,n){var c,l,a,o=this,s=o.element,r=o.behests,g=o.draught,d=o.product,I=n.props,b=n.cmd;return o.element=n,d.props=I,c=_e(d),l=ze(I,s.props),Oe(c,g.element)?a=g.renewal(e,t,i,c):(g.dispose(),g=Se(c,o),a=g.initial(e,t,i),o.draught=g),$e(l,o),it(r,d,I,b,i),lt(s,d,n),a},dispose:function(){var e=this,t=e.behests,i=e.product,n=e.element;nt(t,i,n.props),at(n,i),st(i),e.emitter.dispose(),e.draught.dispose()},trigger:function(e,t){this.connate===t&&this.emitter.trigger(e),Te(e)&&this.parent.trigger(e,t)},attachEvent:function(e,t){this.emitter.attachEvent(e,t)},detachEvent:function(e,t){this.emitter.detachEvent(e,t)},dispatchEvent:function(e){this.trigger(e,this.connate)}}),j=x({constructor:function(e,t){this.parent=e,this.element=t,this.emitter=Ye(this),this.connate=!0},initial:function(e,t,i){var n,c=this,l=c.element,o=l.props,s=o.children,r=l.type,g=l.cmd,d=[],I=[];return"svg"===r&&(t=re),"math"===r&&(t=ge),n=t?e.createElementNS(t,r):e.createElement(a(r)),n[Le]=c,c.behests=d,c.members=I,c.product=n,qe(o,c),De(I,n,c,s,e,t,i),tt(d,n,o,g,i),ct(l,n),Ne(n,!0)},renewal:function(e,t,i,n){var c,l=this,a=l.element,o=l.behests,s=l.members,r=l.product,g=n.props,d=g.children,I=n.type,b=n.cmd;return"svg"===I&&(t=re),"math"===I&&(t=ge),l.element=n,c=ze(g,a.props),$e(c,l),Ke(s,r,l,d,e,t,i),it(o,r,g,b,i),lt(a,r,n),Ne(r,!1)},dispose:function(){var e=this,t=e.behests,i=e.members,n=e.product,c=e.element;Pe(i),nt(t,n,c.props),at(c,n),e.emitter.dispose(),w(n)},trigger:function(e,t){this.connate===t&&this.emitter.trigger(e),Te(e)&&this.parent.trigger(e,t)},attachEvent:function(e,t){this.emitter.attachEvent(e,t)},detachEvent:function(e,t){this.emitter.detachEvent(e,t)},dispatchEvent:function(e){this.trigger(e,this.connate)}}),T=x({constructor:function(e){this.product=e,this.emitter=Ye(this),this.connate=!0},dispose:function(){this.emitter.dispose(),w(this.product)},trigger:function(e,t){if(this.connate===t&&this.emitter.trigger(e),Te(e)){var i=function n(e){var t=e.parentNode||e.defaultView;return t&&t!==e?t[Le]?t[Le]:n(t):void 0}(this.product);i&&i.trigger(e,t)}},attachEvent:function(e,t){this.emitter.attachEvent(e,t)},detachEvent:function(e,t){this.emitter.detachEvent(e,t)},dispatchEvent:function(e){this.trigger(e,this.connate)}});var rt;rt=x({constructor:function(e,t,i){I(this,Je,p(t||e.target)),I(this,we,p(i||e.currentTarget)),I(this,Ue,p(e[Ue]||e)),I(this,Ve,p(e[Ve]||{defaultPrevented:!!e.defaultPrevented,refreshPrevented:!!e.refreshPrevented,cancelBubble:!!e.cancelBubble,cancelEntire:!!e.cancelEntire}));for(var n in ue)g(e,n)&&I(this,n,{enumerable:!0,value:e[n]})},stopImmediatePropagation:function(){this[Ue].stopImmediatePropagation(),this[Ve].cancelEntire=!0,this[Ve].cancelBubble=!0},stopPropagation:function(){this[Ue].stopPropagation(),this[Ve].cancelBubble=!0},preventDefault:function(){this[Ue].cancelable&&(this[Ue].preventDefault(),this[Ve].defaultPrevented=!0)},preventRefresh:function(){this[Ve].refreshPrevented=!0},get type(){return this[Ue].type},get bubbles(){return this[Ue].bubbles},get cancelable(){return this[Ue].cancelable},get cancelBubble(){return this[Ve].cancelBubble},get cancelEntire(){return this[Ve].cancelEntire},get defaultPrevented(){return this[Ve].defaultPrevented},get refreshPrevented(){return this[Ve].refreshPrevented},get originalEvent(){return this[Ue]},get currentTarget(){return this[we]},get target(){return this[Je]}});var gt,dt=function(e,t){return function(i){It(e,t,i)}},It=function(e,i,n){if(e[ve]===O){if(e===n&&(i=K,n=new Error("Promise resolved with itself")),L(n,gt)){if(n[ve]===O)return void n.then(dt(e,D),dt(e,K));n[Fe]=!0,e[ve]=n[ve],e[We]=n[We]}else{if(n&&"function"==typeof n.then)return void n.then(dt(e,D),dt(e,K));e[ve]=i,e[We]=n}for(var c=e[Xe],l=c.length;c.length;){var a=c.shift(),s=c.shift(),r=c.shift();switch(e[ve]){case D:bt(a,e[We],s);break;case K:bt(a,e[We],r)}}0===l&&e[ve]===K&&t.then(function(){e[Fe]||o(e[We])})}},bt=function(e,t,i){try{It(e,D,i(t))}catch(n){It(e,K,n)}};gt=x({constructor:function(e){I(this,Xe,p([])),I(this,Fe,p(!1)),I(this,We,p(void 0)),I(this,ve,p(O));try{I(this,Qe,p(e(dt(this,D),dt(this,K))))}catch(t){It(this,K,t)}},dispose:function(){this[Qe]&&this[Qe]()},"catch":function(e){return this.then(null,e)},then:function(e,t){var i=this,n=e||function(e){return e},c=t||function(e){return gt.reject(e)},l=new gt(function(){return i[Qe]});switch(i[Fe]=!0,i[ve]){case O:i[Xe].push(l,n,c);break;case D:bt(l,i[We],n);break;case K:bt(l,i[We],c)}return l},get result(){return this[We]},get status(){return this[ve]}}),gt.resolve=function(e){return new gt(function(t){t(e)})},gt.reject=function(e){return new gt(function(t,i){i(e)})},gt.ajax=function(t){return new gt(function(i,c){var l,a,o=t.url,s="load",r="error";if(t.jsonp){var d="Elf"+(1e9*Math.random()|0),I=document.createElement("script"),b=document.querySelector("head"),C=function(){delete window[d]};return l=window[d]=function(e){i({status:200,headers:{},text:function(){return F(e)?h(e):e},json:function(){return e}}),C(),A()},a=function(e){c(e),C(),A()},H(I,r,a),f(I,"type","text/javascript"),f(I,"src",o),J(b,I),function(){window[d]&&(window[d]=C),k(I,r,a),w(I)}}var u="Content-Type",m=t.method||"GET",p=t.headers||{},G=new XMLHttpRequest;l=function(){var e=G.responseText,t=1223===G.status?200:G.status;0===t&&(t=e?200:0);var l={},a=n(G.getAllResponseHeaders()||"");a&&a.split("\n").forEach(function(e){var t=":",i=n(e).split(t),c=n(i.shift()),a=n(i.join(t));l[c]=a}),t>=200&&300>t?i({status:t,headers:l,text:function(){return e},json:function(){return JSON.parse(e)}}):c(G),A()},a=function(){c(G),A()},G.open(m.toUpperCase(),o,!0),H(G,s,l),H(G,r,a),g(p,u)||G.setRequestHeader(u,"application/x-www-form-urlencoded; charset=utf-8");for(var y in e.$xhrFields)G[y]=e.$xhrFields[y];for(var y in p)G.setRequestHeader(y,p[y]);return G.send(t.body),function(){k(G,s,l),k(G,r,a),G.abort()}})},gt.race=function(e){return new gt(function(t,i){e.length?e.forEach(function(e){gt.resolve(e).then(t,i)}):t()})},gt.all=function(e){return new gt(function(t,i){var n=0,c=e.length,l=new Array(c);c?e.forEach(function(e,a){gt.resolve(e).then(function(e){l[a]=e,++n===c&&t(l)},i)}):t(l)})},e.Promise=gt,e.createClass=x,e.requestAnimationFrame=function(e){return{dispose:cancelAnimationFrame.bind(null,requestAnimationFrame(m(e,l(arguments,1))))}},e.setInterval=function(e,t){return{dispose:clearInterval.bind(null,setInterval(m(e,l(arguments,2)),t))}},e.setTimeout=function(e,t){return{dispose:clearTimeout.bind(null,setTimeout(m(e,l(arguments,2)),t))}},e.Component=function(e,t){return I(x(t),He,p(e))},e.Directive=function(e,t){return I(x(t),ke,p(e))},e.Transform=function(e,t){return I(x(t),fe,p(e))},e.createEvent=function(e,t,i){return new rt({type:e,detail:i,bubbles:!!t,cancelable:!1,stopImmediatePropagation:z,stopPropagation:z,preventDefault:z})},e.attachEvent=function(e,t,i){S(e).attachEvent(t,i)},e.detachEvent=function(e,t,i){S(e).detachEvent(t,i)},e.dispatchEvent=function(e,t){S(e).dispatchEvent(new rt(t,e))},e.createElement=function(e,t){var i=t||{},n=b(l(arguments,2)),a={ref:i.ref,key:i.key,cmd:i.cmd||[],type:e,props:{},owner:c(xe)};for(var o in i)"ref"!==o&&"key"!==o&&"cmd"!==o&&v(i[o])&&(a.props[o]=i[o]);return X(e)&&(Q(e,"input")?a.props.type=a.props.type||"text":Q(e,"button")&&(a.props.type=a.props.type||"button")),Object.freeze(I(a.props,"children",p(n))),a},e.redactElement=function(t){function i(e){1===e.nodeType?e.iteration?e.level?c(e):o(new Error("Cannot use iteration on root node")):e.condition?a(e):n(e):3===e.nodeType&&d(e)}function n(e){C("Elf.createElement(Elf.$tag("),u(e.nodeName),C(h(e.nodeName.raw)),C("),"),r(e),e.children.length&&(C(","),s(e)),C(")")}function c(e){u(e.iteration.keys),C("Elf.$map("),u(e.iteration.body),C(e.iteration.body.raw),C(",function("),C(e.iteration.keys.raw),C("){return("),e.condition?a(e):n(e),C(")},this)")}function a(e){C("(("),u(e.condition),C(e.condition.raw),C(")?"),n(e),C(":null)")}function s(e){C("["),e.children.forEach(function(e,t){C(t>0?",":""),i(e)}),C("]")}function r(e){C("{"),e.attributes.forEach(function(e,t){C(t>0?",":""),C(h(e.name.raw)),C(":"),e.incident?(C("function(event){"),u(e.delegate),C(e.delegate.raw),C("}.bind(this)")):e.segments.length?"cmd"===e.name.raw?(C("Elf.$cmd("),d(e),C(")")):d(e):C(h(""))}),C("}")}function d(e){e.segments.forEach(function(e,t){C(t>0?"+":""),e.computed?I(e):(u(e.input),C(h(e.input.raw)))})}function I(e){u(e.input),C("Elf.$fit("),C(e.input.raw||"void 0"),e.pipes.forEach(function(e,t){C(",["),u(e.name),C(h(e.name.raw)),e.arguments.forEach(function(e,t){C(","),u(e),C(e.raw)}),C("]")}),C(")")}function C(e){var t=e.length;y>R-t&&(x+="\n",B=!0,y=0,A=0),A+=t,y+=t,x+=e}function u(t){if(L){var i=t.loc.rownum,n=t.loc.colnum;Q.mappings+=(B?";":",")+e.evlq([A,0,i-p,n-G]),p=i,G=n,B=!1,A=0}}var m,p=0,G=0,A=18,y=18,B=!0,x="with(this){return(",v=F(t)?t:e.$parse(t),W=v.filename,X=v.body,Q={version:3,sources:[W],mappings:";AAAA"},R=e.$lineLength,L=e.btoa&&e.evlq&&W,H={},k={},f={};return X?i(X):C("null"),C(")}"),m=new Function("Elf",L?x+"\n//# sourceMappingURL=data:application/json;chatset=utf-8;base64,"+e.btoa(h(Q))+"\n//# sourceURL="+W+"!transpiled":x),b(l(arguments,1)).forEach(function(e){g(e,He)&&(H[e[He]]=e),g(e,ke)&&(k[e[ke]]=e),g(e,fe)&&(f[e[fe]]=e)}),function(){ye.push(H),Ze.push(k),Be.push(f);try{return m.call(Z(this||{}),e)}finally{ye.pop(),Ze.pop(),Be.pop()}}},e.forceUpdate=function(){return A()},e.depend=function(){b(l(arguments)).forEach(function(e){g(e,He)&&(he[e[He]]=e),g(e,ke)&&(Ge[e[ke]]=e),g(e,fe)&&(Ae[e[fe]]=e)})},e.render=function(e,t,i){function n(e){if(e.newly){for(;t.firstChild;)w(t.firstChild);J(t,e.value)}s(l,function(e){e()})}var c,l=[],a=Se(e,S(t)),o={forceUpdate:function(){n(a.renewal(r,g,l,e))},dispose:function(){c.dispose(),a.dispose()},duplex:!!i},r=t.ownerDocument,g=t.namespaceURI;return t.isDefaultNamespace(g)&&(g=null),n(a.initial(r,g,l)),c=G(o),o},e.assign=function(e){e=Object(e);for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);
}return e},e.$tag=function(e){return g(c(ye),e)?c(ye)[e]:g(he,e)?he[e]:e},e.$cmd=function(e){return b(n(e).split(ce).map(function(e){return g(c(Ze),e)?c(Ze)[e]:g(Ge,e)?Ge[e]:o(new Error("Invalid directive "+e))}))},e.$fit=function(e){function t(e,t,i){return e.transform.apply(e,[t].concat(l(i,1)))}return l(arguments,1).reduce(function(e,i){return g(c(Be),i[0])?t(Me(c(Be)[i[0]]),e,i):g(Ae,i[0])?t(Me(Ae[i[0]]),e,i):(o(new Error("Invalid transform "+i[0])),e)},e)},e.$map=function(e,t,i){if(L(e,gt)&&(e=e[ve]===D?e[We]:null),Array.isArray(e))return e.map(t,i);var n=[];for(var c in e)n.push(t.call(i,e[c],c,e));return n},e.$parse=function(t,i){function c(e){return B(t,"<!--",e)}function s(e){return B(t,"<!",e)&&k(/^doctype[\s>]/i,e+2,8)}function r(e){return B(t,"</",e)&&k(ee,e+2,1)}function d(e){return B(t,"<",e)&&k(ee,e+1,1)}function I(e){return Math.min(O,Y(t,"-->",e+4,J)+3)}function b(e){return Math.min(O,Y(t,">",e+9,J)+1)}function C(e){return Math.min(O,Y(t,">",e+3,J)+1)}function u(e){return Math.min(O,N(t,">",e+2,J)+1)}function m(e){return Math.min(O,Y(t,"<",e,V))}function p(e){return Math.min(O,Y(t,"\n",e,J)+1)}function h(e,t){}function G(e,i){P=l(t,e,i)}function A(e,i){var n=x(e+2,l(t,e+2,i-1));if(q&&Q(n.raw,"pre")&&q--,D&&Q(n.raw,"style")&&(D=!1),K&&Q(n.raw,"script")&&(K=!1),!g(Ce,a(n.raw)))for(;M&&_[--M].nodeName.raw!==n.raw;);}function y(e,i){var n=x(e+1,l(t,e+1,i-1)),c=!("/"===t.charAt(i-2)||g(Ce,a(n.raw)));c&&(Q(n.raw,"pre")&&q++,Q(n.raw,"style")?D=!0:Q(n.raw,"script")&&(K=!0));var o=e+1+n.raw.length,s=v(o,l(t,o,i-1));H({level:M,nodeType:1,nodeName:n,attributes:s.otherwise,condition:s.condition,iteration:s.iteration,children:[]},c)}function Z(i,c){if(c>i){var a=0,o=l(t,i,c);(0===M||e.$trimBlank&&0===q)&&(a=w(o),o=n(o)),a>=0&&H({level:M,nodeType:3,segments:D||K?[{computed:!1,input:f(i,o,!0)}]:L(i,o)})}}function x(e,t){var i=t.match(ee);return f(e+i.index,i[0],!0)}function v(t,i){for(var n,c,a,o,s,r,g=[];n=i.match(ie);i=l(i,n.index+n[0].length),t+=n[0].length)c=n[1],a=n[3]||n[4]||n[5]||"",t+=n.index,o=t+c.length,X(n[2])&&(o+=n[2].length),(X(n[3])||X(n[4]))&&(o+=1),c===e.$iteration?s=W(o,a):c===e.$condition?r=F(o,a):R(c)?g.push({name:f(t,c,!0),delegate:f(o,a),incident:!0}):g.push({name:f(t,c,!0),segments:L(o,a),incident:!1});return{iteration:s,condition:r,otherwise:g}}function W(e,t){var i=t.match(te);return i?{keys:f(e+i.index,i[1]),body:f(e+i.index+i[1].length+i[2].length,i[3])}:void o(new Error("Invalid iteration expression "+t))}function F(e,t){var i=w(t);return i>=0?f(e+i,n(t)):void 0}function L(e,t){function i(e,t){t&&a.push({computed:!1,input:f(e,t)})}function c(e,t){function i(e){return Math.min(I,N(t,ae,U(t,$,e),s))}function c(e,t){var i=w(t);i>=0&&(r=f(e+i,n(t)))}function o(e,t){function i(e){return Math.min(d,N(t,le,U(t,$,e),J))}function c(e,t){var i=w(t);i>=0&&(o=f(e+i,n(t)))}function a(e,t){var i=w(t);i>=0&&s.push(f(e+i,n(t)))}for(var o,s=[],r=0,d=t.length;d>r;r++)0===r?c(e+r,l(t,r,r=i(r))):a(e+r,l(t,r,r=i(r)));o&&g.push({name:o,arguments:s})}function s(e){return!S(t.charAt(e+1),ae)&&!S(t.charAt(e-1),ae)}for(var r,g=[],d=0,I=t.length;I>d;d++)0===d?c(e+d,l(t,d,d=i(d))):o(e+d,l(t,d,d=i(d)));r&&a.push({computed:!0,input:r,pipes:g})}for(var a=[],o=0,s=t.length,r=ce[0].length,g=ce[1].length,d=0,I=0-g;(d=t.indexOf(ce[0],I+g))>=0&&(I=t.indexOf(ce[1],d+r))>=0;o=I+g)d>o&&i(e+o,l(t,o,d)),I-r>d&&c(e+d+r,l(t,d+r,I));return s>o&&i(e+o,l(t,o,s)),a}function H(e,t){_[M]=e,M?_[M-1].children.push(e):j.push(e),t&&M++}function k(e,i,n){return e.test(l(t,i,i+n))}function f(e,t,i){for(var n=0,c=E.length;c>T;T++)if(e>=E[T][0]&&e<E[T][1]){n=e-E[T][0];break}return{loc:{rownum:T,colnum:n},raw:i?t:t.replace(ne,function(e,t,i,n){return t?Ie[t]||"&"+t+";":i?String.fromCharCode(parseInt(i,10)):n?String.fromCharCode(parseInt(n,16)):""})}}function V(e){return D?B(t,"</",e)&&k(/^style[\s>]/i,e+2,6):K?B(t,"</",e)&&k(/^script[\s>]/i,e+2,7):c(e)||s(e)||r(e)||d(e)}function J(){return!0}function w(e){return e.search($)}function U(e,t,i){for(var n=i||0,c=e.length;c>n&&!S(e.charAt(n),t);n++);return n}function Y(e,t,i,n){var c=e.length,l=e.indexOf(t,i);return 0>l?c:n(l)?l:Y(e,t,l+1,n)}function N(e,t,i,n){for(var c,l,a=0,o=0,s=0,r=!1,g=!1,d=i||0,I=e.length,b="\\";I>d;d++)if(c=l,l=e.charAt(d),r)"'"===l&&c!==b&&(r=!1);else if(g)'"'===l&&c!==b&&(g=!1);else if(0===a&&0===o&&0===s&&S(l,t)){if(n(d))break}else switch(l){case"{":a++;break;case"}":a--;break;case"(":o++;break;case")":o--;break;case"[":s++;break;case"]":s--;break;case"'":r=!0;break;case'"':g=!0}return d}function S(e,t){return t.test?t.test(e):t===e}var z,M=0,_=[],E=[],j=[],T=0,O=t.length,D=!1,K=!1,P="",q=0,ce=e.$expression;for(z=0;O>z;)E.push([z,z=p(z)]);for(z=0;O>z;)c(z)?h(z,z=I(z)):s(z)&&G(z,z=b(z)),r(z)?A(z,z=C(z)):d(z)?y(z,z=u(z)):Z(z,z=m(z));return j.length>1&&o(new Error("Cannot use multiple root node")),{body:j[0],doctype:P,filename:i}},e.$xhrFields={},e.$safeScope=!0,e.$trimBlank=!0,e.$condition="e-if",e.$iteration="e-for",e.$expression=["{{","}}"],e.$lineLength=32768,e.$eventStart="on",e._GLOBAL_METHOD_LAUNCHER_=S,e._GLOBAL_METHOD_LISTENER_=N,e._GLOBAL_SYMBOL_RENDERER_=Le}("undefined"!=typeof i?i:this.Elf={},"undefined"!=typeof Promise?Promise.resolve(0):{then:setTimeout.bind(null)},"undefined"==typeof history)},{}],9:[function(e,t,i){t.exports=function(e,t){var i=t||document;if(i.createStyleSheet){var n=i.createStyleSheet();return n.cssText=e,n.ownerNode}var c=i.getElementsByTagName("head")[0],l=i.createElement("style");return l.type="text/css",l.styleSheet?l.styleSheet.cssText=e:l.appendChild(i.createTextNode(e)),c.appendChild(l),l},t.exports.byUrl=function(e){if(document.createStyleSheet)return document.createStyleSheet(e).ownerNode;var t=document.getElementsByTagName("head")[0],i=document.createElement("link");return i.rel="stylesheet",i.href=e,t.appendChild(i),i}},{}],6:[function(e,t,i){arguments[4][4][0].apply(i,arguments)},{backbone:8,"backbone.babysitter":5,"backbone.wreqr":7,dup:4,underscore:42}],4:[function(e,t,i){!function(n,c){if("function"==typeof define&&define.amd)define(["backbone","underscore","backbone.wreqr","backbone.babysitter"],function(e,t){return n.Marionette=n.Mn=c(n,e,t)});else if("undefined"!=typeof i){var l=e("backbone"),a=e("underscore");e("backbone.wreqr"),e("backbone.babysitter");t.exports=c(n,l,a)}else n.Marionette=n.Mn=c(n,n.Backbone,n._)}(this,function(e,t,i){"use strict";var n=e.Marionette,c=e.Mn,l=t.Marionette={};l.VERSION="2.4.2",l.noConflict=function(){return e.Marionette=n,e.Mn=c,this},l.Deferred=t.$.Deferred,l.FEATURES={},l.isEnabled=function(e){return!!l.FEATURES[e]},l.extend=t.Model.extend,l.isNodeAttached=function(e){return t.$.contains(document.documentElement,e)},l.mergeOptions=function(e,t){e&&i.extend(this,i.pick(e,t))},l.getOption=function(e,t){return e&&t?e.options&&void 0!==e.options[t]?e.options[t]:e[t]:void 0},l.proxyGetOption=function(e){return l.getOption(this,e)},l._getValue=function(e,t,n){return i.isFunction(e)&&(e=n?e.apply(t,n):e.call(t)),e},l.normalizeMethods=function(e){return i.reduce(e,function(e,t,n){return i.isFunction(t)||(t=this[t]),t&&(e[n]=t),e},{},this)},l.normalizeUIString=function(e,t){return e.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(e){return t[e.slice(4)]})},l.normalizeUIKeys=function(e,t){return i.reduce(e,function(e,i,n){var c=l.normalizeUIString(n,t);return e[c]=i,e},{})},l.normalizeUIValues=function(e,t,n){return i.each(e,function(c,a){i.isString(c)?e[a]=l.normalizeUIString(c,t):i.isObject(c)&&i.isArray(n)&&(i.extend(c,l.normalizeUIValues(i.pick(c,n),t)),i.each(n,function(e){var n=c[e];i.isString(n)&&(c[e]=l.normalizeUIString(n,t))}))}),e},l.actAsCollection=function(e,t){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){e[n]=function(){var e=i.values(i.result(this,t)),c=[e].concat(i.toArray(arguments));return i[n].apply(i,c)}})};var a=l.deprecate=function(e,t){i.isObject(e)&&(e=e.prev+" is going to be removed in the future. Please use "+e.next+" instead."+(e.url?" See: "+e.url:"")),void 0!==t&&t||a._cache[e]||(a._warn("Deprecation warning: "+e),a._cache[e]=!0)};a._warn="undefined"!=typeof console&&(console.warn||console.log)||function(){},a._cache={},l._triggerMethod=function(){function e(e,t,i){return i.toUpperCase()}var t=/(^|:)(\w)/gi;return function(n,c,l){var a=arguments.length<3;a&&(l=c,c=l[0]);var o,s="on"+c.replace(t,e),r=n[s];return i.isFunction(r)&&(o=r.apply(n,a?i.rest(l):l)),i.isFunction(n.trigger)&&(a+l.length>1?n.trigger.apply(n,a?l:[c].concat(i.drop(l,0))):n.trigger(c)),o}}(),l.triggerMethod=function(e){return l._triggerMethod(this,arguments)},l.triggerMethodOn=function(e){var t=i.isFunction(e.triggerMethod)?e.triggerMethod:l.triggerMethod;return t.apply(e,i.rest(arguments))},l.MonitorDOMRefresh=function(e){function t(){e._isShown=!0,c()}function n(){e._isRendered=!0,c()}function c(){e._isShown&&e._isRendered&&l.isNodeAttached(e.el)&&i.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}e.on({show:t,render:n})},function(e){function t(t,n,c,l){var a=l.split(/\s+/);i.each(a,function(i){var l=t[i];if(!l)throw new e.Error('Method "'+i+'" was configured as an event handler, but does not exist.');t.listenTo(n,c,l)})}function n(e,t,i,n){e.listenTo(t,i,n)}function c(e,t,n,c){var l=c.split(/\s+/);i.each(l,function(i){var c=e[i];e.stopListening(t,n,c)})}function l(e,t,i,n){e.stopListening(t,i,n)}function a(t,n,c,l,a){if(n&&c){if(!i.isObject(c))throw new e.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});c=e._getValue(c,t),i.each(c,function(e,c){i.isFunction(e)?l(t,n,c,e):a(t,n,c,e)})}}e.bindEntityEvents=function(e,i,c){a(e,i,c,n,t)},e.unbindEntityEvents=function(e,t,i){a(e,t,i,l,c)},e.proxyBindEntityEvents=function(t,i){return e.bindEntityEvents(this,t,i)},e.proxyUnbindEntityEvents=function(t,i){return e.unbindEntityEvents(this,t,i)}}(l);var o=["description","fileName","lineNumber","name","message","number"];return l.Error=l.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+l.VERSION+"/",constructor:function(e,t){i.isObject(e)?(t=e,e=t.message):t||(t={});var n=Error.call(this,e);i.extend(this,i.pick(n,o),i.pick(t,o)),this.captureStackTrace(),t.url&&(this.url=this.urlRoot+t.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,l.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),l.Error.extend=l.extend,l.Callbacks=function(){this._deferred=l.Deferred(),this._callbacks=[]},i.extend(l.Callbacks.prototype,{add:function(e,t){var n=i.result(this._deferred,"promise");this._callbacks.push({cb:e,ctx:t}),n.then(function(i){t&&(i.context=t),e.call(i.context,i.options)})},run:function(e,t){this._deferred.resolve({options:e,context:t})},reset:function(){var e=this._callbacks;this._deferred=l.Deferred(),this._callbacks=[],i.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),l.Controller=function(e){this.options=e||{},i.isFunction(this.initialize)&&this.initialize(this.options)},l.Controller.extend=l.extend,i.extend(l.Controller.prototype,t.Events,{destroy:function(){return l._triggerMethod(this,"before:destroy",arguments),l._triggerMethod(this,"destroy",arguments),this.stopListening(),this.off(),this},triggerMethod:l.triggerMethod,mergeOptions:l.mergeOptions,getOption:l.proxyGetOption}),l.Object=function(e){this.options=i.extend({},i.result(this,"options"),e),this.initialize.apply(this,arguments)},l.Object.extend=l.extend,i.extend(l.Object.prototype,t.Events,{initialize:function(){},destroy:function(){return this.triggerMethod("before:destroy"),this.triggerMethod("destroy"),this.stopListening(),this},triggerMethod:l.triggerMethod,mergeOptions:l.mergeOptions,getOption:l.proxyGetOption,bindEntityEvents:l.proxyBindEntityEvents,unbindEntityEvents:l.proxyUnbindEntityEvents}),l.Region=l.Object.extend({constructor:function(e){if(this.options=e||{},this.el=this.getOption("el"),this.el=this.el instanceof t.$?this.el[0]:this.el,!this.el)throw new l.Error({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),l.Object.call(this,e)},show:function(e,t){if(this._ensureElement()){this._ensureViewIsIntact(e);var n=t||{},c=e!==this.currentView,a=!!n.preventDestroy,o=!!n.forceShow,s=!!this.currentView,r=c&&!a,g=c||o;if(s&&this.triggerMethod("before:swapOut",this.currentView,this,t),this.currentView&&delete this.currentView._parent,r?this.empty():s&&g&&this.currentView.off("destroy",this.empty,this),g){e.once("destroy",this.empty,this),e.isRendered||e.render(),e._parent=this,s&&this.triggerMethod("before:swap",e,this,t),this.triggerMethod("before:show",e,this,t),l.triggerMethodOn(e,"before:show",e,this,t),s&&this.triggerMethod("swapOut",this.currentView,this,t);var d=l.isNodeAttached(this.el),I=[],b=i.extend({triggerBeforeAttach:this.triggerBeforeAttach,triggerAttach:this.triggerAttach},n);return d&&b.triggerBeforeAttach&&(I=this._displayedViews(e),this._triggerAttach(I,"before:")),this.attachHtml(e),this.currentView=e,d&&b.triggerAttach&&(I=this._displayedViews(e),this._triggerAttach(I)),s&&this.triggerMethod("swap",e,this,t),this.triggerMethod("show",e,this,t),l.triggerMethodOn(e,"show",e,this,t),this}return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(e,t){var n=(t||"")+"attach";i.each(e,function(e){l.triggerMethodOn(e,n,e,this)},this)},_displayedViews:function(e){return i.union([e],i.result(e,"_getNestedViews")||[])},_ensureElement:function(){if(i.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;throw new l.Error('An "el" '+this.$el.selector+" must exist in DOM")}return!0},_ensureViewIsIntact:function(e){if(!e)throw new l.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(e.isDestroyed)throw new l.Error({name:"ViewDestroyedError",message:'View (cid: "'+e.cid+'") has already been destroyed and cannot be used.'})},getEl:function(e){return t.$(e,l._getValue(this.options.parentEl,this))},attachHtml:function(e){this.$el.contents().detach(),this.el.appendChild(e.el)},empty:function(e){var t=this.currentView,i=l._getValue(e,"preventDestroy",this);return t?(t.off("destroy",this.empty,this),this.triggerMethod("before:empty",t),i||this._destroyView(),this.triggerMethod("empty",t),delete this.currentView,i&&this.$el.contents().detach(),this):void 0},_destroyView:function(){var e=this.currentView;e.destroy&&!e.isDestroyed?e.destroy():e.remove&&(e.remove(),e.isDestroyed=!0)},attachView:function(e){return this.currentView=e,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this}},{buildRegion:function(e,t){if(i.isString(e))return this._buildRegionFromSelector(e,t);if(e.selector||e.el||e.regionClass)return this._buildRegionFromObject(e,t);if(i.isFunction(e))return this._buildRegionFromRegionClass(e);throw new l.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(e,t){return new t({el:e})},_buildRegionFromObject:function(e,t){var n=e.regionClass||t,c=i.omit(e,"selector","regionClass");return e.selector&&!c.el&&(c.el=e.selector),new n(c)},_buildRegionFromRegionClass:function(e){return new e}}),l.RegionManager=l.Controller.extend({constructor:function(e){this._regions={},this.length=0,l.Controller.call(this,e),this.addRegions(this.getOption("regions"))},addRegions:function(e,t){return e=l._getValue(e,this,arguments),i.reduce(e,function(e,n,c){return i.isString(n)&&(n={selector:n}),n.selector&&(n=i.defaults({},n,t)),e[c]=this.addRegion(c,n),e},{},this)},addRegion:function(e,t){var i;return i=t instanceof l.Region?t:l.Region.buildRegion(t,l.Region),this.triggerMethod("before:add:region",e,i),i._parent=this,this._store(e,i),this.triggerMethod("add:region",e,i),i},get:function(e){return this._regions[e]},getRegions:function(){return i.clone(this._regions)},removeRegion:function(e){var t=this._regions[e];return this._remove(e,t),t},removeRegions:function(){var e=this.getRegions();return i.each(this._regions,function(e,t){this._remove(t,e)},this),e},emptyRegions:function(){var e=this.getRegions();return i.invoke(e,"empty"),e},destroy:function(){return this.removeRegions(),l.Controller.prototype.destroy.apply(this,arguments)},_store:function(e,t){this._regions[e]||this.length++,this._regions[e]=t},_remove:function(e,t){this.triggerMethod("before:remove:region",e,t),t.empty(),t.stopListening(),delete t._parent,delete this._regions[e],this.length--,this.triggerMethod("remove:region",e,t)}}),l.actAsCollection(l.RegionManager.prototype,"_regions"),l.TemplateCache=function(e){this.templateId=e},i.extend(l.TemplateCache,{templateCaches:{},get:function(e,t){var i=this.templateCaches[e];return i||(i=new l.TemplateCache(e),this.templateCaches[e]=i),i.load(t)},clear:function(){var e,t=i.toArray(arguments),n=t.length;if(n>0)for(e=0;n>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),i.extend(l.TemplateCache.prototype,{load:function(e){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId,e);return this.compiledTemplate=this.compileTemplate(t,e),this.compiledTemplate},loadTemplate:function(e,i){var n=t.$(e).html();if(!n||0===n.length)throw new l.Error({name:"NoTemplateError",message:'Could not find template: "'+e+'"'});return n},compileTemplate:function(e,t){return i.template(e,t)}}),l.Renderer={render:function(e,t){if(!e)throw new l.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});var n=i.isFunction(e)?e:l.TemplateCache.get(e);return n(t)}},l.View=t.View.extend({isDestroyed:!1,constructor:function(e){i.bindAll(this,"render"),e=l._getValue(e,this),this.options=i.extend({},i.result(this,"options"),e),this._behaviors=l.Behaviors(this),t.View.call(this,this.options),l.MonitorDOMRefresh(this)},getTemplate:function(){return this.getOption("template")},serializeModel:function(e){return e.toJSON.apply(e,i.rest(arguments))},mixinTemplateHelpers:function(e){e=e||{};var t=this.getOption("templateHelpers");return t=l._getValue(t,this),i.extend(e,t)},normalizeUIKeys:function(e){var t=i.result(this,"_uiBindings");return l.normalizeUIKeys(e,t||i.result(this,"ui"))},normalizeUIValues:function(e,t){var n=i.result(this,"ui"),c=i.result(this,"_uiBindings");return l.normalizeUIValues(e,c||n,t)},configureTriggers:function(){if(this.triggers){var e=this.normalizeUIKeys(i.result(this,"triggers"));return i.reduce(e,function(e,t,i){return e[i]=this._buildViewTrigger(t),e},{},this)}},delegateEvents:function(e){return this._delegateDOMEvents(e),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(e){e.bindEntityEvents(this.model,e.getOption("modelEvents")),e.bindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(e){var n=l._getValue(e||this.events,this);n=this.normalizeUIKeys(n),i.isUndefined(e)&&(this.events=n);var c={},a=i.result(this,"behaviorEvents")||{},o=this.configureTriggers(),s=i.result(this,"behaviorTriggers")||{};i.extend(c,a,n,o,s),t.View.prototype.delegateEvents.call(this,c)},undelegateEvents:function(){return t.View.prototype.undelegateEvents.apply(this,arguments),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(e){e.unbindEntityEvents(this.model,e.getOption("modelEvents")),e.unbindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new l.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(this.isDestroyed)return this;var e=i.toArray(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(e)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(e)),this.unbindUIElements(),this.isRendered=!1,this.remove(),i.invoke(this._behaviors,"destroy",e),this},bindUIElements:function(){this._bindUIElements(),i.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=i.result(this,"_uiBindings");this.ui={},i.each(e,function(e,t){this.ui[t]=this.$(e)},this)}},unbindUIElements:function(){this._unbindUIElements(),i.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(e){var t=i.isObject(e),n=i.defaults({},t?e:{},{preventDefault:!0,stopPropagation:!0}),c=t?n.event:e;return function(e){e&&(e.preventDefault&&n.preventDefault&&e.preventDefault(),e.stopPropagation&&n.stopPropagation&&e.stopPropagation());var t={view:this,model:this.model,collection:this.collection};this.triggerMethod(c,t)}},setElement:function(){var e=t.View.prototype.setElement.apply(this,arguments);return i.invoke(this._behaviors,"proxyViewProperties",this),e},triggerMethod:function(){var e=l._triggerMethod(this,arguments);return this._triggerEventOnBehaviors(arguments),this._triggerEventOnParentLayout(arguments[0],i.rest(arguments)),e},_triggerEventOnBehaviors:function(e){for(var t=l._triggerMethod,i=this._behaviors,n=0,c=i&&i.length;c>n;n++)t(i[n],e)},_triggerEventOnParentLayout:function(e,t){var n=this._parentLayoutView();if(n){var c=l.getOption(n,"childViewEventPrefix"),a=c+":"+e;l._triggerMethod(n,[a,this].concat(t));var o=l.getOption(n,"childEvents"),s=n.normalizeMethods(o);s&&i.isFunction(s[e])&&s[e].apply(n,[this].concat(t))}},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var e=this._getImmediateChildren();return e.length?i.reduce(e,function(e,t){return t._getNestedViews?e.concat(t._getNestedViews()):e},e):e},_getAncestors:function(){for(var e=[],t=this._parent;t;)e.push(t),t=t._parent;return e},_parentLayoutView:function(){var e=this._getAncestors();return i.find(e,function(e){return e instanceof l.LayoutView})},normalizeMethods:l.normalizeMethods,mergeOptions:l.mergeOptions,getOption:l.proxyGetOption,bindEntityEvents:l.proxyBindEntityEvents,unbindEntityEvents:l.proxyUnbindEntityEvents}),l.ItemView=l.View.extend({constructor:function(){l.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var e=[this.model||this.collection];return arguments.length&&e.push.apply(e,arguments),this.model?this.serializeModel.apply(this,e):{items:this.serializeCollection.apply(this,e)}},serializeCollection:function(e){return e.toJSON.apply(e,i.rest(arguments))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.isRendered=!0,this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var e=this.getTemplate();if(e!==!1){if(!e)throw new l.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var t=this.mixinTemplateHelpers(this.serializeData()),i=l.Renderer.render(e,t,this);return this.attachElContent(i),this}},attachElContent:function(e){return this.$el.contents().detach(),this.$el.html(e),this}}),l.CollectionView=l.View.extend({childViewEventPrefix:"childview",sort:!0,constructor:function(e){this.once("render",this._initialEvents),this._initChildViewStorage(),l.View.apply(this,arguments),this.on({"before:show":this._onBeforeShowCalled,show:this._onShowCalled,"before:attach":this._onBeforeAttachCalled,attach:this._onAttachCalled}),this.initRenderBuffer()},initRenderBuffer:function(){this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){var e,t=this._isShown&&l.isNodeAttached(this.el);this.isBuffering=!1,this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"before:show"),t&&this._triggerBeforeAttach&&(e=this._getNestedViews(),this._triggerMethodMany(e,this,"before:attach")),this.attachBuffer(this,this._createBuffer()),t&&this._triggerAttach&&(e=this._getNestedViews(),this._triggerMethodMany(e,this,"attach")),this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"show"),this.initRenderBuffer()},_triggerMethodMany:function(e,t,n){var c=i.drop(arguments,3);i.each(e,function(e){l.triggerMethodOn.apply(e,[e,n,e,t].concat(c))})},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(e,t,n){var c;if(c=void 0!==n.at?n.at:i.indexOf(this._filteredSortedModels(),e),this._shouldAddChild(e,c)){this.destroyEmptyView();var l=this.getChildView(e);this.addChild(e,l,c)}},_onCollectionRemove:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},_onBeforeShowCalled:function(){this._triggerBeforeAttach=this._triggerAttach=!1,this.children.each(function(e){l.triggerMethodOn(e,"before:show",e)})},_onShowCalled:function(){this.children.each(function(e){l.triggerMethodOn(e,"show",e)})},_onBeforeAttachCalled:function(){this._triggerBeforeAttach=!0},_onAttachCalled:function(){this._triggerAttach=!0},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.isRendered=!0,this.triggerMethod("render",this),this},reorder:function(){var e=this.children,t=this._filteredSortedModels(),n=i.find(t,function(t){return!e.findByModel(t)});if(n)this.render();else{var c=i.map(t,function(t,i){var n=e.findByModel(t);return n._index=i,n.el});this.triggerMethod("before:reorder"),this._appendReorderedChildren(c),this.triggerMethod("reorder")}},resortView:function(){l.getOption(this,"reorderOnSort")?this.reorder():this.render()},_sortViews:function(){var e=this._filteredSortedModels(),t=i.find(e,function(e,t){var i=this.children.findByModel(e);return!i||i._index!==t},this);t&&this.resortView()},_emptyViewIndex:-1,_appendReorderedChildren:function(e){this.$el.append(e)},_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren({checkEmpty:!1}),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this),this.children.isEmpty()&&this.showEmptyView())},showCollection:function(){var e,t=this._filteredSortedModels();i.each(t,function(t,i){e=this.getChildView(t),this.addChild(t,e,i)},this)},_filteredSortedModels:function(){var e,t=this.getViewComparator();return e=t?i.isString(t)||1===t.length?this.collection.sortBy(t,this):i.clone(this.collection.models).sort(i.bind(t,this)):this.collection.models,this.getOption("filter")&&(e=i.filter(e,function(e,t){return this._shouldAddChild(e,t)},this)),e},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var i=new t.Model;this.addEmptyView(i,e),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(e,t){var n,c=this._isShown&&!this.isBuffering&&l.isNodeAttached(this.el),a=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");i.isFunction(a)&&(a=a.call(this,e,this._emptyViewIndex));var o=this.buildChildView(e,t,a);o._parent=this,this.proxyChildEvents(o),this._isShown&&l.triggerMethodOn(o,"before:show",o),this.children.add(o),c&&this._triggerBeforeAttach&&(n=[o].concat(o._getNestedViews()),o.once("render",function(){this._triggerMethodMany(n,this,"before:attach")},this)),this.renderChildView(o,this._emptyViewIndex),c&&this._triggerAttach&&(n=[o].concat(o._getNestedViews()),this._triggerMethodMany(n,this,"attach")),this._isShown&&l.triggerMethodOn(o,"show",o)},getChildView:function(e){var t=this.getOption("childView");if(!t)throw new l.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return t},addChild:function(e,t,i){var n=this.getOption("childViewOptions");n=l._getValue(n,this,[e,i]);var c=this.buildChildView(e,t,n);return this._updateIndices(c,!0,i),this.triggerMethod("before:add:child",c),this._addChildView(c,i),this.triggerMethod("add:child",c),c._parent=this,c},_updateIndices:function(e,t,i){this.getOption("sort")&&(t&&(e._index=i),this.children.each(function(i){i._index>=e._index&&(i._index+=t?1:-1)}))},_addChildView:function(e,t){var i,n=this._isShown&&!this.isBuffering&&l.isNodeAttached(this.el);this.proxyChildEvents(e),this._isShown&&!this.isBuffering&&l.triggerMethodOn(e,"before:show",e),this.children.add(e),n&&this._triggerBeforeAttach&&(i=[e].concat(e._getNestedViews()),e.once("render",function(){this._triggerMethodMany(i,this,"before:attach")},this)),this.renderChildView(e,t),n&&this._triggerAttach&&(i=[e].concat(e._getNestedViews()),this._triggerMethodMany(i,this,"attach")),this._isShown&&!this.isBuffering&&l.triggerMethodOn(e,"show",e)},renderChildView:function(e,t){return e.render(),this.attachHtml(this,e,t),e},buildChildView:function(e,t,n){var c=i.extend({model:e},n);return new t(c)},removeChildView:function(e){return e&&(this.triggerMethod("before:remove:child",e),e.destroy?e.destroy():e.remove&&e.remove(),delete e._parent,this.stopListening(e),this.children.remove(e),this.triggerMethod("remove:child",e),this._updateIndices(e,!1)),e},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(e,t){e.$el.append(t)},_createBuffer:function(){var e=document.createDocumentFragment();return i.each(this._bufferedChildren,function(t){e.appendChild(t.el)}),e},attachHtml:function(e,t,i){e.isBuffering?e._bufferedChildren.splice(i,0,t):e._insertBefore(t,i)||e._insertAfter(t)},_insertBefore:function(e,t){var i,n=this.getOption("sort")&&t<this.children.length-1;return n&&(i=this.children.find(function(e){return e._index===t+1})),i?(i.$el.before(e.el),!0):!1},_insertAfter:function(e){this.$el.append(e.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},destroy:function(){return this.isDestroyed?this:(this.triggerMethod("before:destroy:collection"),this.destroyChildren({checkEmpty:!1}),this.triggerMethod("destroy:collection"),l.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(e){var t=e||{},n=!0,c=this.children.map(i.identity);return i.isUndefined(t.checkEmpty)||(n=t.checkEmpty),this.children.each(this.removeChildView,this),n&&this.checkEmpty(),c},_shouldAddChild:function(e,t){var n=this.getOption("filter");return!i.isFunction(n)||n.call(this,e,t,this.collection)},proxyChildEvents:function(e){var t=this.getOption("childViewEventPrefix");this.listenTo(e,"all",function(){var n=i.toArray(arguments),c=n[0],l=this.normalizeMethods(i.result(this,"childEvents"));n[0]=t+":"+c,n.splice(1,0,e),"undefined"!=typeof l&&i.isFunction(l[c])&&l[c].apply(this,n.slice(1)),this.triggerMethod.apply(this,n)})},_getImmediateChildren:function(){return i.values(this.children._views)},getViewComparator:function(){return this.getOption("viewComparator")}}),l.CompositeView=l.CollectionView.extend({constructor:function(){l.CollectionView.apply(this,arguments);
},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(e){var t=this.getOption("childView")||this.constructor;return t},serializeData:function(){var e={};return this.model&&(e=i.partial(this.serializeModel,this.model).apply(this,arguments)),e},render:function(){return this._ensureViewIsIntact(),this._isRendering=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this._isRendering=!1,this.isRendered=!0,this.triggerMethod("render",this),this},_renderChildren:function(){(this.isRendered||this._isRendering)&&l.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e),this.triggerMethod("before:render:template");var t=this.getTemplate(),i=l.Renderer.render(t,e,this);this.attachElContent(i),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(e){return this.$el.html(e),this},attachBuffer:function(e,t){var i=this.getChildViewContainer(e);i.append(t)},_insertAfter:function(e){var t=this.getChildViewContainer(this,e);t.append(e.el)},_appendReorderedChildren:function(e){var t=this.getChildViewContainer(this);t.append(e)},getChildViewContainer:function(e,t){if(e.$childViewContainer)return e.$childViewContainer;var i,n=l.getOption(e,"childViewContainer");if(n){var c=l._getValue(n,e);if(i="@"===c.charAt(0)&&e.ui?e.ui[c.substr(4)]:e.$(c),i.length<=0)throw new l.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+e.childViewContainer})}else i=e.$el;return e.$childViewContainer=i,i},resetChildViewContainer:function(){this.$childViewContainer&&(this.$childViewContainer=void 0)}}),l.LayoutView=l.ItemView.extend({regionClass:l.Region,options:{destroyImmediate:!1},childViewEventPrefix:"childview",constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),l.ItemView.call(this,e)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),l.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.getOption("destroyImmediate")===!0&&this.$el.remove(),this.regionManager.destroy(),l.ItemView.prototype.destroy.apply(this,arguments))},showChildView:function(e,t){return this.getRegion(e).show(t)},getChildView:function(e){return this.getRegion(e).currentView},addRegion:function(e,t){var i={};return i[e]=t,this._buildRegions(i)[e]},addRegions:function(e){return this.regions=i.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},getRegion:function(e){return this.regionManager.get(e)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(e){var t={regionClass:this.getOption("regionClass"),parentEl:i.partial(i.result,this,"el")};return this.regionManager.addRegions(e,t)},_initializeRegions:function(e){var t;this._initRegionManager(),t=l._getValue(this.regions,this,[e])||{};var n=this.getOption.call(e,"regions");n=l._getValue(n,this,[e]),i.extend(t,n),t=this.normalizeUIValues(t,["selector","el"]),this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new l.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.regionManager._parent=this,this.listenTo(this.regionManager,"before:add:region",function(e){this.triggerMethod("before:add:region",e)}),this.listenTo(this.regionManager,"add:region",function(e,t){this[e]=t,this.triggerMethod("add:region",e,t)}),this.listenTo(this.regionManager,"before:remove:region",function(e){this.triggerMethod("before:remove:region",e)}),this.listenTo(this.regionManager,"remove:region",function(e,t){delete this[e],this.triggerMethod("remove:region",e,t)})},_getImmediateChildren:function(){return i.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}}),l.Behavior=l.Object.extend({constructor:function(e,t){this.view=t,this.defaults=i.result(this,"defaults")||{},this.options=i.extend({},this.defaults,e),this.ui=i.extend({},i.result(t,"ui"),i.result(this,"ui")),l.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){return this.stopListening(),this},proxyViewProperties:function(e){this.$el=e.$el,this.el=e.el}}),l.Behaviors=function(e,t){function i(e,n){return t.isObject(e.behaviors)?(n=i.parseBehaviors(e,n||t.result(e,"behaviors")),i.wrap(e,n,t.keys(a)),n):{}}function n(e,t){this._view=e,this._behaviors=t,this._triggers={}}function c(e){return e._uiBindings||e.ui}var l=/^(\S+)\s*(.*)$/,a={behaviorTriggers:function(e,t){var i=new n(this,t);return i.buildBehaviorTriggers()},behaviorEvents:function(i,n){var a={};return t.each(n,function(i,n){var o={},s=t.clone(t.result(i,"events"))||{};s=e.normalizeUIKeys(s,c(i));var r=0;t.each(s,function(e,c){var a=c.match(l),s=a[1]+"."+[this.cid,n,r++," "].join(""),g=a[2],d=s+g,I=t.isFunction(e)?e:i[e];o[d]=t.bind(I,i)},this),a=t.extend(a,o)},this),a}};return t.extend(i,{behaviorsLookup:function(){throw new e.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(t,n){return t.behaviorClass?t.behaviorClass:e._getValue(i.behaviorsLookup,this,[t,n])[n]},parseBehaviors:function(e,n){return t.chain(n).map(function(n,c){var l=i.getBehaviorClass(n,c),a=new l(n,e),o=i.parseBehaviors(e,t.result(a,"behaviors"));return[a].concat(o)}).flatten().value()},wrap:function(e,i,n){t.each(n,function(n){e[n]=t.partial(a[n],e[n],i)})}}),t.extend(n.prototype,{buildBehaviorTriggers:function(){return t.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(i,n){var l=t.clone(t.result(i,"triggers"))||{};l=e.normalizeUIKeys(l,c(i)),t.each(l,t.bind(this._setHandlerForBehavior,this,i,n))},_setHandlerForBehavior:function(e,t,i,n){var c=n.replace(/^\S+/,function(e){return e+".behaviortriggers"+t});this._triggers[c]=this._view._buildViewTrigger(i)}}),i}(l,i),l.AppRouter=t.Router.extend({constructor:function(e){this.options=e||{},t.Router.apply(this,arguments);var i=this.getOption("appRoutes"),n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute:function(e,t){var i=this._getController();this._addAppRoute(i,e,t)},_processOnRoute:function(e,t){if(i.isFunction(this.onRoute)){var n=i.invert(this.getOption("appRoutes"))[e];this.onRoute(e,n,t)}},processAppRoutes:function(e,t){if(t){var n=i.keys(t).reverse();i.each(n,function(i){this._addAppRoute(e,i,t[i])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(e,t,n){var c=e[n];if(!c)throw new l.Error('Method "'+n+'" was not found on the controller');this.route(t,n,i.bind(c,e))},mergeOptions:l.mergeOptions,getOption:l.proxyGetOption,triggerMethod:l.triggerMethod,bindEntityEvents:l.proxyBindEntityEvents,unbindEntityEvents:l.proxyUnbindEntityEvents}),l.Application=l.Object.extend({constructor:function(e){this._initializeRegions(e),this._initCallbacks=new l.Callbacks,this.submodules={},i.extend(this,e),this._initChannel(),l.Object.call(this,e)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("before:start",e),this._initCallbacks.run(e,this),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(e){return this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},getRegions:function(){return this._regionManager.getRegions()},module:function(e,t){var n=l.Module.getClass(t),c=i.toArray(arguments);return c.unshift(this),n.create.apply(n,c)},getRegionManager:function(){return new l.RegionManager},_initializeRegions:function(e){var t=i.isFunction(this.regions)?this.regions(e):this.regions||{};this._initRegionManager();var n=l.getOption(e,"regions");return i.isFunction(n)&&(n=n.call(this,e)),i.extend(t,n),this.addRegions(t),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this._regionManager._parent=this,this.listenTo(this._regionManager,"before:add:region",function(){l._triggerMethod(this,"before:add:region",arguments)}),this.listenTo(this._regionManager,"add:region",function(e,t){this[e]=t,l._triggerMethod(this,"add:region",arguments)}),this.listenTo(this._regionManager,"before:remove:region",function(){l._triggerMethod(this,"before:remove:region",arguments)}),this.listenTo(this._regionManager,"remove:region",function(e){delete this[e],l._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=i.result(this,"channelName")||"global",this.channel=i.result(this,"channel")||t.Wreqr.radio.channel(this.channelName),this.vent=i.result(this,"vent")||this.channel.vent,this.commands=i.result(this,"commands")||this.channel.commands,this.reqres=i.result(this,"reqres")||this.channel.reqres}}),l.Module=function(e,t,n){this.moduleName=e,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,i.isFunction(this.initialize)&&this.initialize(e,t,this.options)},l.Module.extend=l.extend,i.extend(l.Module.prototype,t.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(i.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),i.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,n){if(e){var c=i.flatten([this,this.app,t,l,t.$,i,n]);e.apply(this,c)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new l.Callbacks,this._finalizerCallbacks=new l.Callbacks},triggerMethod:l.triggerMethod}),i.extend(l.Module,{create:function(e,t,n){var c=e,l=i.drop(arguments,3);t=t.split(".");var a=t.length,o=[];return o[a-1]=n,i.each(t,function(t,i){var a=c;c=this._getModule(a,t,e,n),this._addModuleDefinition(a,c,o[i],l)},this),c},_getModule:function(e,t,n,c,l){var a=i.extend({},c),o=this.getClass(c),s=e[t];return s||(s=new o(t,n,a),e[t]=s,e.submodules[t]=s),s},getClass:function(e){var t=l.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,i,n){var c=this._getDefine(i),l=this._getStartWithParent(i,t);c&&t.addDefinition(c,n),this._addStartWithParent(e,t,l)},_getStartWithParent:function(e,t){var n;return i.isFunction(e)&&e.prototype instanceof l.Module?(n=t.constructor.prototype.startWithParent,i.isUndefined(n)?!0:n):i.isObject(e)?(n=e.startWithParent,i.isUndefined(n)?!0:n):!0},_getDefine:function(e){return!i.isFunction(e)||e.prototype instanceof l.Module?i.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,i){t.startWithParent=t.startWithParent&&i,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),l})},{backbone:8,"backbone.babysitter":5,"backbone.wreqr":7,underscore:42}],7:[function(e,t,i){!function(n,c){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(e,t){return c(e,t)});else if("undefined"!=typeof i){var l=e("backbone"),a=e("underscore");t.exports=c(l,a)}else c(n.Backbone,n._)}(this,function(e,t){"use strict";var i=e.Wreqr,n=e.Wreqr={};return e.Wreqr.VERSION="1.4.0",e.Wreqr.noConflict=function(){return e.Wreqr=i,this},n.Handlers=function(e,t){var i=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events,{setHandlers:function(e){t.each(e,t.bind(function(e,i){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(i,e,n)},this))},setHandler:function(e,t,i){var n={callback:t,context:i};this._wreqrHandlers[e]=n,this.trigger("handler:add",e,t,i)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(t)return function(){return t.callback.apply(t.context,arguments)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(e,t),n.CommandStorage=function(){var i=function(e){this.options=e,this._commands={},t.isFunction(this.initialize)&&this.initialize(e)};return t.extend(i.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var i=this.getCommands(e);i.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),i}(),n.Commands=function(e,t){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this),e.Handlers.prototype.constructor.apply(this,arguments)},execute:function(e){e=arguments[0];var i=t.rest(arguments);this.hasHandler(e)?this.getHandler(e).apply(this,i):this.storage.addCommand(e,i)},_executeCommands:function(e,i,n){var c=this.storage.getCommands(e);t.each(c.instances,function(e){i.apply(n,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var i,n=e.storageType||this.storageType;i=t.isFunction(n)?new n:n,this.storage=i}})}(n,t),n.RequestResponse=function(e,t){return e.Handlers.extend({request:function(e){return this.hasHandler(e)?this.getHandler(e).apply(this,t.rest(arguments)):void 0}})}(n,t),n.EventAggregator=function(e,t){var i=function(){};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events),i}(e,t),n.Channel=function(i){var n=function(t){this.vent=new e.Wreqr.EventAggregator,this.reqres=new e.Wreqr.RequestResponse,this.commands=new e.Wreqr.Commands,this.channelName=t};return t.extend(n.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(e,t){return this._connect("vent",e,t),this},connectCommands:function(e,t){return this._connect("commands",e,t),this},connectRequests:function(e,t){return this._connect("reqres",e,t),this},_connect:function(e,i,n){if(i){n=n||this;var c="vent"===e?"on":"setHandler";t.each(i,t.bind(function(i,l){this[e][c](l,t.bind(i,n))},this))}}}),n}(n),n.radio=function(e,t){var i=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};t.extend(i.prototype,{channel:function(e){if(!e)throw new Error("Channel must receive a name");return this._getChannel(e)},_getChannel:function(t){var i=this._channels[t];return i||(i=new e.Channel(t),this._channels[t]=i),i},_proxyMethods:function(){t.each(["vent","commands","reqres"],t.bind(function(e){t.each(n[e],t.bind(function(t){this[e][t]=c(this,e,t)},this))},this))}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},c=function(e,i,n){return function(c){var l=e._getChannel(c)[i];return l[n].apply(l,t.rest(arguments))}};return new i}(n,t),e.Wreqr})},{backbone:8,underscore:42}],5:[function(e,t,i){!function(n,c){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(e,t){return c(e,t)});else if("undefined"!=typeof i){var l=e("backbone"),a=e("underscore");t.exports=c(l,a)}else c(n.Backbone,n._)}(this,function(e,t){"use strict";var i=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(i.prototype,{add:function(e,t){var i=e.cid;return this._views[i]=e,e.model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===i?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[i],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,i){t.each(this._views,function(n){t.isFunction(n[e])&&n[e].apply(n,i||[])})},_updateLength:function(){this.length=t.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return t.each(n,function(e){i.prototype[e]=function(){var i=t.values(this._views),n=[i].concat(t.toArray(arguments));return t[e].apply(t,n)}}),i}(e,t),e.ChildViewContainer.VERSION="0.1.11",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=i,this},e.ChildViewContainer})},{backbone:8,underscore:42}],3:[function(e,t,i){!function(n){"object"==typeof i?t.exports=n(e("backbone"),e("underscore")):"function"==typeof define&&define.amd&&define(["backbone","underscore"],n)}(function(e,t){return e.Validation=function(e){"use strict";var t={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},i={formatLabel:function(e,i){return s[t.labelFormatter](e,i)},format:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.replace(/\{(\d+)\}/g,function(t,i){return"undefined"!=typeof e[i]?e[i]:t})}},n=function(t,i,c){return i=i||{},c=c||"",e.each(t,function(l,a){t.hasOwnProperty(a)&&(l&&e.isArray(l)?e.forEach(l,function(e,t){n(e,i,c+a+"."+t+"."),i[c+a+"."+t]=e}):l&&"object"==typeof l&&l.constructor===Object&&n(l,i,c+a+"."),i[c+a]=l)}),i},c=function(){var c=function(t,i){return i=i||e.keys(e.result(t,"validation")||{}),e.reduce(i,function(e,t){return e[t]=void 0,e},{})},a=function(t,i){var n=t.attributes;return e.isFunction(n)?n=n(i):e.isString(n)&&e.isFunction(r[n])&&(n=r[n](i)),e.isArray(n)?n:void 0},o=function(t,i){var n=t.validation?e.result(t,"validation")[i]||{}:{};return(e.isFunction(n)||e.isString(n))&&(n={fn:n}),e.isArray(n)||(n=[n]),e.reduce(n,function(t,i){return e.each(e.without(e.keys(i),"msg"),function(e){t.push({fn:g[e],val:i[e],msg:i.msg})}),t},[])},s=function(t,n,c,l){return e.reduce(o(t,n),function(a,o){var s=e.extend({},i,g),r=o.fn.call(s,c,n,o.val,t,l);return r===!1||a===!1?!1:r&&!a?e.result(o,"msg")||r:a},"")},d=function(t,i,n){var c,l={},a=!0,o=e.clone(i);return e.each(n,function(e,i){c=s(t,i,e,o),c&&(l[i]=c,a=!1)}),{invalidAttrs:l,isValid:a}},I=function(t,i){return{preValidate:function(t,i){var n,c=this,l={};return e.isObject(t)?(e.each(t,function(e,t){n=c.preValidate(t,e),n&&(l[t]=n)}),e.isEmpty(l)?void 0:l):s(this,t,i,e.extend({},this.attributes))},isValid:function(c){var l,o,r,g;return c=c||a(i,t),e.isString(c)?o=[c]:e.isArray(c)&&(o=c),o&&(l=n(this.attributes),e.each(this.associatedViews,function(t){e.each(o,function(n){r=s(this,n,l[n],e.extend({},this.attributes)),r?(i.invalid(t,n,r,i.selector),g=g||{},g[n]=r):i.valid(t,n,i.selector)},this)},this)),c===!0&&(g=this.validate()),g&&this.trigger("invalid",this,g,{validationError:g}),o?!g:this.validation?this._isValid:!0},validate:function(l,o){var s=this,r=!l,g=e.extend({},i,o),I=c(s,a(i,t)),b=e.extend({},I,s.attributes,l),C=n(b),u=l?n(l):C,m=d(s,b,e.pick(C,e.keys(I)));return s._isValid=m.isValid,e.each(s.associatedViews,function(t){e.each(I,function(e,i){var n=m.invalidAttrs.hasOwnProperty(i),c=u.hasOwnProperty(i);n||g.valid(t,i,g.selector),n&&(c||r)&&g.invalid(t,i,m.invalidAttrs[i],g.selector)})}),e.defer(function(){s.trigger("validated",s._isValid,s,m.invalidAttrs),s.trigger("validated:"+(s._isValid?"valid":"invalid"),s,m.invalidAttrs)}),!g.forceUpdate&&e.intersection(e.keys(m.invalidAttrs),e.keys(u)).length>0?m.invalidAttrs:void 0}}},b=function(t,i,n){i.associatedViews?i.associatedViews.push(t):i.associatedViews=[t],e.extend(i,I(t,n))},C=function(t,i){i&&t.associatedViews&&t.associatedViews.length>1?t.associatedViews=e.without(t.associatedViews,i):(delete t.validate,delete t.preValidate,delete t.isValid,delete t.associatedViews)},u=function(e){b(this.view,e,this.options)},m=function(e){C(e)};return{version:"0.11.3",configure:function(i){e.extend(t,i)},bind:function(i,n){n=e.extend({},t,l,n);var c=n.model||i.model,a=n.collection||i.collection;if("undefined"==typeof c&&"undefined"==typeof a)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";c?b(i,c,n):a&&(a.each(function(e){b(i,e,n)}),a.bind("add",u,{view:i,options:n}),a.bind("remove",m))},unbind:function(t,i){i=e.extend({},i);var n=i.model||t.model,c=i.collection||t.collection;n?C(n,t):c&&(c.each(function(e){C(e,t)}),c.unbind("add",u),c.unbind("remove",m))},mixin:I(null,t)}}(),l=c.callbacks={valid:function(e,t,i){e.$("["+i+'~="'+t+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(e,t,i,n){e.$("["+n+'~="'+t+'"]').addClass("invalid").attr("data-error",i)}},a=c.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},o=c.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",digits:"{0} must only contain digits",number:"{0} must be a number",email:"{0} must be a valid email",url:"{0} must be a valid url",inlinePattern:"{0} is invalid"},s=c.labelFormatters={none:function(e){return e},sentenceCase:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toUpperCase():" "+e.toLowerCase()}).replace(/_/g," ")},label:function(e,t){return t.labels&&t.labels[e]||s.sentenceCase(e,t)}},r=c.attributeLoaders={inputNames:function(e){var t=[];return e&&e.$("form [name]").each(function(){/^(?:input|select|textarea)$/i.test(this.nodeName)&&this.name&&"submit"!==this.type&&-1===t.indexOf(this.name)&&t.push(this.name)}),t}},g=c.validators=function(){var t=String.prototype.trim?function(e){return null===e?"":String.prototype.trim.call(e)}:function(e){var t=/^\s+/,i=/\s+$/;return null===e?"":e.toString().replace(t,"").replace(i,"")},i=function(t){return e.isNumber(t)||e.isString(t)&&t.match(a.number)},n=function(i){return!(e.isNull(i)||e.isUndefined(i)||e.isString(i)&&""===t(i)||e.isArray(i)&&e.isEmpty(i))};return{fn:function(t,i,n,c,l){return e.isString(n)&&(n=c[n]),n.call(c,t,i,l)},required:function(t,i,c,l,a){var s=e.isFunction(c)?c.call(l,t,i,a):c;return s||n(t)?s&&!n(t)?this.format(o.required,this.formatLabel(i,l)):void 0:!1},acceptance:function(t,i,n,c){return"true"===t||e.isBoolean(t)&&t!==!1?void 0:this.format(o.acceptance,this.formatLabel(i,c))},min:function(e,t,n,c){return!i(e)||n>e?this.format(o.min,this.formatLabel(t,c),n):void 0},max:function(e,t,n,c){return!i(e)||e>n?this.format(o.max,this.formatLabel(t,c),n):void 0},range:function(e,t,n,c){return!i(e)||e<n[0]||e>n[1]?this.format(o.range,this.formatLabel(t,c),n[0],n[1]):void 0},length:function(t,i,n,c){return e.isString(t)&&t.length===n?void 0:this.format(o.length,this.formatLabel(i,c),n)},minLength:function(t,i,n,c){return!e.isString(t)||t.length<n?this.format(o.minLength,this.formatLabel(i,c),n):void 0},maxLength:function(t,i,n,c){return!e.isString(t)||t.length>n?this.format(o.maxLength,this.formatLabel(i,c),n):void 0},rangeLength:function(t,i,n,c){return!e.isString(t)||t.length<n[0]||t.length>n[1]?this.format(o.rangeLength,this.formatLabel(i,c),n[0],n[1]):void 0},oneOf:function(t,i,n,c){return e.include(n,t)?void 0:this.format(o.oneOf,this.formatLabel(i,c),n.join(", "))},equalTo:function(e,t,i,n,c){return e!==c[i]?this.format(o.equalTo,this.formatLabel(t,n),this.formatLabel(i,n)):void 0},pattern:function(e,t,i,c){return n(e)&&e.toString().match(a[i]||i)?void 0:this.format(o[i]||o.inlinePattern,this.formatLabel(t,c),i)}}}();return e.each(g,function(t,n){g[n]=e.bind(g[n],e.extend({},i,g))}),c}(t),e.Validation})},{backbone:8,underscore:42}],8:[function(e,t,i){(function(t){!function(n){var c="object"==typeof self&&self.self==self&&self||"object"==typeof t&&t.global==t&&t;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(e,t,i){c.Backbone=n(c,i,e,t)});else if("undefined"!=typeof i){var l=e("underscore"),a=c.jQuery;n(c,i,l,a)}else c.Backbone=n(c,{},c._,c.jQuery||c.Zepto||c.ender||c.$)}(function(e,t,i,n){var c=e.Backbone,l=[].slice;t.VERSION="1.2.1",t.$=n,t.noConflict=function(){return e.Backbone=c,this},t.emulateHTTP=!1,t.emulateJSON=!1,t.emulateForm=!0;var a=function(e,t,n){switch(e){case 1:return function(){return i[t](this[n])};case 2:return function(e){return i[t](this[n],e)};case 3:return function(e,c){return i[t](this[n],s(e,this),c)};case 4:return function(e,c,l){return i[t](this[n],s(e,this),c,l)};default:return function(){var e=l.call(arguments);return e.unshift(this[n]),i[t].apply(i,e)}}},o=function(e,t,n){i.each(t,function(t,c){i[c]&&(e.prototype[c]=a(t,c,n))})},s=function(e,t){return i.isFunction(e)?e:i.isObject(e)&&!t._isModel(e)?r(e):i.isString(e)?function(t){return t.get(e)}:e},r=function(e){var t=i.matches(e);return function(e){return t(e.attributes)}},g=t.Events={},d=/\s+/,I=function(e,t,n,c,l){var a,o=0;if(n&&"object"==typeof n){void 0!==c&&"context"in l&&void 0===l.context&&(l.context=c);for(a=i.keys(n);o<a.length;o++)t=I(e,t,a[o],n[a[o]],l)}else if(n&&d.test(n))for(a=n.split(d);o<a.length;o++)t=e(t,a[o],c,l);else t=e(t,n,c,l);return t};g.on=function(e,t,i){return b(this,e,t,i)};var b=function(e,t,i,n,c){if(e._events=I(C,e._events||{},t,i,{context:n,ctx:e,listening:c}),c){var l=e._listeners||(e._listeners={});l[c.id]=c}return e};g.listenTo=function(e,t,n){if(!e)return this;var c=e._listenId||(e._listenId=i.uniqueId("l")),l=this._listeningTo||(this._listeningTo={}),a=l[c];if(!a){var o=this._listenId||(this._listenId=i.uniqueId("l"));a=l[c]={obj:e,objId:c,id:o,listeningTo:l,count:0}}return b(e,t,n,this,a),this};var C=function(e,t,i,n){if(i){var c=e[t]||(e[t]=[]),l=n.context,a=n.ctx,o=n.listening;o&&o.count++,c.push({callback:i,context:l,ctx:l||a,listening:o})}return e};g.off=function(e,t,i){return this._events?(this._events=I(u,this._events,e,t,{context:i,listeners:this._listeners}),this):this},g.stopListening=function(e,t,n){var c=this._listeningTo;if(!c)return this;for(var l=e?[e._listenId]:i.keys(c),a=0;a<l.length;a++){var o=c[l[a]];if(!o)break;o.obj.off(t,n,this)}return i.isEmpty(c)&&(this._listeningTo=void 0),this};var u=function(e,t,n,c){if(e){var l,a=0,o=c.context,s=c.listeners;if(t||n||o){for(var r=t?[t]:i.keys(e);a<r.length;a++){t=r[a];var g=e[t];if(!g)break;for(var d=[],I=0;I<g.length;I++){var b=g[I];n&&n!==b.callback&&n!==b.callback._callback||o&&o!==b.context?d.push(b):(l=b.listening,l&&0===--l.count&&(delete s[l.id],delete l.listeningTo[l.objId]))}d.length?e[t]=d:delete e[t]}return i.size(e)?e:void 0}for(var C=i.keys(s);a<C.length;a++)l=s[C[a]],delete s[l.id],delete l.listeningTo[l.objId]}};g.once=function(e,t,n){var c=I(m,{},e,t,i.bind(this.off,this));return this.on(c,void 0,n)},g.listenToOnce=function(e,t,n){var c=I(m,{},t,n,i.bind(this.stopListening,this,e));return this.listenTo(e,c)};var m=function(e,t,n,c){if(n){var l=e[t]=i.once(function(){c(t,l),n.apply(this,arguments)});l._callback=n}return e};g.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),i=Array(t),n=0;t>n;n++)i[n]=arguments[n+1];return I(p,this._events,e,void 0,i),this};var p=function(e,t,i,n){if(e){var c=e[t],l=e.all;c&&l&&(l=l.slice()),c&&h(c,n),l&&h(l,[t].concat(n))}return e},h=function(e,t){var i,n=-1,c=e.length,l=t[0],a=t[1],o=t[2];switch(t.length){case 0:for(;++n<c;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<c;)(i=e[n]).callback.call(i.ctx,l);return;case 2:for(;++n<c;)(i=e[n]).callback.call(i.ctx,l,a);return;case 3:for(;++n<c;)(i=e[n]).callback.call(i.ctx,l,a,o);return;default:for(;++n<c;)(i=e[n]).callback.apply(i.ctx,t);return}};g.bind=g.on,g.unbind=g.off,i.extend(t,g);var G=t.Model=function(e,t){var n=e||{};t||(t={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,t),this.changed={},
this.initialize.apply(this,arguments)};i.extend(G.prototype,g,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!i.iteratee(e,this)(this.attributes)},set:function(e,t,n){if(null==e)return this;var c;if("object"==typeof e?(c=e,n=t):(c={})[e]=t,n||(n={}),!this._validate(c,n))return!1;var l=n.unset,a=n.silent,o=[],s=this._changing;this._changing=!0,s||(this._previousAttributes=i.clone(this.attributes),this.changed={});var r=this.attributes,g=this.changed,d=this._previousAttributes;for(var I in c)t=c[I],i.isEqual(r[I],t)||o.push(I),i.isEqual(d[I],t)?delete g[I]:g[I]=t,l?delete r[I]:r[I]=t;if(this.id=this.get(this.idAttribute),!a){o.length&&(this._pending=n);for(var b=0;b<o.length;b++)this.trigger("change:"+o[b],this,r[o[b]],n)}if(s)return this;if(!a)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?i.clone(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes,n={};for(var c in e){var l=e[c];i.isEqual(t[c],l)||(n[c]=l)}return i.size(n)?n:!1},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=i.extend({parse:!0},e);var t=this,n=e.success;return e.success=function(i){var c=e.parse?t.parse(i,e):i;return t.set(c,e)?(n&&n.call(e.context,t,i,e),void t.trigger("sync",t,i,e)):!1},N(this,e),this.sync("read",this,e)},save:function(e,t,n){var c;null==e||"object"==typeof e?(c=e,n=t):(c={})[e]=t,n=i.extend({validate:!0,parse:!0,validate_all:!0},n);var l=n.wait;if(c&&!l){if(!this.set(c,n))return!1}else if(!this._validate(c,n))return!1;var a=this,o=n.success,s=this.attributes;n.success=function(e){a.attributes=s;var t=n.parse?a.parse(e,n):e;return l&&(t=i.extend({},c,t)),t&&!a.set(t,n)?!1:(o&&o.call(n.context,a,e,n),void a.trigger("sync",a,e,n))},N(this,n),c&&l&&(this.attributes=i.extend({},s,c));var r=this.isNew()?"create":n.patch?"patch":"update";"patch"!==r||n.attrs||(n.attrs=c);var g=this.sync(r,this,n);return this.attributes=s,g},destroy:function(e){e=e?i.clone(e):{};var t=this,n=e.success,c=e.wait,l=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(i){c&&l(),n&&n.call(e.context,t,i,e),t.isNew()||t.trigger("sync",t,i,e)};var a=!1;return this.isNew()?i.defer(e.success):(N(this,e),a=this.sync("delete",this,e)),c||l(),a},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||Y();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.defaults({validate:!0},e))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;t.validate_all&&(e=i.extend({},this.attributes,e));var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,i.extend(t,{validationError:n})),!1):!0}});var A={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};o(G,A,"attributes");var y=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},Z={add:!0,remove:!0,merge:!0},B={add:!0,remove:!1};i.extend(y.prototype,g,{model:G,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,B))},remove:function(e,t){t=i.extend({},t);var n=!i.isArray(e);e=n?[e]:i.clone(e);var c=this._removeModels(e,t);return!t.silent&&c&&this.trigger("update",this,t),n?c[0]:c},set:function(e,t){t=i.defaults({},t,Z),t.parse&&!this._isModel(e)&&(e=this.parse(e,t));var n=!i.isArray(e);e=n?e?[e]:[]:e.slice();var c,l,a,o,s,r=t.at;null!=r&&(r=+r),0>r&&(r+=this.length+1);for(var g=this.comparator&&null==r&&t.sort!==!1,d=i.isString(this.comparator)?this.comparator:null,I=[],b=[],C={},u=t.add,m=t.merge,p=t.remove,h=!g&&u&&p?[]:!1,G=!1,A=0;A<e.length;A++){if(a=e[A],o=this.get(a))p&&(C[o.cid]=!0),m&&a!==o&&(a=this._isModel(a)?a.attributes:a,t.parse&&(a=o.parse(a,t)),o.set(a,t),g&&!s&&o.hasChanged(d)&&(s=!0)),e[A]=o;else if(u){if(l=e[A]=this._prepareModel(a,t),!l)continue;I.push(l),this._addReference(l,t)}l=o||l,l&&(c=this.modelId(l.attributes),!h||!l.isNew()&&C[c]||(h.push(l),G=G||!this.models[A]||l.cid!==this.models[A].cid),C[c]=!0)}if(p){for(var A=0;A<this.length;A++)C[(l=this.models[A]).cid]||b.push(l);b.length&&this._removeModels(b,t)}if(I.length||G)if(g&&(s=!0),this.length+=I.length,null!=r)for(var A=0;A<I.length;A++)this.models.splice(r+A,0,I[A]);else{h&&(this.models.length=0);for(var y=h||I,A=0;A<y.length;A++)this.models.push(y[A])}if(s&&this.sort({silent:!0}),!t.silent){for(var B=null!=r?i.clone(t):t,A=0;A<I.length;A++)null!=r&&(B.index=r+A),(l=I[A]).trigger("add",l,this,B);(s||G)&&this.trigger("sort",this,t),(I.length||b.length)&&this.trigger("update",this,t)}return n?e[0]:e},reset:function(e,t){t=t?i.clone(t):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return l.apply(this.models,arguments)},get:function(e){if(null!=e){var t=this.modelId(this._isModel(e)?e.attributes:e);return this._byId[e]||this._byId[t]||this._byId[e.cid]}},at:function(e){return 0>e&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return i.invoke(this.models,"get",e)},fetch:function(e){e=i.extend({parse:!0},e);var t=e.success,n=this;return e.success=function(i){var c=e.reset?"reset":"set";n[c](i,e),t&&t.call(e.context,n,i,e),n.trigger("sync",n,i,e)},N(this,e),this.sync("read",this,e)},create:function(e,t){t=t?i.clone(t):{};var n=t.wait;if(e=this._prepareModel(e,t),!e)return!1;n||this.add(e,t);var c=this,l=t.success;return t.success=function(e,t,i){n&&c.add(e,i),l&&l.call(i.context,e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?i.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeModels:function(e,t){for(var i=[],n=0;n<e.length;n++){var c=this.get(e[n]);if(c){var l=this.indexOf(c);this.models.splice(l,1),this.length--,t.silent||(t.index=l,c.trigger("remove",c,this,t)),i.push(c),this._removeReference(c,t)}}return i.length?i:!1},_isModel:function(e){return e instanceof G},_addReference:function(e,t){this._byId[e.cid]=e;var i=this.modelId(e.attributes);null!=i&&(this._byId[i]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var i=this.modelId(e.attributes);null!=i&&delete this._byId[i],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){if("add"!==e&&"remove"!==e||i===this){if("destroy"===e&&this.remove(t,n),"change"===e){var c=this.modelId(t.previousAttributes()),l=this.modelId(t.attributes);c!==l&&(null!=c&&delete this._byId[c],null!=l&&(this._byId[l]=t))}this.trigger.apply(this,arguments)}}});var x={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};o(y,x,"models");var v=t.View=function(e){this.cid=i.uniqueId("view"),i.extend(this,i.pick(e,X)),this._ensureElement(),this.initialize.apply(this,arguments)},W=/^(\S+)\s*(.*)$/,X=["model","collection","el","id","attributes","className","tagName","events"];i.extend(v.prototype,g,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=i.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var n=e[t];if(i.isFunction(n)||(n=this[n]),n){var c=t.match(W);this.delegate(c[1],c[2],i.bind(n,this))}}return this},delegate:function(e,t,i){return this.$el.on(e+".delegateEvents"+this.cid,t,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,i){return this.$el.off(e+".delegateEvents"+this.cid,t,i),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,n,c){var l=F[e];i.defaults(c||(c={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON,emulateForm:t.emulateForm});var a={type:l,dataType:"json"};if(c.url||(a.url=i.result(n,"url")||Y()),null!=c.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(c.attrs||i.omit(n.toJSON(c),function(e,t,i){return t.match(/^__/)}))),c.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",c.emulateForm?a.data=a.data?a.data.replace(/:/g,"=").replace(/"/g,"").replace(/,/g,"&").replace(/\{|\}/g,""):"":a.data=a.data?{model:a.data}:{}),c.emulateHTTP&&("PUT"===l||"DELETE"===l||"PATCH"===l)){a.type="POST",c.emulateJSON&&(a.data._method=l);var o=c.beforeSend;c.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",l),o?o.apply(this,arguments):void 0}}"GET"===a.type||c.emulateJSON||(a.processData=!1);var s=c.error;c.error=function(e,t,i){c.textStatus=t,c.errorThrown=i,s&&s.call(c.context,e,t,i)};var r=c.xhr=t.ajax(i.extend(a,c));return n.trigger("request",n,r,c),r};var F={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var Q=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},R=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,H=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(Q.prototype,g,{initialize:function(){},route:function(e,n,c){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(n)&&(c=n,n=""),c||(c=this[n]);var l=this;return t.history.route(e,function(i){var a=l._extractParameters(e,i);l.execute(c,a,n)!==!1&&(l.trigger.apply(l,["route:"+n].concat(a)),l.trigger("route",n,a),t.history.trigger("route",l,n,a))}),this},execute:function(e,t,i){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(k,"\\$&").replace(R,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(H,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return i.map(n,function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null})}});var f=t.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},V=/^[#\/]|\s+$/g,J=/^\/+|\/+$/g,w=/#.*$/;f.started=!1,i.extend(f.prototype,g,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(V,"")},start:function(e){if(f.started)throw new Error("Backbone.history has already been started");if(f.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(J,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,c=n.insertBefore(this.iframe,n.firstChild).contentWindow;c.document.open(),c.document.close(),c.location.hash="#"+this.fragment}var l=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};return this._usePushState?l("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?l("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),f.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return this.matchRoot()?(e=this.fragment=this.getFragment(e),i.some(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})):!1},navigate:function(e,t){if(!f.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var i=this.root;""!==e&&"?"!==e.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+e;if(e=this.decodeFragment(e.replace(w,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var c=this.iframe.contentWindow;t.replace||(c.document.open(),c.document.close()),this._updateHash(c.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new f;var U=function(e,t){var n,c=this;n=e&&i.has(e,"constructor")?e.constructor:function(){return c.apply(this,arguments)},i.extend(n,c,t);var l=function(){this.constructor=n};return l.prototype=c.prototype,n.prototype=new l,e&&i.extend(n.prototype,e),n.__super__=c.prototype,n};G.extend=y.extend=Q.extend=v.extend=f.extend=U;var Y=function(){throw new Error('A "url" property or function must be specified')},N=function(e,t){var i=t.error;t.error=function(n){i&&i.call(t.context,e,n,t),e.trigger("error",e,n,t)}};return t})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{underscore:42}],42:[function(e,t,i){(function(){function e(e){function t(t,i,n,c,l,a){for(;l>=0&&a>l;l+=e){var o=c?c[l]:l;n=i(n,t[o],o,t)}return n}return function(i,n,c,l){n=y(n,l,4);var a=!F(i)&&A.keys(i),o=(a||i).length,s=e>0?0:o-1;return arguments.length<3&&(c=i[a?a[s]:s],s+=e),t(i,n,c,a,s,o)}}function n(e){return function(t,i,n){i=Z(i,n);for(var c=X(t),l=e>0?0:c-1;l>=0&&c>l;l+=e)if(i(t[l],l,t))return l;return-1}}function c(e,t,i){return function(n,c,l){var a=0,o=X(n);if("number"==typeof l)e>0?a=l>=0?l:Math.max(l+o,a):o=l>=0?Math.min(l+1,o):l+o+1;else if(i&&l&&o)return l=i(n,c),n[l]===c?l:-1;if(c!==c)return l=t(I.call(n,a,o),A.isNaN),l>=0?l+a:-1;for(l=e>0?a:o-1;l>=0&&o>l;l+=e)if(n[l]===c)return l;return-1}}function l(e,t){var i=k.length,n=e.constructor,c=A.isFunction(n)&&n.prototype||r,l="constructor";for(A.has(e,l)&&!A.contains(t,l)&&t.push(l);i--;)l=k[i],l in e&&e[l]!==c[l]&&!A.contains(t,l)&&t.push(l)}var a=this,o=a._,s=Array.prototype,r=Object.prototype,g=Function.prototype,d=s.push,I=s.slice,b=r.toString,C=r.hasOwnProperty,u=Array.isArray,m=Object.keys,p=g.bind,h=Object.create,G=function(){},A=function(e){return e instanceof A?e:this instanceof A?void(this._wrapped=e):new A(e)};"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=A),i._=A):a._=A,A.VERSION="1.8.3";var y=function(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,c){return e.call(t,i,n,c)};case 4:return function(i,n,c,l){return e.call(t,i,n,c,l)}}return function(){return e.apply(t,arguments)}},Z=function(e,t,i){return null==e?A.identity:A.isFunction(e)?y(e,t,i):A.isObject(e)?A.matcher(e):A.property(e)};A.iteratee=function(e,t){return Z(e,t,1/0)};var B=function(e,t){return function(i){var n=arguments.length;if(2>n||null==i)return i;for(var c=1;n>c;c++)for(var l=arguments[c],a=e(l),o=a.length,s=0;o>s;s++){var r=a[s];t&&void 0!==i[r]||(i[r]=l[r])}return i}},x=function(e){if(!A.isObject(e))return{};if(h)return h(e);G.prototype=e;var t=new G;return G.prototype=null,t},v=function(e){return function(t){return null==t?void 0:t[e]}},W=Math.pow(2,53)-1,X=v("length"),F=function(e){var t=X(e);return"number"==typeof t&&t>=0&&W>=t};A.each=A.forEach=function(e,t,i){t=y(t,i);var n,c;if(F(e))for(n=0,c=e.length;c>n;n++)t(e[n],n,e);else{var l=A.keys(e);for(n=0,c=l.length;c>n;n++)t(e[l[n]],l[n],e)}return e},A.map=A.collect=function(e,t,i){t=Z(t,i);for(var n=!F(e)&&A.keys(e),c=(n||e).length,l=Array(c),a=0;c>a;a++){var o=n?n[a]:a;l[a]=t(e[o],o,e)}return l},A.reduce=A.foldl=A.inject=e(1),A.reduceRight=A.foldr=e(-1),A.find=A.detect=function(e,t,i){var n;return n=F(e)?A.findIndex(e,t,i):A.findKey(e,t,i),void 0!==n&&-1!==n?e[n]:void 0},A.filter=A.select=function(e,t,i){var n=[];return t=Z(t,i),A.each(e,function(e,i,c){t(e,i,c)&&n.push(e)}),n},A.reject=function(e,t,i){return A.filter(e,A.negate(Z(t)),i)},A.every=A.all=function(e,t,i){t=Z(t,i);for(var n=!F(e)&&A.keys(e),c=(n||e).length,l=0;c>l;l++){var a=n?n[l]:l;if(!t(e[a],a,e))return!1}return!0},A.some=A.any=function(e,t,i){t=Z(t,i);for(var n=!F(e)&&A.keys(e),c=(n||e).length,l=0;c>l;l++){var a=n?n[l]:l;if(t(e[a],a,e))return!0}return!1},A.contains=A.includes=A.include=function(e,t,i,n){return F(e)||(e=A.values(e)),("number"!=typeof i||n)&&(i=0),A.indexOf(e,t,i)>=0},A.invoke=function(e,t){var i=I.call(arguments,2),n=A.isFunction(t);return A.map(e,function(e){var c=n?t:e[t];return null==c?c:c.apply(e,i)})},A.pluck=function(e,t){return A.map(e,A.property(t))},A.where=function(e,t){return A.filter(e,A.matcher(t))},A.findWhere=function(e,t){return A.find(e,A.matcher(t))},A.max=function(e,t,i){var n,c,l=-(1/0),a=-(1/0);if(null==t&&null!=e){e=F(e)?e:A.values(e);for(var o=0,s=e.length;s>o;o++)n=e[o],n>l&&(l=n)}else t=Z(t,i),A.each(e,function(e,i,n){c=t(e,i,n),(c>a||c===-(1/0)&&l===-(1/0))&&(l=e,a=c)});return l},A.min=function(e,t,i){var n,c,l=1/0,a=1/0;if(null==t&&null!=e){e=F(e)?e:A.values(e);for(var o=0,s=e.length;s>o;o++)n=e[o],l>n&&(l=n)}else t=Z(t,i),A.each(e,function(e,i,n){c=t(e,i,n),(a>c||c===1/0&&l===1/0)&&(l=e,a=c)});return l},A.shuffle=function(e){for(var t,i=F(e)?e:A.values(e),n=i.length,c=Array(n),l=0;n>l;l++)t=A.random(0,l),t!==l&&(c[l]=c[t]),c[t]=i[l];return c},A.sample=function(e,t,i){return null==t||i?(F(e)||(e=A.values(e)),e[A.random(e.length-1)]):A.shuffle(e).slice(0,Math.max(0,t))},A.sortBy=function(e,t,i){return t=Z(t,i),A.pluck(A.map(e,function(e,i,n){return{value:e,index:i,criteria:t(e,i,n)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var Q=function(e){return function(t,i,n){var c={};return i=Z(i,n),A.each(t,function(n,l){var a=i(n,l,t);e(c,n,a)}),c}};A.groupBy=Q(function(e,t,i){A.has(e,i)?e[i].push(t):e[i]=[t]}),A.indexBy=Q(function(e,t,i){e[i]=t}),A.countBy=Q(function(e,t,i){A.has(e,i)?e[i]++:e[i]=1}),A.toArray=function(e){return e?A.isArray(e)?I.call(e):F(e)?A.map(e,A.identity):A.values(e):[]},A.size=function(e){return null==e?0:F(e)?e.length:A.keys(e).length},A.partition=function(e,t,i){t=Z(t,i);var n=[],c=[];return A.each(e,function(e,i,l){(t(e,i,l)?n:c).push(e)}),[n,c]},A.first=A.head=A.take=function(e,t,i){return null!=e?null==t||i?e[0]:A.initial(e,e.length-t):void 0},A.initial=function(e,t,i){return I.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},A.last=function(e,t,i){return null!=e?null==t||i?e[e.length-1]:A.rest(e,Math.max(0,e.length-t)):void 0},A.rest=A.tail=A.drop=function(e,t,i){return I.call(e,null==t||i?1:t)},A.compact=function(e){return A.filter(e,A.identity)};var R=function(e,t,i,n){for(var c=[],l=0,a=n||0,o=X(e);o>a;a++){var s=e[a];if(F(s)&&(A.isArray(s)||A.isArguments(s))){t||(s=R(s,t,i));var r=0,g=s.length;for(c.length+=g;g>r;)c[l++]=s[r++]}else i||(c[l++]=s)}return c};A.flatten=function(e,t){return R(e,t,!1)},A.without=function(e){return A.difference(e,I.call(arguments,1))},A.uniq=A.unique=function(e,t,i,n){A.isBoolean(t)||(n=i,i=t,t=!1),null!=i&&(i=Z(i,n));for(var c=[],l=[],a=0,o=X(e);o>a;a++){var s=e[a],r=i?i(s,a,e):s;t?(a&&l===r||c.push(s),l=r):i?A.contains(l,r)||(l.push(r),c.push(s)):A.contains(c,s)||c.push(s)}return c},A.union=function(){return A.uniq(R(arguments,!0,!0))},A.intersection=function(e){for(var t=[],i=arguments.length,n=0,c=X(e);c>n;n++){var l=e[n];if(!A.contains(t,l)){for(var a=1;i>a&&A.contains(arguments[a],l);a++);a===i&&t.push(l)}}return t},A.difference=function(e){var t=R(arguments,!0,!0,1);return A.filter(e,function(e){return!A.contains(t,e)})},A.zip=function(){return A.unzip(arguments)},A.unzip=function(e){for(var t=e&&A.max(e,X).length||0,i=Array(t),n=0;t>n;n++)i[n]=A.pluck(e,n);return i},A.object=function(e,t){for(var i={},n=0,c=X(e);c>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},A.findIndex=n(1),A.findLastIndex=n(-1),A.sortedIndex=function(e,t,i,n){i=Z(i,n,1);for(var c=i(t),l=0,a=X(e);a>l;){var o=Math.floor((l+a)/2);i(e[o])<c?l=o+1:a=o}return l},A.indexOf=c(1,A.findIndex,A.sortedIndex),A.lastIndexOf=c(-1,A.findLastIndex),A.range=function(e,t,i){null==t&&(t=e||0,e=0),i=i||1;for(var n=Math.max(Math.ceil((t-e)/i),0),c=Array(n),l=0;n>l;l++,e+=i)c[l]=e;return c};var L=function(e,t,i,n,c){if(!(n instanceof t))return e.apply(i,c);var l=x(e.prototype),a=e.apply(l,c);return A.isObject(a)?a:l};A.bind=function(e,t){if(p&&e.bind===p)return p.apply(e,I.call(arguments,1));if(!A.isFunction(e))throw new TypeError("Bind must be called on a function");var i=I.call(arguments,2),n=function(){return L(e,n,t,this,i.concat(I.call(arguments)))};return n},A.partial=function(e){var t=I.call(arguments,1),i=function(){for(var n=0,c=t.length,l=Array(c),a=0;c>a;a++)l[a]=t[a]===A?arguments[n++]:t[a];for(;n<arguments.length;)l.push(arguments[n++]);return L(e,i,this,this,l)};return i},A.bindAll=function(e){var t,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(t=1;n>t;t++)i=arguments[t],e[i]=A.bind(e[i],e);return e},A.memoize=function(e,t){var i=function(n){var c=i.cache,l=""+(t?t.apply(this,arguments):n);return A.has(c,l)||(c[l]=e.apply(this,arguments)),c[l]};return i.cache={},i},A.delay=function(e,t){var i=I.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},A.defer=A.partial(A.delay,A,1),A.throttle=function(e,t,i){var n,c,l,a=null,o=0;i||(i={});var s=function(){o=i.leading===!1?0:A.now(),a=null,l=e.apply(n,c),a||(n=c=null)};return function(){var r=A.now();o||i.leading!==!1||(o=r);var g=t-(r-o);return n=this,c=arguments,0>=g||g>t?(a&&(clearTimeout(a),a=null),o=r,l=e.apply(n,c),a||(n=c=null)):a||i.trailing===!1||(a=setTimeout(s,g)),l}},A.debounce=function(e,t,i){var n,c,l,a,o,s=function(){var r=A.now()-a;t>r&&r>=0?n=setTimeout(s,t-r):(n=null,i||(o=e.apply(l,c),n||(l=c=null)))};return function(){l=this,c=arguments,a=A.now();var r=i&&!n;return n||(n=setTimeout(s,t)),r&&(o=e.apply(l,c),l=c=null),o}},A.wrap=function(e,t){return A.partial(t,e)},A.negate=function(e){return function(){return!e.apply(this,arguments)}},A.compose=function(){var e=arguments,t=e.length-1;return function(){for(var i=t,n=e[t].apply(this,arguments);i--;)n=e[i].call(this,n);return n}},A.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},A.before=function(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),1>=e&&(t=null),i}},A.once=A.partial(A.before,2);var H=!{toString:null}.propertyIsEnumerable("toString"),k=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];A.keys=function(e){if(!A.isObject(e))return[];if(m)return m(e);var t=[];for(var i in e)A.has(e,i)&&t.push(i);return H&&l(e,t),t},A.allKeys=function(e){if(!A.isObject(e))return[];var t=[];for(var i in e)t.push(i);return H&&l(e,t),t},A.values=function(e){for(var t=A.keys(e),i=t.length,n=Array(i),c=0;i>c;c++)n[c]=e[t[c]];return n},A.mapObject=function(e,t,i){t=Z(t,i);for(var n,c=A.keys(e),l=c.length,a={},o=0;l>o;o++)n=c[o],a[n]=t(e[n],n,e);return a},A.pairs=function(e){for(var t=A.keys(e),i=t.length,n=Array(i),c=0;i>c;c++)n[c]=[t[c],e[t[c]]];return n},A.invert=function(e){for(var t={},i=A.keys(e),n=0,c=i.length;c>n;n++)t[e[i[n]]]=i[n];return t},A.functions=A.methods=function(e){var t=[];for(var i in e)A.isFunction(e[i])&&t.push(i);return t.sort()},A.extend=B(A.allKeys),A.extendOwn=A.assign=B(A.keys),A.findKey=function(e,t,i){t=Z(t,i);for(var n,c=A.keys(e),l=0,a=c.length;a>l;l++)if(n=c[l],t(e[n],n,e))return n},A.pick=function(e,t,i){var n,c,l={},a=e;if(null==a)return l;A.isFunction(t)?(c=A.allKeys(a),n=y(t,i)):(c=R(arguments,!1,!1,1),n=function(e,t,i){return t in i},a=Object(a));for(var o=0,s=c.length;s>o;o++){var r=c[o],g=a[r];n(g,r,a)&&(l[r]=g)}return l},A.omit=function(e,t,i){if(A.isFunction(t))t=A.negate(t);else{var n=A.map(R(arguments,!1,!1,1),String);t=function(e,t){return!A.contains(n,t)}}return A.pick(e,t,i)},A.defaults=B(A.allKeys,!0),A.create=function(e,t){var i=x(e);return t&&A.extendOwn(i,t),i},A.clone=function(e){return A.isObject(e)?A.isArray(e)?e.slice():A.extend({},e):e},A.tap=function(e,t){return t(e),e},A.isMatch=function(e,t){var i=A.keys(t),n=i.length;if(null==e)return!n;for(var c=Object(e),l=0;n>l;l++){var a=i[l];if(t[a]!==c[a]||!(a in c))return!1}return!0};var f=function(e,t,i,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof A&&(e=e._wrapped),t instanceof A&&(t=t._wrapped);var c=b.call(e);if(c!==b.call(t))return!1;switch(c){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var l="[object Array]"===c;if(!l){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,o=t.constructor;if(a!==o&&!(A.isFunction(a)&&a instanceof a&&A.isFunction(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1}i=i||[],n=n||[];for(var s=i.length;s--;)if(i[s]===e)return n[s]===t;if(i.push(e),n.push(t),l){if(s=e.length,s!==t.length)return!1;for(;s--;)if(!f(e[s],t[s],i,n))return!1}else{var r,g=A.keys(e);if(s=g.length,A.keys(t).length!==s)return!1;for(;s--;)if(r=g[s],!A.has(t,r)||!f(e[r],t[r],i,n))return!1}return i.pop(),n.pop(),!0};A.isEqual=function(e,t){return f(e,t)},A.isEmpty=function(e){return null==e?!0:F(e)&&(A.isArray(e)||A.isString(e)||A.isArguments(e))?0===e.length:0===A.keys(e).length},A.isElement=function(e){return!(!e||1!==e.nodeType)},A.isArray=u||function(e){return"[object Array]"===b.call(e)},A.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},A.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){A["is"+e]=function(t){return b.call(t)==="[object "+e+"]"}}),A.isArguments(arguments)||(A.isArguments=function(e){return A.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(A.isFunction=function(e){return"function"==typeof e||!1}),A.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},A.isNaN=function(e){return A.isNumber(e)&&e!==+e},A.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===b.call(e)},A.isNull=function(e){return null===e},A.isUndefined=function(e){return void 0===e},A.has=function(e,t){return null!=e&&C.call(e,t)},A.noConflict=function(){return a._=o,this},A.identity=function(e){return e},A.constant=function(e){return function(){return e}},A.noop=function(){},A.property=v,A.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},A.matcher=A.matches=function(e){return e=A.extendOwn({},e),function(t){return A.isMatch(t,e)}},A.times=function(e,t,i){var n=Array(Math.max(0,e));t=y(t,i,1);for(var c=0;e>c;c++)n[c]=t(c);return n},A.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},A.now=Date.now||function(){return(new Date).getTime()};var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"
},J=A.invert(V),w=function(e){var t=function(t){return e[t]},i="(?:"+A.keys(e).join("|")+")",n=RegExp(i),c=RegExp(i,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(c,t):e}};A.escape=w(V),A.unescape=w(J),A.result=function(e,t,i){var n=null==e?void 0:e[t];return void 0===n&&(n=i),A.isFunction(n)?n.call(e):n};var U=0;A.uniqueId=function(e){var t=++U+"";return e?e+t:t},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Y=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},S=/\\|'|\r|\n|\u2028|\u2029/g,z=function(e){return"\\"+N[e]};A.template=function(e,t,i){!t&&i&&(t=i),t=A.defaults({},t,A.templateSettings);var n=RegExp([(t.escape||Y).source,(t.interpolate||Y).source,(t.evaluate||Y).source].join("|")+"|$","g"),c=0,l="__p+='";e.replace(n,function(t,i,n,a,o){return l+=e.slice(c,o).replace(S,z),c=o+t.length,i?l+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?l+="'+\n((__t=("+n+"))==null?'':__t)+\n'":a&&(l+="';\n"+a+"\n__p+='"),t}),l+="';\n",t.variable||(l="with(obj||{}){\n"+l+"}\n"),l="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+l+"return __p;\n";try{var a=new Function(t.variable||"obj","_",l)}catch(o){throw o.source=l,o}var s=function(e){return a.call(this,e,A)},r=t.variable||"obj";return s.source="function("+r+"){\n"+l+"}",s},A.chain=function(e){var t=A(e);return t._chain=!0,t};var M=function(e,t){return e._chain?A(t).chain():t};A.mixin=function(e){A.each(A.functions(e),function(t){var i=A[t]=e[t];A.prototype[t]=function(){var e=[this._wrapped];return d.apply(e,arguments),M(this,i.apply(A,e))}})},A.mixin(A),A.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];A.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0],M(this,i)}}),A.each(["concat","join","slice"],function(e){var t=s[e];A.prototype[e]=function(){return M(this,t.apply(this._wrapped,arguments))}}),A.prototype.value=function(){return this._wrapped},A.prototype.valueOf=A.prototype.toJSON=A.prototype.value,A.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return A})}).call(this)},{}]},{},[2199]);
require=function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){var n=t[s][1][e];return o(n?n:e)},d,d.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({2183:[function(e,t,n){if(i18n.init({lng:"local",resStore:{local:{translation:local}}}),FastClick.attach(document.body),jQuery.noConflict(),e("../component/ui/nano-scroller/nanoScroller.scss"),e("../component/ui/nano-scroller/jquery.nanoscroller"),"undefined"==typeof window.console){var i=window.console={};i.log=i.info=i.error=i.assert=i.count=i.group=i.profile=i.time=i.trace=i.warn=function(){}}window.Adobe_Data=window.Adobe_Data||{Data_Layer:{Geo:{}}};var o=e("underscore"),r=e("backbone"),s=e("backbone.marionette"),a=e("../component/ui/util"),l=(e("../component/handlebar/helper.js"),e("../component/ui/read-more"),e("../component/ui/readmore/view"),e("../component/ui/countup/view"),e("../component/ui/lightbox/view"),e("../component/ui/scratchpad-item/view"),e("../component/share-item/view"),e("../component/ui/carousel/view"),e("../component/instagram-module/gallery/view/view"),e("../component/instagram-module/aesthetic/view/view"),e("../component/instagram-module/media/view/view"),e("../component/hotel-listing/view/view"),e("../component/ui/accordion/view"),e("../component/navbar/view.js")),c=e("../component/booking/bar/view.js"),d=(e("../component/booking/view"),e("../component/PromoPopup/view.js")),u=e("iscroll"),h=e("../component/global-search-widget/view/view.js"),p=(e("../component/user/view.js"),e("../component/layout/default-page-layout.js")),g=e("../component/global-booking-widget/home-page/search-widget/view"),m=e("../component/global-booking-widget/home-page/cleck-bottom/view"),v=e("object-fit-images");e("../component/hotel-feature-module/view/view");e("../component/ui/tooltipster/dist/css/tooltipster.bundle.min.css"),e("../component/ui/tooltipster/dist/css/plugins/tooltipster/sideTip/themes/tooltipster-sideTip-borderless.min.css"),e("../component/ui/tooltipster/dist/js/tooltipster.bundle.min.js"),jQuery.easing=o.extend({},jQuery.easing,{easeInOutCubic:function(e){return.5>e?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}}),window.location.protocol.indexOf("https")<0&&window.__backboneAgent&&window.__backboneAgent.handleBackbone(r);var f=document.title,b="",w="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,y=w&&w.replace(/hidden/i,"visibilitychange"),_=function(){document[w]?b?document.title=b:document.title=i18n.t("account.we_miss_you")+" ❤":document.title=f};window.onload=function(){b=window.StatusBarInfor,y&&document.addEventListener(y,_),v("img.compatibility-img")};var k=p.extend({ui:{booking:"[data-component=booking-bar]",nav:"[data-component=navbar]",notification:"[data-component=notification-mobile]",navbtn:".headbar.mobile .navbar-btn",searchbtn:".headbar.mobile .search-btn",widgetbooking:"[data-component=widget-booking]",chickbottom:"[data-component=widget-bottom]",navmenu:".headbar.mobile .logo-btn",PromoPopup:".PromoPopup"},events:{"click @ui.navbtn":"toggleSignOn","click @ui.searchbtn":"toggleSearchView","click @ui.navmenu":"toggleNavbarView"},initialize:function(){jQuery(".bannertooltip").each(function(e){var t=jQuery(this);t.attr("tooltip-url")?t.tooltipster({theme:"bannertooltip-theme",content:t.attr("title")+""+jQuery(this).attr("tooltip-url"),maxWidth:202,contentAsHTML:!0,interactive:!0,side:"bottom"}):t.tooltipster({theme:"bannertooltip-theme",maxWidth:202,side:"bottom"})})},onRender:function(){function e(){return"1"==window.PermanentlyDisplayOnHotel}function t(){if(!a.ismobile()){var t,n=500,i=jQuery(window).scrollTop();t=Q?i>=jQuery(".offers2__caption").height()-70:V?i>=jQuery(".tpl-hero-venues-cation").height()-70+133:jQuery(".m4b-register").length?i>=1:B?i>=jQuery(".tpl-hero-navBar").height():i>=(!$heroSlot.length||$heroSlot.hasClass("hidden")?a.getViewpointHeight()/2:$heroSlot.offset().top),shouldExpand!==t&&(shouldExpand=t,e()||k.finish(),$navigation.finish(),clearTimeout(I),shouldExpand?($navigation.css({opacity:0,top:-70}),e()||k.show(),$navigation.removeClass("expand-search"),_.removeClass("expanded-top-search"),_.addClass("docked"),S.data("interim-docked","no"),$navigation.append(x),$navigation.animate({top:0,opacity:1},n),_.hasClass("docked")&&(I=setTimeout(function(){e()||k.finish().fadeOut("slow")},3e3))):($navigation.removeClass("expand-search"),_.removeClass("expanded-top  expanded-top-search"),C&&C.removeClass("expanded"),e()||k.hide(),$heroSlot.length&&$heroSlot.append(x),$navigation.animate({top:-70,opacity:0},n,function(){$navigation.css({opacity:1,top:0}),_.removeClass("docked")})))}}var n=this;if("undefined"==typeof promoPopup||promoPopup.disable||("undefined"==typeof promoPopupHotel||"undefined"!=typeof promoPopupHotel&&!promoPopupHotel.commpromodisable)&&new d({el:n.ui.PromoPopup}).render(),(null===jQuery.cookie("cookie-opencrsnt-close")||void 0===jQuery.cookie("cookie-opencrsnt-close"))&&window.CRSNotice&&1===window.CRSNotice.tag&&(window.CRSNotice.title||window.CRSNotice.copy||window.CRSNotice.button)){var i=jQuery(".tpl-full-screen-mask-crs"),u=document.getElementsByClassName("tpl-full-screen-mask-crs")[0];u&&i.length>0&&(u.querySelector(".tip-title").textContent=CRSNotice.title,u.querySelector(".tip-copy").textContent=CRSNotice.copy,u.querySelector(".tip-button").textContent=CRSNotice.button,u.querySelector(".content-error-tips").style.backgroundImage=CRSNotice.background?"url("+CRSNotice.background+")":"",u.style.display="block",i.on("click",".wgt-sqbutton-black.tip-button",function(e){return e.preventDefault(),u.style.display="none",jQuery.cookie("cookie-opencrsnt-close","true",{expires:30,path:"/"}),!1}),i.show())}jQuery("body").on("keyup","input",function(e){13==e.keyCode&&jQuery(this).trigger("enter"),37==e.keyCode&&jQuery(this).trigger("arrowleft"),38==e.keyCode&&jQuery(this).trigger("arrowup"),39==e.keyCode&&jQuery(this).trigger("arrowright"),40==e.keyCode&&jQuery(this).trigger("arrowdown")}),a.tracker.on("change:focus",function(){jQuery(a.tracker.previous("focus")).closest(".input-box").removeClass("focus"),jQuery(a.tracker.get("focus")).closest(".input-box").addClass("focus")}),jQuery("body").on("click",".checkbox-container",function(e){var t=jQuery(e.target).closest(".checkbox-container"),n=t.find("i.checkbox").first();return n.is(e.target)?void 0:!n.trigger("click")}),jQuery("[data-component=banner-click]")&&jQuery("body").on("click","[data-component=banner-click]",function(e){n.subview.bannerWidgetView.express()});var p=jQuery('[class*="tpl-hero"]').first();if(p.length&&!jQuery(".venues-pc").length){var v=i18n.t("general.scroll_to_tip"),f=i18n.t("general.explore_tip");jQuery("[id=belowhero]").length||p.after('<div id="belowhero"></div>'),"tpl-hero-weather"==p.attr("class")&&(p=jQuery(".tpl-all-content")),p.find(".wgt-scrolldown").length||p.append('<div class="tpl-scrollbutton"><a class="wgt-scrolldown"><p>'+v+"<br />"+f+'</p><span class="icon-icon_I0152"></span></a></div>'),p.find(".wgt-scrolldown").click(function(){jQuery("html, body").animate({scrollTop:jQuery("#belowhero").offset().top},500)})}if(jQuery("body").on("click","a[href^=#]",function(){var e=jQuery(this).prop("href").split("#").pop(),t="top"==e?{top:0}:jQuery("#"+e).last().offset();t&&a.scroll(t.top)}),jQuery(".cookie-policy-cro").length?(jQuery(".cookie-policy-cro").show(),jQuery(".tpl-global-cookie-policy.cookie-policy_2").not(".cookie-policy-cro").remove()):jQuery(".cookie-policy-cro-old").length?(jQuery(".cookie-policy-cro-old").show(),jQuery(".tpl-global-cookie-policy.cookie-policy_2").not(".cookie-policy-cro-old").remove()):jQuery(".tpl-global-cookie-policy.cookie-policy_2").show(),a.ismobile()&&jQuery(".cookie-policy-cro").length&&!jQuery.cookie("cookie-policy-close")&&jQuery("body").css("margin-top",jQuery(".cookie-policy-cro").innerHeight()),jQuery("#cookie-policy-close").click(function(){jQuery("div.tpl-global-cookie-policy").hide(),a.ismobile()&&jQuery(".cookie-policy-cro").length&&(jQuery(".navigation-bar").css({top:0}),jQuery("body").css("margin-top",0)),jQuery.cookie("cookie-policy-close","true",{expires:30,path:"/"}),r.trigger("policy-close")}).trigger(jQuery.cookie("cookie-policy-close")&&"click"||""),jQuery("body").attr("data-page",window.location.href.split("?").shift().split("#").shift().split("/").pop().split(".").shift()),a.rootViews=this.subview={widgetBookingView:n.ui.widgetbooking.length&&new g({el:n.ui.widgetbooking}),chickBottomView:n.ui.chickbottom.length&&new m({el:n.ui.chickbottom}),navbarView:n.ui.nav.length&&new l({el:n.ui.nav}),bookingbarView:new c({el:n.ui.booking}).on("req:booking:open",this.toggleSearchView,this),globalsearchView:(new h).on("req:search:close",this.toggleSearchView,this)},o.each("navbar bookingbar globalsearch widgetBooking chickBottom".split(" "),function(e){n.subview[e+"View"]&&n.subview[e+"View"].render()}),a.tracker.on("change:mobile default:initialize",function(){o.each(o.pick(n.subview,["navbarView","bookingbarView","bannerWidgetView"]),function(e){a.ismobile()?jQuery.contains(document,e.el)&&e.$el.detach():jQuery(".global-wrapper").append(jQuery(e.el))&&jQuery(".navbar .menu-wrapper").show().removeClass("pannable")})}).trigger("default:initialize"),!a.ismobile()&&"ontouchstart"in window){var b=function(e,t){if(e){var n=e.style.cssText;for(var i in t){var o=new RegExp(i+":[^;]*;?","ig");n=o.test(n)?n.replace(o,i+": "+t[i]+";"):i+": "+t[i]+";"+n}e.style.cssText=n}},w=function(e,t){if(e){var n=e.style.cssText;t.forEach(function(e){var t=new RegExp(e+":[^;]*;?","ig");t.test(n)&&(n=n.replace(t,""))}),e.style.cssText=n}},y=function(){var e=jQuery(window).scrollTop()+"px";b(n.subview.navbarView.el,{top:e})};jQuery(document).on("focus","input,select,textarea",function(){var e=jQuery(window).scrollTop()+"px";b(n.subview.navbarView.el,{position:"absolute",top:e}),jQuery(window).bind("scroll",y)}),jQuery(document).on("blur","input,select,textarea",function(){w(n.subview.navbarView.el,["position","top"]),jQuery(window).unbind("scroll",y)})}a.tracker.on("change:mobile",function(e){s.Region.prototype.empty.call(n.getRegion("popup"),{preventDestroy:!0})}),n.getRegion("popup").on("req:close",function(e){n.togglePopupView()}),jQuery("body").on("click","a.signin",function(){a.getUser().trigger("req:login")}),a.getUser().on("req:login",n.toggleSignOn,n),n.$el.prepend('<div data-component="notification-mobile" style="z-index: 10000;" class="mobile collect-tips"><p></p><span class="icon-icon_B017 wgt-close close"></span></div>'),n.bindUIElements(),n.ui.notification.hide(),n.ui.notification.find(".close").click(function(){n.ui.notification.stop().animate({left:-n.ui.notification.width()},500)}),a.tracker.on("mobile:false",function(){n.ui.notification.hide()}),a.getUser().on("notification",function(e){a.ismobile()&&n.ui.notification.find("p").html(e).end().finish().show().css({left:-n.ui.notification.width()}).animate({left:0},600).delay(3500).animate({left:-n.ui.notification.width()},1200)}),/Internet Explorer/i.test(navigator.appName)&&/9\./.test(navigator.appVersion)&&jQuery(function(){var e=[];setInterval(function(){jQuery("input[placeholder],textarea[placeholder]").each(function(){jQuery.inArray(this,e)<0&&(e.push(this),jQuery(this).placeholder())})},1e3)}),r.sync=function(e,t,n){var i={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"},s=i[e];o.defaults(n||(n={}),{emulateHTTP:r.emulateHTTP,emulateJSON:r.emulateJSON,emulateForm:r.emulateForm});var a={type:s,dataType:"json"};if(n.url||(a.url=o.result(t,"url")||urlError()),null!=n.data||!t||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(n.attrs||o.omit(t.toJSON(n),function(e,t,n){return t.match(/^__/)}))),n.emulateJSON)if(a.contentType="application/x-www-form-urlencoded",n.emulateForm)if(a.data){var l=JSON.parse(a.data);a.data="";for(var c in l)a.data+=c+"="+l[c]+"&"}else a.data="";else a.data=a.data?{model:a.data}:{};if(n.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){a.type="POST",n.emulateJSON&&(a.data._method=s);var d=n.beforeSend;n.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",s),d?d.apply(this,arguments):void 0}}"GET"===a.type||n.emulateJSON||(a.processData=!1);var u=n.error;n.error=function(e,t,i){n.textStatus=t,n.errorThrown=i,u&&u.call(n.context,e,t,i)};var h=n.xhr=r.ajax(o.extend(a,n));if(t.trigger("request",t,h,n),n.ignoreError){var p=jQuery.Deferred();return h.then(function(e){p.resolve(e)},function(){p.resolve(n.ignoreErrorDefault||{})}),p.promise()}return h};var _=jQuery(".global-wrapper"),k=jQuery(".tpl-static-banner"),x=jQuery('[data-component="widget-booking"]'),C=n.subview.navbarView&&n.subview.navbarView.$(".availability");$heroSlot=jQuery(".widget-booking-hero"),$m4bSubNav=jQuery(".m4b-sub-nav-1"),$navigation=n.subview.navbarView.$el||jQuery(),shouldExpand=!1;var S=jQuery(".widget-booking-home"),Q=!!jQuery(".offers2").length,j=!!jQuery(".newlook-footerPage").length,V=!!jQuery(".venues-pc").length,T=!!jQuery(".m4b-home").length,D=!!jQuery(".m4b-inner-page").length,B=!!jQuery(".chelsea-wrapper").length,R=!(!jQuery(".account-management").length&&!jQuery(".profile-manageGuestPro").length),L=!!jQuery(".mm2-container").length;B&&($navigation=jQuery(".chelsea-navbar"));var I;if(a.isM4B()&&!jQuery(".m4b-sub-nav-2").hasClass("always-show-USP")&&(k=jQuery(".m4b-sub-nav-2")),a.tracker.on("change:mobile",function(){a.tracker.get("mobile")&&$heroSlot.append(x)}),$heroSlot.length)$heroSlot.append(x);else if(Q||j||V||T||D||B){D&&_.addClass("m4b-docked"),$navigation.append(x);var F=jQuery(".offers2__toolbar").height();F&&k.css("margin-top",F+"px")}else(R||L)&&_.addClass("nav-remove-shadow"),_.addClass("nav-always-docked"),$navigation.append(x);e()&&k.show(),_.hasClass("nav-always-docked")||_.hasClass("m4b-docked")||(a.tracker.on("change:size",t),a.tracker.on("change:scrolltop",t)),$navigation.hover(function(){(_.hasClass("docked")||_.hasClass("nav-always-docked")||a.isM4B())&&!$navigation.hasClass("hide-nav")&&(e()||k.finish().fadeIn("slow"),clearTimeout(I))},function(t){jQuery(t.toElement).closest(".m4b-sub-nav-1").length||jQuery(t.toElement).closest(".m4b-sub-nav-2").length||(_.hasClass("docked")||_.hasClass("nav-always-docked")||a.isM4B())&&!$navigation.hasClass("hide-nav")&&(e()||k.finish().fadeOut("slow"))}),$m4bSubNav.hover(function(){(_.hasClass("docked")||_.hasClass("nav-always-docked")||a.isM4B())&&!$navigation.hasClass("hide-nav")&&(e()||k.finish().fadeIn("slow"),clearTimeout(I))},function(t){jQuery(t.toElement).closest(".navbar").length||jQuery(t.toElement).closest(".m4b-sub-nav-2").length||(_.hasClass("docked")||_.hasClass("nav-always-docked")||a.isM4B())&&!$navigation.hasClass("hide-nav")&&(e()||k.finish().fadeOut("slow"))}),k.hover(function(){},function(t){jQuery(t.toElement).closest(".navbar").length||jQuery(t.toElement).closest(".m4b-sub-nav-1").length||(_.hasClass("docked")||_.hasClass("nav-always-docked")||a.isM4B())&&!$navigation.hasClass("hide-nav")&&(e()||k.finish().fadeOut("slow"))});var N=a.getUrlParamQuestion(),M=jQuery(".headbar.mobile");jQuery("#main-footer-wrapper");N&&"true"==N.mobileApp&&M.hide(),jQuery(".mm2-sub-header").length&&("rtl"==document.documentElement.getAttribute("dir")&&jQuery(".mm2-sub-header").scrollLeft(0),jQuery(".mm2-sub-header").scrollLeft(jQuery(".mm2-sub-header .selected").offset().left-16).addClass("show-scrolled-item"))},onDestroy:function(){a.tracker.off("change:scrolltop",this.cancelFN)},toggleNavbarView:function(){a.ismobile()&&(this.subview.navbarView.$el.removeClass("hide-mobile-menu"),this.togglePopupView(this.subview.navbarView),this.subview.navbarView.userMobileView&&(this.subview.navbarView.ui.menuWrapper.show(),this.subview.navbarView.userMobileView.$el.hide()))},toggleBookingView:function(){this.togglePopupView(this.subview.bookingView)},toggleSearchView:function(){var e=this;this.togglePopupView(this.subview.globalsearchView),this.subview.globalsearchView.ui.searchBox.focus(),a.ismobile()&&setTimeout(function(){var t=e.subview.globalsearchView.myScroll;t?t.refresh():e.ownScroll=new u(e.subview.globalsearchView.ui.scrollContainer.get(0),{interactiveScrollbars:!0,mouseWheel:!1,scrollbars:!1,scrollX:!1}),e.subview.globalsearchView.$el.off("touchmove",e.subview.globalsearchView.__touch).on("touchmove",e.subview.globalsearchView.__touch)},300)},toggleSignOn:function(){var e=this;a.getUser().deferredPromise.then(function(){a.ismobile()&&(e.subview.navbarView.$el.addClass("hide-mobile-menu"),e.togglePopupView(e.subview.navbarView),e.subview.navbarView.userMobileView&&(e.subview.navbarView.userMobileView.ui.content.show(),e.subview.navbarView.userMobileView.$el.show(),e.subview.navbarView.userMobileView.switchState("expand:on"),a.isloggedin()?(e.subview.navbarView.userMobileView.ui.nav.show(),e.subview.navbarView.ui.menuWrapper.show(),e.subview.navbarView.userMobileView.loggedinview.ui.userinfo.show(),e.subview.navbarView.userMobileView.loggedinview.ui.notification.show()):(e.subview.navbarView.ui.menuWrapper.hide(),e.subview.navbarView.userMobileView.ui.nav.hide())))})},togglePopupView:function(e){var t=this.getRegion("popup"),n=!e||t.currentView==e;n?t.empty({preventDestroy:!0}):(t.show(e,{preventDestroy:!0}),e.trigger("req:open"))}});new k({el:jQuery(".global-wrapper")}).render(),jQuery(function(){a.lazyLoadImage()}),"classList"in document.documentElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){function e(e){return function(n){var i=t.className.split(/\s+/g),o=i.indexOf(n);e(i,o,n),t.className=i.join(" ")}}var t=this;return{add:e(function(e,t,n){~t||e.push(n)}),remove:e(function(e,t){~t&&e.splice(t,1)}),toggle:e(function(e,t,n){~t?e.splice(t,1):e.push(n)}),contains:function(e){return!!~t.className.split(/\s+/g).indexOf(e)},item:function(e){return t.className.split(/\s+/g)[e]||null}}}}),String.prototype.repeat||!function(){"use strict";var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(i){}return n}(),t=function(e){if(null==this)throw TypeError();var t=String(this),n=e?Number(e):0;if(n!=n&&(n=0),0>n||n==1/0)throw RangeError();for(var i="";n;)n%2==1&&(i+=t),n>1&&(t+=t),n>>=1;return i};e?e(String.prototype,"repeat",{value:t,configurable:!0,writable:!0}):String.prototype.repeat=t}(),t.exports={}},{"../component/PromoPopup/view.js":68,"../component/booking/bar/view.js":398,"../component/booking/view":416,"../component/global-booking-widget/home-page/cleck-bottom/view":895,"../component/global-booking-widget/home-page/search-widget/view":929,"../component/global-search-widget/view/view.js":1023,"../component/handlebar/helper.js":1025,"../component/hotel-feature-module/view/view":1028,"../component/hotel-listing/view/view":1033,"../component/instagram-module/aesthetic/view/view":1065,"../component/instagram-module/gallery/view/view":1071,"../component/instagram-module/media/view/view":1074,"../component/layout/default-page-layout.js":1082,"../component/navbar/view.js":1402,"../component/share-item/view":1940,"../component/ui/accordion/view":2045,"../component/ui/carousel/view":2057,"../component/ui/countup/view":2065,"../component/ui/lightbox/view":2094,"../component/ui/nano-scroller/jquery.nanoscroller":2097,"../component/ui/nano-scroller/nanoScroller.scss":2098,"../component/ui/read-more":2109,"../component/ui/readmore/view":2110,"../component/ui/scratchpad-item/view":2113,"../component/ui/tooltipster/dist/css/plugins/tooltipster/sideTip/themes/tooltipster-sideTip-borderless.min.css":2119,"../component/ui/tooltipster/dist/css/tooltipster.bundle.min.css":2120,"../component/ui/tooltipster/dist/js/tooltipster.bundle.min.js":2121,"../component/ui/util":2122,"../component/user/view.js":2139,backbone:8,"backbone.marionette":6,iscroll:14,"object-fit-images":18,underscore:42}],2098:[function(e,t,n){t.exports=e("sassify")("/** initial setup **/ .nano {   width: 100%;   height: 100%;   position: relative;   overflow: hidden; }   .nano .nano-content {     position: absolute;     top: 0;     right: 0;     bottom: 0;     left: 0;     overflow: scroll;     overflow-x: hidden; }     .nano .nano-content:focus {       outline: thin dotted; }     .nano .nano-content::-webkit-scrollbar {       display: none; }   .nano > .nano-pane {     width: 12px;     background: rgba(0, 0, 0, 0.25);     position: absolute;     top: 0;     right: 0;     bottom: 0;     -webkit-transition: .2s;     -moz-transition: .2s;     -o-transition: .2s;     transition: .2s;     -webkit-border-radius: 5px;     -moz-border-radius: 5px;     border-radius: 5px;     visibility: hidden9;     opacity: .01; }     .nano > .nano-pane > .nano-slider {       background: #444;       background: rgba(0, 0, 0, 0.5);       position: relative;       margin: 0 1px;       -webkit-border-radius: 3px;       -moz-border-radius: 3px;       border-radius: 3px; }  .has-scrollbar > .nano-content::-webkit-scrollbar {   display: block; }  .nano:hover > .nano-pane, .nano-pane.active, .nano-pane.flashed {   visibility: visible9;   opacity: 0.99; }  ")},{sassify:36}],2097:[function(e,t,n){!function(e){return"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t,window,document)}):"object"==typeof n?t.exports=e(window.jQuery,window,document):e(jQuery,window,document)}(function(e,t,n){"use strict";var i,o,r,s,a,l,c,d,u,h,p,g,m,v,f,b,w,y,_,k,x,C,S,Q,j,V,T,D,B,R,L;S={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",enabledClass:"has-scrollbar",flashedClass:"flashed",activeClass:"active",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},y="scrollbar",w="scroll",u="mousedown",h="mouseenter",p="mousemove",m="mousewheel",g="mouseup",b="resize",a="drag",l="enter",k="up",f="panedown",r="DOMMouseScroll",s="down",x="wheel",c="keydown",d="keyup",_="touchmove",i="Microsoft Internet Explorer"===t.navigator.appName&&/msie 7./i.test(t.navigator.appVersion)&&t.ActiveXObject,o=null,T=t.requestAnimationFrame,C=t.cancelAnimationFrame,B=n.createElement("div").style,L=function(){var e,t,n,i,o,r;for(i=["t","webkitT","MozT","msT","OT"],e=o=0,r=i.length;r>o;e=++o)if(n=i[e],t=i[e]+"ransform",t in B)return i[e].substr(0,i[e].length-1);return!1}(),R=function(e){return L===!1?!1:""===L?e:L+e.charAt(0).toUpperCase()+e.substr(1)},D=R("transform"),j=D!==!1,Q=function(){var e,t,i;return e=n.createElement("div"),t=e.style,t.position="absolute",t.width="100px",t.height="100px",t.overflow=w,t.top="-9999px",n.body.appendChild(e),i=e.offsetWidth-e.clientWidth,n.body.removeChild(e),i},V=function(){var e,n,i;return n=t.navigator.userAgent,(e=/(?=.+Mac OS X)(?=.+Firefox)/.test(n))?(i=/Firefox\/\d{2}\./.exec(n),i&&(i=i[0].replace(/\D+/g,"")),e&&+i>23):!1},v=function(){function c(i,r){this.el=i,this.options=r,o||(o=Q()),this.$el=e(this.el),this.doc=e(this.options.documentContext||n),this.win=e(this.options.windowContext||t),this.body=this.doc.find("body"),this.$content=this.$el.children("."+this.options.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return c.prototype.preventScrolling=function(e,t){if(this.isActive)if(e.type===r)(t===s&&e.originalEvent.detail>0||t===k&&e.originalEvent.detail<0)&&e.preventDefault();else if(e.type===m){if(!e.originalEvent||!e.originalEvent.wheelDelta)return;(t===s&&e.originalEvent.wheelDelta<0||t===k&&e.originalEvent.wheelDelta>0)&&e.preventDefault()}},c.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},c.prototype.updateScrollValues=function(){var e,t;e=this.content,this.maxScrollTop=e.scrollHeight-e.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=e.scrollTop,t=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==t&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:t}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},c.prototype.setOnScrollStyles=function(){var e;j?(e={},e[D]="translate(0, "+this.sliderTop+"px)"):e={top:this.sliderTop},T?(C&&this.scrollRAF&&C(this.scrollRAF),this.scrollRAF=T(function(t){return function(){return t.scrollRAF=null,t.slider.css(e)}}(this))):this.slider.css(e)},c.prototype.createEvents=function(){this.events={down:function(e){return function(t){return e.isBeingDragged=!0,e.offsetY=t.pageY-e.slider.offset().top,e.slider.is(t.target)||(e.offsetY=0),e.pane.addClass(e.options.activeClass),e.doc.bind(p,e.events[a]).bind(g,e.events[k]),e.body.bind(h,e.events[l]),!1}}(this),drag:function(e){return function(t){return e.sliderY=t.pageY-e.$el.offset().top-e.paneTop-(e.offsetY||.5*e.sliderHeight),e.scroll(),e.contentScrollTop>=e.maxScrollTop&&e.prevScrollTop!==e.maxScrollTop?e.$el.trigger("scrollend"):0===e.contentScrollTop&&0!==e.prevScrollTop&&e.$el.trigger("scrolltop"),!1}}(this),up:function(e){return function(t){return e.isBeingDragged=!1,e.pane.removeClass(e.options.activeClass),e.doc.unbind(p,e.events[a]).unbind(g,e.events[k]),e.body.unbind(h,e.events[l]),!1}}(this),resize:function(e){return function(t){e.reset()}}(this),panedown:function(e){return function(t){return e.sliderY=(t.offsetY||t.originalEvent.layerY)-.5*e.sliderHeight,e.scroll(),e.events.down(t),!1}}(this),scroll:function(e){return function(t){e.updateScrollValues(),e.isBeingDragged||(e.iOSNativeScrolling||(e.sliderY=e.sliderTop,e.setOnScrollStyles()),null!=t&&(e.contentScrollTop>=e.maxScrollTop?(e.options.preventPageScrolling&&e.preventScrolling(t,s),e.prevScrollTop!==e.maxScrollTop&&e.$el.trigger("scrollend")):0===e.contentScrollTop&&(e.options.preventPageScrolling&&e.preventScrolling(t,k),0!==e.prevScrollTop&&e.$el.trigger("scrolltop"))))}}(this),wheel:function(e){return function(t){var n;if(null!=t)return n=t.delta||t.wheelDelta||t.originalEvent&&t.originalEvent.wheelDelta||-t.detail||t.originalEvent&&-t.originalEvent.detail,n&&(e.sliderY+=-n/3),e.scroll(),!1}}(this),enter:function(e){return function(t){var n;if(e.isBeingDragged)return 1!==(t.buttons||t.which)?(n=e.events)[k].apply(n,arguments):void 0}}(this)}},c.prototype.addEvents=function(){var e;this.removeEvents(),e=this.events,this.options.disableResize||this.win.bind(b,e[b]),this.iOSNativeScrolling||(this.slider.bind(u,e[s]),this.pane.bind(u,e[f]).bind(""+m+" "+r,e[x])),this.$content.bind(""+w+" "+m+" "+r+" "+_,e[w])},c.prototype.removeEvents=function(){var e;e=this.events,this.win.unbind(b,e[b]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+w+" "+m+" "+r+" "+_,e[w])},c.prototype.generate=function(){var e,n,i,r,s,a,l;return r=this.options,a=r.paneClass,l=r.sliderClass,e=r.contentClass,(s=this.$el.children("."+a)).length||s.children("."+l).length||this.$el.append('<div class="'+a+'"><div class="'+l+'" /></div>'),this.pane=this.$el.children("."+a),this.slider=this.pane.find("."+l),0===o&&V()?(i=t.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),n={right:-14,paddingRight:+i+14}):o&&(n={right:-o},this.$el.addClass(r.enabledClass)),null!=n&&this.$content.css(n),this},c.prototype.restore=function(){this.stopped=!1,
this.iOSNativeScrolling||this.pane.show(),this.addEvents()},c.prototype.reset=function(){var e,t,n,r,s,a,l,c,d,u,h,p;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),e=this.content,r=e.style,s=r.overflowY,i&&this.$content.css({height:this.$content.height()}),t=e.scrollHeight+o,u=parseInt(this.$el.css("max-height"),10),u>0&&(this.$el.height(""),this.$el.height(e.scrollHeight>u?u:e.scrollHeight)),l=this.pane.outerHeight(!1),d=parseInt(this.pane.css("top"),10),a=parseInt(this.pane.css("bottom"),10),c=l+d+a,p=Math.round(c/t*l),p<this.options.sliderMinHeight?p=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&p>this.options.sliderMaxHeight&&(p=this.options.sliderMaxHeight),s===w&&r.overflowX!==w&&(p+=o),this.maxSliderTop=c-p,this.contentHeight=t,this.paneHeight=l,this.paneOuterHeight=c,this.sliderHeight=p,this.paneTop=d,this.slider.height(p),this.events.scroll(),this.pane.show(),this.isActive=!0,e.scrollHeight===e.clientHeight||this.pane.outerHeight(!0)>=e.scrollHeight&&s!==w?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===e.scrollHeight&&s===w?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),n=this.$content.css("position"),"static"!==n&&"relative"!==n||(h=parseInt(this.$content.css("right"),10),h&&this.$content.css({right:"",marginRight:h})),this)},c.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this):void 0},c.prototype.scrollBottom=function(e){return this.isActive?(this.$content.scrollTop(this.contentHeight-this.$content.height()-e).trigger(m),this.stop().restore(),this):void 0},c.prototype.scrollTop=function(e){return this.isActive?(this.$content.scrollTop(+e).trigger(m),this.stop().restore(),this):void 0},c.prototype.scrollTo=function(e){return this.isActive?(this.scrollTop(this.$el.find(e).get(0).offsetTop),this):void 0},c.prototype.stop=function(){return C&&this.scrollRAF&&(C(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},c.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),i&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass(this.options.enabledClass)&&(this.$el.removeClass(this.options.enabledClass),this.$content.css({right:""})),this},c.prototype.flash=function(){return!this.iOSNativeScrolling&&this.isActive?(this.reset(),this.pane.addClass(this.options.flashedClass),setTimeout(function(e){return function(){e.pane.removeClass(e.options.flashedClass)}}(this),this.options.flashDelay),this):void 0},c}(),e.fn.nanoScroller=function(t){return this.each(function(){var n,i;if((i=this.nanoscroller)||(n=e.extend({},S,t),this.nanoscroller=i=new v(this,n)),t&&"object"==typeof t){if(e.extend(i.options,t),null!=t.scrollBottom)return i.scrollBottom(t.scrollBottom);if(null!=t.scrollTop)return i.scrollTop(t.scrollTop);if(t.scrollTo)return i.scrollTo(t.scrollTo);if("bottom"===t.scroll)return i.scrollBottom(0);if("top"===t.scroll)return i.scrollTop(0);if(t.scroll&&t.scroll instanceof e)return i.scrollTo(t.scroll);if(t.stop)return i.stop();if(t.destroy)return i.destroy();if(t.flash)return i.flash()}return i.reset()})},e.fn.nanoScroller.Constructor=v})},{}],2094:[function(e,t,n){var i=(e("underscore"),e("backbone")),o=e("backbone.marionette"),r=e("../util"),s=e("../pannable"),a=t.exports=o.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"tpl-full-screen-mask",attributes:{"data-component":"lightbox"},ui:{iframe:"iframe",container:".tpl-button-click-tips",title:".title"},events:{"click a.close":function(){this.model.set({url:""})}},attach:function(){jQuery(this.model.get("container")).prepend(this.el),s.autoCreate()},load:function(e,t){return this.model.set({url:e,title:t||""})},anchor:function(e){return this.load(jQuery(e).attr("href"),jQuery(e).attr("title"))},initialize:function(e){this.model=new i.Model({container:jQuery(e&&e.container||"body").get(0)})},onRender:function(){var e=this;r.clickout(e.ui.container,function(){e.model.set({url:""})}),e.model.on("change:title",function(){e.ui.title.html(e.model.get("title"))}),e.model.on("change:url",function(){e.attach(),e.$el[e.model.get("url")?"show":"hide"](),r.modald[e.model.get("url")?"acquire":"release"](e),e.model.set({deferred:jQuery.Deferred()}),e.ui.iframe.attr("src",e.model.get("url")).on("load",function(){e.model.get("deferred").resolve()}).on("abort error unload",function(){e.model.get("deferred").reject()})})}});jQuery("body").on("click",'a[data-component="lightbox"]',function(e){return e.preventDefault(),!r.getInstance(a).anchor(e.target)})},{"../pannable":2104,"../util":2122,"./template.hbs":2093,backbone:8,"backbone.marionette":6,underscore:42}],2093:[function(e,t,n){t.exports='<div class="tpl-button-click-tips">\r\n    <h4><span class="title"></span><a class="wgt-close close"><span class="icon-icon_B017"></span></a></h4>\r\n    <div class="pannable content-error-tips">\r\n        <iframe class="" width="100%" height="100%"></iframe>\r\n    </div>\r\n</div>'},{}],2065:[function(e,t,n){var i=e("underscore"),o=(e("backbone"),e("../autocreator")),r=e("../CountUp");t.exports=o.extend({template:!1,initialize:function(){o.prototype.initialize.apply(this,arguments)},onRender:function(){var e,t,n,o=this.$el.get(0);e=Number(o.innerHTML.trim())||27,n=document.documentElement.clientHeight,t=new r(o,0,e,"",2.5,{useEasing:!0,useGrouping:!0,separator:",",decimal:"."}),o.getBoundingClientRect().top<=n&&t.start(),window.onscroll=i.throttle(function(){o.getBoundingClientRect().top<=n?t.start():""},300)}},{selector:'[data-component="countup"]'})},{"../CountUp":2043,"../autocreator":2052,backbone:8,underscore:42}],1402:[function(e,t,n){var i=e("underscore"),o=e("backbone.marionette"),r=e("../abmb/stateful.js"),s=e("../currency-language/view.js"),a=(e("../shopping-cart/shopping-cart-view.js"),e("../ui/util")),l=e("../user/mobile-view"),c=e("../user/view"),d=e("../top-search/view"),u=e("../ui/pannable"),h=e("../../../config/host.js"),p=null,g=!1,m=!1,v=null;t.exports=o.ItemView.extend(i.extend({},r,{ui:{logo:".logo",menuWrapper:".menu-wrapper",userWrapper:".user-module-mobile-wrapper",userDesktopWrapper:'[data-component="user"]',cartWrapper:".item-carts",sectionmenuitems:".menu-inner li.item a",languageCurrency:"li.item-lang",topSearchWrapper:".top-search-wrapper",overlay:".overlay",viewMore:".item-view-more > a",viewMorePopup:".item-view-more-popup"},events:{"click .expand-btn":"onExpandClick","click .item-link":"showHotelInfo","click @ui.overlay":function(){jQuery(".user-module-desktop .availability").removeClass("expanded");var e=jQuery(".widget-booking-home"),t=jQuery(".global-wrapper");t.removeClass("expanded-top expanded-top-search"),"yes"===e.data("interim-docked")&&(e.data("interim-docked","no"),t.removeClass("docked")),this.$el.removeClass("expand-search")},"click @ui.viewMore":function(){this.ui.viewMore.closest(".item-view-more").toggleClass("item-view-more-expand")}},showHotelInfo:function(e){this.$(e.target).attr("href")},getTemplate:function(){var e=window.document.getElementById("navbar-tpl");return null==e?jQuery(".hbs-templates .navbar-tpl").detach().html()?Handlebars.compile(jQuery(".hbs-templates .navbar-tpl").detach().html()):!1:(e.removeAttribute("id"),Handlebars.compile(e.innerHTML))},onRender:function(){var e=this;e.$el.removeClass("hidden"),e.ui.cartWrapper.find(".cart-tooltip").hide(),a.ismobile()&&e.$el.find(".menu-wrapper").addClass("pannable"),clearTimeout(p),p=null,p=setTimeout(function(){e.ui.logo.removeClass("expand")},2e3),"true"==e.$el.attr("data-logo-expand")&&e.ui.logo.addClass("expand"),jQuery(window).one("scroll",function(t){e.ui.logo.removeClass("expand")}),a.tracker.on("mobile:true",function(){e.ui.languageCurrency.append(a.getInstance(s).el)}).trigger("change:mobile"),a.tracker.on("mobile:false",function(){jQuery(".user-others").append(a.getInstance(s).el)}),e.userMobileView=new l,e.ui.userWrapper.append(e.userMobileView.render().el),e.userView=(new c).on("expand:top:search",function(){e.$el.addClass("expand-search"),jQuery(".user-module-desktop .availability").removeClass("expanded"),jQuery(".global-wrapper").removeClass("expanded-top"),jQuery(".global-wrapper").addClass("expanded-top-search"),(!a.isIE()||navigator.userAgent.toLowerCase().indexOf("edge")>=0)&&e.topSearchView.ui.input.focus(),e.topSearchView.initialResultsView.renderPromise.then(function(){e.topSearchView.getRegion("results").show(e.topSearchView.initialResultsView,{preventDestroy:!0,forceShow:!0})}),e.topSearchView.$el.removeClass("has-error")}),e.ui.userDesktopWrapper.append(e.userView.render().el),e.topSearchView=(new d).on("close:top:search",function(){e.$el.removeClass("expand-search"),jQuery(".global-wrapper").removeClass("expanded-top-search")}),e.ui.topSearchWrapper.append(e.topSearchView.render().el);var t=a.sectionmenu(e.ui.sectionmenuitems);t.length||(t=a.justshowmenu(e.ui.sectionmenuitems)),a.tracker.on("change:mobile",function(){t=a.sectionmenu(e.ui.sectionmenuitems)}),a.getUser().on("change:shopping_cart nbv1",function(){e.ui.cartWrapper.find(".number").text(a.getUser().get("shopping_cart"))[a.getUser().get("shopping_cart")?"show":"hide"](),e.ui.cartWrapper.find("a").unbind("click").bind("click",function(){a.getUser().get("shopping_cart")?window.location.href=h.urls.checkout:e.ui.cartWrapper.find(".cart-tooltip").fadeIn("slow").delay(3e3).fadeOut("slow")})}).trigger("nbv1"),u.autoCreate(),this.$el.prepend('<span class="overlay"></span>');var n=jQuery(".global-wrapper");this.$el.on("mousewheel DOMMouseScroll",function(e){var t=jQuery(e.target);return!(!t.hasClass("nano")&&!jQuery(".nano").has(t).length&&(n.hasClass("expanded-top")||n.hasClass("expanded-top-search")))}),e.shouldCollapseMenu(),jQuery(window).resize(function(){e.timeID||e.shouldCollapseMenu()})},onExpandClick:function(){this.$el.show(),this.toggleState("menu","expand","close")},onShow:function(){this.switchState("mobile:onshow")},beforeEmpty:function(){function e(){t.resolve()}this.switchState("mobile:onempty");var t=jQuery.Deferred();return this.$el.on("webkitAnimationEnd",e),this.$el.on("animationend",e),t.promise()},renderCollapseMenu:function(){var t=jQuery(".global-wrapper .menu-inner .menu"),n=t.find(".item");if(g)n.each(function(e){e>=4&&!jQuery(this).hasClass("item-view-more")&&jQuery(this).addClass("nav-menu-hide")}),jQuery(".item-view-more").show(),m=!0;else{var i=[];n.each(function(e){if(e>=4&&!jQuery(this).hasClass("item-view-more")){var t={href:jQuery(this).find(".item-link").attr("href"),text:jQuery(this).find("span").text()};i.push(t),jQuery(this).addClass("nav-menu-hide")}}),t.append(Handlebars.compile(e("./viewMoreTemplate.hbs"))({data:i})),g=!0,m=!0,jQuery(".item-view-more").on("click",function(){jQuery(this).toggleClass("item-view-more-expand")}),a.tracker.on("click",function(e){var t=jQuery(".item-view-more");!jQuery(".item-view-more > a").has(jQuery(e.target)).length&&t.hasClass("item-view-more-expand")&&t.removeClass("item-view-more-expand")})}},hideCollapseMenu:function(){var e=jQuery(".global-wrapper .menu-inner .menu"),t=e.find(".item");t.length&&t.removeClass("nav-menu-hide"),m&&(jQuery(".item-view-more").hide(),m=!1)},shouldCollapseMenu:function(){var e=this;e.timeID=setInterval(function(){if(jQuery(".global-wrapper .currency.user-cl").length){var t=jQuery(".global-wrapper .navbar").width(),n=jQuery(".global-wrapper .user-module-desktop").width()||0;v||(v=jQuery(".global-wrapper .menu-inner").width()+90);var i=Math.ceil(.8*(t-n));v>=i?e.renderCollapseMenu():m&&i>v&&e.hideCollapseMenu(),clearInterval(e.timeID),e.timeID=null}},500)}}))},{"../../../config/host.js":45,"../abmb/stateful.js":72,"../currency-language/view.js":777,"../shopping-cart/shopping-cart-view.js":1941,"../top-search/view":1956,"../ui/pannable":2104,"../ui/util":2122,"../user/mobile-view":2131,"../user/view":2139,"./viewMoreTemplate.hbs":1403,"backbone.marionette":6,underscore:42}],2131:[function(e,t,n){var i=e("underscore"),o=e("backbone.marionette"),r=e("../abmb/stateful.js"),s=e("./loggedin/view"),a=e("./loggedout/view"),l=e("./signin/view"),c=e("./info/view"),d=e("../ui/util"),u=e("./notification/view");t.exports=o.ItemView.extend(i.extend({},r,{className:"user-module-mobile",template:e("./mobile-template.hbs"),events:{"click .nav":function(){this.ui.content.toggle(),this.toggleState("expand","on","off")}},ui:{nav:".nav",content:".content",notification:".notification-content"},onRender:function(){var e=this,t=d.getUser();e.loggedinview=new s,e.loggedinoutview=new a,e.notificationView=new u,e.loggedinview.on("toggle:notification",function(){e.notificationView.__showMessage()}),t.deferredPromise.then(function(){e.ui.nav.append((t.isLoggedIn()?e.loggedinview:e.loggedinoutview).render().el),e.ui.content.hide(),d.getInstance(l).on("req:close",function(){e.ui.content.toggle(),e.toggleState("expand","on","off")}),d.tracker.on("change:mobile change:loggedin",function(){d.ismobile()&&e.ui.content.append(d.getInstance(d.isloggedin()?c:l).el),t.isLoggedIn()&&(e.ui.notification.append(e.notificationView.el),jQuery.cookie("login_default_open_notification")?(jQuery.cookie("login_default_open_notification","",{path:"/",expires:-1}),e.notificationView.__showMessage(!0)):e.notificationView.__showMessage(!1))}).trigger("change:mobile"),t.on("req:login",function(){d.ismobile()&&e.ui.content.show()})}),e.switchState("expand:off")}}))},{"../abmb/stateful.js":72,"../ui/util":2122,"./info/view":2125,"./loggedin/view":2127,"./loggedout/view":2129,"./mobile-template.hbs":2130,"./notification/view":2134,"./signin/view":2137,"backbone.marionette":6,underscore:42}],2130:[function(e,t,n){t.exports='<div>\r\n    <div class="nav clearfix hide">\r\n        <div class="toggle-switch-btn">\r\n            <span class="icon-icon_B023 show"></span>\r\n            <span class="icon-icon_B024 hide"></span>\r\n        </div>\r\n    </div>\r\n    <div class="content"></div>\r\n    <div class="notification-content"></div>\r\n</div>'},{}],2104:[function(e,t,n){var i=(e("underscore"),e("backbone"),e("underscore.string/sprintf"),e("hammerjs")),o=(e("../../../assets/lib/jquery.hammer.js"),e("./autocreator"));n=t.exports=o.extend({template:!1,initialize:function(){o.prototype.initialize.apply(this,arguments);var e=this;e.$el.hammer().data("hammer").get("pan").set({direction:i.DIRECTION_VERTICAL}),e.$el.on("panstart",function(){var t=e.$el.scrollTop();e.$el.on("panmove",function(n){e.$el.scrollTop(t-n.gesture.deltaY)}),e.$el.one("panend",function(){e.$el.off("panmove")})})}},{selector:".pannable"})},{"../../../assets/lib/jquery.hammer.js":44,"./autocreator":2052,backbone:8,hammerjs:12,underscore:42,"underscore.string/sprintf":41}],1956:[function(e,t,n){var i=e("backbone.marionette"),o=e("./initial-results-view/view"),r=e("./results-view/view"),s=e("../ui/util");t.exports=i.LayoutView.extend({regions:{results:".results-region"},ui:{input:".search-input",errorText:".error-tip",results:".results-region",slides:".results-slide"},className:"top-search",template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},triggers:{"click .close-search":"close:top:search"},events:{"click @ui.input":function(){var e=this;e.getRegion("results").currentView!==e.initialResultsView&&e.initialResultsView.renderPromise.then(function(){e.getRegion("results").show(e.initialResultsView,{preventDestroy:!0,forceShow:!0})}),e.$el.removeClass("has-error")},"input @ui.input":function(e){var t=jQuery(e.target).val();t.length>=2&&this.resultsView.trigger("search",t)},"keyup @ui.input":function(e){this.resultsView.trigger("search:keyup",e.keyCode)}},initialize:function(){var e=this;this.initialResultsView=new o,this.resultsView=new r,this.resultsView.model.on("search:change",function(){e.resultsView.render(),e.getRegion("results").show(e.resultsView,{preventDestroy:!0,forceShow:!0})}),this.resultsView.on("display:error",function(){e.$el.addClass("has-error")}),this.resultsView.on("remove:error",function(){e.$el.removeClass("has-error")}),this.resultsView.on("show",function(){e.ui.slides.removeClass("destination-only")}),this.initialResultsView.on("show",function(){0===e.initialResultsView.__renderData.history.length&&e.ui.slides.addClass("destination-only")}),this.getRegion("results").on("empty",function(){e.ui.slides.removeClass("destination-only")}),s.tracker.on("click",function(t){e.$el.has(jQuery(t.target)).length||e.getRegion("results").empty({preventDestroy:!0})})},onRender:function(){this.ui.errorText.html(i18n.t("booking.search_jump").replace("{0}","/"+jQuery("html").attr("lang")+"/hotels"))}})},{"../ui/util":2122,"./initial-results-view/view":1951,"./results-view/view":1954,"./template.hbs":1955,"backbone.marionette":6}],1955:[function(e,t,n){t.exports='<span class="error-tip-wrapper"><span class="error-tip">{{local \'booking.search_jump\'}}</span></span>\r\n<span class="icon-icon_A001 logo"></span>\r\n<span class="top-search-icon icon-icon_D001"></span>\r\n<input maxlength="255" type="text"\r\n              class="search-input"\r\n              placeholder="{{local \'booking.where_to_go\'}}">\r\n<span class="close-search icon-icon_B017"></span>\r\n\r\n<div class="results-slide">\r\n    <div class="results-region"></div>\r\n</div>'},{}],1954:[function(e,t,n){var i=e("backbone.marionette"),o=e("underscore"),r=e("../../ui/util"),s=e("./model");t.exports=i.LayoutView.extend({className:"search-results",template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},ui:{scroll:".nano"},onShow:function(){this.ui.scroll.nanoScroller({destroy:!0}),this.ui.scroll.nanoScroller({alwaysVisible:!0,preventPageScrolling:!0})},initialize:function(){var e=this;e.model=new s,e.on("search",o.debounce(function(t){e.fetchXhr&&"function"==typeof e.fetchXhr.abort&&e.fetchXhr.abort(),e.__searchTerm=t,e.fetchXhr=e.model.search(t).then(function(){e.model.trigger("search:change")})},500)),e.on("search:keyup",function(t){if((38===t||40===t||13===t)&&e.$(".search-item").length){var n=e.$(".search-item.selected"),i=e.$(".search-item"),o=Math.min(void 0===n.data("sortindex")?-1:n.data("sortindex"),i.length-1);switch(t){case 38:if(-1!=o){if(0===o)return!1;n.removeClass("selected"),o--,e.$('.search-item[data-sortindex="'+o+'"]').addClass("selected")}return!1;case 40:return o!=i.length-1&&(n.removeClass("selected"),o++,e.$('.search-item[data-sortindex="'+o+'"]').addClass("selected")),!1;case 13:n.length&&(window.location.href=n.attr("href"))}}})},serializeData:function(){var e=this,t=e.model.toJSON(),n=(t.data.hotel||[]).concat(t.data.city||[]);return n.length?e.trigger("remove:error"):e.trigger("display:error"),{results:o.map(n,function(t,n){var i="destination"===t.type?(t.number>1?i18n.t("booking.hotelsincity"):i18n.t("booking.hotelincity")).replace("{0}",t.name):t.name;return t.nameHtml=r.highLightSearchTerm(e.__searchTerm,i),t.sortindex=n,t}).slice(0,20)}}})},{"../../ui/util":2122,"./model":1952,"./template.hbs":1953,"backbone.marionette":6,underscore:42}],1953:[function(e,t,n){t.exports="<div class=\"nano\">\r\n    <div class=\"nano-content\">\r\n        {{#if results.length}}\r\n            {{#each results}}\r\n                <a class=\"search-item\" href=\"{{#if pageurl}}{{pageurl}}{{else}}{{url}}{{/if}}\" data-sortindex={{sortindex}}><span\r\n                        class=\"search-item-icon {{#ifCond type '!=' 'hotel'}}icon-icon_B002{{else}}icon-icon_I002{{/ifCond}}\"></span><span\r\n                        class=\"search-item-name\" dir=\"ltr\">{{{nameHtml}}}{{#ifCond type '==' 'destination'}}\r\n                    ({{number}} {{#ifCond number '>' 1}}{{local 'general.properties'}}{{else}}{{local 'general.property'}}{{/ifCond}}){{/ifCond}}</span></a>\r\n            {{/each}}\r\n        {{/if}}\r\n    </div>\r\n</div>\r\n\r\n"},{}],1952:[function(e,t,n){var i=(e("underscore"),e("backbone")),o=(e("../../ui/util.js"),e("../../../../config/host.js"));t.exports=i.Model.extend({url:function(){return o.getURL("api","book2/search")+"?keyword="+this.keyword},search:function(e){return this.keyword=e,this.fetch()}})},{"../../../../config/host.js":45,"../../ui/util.js":2122,backbone:8,underscore:42}],1951:[function(e,t,n){var i=e("backbone.marionette"),o=e("underscore"),r=(e("../../ui/util"),e("../../global-search-widget/model/DAO")),s=e("../../global-booking-widget/home-page/models/search-history");t.exports=i.LayoutView.extend({className:"initial-results",initialize:function(){var e=this;e.renderPromise=jQuery.when(r.promise,s.fetch()).then(function(t,n){e.__renderData={topDestinations:t.top10City.toJSON().top10cityName,history:n},e.render()})},template:Handlebars.compile(e("./template.hbs")),serializeData:function(){return this.__renderData?{history:o.map(this.__renderData.history,function(e){var t="destination"===e.type?(e.number>1?i18n.t("booking.hotelsincity"):i18n.t("booking.hotelincity")).replace("{0}",e.name):e.name;return e.nameHtml=t,e}),topDestinations:this.__renderData.topDestinations}:{}},onShow:function(){this.$el.closest(".results-slide").hide().slideToggle()}})},{"../../global-booking-widget/home-page/models/search-history":901,"../../global-search-widget/model/DAO":1015,"../../ui/util":2122,"./template.hbs":1950,"backbone.marionette":6,underscore:42}],1950:[function(e,t,n){t.exports='{{#if history.length}}\r\n    <span class="results-area">\r\n        <div class="results-section-title">{{local \'booking.recently_viewed\'}}</div>\r\n        {{#each history}}\r\n            <a class="search-item" href="{{#if pageurl}}{{pageurl}}{{else}}{{url}}{{/if}}"><span\r\n                    class="search-item-icon {{#ifCond type \'!=\' \'hotel\'}}icon-icon_B002{{else}}icon-icon_I002{{/ifCond}}"></span><span\r\n                    class="search-item-name" dir="ltr">{{{nameHtml}}} {{#ifCond type \'==\' \'destination\'}}({{number}} {{#ifCond number \'>\' 1}}{{local \'general.properties\'}}{{else}}{{local \'general.property\'}}{{/ifCond}}){{/ifCond}}</span></a>\r\n        {{/each}}\r\n    </span>\r\n{{/if}}\r\n\r\n{{#if topDestinations.length}}\r\n    <span class="results-area">\r\n        <div class="results-section-title">{{local \'quickbook.top_destinations\'}}</div>\r\n        {{#each topDestinations}}\r\n            <a class="destination-item" href="{{url}}">{{name}}</a>\r\n        {{/each}}\r\n    </span>\r\n{{/if}}\r\n\r\n'},{}],1403:[function(e,t,n){t.exports='<li class="item item-view-more">\r\n    <a class="item-link">\r\n        <span>{{local \'general.view_more\'}}</span>\r\n        ><span class="chervon-icon icon-icon_chervonUp"></span>\r\n        <span class="chervon-icon icon-icon_chervonDown"></span>\r\n    </a>\r\n    <ul class="item-view-more-popup">\r\n        {{#each data}}\r\n            <li><a href="{{href}}">{{text}}</a></li>\r\n        {{/each}}\r\n    </ul>\r\n</li>'},{}],1074:[function(e,t,n){var i=(e("underscore"),e("backbone.marionette"),e("../model/model")),o=e("../../../ui/util"),r=(e("moment"),e("../../../ui/autocreator")),s=e("../assets/template.hbs");Slick=e("../../../ui/slick/slick"),MediaView=t.exports=o.registry.media=r.extend({events:{"click .content-btn":"showMore","click .gallery__container__content__right__top__btn":"setOverlay","click .ins-imageItem":"showDetail","click .ins-gallery-overlay-container__btn__left":"doOverlaySwitchPrev","click .ins-gallery-overlay-container__btn__right":"doOverlaySwitchNext","click .play":"playVideo"},template:Handlebars.compile(s),ui:{insgallery:".ins-gallery",insGallerySlick:".ins-gallery-slick-container",slideContainer:".gallery__container",overlaySlide:".ins-gallery-overlay-insItems",gallery:".gallery",showMoreBtn:".ins-gallery-btn",videoSlide:".videoSlide"},initialize:function(){r.prototype.initialize.apply(this,arguments);var e=this;if(e.showCount=e.el.getAttribute("data-showcount")||2,e.hashTag=e.el.getAttribute("data-hashtag"),e.productId=e.el.getAttribute("data-productid"),e.limit=e.el.getAttribute("data-limit")||6,e.cmsLabel=e.el.getAttribute("data-cmsLabel"),e.color=e.el.getAttribute("data-color")||"#BA0C2F",e.hashTag&&e.hashTag.length>0||e.productId){e.model=new i({limit:e.limit,hashTag:e.hashTag,showCount:e.showCount,productId:e.productId});var t=e.productId?e.cmsLabel:e.hashTag;e.model.set("CmsLabel",t?"#"+t:""),e.model.set("Type",parseInt(e.type)),e.model.set("Color",e.color),e.model.fetch().then(function(){if(e.render(),e.model.attributes.items.length>0){var t=e.currentSlide.children(".showMore");t.length<=0&&e.ui.showMoreBtn.hide()}})}},onRender:function(){var e=this;this.currentSlide=e.ui.insGallerySlick,this.initialSlick(),jQuery(window).on("keyup",function(t){return 37==t.keyCode||39==t.keyCode||27==t.keyCode?(37==t.keyCode?e.doOverlaySwitchPrev():39==t.keyCode?e.doOverlaySwitchNext():27==t.keyCode&&e.setOverlay(),t.preventDefault(),!1):void 0}),e.isDisabled=!1},playVideo:function(e){var t=this.$(e.target).parent(),n=t.find("video");this.$(e.target).hide(),t.find(".video-placeholder").hide(),n.removeClass("opacity-zero");var i=n[0];i.play(),this.monitorPlayEnd(i)},monitorPlayEnd:function(e){var t=jQuery(e);t.on("ended",function(){t.addClass("opacity-zero"),t.parent().find(".play").show(),t.parent().find(".video-placeholder").show()})},closeVideo:function(){var e=this.ui.videoSlide,t=e.find("video");t.each(function(){var e=jQuery(this);e[0].currentTime=0,e[0].pause(),e.addClass("opacity-zero"),e.parent().find(".play").show(),e.parent().find(".video-placeholder").show()})},onDestroy:function(){this.isDisabled=!0},setOverlay:function(e){var t=this;1==e?t.ui.gallery.fadeIn("500",function(){document.documentElement.scrollTop=t.ui.gallery.data("scrollTop")}):(t.closeVideo(),t.ui.gallery.fadeOut("fast",function(){document.documentElement.scrollTop=t.ui.gallery.data("scrollTop")}))},showDetail:function(e){e.stopPropagation();var t=this,n=jQuery(e.currentTarget),i=n.attr("data-id");if(i){var o=t.ui.slideContainer.find("*[data-id="+i+"]").parent().attr("data-slick-index"),r=document.documentElement.scrollTop;t.ui.gallery.data("scrollTop",r),t.setOverlay(1),t.initialSlick(o)}},initialSlick:function(e){var t=this;this.slicked?(this.currentIndex=this.currentOverlaySlide.slick("slickCurrentSlide"),this.currentOverlaySlide.slick("unslick"),this.slicked=!1):(this.slicked=!1,this.currentIndex=0),this.currentOverlaySlide=t.ui.overlaySlide.slick({speed:500,infinite:!0,arrows:!1,fade:!0,cssEase:"linear",rtl:"rtl"==jQuery("html").attr("dir")}),this.slicked=!0,"undefined"!=typeof e&&this.currentOverlaySlide.slick("slickGoTo",parseInt(e))},overlaylmove:function(e){this.closeVideo(),this.currentOverlaySlide.slick("slickNext")},overlayrmove:function(){this.closeVideo(),this.currentOverlaySlide.slick("slickPrev")},doOverlaySwitchPrev:function(){this.overlayrmove()},doOverlaySwitchNext:function(){this.overlaylmove()},showMore:function(e){var t=jQuery(e.currentTarget),n=this;this.currentSlide.each(function(){var e=6,i=jQuery(this).children(".showMore");i.length>0&&n.showMoreNChildren(i,e)<=0&&t.parent().hide()})},showMoreNChildren:function(e,t){for(var n=e.filter(":hidden"),i=n.length,o=0;t>o&&i>o;o++)n.eq(o).removeClass("showMore");return parseInt(i)-parseInt(t)}},{selector:'[data-module="instagram-image-media"]'})},{"../../../ui/autocreator":2052,"../../../ui/slick/slick":2118,"../../../ui/util":2122,"../assets/template.hbs":1072,"../model/model":1073,"backbone.marionette":6,moment:16,underscore:42}],1073:[function(e,t,n){var i=e("underscore"),o=(e("../../../ui/util"),e("moment")),r=e("backbone");GalleryModel=t.exports=r.Model.extend({initialize:function(e){e&&(e.productId?this.url=window.location.protocol+"//api.curalate.com/v1/reels/millenniumhotels.json?productId="+e.productId+"&limit="+e.limit:this.url=window.location.protocol+"//api.curalate.com/v1/reels/millenniumhotels.json?filters="+e.hashTag+"&limit="+e.limit,this.showCount=e.showCount,this.locationName=e.locationName)},parse:function(e){var t={},n=this;if(t.items=[],e&&e.items.length>0){i.each(e.items,function(e){e.url&&e.url.indexOf("instagram.com")>=0&&(e.timestamp=o.unix(e.timestamp).format(),e.locationName=n.locationName,t.items.push(e))});var r=t.items.slice(this.showCount,t.items.length);i.each(r,function(e){e.showMore="showMore"})}return t}})},{"../../../ui/util":2122,backbone:8,moment:16,underscore:42}],1072:[function(e,t,n){t.exports='{{#if items}}\r\n<div class="ins-aes">\r\n        <div class="ins-aes-carousel">\r\n            <div class="ins-aes-carousel-info" style=" background:{{Color}}">\r\n                <div class="ins-aes-content">\r\n                    <div class="follow-icon">\r\n                        <span class="icon-icon_B039"></span>\r\n                    </div>\r\n                    <div class="info">\r\n                        <!--<h6 class="title">{{local "social.Wall_of_fame"}}</h6>-->\r\n                        <span class="des">{{local "social.Share_your_moments"}}</span>\r\n                        {{#if CmsLabel}}\r\n                            <a href="https://www.instagram.com/millennium/"  target="_blank" > {{CmsLabel}}</a>\r\n                        {{/if}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n<div class="ins-gallery">\r\n        <div class="ins-gallery-overlay-slick-container">\r\n        <div class="gallery">\r\n            <div class="ins-gallery-overlay-container">\r\n                <div class="ins-gallery-overlay-insItems">\r\n                    {{#each items}}\r\n                        <div class="gallery__container">\r\n                            <div class="gallery__container__content" data-id="{{id}}">\r\n                                {{#if video.medium.url}}\r\n                                    <div class="gallery__container__content__left videoSlide">\r\n                                        <div class="play"></div>\r\n                                        <video  src="{{encode video.medium.url}}" class="opacity-zero" controls="controls"\r\n                                               width="100%" height="100%">\r\n                                        </video>\r\n                                        <div class="video-placeholder" style="background-image: url(\'{{encode photo.original.url}}\')"></div>\r\n                                    </div>\r\n                                {{else}}\r\n                                    <div class="gallery__container__content__left" style="background-image: url(\'{{photo.original.url}}\')" data-backgroundurl-desktop="{{photo.original.url}}" data-backgroundurl-pad="{{photo.large_square.url}}" data-backgroundurl-mobile="{{photo.original.url}}">\r\n\r\n                                    </div>\r\n                                {{/if}}\r\n                                <div class="gallery__container__content__right">\r\n                                    <div class="gallery__container__content__right__top">\r\n                                        <div class="gallery__container__content__right__top__head">\r\n                                            <span style="background-image: url(\'{{user.small_square.url}}\')"></span>\r\n                                            <div class="gallery__container__content__right__top__head__msg">\r\n                                                <h2>{{user.username}}</h2>\r\n                                                <p>{{date-with-format timestamp \'DD MMMM YYYY\'}}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <a class="gallery__container__content__right__top__btn">\r\n                                            <i class="icon-icon_B017"></i>\r\n                                        </a>\r\n                                    </div>\r\n                                    <p class="gallery__container__content__right__text">\r\n                                      {{caption}}\r\n                                    </p>\r\n\r\n                                    <div class="gallery__container__content__right__hotel">\r\n                                        {{#if product}}\r\n                                            <span style="background-image: url(\'{{product.image}}\');"></span>\r\n                                            <div class="gallery__container__content__right__hotel__msg">\r\n                                                <p>{{product.name}}</p>\r\n                                                <a href="{{product.link}}">{{local "maps.hotel_details"}}</a>\r\n                                            </div>\r\n                                        {{/if}}\r\n                                        <div class="gallery__container__content__right__hotel__bottom">\r\n                                           {{local "form.follow_us"}}\r\n                                            <a  href="https://www.instagram.com/millennium/"  target="_blank"  >Instagram</a>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="ins-gallery-overlay-container__btn desktop-hide">\r\n                                <a class="ins-gallery-overlay-container__btn__left">\r\n                                    <i class="icon-icon_chervonLeft"></i>\r\n                                </a>\r\n                                <a class="ins-gallery-overlay-container__btn__right">\r\n                                    <i class="icon-icon_chervonRight"></i>\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    {{/each}}\r\n                </div>\r\n                <div class="ins-gallery-overlay-container__btn mobile-hide">\r\n                    <a class="ins-gallery-overlay-container__btn__left">\r\n                        <i class="icon-icon_chervonLeft"></i>\r\n                    </a>\r\n                    <a class="ins-gallery-overlay-container__btn__right">\r\n                        <i class="icon-icon_chervonRight"></i>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n        <div class="ins-gallery-slick-container ins-hide">\r\n            {{#each items}}\r\n                <div  data-id="{{id}}" style="background-image: url(\'{{photo.original.url}}\')"\r\n                      data-backgroundurl-desktop="{{photo.original.url}}" data-backgroundurl-pad="{{photo.large_square.url}}" data-backgroundurl-mobile="{{photo.original.url}}"\r\n                      class="ins-imageItem ins-show {{double}} {{showMore}} {{image_anchor}}"  >\r\n                    <div class="ins-bottom">\r\n                        <div class="ins-icon">\r\n                            <span class="icon-icon_B039"></span>\r\n                        </div>\r\n                        <div class="ins__info">\r\n                            <div class="ins_post-user"> {{user.username}}</div>\r\n                            <div class="ins_post-time"> {{date-with-format timestamp \'ddd, hh:mm A\'}}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            {{/each}}\r\n        </div>\r\n        <div class="ins-gallery-btn">\r\n            <div class="content-btn">{{local \'general.more\'}}</div>\r\n        </div>\r\n</div>\r\n{{/if}}';
},{}],1071:[function(e,t,n){var i=e("underscore"),o=(e("backbone.marionette"),e("../model/model")),r=e("../../../ui/util"),s=e("moment"),a=e("../../../ui/autocreator"),l=e("../assets/template.hbs");Slick=e("../../../ui/slick/slick"),CarouselView=t.exports=r.registry.carousel=a.extend({events:{"click .content-btn":"showMore","click .gallery__container__content__right__top__btn":"setOverlay","click .gallery-shape":"setOverlay","click .ins-imageItem":"showDetail","click .ins-wall-brick":"showDetail","click .ins-gallery-c-prev":"doSwitchPrev","click .ins-gallery-c-next":"doSwitchNext","click .ins-gallery-overlay-container__btn__left":"doOverlaySwitchPrev","click .ins-gallery-overlay-container__btn__right":"doOverlaySwitchNext","click .play":"playVideo","click .carouselbtn-previous":"doSwitchMorePrev","click .carouselbtn-next":"doSwitchMoreNext"},template:Handlebars.compile(l),ui:{insgallery:".ins-gallery",insGallerySlick:".ins-gallery-slick-container",controller:".ins-gallery-controller",brick:".ins-wall-brick",slideContainer:".gallery__container",overlaySlide:".ins-gallery-overlay-insItems",gallery:".gallery",showMoreBtn:".ins-gallery-btn",bigImage:"#bigImage",videoSlide:".videoSlide",carouselSlide:".ins-carousel-slick-container"},initialize:function(){a.prototype.initialize.apply(this,arguments);var e=this,t=e.el.getAttribute("data-hasSpaceing")||0;if(e.defaultController="22.4%",e.doubleWidth="-66.66666667%",e.showCount=e.el.getAttribute("data-showcount")||3,e.hasSpaceing=t?t*(e.showCount-1)/e.showCount+"rem":0,e.hashTag=e.el.getAttribute("data-hashtag"),e.productId=e.el.getAttribute("data-productid"),e.limit=e.el.getAttribute("data-limit")||100,e.parentflag=e.el.getAttribute("data-name"),e.cmsLabel=e.el.getAttribute("data-cmsLabel"),e.CmsVisitLabel=e.el.getAttribute("data-CmsVisitLabel")||i18n.t("social.visit_instagram"),e.cmsLink=e.el.getAttribute("data-cmsLink")||"https://www.instagram.com/millennium/",e.color=e.el.getAttribute("data-color")||"#BA0C2F",e.type=e.el.getAttribute("data-module-shape")||0,e.cityname=e.el.getAttribute("data-cityname"),e.nickname=e.el.getAttribute("data-nickname"),e.global=parseInt(e.el.getAttribute("data-global")||0),e.location=e.el.getAttribute("data-location")||1,e.uniq=e.el.getAttribute("data-uniq")||1,e.moreType=e.el.getAttribute("data-more-type")||0,e.isNewHeader=parseInt(e.el.getAttribute("data-isNewHeader")||0),e.pagesize=8,e.isInit=!0,e.imgindex=-1,e.hotelCount=0,e.currentIndex=0,"undefined"!=typeof hotelBrand&&null!=hotelBrand&&hotelBrand&&hotelBrand.hotels.length>0){e.hotelCount=hotelBrand.hotels.length,e.model=new o;var n=e.cmsLabel;e.model.set("CmsLabel",n?"#"+n:""),e.model.set("CmsVisitLabel",e.CmsVisitLabel),e.model.set("CmsLink",e.cmsLink),e.model.set("Type",parseInt(1)),e.model.set("Location",parseInt(e.location)),e.model.set("Color",e.color),e.model.set("HotelCount",e.hotelCount),e.model.set("IsNewHeader",e.isNewHeader),e.result={},e.result.hotelsModel=[],e.getListModel()}else if(1===e.global||e.hashTag&&e.hashTag.length>0||e.productId&&e.productId.length>0){e.model=new o({limit:e.limit,hashTag:e.hashTag,showCount:e.showCount,productId:e.productId,global:e.global});var n=e.productId?e.cmsLabel:e.hashTag;1===e.global&&(n=e.cmsLabel),e.model.set("CmsLabel",n?"#"+n:""),e.model.set("CmsVisitLabel",e.CmsVisitLabel),e.model.set("CmsLink",e.cmsLink),e.model.set("Type",parseInt(e.type)),e.model.set("Location",parseInt(e.location)),e.model.set("Color",e.color),e.model.set("HotelCount",e.hotelCount),e.model.set("IsNewHeader",e.isNewHeader),e.model.fetch().then(function(){function t(){if(n.offset().top<=o.scrollTop()+o.height()&&!e.lazyLoaded){e.lazyLoaded=!0,e.render();var t=e.ui.insgallery;if(t.length||(e.$el.removeClass("module-shape-00"),e.$el.removeClass("module-shape-01")),e.model.attributes.items.length>0){e.intervalAuto=null,0==parseInt(e.type)?(e.moduleMove=function(){e.lmove()},!r.ismobile(),e.setName(e.ui.insGallerySlick.children(".ins-imageItem"))):1==parseInt(e.type)&&(e.setName(),e.setImage(),e.run(0)),e.resizeWin();var i=e.currentSlide.children(".showMore");i.length<=0&&e.ui.showMoreBtn.hide()}else jQuery(".menu-property .item a[href='#social']").remove(),r.renderNavbar(),jQuery(".new-look-hotel__wall .newlook-hotel-configuration-title").hide()}}var n=e.$el,o=jQuery(window);o.on("scroll",i.throttle(t,500)),t()})}else jQuery(".menu-property .item a[href='#social']").remove(),jQuery(".new-look-hotel__wall .newlook-hotel-configuration-title").hide(),r.renderNavbar()},getListModel:function(){function e(){if(l.offset().top<=c.scrollTop()+c.height()&&!t.lazyLoaded){t.lazyLoaded=!0,t.render();var e=t.ui.insgallery;e.length||(t.$el.removeClass("module-shape-00"),t.$el.removeClass("module-shape-01")),t.setName(),t.setImage(),t.run(0),t.resizeWin();var n=t.currentSlide.children(".showMore");n.length<=0&&t.ui.showMoreBtn.hide()}}var t=this;if(t.currentIndex>=t.hotelCount){for(var n=[],r=0;r<t.result.hotelsModel.length;r++){var s=t.result.hotelsModel[r];n.push(s.attributes.items)}if(n=t.mergeModel(n),1==parseInt(t.uniq)){var a={};n=n.reduce(function(e,t){return a[t.id]?"":a[t.id]=e.push(t),e},[])}t.model.set("items",n);var l=t.$el,c=jQuery(window);return c.on("scroll",i.throttle(e,500)),void e()}var d=hotelBrand.hotels[t.currentIndex];1==parseInt(t.moreType)&&(d.id="");var s=new o({limit:t.limit,productId:d.id,hashTag:d.hashTag,locationName:d.location});s.fetch().then(function(){t.result.hotelsModel.push(s),t.currentIndex++,t.getListModel()})},mergeModel:function(e){for(var t=[],n=0,i=0;i<e.length;i++)n<e[i].length&&(n=e[i].length);for(var o=0;n>o;o++)for(var i=0;i<e.length;i++)e[i].length>o&&t.push(e[i][o]);return t},onRender:function(){var e=this;this.currentSlide=e.ui.insGallerySlick,this.initialSlick(),e.hotelCount>0&&this.initialCarouselSlick(),jQuery(window).resize(function(){e.resizeWin()}),jQuery(window).on("keyup",function(t){return 37==t.keyCode||39==t.keyCode||27==t.keyCode?(37==t.keyCode?e.doOverlaySwitchPrev():39==t.keyCode?e.doOverlaySwitchNext():27==t.keyCode&&e.setOverlay(),t.preventDefault(),!1):void 0}),e.isDisabled=!1},playVideo:function(e){var t=this.$(e.target).parent(),n=t.find("video");this.$(e.target).hide(),t.find(".video-placeholder").hide(),n.removeClass("opacity-zero");var i=n[0];i.play(),this.monitorPlayEnd(i)},monitorPlayEnd:function(e){var t=jQuery(e);t.on("ended",function(){t.addClass("opacity-zero"),t.parent().find(".play").show(),t.parent().find(".video-placeholder").show()})},closeVideo:function(){var e=this.ui.videoSlide,t=e.find("video");t.each(function(){var e=jQuery(this);e[0].currentTime=0,e[0].pause(),e.addClass("opacity-zero"),e.parent().find(".play").show(),e.parent().find(".video-placeholder").show()})},setImage:function(){var e,t=this;if("undefined"!=typeof socialimages&&null!=socialimages){var n=socialimages.bigimage;n&&n.image&&(e=t.ui.bigImage,t.setImageValue(e,n),t.pagesize--);var i=this.ui.brick.not(".ins-wall-brick-notchange"),o=1,r=i.length-o-0,s=Math.random(),a=0+Math.round(s*r),l=socialimages.randomimage;l&&l.image&&(e=this.ui.brick.not(".ins-wall-brick-notchange").eq(a),t.setImageValue(e,l),t.pagesize--)}},setImageValue:function(e,t){e.css("backgroundImage","url('"+t.image+"')"),jQuery(e).addClass("ins-wall-brick-notchange"),e.find(".ins_post-user").html(t.username),e.find(".ins_post-location").html(t.location),e.find(".ins_post-time").html(t.remark),e.find(".ins-icon").html("<spa n class="+t.icon+"></span>"),e.attr("data-id",""),e.find(".ins-gallery-More").length>0&&(e.find(".ins-gallery-More").attr("href",t.linkurl),e.find(".ins-gallery-More").attr("target","_blank"))},setName:function(e){e||(e=this.ui.brick.not("#Introduction"));for(var t=!0,n=0;n<e.length;n++){var i=jQuery(e[n]).find(".ins_post-location");void 0!=i.html()&&0!=i.html().length||(t?(i.html(this.cityname),t=!1):(i.html(this.nickname),t=!0))}},onDestroy:function(){this.isDisabled=!0},get:function(e){return this.ui.brick.not(".ins-wall-brick-notchange").eq(e)},next:function(){var e=this,t=e.model.attributes.items;return t[e.imgindex=(e.imgindex+1)%t.length]},item:function(e){var t=this,n=jQuery.Deferred(),i=400,o=200;return 1==t.isInit&&(i=0,o=0),e<t.pagesize?setTimeout(function(){var r=t.get(e),a=t.next();r.animate({opacity:.8},i,function(){r.css("backgroundImage","url('"+a.photo.original.url+"')").animate({opacity:1},o),r.find(".ins_post-user").html(a.user.username),r.find(".ins_post-time").html(s(a.timestamp).format("ddd, hh:mm A")),a.locationName&&r.find(".ins_post-location").html(a.locationName),r.attr("data-id",a.id),r.attr("data-curalate-item-container",""),r.attr("data-curalate-item-id",a.id),r.attr("data-curalate-item-detail",1),r.attr("data-curalate-item-click",""),r.attr("data-curalate-item-position",a.index),r.find(".ins-gallery-More").length>0&&r.find(".ins-gallery-More").attr("data-id",a.id),n.resolve(e+1)})},0):setTimeout(function(){t.isInit=!1,n.resolve(0)},1e4),n.promise()},run:function(e){var t=this;t.item(e).then(jQuery.proxy(this.run,this))},resizeWin:function(){var e=this,t=e.ui.insGallerySlick.children(".ins-imageItem"),n=e.ui.controller;r.ismobile()?(clearInterval(e.intervalAuto),t.css("width","calc(100% / 2)")):3!=e.showCount?(n.css("width","calc((100% / "+e.showCount+") - "+e.hasSpaceing+")"),t.css("width","calc((100% / "+e.showCount+") - "+e.hasSpaceing+")")):(n.css("width",e.defaultController),t.css("width","calc(100% / 3)"),this.ui.insGallerySlick.children(".double").css("width","calc(100% / 3 * 2)"))},lmove:function(){var e=this,t="-"+100/e.showCount+"%",n=e.currentSlide.children(".ins-imageItem").eq(0);e.currentSlide.finish().animate({marginLeft:n.hasClass("double")?e.doubleWidth:t},800,function(){e.ui.insGallerySlick.css({marginLeft:0}).append(n)})},rmove:function(){var e=this,t="-"+100/e.showCount+"%",n=0,i=e.currentSlide.children(".ins-imageItem"),o=i.eq(n),r=i.eq(++n);o.hasClass("double")||r.hasClass("double")||(r=i.eq(++n));var s=i.eq(-1);r.hasClass("double")&&1==n&&!s.hasClass("double")&&(s=jQuery.merge(i.eq(-2),s)),s.insertBefore(o),e.currentSlide.finish().css({marginLeft:2===s.length||s.hasClass("double")?e.doubleWidth:t}).animate({marginLeft:0},800)},setOverlay:function(e){var t=this;1==e?t.ui.gallery.fadeIn("500",function(){document.documentElement.scrollTop=t.ui.gallery.data("scrollTop")}):(t.closeVideo(),t.ui.gallery.fadeOut("fast",function(){document.documentElement.scrollTop=t.ui.gallery.data("scrollTop")}))},showDetail:function(e){e.stopPropagation();var t=this,n=jQuery(e.currentTarget),i=n.attr("data-id");if(i){var o=t.ui.slideContainer.find("*[data-id="+i+"]").parent().attr("data-slick-index"),r=document.documentElement.scrollTop;t.ui.gallery.data("scrollTop",r),t.setOverlay(1),t.initialSlick(o)}},initialSlick:function(e){var t=this;this.slicked?(this.currentIndex=this.currentOverlaySlide.slick("slickCurrentSlide"),this.currentOverlaySlide.slick("unslick"),this.slicked=!1):(this.slicked=!1,this.currentIndex=0),this.currentOverlaySlide=t.ui.overlaySlide.slick({speed:500,infinite:!0,arrows:!1,fade:!0,cssEase:"linear",rtl:"rtl"==jQuery("html").attr("dir")}),this.slicked=!0,"undefined"!=typeof e&&this.currentOverlaySlide.slick("slickGoTo",parseInt(e))},overlaylmove:function(e){this.closeVideo(),this.currentOverlaySlide.slick("slickNext")},overlayrmove:function(){this.closeVideo(),this.currentOverlaySlide.slick("slickPrev")},doOverlaySwitchPrev:function(){this.overlayrmove()},doOverlaySwitchNext:function(){this.overlaylmove()},doSwitchPrev:function(){this.doSwitch("prev")},doSwitchNext:function(){this.doSwitch("next")},doSwitch:function(e){clearInterval(this.intervalAuto),"prev"==e&&this.rmove(),"next"==e&&this.lmove()},initialCarouselSlick:function(e){var t=this;this.carouselMoreslicked?(this.currentMoreSlide.slick("unslick"),this.carouselMoreslicked=!1):this.carouselMoreslicked=!1,this.currentMoreSlide=t.ui.carouselSlide.slick({speed:800,infinite:!0,draggable:!1,arrows:!1,swipe:!0,slidesToShow:1,slidesToScroll:1,cssEase:"cubic-bezier(0,.96,.54,1.01)",rtl:"rtl"==jQuery("html").attr("dir")}),this.carouselMoreslicked=!0,"undefined"!=typeof e&&this.currentMoreSlide.slick("slickGoTo",parseInt(e))},doSwitchMorePrev:function(){this.doMoreSwitch("prev")},doSwitchMoreNext:function(){this.doMoreSwitch("next")},doMoreSwitch:function(e){"prev"==e&&this.currentMoreSlide.slick("slickPrev"),"next"==e&&this.currentMoreSlide.slick("slickNext")},showMore:function(e){var t=jQuery(e.currentTarget),n=this;this.currentSlide.each(function(){var e=6,i=jQuery(this).children(".showMore");i.length>0&&n.showMoreNChildren(i,e)<=0&&t.hide()})},showMoreNChildren:function(e,t){for(var n=e.filter(":hidden"),i=n.length,o=0;t>o&&i>o;o++)n.eq(o).removeClass("showMore");return parseInt(i)-parseInt(t)}},{selector:'[data-module="instagram-image-gallery"]'})},{"../../../ui/autocreator":2052,"../../../ui/slick/slick":2118,"../../../ui/util":2122,"../assets/template.hbs":1069,"../model/model":1070,"backbone.marionette":6,moment:16,underscore:42}],1070:[function(e,t,n){var i=e("underscore"),o=(e("../../../ui/util"),e("moment")),r=e("backbone");GalleryModel=t.exports=r.Model.extend({initialize:function(e){e&&(1==e.global?this.url=window.location.protocol+"//api.curalate.com/v1/reels/millenniumhotels.json?limit="+e.limit:e.productId?this.url=window.location.protocol+"//api.curalate.com/v1/reels/millenniumhotels.json?productId="+e.productId+"&limit="+e.limit:this.url=window.location.protocol+"//api.curalate.com/v1/reels/millenniumhotels.json?filters="+e.hashTag+"&limit="+e.limit,this.showCount=e.showCount,this.locationName=e.locationName)},parse:function(e){var t={},n=this;t.items=[];var r=1;if(e&&e.items.length>0){i.each(e.items,function(e){e.url&&e.url.indexOf("instagram.com")>=0&&(e.timestamp=o.unix(e.timestamp).format(),e.locationName=n.locationName,e.index=r++,t.items.push(e))}),3==this.showCount&&(t.items[0]["double"]="double");var s=t.items.slice(5,t.items.length);i.each(s,function(e){e.showMore="showMore"})}return t}})},{"../../../ui/util":2122,backbone:8,moment:16,underscore:42}],1069:[function(e,t,n){t.exports='{{#if items}}\r\n<div class="ins-gallery" data-curalate-display-type="gallery">\r\n        {{#ifCond Type \'==\' 0 }}\r\n        <div class="ins-gallery-controller">\r\n            <div class="ins-gallery-center">\r\n            <div class="ins-gallery-controller-follow">\r\n                <div class="follow-icon">\r\n                    <span class="icon-icon_B039"></span>\r\n                </div>\r\n                <a href="https://www.instagram.com/millennium/"  target="_blank" class="follow-text title"> {{local "form.follow_us"}}</a>\r\n                {{#if CmsLabel}}\r\n                    <div class="follow-text">{{CmsLabel}} </div>\r\n                {{/if}}\r\n            </div>\r\n            <div class="ins-gallery-controller-container">\r\n                <div class="controler-btn ins-gallery-c-prev">\r\n                    <span class="icon-icon_chervonLeft "></span>\r\n                    <span>{{local \'general.prev\'}}</span>\r\n                </div>\r\n                <div class="controler-btn ins-gallery-c-next">\r\n                    <span>{{local \'general.next\'}}</span>\r\n                    <span class="icon-icon_chervonRight"></span>\r\n                </div>\r\n            </div>\r\n            </div>\r\n        </div>\r\n        {{/ifCond}}\r\n        <div class="ins-gallery-overlay-slick-container">\r\n        <div class="gallery">\r\n            <div class="gallery-shape"></div>\r\n            <div class="ins-gallery-overlay-container">\r\n                <div class="ins-gallery-overlay-insItems">\r\n                    {{#each items}}\r\n                        <div class="gallery__container">\r\n                            <div class="gallery__container__content" data-id="{{id}}">\r\n                                {{#if video.medium.url}}\r\n                                    <div class="gallery__container__content__left videoSlide">\r\n                                        <div class="play"></div>\r\n                                        <video  src="{{encode video.medium.url}}" class="opacity-zero" controls="controls"\r\n                                               width="100%" height="100%">\r\n                                        </video>\r\n                                        <div class="video-placeholder" style="background-image: url(\'{{encode photo.original.url}}\')"></div>\r\n                                    </div>\r\n                                {{else}}\r\n                                    <div class="gallery__container__content__left" style="background-image: url(\'{{photo.original.url}}\')" data-backgroundurl-desktop="{{photo.original.url}}" data-backgroundurl-pad="{{photo.large_square.url}}" data-backgroundurl-mobile="{{photo.original.url}}">\r\n\r\n                                    </div>\r\n                                {{/if}}\r\n                                <div class="gallery__container__content__right">\r\n                                    <div class="gallery__container__content__right__top">\r\n                                        <div class="gallery__container__content__right__top__head">\r\n                                            <span style="background-image: url(\'{{user.small_square.url}}\')"></span>\r\n                                            <div class="gallery__container__content__right__top__head__msg">\r\n                                                <h2>{{user.username}}</h2>\r\n                                                <p>{{date-with-format timestamp \'DD MMMM YYYY\'}}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <a class="gallery__container__content__right__top__btn">\r\n                                            <i class="icon-icon_B017"></i>\r\n                                        </a>\r\n                                    </div>\r\n                                    <p class="gallery__container__content__right__text">\r\n                                      {{caption}}\r\n                                    </p>\r\n\r\n                                    <div class="gallery__container__content__right__hotel">\r\n                                        {{#if product}}\r\n                                            <span data-curalate-item-id="{{id}}" data-curalate-product-position="1" data-curalate-product-id="{{product.id}}" style="background-image: url(\'{{product.image}}\');"></span>\r\n                                            <div class="gallery__container__content__right__hotel__msg">\r\n                                                <p>{{product.name}}</p>\r\n                                                <a  data-curalate-product-click data-curalate-item-id="{{id}}"  data-curalate-product-id = "{{product.id}}"  href="{{product.link}}">{{local "maps.hotel_details"}}</a>\r\n                                            </div>\r\n                                        {{/if}}\r\n                                        <div class="gallery__container__content__right__hotel__bottom">\r\n                                           {{local "form.follow_us"}}\r\n                                            <a href="https://www.instagram.com/millennium/"  target="_blank"  >Instagram</a>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="ins-gallery-overlay-container__btn desktop-hide">\r\n                                <a class="ins-gallery-overlay-container__btn__left">\r\n                                    <i class="icon-icon_chervonLeft"></i>\r\n                                </a>\r\n                                <a class="ins-gallery-overlay-container__btn__right">\r\n                                    <i class="icon-icon_chervonRight"></i>\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    {{/each}}\r\n                </div>\r\n                <div class="ins-gallery-overlay-container__btn mobile-hide">\r\n                    <a class="ins-gallery-overlay-container__btn__left">\r\n                        <i class="icon-icon_chervonLeft"></i>\r\n                    </a>\r\n                    <a class="ins-gallery-overlay-container__btn__right">\r\n                        <i class="icon-icon_chervonRight"></i>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n        {{#ifCond Type \'==\' 1 }}\r\n        <div class="ins-wall">\r\n            {{#ifCond IsNewHeader \'==\' 1}}\r\n            <div class="ins-wall-header-new">\r\n                <div class="ins-wall-header-container">\r\n                    <h6 class="title">{{local "social.Wall_of_fame"}}</h6>\r\n                    <div class="more">\r\n                        <!--<a href="{{CmsLink}}"  target="_blank" >Visit {{CmsLabel}}  on Instagram</a>-->\r\n                        <a href="{{CmsLink}}"  target="_blank" >{{CmsVisitLabel}}</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {{/ifCond}}\r\n            {{#ifCond IsNewHeader \'==\' 0 }}\r\n            <div class="ins-wall-header">\r\n                <div class="ins-wall-header-container">\r\n                    <h6 class="title">{{local "social.Wall_of_fame"}}</h6>\r\n                    <span class="des">{{local "social.Share_your_moments"}}</span>\r\n                    <a href="{{CmsLink}}"  target="_blank" > {{CmsLabel}}</a>\r\n                </div>\r\n            </div>\r\n            {{/ifCond}}\r\n            <div class="ins-wall-main">\r\n                <div class="ins-wall-col" >\r\n                    <div class="ins-wall-brick " >\r\n                        <div class="ins-wall-gradient"></div>\r\n                        {{#ifCond Location \'==\' 1 }}\r\n                            <div class="ins-bottom ins-top">\r\n                            <div class="ins-iconlocation">\r\n                                <span class="icon-icon_F0272"></span>\r\n                            </div>\r\n                            <div class="ins__info">\r\n                                <div class="ins_post-location"></div>\r\n                            </div>\r\n                        </div>\r\n                        {{/ifCond}}\r\n                        <div class="ins-bottom">\r\n                            <div class="ins-icon">\r\n                                <span class="icon-icon_B039"></span>\r\n                            </div>\r\n                            <div class="ins__info">\r\n                                <div class="ins_post-user"></div>\r\n                                <div class="ins_post-time"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="ins-image-context">\r\n                            <div class="ins-gallery-center">\r\n                                <a class="ins-gallery-More" data-id="">\r\n                                    <span class="icon-icon_D001"></span>\r\n                                    <span >{{local \'general.view_more\'}}</span>\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div class="ins-wall-brick" >\r\n                        <div class="ins-wall-gradient"></div>\r\n                        {{#ifCond Location \'==\' 1 }}\r\n                                        <div class="ins-bottom ins-top">\r\n                                            <div class="ins-iconlocation">\r\n                                                <span class="icon-icon_F0272"></span>\r\n                                            </div>\r\n                                            <div class="ins__info">\r\n                                                <div class="ins_post-location"></div>\r\n                                            </div>\r\n                                        </div>\r\n                        {{/ifCond}}\r\n                        <div class="ins-bottom">\r\n                            <div class="ins-icon">\r\n                                <span class="icon-icon_B039"></span>\r\n                            </div>\r\n                            <div class="ins__info">\r\n                                <div class="ins_post-user"></div>\r\n                                <div class="ins_post-time"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="ins-image-context">\r\n                            <div class="ins-gallery-center">\r\n                                <a class="ins-gallery-More" data-id="">\r\n                                    <span class="icon-icon_D001"></span>\r\n                                    <span >{{local \'general.view_more\'}}</span>\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="ins-wall-brick " id="bigImage" >\r\n                        <div class="ins-wall-gradient"></div>\r\n                        {{#ifCond Location \'==\' 1 }}\r\n                                    <div class="ins-bottom ins-top">\r\n                                        <div class="ins-iconlocation">\r\n                                            <span class="icon-icon_F0272"></span>\r\n                                        </div>\r\n                                        <div class="ins__info">\r\n                                            <div class="ins_post-location"></div>\r\n                                        </div>\r\n                                    </div>\r\n                        {{/ifCond}}\r\n                        <div class="ins-bottom">\r\n                            <div class="ins-icon">\r\n                                <span class="icon-icon_B039"></span>\r\n                            </div>\r\n                            <div class="ins__info">\r\n                                <div class="ins_post-user"></div>\r\n                                <div class="ins_post-time"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="ins-image-context">\r\n                            <div class="ins-gallery-center">\r\n                                <a class="ins-gallery-More" data-id="">\r\n                                    <span class="icon-icon_D001"></span>\r\n                                    <span >{{local \'general.view_more\'}}</span>\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="ins-wall-col" >\r\n                    <div class="ins-wall-brick" >\r\n                        <div class="ins-wall-gradient"></div>\r\n                        {{#ifCond Location \'==\' 1 }}\r\n                            <div class="ins-bottom ins-top">\r\n                                <div class="ins-iconlocation">\r\n                                    <span class="icon-icon_F0272"></span>\r\n                                </div>\r\n                                <div class="ins__info">\r\n                                    <div class="ins_post-location"></div>\r\n                                </div>\r\n                            </div>\r\n                        {{/ifCond}}\r\n                        <div class="ins-bottom">\r\n                            <div class="ins-icon">\r\n                                <span class="icon-icon_B039"></span>\r\n                            </div>\r\n                            <div class="ins__info">\r\n                                <div class="ins_post-user"></div>\r\n                                <div class="ins_post-time"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="ins-image-context">\r\n                            <div class="ins-gallery-center">\r\n                                <a class="ins-gallery-More" data-id="">\r\n                                    <span class="icon-icon_D001"></span>\r\n                                    <span >{{local \'general.view_more\'}}</span>\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="ins-wall-brick ins-wall-brick-notchange" id="Introduction" style=" background:{{Color}}">\r\n                        <div class="ins-wall-content">\r\n                            <div class="follow-icon">\r\n                                <span class="icon-icon_B039"></span>\r\n                            </div>\r\n                            <!--<h6 class="title">{{local "social.Wall_of_fame"}}</h6>-->\r\n                            <span class="des">{{local "social.Share_your_moments"}}</span>\r\n                            {{#if CmsLabel}}\r\n                                <a href="{{CmsLink}}"  target="_blank" > {{CmsLabel}}</a>\r\n                            {{/if}}\r\n                        </div>\r\n                    </div>\r\n                    <div class="ins-wall-brick" >\r\n                        <div class="ins-wall-gradient"></div>\r\n                        {{#ifCond Location \'==\' 1 }}\r\n                            <div class="ins-bottom ins-top">\r\n                                <div class="ins-iconlocation">\r\n                                    <span class="icon-icon_F0272"></span>\r\n                                </div>\r\n                                <div class="ins__info">\r\n                                    <div class="ins_post-location"></div>\r\n                                </div>\r\n                            </div>\r\n                        {{/ifCond}}\r\n                        <div class="ins-image-context">\r\n                            <div class="ins-gallery-center">\r\n                                <a class="ins-gallery-More" data-id="">\r\n                                    <span class="icon-icon_D001"></span>\r\n                                    <span >{{local \'general.view_more\'}}</span>\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="ins-wall-col" >\r\n                    <div class="ins-wall-brick">\r\n                        <div class="ins-wall-gradient"></div>\r\n                        {{#ifCond Location \'==\' 1 }}\r\n                            <div class="ins-bottom ins-top">\r\n                                <div class="ins-iconlocation">\r\n                                    <span class="icon-icon_F0272"></span>\r\n                                </div>\r\n                                <div class="ins__info">\r\n                                    <div class="ins_post-location"></div>\r\n                                </div>\r\n                            </div>\r\n                        {{/ifCond}}\r\n                        <div class="ins-bottom">\r\n                            <div class="ins-icon">\r\n                                <span class="icon-icon_B039"></span>\r\n                            </div>\r\n                            <div class="ins__info">\r\n                                <div class="ins_post-user"></div>\r\n                                <div class="ins_post-time"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="ins-image-context">\r\n                            <div class="ins-gallery-center">\r\n                                <a class="ins-gallery-More" data-id="">\r\n                                    <span class="icon-icon_D001"></span>\r\n                                    <span >{{local \'general.view_more\'}}</span>\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="ins-wall-brick">\r\n                        <div class="ins-wall-gradient"></div>\r\n                        {{#ifCond Location \'==\' 1 }}\r\n                            <div class="ins-bottom ins-top">\r\n                                <div class="ins-iconlocation">\r\n                                    <span class="icon-icon_F0272"></span>\r\n                                </div>\r\n                                <div class="ins__info">\r\n                                    <div class="ins_post-location"></div>\r\n                                </div>\r\n                            </div>\r\n                        {{/ifCond}}\r\n                        <div class="ins-bottom">\r\n                            <div class="ins-icon">\r\n                                <span class="icon-icon_B039"></span>\r\n                            </div>\r\n                            <div class="ins__info">\r\n                                <div class="ins_post-user"></div>\r\n                                <div class="ins_post-time"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="ins-image-context">\r\n                            <div class="ins-gallery-center">\r\n                                <a class="ins-gallery-More" data-id="">\r\n                                    <span class="icon-icon_D001"></span>\r\n                                    <span >{{local \'general.view_more\'}}</span>\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="ins-wall-brick">\r\n                        <div class="ins-wall-gradient"></div>\r\n                        {{#ifCond Location \'==\' 1 }}\r\n                            <div class="ins-bottom ins-top">\r\n                                <div class="ins-iconlocation">\r\n                                    <span class="icon-icon_F0272"></span>\r\n                                </div>\r\n                                <div class="ins__info">\r\n                                    <div class="ins_post-location"></div>\r\n                                </div>\r\n                            </div>\r\n                        {{/ifCond}}\r\n                        <div class="ins-bottom">\r\n                            <div class="ins-icon">\r\n                                <span class="icon-icon_B039"></span>\r\n                            </div>\r\n                            <div class="ins__info">\r\n                                <div class="ins_post-user"></div>\r\n                                <div class="ins_post-time"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="ins-image-context">\r\n                            <div class="ins-gallery-center">\r\n                                <a class="ins-gallery-More" data-id="">\r\n                                    <span class="icon-icon_D001"></span>\r\n                                    <span >{{local \'general.view_more\'}}</span>\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        {{/ifCond}}\r\n        {{#ifCond HotelCount \'==\' 0 }}\r\n        <div class="ins-gallery-slick-container {{#ifCond Type \'==\'1}}ins-hide{{/ifCond}}">\r\n            <div class="ins-gallery-controller-mobile"  style=" background:{{Color}}">\r\n                    <div style="text-align: center;">\r\n                        <div class="ins-gallery-center">\r\n                            {{#if CmsLabel}}\r\n                                <div class="follow-text">{{CmsLabel}} </div>\r\n                            {{/if}}\r\n                            <a href="https://www.instagram.com/millennium/"  class="follow-text title"> {{local "form.follow_us"}}</a>\r\n                            <div class="follow-icon">\r\n                                <span class="icon-icon_B039"></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            {{#each items}}\r\n                <div data-curalate-item-click data-curalate-item-detail=“1” data-curalate-item-position="{{index}}" data-curalate-item-container  data-curalate-item-id="{{id}}"  data-id="{{id}}" style="background-image: url(\'{{photo.original.url}}\')"\r\n                      data-backgroundurl-desktop="{{photo.original.url}}" data-backgroundurl-pad="{{photo.large_square.url}}" data-backgroundurl-mobile="{{photo.original.url}}"\r\n                      class="ins-imageItem {{double}} {{showMore}} {{image_anchor}}"  >\r\n                    {{#ifCond Location \'==\' 1 }}\r\n                        <div class="ins-bottom ins-top">\r\n                            <div class="ins-iconlocation">\r\n                                <span class="icon-icon_F0272"></span>\r\n                            </div>\r\n                            <div class="ins__info">\r\n                                <div class="ins_post-location"></div>\r\n                            </div>\r\n                        </div>\r\n                    {{/ifCond}}\r\n                    <div class="ins-bottom">\r\n                        <div class="ins-icon">\r\n                            <span class="icon-icon_B039"></span>\r\n                        </div>\r\n                        <div class="ins__info">\r\n                            <div class="ins_post-user"> {{user.username}}</div>\r\n                            <div class="ins_post-time"> {{date-with-format timestamp \'ddd, hh:mm A\'}}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="ins-image-context">\r\n                        <div class="ins-gallery-center">\r\n                            <a class="ins-gallery-More" data-id="{{id}}">\r\n                                <span class="icon-icon_D001"></span>\r\n                                <span >{{local \'general.view_more\'}}</span>\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            {{/each}}\r\n        </div>\r\n        {{/ifCond}}\r\n        <div class="ins-gallery-btn">\r\n            <div class="content-btn">{{local \'general.more\'}}</div>\r\n        </div>\r\n\r\n</div>\r\n{{#ifCond HotelCount \'>\' 0 }}\r\n<div class="ins-aes">\r\n    <div class="ins-aes-carousel">\r\n        <div class="ins-aes-carousel-info" style=" background:{{Color}}">\r\n\r\n                <div class="ins-aes-content">\r\n                    <div class="follow-icon">\r\n                        <span class="icon-icon_B039"></span>\r\n                    </div>\r\n                    <div class="info">\r\n                        <!--<h6 class="title">{{local "social.Wall_of_fame"}}</h6>-->\r\n                        <span class="des">{{local "social.Share_your_moments"}}</span>\r\n                        {{#if CmsLabel}}\r\n                            <a href="https://www.instagram.com/millennium/"  target="_blank" > {{CmsLabel}}</a>\r\n                        {{/if}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        <div class="ins-carousel-container">\r\n            <a class="carouselbtn carouselbtn-next carouselbtn-normal">\r\n                <div class="carouselbtn-icon carouselbtn-icon-normal">\r\n                    <i class="icon icon-icon_chervonRight"></i>\r\n                </div>\r\n            </a>\r\n            <a class="carouselbtn carouselbtn-previous carouselbtn-normal">\r\n                <div class="carouselbtn-icon">\r\n                    <i class="icon icon-icon_chervonRight"></i>\r\n                </div>\r\n            </a>\r\n            <div class="ins-carousel-slick-container">\r\n                {{#each items}}\r\n                    <div data-id="{{id}}" class="ins-imageItem {{image_anchor}}" style="background-image: url(\'{{photo.original.url}}\')">\r\n                        <div class="ins-aes-gradient"></div>\r\n                        <div class="ins-bottom">\r\n                            <div class="ins-icon">\r\n                                <span class="icon-icon_B039"></span>\r\n                            </div>\r\n                            <div class="ins__info">\r\n                                <div class="ins_post-user"> {{user.username}}</div>\r\n                                <div class="ins_post-time"> {{date-with-format timestamp \'ddd, hh:mm A\'}}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                {{/each}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n{{/ifCond}}\r\n{{/if}}';
},{}],1065:[function(e,t,n){var i=(e("underscore"),e("backbone.marionette"),e("../model/model")),o=e("../../../ui/util"),r=e("moment"),s=e("../../../ui/autocreator"),a=e("../assets/template.hbs");Slick=e("../../../ui/slick/slick"),CarouselView=t.exports=o.registry.carousel=s.extend({events:{"click .gallery__container__content__right__top__btn":"setOverlay","click .ins-aes-item":"showDetail","click .ins-gallery-overlay-container__btn__left":"doOverlaySwitchPrev","click .ins-gallery-overlay-container__btn__right":"doOverlaySwitchNext","click .play":"playVideo","click .carouselbtn-previous":"doSwitchPrev","click .carouselbtn-next":"doSwitchNext","click .ins-imageItem":"showDetail"},template:Handlebars.compile(a),ui:{brick:".ins-aes-item",slideContainer:".gallery__container",overlaySlide:".ins-gallery-overlay-insItems",gallery:".gallery",videoSlide:".videoSlide",carouselSlide:".ins-carousel-slick-container",insimageItem:".ins-imageItem",largeItem:".ins-aes-item-large"},initialize:function(){s.prototype.initialize.apply(this,arguments);var e=this;e.showCount=e.el.getAttribute("data-showcount")||3,e.cmsLabel=e.el.getAttribute("data-cmsLabel"),e.color=e.el.getAttribute("data-color")||"#BA0C2F",e.limit=e.el.getAttribute("data-limit")||30,e.isTop=e.el.getAttribute("data-isTop")||0,e.hashTag=e.el.getAttribute("data-hashtag")||"",e.productId=e.el.getAttribute("data-productid")||"",e.cityname=e.el.getAttribute("data-cityname"),e.nickname=e.el.getAttribute("data-nickname"),e.pagesize=e.showCount,1==e.isTop&&(e.pagesize=parseInt(e.showCount)+1),e.isInit=!0,e.imgindex=-1,e.model=new i({limit:e.limit,isTop:e.isTop,hashTag:e.hashTag,showCount:e.showCount,productId:e.productId});var t=e.cmsLabel;e.model.set("CmsLabel",t?"#"+t:""),e.model.set("Color",e.color),e.model.set("ShowArry",new Array(parseInt(e.showCount))),e.model.fetch().then(function(){e.render(),e.run(0)})},onRender:function(){var e=this;this.initialSlick(),this.initialCarouselSlick(),jQuery(window).on("keyup",function(t){return 37==t.keyCode||39==t.keyCode||27==t.keyCode?(37==t.keyCode?e.doOverlaySwitchPrev():39==t.keyCode?e.doOverlaySwitchNext():27==t.keyCode&&e.setOverlay(),t.preventDefault(),!1):void 0});var t=(100/parseInt(parseInt(e.showCount)+1)).toFixed(2)+"%";e.ui.brick.css("width",t),e.isDisabled=!1},playVideo:function(e){var t=this.$(e.target).parent(),n=t.find("video");this.$(e.target).hide(),t.find(".video-placeholder").hide(),n.removeClass("opacity-zero");var i=n[0];i.play(),this.monitorPlayEnd(i)},monitorPlayEnd:function(e){var t=jQuery(e);t.on("ended",function(){t.addClass("opacity-zero"),t.parent().find(".play").show(),t.parent().find(".video-placeholder").show()})},closeVideo:function(){var e=this.ui.videoSlide,t=e.find("video");t.each(function(){var e=jQuery(this);e[0].currentTime=0,e[0].pause(),e.addClass("opacity-zero"),e.parent().find(".play").show(),e.parent().find(".video-placeholder").show()})},setName:function(){for(var e=this.ui.brick.not(".ins-aes-item-notchange"),t=this.ui.insimageItem,n=!0,i=0;i<e.length;i++)n?(jQuery(e[i]).find(".ins_post-location").html(this.cityname),n=!1):(jQuery(e[i]).find(".ins_post-location").html(this.nickname),n=!0);for(var i=0;i<t.length;i++)n?(jQuery(t[i]).find(".ins_post-location").html(this.cityname),n=!1):(jQuery(t[i]).find(".ins_post-location").html(this.nickname),n=!0)},onDestroy:function(){this.isDisabled=!0},get:function(e){return this.ui.brick.not(".ins-aes-item-notchange").eq(e)},next:function(){var e=this,t=e.model.attributes.items;return t[e.imgindex=(e.imgindex+1)%t.length]},item:function(e){var t=this,n=jQuery.Deferred(),i=400,o=200;return 1==t.isInit&&(i=0,o=0),e<t.pagesize?setTimeout(function(){var s=t.get(e),a=t.next();s.animate({opacity:.8},i,function(){s.css("backgroundImage","url('"+a.photo.original.url+"')").animate({opacity:1},o),s.find(".ins_post-user").html(a.user.username),s.find(".ins_post-time").html(r(a.timestamp).format("ddd, hh:mm A")),s.attr("data-id",a.id),s.attr("data-curalate-item-container",""),s.attr("data-curalate-item-id",a.id),s.attr("data-curalate-item-detail",1),s.attr("data-curalate-item-click",""),s.attr("data-curalate-item-position",a.index),s.find(".ins-gallery-More").length>0&&s.find(".ins-gallery-More").attr("data-id",a.id),n.resolve(e+1)})},0):setTimeout(function(){t.isInit=!1,n.resolve(0)},1e4),n.promise()},run:function(e){var t=this;t.item(e).then(jQuery.proxy(this.run,this))},initialCarouselSlick:function(e){var t=this;this.carouselslicked?(this.currentSlide.slick("unslick"),this.carouselslicked=!1):this.carouselslicked=!1,this.currentSlide=t.ui.carouselSlide.slick({speed:800,infinite:!0,draggable:!1,arrows:!1,swipe:!0,slidesToShow:1,slidesToScroll:1,cssEase:"cubic-bezier(0,.96,.54,1.01)",rtl:"rtl"==jQuery("html").attr("dir")}),this.carouselslicked=!0,"undefined"!=typeof e&&this.currentSlide.slick("slickGoTo",parseInt(e))},doSwitchPrev:function(){this.doSwitch("prev")},doSwitchNext:function(){this.doSwitch("next")},doSwitch:function(e){"prev"==e&&this.currentSlide.slick("slickPrev"),"next"==e&&this.currentSlide.slick("slickNext")},setOverlay:function(e){var t=this;1==e?t.ui.gallery.fadeIn("500",function(){document.documentElement.scrollTop=t.ui.gallery.data("scrollTop")}):(t.closeVideo(),t.ui.gallery.fadeOut("fast",function(){document.documentElement.scrollTop=t.ui.gallery.data("scrollTop")}))},showDetail:function(e){e.stopPropagation();var t=this,n=jQuery(e.currentTarget),i=n.attr("data-id");if(i){var o=t.ui.slideContainer.find("*[data-id="+i+"]").parent().attr("data-slick-index"),r=document.documentElement.scrollTop;t.ui.gallery.data("scrollTop",r),t.setOverlay(1),t.initialSlick(o)}},initialSlick:function(e){var t=this;this.slicked?(this.currentIndex=this.currentOverlaySlide.slick("slickCurrentSlide"),this.currentOverlaySlide.slick("unslick"),this.slicked=!1):(this.slicked=!1,this.currentIndex=0),this.currentOverlaySlide=t.ui.overlaySlide.slick({speed:500,infinite:!0,arrows:!1,fade:!0,cssEase:"linear",rtl:"rtl"==jQuery("html").attr("dir")}),this.slicked=!0,"undefined"!=typeof e&&this.currentOverlaySlide.slick("slickGoTo",parseInt(e))},doOverlaySwitchPrev:function(){this.closeVideo(),this.currentOverlaySlide.slick("slickPrev")},doOverlaySwitchNext:function(){this.closeVideo(),this.currentOverlaySlide.slick("slickNext")}},{selector:'[data-module="instagram-image-aesthetic"]'})},{"../../../ui/autocreator":2052,"../../../ui/slick/slick":2118,"../../../ui/util":2122,"../assets/template.hbs":1063,"../model/model":1064,"backbone.marionette":6,moment:16,underscore:42}],1064:[function(e,t,n){var i=e("underscore"),o=(e("../../../ui/util"),e("moment")),r=e("backbone");GalleryModel=t.exports=r.Model.extend({initialize:function(e){e.productId?this.url=window.location.protocol+"//api.curalate.com/v1/reels/millenniumhotels.json?productId="+e.productId+"&limit="+e.limit:this.url=window.location.protocol+"//api.curalate.com/v1/reels/millenniumhotels.json?filters="+e.hashTag+"&limit="+e.limit},parse:function(e){var t={};t.items=[];var n=1;return e&&e.items.length>0&&i.each(e.items,function(e){e.url&&e.url.indexOf("instagram.com")>=0&&(e.index=n++,e.timestamp=o.unix(e.timestamp).format(),t.items.push(e))}),t}})},{"../../../ui/util":2122,backbone:8,moment:16,underscore:42}],1063:[function(e,t,n){t.exports='{{#if items}}\r\n    <div class="ins-aes" data-curalate-display-type = "gallery">\r\n        <div class="ins-aes-photos">\r\n           {{#ifCond isTop \'==\' 1 }}\r\n                <div class="ins-aes-item ins-aes-item-large" data-id="" >\r\n                    <div class="ins-aes-gradient"></div>\r\n                    <div class="ins-bottom">\r\n                        <div class="ins-icon">\r\n                            <span class="icon-icon_B039"></span>\r\n                        </div>\r\n                        <div class="ins__info">\r\n                            <div class="ins_post-user"></div>\r\n                            <div class="ins_post-time"> </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="ins-image-context">\r\n                        <div class="ins-aes-center">\r\n                            <a class="ins-aes-more" data-id="">\r\n                                <span class="icon-icon_D001"></span>\r\n                                <span>View More </span>\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            {{/ifCond}}\r\n            <div class="ins-aes-item ins-aes-item-notchange"   style=" background:{{Color}}">\r\n                <div class="ins-aes-content">\r\n                    <div class="follow-icon">\r\n                        <span class="icon-icon_B039"></span>\r\n                    </div>\r\n                    <!--<h6 class="title">{{local "social.Wall_of_fame"}}</h6>-->\r\n                    <span class="des">{{local "social.Share_your_moments"}}</span>\r\n                    {{#if CmsLabel}}\r\n                        <a href="https://www.instagram.com/millennium/"  target="_blank" > {{CmsLabel}}</a>\r\n                    {{/if}}\r\n                </div>\r\n            </div>\r\n            {{#each ShowArry}}\r\n                <div class="ins-aes-item" data-id="" >\r\n                <div class="ins-aes-gradient"></div>\r\n                <div class="ins-bottom">\r\n                    <div class="ins-icon">\r\n                        <span class="icon-icon_B039"></span>\r\n                    </div>\r\n                    <div class="ins__info">\r\n                        <div class="ins_post-user"></div>\r\n                        <div class="ins_post-time"> </div>\r\n                    </div>\r\n                </div>\r\n                <div class="ins-image-context">\r\n                    <div class="ins-aes-center">\r\n                        <a class="ins-aes-more" data-id="">\r\n                            <span class="icon-icon_D001"></span>\r\n                            <span>{{local \'general.view_more\'}}</span>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {{/each}}\r\n        </div>\r\n        <div class="ins-aes-carousel">\r\n            {{#ifCond isTop \'==\' 0 }}\r\n                <div class="ins-aes-carousel-info" style=" background:{{Color}}">\r\n\r\n                <div class="ins-aes-content">\r\n                    <div class="follow-icon">\r\n                        <span class="icon-icon_B039"></span>\r\n                    </div>\r\n                    <div class="info">\r\n                        <!--<h6 class="title">{{local "social.Wall_of_fame"}}</h6>-->\r\n                        <span class="des">{{local "social.Share_your_moments"}}</span>\r\n                        {{#if CmsLabel}}\r\n                            <a href="https://www.instagram.com/millennium/"  target="_blank" > {{CmsLabel}}</a>\r\n                        {{/if}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {{/ifCond}}\r\n            {{#ifCond isTop \'==\' 1 }}\r\n                <div class="ins-aes-carousel-info" style=" background:{{Color}}">\r\n\r\n                    <div class="ins-aes-content">\r\n                        <div class="follow-icon">\r\n                            <span class="icon-icon_B039"></span>\r\n                        </div>\r\n                        <div class="info">\r\n                            <!--<h6 class="title">{{local "social.Wall_of_fame"}}</h6>-->\r\n                            <span class="des">{{local "social.Share_your_moments"}}</span>\r\n                            {{#if CmsLabel}}\r\n                                <a href="https://www.instagram.com/millennium/"  target="_blank" > {{CmsLabel}}</a>\r\n                            {{/if}}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            {{/ifCond}}\r\n            <div class="ins-carousel-container">\r\n                {{#ifCond isTop \'==\' 0 }}\r\n                <a class="carouselbtn carouselbtn-next">\r\n                    <div class="carouselbtn-icon">\r\n                        <i class="icon icon-icon_B021"></i>\r\n                    </div>\r\n                </a>\r\n                <a class="carouselbtn carouselbtn-previous">\r\n                    <div class="carouselbtn-icon">\r\n                        <i class="icon icon-icon_B021"></i>\r\n                    </div>\r\n                </a>\r\n                {{/ifCond}}\r\n                {{#ifCond isTop \'==\' 1 }}\r\n                    <a class="carouselbtn carouselbtn-next carouselbtn-normal">\r\n                        <div class="carouselbtn-icon carouselbtn-icon-normal">\r\n                        <i class="icon icon-icon_chervonRight"></i>\r\n                        </div>\r\n                    </a>\r\n                    <a class="carouselbtn carouselbtn-previous carouselbtn-normal">\r\n                        <div class="carouselbtn-icon">\r\n                        <i class="icon icon-icon_chervonRight"></i>\r\n                        </div>\r\n                    </a>\r\n                {{/ifCond}}\r\n                <div class="ins-carousel-slick-container">\r\n                 {{#each items}}\r\n                    <div data-id="{{id}}" class="ins-imageItem {{image_anchor}}" style="background-image: url(\'{{photo.original.url}}\')">\r\n                        <div class="ins-aes-gradient"></div>\r\n                        <div class="ins-bottom">\r\n                            <div class="ins-icon">\r\n                                <span class="icon-icon_B039"></span>\r\n                            </div>\r\n                            <div class="ins__info">\r\n                                <div class="ins_post-user"> {{user.username}}</div>\r\n                                <div class="ins_post-time"> {{date-with-format timestamp \'ddd, hh:mm A\'}}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                 {{/each}}\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n        <div class="ins-gallery-overlay-slick-container">\r\n            <div class="gallery">\r\n                <div class="ins-gallery-overlay-container">\r\n                    <div class="ins-gallery-overlay-insItems">\r\n                        {{#each items}}\r\n                            <div class="gallery__container">\r\n                                <div class="gallery__container__content" data-id="{{id}}">\r\n                                    {{#if video.medium.url}}\r\n                                        <div class="gallery__container__content__left videoSlide">\r\n                                            <div class="play"></div>\r\n                                            <video src="{{encode video.medium.url}}" class="opacity-zero" controls="controls"\r\n                                                   width="100%" height="100%">\r\n                                            </video>\r\n                                            <div class="video-placeholder" style="background-image: url(\'{{encode photo.original.url}}\')"></div>\r\n                                        </div>\r\n                                    {{else}}\r\n                                        <div class="gallery__container__content__left" style="background-image: url(\'{{photo.original.url}}\')" data-backgroundurl-desktop="{{photo.original.url}}" data-backgroundurl-pad="{{photo.large_square.url}}" data-backgroundurl-mobile="{{photo.original.url}}">\r\n\r\n                                        </div>\r\n                                    {{/if}}\r\n                                    <div class="gallery__container__content__right">\r\n                                        <div class="gallery__container__content__right__top">\r\n                                            <div class="gallery__container__content__right__top__head">\r\n                                                <span style="background-image: url(\'{{user.small_square.url}}\')"></span>\r\n                                                <div class="gallery__container__content__right__top__head__msg">\r\n                                                    <h2>{{user.username}}</h2>\r\n                                                    <p>{{#date-with-format timestamp \'DD MMMM YYYY\'}}{{/date-with-format}}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <a class="gallery__container__content__right__top__btn">\r\n                                                <i class="icon-icon_B017"></i>\r\n                                            </a>\r\n                                        </div>\r\n                                        <p class="gallery__container__content__right__text">\r\n                                            {{caption}}\r\n                                        </p>\r\n\r\n                                        <div class="gallery__container__content__right__hotel">\r\n                                            {{#if product}}\r\n                                                <span data-curalate-item-id="{{id}}" data-curalate-product-position="1" data-curalate-product-id="{{product.id}}" style="background-image: url(\'{{product.image}}\');"></span>\r\n                                                <div class="gallery__container__content__right__hotel__msg">\r\n                                                    <p>{{product.name}}</p>\r\n                                                    <a data-curalate-product-click data-curalate-item-id="{{id}}"  data-curalate-product-id = "{{product.id}}" href="{{product.link}}">{{local "maps.hotel_details"}}</a>\r\n                                                </div>\r\n                                            {{/if}}\r\n                                            <div class="gallery__container__content__right__hotel__bottom">\r\n                                                {{local "form.follow_us"}}\r\n                                                <a  href="https://www.instagram.com/millennium/"  target="_blank"  >Instagram</a>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="ins-gallery-overlay-container__btn desktop-hide">\r\n                                    <a class="ins-gallery-overlay-container__btn__left">\r\n                                        <i class="icon-icon_chervonLeft"></i>\r\n                                    </a>\r\n                                    <a class="ins-gallery-overlay-container__btn__right">\r\n                                        <i class="icon-icon_chervonRight"></i>\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                        {{/each}}\r\n                    </div>\r\n                    <div class="ins-gallery-overlay-container__btn mobile-hide">\r\n                        <a class="ins-gallery-overlay-container__btn__left">\r\n                            <i class="icon-icon_chervonLeft"></i>\r\n                        </a>\r\n                        <a class="ins-gallery-overlay-container__btn__right">\r\n                            <i class="icon-icon_chervonRight"></i>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n{{/if}}'},{}],1033:[function(e,t,n){var i=e("../../destination/list/waterfall-vertical.js"),o=(e("underscore"),e("backbone.marionette"),e("../model/model")),r=e("../../ui/util"),s=(e("moment"),e("../../ui/autocreator")),a=e("../assets/template.hbs");t.exports=r.registry.hotel=s.extend({template:Handlebars.compile(a),ui:{container:".contents",_hotelList:".hotel-list",listTitle:".content-title"},initialize:function(){s.prototype.initialize.apply(this,arguments);var e=this;e.type=e.el.getAttribute("data-type")||3,e.id=e.el.getAttribute("data-id")||"",e.on("noresult",function(){var t=jQuery(".x-tpl-collection-hotel");0==e.ui._hotelList.length&&t&&t.hide()}),e.model=new o({id:e.id,type:e.type}),e.model.fetch().then(function(){e.render(),e.trigger("noresult")}).fail(function(){e.trigger("noresult")})},onRender:function(){jQuery("[href*='taichung']").closest(".row").css({"padding-left":"0"}).appendTo(jQuery("[href*='beijing']").closest(".row"));var e=this,t=function(){e.ui.container.get(0)&&new i({container:e.ui.container.get(0),colWidth:33.33333,colCount:3})},n=-1;jQuery(window).resize(function(){clearTimeout(n),n=setTimeout(function(){t()},300)}),t()},afterRender:function(){}},{selector:'[data-module="hotel-listing"]'})},{"../../destination/list/waterfall-vertical.js":795,"../../ui/autocreator":2052,"../../ui/util":2122,"../assets/template.hbs":1031,"../model/model":1032,"backbone.marionette":6,moment:16,underscore:42}],1032:[function(e,t,n){var i=e("underscore"),o=(e("../../ui/util"),e("moment"),e("../../../../config/host.js")),r=e("backbone");GalleryModel=t.exports=r.Model.extend({initialize:function(e){1==e.type?this.url=o.getURL("api","collections/collection/hotel/"+e.id):2==e.type?this.url=o.getURL("api","collections/brand/hotel/"+e.id):3==e.type&&(this.url=o.getURL("api","collections/brand/hotels/"+e.id))},parse:function(e){var t={};return t.locations=[],e&&e.length>0&&i.each(e,function(e){t.locations.push(e)}),t}})},{"../../../../config/host.js":45,"../../ui/util":2122,backbone:8,moment:16,underscore:42}],1031:[function(e,t,n){t.exports='{{#if locations}}\r\n    <div class="hotel-list" style="display: block;">\r\n        <div class="content-title">{{local "general.Countries_and_Regions"}}</div>\r\n        <div class="content">\r\n            <div class="contents">\r\n                {{#each locations}}\r\n                    <div class="row">\r\n                        <h4 class="country">{{CountryName}}</h4>\r\n                        <ul>\r\n                            {{#each Citys}}\r\n                                <li><a href="{{CityUrl}}" class="city">{{CityName}}</a></li>\r\n                                {{#each Hotels}}\r\n                                    <li><a href="{{HotelUrl}}">{{HotelName}}</a></li>\r\n                                {{/each}}\r\n                            {{/each}}\r\n                        </ul>\r\n                    </div>\r\n                {{/each}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n{{/if}}'},{}],1028:[function(e,t,n){var i=(e("backbone"),e("underscore"),e("backbone.marionette"),e("moment"),e("../../ui/slick/slick"),e("../../ui/autocreator")),o=e("../model/model"),r=e("../assets/template.hbs");featureView=t.exports=i.extend({template:Handlebars.compile(r),ui:{featureText:".tpl-text"},initialize:function(){var e=this;i.prototype.initialize.apply(this,arguments);var t=e.$el.parents(".tpl-region-card").data("id");e.model=new o(t),e.model.fetch().then(function(){e.render()})},onRender:function(){var e=this;e.ui.featureText.slick({dots:!0,infinite:!0,speed:500,fade:!1,adaptiveHeight:!0,prevArrow:".tpl-button .prev",nextArrow:".tpl-button .next",appendDots:".tpl-button .dots-role",rtl:"rtl"==jQuery("html").attr("dir")})}},{selector:'[data-module="feature-price-module"]'})},{"../../ui/autocreator":2052,"../../ui/slick/slick":2118,"../assets/template.hbs":1026,"../model/model":1027,backbone:8,"backbone.marionette":6,moment:16,underscore:42}],1027:[function(e,t,n){var i=(e("underscore"),e("backbone")),o=e("../../../../config/host.js");CompetitionModel=t.exports=i.Model.extend({initialize:function(e){this.url=o.getURL("api","city/explorregion?id="+e)}})},{"../../../../config/host.js":45,backbone:8,underscore:42}],1026:[function(e,t,n){t.exports='\r\n<div class="tpl-text">\r\n    {{#each regiondata}}\r\n        <div class="item">\r\n            <div class="region-title">{{regiontitle}}</div>\r\n            <div class="region-details">\r\n                {{#each cityList}}\r\n                    <a href="{{bookingurl}}" class="rd-row">\r\n                        <div class="tpl-local">\r\n                            <h3>{{cityname}}</h3>\r\n                            <h6>{{countyname}}</h6>\r\n                        </div>\r\n                        <div class="tpl-price">\r\n                            <span class="from">{{local "Property.from"}}</span>\r\n                            {{#if roomprice.finalprice.showwithtax}}\r\n                                <label class="price">{{roomprice.finalprice.total.currencycode}} {{price-format roomprice.finalprice.total.aftertax}}</label>\r\n                            {{else}}\r\n                                <label class="price">{{roomprice.finalprice.total.currencycode}} {{price-format roomprice.finalprice.total.beforetax}}</label>\r\n                            {{/if}}\r\n                            <span class="time">{{local "Property.night"}}</span>\r\n                        </div>\r\n                    </a>\r\n                {{/each}}\r\n            </div>\r\n        </div>\r\n {{/each}}\r\n</div>\r\n<div class="tpl-button">\r\n    <div class="button prev">\r\n        <span class="icon-icon_chervonLeft"></span>\r\n    </div>\r\n    <div class="dots-role"></div>\r\n    <div class="button next">\r\n        <span class="icon-icon_chervonRight"></span>\r\n    </div>\r\n</div>'},{}],1023:[function(e,t,n){var i=e("iscroll"),o=(e("underscore"),e("./events.js")),r=e("../model/DAO.js"),s=e("./searchView.js"),a=e("../../ui/util.js"),l=e("backbone.marionette"),c=e("../model/searchModel.js"),d=e("../template/template.hbs");GlobalSearchView=t.exports=l.LayoutView.extend({template:function(e){return Handlebars.compile(d)(e)},ui:{close1:".close-trigger .text",close2:".close-trigger .font",close3:".mobile-top-title .font",contentBox:".global-search-widget",searchBox:".global-booking-bar > input",searchContainer:".search-content",scrollContainer:".global-search-widget .iScroll"},events:{"click @ui.close1":"closeMethod","click @ui.close2":"closeMethod","click @ui.close3":"closeMethod"},initialize:function(){var e=this;e.searchModel=new c},closeMethod:function(){this.trigger("req:search:close")},className:function(){return"iScroll-wrapper"},onRender:function(){var e=this;a.loading({showerror:!1,container:e.ui.searchContainer,promise:r.promise.then(function(){e.searchView=new s({DAO:r,searchBox:e.ui.searchBox,model:e.searchModel,searchContainer:e.ui.searchContainer}),e.ui.searchContainer.append(e.searchView.render().el);var t=a.ismobile();t&&(e.myScroll||(e.myScroll=new i(e.ui.scrollContainer.get(0),{interactiveScrollbars:!0,mouseWheel:!1,scrollbars:!1,scrollX:!1})),o.on("refresh:iscroll",function(){e.myScroll.refresh()},e))})})},__touch:function(e){jQuery(e.currentTarget).data("cancel",!0)},__change:function(){this.render()}})},{"../../ui/util.js":2122,"../model/DAO.js":1015,"../model/searchModel.js":1017,"../template/template.hbs":1020,"./events.js":1021,"./searchView.js":1022,"backbone.marionette":6,iscroll:14,underscore:42}],1022:[function(e,t,n){var i=e("./events"),o=e("underscore"),r=e("../../ui/util.js"),s=e("backbone.marionette"),a=e("../template/search.hbs");t.exports=s.LayoutView.extend({template:function(e){return Handlebars.compile(a)(e)},ui:{toTopCity:".search-content-left>ul>li>a ",jumpToTop3:".right-content .container-url",jumpToOffer:".right-box .offer-url",jumpToBlog:".search-middle-container .blog-url",nano:".nano"},events:{"click @ui.toTopCity":"__jumpTop10","click @ui.jumpToTop3":"__toTop3","click @ui.jumpToOffer":"__toOffer","click @ui.jumpToBlog":"__toBlog"},initialize:function(e){var t=this;t.DAO=e.DAO,t.Loading=e.searchContainer,e.DAO.promise.then(function(){t.model.set("_TOP10CITY",t.DAO.top10City.attributes.top10cityName),t.model.set("_HOTELS",t.DAO.hotelTop3Model.attributes.hotels),t.render()}),e.searchBox.on("keyup",o.debounce(function(e){13!=e.keyCode&&t.model.set("sign",jQuery(e.target).val())},600)),e.searchBox.on("keyup",function(e){if(t.$(".search-start").length){var n=t.$(".item.selected"),i=t.$(".item"),o=Math.min(void 0===n.data("sortindex")?-1:n.data("sortindex"),i.length-1);switch(e.keyCode){case 38:return-1!=o&&(n.removeClass("selected"),o--,t.$('.item[data-sortindex="'+o+'"]').addClass("selected"),o>-1&&t.ui.nano.nanoScroller({scrollTo:t.$(".item.selected")})),!1;case 40:return o!=i.length-1&&(n.removeClass("selected"),o++,t.$('.item[data-sortindex="'+o+'"]').addClass("selected"),t.ui.nano.nanoScroller({scrollTo:t.$(".item.selected")})),!1;case 13:n.length&&(n.hasClass("destination-item")?n.click():window.location.href=n.attr("href"))}}}),t.model.on("change:sign",function(){var e=t.model.search();r.loading({showerror:!1,container:t.Loding,promise:jQuery.when(e).then(function(){t.render(),r.ismobile()?t.__getHeight():t.__setHeight()})})}),this.changeFn=jQuery.proxy(this.__change,this),r.tracker.on("change:mobile",this.changeFn)},onRender:function(){var e=this;e.leftHeight=e.$(".search-result-left").height(),e.$(".item").each(function(e,t){jQuery(t).attr("data-sortindex",e)}),r.ismobile()?e.ui.nano.nanoScroller({destroy:!0}):(e.ui.nano.nanoScroller({destroy:!0}),e.ui.nano.nanoScroller({alwaysVisible:!0})),this.setHeightFn=jQuery.proxy(o.debounce(this.__setHeight,400),this),r.tracker.on("change:size",this.setHeightFn)},onDestroy:function(){r.tracker.off("change:mobile",this.changeFn),r.tracker.off("change:size",this.setHeightFn)},__jumpTop10:function(e){e.stopPropagation()},__toTop3:function(e){e.stopPropagation()},__toOffer:function(e){e.stopPropagation()},__toBlog:function(e){e.stopPropagation()},__getHeight:function(){var e=this,t=e.$(".search-on-ul").height();e.$(".search-result-left").css({height:t}),setTimeout(function(){i.trigger("refresh:iscroll")},300)},__setHeight:function(){var e=this,t=e.$(".search-result-middle").height(),n=e.$(".search-result-right").height(),i=e.$(".search-on-ul").height();t?e.__trackLeft(t):n?n>=i?e.__trackLeft(n):i<e.leftHeight&&e.__trackLeft(i):i&&i<e.leftHeight&&e.__trackLeft(i)},__resize:function(){this.render()},__trackLeft:function(e){var t=this;t.$(".search-result-left").css({height:e}),t.ui.nano.nanoScroller({destroy:!0}),t.ui.nano.nanoScroller({alwaysVisible:!0})}})},{"../../ui/util.js":2122,"../template/search.hbs":1019,"./events":1021,"backbone.marionette":6,underscore:42}],1021:[function(e,t,n){var i=e("underscore"),o=e("backbone");t.exports=i.extend({},o.Events)},{backbone:8,underscore:42}],1020:[function(e,t,n){t.exports='<div class="global-box">\r\n    <div class="global-search-widget">\r\n        <!--mobile top title-->\r\n        <div class="mobile-top-title">\r\n            <p class="mobile-title">{{local "globalsearch.title"}}<span class="font icon-icon_B017"></span></p>\r\n        </div>\r\n\r\n        <div class="iScroll">\r\n            <div>\r\n                <div class="global-booking-bar close-trigger"><span class="icon icon-icon_D001"></span>\r\n                    <input placeholder="{{local \'booking.where_to_go\'}}"><span class="text">{{local "maps.close"}}</span><span class="font icon-icon_B017"></span>\r\n                </div>\r\n                <div class="search-content">\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>'},{}],1019:[function(e,t,n){t.exports='\r\n<div class="search-start" >\r\n    {{#if Sign}}\r\n\r\n        {{#if hasData}}\r\n            <!--search-result-contentBox-->\r\n            <div class="search-result clearfix\r\n            {{#if Blog}}\r\n\r\n            {{else}}\r\n                two-offer-result\r\n            {{/if}}">\r\n                <div class="search-result-container">\r\n                    <div class="search-result-left search-container">\r\n                        <div class="nano">\r\n                            <div class="nano-content">\r\n                                <ul class="search-on-ul">\r\n                                    {{#if hotels}}\r\n                                        <li>\r\n                                            <div>\r\n                                                <h4><a href="javascript:void(0)" class="title">{{local "tours.hotels"}}</a></h4>\r\n                                            </div>\r\n                                            <ul class="querylist">\r\n                                                {{#each hotels}}\r\n                                                    <li><a href="{{url}}" class="item">{{{hotelsHtml}}}</a></li>\r\n                                                {{/each}}\r\n                                            </ul>\r\n                                        </li>\r\n                                    {{/if}}\r\n                                    {{#if Citys}}\r\n                                        <li>\r\n                                            <div>\r\n                                                <a href="javascript:void(0)" class="item"></a>\r\n                                                <h4><a href="javascript:void(0)" class="title">{{local "globalsearch.city_title"}}</a></h4>\r\n                                            </div>\r\n                                            <ul class="querylist">\r\n                                                {{#each Citys}}\r\n                                                    <li><a href="{{url}}" class="item">{{{cityHtml}}}</a></li>\r\n                                                {{/each}}\r\n                                            </ul>\r\n\r\n                                        </li>\r\n                                    {{/if}}\r\n                                    {{#if neighbourhoods}}\r\n                                        <li>\r\n                                            <div>\r\n                                                <h4><a href="javascript:void(0)" class="title">{{local "globalsearch.neigbourhoods_title"}}</a></h4>\r\n                                            </div>\r\n                                            <ul class="querylist">\r\n                                                {{#each neighbourhoods}}\r\n                                                    <li><a href="{{url}}" class="item">{{{neighbourhoodsHtml}}}</a></li>\r\n                                                {{/each}}\r\n                                            </ul>\r\n                                        </li>\r\n                                    {{/if}}\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                        <div class="search-holder"></div>\r\n                    </div>\r\n                    <div class="search-result-middle search-container">\r\n                        <div class="search-middle-on">\r\n                            {{#if Blog}}\r\n                                <h4 class="title-text">{{local "globalsearch.blog_title"}}</h4>\r\n                                {{#each Blog}}\r\n                                    <a href="{{url}}" class="jump-url-box">\r\n                                        <div class="search-middle-container clearfix">\r\n                                            <div style="background:url(\'{{image}}\') no-repeat center center;"class="search-middle-left background-content clearfix">\r\n                                                <!--<a href="{{url}}" class="blog-url"></a>-->\r\n                                                <div class="tpl-holder"></div>\r\n                                            </div>\r\n                                            <div class="search-middle-right">\r\n                                                <div class="content-container">\r\n                                                    <h4>{{title}}</h4>\r\n                                                    <!--<p>{{shortdescription}}</p>-->\r\n                                                    <p>{{{desc}}}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class="search-holder"></div>\r\n                                        </div>\r\n                                    </a>\r\n\r\n                                {{/each}}\r\n                            {{/if}}\r\n                        </div>\r\n                    </div>\r\n                    <div class="search-result-right search-container">\r\n                        <div class="search-right-on">\r\n                            {{#if Offers}}\r\n                                <h4 class="offer-test">{{local "globalsearch.offers_title"}}</h4>\r\n\r\n                                {{#each Offers}}\r\n                                    <a href="{{url}}" class="jump-url-content">\r\n                                        <div class="right-box">\r\n                                            <div style="background:url(\'{{image}}\') no-repeat center center;" class="search-right-container clearfix">\r\n                                                <!--<a href="{{url}}" class="offer-url"></a>-->\r\n                                                <div class="tpl-holder"></div>\r\n                                            </div>\r\n                                            <div class="search-right-text">\r\n                                                <h4>{{title}}</h4>\r\n                                                <p>{{shortdescription}}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </a>\r\n\r\n                                {{/each}}\r\n\r\n                            {{/if}}\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        {{else}}\r\n            <div class="no-matched">\r\n                <div class="no-matched-container">\r\n                    <h4>{{local "globalsearch.nomatched_title"}}</h4>\r\n                    <div class="no-matched-text">\r\n                        <span>-</span>\r\n                        <p>{{local "globalsearch.link_title_ahead"}}<a href="http://www.millenniumhotels.com/en/hotels/">{{local "globalsearch.link_title_behind"}}</a>{{local "globalsearch.link_or"}}</p>\r\n                </div>\r\n                    <div class="no-matched-text">\r\n                        <span>-</span>\r\n                        <p>{{local "globalsearch.no_matched_text"}}</p>\r\n                    </div>\r\n                    <!--<p><span>-</span> You may want to view all Millennium destinations <a href="javascript:void (0)">here</a>or</p>-->\r\n                    <!--<p><span>-</span> Check out our recommendations below</p>-->\r\n                </div>\r\n                <!--<p><em class="blod">{{sign}}</em> is not found</p>-->\r\n            </div>\r\n            <div class="search-open">\r\n                <div class="search-content-left">\r\n                    <h4>{{local "maps.top_10_destinations"}}</h4>\r\n                    <ul>\r\n                        {{#each _TOP10CITY}}\r\n                            <li><a href="{{url}}" class="item destination-item">{{name}}</a></li>\r\n                        {{/each}}\r\n                    </ul>\r\n                </div>\r\n                <div class="search-content-right">\r\n                    <h4>{{local "globalsearch.explore_hotels"}}</h4>\r\n                    <div class="right-content">\r\n                        {{#each _HOTELS}}\r\n                            <div style="background:url(\'{{image}}\') no-repeat center center;" class="tpl-part-search">\r\n                                <a href="{{url}}" class="container-url"></a>\r\n                                <div class="tpl-content">\r\n                                    <div class="tpl-text"><a href="{{url}}">{{name}}</a></div>\r\n                                </div>\r\n                                <div class="tpl-holder"></div>\r\n                            </div>\r\n                        {{/each}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        {{/if}}\r\n\r\n    {{else}}\r\n        <!--initialize search content box-->\r\n        <div class="search-open">\r\n            <div class="search-content-left">\r\n                <h4>{{local "maps.top_10_destinations"}}</h4>\r\n                <ul>\r\n                    {{#each _TOP10CITY}}\r\n                        <li><a href="{{url}}" class="item destination-item">{{name}}</a></li>\r\n                    {{/each}}\r\n                </ul>\r\n            </div>\r\n            <div class="search-content-right">\r\n                <h4>{{local "globalsearch.explore_hotels"}}</h4>\r\n                <div class="right-content">\r\n                    {{#each _HOTELS}}\r\n                        <div style="background:url(\'{{image}}\') no-repeat center center;" class="tpl-part-search">\r\n                            <a href="{{url}}" class="container-url"></a>\r\n                            <div class="tpl-content">\r\n                                <div class="tpl-text"><a href="{{url}}">{{name}}</a></div>\r\n                            </div>\r\n                            <div class="tpl-holder"></div>\r\n                        </div>\r\n                    {{/each}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    {{/if}}\r\n</div>';
},{}],1017:[function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("../../ui/util.js"),s=e("../../../../config/host.js");t.exports=o.Model.extend({searchUrl:s.getURL("api","search/global?keywords="),parse:function(e){var t=this,n=this.get("sign"),o=e.data.blogs,s=e.data.citys,a=e.data.hotels,l=e.data.neighbourhoods,c=e.data.offers;if(n&&n.length>=2){var d=new RegExp(n.trim(),"ig");s=i.map(s,function(e){return e.cityHtml=e.title.replace(d,function(e){return'<em class="search-matched">'+e+"</em>"}),e}),l=i.map(l,function(e){return e.neighbourhoodsHtml=e.title.replace(d,function(e){return'<em class = "search-matched">'+e+"</em>"}),e}),a=i.map(a,function(e){return e.hotelsHtml=e.title.replace(d,function(e){return'<em class = "search-matched">'+e+"</em>"}),e}),c=i.map(c),o=i.map(o,function(e){if(e.shortdescription.length>=50){var n=r.ismobile();e.desc=n?t.__cutString(e.shortdescription,25):t.__cutString(e.shortdescription,50)}return e})}return n.length>=2?{hasData:(s.length||a.length||l.length||c.length||o.length)&&"200"==e.status,Citys:s,hotels:a,neighbourhoods:l,Blog:o&&o.length>1&&o,Offers:c,Sign:n.length>=2}:void 0},search:function(){var e=this.get("sign");return!e||e.length<2?(this.set({hasData:"",Citys:"",hotels:"",neighbourhoods:"",Blog:"",Offers:"",Sign:e.length>=2}),!0):(this.url=this.searchUrl+encodeURIComponent(e),this.fetch())},__cutString:function(e,t){return e.substring(0,t)+"..."}})},{"../../../../config/host.js":45,"../../ui/util.js":2122,backbone:8,underscore:42}],1015:[function(e,t,n){var i=(e("underscore"),e("./top10-model.js")),o=e("./hotelTop3.js"),r=n=t.exports={top10City:new i,hotelTop3Model:new o};r.promise=jQuery.when(r.top10City.fetchTop10(),r.hotelTop3Model.hotelTop3Model()).then(function(){return r})},{"./hotelTop3.js":1016,"./top10-model.js":1018,underscore:42}],1018:[function(e,t,n){var i=(e("underscore"),e("../../destination/list/model"),e("backbone")),o=e("../../../../config/host.js");t.exports=i.Model.extend({top10Url:o.getURL("api","data/locations/top"),parse:function(e){return{top10cityName:e.data}},fetchTop10:function(){return this.url=this.top10Url,this.fetch()}})},{"../../../../config/host.js":45,"../../destination/list/model":790,backbone:8,underscore:42}],1016:[function(e,t,n){var i=e("backbone"),o=e("../../../../config/host.js");t.exports=i.Model.extend({top3HotelUrl:o.getURL("api","data/destinations/top?top=3"),parse:function(e){return{hotels:e.data}},hotelTop3Model:function(){return this.url=this.top3HotelUrl,this.fetch()}})},{"../../../../config/host.js":45,backbone:8}],929:[function(e,t,n){var i=e("underscore"),o=e("backbone.marionette"),r=e("../status"),s=e("../../../ui/util"),a=e("moment"),l=e("autosize"),c=e("../../../ui/validator.js").latinRegex3,d=e("./destination-widget/view"),u=e("./dates-widget/view"),h=e("./search-hotle-mobile/view"),p=e("./guests-widget/view"),g=e("./advanced-widget/view"),m=e("../../../after-booking/guest-sign");t.exports=o.LayoutView.extend({template:Handlebars.compile(e("./template.hbs")),regions:{destinationSection:"[data-sect='destination-section']",datesSection:"[data-sect='controller-section']",globalMobile:"[data-sect='global-searchbar-mobile']",guestsSection:'[data-sect="guests-section"]',advancedSection:'[data-sect="advanced-section"]'},ui:{wrapper:".top-wrapper",bookingWidget:".booking-widget",bookingWidgetToggle:".booking-widget-toggle",manageBooking:".manage-booking",manageBookingToggle:".manage-booking-toggle",checkBtn:"[data-component='check-btn']",errorTip:".wgt-global-searchbar>.error-tip-wrapper",viewBooking:'[data-component="view-booking"]',lastNameSection:".last-name-section",confirmationSection:".confirmation-number-section ",invalidMsg:".invalid-name-number"},events:{"click @ui.checkBtn":function(){if(window.CRSNotice&&1===window.CRSNotice.tag){var e=jQuery(".tpl-full-screen-mask-crs"),t=document.getElementsByClassName("tpl-full-screen-mask-crs")[0];t&&e.length>0&&(t.querySelector(".tip-title").textContent=CRSNotice.title,t.querySelector(".tip-copy").textContent=CRSNotice.copy,t.querySelector(".tip-button").textContent=CRSNotice.button,t.querySelector(".content-error-tips").style.backgroundImage=CRSNotice.background?"url("+CRSNotice.background+")":"",t.style.display="block",e.on("click",".wgt-sqbutton-black.tip-button",function(e){return e.preventDefault(),t.style.display="none",jQuery.cookie("cookie-opencrsnt-close","true",{expires:30,path:"/"}),!1}),e.show())}else{var n=jQuery('[data-component="check-btn"]');n.hasClass("disable-checkBtn")||this.trigger("check:availability")}},"click @ui.bookingWidgetToggle":function(){this.ui.bookingWidget.css("display","table"),l.update(this.destinationView.ui.input),this.ui.bookingWidgetToggle.addClass("selected"),this.ui.manageBookingToggle.removeClass("selected"),this.ui.wrapper.removeClass("manage-booking"),this.ui.manageBooking.hide(),this.ui.invalidMsg.removeClass("error-name-number")},"click @ui.manageBookingToggle":function(){this.ui.bookingWidget.hide(),this.ui.bookingWidgetToggle.removeClass("selected"),this.ui.manageBookingToggle.addClass("selected"),this.ui.wrapper.addClass("manage-booking"),this.ui.manageBooking.css("display","table"),this.ui.lastNameSection.removeClass("empty-error non-empty-error"),this.ui.confirmationSection.removeClass("empty-error non-empty-error"),this.ui.invalidMsg.removeClass("error-name-number")},"click @ui.viewBooking":function(){return this.__viewBooking()},"click @ui.manageBooking":function(){this.ui.lastNameSection.removeClass("empty-error non-empty-error"),this.ui.confirmationSection.removeClass("empty-error non-empty-error"),this.ui.invalidMsg.removeClass("error-name-number")}},initialize:function(){var e=this;e.destinationView=new d({rootView:e}),e.datesView=new u({rootView:e}),e.guestsView=new p({rootView:e}),e.mobileView=new h({rootView:e}),e.advancedView=new g({rootView:e}),e.on("destination:error destination:advanced:error destination:guests:error destination:guests:or:rooms:error",function(){e.$el.addClass("show-error-destination")}),e.on("destination:remove:error",function(){e.$el.removeClass("show-error-destination")}),e.on("gbw:search:mobile-topdata",function(){r.mobiletop().then(function(t){e.trigger("gbw:show:mobile-topdata",t)})}),e.on("gbw:search:mobile-searchdata",function(t){r.mobilesearch(t).then(function(t){e.trigger("gbw:show:mobile-search",t)})}),e.on("check:availability",function(t){var n=this.getBookingInfo(),i=n.destination&&n.destination.disablereservation,o=n.destination&&n.destination.url,r=n.destination&&n.destination.pageurl;i?r&&s.redirect(r):(o&&t&&(o+="&rateCalendar=true"),o?s.redirect(o+(o.indexOf("?")>=0?"&":"?")+jQuery.param(this.getBookingInfoParam())):o||e.destinationView.trigger("destination:show:results",{errorMessage:"",data:[]}))}),e.viewBookingModel=new m},onRender:function(){this.getRegion("destinationSection").show(this.destinationView),this.getRegion("datesSection").show(this.datesView),this.getRegion("globalMobile").show(this.mobileView),this.getRegion("guestsSection").show(this.guestsView),this.getRegion("advancedSection").show(this.advancedView);var e=jQuery(".global-wrapper");this.$el.on("mousewheel DOMMouseScroll",function(t){var n=jQuery(event.target),i=n.hasClass("nano")||jQuery(".nano").has(n).length;if(!i){var o=t.originalEvent,r=o.wheelDelta||-o.detail;this.scrollTop+=30*(0>r?1:-1)}return!(!i&&(e.hasClass("expanded-top")||e.hasClass("expanded-top-search")))})},getBookingInfo:function(){return{destination:this.destinationView.selectedDestination,dates:this.datesView.selectedDates,guests:this.guestsView.guests,codes:this.advancedView.codes}},getBookingInfoParam:function(e){var t=this.getBookingInfo(),n="",o=jQuery("[data-component='widget-booking']").data("promocode");return jQuery(".epicSale-pageContainer").length>0&&o&&(n=o),i.extend({},e?{hotelcode:t.destination.code}:{},{checkin:this.__formatDate(t.dates.prevDate),checkout:this.__formatDate(t.dates.nextDate),promocode:t.codes.promocode||n,discountcode:t.codes.discountcode,groupcode:t.codes.groupcode,AAA:t.codes.AAA,AARP:t.codes.AARP,GOV:t.codes.GOV,Accessible:t.codes.Accessible,adults:t.guests.adults,children:t.guests.children,rooms:t.guests.rooms})},__formatDate:function(e){return e?a(e).format("YYYY-MM-DD"):"dd/mm/yyyy"},__viewBooking:function(){var e=this,t=this.ui.lastNameSection.find("input").val(),n=this.ui.confirmationSection.find("input").val();this.viewBookingModel.set({last_name:t,confirmation_number:n});var i=!1;return t?t.match(c)||(this.ui.lastNameSection.addClass("non-empty-error"),i=!0):(this.ui.lastNameSection.addClass("empty-error"),i=!0),n?n.match(c)||(this.ui.confirmationSection.addClass("non-empty-error"),i=!0):(this.ui.confirmationSection.addClass("empty-error"),i=!0),i?!1:void s.loading({errortimeout:3e3,loading:"",appendElement:!0,error:i18n.t("modify.invalid_confirmation_number"),container:e.ui.manageBooking,promise:e.viewBookingModel.save({},{emulateForm:!0,emulateJSON:!0,success:function(t,n){null==n?e.__errorMsgFun():window.location.href=n.redirecturl},error:function(t,n){403==n.status?(jQuery(".loading-error-block").remove(),e.ui.invalidMsg.addClass("error-name-number")):e.__errorMsgFun()}})})},__errorMsgFun:function(){var e=i18n.t("modify.Unable_information"),t=jQuery(".loading-error-block");t.find("p").html(e),t.show().find("p").css({"font-size":"2rem","font-weight":500}),t.delay(3e3).fadeOut("slow")}})},{"../../../after-booking/guest-sign":157,"../../../ui/util":2122,"../../../ui/validator.js":2123,"../status":930,"./advanced-widget/view":906,"./dates-widget/view":911,"./destination-widget/view":917,"./guests-widget/view":921,"./search-hotle-mobile/view":927,"./template.hbs":928,autosize:2,"backbone.marionette":6,moment:16,underscore:42}],928:[function(e,t,n){t.exports='<div class="top-wrapper">\r\n    <div class="booking-toggle-border"></div>\r\n    <span class="booking-toggle selected booking-widget-toggle">{{local \'booking.book_a_room\'}}</span><span class="booking-toggle manage-booking-toggle">{{local\r\n        \'booking.manage_booking\'}}</span>\r\n    <div data-sect="booking-widget" class="wgt-global-searchbar booking-widget">\r\n        <div data-sect="destination-section" class="destination-section booking-section"></div>\r\n        <div class="separator-section"></div>\r\n        <div data-sect="controller-section" class="controller-section booking-section"></div>\r\n        <div class="separator-section"></div>\r\n        <div data-sect="guests-section" class="guests-section booking-section"></div>\r\n        <div class="button-section booking-section">\r\n            <a data-component="check-btn" class="wgt-sqbutton-golden availability dont-close-result">{{local\r\n                    "booking.book_now"}}</a>\r\n            <div data-sect="advanced-section" class="advanced-section"></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div data-sect=manage-booking-section\' class="wgt-global-searchbar manage-booking">\r\n        <div class="last-name-section booking-section">\r\n            <span class="error-tip-wrapper"><span class="error-tip empty">{{local \'form_error.cannot_be_empty\'}}</span><span class="error-tip non-empty">{{local \'form_error.only_accepts_latin\'}}</span></span>\r\n            <div class="booking-section-title">{{local "form.last_name"}}</div>\r\n            <div class="textfield" >\r\n                <input maxlength="50" placeholder="{{local "modify.last_name_placeholder"}}" class="textfield-input booking-widget-content-text" data-sect="textfield-input">\r\n            </div>\r\n        </div>\r\n        <div class="separator-section"></div>\r\n        <div class="confirmation-number-section booking-section">\r\n            <span class="error-tip-wrapper"><span class="error-tip empty">{{local \'form_error.cannot_be_empty\'}}</span><span class="error-tip non-empty">{{local \'form_error.only_accepts_latin\'}}</span></span>\r\n            <div class="booking-section-title">{{local "form.confirmation_no_label"}}</div>\r\n            <div class="textfield" >\r\n                <input maxlength="50" placeholder="{{local "form.confirmation_no_placeholder_short"}}" class="textfield-input booking-widget-content-text" data-sect="textfield-input">\r\n            </div>\r\n        </div>\r\n        <div class="button-section booking-section">\r\n            <a data-component="view-booking" class="wgt-sqbutton-golden availability">{{local\r\n                    "booking.view_booking"}}</a>\r\n        </div>\r\n        <div class="footer-notes"><div class="footer-notes-text">{{local \'booking.view_booking_desc\'}}</div></div>\r\n        <div class="invalid-name-number">{{local \'form_error.name_Confirmation_number\'}}</div>\r\n    </div>\r\n</div>\r\n<div data-sect="global-searchbar-mobile" class="wgt-global-searchbar-mobile">\r\n</div>'},{}],927:[function(e,t,n){var i=e("backbone.marionette"),o=e("./mobile-page/view");t.exports=i.LayoutView.extend({template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},ui:{input:"[data-sect='homepage-mobile-input']",mobile:"[data-sect='lists-mobile-page']"},className:function(){},regions:{mobilepage:"[data-sect='lists-mobile-page']"},events:{"click @ui.input":function(){this.__showMobilePage()}},initialize:function(){var e=this;e.options.rootView.on("gbw:show:mobile-topdata",function(t){var n=new o({obj:e.options.rootView});n.__top10data=t,e.ui.mobile.show(),e.getRegion("mobilepage").show(n)}),e.options.rootView.on("gbw:close:mobile-search",function(){e.colseMobilePage()})},__showMobilePage:function(){var e=this;e.ifhideen=jQuery(".tpl-global-cookie-policy").is(":hidden"),e.ifhideen||jQuery(".tpl-global-cookie-policy").hide(),jQuery(".headbar").addClass("mobile-hide"),jQuery(".tpl-hero-personal-msg").css("z-index",110),e.options.rootView.trigger("gbw:search:mobile-topdata")},colseMobilePage:function(){var e=this;e.ifhideen||jQuery(".tpl-global-cookie-policy").show(),jQuery(".headbar").removeClass("mobile-hide"),e.getRegion("mobilepage").empty({preventDestroy:!0}),e.ui.mobile.hide()}})},{"./mobile-page/view":925,"./template.hbs":926,"backbone.marionette":6}],926:[function(e,t,n){t.exports='<div class="destination-section-mobile">\r\n    <span class="icon-icon_F0272"></span>\r\n    <!--<input  data-sect="homepage-mobile-input" type="text" placeholder="Where do you want to go?">{{local "booking.where_go_to"}}-->\r\n    <a class="destination-section-input" data-sect="homepage-mobile-input" >{{local "booking.where_go_to"}}</a>\r\n</div>\r\n<div data-sect="lists-mobile-page" class="destination-lists-mobile">\r\n\r\n</div>'},{}],925:[function(e,t,n){var i=e("backbone.marionette"),o=e("./results-mobile/view");t.exports=i.LayoutView.extend({template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},ui:{icon:"[data-sect='icon-dset']",input:"[data-sect='homepage-mobile-input-in']",top_p:"[data-sect='mobile-top-p']",top_list:"[data-sect='mobile-top-list']"},className:function(){},regions:{dest:".lists-mobile-seatch-destinations"},events:{"click @ui.icon":function(){this.__closeSearch()},"input @ui.input":function(){this.__searchKeyChange(this.ui.input.val())}},onRender:function(){},initialize:function(e){var t=this;t.view=e.obj,t.view.on("gbw:show:mobile-search",function(e){var n=new o({obj:t.view});n.__renderData=e,0==e.city.length?t.ui.top_p.show():(n.__renderData=e,t.getRegion("dest").show(n),t.__hideSearchList(),t.ui.top_p.hide())})},serializeData:function(){return{__mobileTop10:this.__top10data}},__closeSearch:function(){jQuery(".tpl-hero-personal-msg").css("z-index",2),this.view.trigger("gbw:close:mobile-search")},__searchKeyChange:function(e){e&&e.length>=2?this.view.trigger("gbw:search:mobile-searchdata",e):this.__clearMoSearchList()},__hideSearchList:function(){this.ui.top_list.hide()},__clearMoSearchList:function(){this.ui.top_list.show(),this.getRegion("dest").empty()}})},{"./results-mobile/view":923,"./template.hbs":924,"backbone.marionette":6}],924:[function(e,t,n){t.exports='<div class="lists-mobile-search">\r\n    <span class="search-dest">SEARCH</span>\r\n    <span data-sect="icon-dset"  class="icon-icon_B017 icon-dset"></span>\r\n</div>\r\n<div class="lists-mobile-input">\r\n    <span class="icon-icon_F0272"></span>\r\n    <input data-sect="homepage-mobile-input-in"  type="text" placeholder="Where do you want to go?">\r\n</div>\r\n<div class="lists-mobile-dest">\r\n    <div data-sect="mobile-top-list" class="lists-mobile-top-destinations">\r\n        <p data-sect="mobile-top-p">{{local "quickbook.search_noresults"}}</p>\r\n        <h3>{{local "quickbook.search_destinations"}}</h3>\r\n        <div  class="top-destinations-lists">\r\n            {{#each __mobileTop10}}\r\n                <a href="{{url}}">{{name}}</a>\r\n            {{/each}}\r\n        </div>\r\n    </div>\r\n    <div data-sect="mobile-destinations" class="lists-mobile-seatch-destinations" >\r\n    </div>\r\n</div>'},{}],923:[function(e,t,n){var i=(e("underscore"),e("backbone.marionette"));t.exports=i.ItemView.extend({template:function(t){return Handlebars.compile(e("./template.hbs"))(t)},className:function(){},ui:{},events:{},onRender:function(){},initialize:function(e){var t=this;t.view=e.obj},serializeData:function(){return{data:this.__renderData.city}}})},{"./template.hbs":922,"backbone.marionette":6,underscore:42}],922:[function(e,t,n){t.exports='{{#if data}}\r\n    {{#each data}}\r\n    <div class="lists-mobile-city">\r\n        <a class="mobile-city-a" href="{{url}}"><span class="icon-icon_A002"></span>{{name}}<span class="mobile-city-num">{{hotelcount}}</span></a>\r\n    </div>\r\n        {{#each hotels}}\r\n            <div class="lists-mobile-hotel">\r\n                <a class="mobile-hotel-a" href="{{url}}"><span class="icon-icon_B002"></span>{{name}}</a>\r\n            </div>\r\n        {{/each}}\r\n    {{/each}}\r\n{{/if}}'},{}],921:[function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("backbone.marionette"),s=e("./occupancy/view"),a=e("../../../../ui/util");t.exports=r.LayoutView.extend({className:"guest-widget",template:Handlebars.compile(e("./template.hbs")),regions:{occupancy:'[data-region="occupancy"]'},ui:{guestSelect:".guests-select",arrow:".booking-guests-arrow"},events:{"click @ui.guestSelect":function(e){this.getRegion("occupancy").hasView()?this.getRegion("occupancy").empty():this.__showOccupancy()},"click @ui.arrow":function(){this.getRegion("occupancy").hasView()?this.getRegion("occupancy").empty():this.__showOccupancy()}},onChangeRedirectParams:function(e){var t=this;i.has(e,"adultocc")&&(t.guests.adults=e.adultocc),i.has(e,"childocc")&&(t.guests.children=e.childocc),i.has(e,"roomocc")&&(t.guests.rooms=e.roomocc),t.getRegion("occupancy").hasView()&&i.assign(t.getRegion("occupancy").currentView.model.get("redirectParams"),e),t.__setOccupancyText(),t.options.rootView.trigger("guests:changed")},__setOccupancyText:function(){var e=this,t=e.guests,n='<span class="guests-hover"><span>'+t.adults+" "+(1===t.adults?i18n.t("booking.adult"):i18n.t("booking.adults"))+"</span><span>"+t.children+" "+(1===t.children?i18n.t("booking.child"):i18n.t("booking.children"))+'</span><div style="font-size: 14px; line-height: 2em; text-transform: uppercase;"><span>'+t.rooms+" "+(1===t.rooms?i18n.t("booking.room"):i18n.t("booking.rooms"))+"</span></div></span>";e.ui.guestSelect.html(n)},__showOccupancy:function(){var e=this,t=e.options.rootView&&e.options.rootView.getBookingInfo(),n=new o.Model({redirectParams:{hotel:t&&t.destination,adultocc:e.guests.adults,childocc:e.guests.children,roomocc:e.guests.rooms}}),i=new s({rootState:e,model:n});i.on("destroy",function(){e.$el.parent().removeClass("focused")}),i.on("show",function(){e.$el.parent().addClass("focused")}),this.getRegion("occupancy").show(i),a.fitInViewpoint(i.$el)},initialize:function(){var e=this;e.cancelFN=jQuery.proxy(e.__undo,e),e.options.rootView.on("destination:changed",function(){var t=e.options.rootView.getBookingInfo().destination,n=e.guests.adults||1,i=e.guests.children||0,o=e.guests.rooms||1,r=t&&t.maxocc||18,s=t&&t.maxselectroomscount||9,a=Math.min(t&&t.adultocc||9,r),l=Math.min(t&&t.childocc||9,r);n=Math.min(n,a),i=Math.min(i,Math.min(l,r-n)),o=Math.min(o,s);var c=0;e.guests.adults!=n&&(e.guests.adults=n,c=1),e.guests.children!=i&&(e.guests.children=i,c=1),e.guests.rooms!=o&&(e.guests.rooms=o,c=2),c&&(e.__setOccupancyText(),2===c?e.options.rootView.trigger("destination:guests:or:rooms:error"):e.options.rootView.trigger("destination:guests:error"))}),e.guests={adults:1,children:0,rooms:1},e.on("changeRedirectParams",jQuery.proxy(e.onChangeRedirectParams,e))},onRender:function(){jQuery(document).off("click",this.cancelFN).on("click",this.cancelFN)},onDestroy:function(){jQuery(document).off("click",this.cancelFN)},__undo:function(e){var t=jQuery(e.target);this.$el.has(t).length||t.hasClass("icon-icon_B024")||t.hasClass("icon-icon_B023")||t.hasClass("btn")||this.getRegion("occupancy").empty()}})},{"../../../../ui/util":2122,"./occupancy/view":919,"./template.hbs":920,backbone:8,"backbone.marionette":6,underscore:42}],920:[function(e,t,n){t.exports='<span class="booking-guests-arrow icon-icon_chervonDown"></span>\r\n<div class="booking-section-title">{{local "general.guests"}}</div>\r\n<div class="booking-widget-content-text guests-select">\r\n    <span class="guests-hover"><span>1 {{local "booking.adult"}}</span><span> 0 {{local "booking.children"}}</span><div style="font-size: 14px; line-height: 2em; text-transform: uppercase;"><span>1 {{local "booking.room"}}</span></div></span>\r\n</div>\r\n\r\n<div data-region="occupancy" class="occupancy-popup">\r\n\r\n</div>\r\n'},{}],919:[function(e,t,n){var i=(e("underscore"),e("../../../../../offers-details-2.0/01-sidebar/03-occupier/view")),o=e("../../../../../offers-details-2.0/01-sidebar/03-occupier/counter/counter");t.exports=i.extend({ui:{adult:"[data-item='adult']",child:"[data-item='child']",rooms:"[data-item='rooms']"},template:Handlebars.compile(e("./template.hbs")),onShow:function(){this.onDestroy(),this.__setElWidth(),this._globalListener=jQuery.proxy(this.__setElWidth,this),jQuery(window).on("resize",this._globalListener)},onDestroy:function(){this._globalListener&&(jQuery(window).off("resize",this._globalListener),this._globalListener=null)},onRender:function(){this.onDestroy(),i.prototype.onRender.call(this),this.__createRooms()},serializeData:function(){var e=this.model.get("redirectParams")||{};return{maxroom:e.hotel&&e.hotel.maxselectroomscount||9,maxchildage:e.hotel&&e.hotel.maxchildage||11}},__setElWidth:function(){var e=this.$el.closest(".guests-section"),t=e.next(),n=0;e.length&&(n+=e.prop("clientWidth")+1),t.length&&(n+=t.prop("clientWidth")+1),this.$el.css({width:n})},__createRooms:function(){var e=this,t=e.model.get("redirectParams")||{},n=t.hotel&&t.hotel.maxselectroomscount||9;o.autoCreate(e.ui.rooms,{minValue:1,maxValue:n,value:t.roomocc||1,change:jQuery.proxy(e.__changeRooms,e)})},__changeRooms:function(e){var t=this;t.options.rootState.trigger("changeRedirectParams",{roomocc:e})}})},{"../../../../../offers-details-2.0/01-sidebar/03-occupier/counter/counter":1538,"../../../../../offers-details-2.0/01-sidebar/03-occupier/view":1540,"./template.hbs":918,underscore:42}],918:[function(e,t,n){t.exports='<div class="nk2-global-search-occupancy-option">\r\n    <div class="offers2__details-occupier-level">\r\n        <div class="offers2__details-occupier-level-1">\r\n            <div class="offers2__details-occupier-text">{{local "booking.adults"}}</div>\r\n        </div>\r\n        <div class="offers2__details-occupier-level-2" data-item="adult"></div>\r\n    </div>\r\n    <div class="offers2__details-occupier-level">\r\n        <div class="offers2__details-occupier-level-1">\r\n            <div class="offers2__details-occupier-text">{{local "booking.children"}}</div>\r\n            <div class="offers2__details-occupier-vice">({{local "booking.below_12" maxchildage}})</div>\r\n        </div>\r\n        <div class="offers2__details-occupier-level-2" data-item="child"></div>\r\n    </div>\r\n    <div class="offers2__details-occupier-level">\r\n        <div class="offers2__details-occupier-level-1">\r\n            <div class="offers2__details-occupier-text">{{local "booking.rooms"}}</div>\r\n            <div class="offers2__details-occupier-vice">({{local "booking.maxroom" maxroom}})</div>\r\n        </div>\r\n        <div class="offers2__details-occupier-level-2" data-item="rooms"></div>\r\n    </div>\r\n</div>\r\n<div class="nk2-global-search-occupancy-option">\r\n    <div class="nk2-global-search-occupancy-description">\r\n        {{local "booking.occupancy_description" }}\r\n    </div>\r\n</div>'},{}],917:[function(e,t,n){var i=e("backbone.marionette"),o=e("./results/view"),r=e("./default/view"),s=e("../../../../ui/util"),a=e("underscore"),l=e("../../status"),c=e("autosize");t.exports=i.LayoutView.extend({template:Handlebars.compile(e("./template.hbs")),ui:{slides:".results-slide",result:"[data-sect='results']",input:"[data-sect='textfield-input']",list:"[data-sect='results']",span:"[data-sect='textfield--item-span']",title:"[data-sect='textfield--item-title']",errorText:".error-tip"},className:function(){},regions:{results:"[data-sect='results']"},events:{"keydown @ui.input":function(e){return 13===e.keyCode?!1:void 0},"keyup @ui.input":function(e){this.__search(e),this.__keyNavigate(e)},"click @ui.input":function(){this.__showDefaultResults()},"focus @ui.input":function(){this.$el.parent().addClass("focused")},"blur @ui.input":function(){this.$el.parent().removeClass("focused")}},onRender:function(){var e=this;if(jQuery(document).off("click",this.cancelFN).on("click",this.cancelFN),window.bookingWidgetData&&(e.ui.input.val("destination"===bookingWidgetData.type?i18n.t("booking.hotelsincity").replace("{0}",bookingWidgetData.name):bookingWidgetData.name),e.selectedDestination=window.bookingWidgetData,window.bookingWidgetData.disablereservation)){var t=jQuery('[data-component="check-btn"]');t.addClass("disable-checkBtn")}},onShow:function(){c(this.ui.input)},initialize:function(){var e=this;e.cancelFN=jQuery.proxy(e.__undo,e),e.resultsView=new o({rootView:e.options.rootView}),e.defaultView=new r({rootView:e.options.rootView}),e.resultsView.__renderData={data:[]},e.on("destination:show:results",function(t){e.__cache!=t&&(e.__cache=t,e.__clearSearchList(),t&&0!=t.data.length?e.options.rootView.trigger("destination:remove:error"):e.options.rootView.trigger("destination:error"),e.resultsView.__renderData=t,e.resultsView.render(),e.results.show(e.resultsView,{preventDestroy:!0}),s.fitInViewpoint(e.resultsView.$el))}),e.options.rootView.on("destination:error",function(){e.ui.errorText.html(i18n.t("booking.search_jump").replace("{0}","/"+jQuery("html").attr("lang")+"/hotels"))}),e.options.rootView.on("destination:advanced:error",function(){e.ui.errorText.html(i18n.t("booking.destination_first"))}),e.options.rootView.on("destination:guests:error",function(){e.ui.errorText.html(i18n.t("booking.guest_number_update"))}),e.options.rootView.on("destination:guests:or:rooms:error",function(){e.ui.errorText.html(i18n.t("booking.only_guest_number_update"))}),e.options.rootView.on("destination:show:default",function(){e.__showDefaultResults()}),e.options.rootView.on("destination:collapse",function(){e.__clearSearchList()}),e.options.rootView.on("destination:select",function(t,n){var i=jQuery('[data-component="check-btn"]'),o=t.data("value"),r=t.data("type"),s=a.find(e.defaultView.__renderData.searchHistory,function(e){return n?e.url===o&&e.type===r:e.url===o})||a.find(e.resultsView.__renderData.data,function(e){return n?e.url===o&&e.type===r:e.url===o})||a.find(e.defaultView.__renderData.topDestinations,function(e){return n?e.url===o&&e.type===r:e.url===o});e.options.rootView.destinationType=!1,"destination"===s.type&&(e.options.rootView.destinationType=!0),s&&(e.options.rootView.trigger("destination:remove:error"),e.ui.input.val((s.displayName||s.name)+("destination"===s.type?" ("+s.number+" "+(s.number>1?i18n.t("general.properties"):i18n.t("general.property"))+")":"")),s.disablereservation&&s.code==window.hotelcode?(i.addClass("disable-checkBtn"),i.click(function(e){e.preventDefault()})):i.removeClass("disable-checkBtn"),e.selectedDestination=s,e.__clearSearchList(),e.options.rootView.trigger("calendar:expand","hotel"===s.type&&s.enableratecalendar),c.update(e.ui.input),e.options.rootView.trigger("destination:changed"))}),e.__search=a.debounce(function(e){this.__searchKeyChange(e)},500),s.tracker.on("change:mobile",function(){c.destroy(e.ui.input),c(e.ui.input)})},onDestroy:function(){jQuery(document).off("click",this.cancelFN)},__searchKeyChange:function(e){if(13!==e.keyCode&&38!==e.keyCode&&40!==e.keyCode){var t=this,n=t.ui.input.val();t.selectedDestination=null,t.options.rootView.trigger("destination:onchange"),n&&n.length>=2?l.search(n).then(function(e){t.trigger("destination:show:results",a.extend({},{key:n},e))}):t.__clearSearchList(),t.options.rootView.trigger("destination:changed")}},__showDefaultResults:function(){var e=this,t=jQuery(".epicSale-pageContainer").length>0?l.epicDefaultResults():l.defaultResults();t.then(function(t){0===t.searchHistory.length&&e.ui.slides.addClass("destination-only"),e.defaultView.__renderData=t,e.results.show(e.defaultView,{preventDestroy:!0}),s.fitInViewpoint(e.defaultView.$el)}),e.options.rootView.trigger("destination:remove:error")},__clearSearchList:function(){this.ui.slides.removeClass("destination-only"),this.getRegion("results").empty({preventDestroy:!0}),this.options.rootView.trigger("destination:remove:error")},__keyNavigate:function(e){var t=this;if(t.$(".search-item").length){var n=t.$(".search-item.selected"),i=t.$(".search-item"),o=Math.min(void 0===n.data("sortindex")?-1:n.data("sortindex"),i.length-1);switch(e.keyCode){case 38:if(-1!=o){if(0===o)return!1;n.removeClass("selected"),o--,t.$('.search-item[data-sortindex="'+o+'"]').addClass("selected"),t.$(".search-item.selected").length&&t.resultsView.$el.nanoScroller({scrollTo:t.$(".search-item.selected")})}return!1;case 40:return o!=i.length-1&&(n.removeClass("selected"),o++,t.$('.search-item[data-sortindex="'+o+'"]').addClass("selected"),t.$(".search-item.selected").length&&t.resultsView.$el.nanoScroller({scrollTo:t.$(".search-item.selected")})),!1;case 13:return n.length&&t.options.rootView.trigger("destination:select",n,!0),!1}}},__clickInputValue:function(){this.ui.input.val("")},__undo:function(e){jQuery(e.target).hasClass("dont-close-result")||this.$el.has(e.target).length||this.options.rootView.trigger("destination:collapse")}})},{"../../../../ui/util":2122,"../../status":930,"./default/view":913,"./results/view":915,"./template.hbs":916,autosize:2,"backbone.marionette":6,underscore:42}],930:[function(e,t,n){var i=e("underscore"),o=e("./models/destination-list"),r=e("./models/search-history"),s=e("./models/top-destinations"),a=e("./models/epic-city"),l=e("./models/epic-hotel"),c=e("./models/mobile-destination-list"),d=e("./models/mobile-top");t.exports={__cache:{},search:function(e){return o.fetch({keyword:e}).then(function(t){return t.key=e,t})},defaultResults:function(){var e=this;return e.__cache.defaultResults?jQuery.when(e.__cache.defaultResults):jQuery.when(s.fetch(),r.fetch()).then(function(t,n){return e.__cache.defaultResults={topDestinations:t,searchHistory:n}})},epicDefaultResults:function(){var e=this,t=jQuery(".epicSale-pageContainer").data("itemid");return t=t?t:"",a.addflags(t),l.addflags(t),e.__cache.defaultResults?jQuery.when(e.__cache.defaultResults):jQuery.when(a.fetch(),l.fetch()).then(function(t,n){return e.__cache.defaultResults={epicCities:t,epicHotels:n}})},mobiletop:i.throttle(function(){return d.fetch().then(function(e){return e})},500),mobilesearch:i.throttle(function(e){return c.fetch({keyword:e}).then(function(e){return e})},500)}},{"./models/destination-list":896,"./models/epic-city":897,"./models/epic-hotel":898,"./models/mobile-destination-list":899,"./models/mobile-top":900,
"./models/search-history":901,"./models/top-destinations":902,underscore:42}],916:[function(e,t,n){t.exports='<span class="error-tip-wrapper"><span class="error-tip">{{local \'booking.search_jump\'}}</span></span>\r\n<div class="booking-section-title">{{local "booking.destination"}}</div>\r\n<div class="textfield">\r\n    <textarea maxlength="65" rows="1" placeholder="{{local "booking.where_go_to"}}"\r\n              class="textfield-input booking-widget-content-text" data-sect="textfield-input"></textarea>\r\n</div>\r\n<div class="results-slide booking-slide">\r\n    <div data-sect="results" class="results results-region booking-results">\r\n\r\n    </div>\r\n</div>'},{}],915:[function(e,t,n){var i=e("backbone.marionette");t.exports=i.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"expansion b-color search-results",ui:{item:".results-list-item",box:".expansion",scroll:".nano"},events:{"click @ui.item":function(e){return this.__selectSearchResult(jQuery(e.target).closest(".result-item")),!1}},onRender:function(){},onShow:function(){this.ui.scroll.nanoScroller({destroy:!0}),this.ui.scroll.nanoScroller({alwaysVisible:!0,preventPageScrolling:!0})},__selectSearchResult:function(e){this.options.rootView.trigger("destination:select",e,!0)},serializeData:function(){return this.__renderData}})},{"./template.hbs":914,"backbone.marionette":6}],914:[function(e,t,n){t.exports='<div class="nano">\r\n    <div class="nano-content">\r\n        {{#each data}}\r\n            <a class="search-item results-list-item result-item" data-sortindex={{sortindex}} data-value="{{url}}" data-type="{{type}}"><span\r\n                    class="search-item-icon {{#ifCond type \'!=\' \'hotel\'}}icon-icon_B002{{else}}icon-icon_I002{{/ifCond}}"></span><span\r\n                    class="search-item-name" dir="ltr">{{{nameHtml}}}{{#ifCond type \'==\'\'destination\'}}\r\n                ({{number}} {{#ifCond number \'>\' 1}}{{local \'general.properties\'}}{{else}}{{local\r\n                    \'general.property\'}}{{/ifCond}}\r\n                ){{/ifCond}}</span></a>\r\n        {{/each}}\r\n    </div>\r\n</div>'},{}],913:[function(e,t,n){var i=e("backbone.marionette");t.exports=i.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"initial-results",ui:{historyItem:".search-item",destinationItem:".destination-item",suggestions:".suggestions"},events:{"click @ui.historyItem":function(e){e.stopPropagation(),this.__selectHistroyItem(jQuery(e.currentTarget))},"click @ui.destinationItem":function(e){e.stopPropagation(),this.__selectDestinationItem(jQuery(e.currentTarget))}},__selectHistroyItem:function(e){this.options.rootView.trigger("destination:select",e,!0)},__selectDestinationItem:function(e){this.options.rootView.trigger("destination:select",e,!1)},serializeData:function(){return this.__renderData},onShow:function(){this.$el.closest(".results-slide").hide().slideToggle()}})},{"./template.hbs":912,"backbone.marionette":6}],912:[function(e,t,n){t.exports='{{#if searchHistory.length}}\r\n    <span class="results-area">\r\n        <div class="results-section-title">{{local \'booking.recently_viewed\'}}</div>\r\n        {{#each searchHistory}}\r\n            <a class="search-item result-item" data-value="{{url}}" data-type="{{type}}">\r\n                <span class="search-item-icon {{#ifCond type \'!=\'\r\n                                                        \'hotel\'}}icon-icon_B002{{else}}icon-icon_I002{{/ifCond}}"></span>\r\n                <span class="search-item-name" dir="ltr">{{{displayName}}} {{#ifCond type \'==\' \'destination\'}}\r\n                    ({{number}} {{#ifCond number \'>\' 1}}{{local \'general.properties\'}}{{else}}{{local\r\n                        \'general.property\'}}{{/ifCond}}){{/ifCond}}</span></a>\r\n        {{/each}}\r\n    </span>\r\n{{/if}}\r\n\r\n{{#if topDestinations.length}}\r\n    <span class="results-area">\r\n        <div class="results-section-title">{{local \'quickbook.top_destinations\'}}</div>\r\n        {{#each topDestinations}}\r\n            <a class="destination-item result-item" data-value="{{url}}">{{name}}</a>\r\n        {{/each}}\r\n    </span>\r\n{{/if}}\r\n\r\n{{#if epicHotels.length}}\r\n    <span class="results-area">\r\n        <div class="results-section-title">{{local \'quickbook.top_hotels\'}}</div>\r\n        {{#each epicHotels}}\r\n        <a class="search-item result-item" href="{{url}}">\r\n            <span class="search-item-icon icon-icon_I002"></span>\r\n            <span class="search-item-name">{{{name}}}</span>\r\n        </a>\r\n        {{/each}}\r\n    </span>\r\n{{/if}}\r\n\r\n{{#if epicCities.length}}\r\n    <span class="results-area">\r\n        <div class="results-section-title">{{local \'quickbook.top_destinations\'}}</div>\r\n        {{#each epicCities}}\r\n            <a class="destination-item result-item" href="{{url}}">{{name}}</a>\r\n        {{/each}}\r\n    </span>\r\n{{/if}}'},{}],911:[function(e,t,n){var i=e("backbone.marionette"),o=e("./calendar/view"),r=e("../../../prop-page/01-article/03-dates/calendar/locals"),s=e("moment"),a=e("../../../../ui/util"),l=e("../../../../../../config/host"),c=l.getLanguage(),d="ja"===c||"zh"===c||"zh-tw"===c?"MM 月 DD":"DD MMM";t.exports=i.LayoutView.extend({template:Handlebars.compile(e("./template.hbs")),ui:{calendar:".calendar-section",checkIn:"[data-sect='checkin']",checkOut:"[data-sect='checkout']",checkInText:"[data-sect='date-checkin-text']",checkOutText:"[data-sect='date-checkout-text']",item_1:"[data-sect='controller-item-1']",item_2:"[data-sect='controller-item-2']",div:"[data-sect='controller-item-1']>div",a:"[data-sect='controller-item-1']>a",calendarTip:".x-solar-tip-box"},className:"gbw-prop-article-dates-dub",regions:{calendar:".calendar-section"},events:{"click @ui.checkInText":function(e){this.__showPrevDate(!1,this.hotelHasRateCalendar)},"click @ui.checkOutText":function(e){this.__showNextDate(!1,this.hotelHasRateCalendar)},"click @ui.calendarTip":function(){this.options.rootView.trigger("check:availability",!0)}},onRender:function(){this.__rendered=!0},initialize:function(){var e=this;e.hotelHasRateCalendar=jQuery("[data-component='widget-booking']").data("enable-rate-calendar"),e.showRate=e.hotelHasRateCalendar,e.options.rootView.on("destination:show:results",function(t){e.searchData=t}),e.options.rootView.on("dates:collapse",function(){e.getRegion("calendar").empty()}),e.options.rootView.on("calendar:expand",function(t){e.showRate=t,e.hotelHasRateCalendar=t,e.__showPrevDate(t)}),e.options.rootView.on("destination:onchange",function(){e.showRate=!1,e.hotelHasRateCalendar=!1,e.getRegion("calendar").empty()}),e.getRegion("calendar").on("empty",function(){e.$el.parent().removeClass("focused"),e.ui.checkOutText.removeClass("selected"),e.ui.checkInText.removeClass("selected")}),e.getRegion("calendar").on("show",function(){e.$el.parent().addClass("focused")});var t=new Date;e.selectedDates={prevDate:new Date(t.getFullYear(),t.getMonth(),t.getDate()),nextDate:new Date(t.getFullYear(),t.getMonth(),t.getDate()+1)},e.prevDate=e.selectedDates.prevDate,e.nextDate=e.selectedDates.nextDate},serializeData:function(){return{prevDate:this.__formatDate(this.selectedDates.prevDate),nextDate:this.__formatDate(this.selectedDates.nextDate)}},__setOptions:function(e){this.prevDate=e.prevDate,this.nextDate=e.nextDate,this.__rendered&&(this.ui.checkInText.html(this.__formatDate(this.prevDate)),this.ui.checkOutText.html(this.__formatDate(this.nextDate)),this.selectedDates=e,this.options.rootView.trigger("dates:changed"))},__showPrevDate:function(e){var t=this,n=new o({showRate:t.showRate,parentView:t,newLookStyle:!0});t.getRegion("calendar").empty(),n.on("date:been:select",function(i){var o=i,s=t.nextDate,a=!0;(null==s||o>=s)&&(s=r.nextDate(o)),t.__setOptions({prevDate:o,nextDate:s}),a?t.__showNextDate({nowMonth:n.nowMonth,prevDate:o,nextDate:s,showRate:e||t.showRate}):t.getRegion("calendar").empty()}),n.on("date:will:select",function(e){var i=e,o=t.nextDate;(null==o||i>=o)&&(o=r.nextDate(i)),n.showDateCSS({prevDate:i,nextDate:o})}),n.on("date:cancel",function(){t.getRegion("calendar").empty()}),n.initOptions({nowMonth:this.prevDate?new Date(this.prevDate.getFullYear(),this.prevDate.getMonth(),1):void 0,prevDate:this.prevDate,nextDate:this.nextDate,showRate:e||t.showRate}),t.getRegion("calendar").show(n),a.fitInViewpoint(t.ui.calendar),t.ui.checkOutText.removeClass("selected"),t.ui.checkInText.addClass("selected")},__showNextDate:function(e,t){var n=this,i=new o({showRate:n.showRate,parentView:n,newLookStyle:!0});n.getRegion("calendar").empty(),i.on("date:been:select",function(e){if(e>r.nowDate()){var t=n.prevDate,i=e;(null==t||t>=i)&&(t=r.prevDate(i)),n.__setOptions({prevDate:t,nextDate:i}),n.getRegion("calendar").empty()}}),i.on("date:will:select",function(e){if(e>r.nowDate()){var t=n.prevDate,o=e;(null==t||t>=o)&&(t=r.prevDate(o)),i.showDateCSS({prevDate:t,nextDate:o})}}),i.on("date:cancel",function(){n.getRegion("calendar").empty()}),i.initOptions(e||{nowMonth:this.prevDate?new Date(this.prevDate.getFullYear(),this.prevDate.getMonth(),1):void 0,prevDate:this.prevDate,nextDate:this.nextDate,showRate:t||n.showRate}),n.getRegion("calendar").show(i),a.fitInViewpoint(n.ui.calendar),n.ui.checkOutText.addClass("selected"),n.ui.checkInText.removeClass("selected")},__formatDate:function(e){return e?s(e).format(d):d}})},{"../../../../../../config/host":45,"../../../../ui/util":2122,"../../../prop-page/01-article/03-dates/calendar/locals":935,"./calendar/view":909,"./template.hbs":910,"backbone.marionette":6,moment:16}],910:[function(e,t,n){t.exports='<div  data-sect="controller-item-1" class="controller-item">\r\n    <div data-sect="checkin" class="date-picker">\r\n        <div class="booking-section-title">{{local "booking.check_in"}}</div>\r\n        <span class="date-picker-text booking-widget-content-text" data-sect="date-checkin-text">{{prevDate}}</span>\r\n    </div>\r\n    <span class="date-hyphen">-</span>\r\n    <div data-sect="checkout" class="date-picker">\r\n        <div class="booking-section-title">{{local "booking.check_out"}}</div>\r\n        <span class="date-picker-text booking-widget-content-text" data-sect="date-checkout-text">{{nextDate}}</span>\r\n    </div>\r\n</div>\r\n\r\n<div class="calendar-section">\r\n\r\n</div>\r\n'},{}],906:[function(e,t,n){var i=e("underscore"),o=e("backbone.marionette"),r=e("./codes/view"),s=e("../../../../ui/util");t.exports=o.ItemView.extend({className:"advanced-widget",template:Handlebars.compile(e("./template.hbs")),ui:{toggle:".advanced-toggle",codes:'[data-region="advanced-popup"]'},events:{"click @ui.toggle":function(){if(this.$el.hasClass("expanded"))this.ui.codes.hide(),this.$el.removeClass("expanded");else{if(!this.options.rootView.getBookingInfo().destination)return this.options.rootView.trigger("destination:advanced:error"),!1;this.ui.codes.show(),s.fitInViewpoint(this.codesView.$el),this.$el.addClass("expanded")}}},initialize:function(){var e=this;e.cancelFN=jQuery.proxy(e.__undo,e),e.codesView=new r({rootView:this.options.rootView}),e.codesView.__renderData={hasDestination:!!window.bookingWidgetData,isAmerican:window.bookingWidgetData&&window.bookingWidgetData.isAmerican,isAccessible:window.bookingWidgetData&&window.bookingWidgetData.accessibleroom},e.codesView.on("change:codes",function(t){e.codes=i.extend({},e.codes,t)}),e.codesView.on("render",function(){e.__resetCodes()}),e.options.rootView.on("destination:changed dates:changed guests:changed",function(){var t=e.options.rootView.getBookingInfo().destination;if(e.codesView.__renderData={hasDestination:!!t,isAmerican:t&&t.isAmerican,isAccessible:t&&t.accessibleroom},e.codesView.render(),e.options.rootView.getBookingInfo().destination){var n=e.codesView.$el.find('[data-type="promo"]'),i=e.codesView.$el.find('[data-type="group"]'),o=e.codesView.$el.find('[data-type="discount"]');(n.val()||i.val()||o.val())&&(e.ui.codes.show(),e.$el.addClass("expanded")),n.val()&&e.codesView.validateCode(n),i.val()&&e.codesView.validateCode(i),o.val()&&e.codesView.validateCode(o)}}),e.__resetCodes()},onRender:function(){this.ui.codes.append(this.codesView.render().el),jQuery(document).off("click",this.cancelFN).on("click",this.cancelFN)},onDestroy:function(){jQuery(document).off("click",this.cancelFN)},__resetCodes:function(){this.codes={promocode:"",groupcode:"",discountcode:"",AAA:!1,AARP:!1,GOV:!1,Accessible:!1}},__undo:function(e){var t=jQuery(e.target);this.$el.has(t).length||(this.ui.codes.hide(),this.$el.removeClass("expanded"))}})},{"../../../../ui/util":2122,"./codes/view":904,"./template.hbs":905,"backbone.marionette":6,underscore:42}],905:[function(e,t,n){t.exports='<div class="advanced-toggle" dir="ltr"><span class="advanced-toggle-text">{{local \'booking.advanced_search\'}} </span><span class="chervon-icon icon-icon_chervonUp"></span> <span\r\n        class="chervon-icon icon-icon_chervonDown"></span></div>\r\n\r\n<div data-region="advanced-popup" class="advanced-popup">\r\n\r\n</div>'},{}],904:[function(e,t,n){var i=e("underscore"),o=e("moment"),r=e("backbone.marionette"),s=e("../../../../../../../config/host"),a="YYYY-MM-DD",l={};t.exports=r.ItemView.extend({className:"codes-editor",template:Handlebars.compile(e("./template.hbs")),ui:{code:".code-input",checkbox:".checkbox-widget",errorTip:".error-tip-wrapper"},events:{"input @ui.code":function(e){var t=jQuery(e.target).data("type");if(l[t+"code"]=e.target.value,"hotel"===this.options.rootView.getBookingInfo().destination.type)this.__validateCode(e);else{var n={};n[t+"code"]=e.target.value,this.trigger("change:codes",n)}},"click @ui.checkbox":function(e){var t=jQuery(e.currentTarget),n=t.data("type");t.toggleClass("checked");var i={};i[n]=t.hasClass("checked"),this.trigger("change:codes",i)},"click @ui.errorTip":function(e){jQuery(e.currentTarget).siblings(".code-input").focus()}},initialize:function(){this.tips={promo:!1,group:!1,discount:!1}},serializeData:function(){return i.assign({},l,this.__renderData)},validateCode:function(e){var t=this,n=e.val(),i=e.data("type");if(e.parent().removeClass("valid invalid"),t.tips[i]=!1,t.__toggleTipClass(),n.length){var r=t.options.rootView.getBookingInfoParam(!0);r.localdate=o().format(a),r[i+"code"]=n;var l={};l[i+"code"]="",t.trigger("change:codes",l),(!t.options.rootView.destinationType||"promo"!==i&&"group"!==i)&&jQuery.getJSON(s.getURL("api",("promo"===i?i:i+"code")+"check"),r).then(function(o){o.valid?(e.parent().addClass("valid"),l[i+"code"]=n,t.trigger("change:codes",l)):(e.parent().addClass("invalid"),"discount"===i&&e.parent().find(".error-tip").html(o.message))},function(){e.parent().addClass("invalid"),"discount"===i&&e.parent().find(".error-tip").html(i18n.t("booking.discount_code_invalid"))}).always(function(){t.tips[i]=!0,t.__toggleTipClass()})}},__validateCode:i.debounce(function(e){var t=this;t.validateCode(jQuery(e.target))},500),__toggleTipClass:function(){this.tips.promo||this.tips.group||this.tips.discount?this.$el.addClass("has-tip"):this.$el.removeClass("has-tip")}})},{"../../../../../../../config/host":45,"./template.hbs":903,"backbone.marionette":6,moment:16,underscore:42}],903:[function(e,t,n){t.exports='<span class="codes-section {{#unless hasDestination}}disabled{{/unless}}">\r\n    <span class="code-wrapper">\r\n        <span class="error-tip-wrapper">\r\n            <span class="error-tip">{{local \'booking.promocode_invalid\'}}</span>\r\n            <span class="valid-tip">{{local \'booking.promocode_valid\'}}</span>\r\n        </span>\r\n         <input maxlength="50" type="text" {{#unless hasDestination}}disabled{{/unless}} data-type="promo" class="code-input" value="{{ promocode }}" placeholder="{{local "booking.add_a_promo_code"}}">\r\n    </span>\r\n    <span class="code-wrapper">\r\n        <span class="error-tip-wrapper">\r\n            <span class="error-tip">{{local \'booking.groupcode_invalid\'}}</span>\r\n            <span class="valid-tip">{{local \'booking.groupcode_valid\'}}</span>\r\n        </span>\r\n         <input maxlength="50" type="text" {{#unless hasDestination}}disabled{{/unless}} data-type="group" class="code-input" value="{{ groupcode }}" placeholder="{{local "booking.enter_a_group_code"}}">\r\n    </span>\r\n    <span class="code-wrapper">\r\n        <span class="error-tip-wrapper">\r\n            <span class="error-tip">{{local \'booking.discount_code_invalid\'}}</span>\r\n            <span class="valid-tip">{{local \'booking.discount_code_valid\'}}</span>\r\n        </span>\r\n         <input maxlength="50" type="text" {{#unless hasDestination}}disabled{{/unless}} data-type="discount" class="code-input" value="{{ discountcode }}" placeholder="{{local "booking.add_a_discount_code"}}">\r\n    </span>\r\n</span>\r\n{{#if isAmerican}}\r\n    <span class="aaa-section">\r\n        <span data-type="AAA" class="checkbox-widget">\r\n            <span class="checkbox-toggle"></span>\r\n            <span class="checkbox-label">{{local \'booking.AAA_CAA\'}}</span>\r\n        </span>\r\n        <span data-type="AARP" class="checkbox-widget">\r\n            <span class="checkbox-toggle"></span>\r\n            <span class="checkbox-label">{{local \'booking.Senior_AARP\'}}</span>\r\n        </span>\r\n        <span data-type="GOV" class="checkbox-widget">\r\n            <span class="checkbox-toggle"></span>\r\n            <span class="checkbox-label">{{local \'booking.Government\'}}</span>\r\n        </span>\r\n        <span class="id-tip">{{local \'booking.id_required\'}}</span>\r\n    </span>\r\n{{/if}}\r\n{{#if isAccessible}}\r\n    <span class="accessible-section">\r\n        <span data-type="Accessible" class="checkbox-widget">\r\n            <span class="checkbox-toggle"></span>\r\n            <span class="checkbox-label">{{local \'booking.need_accessible_room\'}}</span>\r\n        </span>\r\n    </span>\r\n{{/if}}'},{}],902:[function(e,t,n){var i=e("../../../../../config/host"),o=e("underscore");t.exports={fetch:function(){return jQuery.getJSON(i.getURL("api","book2/destinations/top10")).then(function(e){return o.map(e.data,function(e){return e.displayName="destination"===e.type?(e.number>1?i18n.t("booking.hotelsincity"):i18n.t("booking.hotelincity")).replace("{0}",e.name):e.name,e})})}}},{"../../../../../config/host":45,underscore:42}],901:[function(e,t,n){var i=e("../../../../../config/host"),o=e("underscore");t.exports={fetch:function(){return jQuery.getJSON(i.getURL("api","book2/searchhistory?_rand="+(new Date).getTime())).then(function(e){return this.cache?cache:(this.cache=o.map(e.data,function(e){return e.displayName="destination"===e.type?(e.number>1?i18n.t("booking.hotelsincity"):i18n.t("booking.hotelincity")).replace("{0}",e.name):e.name,e}),this.cache)})}}},{"../../../../../config/host":45,underscore:42}],900:[function(e,t,n){var i=e("../../../../../config/host");t.exports={fetch:function(){return jQuery.getJSON(i.getURL("api","quickbook/destinations/top10")).then(function(e){return e.data})}}},{"../../../../../config/host":45}],899:[function(e,t,n){var i=e("../../../../../config/host");t.exports={fetch:function(e){return jQuery.getJSON(i.getURL("api","quickbook/search"),e).then(function(e){return e.data})}}},{"../../../../../config/host":45}],898:[function(e,t,n){var i=e("../../../../../config/host");t.exports={url:i.getURL("api","epic/hotels"),addflags:function(e){this.url=i.getURL("api","epic/hotels?itemId="+e)},fetch:function(){return jQuery.getJSON(this.url).then(function(e){return e.data})}}},{"../../../../../config/host":45}],897:[function(e,t,n){var i=e("../../../../../config/host");t.exports={url:i.getURL("api","epic/cities"),addflags:function(e){this.url=i.getURL("api","epic/cities?itemId="+e)},fetch:function(){return jQuery.getJSON(this.url).then(function(e){return e.data})}}},{"../../../../../config/host":45}],896:[function(e,t,n){var i=e("../../../../../config/host"),o=e("underscore"),r=e("../../../ui/util");t.exports={fetch:function(e){return jQuery.getJSON(i.getURL("api","book2/search"),e).then(function(t){var n=[].concat(t.data.hotel,t.data.city).slice(0,20);return{data:o.map(n,function(t,n){return t.displayName="destination"===t.type?(t.number>1?i18n.t("booking.hotelsincity"):i18n.t("booking.hotelincity")).replace("{0}",t.name):t.name,t.nameHtml=r.highLightSearchTerm(e.keyword,t.displayName),t.sortindex=n,t})}})}}},{"../../../../../config/host":45,"../../../ui/util":2122,underscore:42}],895:[function(e,t,n){var i=e("underscore"),o=e("backbone.marionette"),r=e("../../../abmb/stateful.js"),s=e("./template.hbs"),a=e("../../../ui/util");t.exports=o.ItemView.extend(i.extend({},r,{className:"wgt-bottom-box",template:Handlebars.compile(s),initialize:function(){this.scrollFn=jQuery.proxy(this.__scroll,this)},onDestroy:function(){jQuery(window).off("scroll",this.scrollFn)},onRender:function(){jQuery(window).off("scroll",this.scrollFn).on("scroll",this.scrollFn).trigger("scroll")},__scroll:function(){var e=jQuery(window),t=e.height(),n=e.scrollTop(),i=a.ismobile();i&&n>t?this.$el.show():this.$el.hide()},__quickBookUrl:function(){var e=window.quickbookUrl;return e||(e="/en/"),e},serializeData:function(){return{quickbookurl:this.__quickBookUrl()}}}))},{"../../../abmb/stateful.js":72,"../../../ui/util":2122,"./template.hbs":894,"backbone.marionette":6,underscore:42}],894:[function(e,t,n){t.exports='<a href="{{quickbookurl}}" class="wgt-bottom-box"><span class="icon-icon_J006"></span>{{local "booking.check_availability"}}</a>'},{}],416:[function(e,t,n){var i=e("underscore"),o=(e("backbone"),e("backbone.marionette")),r=(e("hammerjs"),e("../abmb/hammerful.js")),s=(e("../ui/util"),e("./model")),a=e("./destination/view"),l=e("./calendar/view"),c=e("./occupancy/view"),d=e("./promocode/view");t.exports=o.ItemView.extend(i.extend({},r,{template:Handlebars.compile(e("./template.hbs")),className:"booking",ui:{scrollWrapper:".scroll-wrapper",subviews:".subviews",search:".search-trigger .wgt-sqbutton-blue",close:".close-trigger",tip:".search-trigger .tip"},events:{"click @ui.close":function(){this.triggerMethod("req:booking:close")},"click @ui.search":function(){this.model.search()}},onRender:function(){var e=this;e.model=new s({persist:!1}),e.model.on("change:hotel change:dates",function(){e.ui.search[e.model.isSearchable()?"removeClass":"addClass"]("disabled"),e.model.get("hotel").code?e.model.hasValidDates(!0)||e.ui.tip.text(i18n.t("booking.date_tip")):e.ui.tip.text(i18n.t("booking.destination_tip"))});var t=i.map([a,l,c,d],function(t){return new t({model:e.model})});i.each(t,function(n){e.ui.subviews.append(n.render().el),n.on("change",function(t){var i=n==t;n.$el.hasClass("booking-occupancy")||(n.$el.hasClass("booking-calendar change")&&!i&&e.model.trigger("check:code",{forceCheck:!0}),n.$el[i?"addClass":"removeClass"]("change")),i&&(n.tip?e.ui.tip.text(n.tip):e.model.get("hotel").code?e.ui.tip.text(i18n.t("booking.occupancy_tip")):e.ui.tip.text(i18n.t("booking.destination_tip")))}),n.on("req:change",function(){i.invoke(t,"trigger","change",n)})}),e.on("req:open",function(){var e=a;i.find(t,function(t){return t instanceof e}).trigger("req:change")}),this.bindHammerEvents("panstart",".scroll-wrapper",function(e){var t=this,n=t.ui.scrollWrapper.scrollTop();t.$el.on("panmove",function(e){e.gesture&&t.ui.scrollWrapper.scrollTop(n-e.gesture.deltaY)}),t.$el.one("panend",function(e){t.$el.off("panmove")})})}}))},{"../abmb/hammerful.js":69,"../ui/util":2122,"./calendar/view":400,"./destination/view":405,"./model":406,"./occupancy/view":409,"./promocode/view":414,"./template.hbs":415,backbone:8,"backbone.marionette":6,hammerjs:12,underscore:42}],415:[function(e,t,n){t.exports=' <div class="head">\r\n    <!--<h3 class="head-text">{{local "booking.make_a_booking"}}</h3>-->\r\n     <div class="head-text wgt-guarantee red">\r\n         <a href="/best-price-guarantee/"><span class="icon-icon_B012 guarantee-label"></span><p class="text">{{local "general.best_price_guarantee"}}</p></a>\r\n         <span class="icon-icon_B008 guarantee-detail">\r\n             <span class="label-popup">\r\n                <div class="content">\r\n                    <p>{{local "general.best_price_guarantee_tooltip"}}</p>\r\n                </div>\r\n             </span>\r\n         </span>\r\n     </div>\r\n    <div class="close-trigger">\r\n        <span>{{local "booking.cancel"}}</span>\r\n        <span class="icon-icon_B017"></span>\r\n    </div>\r\n</div>\r\n\r\n<div class="scroll-wrapper subviews"></div>\r\n<div class="search-trigger">\r\n    <p class="tip">{{local "booking.destination_tip"}}</p>\r\n    <a class="wgt-sqbutton-blue disabled">{{local "booking.search"}}</a>\r\n</div>\r\n'},{}],405:[function(e,t,n){var i=(e("underscore"),e("backbone"),e("backbone.marionette")),o=e("./list-view.js");t.exports=i.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),className:"booking-destination",initialize:function(){this.tip=i18n.t("booking.destination_tip")},ui:{input:"input"},events:{"click     @ui.input":function(e){this.trigger("req:change")},"input     @ui.input":function(e){var t=this.ui.input.val();this.list.keyword(t),this.model.set("searchTerm",t)},"arrowup   @ui.input":function(e){this.list.hover(-1)},"arrowdown @ui.input":function(e){this.list.hover(1)},"enter     @ui.input":function(e){this.model.search()||this.list.select()}},onRender:function(){var e=this;e.on("change",function(t){t==e&&e.ui.input.focus()}),e.model.on("change:hotel",function(){e.model.get("hotel").name&&e.ui.input.val(e.model.get("hotel").name)}),e.list=new o({model:e.model}),e.$el.append(e.list.el)}})},{"./list-view.js":403,"./template.hbs":404,backbone:8,"backbone.marionette":6,underscore:42}],404:[function(e,t,n){t.exports='<span class="heading"><span class="icon-icon_A002"></span>{{local \'booking.destination\'}}</span>\r\n<div class="destination-input"><input type="text" value="{{hotel.name}}" placeholder="{{local \'booking.What_destination\'}}" style="border-radius:0"/></div>'},{}],403:[function(e,t,n){var i=e("underscore"),o=(e("backbone"),e("backbone.marionette")),r=e("../../ui/util"),s=e("./list-collection.js");t.exports=o.ItemView.extend({template:Handlebars.compile(e("./list-template.hbs")),className:"booking-destination-list",select:function(){jQuery(this.$("li").get(this.model.get("hover"))).trigger("click")},keyword:i.throttle(function(e){this.model.set({keyword:e})},500),hover:function(e){this.model.set({hover:(this.model.get("hover")+e+this.model.get("destinations").length)%this.model.get("destinations").length||0}).trigger("change:hover")},events:{"mouseenter li":function(e){this.model.set({hover:jQuery(e.target).index()})},"click li":function(e){var t=this.model.get("destinations").at(this.$(e.target).data("index"));this.model.set({keyword:""}),t&&"hotel"==t.get("type")&&t.get("code")?this.model.set({hotel:t.attributes}):r.redirect(t?t.get("url")+"?fromsearch=true&searchterm="+encodeURIComponent(this.model.get("searchTerm")):r.getURL("lang","destinations"))}},initialize:function(){var e=this;this.model.on("change:hover",function(){jQuery(e.$("li").removeClass("hover").get(e.model.get("hover"))).addClass("hover")}).on("change:keyword",function(){var t={keyword:e.model.get("keyword")};e.model.set({hotel:{},hover:0,destinations:r.getInstance(s,t)}),e.model.get("destinations").remove(e.model.get("destinations").where(t))}).on("change:destinations",function(){e.render(),e.model.get("destinations").promise.then(function(){e.render()})}).set({keyword:""})}})},{"../../ui/util":2122,"./list-collection.js":401,"./list-template.hbs":402,backbone:8,"backbone.marionette":6,underscore:42}],402:[function(e,t,n){t.exports='<ul>\r\n    {{#if destinations.loaded}}\r\n        {{#unless destinations.length}} <li>{{local \'booking.error_no_matches\'}}                    </li>   {{/unless}}\r\n        {{#each destinations.models}}   <li class="item" data-index="{{@index}}">{{attributes.name}}</li>   {{/each}}\r\n    {{/if}}\r\n</ul>'},{}],401:[function(e,t,n){var i=(e("underscore"),e("backbone")),o=e("../../../../config/host.js");t.exports=i.Collection.extend({parse:function(e){return e.data},initialize:function(e){var t=this,n=e.keyword.length>=2;t.keyword=e.keyword,t.url=o.getURL("api","booking/destination?keyword="+e.keyword),t.promise=(n?t.fetch():jQuery.Deferred().resolve()).then(function(){t.loaded=n})}})},{"../../../../config/host.js":45,backbone:8,underscore:42}],398:[function(e,t,n){var i=(e("underscore"),e("backbone"),e("backbone.marionette")),o=e("../../ui/util");e("../../handlebar/helper.js"),t.exports=i.ItemView.extend({template:Handlebars.compile(e("./template.hbs")),events:{"click .booking-trigger":function(){if(window.isphone){var e=jQuery("html").attr("lang"),t=window.location.protocol+"//"+window.location.host;e&&(t+="/"+e),window.location.href!==t&&(window.location.href=t)}else this.trigger("req:booking:open")},"click .expand-trigger":function(){this.$el.data("expand")?this.trigger("req:booking:open"):o.tracker.set({"booking-bar-expanded":!o.tracker.get("booking-bar-expanded")})}},initialize:function(){o.tracker.on("change:booking-bar-expanded",function(){jQuery("body").attr("data-booking-bar-expanded",!!o.tracker.get("booking-bar-expanded"))}).set({"booking-bar-expanded":this.$el.data("expand")})}})},{"../../handlebar/helper.js":1025,"../../ui/util":2122,"./template.hbs":397,backbone:8,"backbone.marionette":6,underscore:42}],397:[function(e,t,n){t.exports='<span class="icon icon-icon_D001 expand-trigger"></span>\r\n	<!--<a class="booking-trigger">-->\r\n	    <!--<div class="question-block">-->\r\n	    	<!--<span class="question">{{local "booking.where_to_go"}}</span>-->\r\n	    <!--</div>-->\r\n	    <!--<div class="button">-->\r\n	        <!--<span class="icon-icon_D002"></span>-->\r\n	        <!--<span class="text">{{local "booking.book_now"}}</span>-->\r\n	    <!--</div>-->\r\n	<!--</a>-->\r\n'},{}],69:[function(e,t,n){var i=e("underscore");e("./../../../assets/lib/jquery.hammer.js"),t.exports={undelegateHammerEvents:function(){return hammerEle().off(".hammerEvents"+this.cid),this},unbindHammerEvents:function(e){var t=this.$(e);t.off(".hammerEvents"+this.cid)},bindHammerEvents:function(e,t,n,o){var r=this.$(t);this.getHammer(r)||r.hammer(o),r.on(e+".hammerEvents"+this.cid,i.bind(n,this))},delegateHammerEvents:function(e){var t=/^(\S+)\s*(.*)$/,n=i.defaults(i.result(this,"hammerOptions")||{}),o=this.getHammer()?this.$el:this.$el.hammer(n);if(!e&&!(e=i.result(this,"hammerEvents")))return this;for(var r in e){var s=e[r];if(i.isFunction(s)||(s=this[e[r]]),s){var a=r.match(t),l=a[1],c=a[2];l+=".hammerEvents"+this.cid,s=i.bind(s,this),""===c?o.on(l,s):o.on(l,c,s)}}return this},getHammer:function(e){var t=e||this.$el;return t.data("hammer")}}},{"./../../../assets/lib/jquery.hammer.js":44,underscore:42}],2:[function(e,t,n){!function(e,i){if("function"==typeof define&&define.amd)define(["module","exports"],i);else if("undefined"!=typeof n)i(t,n);else{var o={exports:{}};i(o,o.exports),e.autosize=o.exports}}(this,function(e,t){"use strict";function n(e){function t(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),l="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(l)&&(l=0),a()}function n(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function i(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function o(){if(0!==e.scrollHeight){var t=i(e),n=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+l+"px",c=e.clientWidth,t.forEach(function(e){e.node.scrollTop=e.scrollTop}),n&&(document.documentElement.scrollTop=n)}}function a(){
o();var t=Math.round(parseFloat(e.style.height)),i=window.getComputedStyle(e,null),r="content-box"===i.boxSizing?Math.round(parseFloat(i.height)):e.offsetHeight;if(t>r?"hidden"===i.overflowY&&(n("scroll"),o(),r="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==i.overflowY&&(n("hidden"),o(),r="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),d!==r){d=r;var a=s("autosize:resized");try{e.dispatchEvent(a)}catch(l){}}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!r.has(e)){var l=null,c=null,d=null,u=function(){e.clientWidth!==c&&a()},h=function(t){window.removeEventListener("resize",u,!1),e.removeEventListener("input",a,!1),e.removeEventListener("keyup",a,!1),e.removeEventListener("autosize:destroy",h,!1),e.removeEventListener("autosize:update",a,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),r["delete"](e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",h,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",a,!1),window.addEventListener("resize",u,!1),e.addEventListener("input",a,!1),e.addEventListener("autosize:update",a,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",r.set(e,{destroy:h,update:a}),t()}}function i(e){var t=r.get(e);t&&t.destroy()}function o(e){var t=r.get(e);t&&t.update()}var r="function"==typeof Map?new Map:function(){var e=[],t=[];return{has:function(t){return e.indexOf(t)>-1},get:function(n){return t[e.indexOf(n)]},set:function(n,i){-1===e.indexOf(n)&&(e.push(n),t.push(i))},"delete":function(n){var i=e.indexOf(n);i>-1&&(e.splice(i,1),t.splice(i,1))}}}(),s=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(a){s=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(l=function(e){return e},l.destroy=function(e){return e},l.update=function(e){return e}):(l=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e,t)}),e},l.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},l.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e}),t["default"]=l,e.exports=t["default"]})},{}]},{},[2183]);
require=function e(a,t,r){function i(n,c){if(!t[n]){if(!a[n]){var o="function"==typeof require&&require;if(!c&&o)return o(n,!0);if(s)return s(n,!0);var u=new Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[n]={exports:{}};a[n][0].call(l.exports,function(e){var t=a[n][1][e];return i(t?t:e)},l,l.exports,e,a,t,r)}return t[n].exports}for(var s="function"==typeof require&&require,n=0;n<r.length;n++)i(r[n]);return i}({2191:[function(e,a,t){!function(e){e(function(){function a(){var a=t.find(".show-hide article div"),r=t.find(".show-hide article"),i=[];a.each(function(a,t){var r=e(t);r.css("white-space","nowrap"),i.push(r.width()),r.css("white-space","normal")});var s=["21%","32%","28%","17.5%"];r.each(function(a,t){var r=e(t);i.reduce(function(e,a){return e+a});r.css("width",s[a])})}var t=e("#main-footer-wrapper"),r=t.find(".show-hide article p"),i=t.find(".more-btn"),s=e(".more-a.clearfix> span"),n=r.length,c=t.find("article");window.outerWidth<769&&t.delegate("article h6.active","click",function(e){e.preventDefault();var a=jQuery(e.currentTarget).parent().parent();a.hasClass("active")?(a.find("p").slideToggle(),a.removeClass("active")):(c.each(function(){jQuery(this).hasClass("active")&&(jQuery(this).removeClass("active"),jQuery(this).find("p").slideToggle())}),a.find("p").slideToggle(),a.addClass("active"))}),t.delegate(".more-btn","click",function(t){return t.preventDefault(),r.filter(":visible").length<n?r.slideDown(500,function(){r.prev().removeClass("active"),i.removeClass("active"),s.html(s.attr("data-less")),a(),e("html,body").animate({scrollTop:i.offset().top},0)}):r.slideUp(100,function(){r.prev().addClass("active"),i.addClass("active"),s.html(s.attr("data-more")),a()}),!1}),a();var o=e("[data-check='checkbox']");o.click(function(a){var t=jQuery(a.target);t.hasClass("checked")?t.removeClass("checked"):(t.addClass("checked"),e('[data-btn="subsBtn"]').css("background-color","#9f7d23"))})})}(window.jQuery||window.$),function(e){e(function(){e(".sel-a .sub-a a").on("click",function(){a()}),e("#subscribe_input").bind("keyup",function(e){"13"==e.keyCode&&a()});var a=function(){var a=e("[data-check='checkbox']"),t=e("[data-tick='status']");if(a.hasClass("checked")){e(".subscribe_error_tip").remove();var r=e("#subscribe_input").val(),i={email:r};e.ajax({type:"POST",url:"/api/silverpop/subscription",data:i,dataType:"json",success:function(a){a.success?(e('<p class="subscribe_error_tip succeed">').appendTo(".sel-a").html(a.msg),e("#subscribe_input").val("")):(e('<p class="subscribe_error_tip">').appendTo(".sel-a").html(a.msg),e("#subscribe_input").focus())}})}else e(".sel-a .sub-a a").css("background-color","#a2a2a2"),t.fadeIn("slow").delay(3e3).fadeOut("slow")}})}(window.jQuery||window.$),a.exports={}},{}]},{},[2191]);
require=function e(n,t,r){function o(f,a){if(!t[f]){if(!n[f]){var d="function"==typeof require&&require;if(!a&&d)return d(f,!0);if(i)return i(f,!0);var u=new Error("Cannot find module '"+f+"'");throw u.code="MODULE_NOT_FOUND",u}var s=t[f]={exports:{}};n[f][0].call(s.exports,function(e){var t=n[f][1][e];return o(t?t:e)},s,s.exports,e,n,t,r)}return t[f].exports}for(var i="function"==typeof require&&require,f=0;f<r.length;f++)o(r[f]);return o}({2214:[function(e,n,t){(function(e){!function(e){"use strict";var n=function(n,t,r){function o(e){return f.body?e():void setTimeout(function(){o(e)})}var i,f=e.document,a=f.createElement("link"),d=r||"all";if(t)i=t;else{var u=(f.body||f.getElementsByTagName("head")[0]).childNodes;i=u[u.length-1]}var s=f.styleSheets;a.rel="stylesheet",a.href=n,a.media="only x",o(function(){i.parentNode.insertBefore(a,t?i:i.nextSibling)});var l=function(e){for(var n=a.href,t=s.length;t--;)if(s[t].href===n)return e();setTimeout(function(){l(e)})},c=function(){a.removeEventListener("load",c),this.media=d};return a.addEventListener&&a.addEventListener("load",c),a.onloadcssdefined=l,l(function(){a.media!==d&&(a.media=d)}),a};"undefined"!=typeof t?t.loadCSS=n:e.loadCSS=n,n("//fast.fonts.net/cssapi/be2a212a-585a-4d58-a755-8b33a0c7181b.css")}("undefined"!=typeof e?e:this),n.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2214]);