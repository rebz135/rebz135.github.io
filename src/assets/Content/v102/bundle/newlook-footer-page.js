require=function e(n,t,i){function o(a,l){if(!t[a]){if(!n[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[a]={exports:{}};n[a][0].call(c.exports,function(e){var t=n[a][1][e];return o(t?t:e)},c,c.exports,e,n,t,i)}return t[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({2247:[function(e,n,t){var i=e("../component/layout/default-page-layout"),o=e("../component/new-look-footer/view"),r=i.extend({ui:{mainWrapper:".main-wrapper .newlook-footerPage"},onRender:function(){this.onDestroy(),this.ui.mainWrapper.length&&(this._mainView=new o({el:this.ui.mainWrapper.get(0)}).render())},onDestroy:function(){this._mainView&&(this._mainView.destroy(),this._mainView=null)}});new r({el:jQuery(".global-wrapper").get(0)}).render()},{"../component/layout/default-page-layout":1082,"../component/new-look-footer/view":1408}],1408:[function(e,n,t){var i=e("underscore"),o=(e("backbone"),e("backbone.marionette")),r=(e("../../component/ui/readmore/view"),e("../../component/ui/newlook-pager/view")),a=e("../../component/new-look-footer-dropdown/view"),l=e("../offers-2.0/02-toolbar/01-drop-down-menu/02-nation/waterfall"),s=e("./mobile-table.hbs");n.exports=o.LayoutView.extend({template:!1,regions:{pager:".newlook-footer-pager"},ui:{showNavList:".newlook-footerPage-mobile-nav-now",navList:".newlook-footerPage-mobile-nav-layer",navListCloseBtn:".newlook-footerPage-mobile-nav-header .icon-icon_B017",readmore:"[data-component='readmore']",releasesContainer:".newlook-pressreleases-releases-container",readAllNote:".newlook-memberbenefits-readall span",note:".newlook-memberbenefits-notecontainer",question:".nk2-tours-faq-question",questionItem:".nk2-tours-faq-item",tabs:".nk2-sitemap-tabs .nk2-sitemap-tabs-item",view:".nk2-sitemap-view .nk2-sitemap-view-item",privacy:".newlook-privacy-and-cookie-policy",playVideo:".newlook-mymillennium-video-container-play",videoContainer:".newlook-mymillennium-video-container"},events:{"click @ui.showNavList":function(){this.ui.navList.show()},"click @ui.navListCloseBtn":function(){this.ui.navList.hide()},"click @ui.readAllNote":function(e){var n=jQuery(e.target).closest(".newlook-memberbenefits-readall");n.hide().next().slideDown()},"click @ui.question":function(e){var n=jQuery(e.currentTarget).parent();n.hasClass("selected")||this.ui.questionItem.removeClass("selected"),jQuery(e.currentTarget).parent().toggleClass("selected")},"click @ui.tabs":function(e){var n=jQuery(e.currentTarget);n.hasClass("selected")||this.__changeTabsStyle(n)},"click @ui.playVideo":function(){var e=this;this.ui.playVideo.hide(),this.ui.videoContainer.find(".newlook-mymillennium-video-container-placeholder").hide();var n=this.ui.videoContainer.find("video");n[0].play(),n.on("ended",function(){e.ui.playVideo.show(),e.ui.videoContainer.find(".newlook-mymillennium-video-container-placeholder").show()})}},initialize:function(){},onRender:function(){var e=this,n=this.ui.tabs.filter(".selected");e.renderDropdownView(),e.showPagerView(),e.renderMobileTableOfRichText(),0===n.length&&(n=this.ui.tabs.eq(0)),n.length&&this.__changeTabsStyle(n)},onShow:function(){var e=this;ReadMoreView.getInstance(e.ui.readmore).collapseContent()},renderDropdownView:function(){var e=jQuery(".nk2-footer-dropdown");if(e.length)for(var n=0;n<e.length;n++)a.autoCreate(e.get(n)).on("item:selected",function(e){location.href=e.url})},showPagerView:function(){var e,n=this,t=n.ui.releasesContainer.attr("data-pageSize");this.ui.releasesContainer&&this.ui.releasesContainer.find("li").length&&(e=this.ui.releasesContainer.find("li"),this.showList(e,1,t)),e&&e.length>t&&(this.pagerView=new r({totalPage:Math.ceil(this.ui.releasesContainer.find("li").length/t)}),this.getRegion("pager").show(this.pagerView),this.pagerView.on("movetoprev",function(i){n.showList(e,i,t)}),this.pagerView.on("movetonext",function(i){n.showList(e,i,t)}),this.pagerView.on("movetoitem",function(i){n.showList(e,i,t)}))},showList:function(e,n,t){e.each(function(e){var i=Math.ceil((e+1)/t);i==n?jQuery(this).show():jQuery(this).hide()})},__changeTabsStyle:function(e){var n=this.ui.tabs.index(e);n>=0&&this.__changeViewStyle(this.ui.view.eq(n)),this.ui.tabs.removeClass("selected"),e.addClass("selected")},__changeViewStyle:function(e){this.__delGlobalListener(),this.ui.view.addClass("hidden"),e.removeClass("hidden");var n=e.data();if("waterfall"===n.listStyle){var t=e.find(".nk2-waterfall-container");t.length>0&&(this.__addGlobalListener(t),this.__waterfallContainer(t))}},__waterfallContainer:function(e){for(var n=0;n<e.length;n++)new l({container:e.get(n),colCount:3})},__addGlobalListener:function(e){var n=this;n._globalListener=i.debounce(function(){n.__waterfallContainer(e)},300),jQuery(window).on("resize",n._globalListener)},__delGlobalListener:function(){var e=this;e._globalListener&&(jQuery(window).off("resize",e._globalListener),e._globalListener=null)},renderMobileTableOfRichText:function(){var e=this;e.ui.privacy.length&&e.ui.privacy.find("table").each(function(e,n){var t=[],o=[],r=jQuery(n);r.find("tr").eq(0).find("td").length?r.find("tr").eq(0).find("td").each(function(e,n){var i=jQuery(n).text().trim();t.push(i)}):r.find("tr").eq(0).find("th").length&&r.find("tr").eq(0).find("th").each(function(e,n){var i=jQuery(n).text().trim();t.push(i)}),r.find("tr").each(function(e,n){var i=[];0!==e&&jQuery(n).find("td").each(function(e,n){var o=jQuery(n).text().trim(),r={title:t[e],content:o};i.push(r)}),i.length&&o.push(i)}),o.length&&(o.reverse(),i.each(o,function(e){var t=Handlebars.compile(s)(e);jQuery(n).after(t)}))})}})},{"../../component/new-look-footer-dropdown/view":1406,"../../component/ui/newlook-pager/view":2102,"../../component/ui/readmore/view":2110,"../offers-2.0/02-toolbar/01-drop-down-menu/02-nation/waterfall":1502,"./mobile-table.hbs":1407,backbone:8,"backbone.marionette":6,underscore:42}],1407:[function(e,n,t){n.exports='<div class="table-block">\r\n    {{#each this}}\r\n        <p class="block-title">{{title}}</p>\r\n        <p>{{content}}</p>\r\n    {{/each}}\r\n</div>'},{}]},{},[2247]);