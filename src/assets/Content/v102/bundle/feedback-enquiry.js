require=function e(t,i,a){function r(n,u){if(!i[n]){if(!t[n]){var c="function"==typeof require&&require;if(!u&&c)return c(n,!0);if(o)return o(n,!0);var d=new Error("Cannot find module '"+n+"'");throw d.code="MODULE_NOT_FOUND",d}var s=i[n]={exports:{}};t[n][0].call(s.exports,function(e){var i=t[n][1][e];return r(i?i:e)},s,s.exports,e,t,i,a)}return i[n].exports}for(var o="function"==typeof require&&require,n=0;n<a.length;n++)r(a[n]);return r}({2190:[function(e,t,i){var a=(e("underscore"),e("backbone.marionette"),e("../component/layout/default-page-layout.js")),r=e("../component/feedback-enquiry/feedback.js"),o=a.extend({ui:{container:".feedback-form"},onRender:function(){new r({el:this.ui.container}).render()}});new o({el:jQuery(".global-wrapper")}).render()},{"../component/feedback-enquiry/feedback.js":828,"../component/layout/default-page-layout.js":1082,"backbone.marionette":6,underscore:42}],828:[function(e,t,i){var a=(e("underscore"),e("backbone"),e("backbone-validation"),e("backbone.marionette")),r=e("../ui/validator"),o=e("../ui/util"),n=e("../../../config/host"),u=e("./model/feedback-model.js");t.exports=FeedBackView=a.ItemView.extend({template:!1,onRender:function(){this.model=new u,o.getUrlParamQuestion("isApp")&&"true"==o.getUrlParamQuestion("isApp")&&(this.model.set("ischeckcaptcha",!1),this.model.validation.captcha.required=!1),o.titlegender(this.$("[data-bind=title]")),r.bind(this,{populateuserinfo:!0}),this.ui.hotelListText.click(function(e){var t=jQuery(e.target);t.parents('[datatype="dropDownList"]').removeClass("null input-error").addClass("pass")})},ui:{img:"[data-feedback='img']",voice:"[data-feedback='voice']",item_img:"[data-item='img']",hotelListText:"[datatype='dropListText'] .hotel_list-hotels"},events:{"click .feedback-submit":function(){var e=this;e.trigger("save:form"),e.model.set("hotel_name",e.getHotelId()),e.model.isValid(!0)&&(e.model.set("feedback",encodeURIComponent(e.model.get("feedback"))),o.loading({errortimeout:5e3,container:e.el,promise:e.model.save({},{emulateForm:!0,emulateJSON:!0,headers:{"Content-Type":"application/json; charset=utf-8"},success:function(){jQuery(".tpl-full-screen-mask").show(),jQuery(".tpl-full-screen-mask").on("click",".wgt-sqbutton-black",function(e){o.getUrlParamQuestion("isApp")&&"true"==o.getUrlParamQuestion("isApp")&&(e.preventDefault(),window.location.reload())})},error:function(t,i){e.trigger("save:error",i.responseJSON)}})}))},"click @ui.img":function(){var e=n.getURL("api","captcha/image?r="+Math.random());jQuery(".code-bottom .captcha-img").each(function(t,i){jQuery(i).attr("src",e)}),this.ui.item_img.attr("src",e)},"click @ui.voice":function(){this.IF_CLICK_AUDIO&&this.autoPlay()}},autoPlay:function(){var e=this;e.IF_CLICK_AUDIO=!1,e.audio.setAttribute("src",n.getURL("api","captcha/voice?r="+Math.random())),e.audio.load(),e.audio.play(),e.audio.oncanplay=function(){e.audio.play()},e.audio.onended=function(){e.IF_CLICK_AUDIO=!0}},initialize:function(){this.IF_CLICK_AUDIO=!0,this.audio=new Audio},getHotelId:function(){var e=this.$el.find("[data-bind='hotel_name']").attr("data-value");return e}})},{"../../../config/host":45,"../ui/util":2122,"../ui/validator":2123,"./model/feedback-model.js":829,backbone:8,"backbone-validation":3,"backbone.marionette":6,underscore:42}],829:[function(e,t,i){var a=(e("underscore"),e("backbone")),r=e("../../../../config/host.js").host,o=e("../../ui/validator.js"),n=o.latinRegex3;o.latinNumericsSymbols,t.exports=a.Model.extend({url:function(){return r+"/api/request/feedback"},defaults:{},validation:{title:{required:!0},first_name:{pattern:n,required:!0},last_name:{pattern:n,required:!0},email:{pattern:"email",required:!0},hotel_name:{required:!0},membership_number:{required:!1,pattern:"digits"},feedback_type:{required:!0},feedback:{required:!0},captcha:{required:!0}},initialize:function(e){},parse:function(e,t){return e}})},{"../../../../config/host.js":45,"../../ui/validator.js":2123,backbone:8,underscore:42}]},{},[2190]);